/*! For license information please see main.92db0fdc.js.LICENSE.txt */
!function(){var e={8364:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,a),!0;case 6:return c.fn.call(c.context,t,r,i,a,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},8108:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports={assign:Object.assign,getHeight:function(e,t,n,r){return void 0===r&&(r="height"),"center"===n?(e[r]+t[r])/2:e.height}}},function(e,t,n){var r=n(3),i=function(){function e(e,t){void 0===t&&(t={}),this.options=t,this.rootNode=r(e,t)}return e.prototype.execute=function(){throw new Error("please override this method")},e}();e.exports=i},function(e,t,n){var r=n(4),i=["LR","RL","TB","BT","H","V"],a=["LR","RL","H"],o=i[0];e.exports=function(e,t,n){var s=t.direction||o;if(t.isHorizontal=function(e){return a.indexOf(e)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(e,t);else if(s===i[1])n(e,t),e.right2left();else if(s===i[2])n(e,t);else if(s===i[3])n(e,t),e.bottom2top();else if(s===i[4]||s===i[5]){var u=r(e,t),l=u.left,c=u.right;n(l,t),n(c,t),t.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),e.x=l.x,e.y=c.y;var h=e.getBoundingBox();t.isHorizontal?h.top<0&&e.translate(0,-h.top):h.left<0&&e.translate(-h.left,0)}var d=t.fixedRoot;return void 0===d&&(d=!0),d&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),function(e,t){if(t.radial){var n=t.isHorizontal?["x","y"]:["y","x"],r=n[0],i=n[1],a={x:1/0,y:1/0},o={x:-1/0,y:-1/0},s=0;e.DFTraverse((function(e){s++;var t=e.x,n=e.y;a.x=Math.min(a.x,t),a.y=Math.min(a.y,n),o.x=Math.max(o.x,t),o.y=Math.max(o.y,n)}));var u=o[i]-a[i];if(0===u)return;var l=2*Math.PI/s;e.DFTraverse((function(t){var n=(t[i]-a[i])/u*(2*Math.PI-l)+l,o=t[r]-e[r];t.x=Math.cos(n)*o,t.y=Math.sin(n)*o}))}}(e,t),e}},function(e,t,n){var r=n(0),i={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var t=e.label||" ";return e.width||18*t.split("").length}};function a(e,t){var n=this;if(n.vgap=n.hgap=0,e instanceof a)return e;n.data=e;var r=t.getHGap(e),i=t.getVGap(e);return n.preH=t.getPreH(e),n.preV=t.getPreV(e),n.width=t.getWidth(e),n.height=t.getHeight(e),n.width+=n.preH,n.height+=n.preV,n.id=t.getId(e),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(a.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(e,t){var n=this;n.hgap+=e,n.vgap+=t,n.width+=2*e,n.height+=2*t},eachNode:function(e){for(var t,n=[this];t=n.shift();)e(t),n=t.children.concat(n)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t,n=[this];t=n.shift();)e(t),n=n.concat(t.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)})),e},translate:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.eachNode((function(n){n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.x=e.x-2*(e.x-t.left)-e.width})),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.y=e.y-2*(e.y-t.top)-e.height})),e.translate(0,t.height)}}),e.exports=function(e,t,n){void 0===t&&(t={});var o,s=new a(e,t=r.assign({},i,t)),u=[s];if(!n&&!e.collapsed)for(;o=u.shift();)if(!o.data.collapsed){var l=t.getChildren(o.data),c=l?l.length:0;if(o.children=new Array(c),l&&c)for(var h=0;h<c;h++){var d=new a(l[h],t);o.children[h]=d,u.push(d),d.parent=o,d.depth=o.depth+1}}return s}},function(e,t,n){var r=n(3);e.exports=function(e,t){for(var n=r(e.data,t,!0),i=r(e.data,t,!0),a=e.children.length,o=Math.round(a/2),s=t.getSide||function(e,t){return t<o?"right":"left"},u=0;u<a;u++){var l=e.children[u];"right"===s(l,u)?i.children.push(l):n.children.push(l)}return n.eachNode((function(e){e.isRoot()||(e.side="left")})),i.eachNode((function(e){e.isRoot()||(e.side="right")})),{left:n,right:i}}},function(e,t,n){var r={compactBox:n(6),dendrogram:n(8),indented:n(10),mindmap:n(12)};e.exports=r},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var i=n(1),a=n(7),o=n(2),s=n(0),u=function(e){function t(){return e.apply(this,arguments)||this}var n,i;return i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),t.prototype.execute=function(){return o(this.rootNode,this.options,a)},t}(i),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t){function n(e,t,n,r){void 0===r&&(r=[]);var i=this;i.w=e||0,i.h=t||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(e,t,n){n?e.y+=t:e.x+=t,e.children.forEach((function(e){r(e,t,n)}))}function i(e,t){var n=t?e.y:e.x;return e.children.forEach((function(e){n=Math.min(i(e,t),n)})),n}function a(e,t){r(e,-i(e,t),t)}function o(e,t,n){n?t.y=e.x:t.x=e.x,e.c.forEach((function(e,r){o(e,t.children[r],n)}))}function s(e,t,n){void 0===n&&(n=0),t?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach((function(e){s(e,t,n)}))}n.fromNode=function(e,t){if(!e)return null;var r=[];return e.children.forEach((function(e){r.push(n.fromNode(e,t))})),t?new n(e.height,e.width,e.x,r):new n(e.width,e.height,e.y,r)},e.exports=function(e,t){void 0===t&&(t={});var r=t.isHorizontal;function i(e){0===e.cs?(e.el=e,e.er=e,e.msel=e.mser=0):(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function u(e,t,n){for(var r=e.c[t-1],i=r.mod,a=e.c[t],o=a.mod;null!==r&&null!==a;){d(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(o+a.prelim);s>0&&(o+=s,l(e,t,n.index,s));var u=d(r),f=d(a);u<=f&&null!==(r=h(r))&&(i+=r.mod),u>=f&&null!==(a=c(a))&&(o+=a.mod)}!r&&a?function(e,t,n,r){var i=e.c[0].el;i.tl=n;var a=r-n.mod-e.c[0].msel;i.mod+=a,i.prelim-=a,e.c[0].el=e.c[t].el,e.c[0].msel=e.c[t].msel}(e,t,a,o):r&&!a&&function(e,t,n,r){var i=e.c[t].er;i.tr=n;var a=r-n.mod-e.c[t].mser;i.mod+=a,i.prelim-=a,e.c[t].er=e.c[t-1].er,e.c[t].mser=e.c[t-1].mser}(e,t,r,i)}function l(e,t,n,r){e.c[t].mod+=r,e.c[t].msel+=r,e.c[t].mser+=r,function(e,t,n,r){if(n!==t-1){var i=t-n;e.c[n+1].shift+=r/i,e.c[t].shift-=r/i,e.c[t].change-=r-r/i}}(e,t,n,r)}function c(e){return 0===e.cs?e.tl:e.c[0]}function h(e){return 0===e.cs?e.tr:e.c[e.cs-1]}function d(e){return e.y+e.h}function f(e,t,n){for(;null!==n&&e>=n.low;)n=n.nxt;return{low:e,index:t,nxt:n}}s(e,r);var p=n.fromNode(e,r);return function e(t){if(0!==t.cs){e(t.c[0]);for(var n=f(d(t.c[0].el),0,null),r=1;r<t.cs;++r){e(t.c[r]);var a=d(t.c[r].er);u(t,r,n),n=f(a,r,n)}!function(e){e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}(t),i(t)}else i(t)}(p),function e(t,n){n+=t.mod,t.x=t.prelim+n,function(e){for(var t=0,n=0,r=0;r<e.cs;r++)n+=(t+=e.c[r].shift)+e.c[r].change,e.c[r].mod+=n}(t);for(var r=0;r<t.cs;r++)e(t.c[r],n)}(p,0),o(p,e,r),a(e,r),e}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var i=n(1),a=n(9),o=n(2),s=n(0),u=function(e){function t(){return e.apply(this,arguments)||this}var n,i;return i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),t.prototype.execute=function(){var e=this;return e.rootNode.width=0,o(e.rootNode,e.options,a)},t}(i),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t,n){var r=n(0);function i(e,t){void 0===e&&(e=0),void 0===t&&(t=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=t}var a={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function o(e,t,n){n?(t.x=e.x,t.y=e.y):(t.x=e.y,t.y=e.x),e.children.forEach((function(e,r){o(e,t.children[r],n)}))}e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},a,t);var n,s=0,u=function e(t){if(!t)return null;t.width=0,t.depth&&t.depth>s&&(s=t.depth);var n=t.children,r=n.length,a=new i(t.height,[]);return n.forEach((function(t,n){var i=e(t);a.children.push(i),0===n&&(a.leftChild=i),n===r-1&&(a.rightChild=i)})),a.originNode=t,a.isLeaf=t.isLeaf(),a}(e);return function e(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=s;else{var n=t.children.map((function(t){return e(t)})),r=Math.min.apply(null,n);t.drawingDepth=r-1}return t.drawingDepth}(u),function e(r){r.x=r.drawingDepth*t.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+t.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=t.subTreeSep)),n=r):(r.children.forEach((function(t){e(t)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(u),o(u,e,t.isHorizontal),e}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var i=n(1),a=n(11),o=n(4),s=n(0),u=["LR","RL","H"],l=u[0],c=function(e){function t(){return e.apply(this,arguments)||this}var n,i;return i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),t.prototype.execute=function(){var e=this.options,t=this.rootNode;e.isHorizontal=!0;var n=e.indent,r=void 0===n?20:n,i=e.dropCap,s=void 0===i||i,c=e.direction,h=void 0===c?l:c,d=e.align;if(h&&-1===u.indexOf(h))throw new TypeError("Invalid direction: "+h);if(h===u[0])a(t,r,s,d);else if(h===u[1])a(t,r,s,d),t.right2left();else if(h===u[2]){var f=o(t,e),p=f.left,v=f.right;a(p,r,s,d),p.right2left(),a(v,r,s,d);var g=p.getBoundingBox();v.translate(g.width,0),t.x=v.x-t.width/2}return t},t}(i),h={};e.exports=function(e,t){return t=s.assign({},h,t),new c(e,t).execute()}},function(e,t,n){var r=n(0);e.exports=function(e,t,n,i){var a=null;e.eachNode((function(e){!function(e,t,n,i,a){var o=("function"===typeof n?n(e):n)*e.depth;if(!i)try{if(e.id===e.parent.children[0].id)return e.x+=o,void(e.y=t?t.y:0)}catch(l){}if(e.x+=o,t){if(e.y=t.y+r.getHeight(t,e,a),t.parent&&e.parent.id!==t.parent.id){var s=t.parent,u=s.y+r.getHeight(s,e,a);e.y=u>e.y?u:e.y}}else e.y=0}(e,a,t,n,i),a=e}))}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var i=n(1),a=n(13),o=n(2),s=n(0),u=function(e){function t(){return e.apply(this,arguments)||this}var n,i;return i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),t.prototype.execute=function(){return o(this.rootNode,this.options,a)},t}(i),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t,n){var r=n(0);function i(e,t){var n=0;return e.children.length?e.children.forEach((function(e){n+=i(e,t)})):n=e.height,e._subTreeSep=t.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}function a(e){var t=e.children,n=t.length;if(n){t.forEach((function(e){a(e)}));var r=t[0],i=t[n-1],o=i.y-r.y+i.height,s=0;if(t.forEach((function(e){s+=e.totalHeight})),o>e.height)e.y=r.y+o/2-e.height/2;else if(1!==t.length||e.height>s){var u=e.y+(e.height-o)/2-r.y;t.forEach((function(e){e.translate(0,u)}))}else e.y=(r.y+r.height/2+i.y+i.height/2)/2-e.height/2}}var o={getSubTreeSep:function(){return 0}};e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},o,t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse((function(e){e.x=e.parent.x+e.parent.width})),e.parent=null,i(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode((function(e){var t=e.children,n=t.length;if(n){var r=t[0];if(r.startY=e.startY+e._subTreeSep,1===n)r.y=e.y+e.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var a=t[i];a.startY=t[i-1].startY+t[i-1].totalHeight,a.y=a.startY+a.totalHeight/2-a.height/2}}}})),a(e)}}])},e.exports=t()},9806:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},2516:function(e,t,n){var r=n(9806),i=n(8298),a=Object.hasOwnProperty,o=Object.create(null);for(var s in r)a.call(r,s)&&(o[r[s]]=s);var u=e.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}u.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=u.get.hsl(e),n="hsl";break;case"hwb":t=u.get.hwb(e),n="hwb";break;default:t=u.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},u.get.rgb=function(e){if(!e)return null;var t,n,i,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],n=0;n<3;n++){var s=2*n;o[n]=parseInt(t.slice(s,s+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:a.call(r,t[1])?((o=r[t[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},u.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var e=i(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},u.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},u.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},u.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},u.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},u.to.keyword=function(e){return o[e.slice(0,3)]}},4640:function(e,t,n){e.exports={graphlib:n(3429),layout:n(4568),debug:n(7027),util:{time:n(1054).time,notime:n(1054).notime},version:n(1824)}},3184:function(e,t,n){"use strict";var r=n(6875),i=n(4105);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?i(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},i={};function a(o){r.has(i,o)||(i[o]=!0,n[o]=!0,r.forEach(e.outEdges(o),(function(e){r.has(n,e.w)?t.push(e):a(e.w)})),delete n[o])}return r.forEach(e.nodes(),a),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},269:function(e,t,n){var r=n(6875),i=n(1054);function a(e,t,n,r,a,o){var s={width:0,height:0,rank:o,borderType:t},u=a[t][o-1],l=i.addDummyNode(e,"border",s,n);a[t][o]=l,e.setParent(l,r),u&&e.setEdge(u,l,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var i=e.children(n),o=e.node(n);if(i.length&&r.forEach(i,t),r.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,u=o.maxRank+1;s<u;++s)a(e,"borderLeft","_bl",n,o,s),a(e,"borderRight","_br",n,o,s)}}))}},2738:function(e,t,n){"use strict";var r=n(6875);function i(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){a(e.edge(t))}))}function a(e){var t=e.width;e.width=e.height,e.height=t}function o(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||i(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){o(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,o),r.has(n,"y")&&o(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){s(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,s),r.has(n,"x")&&s(n)}))}(e),i(e))}}},89:function(e){function t(){var e={};e._next=e._prev=e,this._sentinel=e}function n(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function r(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=t,t.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return n(t),t},t.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&n(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},t.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,r)),n=n._prev;return"["+e.join(", ")+"]"}},7027:function(e,t,n){var r=n(6875),i=n(1054),a=n(3429).Graph;e.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},3429:function(e,t,n){var r;try{r=n(5548)}catch(i){}r||(r=window.graphlib),e.exports=r},4105:function(e,t,n){var r=n(6875),i=n(3429).Graph,a=n(89);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new i,o=0,s=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,i=t(e),a=r+i;n.setEdge(e.v,e.w,a),s=Math.max(s,n.node(e.v).out+=i),o=Math.max(o,n.node(e.w).in+=i)}));var l=r.range(s+o+3).map((function(){return new a})),c=o+1;return r.forEach(n.nodes(),(function(e){u(l,c,n.node(e))})),{graph:n,buckets:l,zeroIdx:c}}(e,t||o),l=function(e,t,n){var r,i=[],a=t[t.length-1],o=t[0];for(;e.nodeCount();){for(;r=o.dequeue();)s(e,t,n,r);for(;r=a.dequeue();)s(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){i=i.concat(s(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,(function(t){return e.outEdges(t.v,t.w)})),!0)};var o=r.constant(1);function s(e,t,n,i,a){var o=a?[]:void 0;return r.forEach(e.inEdges(i.v),(function(r){var i=e.edge(r),s=e.node(r.v);a&&o.push({v:r.v,w:r.w}),s.out-=i,u(t,n,s)})),r.forEach(e.outEdges(i.v),(function(r){var i=e.edge(r),a=r.w,o=e.node(a);o.in-=i,u(t,n,o)})),e.removeNode(i.v),o}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},4568:function(e,t,n){"use strict";var r=n(6875),i=n(3184),a=n(9439),o=n(1911),s=n(1054).normalizeRanks,u=n(8022),l=n(1054).removeEmptyRanks,c=n(7559),h=n(269),d=n(2738),f=n(7495),p=n(309),v=n(1054),g=n(3429).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?v.time:v.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new g({multigraph:!0,compound:!0}),n=M(e.graph());return t.setGraph(r.merge({},y,_(n,m),r.pick(n,b))),r.forEach(e.nodes(),(function(n){var i=M(e.node(n));t.setNode(n,r.defaults(_(i,x),E)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var i=M(e.edge(n));t.setEdge(n,r.merge({},k,_(i,w),r.pick(i,S)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){i.run(e)})),t("    nestingGraph.run",(function(){c.run(e)})),t("    rank",(function(){o(v.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};v.addDummyNode(e,"edge-proxy",i,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){l(e)})),t("    nestingGraph.cleanup",(function(){c.cleanup(e)})),t("    normalizeRanks",(function(){s(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=r.max(t,i.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){a.run(e)})),t("    parentDummyChains",(function(){u(e)})),t("    addBorderSegments",(function(){h(e)})),t("    order",(function(){f(e)})),t("    insertSelfEdges",(function(){!function(e){var t=v.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,i){var a=e.node(t);a.order=i+n,r.forEach(a.selfEdges,(function(t){v.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:i+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){d.adjust(e)})),t("    position",(function(){p(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),a=e.node(n.borderBottom),o=e.node(r.last(n.borderLeft)),s=e.node(r.last(n.borderRight));n.width=Math.abs(s.x-o.x),n.height=Math.abs(a.y-i.y),n.x=o.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){a.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){d.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,a=0,o=e.graph(),s=o.marginx||0,u=o.marginy||0;function l(e){var r=e.x,o=e.y,s=e.width,u=e.height;t=Math.min(t,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,o-u/2),a=Math.max(a,o+u/2)}r.forEach(e.nodes(),(function(t){l(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&l(n)})),t-=s,i-=u,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=i})),r.forEach(e.edges(),(function(n){var a=e.edge(n);r.forEach(a.points,(function(e){e.x-=t,e.y-=i})),r.has(a,"x")&&(a.x-=t),r.has(a,"y")&&(a.y-=i)})),o.width=n-t+s,o.height=a-i+u}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,i=e.edge(t),a=e.node(t.v),o=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=a),i.points.unshift(v.intersectRect(a,n)),i.points.push(v.intersectRect(o,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){i.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(e.edges(),(function(n){var i=e.edge(n),a=t.edge(n);i.points=a.points,r.has(a,"x")&&(i.x=a.x,i.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],E={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function _(e,t){return r.mapValues(r.pick(e,t),Number)}function M(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},6875:function(e,t,n){var r;try{r={cloneDeep:n(3197),constant:n(9043),defaults:n(5410),each:n(3393),filter:n(3514),find:n(7291),flatten:n(1748),forEach:n(2556),forIn:n(5694),has:n(3710),isUndefined:n(4946),last:n(9140),map:n(3300),mapValues:n(6334),max:n(3740),merge:n(7142),min:n(866),minBy:n(8183),now:n(1930),pick:n(7821),range:n(1043),reduce:n(4002),sortBy:n(6845),uniqueId:n(8682),values:n(9614),zipObject:n(9774)}}catch(i){}r||(r=window._),e.exports=r},7559:function(e,t,n){var r=n(6875),i=n(1054);function a(e,t,n,o,s,u,l){var c=e.children(l);if(c.length){var h=i.addBorderNode(e,"_bt"),d=i.addBorderNode(e,"_bb"),f=e.node(l);e.setParent(h,l),f.borderTop=h,e.setParent(d,l),f.borderBottom=d,r.forEach(c,(function(r){a(e,t,n,o,s,u,r);var i=e.node(r),c=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?o:2*o,v=c!==f?1:s-u[l]+1;e.setEdge(h,c,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(f,d,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(l)||e.setEdge(t,h,{weight:0,minlen:s+u[l]})}else l!==t&&e.setEdge(t,l,{weight:0,minlen:n})}e.exports={run:function(e){var t=i.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(i,a){var o=e.children(i);o&&o.length&&r.forEach(o,(function(e){n(e,a+1)})),t[i]=a}return r.forEach(e.children(),(function(e){n(e,1)})),t}(e),o=r.max(r.values(n))-1,s=2*o+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=s}));var u=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(r){a(e,t,s,u,o,n,r)})),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},9439:function(e,t,n){"use strict";var r=n(6875),i=n(1054);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,a,o=t.v,s=e.node(o).rank,u=t.w,l=e.node(u).rank,c=t.name,h=e.edge(t),d=h.labelRank;if(l===s+1)return;for(e.removeEdge(t),a=0,++s;s<l;++a,++s)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:t,rank:s},n=i.addDummyNode(e,"edge",r,"_d"),s===d&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),e.setEdge(o,n,{weight:h.weight},c),0===a&&e.graph().dummyChains.push(n),o=n;e.setEdge(o,u,{weight:h.weight},c)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)}))}}},6438:function(e,t,n){var r=n(6875);e.exports=function(e,t,n){var i,a={};r.forEach(n,(function(n){for(var r,o,s=e.parent(n);s;){if((r=e.parent(s))?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void t.setEdge(o,s);s=r}}))}},8962:function(e,t,n){var r=n(6875);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,(function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}}))}},8082:function(e,t,n){var r=n(6875),i=n(3429).Graph;e.exports=function(e,t,n){var a=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),o=new i({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(i){var s=e.node(i),u=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||a),r.forEach(e[n](i),(function(t){var n=t.v===i?t.w:t.v,a=o.edge(n,i),s=r.isUndefined(a)?0:a.weight;o.setEdge(n,i,{weight:e.edge(t).weight+s})})),r.has(s,"minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),o}},7205:function(e,t,n){"use strict";var r=n(6875);function i(e,t,n){for(var i=r.zipObject(n,r.map(n,(function(e,t){return t}))),a=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:i[t.w],weight:e.edge(t).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var u=r.map(new Array(s),(function(){return 0})),l=0;return r.forEach(a.forEach((function(e){var t=e.pos+o;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*n}))),l}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}},7495:function(e,t,n){"use strict";var r=n(6875),i=n(4448),a=n(7205),o=n(1754),s=n(8082),u=n(6438),l=n(3429).Graph,c=n(1054);function h(e,t,n){return r.map(t,(function(t){return s(e,t,n)}))}function d(e,t){var n=new l;r.forEach(e,(function(e){var i=e.graph().root,a=o(e,i,n,t);r.forEach(a.vs,(function(t,n){e.node(t).order=n})),u(e,n,a.vs)}))}function f(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=c.maxRank(e),n=h(e,r.range(1,t+1),"inEdges"),o=h(e,r.range(t-1,-1,-1),"outEdges"),s=i(e);f(e,s);for(var u,l=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){d(p%2?n:o,p%4>=2),s=c.buildLayerMatrix(e);var g=a(e,s);g<l&&(v=0,u=r.cloneDeep(s),l=g)}f(e,u)}},4448:function(e,t,n){"use strict";var r=n(6875);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),i=r.max(r.map(n,(function(t){return e.node(t).rank}))),a=r.map(r.range(i+1),(function(){return[]}));var o=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(o,(function n(i){if(r.has(t,i))return;t[i]=!0;var o=e.node(i);a[o.rank].push(i),r.forEach(e.successors(i),n)})),a}},2909:function(e,t,n){"use strict";var r=n(6875);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var i=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],i=n[e.w];r.isUndefined(t)||r.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function i(t){return function(n){n.in.push(t),0===--n.indegree&&e.push(n)}}for(;e.length;){var a=e.pop();t.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,i(a))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},1754:function(e,t,n){var r=n(6875),i=n(8962),a=n(2909),o=n(3271);e.exports=function e(t,n,s,u){var l=t.children(n),c=t.node(n),h=c?c.borderLeft:void 0,d=c?c.borderRight:void 0,f={};h&&(l=r.filter(l,(function(e){return e!==h&&e!==d})));var p=i(t,l);r.forEach(p,(function(n){if(t.children(n.v).length){var i=e(t,n.v,s,u);f[n.v]=i,r.has(i,"barycenter")&&(a=n,o=i,r.isUndefined(a.barycenter)?(a.barycenter=o.barycenter,a.weight=o.weight):(a.barycenter=(a.barycenter*a.weight+o.barycenter*o.weight)/(a.weight+o.weight),a.weight+=o.weight))}var a,o}));var v=a(p,s);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(v,f);var g=o(v,u);if(h&&(g.vs=r.flatten([h,g.vs,d],!0),t.predecessors(h).length)){var m=t.node(t.predecessors(h)[0]),y=t.node(t.predecessors(d)[0]);r.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+m.order+y.order)/(g.weight+2),g.weight+=2}return g}},3271:function(e,t,n){var r=n(6875),i=n(1054);function a(e,t,n){for(var i;t.length&&(i=r.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}e.exports=function(e,t){var n=i.partition(e,(function(e){return r.has(e,"barycenter")})),o=n.lhs,s=r.sortBy(n.rhs,(function(e){return-e.i})),u=[],l=0,c=0,h=0;o.sort((d=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),h=a(u,s,h),r.forEach(o,(function(e){h+=e.vs.length,u.push(e.vs),l+=e.barycenter*e.weight,c+=e.weight,h=a(u,s,h)}));var d;var f={vs:r.flatten(u,!0)};c&&(f.barycenter=l/c,f.weight=c);return f}},8022:function(e,t,n){var r=n(6875);e.exports=function(e){var t=function(e){var t={},n=0;function i(a){var o=n;r.forEach(e.children(a),i),t[a]={low:o,lim:n++}}return r.forEach(e.children(),i),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),i=r.edgeObj,a=function(e,t,n,r){var i,a,o=[],s=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),o.push(i)}while(i&&(t[i].low>u||l>t[i].lim));a=i,i=r;for(;(i=e.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(e,t,i.v,i.w),o=a.path,s=a.lca,u=0,l=o[u],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(l=o[u])!==s&&e.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<o.length-1&&e.node(l=o[u+1]).minRank<=r.rank;)u++;l=o[u]}e.setParent(n,l),n=e.successors(n)[0]}}))}},6199:function(e,t,n){"use strict";var r=n(6875),i=n(3429).Graph,a=n(1054);function o(e,t){var n={};return r.reduce(t,(function(t,i){var a=0,o=0,s=t.length,l=r.last(i);return r.forEach(i,(function(t,c){var h=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=h?e.node(h).order:s;(h||t===l)&&(r.forEach(i.slice(o,c+1),(function(t){r.forEach(e.predecessors(t),(function(r){var i=e.node(r),o=i.order;!(o<a||d<o)||i.dummy&&e.node(t).dummy||u(n,r,t)}))})),o=c+1,a=d)})),i})),n}function s(e,t){var n={};function i(t,i,a,o,s){var l;r.forEach(r.range(i,a),(function(i){l=t[i],e.node(l).dummy&&r.forEach(e.predecessors(l),(function(t){var r=e.node(t);r.dummy&&(r.order<o||r.order>s)&&u(n,t,l)}))}))}return r.reduce(t,(function(t,n){var a,o=-1,s=0;return r.forEach(n,(function(r,u){if("border"===e.node(r).dummy){var l=e.predecessors(r);l.length&&(a=e.node(l[0]).order,i(n,s,u,o,a),s=u,o=a)}i(n,s,n.length,a,t.length)})),n})),n}function u(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function l(e,t,n){if(t>n){var i=t;t=n,n=i}return r.has(e[t],n)}function c(e,t,n,i){var a={},o={},s={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){a[e]=e,o[e]=e,s[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var u=i(e);if(u.length){u=r.sortBy(u,(function(e){return s[e]}));for(var c=(u.length-1)/2,h=Math.floor(c),d=Math.ceil(c);h<=d;++h){var f=u[h];o[e]===e&&t<s[f]&&!l(n,e,f)&&(o[f]=e,o[e]=a[e]=a[f],t=s[f])}}}))})),{root:a,align:o}}function h(e,t,n,a,o){var s={},u=function(e,t,n,a){var o=new i,s=e.graph(),u=function(e,t,n){return function(i,a,o){var s,u=i.node(a),l=i.node(o),c=0;if(c+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(c+=n?s:-s),s=0,c+=(u.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,a);return r.forEach(t,(function(t){var i;r.forEach(t,(function(t){var r=n[t];if(o.setNode(r),i){var a=n[i],s=o.edge(a,r);o.setEdge(a,r,Math.max(u(e,t,i),s||0))}i=t}))})),o}(e,t,n,o),l=o?"borderLeft":"borderRight";function c(e,t){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return c((function(e){s[e]=u.inEdges(e).reduce((function(e,t){return Math.max(e,s[t.v]+u.edge(t))}),0)}),u.predecessors.bind(u)),c((function(t){var n=u.outEdges(t).reduce((function(e,t){return Math.min(e,s[t.w]-u.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(s[t]=Math.max(s[t],n))}),u.successors.bind(u)),r.forEach(a,(function(e){s[e]=s[n[e]]})),s}function d(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var a=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+a,n),i=Math.min(t-a,i)})),n-i}))}function f(e,t){var n=r.values(t),i=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(o){var s,u=n+o,l=e[u];if(l!==t){var c=r.values(l);(s="l"===o?i-r.min(c):a-r.max(c))&&(e[u]=r.mapValues(l,(function(e){return e+s})))}}))}))}function p(e,t){return r.mapValues(e.ul,(function(n,i){if(t)return e[t.toLowerCase()][i];var a=r.sortBy(r.map(e,i));return(a[1]+a[2])/2}))}e.exports={positionX:function(e){var t,n=a.buildLayerMatrix(e),i=r.merge(o(e,n),s(e,n)),u={};r.forEach(["u","d"],(function(a){t="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var o=("u"===a?e.predecessors:e.successors).bind(e),s=c(e,t,i,o),l=h(e,t,s.root,s.align,"r"===n);"r"===n&&(l=r.mapValues(l,(function(e){return-e}))),u[a+n]=l}))}));var l=d(e,u);return f(u,l),p(u,e.graph().align)},findType1Conflicts:o,findType2Conflicts:s,addConflict:u,hasConflict:l,verticalAlignment:c,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p}},309:function(e,t,n){"use strict";var r=n(6875),i=n(1054),a=n(6199).positionX;e.exports=function(e){(function(e){var t=i.buildLayerMatrix(e),n=e.graph().ranksep,a=0;r.forEach(t,(function(t){var i=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=a+i/2})),a+=i+n}))})(e=i.asNonCompoundGraph(e)),r.forEach(a(e),(function(t,n){e.node(n).x=t}))}},3011:function(e,t,n){"use strict";var r=n(6875),i=n(3429).Graph,a=n(4279).slack;function o(e,t){return r.forEach(e.nodes(),(function n(i){r.forEach(t.nodeEdges(i),(function(r){var o=r.v,s=i===o?r.w:o;e.hasNode(s)||a(t,r)||(e.setNode(s,{}),e.setEdge(i,s,{}),n(s))}))})),e.nodeCount()}function s(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return a(t,n)}))}function u(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new i({directed:!1}),l=e.nodes()[0],c=e.nodeCount();r.setNode(l,{});for(;o(r,e)<c;)t=s(r,e),n=r.hasNode(t.v)?a(e,t):-a(e,t),u(r,e,n);return r}},1911:function(e,t,n){"use strict";var r=n(4279).longestPath,i=n(3011),a=n(4638);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:s(e);break;case"tight-tree":!function(e){r(e),i(e)}(e);break;case"longest-path":o(e)}};var o=r;function s(e){a(e)}},4638:function(e,t,n){"use strict";var r=n(6875),i=n(3011),a=n(4279).slack,o=n(4279).longestPath,s=n(3429).alg.preorder,u=n(3429).alg.postorder,l=n(1054).simplify;function c(e){e=l(e),o(e);var t,n=i(e);for(f(n),h(n,e);t=v(n);)m(n,e,t,g(n,e,t))}function h(e,t){var n=u(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=d(e,t,n)}(e,t,n)}))}function d(e,t,n){var i=e.node(n).parent,a=!0,o=t.edge(n,i),s=0;return o||(a=!1,o=t.edge(i,n)),s=o.weight,r.forEach(t.nodeEdges(n),(function(r){var o,u,l=r.v===n,c=l?r.w:r.v;if(c!==i){var h=l===a,d=t.edge(r).weight;if(s+=h?d:-d,o=n,u=c,e.hasEdge(o,u)){var f=e.edge(n,c).cutvalue;s+=h?-f:f}}})),s}function f(e,t){arguments.length<2&&(t=e.nodes()[0]),p(e,{},1,t)}function p(e,t,n,i,a){var o=n,s=e.node(i);return t[i]=!0,r.forEach(e.neighbors(i),(function(a){r.has(t,a)||(n=p(e,t,n,a,i))})),s.low=o,s.lim=n++,a?s.parent=a:delete s.parent,n}function v(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function g(e,t,n){var i=n.v,o=n.w;t.hasEdge(i,o)||(i=n.w,o=n.v);var s=e.node(i),u=e.node(o),l=s,c=!1;s.lim>u.lim&&(l=u,c=!0);var h=r.filter(t.edges(),(function(t){return c===y(e,e.node(t.v),l)&&c!==y(e,e.node(t.w),l)}));return r.minBy(h,(function(e){return a(t,e)}))}function m(e,t,n,i){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(i.v,i.w,{}),f(e),h(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),i=s(e,n);i=i.slice(1),r.forEach(i,(function(n){var r=e.node(n).parent,i=t.edge(n,r),a=!1;i||(i=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?i.minlen:-i.minlen)}))}(e,t)}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=c,c.initLowLimValues=f,c.initCutValues=h,c.calcCutValue=d,c.leaveEdge=v,c.enterEdge=g,c.exchangeEdges=m},4279:function(e,t,n){"use strict";var r=n(6875);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(i){var a=e.node(i);if(r.has(t,i))return a.rank;t[i]=!0;var o=r.min(r.map(e.outEdges(i),(function(t){return n(t.w)-e.edge(t).minlen})));return o!==Number.POSITIVE_INFINITY&&void 0!==o&&null!==o||(o=0),a.rank=o}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},1054:function(e,t,n){"use strict";var r=n(6875),i=n(3429).Graph;function a(e,t,n,i){var a;do{a=r.uniqueId(i)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function o(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:a,simplify:function(e){var t=(new i).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,i=e.x,a=e.y,o=t.x-i,s=t.y-a,u=e.width/2,l=e.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*u>Math.abs(o)*l?(s<0&&(l=-l),n=l*o/s,r=l):(o<0&&(u=-u),n=u,r=u*s/o);return{x:i+n,y:a+r}},buildLayerMatrix:function(e){var t=r.map(r.range(o(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var i=e.node(n),a=i.rank;r.isUndefined(a)||(t[a][i.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var i=e.node(n);r.has(i,"rank")&&(i.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,a=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%a!==0?--i:i&&r.forEach(t,(function(t){e.node(t).rank+=i}))}))},addBorderNode:function(e,t,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return a(e,"border",i,t)},maxRank:o,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},1824:function(e){e.exports="0.8.5"},5548:function(e,t,n){var r=n(6280);e.exports={Graph:r.Graph,json:n(8480),alg:n(9749),version:r.version}},6309:function(e,t,n){var r=n(2607);e.exports=function(e){var t,n={},i=[];function a(i){r.has(n,i)||(n[i]=!0,t.push(i),r.each(e.successors(i),a),r.each(e.predecessors(i),a))}return r.each(e.nodes(),(function(e){t=[],a(e),t.length&&i.push(t)})),i}},4818:function(e,t,n){var r=n(2607);function i(e,t,n,a,o,s){r.has(a,t)||(a[t]=!0,n||s.push(t),r.each(o(t),(function(t){i(e,t,n,a,o,s)})),n&&s.push(t))}e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],s={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);i(e,t,"post"===n,s,a,o)})),o}},185:function(e,t,n){var r=n(3811),i=n(2607);e.exports=function(e,t,n){return i.transform(e.nodes(),(function(i,a){i[a]=r(e,a,t,n)}),{})}},3811:function(e,t,n){var r=n(2607),i=n(9183);e.exports=function(e,t,n,r){return function(e,t,n,r){var a,o,s={},u=new i,l=function(e){var t=e.v!==a?e.v:e.w,r=s[t],i=n(e),l=o.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=a,u.decrease(t,l))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},u.add(e,n)}));for(;u.size()>0&&(a=u.removeMin(),(o=s[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return s}(e,String(t),n||a,r||function(t){return e.outEdges(t)})};var a=r.constant(1)},2560:function(e,t,n){var r=n(2607),i=n(4881);e.exports=function(e){return r.filter(i(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},8348:function(e,t,n){var r=n(2607);e.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach((function(e){r[e]={},r[e][e]={distance:0},i.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var i=n.v===e?n.w:n.v,a=t(n);r[e][i]={distance:a,predecessor:e}}))})),i.forEach((function(e){var t=r[e];i.forEach((function(n){var a=r[n];i.forEach((function(n){var r=a[e],i=t[n],o=a[n],s=r.distance+i.distance;s<o.distance&&(o.distance=s,o.predecessor=i.predecessor)}))}))})),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},9749:function(e,t,n){e.exports={components:n(6309),dijkstra:n(3811),dijkstraAll:n(185),findCycles:n(2560),floydWarshall:n(8348),isAcyclic:n(3964),postorder:n(3783),preorder:n(5458),prim:n(3397),tarjan:n(4881),topsort:n(7262)}},3964:function(e,t,n){var r=n(7262);e.exports=function(e){try{r(e)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},3783:function(e,t,n){var r=n(4818);e.exports=function(e,t){return r(e,t,"post")}},5458:function(e,t,n){var r=n(4818);e.exports=function(e,t){return r(e,t,"pre")}},3397:function(e,t,n){var r=n(2607),i=n(3884),a=n(9183);e.exports=function(e,t){var n,o=new i,s={},u=new a;function l(e){var r=e.v===n?e.w:e.v,i=u.priority(r);if(void 0!==i){var a=t(e);a<i&&(s[r]=n,u.decrease(r,a))}}if(0===e.nodeCount())return o;r.each(e.nodes(),(function(e){u.add(e,Number.POSITIVE_INFINITY),o.setNode(e)})),u.decrease(e.nodes()[0],0);var c=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(s,n))o.setEdge(n,s[n]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.nodeEdges(n).forEach(l)}return o}},4881:function(e,t,n){var r=n(2607);e.exports=function(e){var t=0,n=[],i={},a=[];function o(s){var u=i[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach((function(e){r.has(i,e)?i[e].onStack&&(u.lowlink=Math.min(u.lowlink,i[e].index)):(o(e),u.lowlink=Math.min(u.lowlink,i[e].lowlink))})),u.lowlink===u.index){var l,c=[];do{l=n.pop(),i[l].onStack=!1,c.push(l)}while(s!==l);a.push(c)}}return e.nodes().forEach((function(e){r.has(i,e)||o(e)})),a}},7262:function(e,t,n){var r=n(2607);function i(e){var t={},n={},i=[];if(r.each(e.sinks(),(function o(s){if(r.has(n,s))throw new a;r.has(t,s)||(n[s]=!0,t[s]=!0,r.each(e.predecessors(s),o),delete n[s],i.push(s))})),r.size(t)!==e.nodeCount())throw new a;return i}function a(){}e.exports=i,i.CycleException=a,a.prototype=new Error},9183:function(e,t,n){var r=n(2607);function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},i.prototype.has=function(e){return r.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var i=this._arr,a=i.length;return n[e]=a,i.push({key:e,priority:t}),this._decrease(a),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},i.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],a=n[t];n[e]=a,n[t]=i,r[a.key]=e,r[i.key]=t}},3884:function(e,t,n){"use strict";var r=n(2607);e.exports=s;var i="\0",a="\0",o="\x01";function s(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[a]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function u(e,t){e[t]?e[t]++:e[t]=1}function l(e,t){--e[t]||delete e[t]}function c(e,t,n,a){var s=""+t,u=""+n;if(!e&&s>u){var l=s;s=u,u=l}return s+o+u+o+(r.isUndefined(a)?i:a)}function h(e,t){return c(e,t.v,t.w,t.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(e){return this._label=e,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},s.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},s.prototype.setNodes=function(e,t){var n=arguments,i=this;return r.each(e,(function(e){n.length>1?i.setNode(e,t):i.setNode(e)})),this},s.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=a,this._children[e]={},this._children[a][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},s.prototype.node=function(e){return this._nodes[e]},s.prototype.hasNode=function(e){return r.has(this._nodes,e)},s.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},s.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t=a;else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},s.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},s.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==a)return t}},s.prototype.children=function(e){if(r.isUndefined(e)&&(e=a),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if(e===a)return this.nodes();if(this.hasNode(e))return[]}},s.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},s.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},s.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},s.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},s.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var i={};function a(e){var r=n.parent(e);return void 0===r||t.hasNode(r)?(i[e]=r,r):r in i?i[r]:a(r)}return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,a(e))})),t},s.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(e,t){var n=this,i=arguments;return r.reduce(e,(function(e,r){return i.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},s.prototype.setEdge=function(){var e,t,n,i,a=!1,o=arguments[0];"object"===typeof o&&null!==o&&"v"in o?(e=o.v,t=o.w,n=o.name,2===arguments.length&&(i=arguments[1],a=!0)):(e=o,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return a&&(this._edgeLabels[s]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=a?i:this._defaultEdgeLabelFn(e,t,n);var l=function(e,t,n,r){var i=""+t,a=""+n;if(!e&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};r&&(s.name=r);return s}(this._isDirected,e,t,n);return e=l.v,t=l.w,Object.freeze(l),this._edgeObjs[s]=l,u(this._preds[t],e),u(this._sucs[e],t),this._in[t][s]=l,this._out[e][s]=l,this._edgeCount++,this},s.prototype.edge=function(e,t,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(e,t,n){var i=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[t],e),l(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},s.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.v===t})):i}},s.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.w===t})):i}},s.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},6280:function(e,t,n){e.exports={Graph:n(3884),version:n(7428)}},8480:function(e,t,n){var r=n(2607),i=n(3884);function a(e){return r.map(e.nodes(),(function(t){var n=e.node(t),i=e.parent(t),a={v:t};return r.isUndefined(n)||(a.value=n),r.isUndefined(i)||(a.parent=i),a}))}function o(e){return r.map(e.edges(),(function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:o(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},2607:function(e,t,n){var r;try{r={clone:n(4019),constant:n(9043),each:n(3393),filter:n(3514),has:n(3710),isArray:n(7463),isEmpty:n(6871),isFunction:n(3376),isUndefined:n(4946),keys:n(8892),map:n(3300),reduce:n(4002),size:n(7761),transform:n(5186),union:n(6561),values:n(9614)}}catch(i){}r||(r=window._),e.exports=r},7428:function(e){e.exports="2.1.8"},1749:function(e){function t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}e.exports=function(e){var n=function(e){for(var n=[],r=0;r<e.length;r++){for(;n.length>=2&&t(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}return n.pop(),n}(e),r=function(e){for(var n=e.reverse(),r=[],i=0;i<n.length;i++){for(;r.length>=2&&t(r[r.length-2],r[r.length-1],n[i])<=0;)r.pop();r.push(n[i])}return r.pop(),r}(e).concat(n);return r.push(e[0]),r}},3021:function(e){e.exports={toXy:function(e,t){return void 0===t?e.slice():e.map((function(e){return new Function("pt","return [pt"+t[0]+",pt"+t[1]+"];")(e)}))},fromXy:function(e,t){return void 0===t?e.slice():e.map((function(e){return new Function("pt","const o = {}; o"+t[0]+"= pt[0]; o"+t[1]+"= pt[1]; return o;")(e)}))}}},1058:function(e){function t(e,t){this._cells=[],this._cellSize=t,this._reverseCellSize=1/t;for(var n=0;n<e.length;n++){var r=e[n],i=this.coordToCellNum(r[0]),a=this.coordToCellNum(r[1]);if(this._cells[i])this._cells[i][a]?this._cells[i][a].push(r):this._cells[i][a]=[r];else{var o=[];o[a]=[r],this._cells[i]=o}}}t.prototype={cellPoints:function(e,t){return void 0!==this._cells[e]&&void 0!==this._cells[e][t]?this._cells[e][t]:[]},rangePoints:function(e){for(var t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),r=this.coordToCellNum(e[2]),i=this.coordToCellNum(e[3]),a=[],o=t;o<=r;o++)for(var s=n;s<=i;s++)for(var u=0;u<this.cellPoints(o,s).length;u++)a.push(this.cellPoints(o,s)[u]);return a},removePoint:function(e){for(var t,n=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this._cells[n][r],a=0;a<i.length;a++)if(i[a][0]===e[0]&&i[a][1]===e[1]){t=a;break}return i.splice(t,1),i},trunc:Math.trunc||function(e){return e-e%1},coordToCellNum:function(e){return this.trunc(e*this._reverseCellSize)},extendBbox:function(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}},e.exports=function(e,n){return new t(e,n)}},8433:function(e,t,n){"use strict";var r=n(6457),i=n(1058),a=n(3021),o=n(1749);function s(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function u(e,t,n){var r=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]],a=s(e,t),o=s(e,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*o)}function l(e,t){for(var n=0;n<t.length-1;n++){var i=[t[n],t[n+1]];if(!(e[0][0]===i[0][0]&&e[0][1]===i[0][1]||e[0][0]===i[1][0]&&e[0][1]===i[1][1])&&r(e,i))return!0}return!1}function c(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function h(e,t,n){for(var r,i,a=null,o=f,s=f,c=0;c<t.length;c++)r=u(e[0],e[1],t[c]),i=u(e[1],e[0],t[c]),r>o&&i>s&&!l([e[0],t[c]],n)&&!l([e[1],t[c]],n)&&(o=r,s=i,a=t[c]);return a}function d(e,t,n,r,i){for(var a=!1,o=0;o<e.length-1;o++){var u=[e[o],e[o+1]],l=u[0][0]+","+u[0][1]+","+u[1][0]+","+u[1][1];if(!(s(u[0],u[1])<t||i.has(l))){var f=0,p=c(u),v=void 0,g=void 0,m=void 0;do{v=(p=r.extendBbox(p,f))[2]-p[0],g=p[3]-p[1],m=h(u,r.rangePoints(p),e),f++}while(null===m&&(n[0]>v||n[1]>g));v>=n[0]&&g>=n[1]&&i.add(l),null!==m&&(e.splice(o+1,0,m),r.removePoint(m),a=!0)}}return a?d(e,t,n,r,i):e}var f=Math.cos(90/(180/Math.PI)),p=.6;e.exports=function(e,t,n){var r=t||20,s=function(e){for(var t=[e[0]],n=e[0],r=1;r<e.length;r++){var i=e[r];n[0]===i[0]&&n[1]===i[1]||t.push(i),n=i}return t}(function(e){return e.sort((function(e,t){return e[0]-t[0]||e[1]-t[1]}))}(a.toXy(e,n)));if(s.length<4){var u=s.concat([s[0]]);return n?a.fromXy(u,n):u}var l=function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=e.length-1;a>=0;a--)e[a][0]<t&&(t=e[a][0]),e[a][1]<n&&(n=e[a][1]),e[a][0]>r&&(r=e[a][0]),e[a][1]>i&&(i=e[a][1]);return[r-t,i-n]}(s),c=[l[0]*p,l[1]*p],h=o(s),f=s.filter((function(e){return h.indexOf(e)<0})),v=Math.ceil(1/(s.length/(l[0]*l[1]))),g=d(h,Math.pow(r,2),c,i(f,v),new Set);return n?a.fromXy(g,n):g}},6457:function(e){function t(e,t,n,r,i,a){var o=(a-t)*(n-e)-(r-t)*(i-e);return o>0||!(o<0)}e.exports=function(e,n){var r=e[0][0],i=e[0][1],a=e[1][0],o=e[1][1],s=n[0][0],u=n[0][1],l=n[1][0],c=n[1][1];return t(r,i,s,u,l,c)!==t(a,o,s,u,l,c)&&t(r,i,a,o,s,u)!==t(r,i,a,o,l,c)}},2782:function(e,t,n){"use strict";n.r(t),n.d(t,{isAnyArray:function(){return i}});var r=Object.prototype.toString;function i(e){var t=r.call(e);return t.endsWith("Array]")&&!t.includes("Big")}},6002:function(e,t,n){var r=n(2220)(n(7735),"DataView");e.exports=r},807:function(e,t,n){var r=n(5518),i=n(2744),a=n(8203),o=n(3911),s=n(911);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},9533:function(e,t,n){var r=n(3504),i=n(8134),a=n(6305),o=n(7309),s=n(5333);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},3081:function(e,t,n){var r=n(2220)(n(7735),"Map");e.exports=r},371:function(e,t,n){var r=n(2626),i=n(20),a=n(9367),o=n(4427),s=n(6771);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},2938:function(e,t,n){var r=n(2220)(n(7735),"Promise");e.exports=r},175:function(e,t,n){var r=n(2220)(n(7735),"Set");e.exports=r},3149:function(e,t,n){var r=n(371),i=n(1378),a=n(8333);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},5535:function(e,t,n){var r=n(9533),i=n(2358),a=n(8448),o=n(5827),s=n(8719),u=n(8087);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,e.exports=l},6971:function(e,t,n){var r=n(7735).Symbol;e.exports=r},3910:function(e,t,n){var r=n(7735).Uint8Array;e.exports=r},4369:function(e,t,n){var r=n(2220)(n(7735),"WeakMap");e.exports=r},8835:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1895:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},9276:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},947:function(e,t,n){var r=n(5977);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},7659:function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},9021:function(e,t,n){var r=n(8230),i=n(322),a=n(7463),o=n(6842),s=n(9603),u=n(6233),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),c=!n&&i(e),h=!n&&!c&&o(e),d=!n&&!c&&!h&&u(e),f=n||c||h||d,p=f?r(e.length,String):[],v=p.length;for(var g in e)!t&&!l.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||p.push(g);return p}},6258:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},7409:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},8044:function(e){e.exports=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},4810:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},3477:function(e,t,n){var r=n(3967)("length");e.exports=r},1807:function(e,t,n){var r=n(8750),i=n(9790);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},7449:function(e,t,n){var r=n(8750),i=n(9790),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},5067:function(e,t,n){var r=n(9790);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1395:function(e,t,n){var r=n(6653),i=n(8892);e.exports=function(e,t){return e&&r(t,i(t),e)}},992:function(e,t,n){var r=n(6653),i=n(3267);e.exports=function(e,t){return e&&r(t,i(t),e)}},8750:function(e,t,n){var r=n(7965);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5581:function(e,t,n){var r=n(5535),i=n(1895),a=n(7449),o=n(1395),s=n(992),u=n(840),l=n(7137),c=n(9673),h=n(5138),d=n(3404),f=n(1315),p=n(2923),v=n(3251),g=n(6869),m=n(6051),y=n(7463),b=n(6842),x=n(5888),E=n(2967),w=n(8954),k=n(8892),S=n(3267),_="[object Arguments]",M="[object Function]",T="[object Object]",A={};A[_]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[T]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[M]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,C,P,R,N){var O,L=1&n,D=2&n,I=4&n;if(C&&(O=R?C(t,P,R,N):C(t)),void 0!==O)return O;if(!E(t))return t;var F=y(t);if(F){if(O=v(t),!L)return l(t,O)}else{var U=p(t),B=U==M||"[object GeneratorFunction]"==U;if(b(t))return u(t,L);if(U==T||U==_||B&&!R){if(O=D||B?{}:m(t),!L)return D?h(t,s(O,t)):c(t,o(O,t))}else{if(!A[U])return R?t:{};O=g(t,U,L)}}N||(N=new r);var z=N.get(t);if(z)return z;N.set(t,O),w(t)?t.forEach((function(r){O.add(e(r,n,C,r,t,N))})):x(t)&&t.forEach((function(r,i){O.set(i,e(r,n,C,i,t,N))}));var G=F?void 0:(I?D?f:d:D?S:k)(t);return i(G||t,(function(r,i){G&&(r=t[i=r]),a(O,i,e(r,n,C,i,t,N))})),O}},7206:function(e,t,n){var r=n(2967),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},5119:function(e,t,n){var r=n(6999),i=n(4995)(r);e.exports=i},3897:function(e,t,n){var r=n(3048);e.exports=function(e,t,n){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(void 0===u?s===s&&!r(s):n(s,u)))var u=s,l=o}return l}},4852:function(e,t,n){var r=n(5119);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},7793:function(e){e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},8282:function(e,t,n){var r=n(7409),i=n(8149);e.exports=function e(t,n,a,o,s){var u=-1,l=t.length;for(a||(a=i),s||(s=[]);++u<l;){var c=t[u];n>0&&a(c)?n>1?e(c,n-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}},1607:function(e,t,n){var r=n(3883)();e.exports=r},6999:function(e,t,n){var r=n(1607),i=n(8892);e.exports=function(e,t){return e&&r(e,t,i)}},6388:function(e,t,n){var r=n(9663),i=n(5143);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},3657:function(e,t,n){var r=n(7409),i=n(7463);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},2342:function(e,t,n){var r=n(6971),i=n(9037),a=n(9192),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},2171:function(e){e.exports=function(e,t){return e>t}},1152:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},2671:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},5977:function(e,t,n){var r=n(7793),i=n(5173),a=n(1377);e.exports=function(e,t,n){return t===t?a(e,t,n):r(e,i,n)}},4772:function(e,t,n){var r=n(2342),i=n(5328);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},3244:function(e,t,n){var r=n(4466),i=n(5328);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,s))}},4466:function(e,t,n){var r=n(5535),i=n(9597),a=n(8568),o=n(7715),s=n(2923),u=n(7463),l=n(6842),c=n(6233),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,m){var y=u(e),b=u(t),x=y?d:s(e),E=b?d:s(t),w=(x=x==h?f:x)==f,k=(E=E==h?f:E)==f,S=x==E;if(S&&l(e)){if(!l(t))return!1;y=!0,w=!1}if(S&&!w)return m||(m=new r),y||c(e)?i(e,t,n,v,g,m):a(e,t,x,n,v,g,m);if(!(1&n)){var _=w&&p.call(e,"__wrapped__"),M=k&&p.call(t,"__wrapped__");if(_||M){var T=_?e.value():e,A=M?t.value():t;return m||(m=new r),g(T,A,n,v,m)}}return!!S&&(m||(m=new r),o(e,t,n,v,g,m))}},5130:function(e,t,n){var r=n(2923),i=n(5328);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},9017:function(e,t,n){var r=n(5535),i=n(3244);e.exports=function(e,t,n,a){var o=n.length,s=o,u=!a;if(null==e)return!s;for(e=Object(e);o--;){var l=n[o];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var c=(l=n[o])[0],h=e[c],d=l[1];if(u&&l[2]){if(void 0===h&&!(c in e))return!1}else{var f=new r;if(a)var p=a(h,d,c,e,t,f);if(!(void 0===p?i(d,h,3,a,f):p))return!1}}return!0}},5173:function(e){e.exports=function(e){return e!==e}},3709:function(e,t,n){var r=n(3376),i=n(8490),a=n(2967),o=n(5179),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?d:s).test(o(e))}},6320:function(e,t,n){var r=n(2923),i=n(5328);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},5175:function(e,t,n){var r=n(2342),i=n(8640),a=n(5328),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},8647:function(e,t,n){var r=n(8409),i=n(7592),a=n(2749),o=n(7463),s=n(3033);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},5622:function(e,t,n){var r=n(7105),i=n(9144),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},5937:function(e,t,n){var r=n(2967),i=n(7105),a=n(7751),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&n.push(s);return n}},1438:function(e){e.exports=function(e,t){return e<t}},8778:function(e,t,n){var r=n(5119),i=n(1424);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}},8409:function(e,t,n){var r=n(9017),i=n(1158),a=n(3795);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},7592:function(e,t,n){var r=n(3244),i=n(7130),a=n(1897),o=n(5020),s=n(2690),u=n(3795),l=n(5143);e.exports=function(e,t){return o(e)&&s(t)?u(l(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},9900:function(e,t,n){var r=n(5535),i=n(1807),a=n(1607),o=n(770),s=n(2967),u=n(3267),l=n(9316);e.exports=function e(t,n,c,h,d){t!==n&&a(n,(function(a,u){if(d||(d=new r),s(a))o(t,n,u,c,e,h,d);else{var f=h?h(l(t,u),a,u+"",t,n,d):void 0;void 0===f&&(f=a),i(t,u,f)}}),u)}},770:function(e,t,n){var r=n(1807),i=n(840),a=n(831),o=n(7137),s=n(6051),u=n(322),l=n(7463),c=n(3188),h=n(6842),d=n(3376),f=n(2967),p=n(629),v=n(6233),g=n(9316),m=n(6214);e.exports=function(e,t,n,y,b,x,E){var w=g(e,n),k=g(t,n),S=E.get(k);if(S)r(e,n,S);else{var _=x?x(w,k,n+"",e,t,E):void 0,M=void 0===_;if(M){var T=l(k),A=!T&&h(k),C=!T&&!A&&v(k);_=k,T||A||C?l(w)?_=w:c(w)?_=o(w):A?(M=!1,_=i(k,!0)):C?(M=!1,_=a(k,!0)):_=[]:p(k)||u(k)?(_=w,u(w)?_=m(w):f(w)&&!d(w)||(_=s(k))):M=!1}M&&(E.set(k,_),b(_,k,y,x,E),E.delete(k)),r(e,n,_)}}},1397:function(e,t,n){var r=n(6258),i=n(6388),a=n(8647),o=n(8778),s=n(3183),u=n(2503),l=n(4632),c=n(2749),h=n(7463);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var d=-1;t=r(t,u(a));var f=o(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return s(f,(function(e,t){return l(e,t,n)}))}},8007:function(e,t,n){var r=n(9478),i=n(1897);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},9478:function(e,t,n){var r=n(6388),i=n(1472),a=n(9663);e.exports=function(e,t,n){for(var o=-1,s=t.length,u={};++o<s;){var l=t[o],c=r(e,l);n(c,l)&&i(u,a(l,e),c)}return u}},3967:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},1569:function(e,t,n){var r=n(6388);e.exports=function(e){return function(t){return r(t,e)}}},6581:function(e){var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,a){for(var o=-1,s=n(t((r-e)/(i||1)),0),u=Array(s);s--;)u[a?s:++o]=e,e+=i;return u}},9764:function(e){e.exports=function(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}},180:function(e,t,n){var r=n(2749),i=n(1127),a=n(963);e.exports=function(e,t){return a(i(e,t,r),e+"")}},1472:function(e,t,n){var r=n(7449),i=n(9663),a=n(9603),o=n(2967),s=n(5143);e.exports=function(e,t,n,u){if(!o(e))return e;for(var l=-1,c=(t=i(t,e)).length,h=c-1,d=e;null!=d&&++l<c;){var f=s(t[l]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(l!=h){var v=d[f];void 0===(p=u?u(v,f,d):void 0)&&(p=o(v)?v:a(t[l+1])?[]:{})}r(d,f,p),d=d[f]}return e}},9884:function(e,t,n){var r=n(9043),i=n(7965),a=n(2749),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},3183:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},8230:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2382:function(e,t,n){var r=n(6971),i=n(6258),a=n(7463),o=n(3048),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},3426:function(e,t,n){var r=n(3502),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},2503:function(e){e.exports=function(e){return function(t){return e(t)}}},5799:function(e,t,n){var r=n(3149),i=n(947),a=n(7659),o=n(2581),s=n(5771),u=n(7069);e.exports=function(e,t,n){var l=-1,c=i,h=e.length,d=!0,f=[],p=f;if(n)d=!1,c=a;else if(h>=200){var v=t?null:s(e);if(v)return u(v);d=!1,c=o,p=new r}else p=t?[]:f;e:for(;++l<h;){var g=e[l],m=t?t(g):g;if(g=n||0!==g?g:0,d&&m===m){for(var y=p.length;y--;)if(p[y]===m)continue e;t&&p.push(m),f.push(g)}else c(p,m,n)||(p!==f&&p.push(m),f.push(g))}return f}},5552:function(e,t,n){var r=n(6258);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},2568:function(e){e.exports=function(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:void 0;n(o,e[r],s)}return o}},2581:function(e){e.exports=function(e,t){return e.has(t)}},1292:function(e,t,n){var r=n(2749);e.exports=function(e){return"function"==typeof e?e:r}},9663:function(e,t,n){var r=n(7463),i=n(5020),a=n(8308),o=n(9960);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},7967:function(e,t,n){var r=n(3910);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},840:function(e,t,n){e=n.nmd(e);var r=n(7735),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},4791:function(e,t,n){var r=n(7967);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},6839:function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},9082:function(e,t,n){var r=n(6971),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},831:function(e,t,n){var r=n(7967);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},4912:function(e,t,n){var r=n(3048);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,a=e===e,o=r(e),s=void 0!==t,u=null===t,l=t===t,c=r(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!a)return 1;if(!i&&!o&&!c&&e<t||c&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}},4632:function(e,t,n){var r=n(4912);e.exports=function(e,t,n){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,u=n.length;++i<s;){var l=r(a[i],o[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}},7137:function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},6653:function(e,t,n){var r=n(7449),i=n(8750);e.exports=function(e,t,n,a){var o=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=a?a(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),o?i(n,l,c):r(n,l,c)}return n}},9673:function(e,t,n){var r=n(6653),i=n(4578);e.exports=function(e,t){return r(e,i(e),t)}},5138:function(e,t,n){var r=n(6653),i=n(4949);e.exports=function(e,t){return r(e,i(e),t)}},5307:function(e,t,n){var r=n(7735)["__core-js_shared__"];e.exports=r},1993:function(e,t,n){var r=n(180),i=n(1042);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}},4995:function(e,t,n){var r=n(1424);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},3883:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}},4444:function(e,t,n){var r=n(8647),i=n(1424),a=n(8892);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!i(t)){var u=r(n,3);t=a(t),n=function(e){return u(s[e],e,s)}}var l=e(t,n,o);return l>-1?s[u?t[l]:l]:void 0}}},5986:function(e,t,n){var r=n(6581),i=n(1042),a=n(9994);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&i(t,n,o)&&(n=o=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),o=void 0===o?t<n?1:-1:a(o),r(t,n,o,e)}}},5771:function(e,t,n){var r=n(175),i=n(6488),a=n(7069),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},7965:function(e,t,n){var r=n(2220),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},9597:function(e,t,n){var r=n(3149),i=n(4810),a=n(2581);e.exports=function(e,t,n,o,s,u){var l=1&n,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var d=u.get(e),f=u.get(t);if(d&&f)return d==t&&f==e;var p=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<c;){var m=e[p],y=t[p];if(o)var b=l?o(y,m,p,t,e,u):o(m,y,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!i(t,(function(e,t){if(!a(g,t)&&(m===e||s(m,e,n,o,u)))return g.push(t)}))){v=!1;break}}else if(m!==y&&!s(m,y,n,o,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},8568:function(e,t,n){var r=n(6971),i=n(3910),a=n(9790),o=n(9597),s=n(1391),u=n(7069),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=u),e.size!=t.size&&!p)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var g=o(f(e),f(t),r,l,h,d);return d.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},7715:function(e,t,n){var r=n(3404),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var u=1&n,l=r(e),c=l.length;if(c!=r(t).length&&!u)return!1;for(var h=c;h--;){var d=l[h];if(!(u?d in t:i.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=u;++h<c;){var m=e[d=l[h]],y=t[d];if(a)var b=u?a(y,m,d,t,e,s):a(m,y,d,e,t,s);if(!(void 0===b?m===y||o(m,y,n,a,s):b)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var x=e.constructor,E=t.constructor;x==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof E&&E instanceof E||(v=!1)}return s.delete(e),s.delete(t),v}},2170:function(e,t,n){var r=n(1748),i=n(1127),a=n(963);e.exports=function(e){return a(i(e,void 0,r),e+"")}},9810:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},3404:function(e,t,n){var r=n(3657),i=n(4578),a=n(8892);e.exports=function(e){return r(e,a,i)}},1315:function(e,t,n){var r=n(3657),i=n(4949),a=n(3267);e.exports=function(e){return r(e,a,i)}},1677:function(e,t,n){var r=n(8080);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1158:function(e,t,n){var r=n(2690),i=n(8892);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},2220:function(e,t,n){var r=n(3709),i=n(6454);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},4813:function(e,t,n){var r=n(1485)(Object.getPrototypeOf,Object);e.exports=r},9037:function(e,t,n){var r=n(6971),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},4578:function(e,t,n){var r=n(9276),i=n(8171),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},4949:function(e,t,n){var r=n(7409),i=n(4813),a=n(4578),o=n(8171),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o;e.exports=s},2923:function(e,t,n){var r=n(6002),i=n(3081),a=n(2938),o=n(175),s=n(4369),u=n(2342),l=n(5179),c="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",v=l(r),g=l(i),m=l(a),y=l(o),b=l(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=c||a&&x(a.resolve())!=h||o&&x(new o)!=d||s&&x(new s)!=f)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return p;case g:return c;case m:return h;case y:return d;case b:return f}return t}),e.exports=x},6454:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6516:function(e,t,n){var r=n(9663),i=n(322),a=n(7463),o=n(9603),s=n(8640),u=n(5143);e.exports=function(e,t,n){for(var l=-1,c=(t=r(t,e)).length,h=!1;++l<c;){var d=u(t[l]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++l!=c?h:!!(c=null==e?0:e.length)&&s(c)&&o(d,c)&&(a(e)||i(e))}},8144:function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},5518:function(e,t,n){var r=n(6560);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2744:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8203:function(e,t,n){var r=n(6560),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},3911:function(e,t,n){var r=n(6560),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},911:function(e,t,n){var r=n(6560);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},3251:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},6869:function(e,t,n){var r=n(7967),i=n(4791),a=n(6839),o=n(9082),s=n(831);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Symbol]":return o(e)}}},6051:function(e,t,n){var r=n(7206),i=n(4813),a=n(7105);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},8149:function(e,t,n){var r=n(6971),i=n(322),a=n(7463),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},9603:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1042:function(e,t,n){var r=n(9790),i=n(1424),a=n(9603),o=n(2967);e.exports=function(e,t,n){if(!o(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&a(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},5020:function(e,t,n){var r=n(7463),i=n(3048),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},8080:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},8490:function(e,t,n){var r=n(5307),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},7105:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2690:function(e,t,n){var r=n(2967);e.exports=function(e){return e===e&&!r(e)}},3504:function(e){e.exports=function(){this.__data__=[],this.size=0}},8134:function(e,t,n){var r=n(5067),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},6305:function(e,t,n){var r=n(5067);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7309:function(e,t,n){var r=n(5067);e.exports=function(e){return r(this.__data__,e)>-1}},5333:function(e,t,n){var r=n(5067);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},2626:function(e,t,n){var r=n(807),i=n(9533),a=n(3081);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},20:function(e,t,n){var r=n(1677);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},9367:function(e,t,n){var r=n(1677);e.exports=function(e){return r(this,e).get(e)}},4427:function(e,t,n){var r=n(1677);e.exports=function(e){return r(this,e).has(e)}},6771:function(e,t,n){var r=n(1677);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},1391:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},3795:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},5782:function(e,t,n){var r=n(1362);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},6560:function(e,t,n){var r=n(2220)(Object,"create");e.exports=r},9144:function(e,t,n){var r=n(1485)(Object.keys,Object);e.exports=r},7751:function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},2623:function(e,t,n){e=n.nmd(e);var r=n(9810),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},9192:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},1485:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},1127:function(e,t,n){var r=n(8835),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),u=Array(s);++o<s;)u[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=n(u),r(e,this,l)}}},7735:function(e,t,n){var r=n(9810),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},9316:function(e){e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},1378:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},8333:function(e){e.exports=function(e){return this.__data__.has(e)}},7069:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},963:function(e,t,n){var r=n(9884),i=n(8417)(r);e.exports=i},8417:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},2358:function(e,t,n){var r=n(9533);e.exports=function(){this.__data__=new r,this.size=0}},8448:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},5827:function(e){e.exports=function(e){return this.__data__.get(e)}},8719:function(e){e.exports=function(e){return this.__data__.has(e)}},8087:function(e,t,n){var r=n(9533),i=n(3081),a=n(371);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},1377:function(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},5343:function(e,t,n){var r=n(3477),i=n(8144),a=n(6677);e.exports=function(e){return i(e)?a(e):r(e)}},8308:function(e,t,n){var r=n(5782),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},5143:function(e,t,n){var r=n(3048);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},5179:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},3502:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},6677:function(e){var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+u+("(?:\\u200d(?:"+[a,o,s].join("|")+")"+l+u+")*"),h="(?:"+[a+r+"?",r,o,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+c,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},4019:function(e,t,n){var r=n(5581);e.exports=function(e){return r(e,4)}},3197:function(e,t,n){var r=n(5581);e.exports=function(e){return r(e,5)}},9043:function(e){e.exports=function(e){return function(){return e}}},5410:function(e,t,n){var r=n(180),i=n(9790),a=n(1042),o=n(3267),s=Object.prototype,u=s.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var c=t[n],h=o(c),d=-1,f=h.length;++d<f;){var p=h[d],v=e[p];(void 0===v||i(v,s[p])&&!u.call(e,p))&&(e[p]=c[p])}return e}));e.exports=l},3393:function(e,t,n){e.exports=n(2556)},9790:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},3514:function(e,t,n){var r=n(9276),i=n(4852),a=n(8647),o=n(7463);e.exports=function(e,t){return(o(e)?r:i)(e,a(t,3))}},7291:function(e,t,n){var r=n(4444)(n(7500));e.exports=r},7500:function(e,t,n){var r=n(7793),i=n(8647),a=n(3539),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(e,i(t,3),u)}},1748:function(e,t,n){var r=n(8282);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},2556:function(e,t,n){var r=n(1895),i=n(5119),a=n(1292),o=n(7463);e.exports=function(e,t){return(o(e)?r:i)(e,a(t))}},5694:function(e,t,n){var r=n(1607),i=n(1292),a=n(3267);e.exports=function(e,t){return null==e?e:r(e,i(t),a)}},7130:function(e,t,n){var r=n(6388);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3710:function(e,t,n){var r=n(1152),i=n(6516);e.exports=function(e,t){return null!=e&&i(e,t,r)}},1897:function(e,t,n){var r=n(2671),i=n(6516);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2749:function(e){e.exports=function(e){return e}},322:function(e,t,n){var r=n(4772),i=n(5328),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},7463:function(e){var t=Array.isArray;e.exports=t},1424:function(e,t,n){var r=n(3376),i=n(8640);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},3188:function(e,t,n){var r=n(1424),i=n(5328);e.exports=function(e){return i(e)&&r(e)}},6842:function(e,t,n){e=n.nmd(e);var r=n(7735),i=n(7561),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u},6871:function(e,t,n){var r=n(5622),i=n(2923),a=n(322),o=n(7463),s=n(1424),u=n(6842),l=n(7105),c=n(6233),h=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||a(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},3376:function(e,t,n){var r=n(2342),i=n(2967);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},8640:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5888:function(e,t,n){var r=n(5130),i=n(2503),a=n(2623),o=a&&a.isMap,s=o?i(o):r;e.exports=s},2967:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5328:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},629:function(e,t,n){var r=n(2342),i=n(4813),a=n(5328),o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},8954:function(e,t,n){var r=n(6320),i=n(2503),a=n(2623),o=a&&a.isSet,s=o?i(o):r;e.exports=s},7009:function(e,t,n){var r=n(2342),i=n(7463),a=n(5328);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==r(e)}},3048:function(e,t,n){var r=n(2342),i=n(5328);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},6233:function(e,t,n){var r=n(5175),i=n(2503),a=n(2623),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},4946:function(e){e.exports=function(e){return void 0===e}},8892:function(e,t,n){var r=n(9021),i=n(5622),a=n(1424);e.exports=function(e){return a(e)?r(e):i(e)}},3267:function(e,t,n){var r=n(9021),i=n(5937),a=n(1424);e.exports=function(e){return a(e)?r(e,!0):i(e)}},9140:function(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3300:function(e,t,n){var r=n(6258),i=n(8647),a=n(8778),o=n(7463);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},6334:function(e,t,n){var r=n(8750),i=n(6999),a=n(8647);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,i,t(e,i,a))})),n}},3740:function(e,t,n){var r=n(3897),i=n(2171),a=n(2749);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},1362:function(e,t,n){var r=n(371);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},7142:function(e,t,n){var r=n(9900),i=n(1993)((function(e,t,n){r(e,t,n)}));e.exports=i},866:function(e,t,n){var r=n(3897),i=n(1438),a=n(2749);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},8183:function(e,t,n){var r=n(3897),i=n(8647),a=n(1438);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),a):void 0}},6488:function(e){e.exports=function(){}},1930:function(e,t,n){var r=n(7735);e.exports=function(){return r.Date.now()}},7821:function(e,t,n){var r=n(8007),i=n(2170)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},3033:function(e,t,n){var r=n(3967),i=n(1569),a=n(5020),o=n(5143);e.exports=function(e){return a(e)?r(o(e)):i(e)}},1043:function(e,t,n){var r=n(5986)();e.exports=r},4002:function(e,t,n){var r=n(8044),i=n(5119),a=n(8647),o=n(9764),s=n(7463);e.exports=function(e,t,n){var u=s(e)?r:o,l=arguments.length<3;return u(e,a(t,4),n,l,i)}},7761:function(e,t,n){var r=n(5622),i=n(2923),a=n(1424),o=n(7009),s=n(5343);e.exports=function(e){if(null==e)return 0;if(a(e))return o(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},6845:function(e,t,n){var r=n(8282),i=n(1397),a=n(180),o=n(1042),s=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},8171:function(e){e.exports=function(){return[]}},7561:function(e){e.exports=function(){return!1}},9994:function(e,t,n){var r=n(4604),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},3539:function(e,t,n){var r=n(9994);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},4604:function(e,t,n){var r=n(3426),i=n(2967),a=n(3048),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}},6214:function(e,t,n){var r=n(6653),i=n(3267);e.exports=function(e){return r(e,i(e))}},9960:function(e,t,n){var r=n(2382);e.exports=function(e){return null==e?"":r(e)}},5186:function(e,t,n){var r=n(1895),i=n(7206),a=n(6999),o=n(8647),s=n(4813),u=n(7463),l=n(6842),c=n(3376),h=n(2967),d=n(6233);e.exports=function(e,t,n){var f=u(e),p=f||l(e)||d(e);if(t=o(t,4),null==n){var v=e&&e.constructor;n=p?f?new v:[]:h(e)&&c(v)?i(s(e)):{}}return(p?r:a)(e,(function(e,r,i){return t(n,e,r,i)})),n}},6561:function(e,t,n){var r=n(8282),i=n(180),a=n(5799),o=n(3188),s=i((function(e){return a(r(e,1,o,!0))}));e.exports=s},8682:function(e,t,n){var r=n(9960),i=0;e.exports=function(e){var t=++i;return r(e)+t}},9614:function(e,t,n){var r=n(5552),i=n(8892);e.exports=function(e){return null==e?[]:r(e,i(e))}},9774:function(e,t,n){var r=n(7449),i=n(2568);e.exports=function(e,t){return i(e||[],t||[],r)}},9863:function(e,t,n){var r,i;!function(a,o){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},a=null;function o(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?s:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):e)}function l(){for(var n=this.getLevel(),i=0;i<r.length;i++){var a=r[i];this[a]=i<n?e:this.methodFactory(a,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function h(e,t,n){return u(e)||c.apply(this,arguments)}function d(e,n){var o,s,u,c=this,d="loglevel";function f(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(i){}}}function p(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(a){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(d),i=n.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch(a){}return void 0===c.levels[e]&&(e=void 0),e}}function v(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function g(e){var t=e;if("string"===typeof t&&void 0!==c.levels[t.toUpperCase()]&&(t=c.levels[t.toUpperCase()]),"number"===typeof t&&t>=0&&t<=c.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"===typeof e?d+=":"+e:"symbol"===typeof e&&(d=void 0),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=n||h,c.getLevel=function(){return null!=u?u:null!=s?s:o},c.setLevel=function(e,t){return u=g(e),!1!==t&&f(u),l.call(c)},c.setDefaultLevel=function(e){s=g(e),p()||c.setLevel(e,!1)},c.resetLevel=function(){u=null,v(),l.call(c)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)},c.rebuild=function(){if(a!==c&&(o=g(a.getLevel())),l.call(c),a===c)for(var e in i)i[e].rebuild()},o=g(a?a.getLevel():"WARN");var m=p();null!=m&&(u=g(m)),l.call(c)}(a=new d).getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,a.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=f),a},a.getLoggers=function(){return i},a.default=a,a},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},9174:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(2782);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,r.isAnyArray)(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,i=void 0===n?0:n,a=t.toIndex,o=void 0===a?e.length:a;if(i<0||i>=e.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[i],u=i+1;u<o;u++)e[u]<s&&(s=e[u]);return s}(e),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,i=void 0===n?0:n,a=t.toIndex,o=void 0===a?e.length:a;if(i<0||i>=e.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[i],u=i+1;u<o;u++)e[u]>s&&(s=e[u]);return s}(e);if(i===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,s=void 0===o?n.autoMinMax?i:0:o,u=n.max,l=void 0===u?n.autoMinMax?a:1:u;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var c=(l-s)/(a-i),h=0;h<e.length;h++)t[h]=(e[h]-i)*c+s;return t}},9395:function(e,t,n){"use strict";var r=n(2395).default,i=n(3072).default,a=n(2459).default,o=n(7088).default,s=n(6668).default,u=n(8336).default,l=n(9511).default,c=n(3312).default,h=n(3693).default,d=n(1756).default,f=n(5715).default,p=n(883).default,v=n(4633).default,g=(n(5407).default,n(7383).default),m=n(4579).default;var y=n(2782),b=n(9174),x=" ".repeat(2),E=" ".repeat(4);function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxRows,r=void 0===n?15:n,i=t.maxColumns,a=void 0===i?10:i,o=t.maxNumSize,s=void 0===o?8:o,u=t.padMinus,l=void 0===u?"auto":u;return"".concat(e.constructor.name," {\n").concat(x,"[\n").concat(E).concat(function(e,t,n,r,i){var a=e.rows,o=e.columns,s=Math.min(a,t),u=Math.min(o,n),l=[];if("auto"===i){i=!1;e:for(var c=0;c<s;c++)for(var h=0;h<u;h++)if(e.get(c,h)<0){i=!0;break e}}for(var d=0;d<s;d++){for(var f=[],p=0;p<u;p++)f.push(k(e.get(d,p),r,i));l.push("".concat(f.join(" ")))}u!==o&&(l[l.length-1]+=" ... ".concat(o-n," more columns"));s!==a&&l.push("... ".concat(a-t," more rows"));return l.join("\n".concat(E))}(e,r,a,s,l),"\n").concat(x,"]\n").concat(x,"rows: ").concat(e.rows,"\n").concat(x,"columns: ").concat(e.columns,"\n}")}function k(e,t,n){return(e>=0&&n?" ".concat(S(e,t-1)):S(e,t)).padEnd(t)}function S(e,t){var n=e.toString();if(n.length<=t)return n;var r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function _(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function M(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function T(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function A(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function C(e,t){if(!y.isAnyArray(t))throw new TypeError("row indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function P(e,t){if(!y.isAnyArray(t))throw new TypeError("column indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function R(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(O("startRow",t),O("endRow",n),O("startColumn",r),O("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function N(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function O(e,t){if("number"!==typeof t)throw new TypeError("".concat(e," must be a number"))}function L(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}var D=function(){function e(){g(this,e)}return m(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(e){if("function"!==typeof e)throw new TypeError("callback must be a function");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.call(this,t,n);return this}},{key:"to1DArray",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"to2DArray",value:function(){for(var e=[],t=0;t<this.rows;t++){e.push([]);for(var n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var e=0;e<this.rows;e++)if(0!==this.get(e,e))return!1;return!0}},{key:"isEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}},{key:"isReducedEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(var a=t+1;a<this.rows;a++)0!==this.get(e,a)&&(r=!1);e++}return r}},{key:"echelonForm",value:function(){for(var e=this.clone(),t=0,n=0;t<e.rows&&n<e.columns;){for(var r=t,i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);for(var a=e.get(t,n),o=n;o<e.columns;o++)e.set(t,o,e.get(t,o)/a);for(var s=t+1;s<e.rows;s++){var u=e.get(s,n)/e.get(t,n);e.set(s,n,0);for(var l=n+1;l<e.columns;l++)e.set(s,l,e.get(s,l)-e.get(t,l)*u)}t++,n++}}return e}},{key:"reducedEchelonForm",value:function(){for(var e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;r>=0;)if(0===e.maxRow(r))r--;else{for(var i=0,a=!1;i<n&&!1===a;)1===e.get(r,i)?a=!0:i++;for(var o=0;o<r;o++)for(var s=e.get(o,i),u=i;u<t;u++){var l=e.get(o,u)-s*e.get(r,u);e.set(o,u,l)}r--}return e}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.rows,n=void 0===t?1:t,r=e.columns,i=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var a=new U(this.rows*n,this.columns*i),o=0;o<n;o++)for(var s=0;s<i;s++)a.setSubMatrix(this,this.rows*o,this.columns*s);return a}},{key:"fill",value:function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,e);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(e){_(this,e);for(var t=[],n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"getRowVector",value:function(e){return U.rowVector(this.getRow(e))}},{key:"setRow",value:function(e,t){_(this,e),t=T(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}},{key:"swapRows",value:function(e,t){_(this,e),_(this,t);for(var n=0;n<this.columns;n++){var r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}},{key:"getColumn",value:function(e){M(this,e);for(var t=[],n=0;n<this.rows;n++)t.push(this.get(n,e));return t}},{key:"getColumnVector",value:function(e){return U.columnVector(this.getColumn(e))}},{key:"setColumn",value:function(e,t){M(this,e),t=A(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}},{key:"swapColumns",value:function(e,t){M(this,e),M(this,t);for(var n=0;n<this.rows;n++){var r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}},{key:"addRowVector",value:function(e){e=T(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}},{key:"subRowVector",value:function(e){e=T(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}},{key:"mulRowVector",value:function(e){e=T(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}},{key:"divRowVector",value:function(e){e=T(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}},{key:"addColumnVector",value:function(e){e=A(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}},{key:"subColumnVector",value:function(e){e=A(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}},{key:"mulColumnVector",value:function(e){e=A(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}},{key:"divColumnVector",value:function(e){e=A(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}},{key:"mulRow",value:function(e,t){_(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}},{key:"mulColumn",value:function(e,t){M(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}},{key:"max",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var i=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)>i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)>s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"maxIndex",value:function(){L(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"min",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var i=new Array(this.columns).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)<i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)<s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"minIndex",value:function(){L(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"maxRow",value:function(e){if(_(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxRowIndex",value:function(e){_(this,e),L(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}},{key:"minRow",value:function(e){if(_(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minRowIndex",value:function(e){_(this,e),L(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}},{key:"maxColumn",value:function(e){if(M(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}},{key:"maxColumnIndex",value:function(e){M(this,e),L(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}},{key:"minColumn",value:function(e){if(M(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}},{key:"minColumnIndex",value:function(e){M(this,e),L(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}},{key:"diag",value:function(){for(var e=Math.min(this.rows,this.columns),t=[],n=0;n<e;n++)t.push(this.get(n,n));return t}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius";switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(e))}}},{key:"cumulativeSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}},{key:"dot",value:function(t){e.isMatrix(t)&&(t=t.to1DArray());var n=this.to1DArray();if(n.length!==t.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<n.length;i++)r+=n[i]*t[i];return r}},{key:"mmul",value:function(e){e=U.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.columns,i=new U(t,r),a=new Float64Array(n),o=0;o<r;o++){for(var s=0;s<n;s++)a[s]=e.get(s,o);for(var u=0;u<t;u++){for(var l=0,c=0;c<n;c++)l+=this.get(u,c)*a[c];i.set(u,o,l)}}return i}},{key:"mpow",value:function(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");for(var t=U.eye(this.rows),n=this,r=e;r>1;r/=2)0!==(1&r)&&(t=t.mmul(n)),n=n.mmul(n);return t}},{key:"strassen2x2",value:function(e){e=U.checkMatrix(e);var t=new U(2,2),n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),a=e.get(0,1),o=this.get(1,0),s=e.get(1,0),u=this.get(1,1),l=e.get(1,1),c=(n+u)*(r+l),h=(o+u)*r,d=n*(a-l),f=u*(s-r),p=(n+i)*l,v=c+f-p+(i-u)*(s+l),g=d+p,m=h+f,y=c-h+d+(o-n)*(r+a);return t.set(0,0,v),t.set(0,1,g),t.set(1,0,m),t.set(1,1,y),t}},{key:"strassen3x3",value:function(e){e=U.checkMatrix(e);var t=new U(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),a=this.get(1,0),o=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),h=e.get(0,0),d=e.get(0,1),f=e.get(0,2),p=e.get(1,0),v=e.get(1,1),g=e.get(1,2),m=e.get(2,0),y=e.get(2,1),b=e.get(2,2),x=(n-a)*(-d+v),E=(-n+a+o)*(h-d+v),w=(a+o)*(-h+d),k=n*h,S=(-n+u+l)*(h-f+g),_=(-n+u)*(f-g),M=(u+l)*(-h+f),T=(-i+l+c)*(v+m-y),A=(i-c)*(v-y),C=i*m,P=(l+c)*(-m+y),R=(-i+o+s)*(g+m-b),N=(i-s)*(g-b),O=(o+s)*(-m+b),L=k+C+r*p,D=(n+r+i-a-o-l-c)*v+E+w+k+T+C+P,I=k+S+M+(n+r+i-o-s-u-l)*g+C+R+O,F=x+o*(-h+d+p-v-g-m+b)+E+k+C+R+N,B=x+E+w+k+s*y,z=C+R+N+O+a*f,G=k+S+_+l*(-h+f+p-v-g-m+y)+T+A+C,H=T+A+C+P+u*d,j=k+S+_+M+c*b;return t.set(0,0,L),t.set(0,1,D),t.set(0,2,I),t.set(1,0,F),t.set(1,1,B),t.set(1,2,z),t.set(2,0,G),t.set(2,1,H),t.set(2,2,j),t}},{key:"mmulStrassen",value:function(t){t=U.checkMatrix(t);var n=this.clone(),r=n.rows,i=n.columns,a=t.rows,o=t.columns;function s(t,n,r){var i=t.rows,a=t.columns;if(i===n&&a===r)return t;var o=e.zeros(n,r);return o=o.setSubMatrix(t,0,0)}i!==a&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(a," x ").concat(o," matrix: dimensions do not match."));var u=Math.max(r,a),l=Math.max(i,o);return function t(n,r,i,a){if(i<=512||a<=512)return n.mmul(r);i%2===1&&a%2===1?(n=s(n,i+1,a+1),r=s(r,i+1,a+1)):i%2===1?(n=s(n,i+1,a),r=s(r,i+1,a)):a%2===1&&(n=s(n,i,a+1),r=s(r,i,a+1));var o=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),l=n.subMatrix(0,o-1,0,u-1),c=r.subMatrix(0,o-1,0,u-1),h=n.subMatrix(0,o-1,u,n.columns-1),d=r.subMatrix(0,o-1,u,r.columns-1),f=n.subMatrix(o,n.rows-1,0,u-1),p=r.subMatrix(o,r.rows-1,0,u-1),v=n.subMatrix(o,n.rows-1,u,n.columns-1),g=r.subMatrix(o,r.rows-1,u,r.columns-1),m=t(e.add(l,v),e.add(c,g),o,u),y=t(e.add(f,v),c,o,u),b=t(l,e.sub(d,g),o,u),x=t(v,e.sub(p,c),o,u),E=t(e.add(l,h),g,o,u),w=t(e.sub(f,l),e.add(c,d),o,u),k=t(e.sub(h,v),e.add(p,g),o,u),S=e.add(m,x);S.sub(E),S.add(k);var _=e.add(b,E),M=e.add(y,x),T=e.sub(m,y);T.add(b),T.add(w);var A=e.zeros(2*S.rows,2*S.columns);return(A=(A=(A=(A=A.setSubMatrix(S,0,0)).setSubMatrix(_,S.rows,0)).setSubMatrix(M,0,S.columns)).setSubMatrix(T,S.rows,S.columns)).subMatrix(0,i-1,0,a-1)}(n=s(n,u,l),t=s(t,u,l),u,l)}},{key:"scaleRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new U(this.rows,this.columns),o=0;o<this.rows;o++){var s=this.getRow(o);s.length>0&&b(s,{min:n,max:i,output:s}),a.setRow(o,s)}return a}},{key:"scaleColumns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new U(this.rows,this.columns),o=0;o<this.columns;o++){var s=this.getColumn(o);s.length&&b(s,{min:n,max:i,output:s}),a.setColumn(o,s)}return a}},{key:"flipRows",value:function(){for(var e=Math.ceil(this.columns/2),t=0;t<this.rows;t++)for(var n=0;n<e;n++){var r=this.get(t,n),i=this.get(t,this.columns-1-n);this.set(t,n,i),this.set(t,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var e=Math.ceil(this.rows/2),t=0;t<this.columns;t++)for(var n=0;n<e;n++){var r=this.get(n,t),i=this.get(this.rows-1-n,t);this.set(n,t,i),this.set(this.rows-1-n,t,r)}return this}},{key:"kroneckerProduct",value:function(e){e=U.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.rows,i=e.columns,a=new U(t*r,n*i),o=0;o<t;o++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var l=0;l<i;l++)a.set(r*o+u,i*s+l,this.get(o,s)*e.get(u,l));return a}},{key:"kroneckerSum",value:function(e){if(e=U.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var t=this.rows,n=e.rows,r=this.kroneckerProduct(U.eye(n,n)),i=U.eye(t,t).kroneckerProduct(e);return r.add(i)}},{key:"transpose",value:function(){for(var e=new U(this.columns,this.rows),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}},{key:"sortRows",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}},{key:"sortColumns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}},{key:"subMatrix",value:function(e,t,n,r){R(this,e,t,n,r);for(var i=new U(t-e+1,r-n+1),a=e;a<=t;a++)for(var o=n;o<=r;o++)i.set(a-e,o-n,this.get(a,o));return i}},{key:"subMatrixRow",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new U(e.length,n-t+1),i=0;i<e.length;i++)for(var a=t;a<=n;a++){if(e[i]<0||e[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[i]));r.set(i,a-t,this.get(e[i],a))}return r}},{key:"subMatrixColumn",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new U(n-t+1,e.length),i=0;i<e.length;i++)for(var a=t;a<=n;a++){if(e[i]<0||e[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[i]));r.set(a-t,i,this.get(a,e[i]))}return r}},{key:"setSubMatrix",value:function(e,t,n){if((e=U.checkMatrix(e)).isEmpty())return this;R(this,t,t+e.rows-1,n,n+e.columns-1);for(var r=0;r<e.rows;r++)for(var i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}},{key:"selection",value:function(e,t){C(this,e),P(this,t);for(var n=new U(e.length,t.length),r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++){var o=t[a];n.set(r,a,this.get(i,o))}return n}},{key:"trace",value:function(){for(var e=Math.min(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}},{key:"clone",value:function(){return this.constructor.copy(this,new U(this.rows,this.columns))}},{key:"sum",value:function(e){switch(e){case"row":return function(e){for(var t=N(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}(this);case"column":return function(e){for(var t=N(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"product",value:function(e){switch(e){case"row":return function(e){for(var t=N(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}(this);case"column":return function(e){for(var t=N(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"mean",value:function(e){var t=this.sum(e);switch(e){case"row":for(var n=0;n<this.rows;n++)t[n]/=this.columns;return t;case"column":for(var r=0;r<this.columns;r++)t[r]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}},{key:"variance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t,r=n.unbiased,i=void 0===r||r,a=n.mean,o=void 0===a?this.mean(e):a;if("boolean"!==typeof i)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!y.isAnyArray(o))throw new TypeError("mean must be an array");return function(e,t,n){for(var r=e.rows,i=e.columns,a=[],o=0;o<r;o++){for(var s=0,u=0,l=0,c=0;c<i;c++)s+=l=e.get(o,c)-n[o],u+=l*l;t?a.push((u-s*s/i)/(i-1)):a.push((u-s*s/i)/i)}return a}(this,i,o);case"column":if(!y.isAnyArray(o))throw new TypeError("mean must be an array");return function(e,t,n){for(var r=e.rows,i=e.columns,a=[],o=0;o<i;o++){for(var s=0,u=0,l=0,c=0;c<r;c++)s+=l=e.get(c,o)-n[o],u+=l*l;t?a.push((u-s*s/r)/(r-1)):a.push((u-s*s/r)/r)}return a}(this,i,o);case void 0:if("number"!==typeof o)throw new TypeError("mean must be a number");return function(e,t,n){for(var r=e.rows,i=e.columns,a=r*i,o=0,s=0,u=0,l=0;l<r;l++)for(var c=0;c<i;c++)o+=u=e.get(l,c)-n,s+=u*u;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}(this,i,o);default:throw new Error("invalid option: ".concat(e))}}},{key:"standardDeviation",value:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t.center,r=void 0===n?this.mean(e):n;switch(e){case"row":if(!y.isAnyArray(r))throw new TypeError("center must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}(this,r),this;case"column":if(!y.isAnyArray(r))throw new TypeError("center must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}(this,r),this;case void 0:if("number"!==typeof r)throw new TypeError("center must be a number");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}(this,r),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t.scale;switch(e){case"row":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,i=0;i<e.columns;i++)r+=Math.pow(e.get(n,i),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}(this);else if(!y.isAnyArray(n))throw new TypeError("scale must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}(this,n),this;case"column":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,i=0;i<e.rows;i++)r+=Math.pow(e.get(i,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}(this);else if(!y.isAnyArray(n))throw new TypeError("scale must be an array");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}(this,n),this;case void 0:if(void 0===n)n=function(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var i=0;i<e.rows;i++)n+=Math.pow(e.get(i,r),2)/t;return Math.sqrt(n)}(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return function(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}(this,n),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"toString",value:function(e){return w(this,e)}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.rows)){e.next=12;break}n=0;case 3:if(!(n<this.columns)){e.next=9;break}return e.next=6,[t,n,this.get(t,n)];case 6:n++,e.next=3;break;case 9:t++,e.next=1;break;case 12:case"end":return e.stop()}}),e,this)}))},{key:"values",value:v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.rows)){e.next=12;break}n=0;case 3:if(!(n<this.columns)){e.next=9;break}return e.next=6,this.get(t,n);case 6:n++,e.next=3;break;case 9:t++,e.next=1;break;case 12:case"end":return e.stop()}}),e,this)}))}],[{key:"from1DArray",value:function(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new U(e,t),i=0;i<e;i++)for(var a=0;a<t;a++)r.set(i,a,n[i*t+a]);return r}},{key:"rowVector",value:function(e){for(var t=new U(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}},{key:"columnVector",value:function(e){for(var t=new U(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}},{key:"zeros",value:function(e,t){return new U(e,t)}},{key:"ones",value:function(e,t){return new U(e,t).fill(1)}},{key:"rand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");for(var r=n.random,i=void 0===r?Math.random:r,a=new U(e,t),o=0;o<e;o++)for(var s=0;s<t;s++)a.set(o,s,i());return a}},{key:"randInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");var r=n.min,i=void 0===r?0:r,a=n.max,o=void 0===a?1e3:a,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(i>=o)throw new RangeError("min must be smaller than max");for(var l=o-i,c=new U(e,t),h=0;h<e;h++)for(var d=0;d<t;d++){var f=i+Math.round(u()*l);c.set(h,d,f)}return c}},{key:"eye",value:function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);for(var r=Math.min(e,t),i=this.zeros(e,t),a=0;a<r;a++)i.set(a,a,n);return i}},{key:"diag",value:function(e,t,n){var r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);for(var i=Math.min(r,t,n),a=this.zeros(t,n),o=0;o<i;o++)a.set(o,o,e[o]);return a}},{key:"min",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new U(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.min(e.get(a,o),t.get(a,o)));return i}},{key:"max",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new this(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.max(e.get(a,o),t.get(a,o)));return i}},{key:"checkMatrix",value:function(t){return e.isMatrix(t)?t:new U(t)}},{key:"isMatrix",value:function(e){return null!=e&&"Matrix"===e.klass}},{key:"copy",value:function(e,t){var n,r=p(e.entries());try{for(r.s();!(n=r.n()).done;){var i=f(n.value,3),a=i[0],o=i[1],s=i[2];t.set(a,o,s)}}catch(u){r.e(u)}finally{r.f()}return t}}])}();function I(e,t){return e-t}D.prototype.klass="Matrix","undefined"!==typeof Symbol&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return w(this)}),D.random=D.rand,D.randomInt=D.randInt,D.diagonal=D.diag,D.prototype.diagonal=D.prototype.diag,D.identity=D.eye,D.prototype.negate=D.prototype.neg,D.prototype.tensorProduct=D.prototype.kroneckerProduct;var F=new WeakSet,U=function(e){function t(e,n){var r;if(g(this,t),r=u(this,t),c(r,F),h(r,"data",void 0),t.isMatrix(e))d(F,r,B).call(r,e.rows,e.columns),t.copy(e,r);else if(Number.isInteger(e)&&e>=0)d(F,r,B).call(r,e,n);else{if(!y.isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");var i=e;if("number"!==typeof(n=(e=i.length)?i[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");r.data=[];for(var a=0;a<e;a++){if(i[a].length!==n)throw new RangeError("Inconsistent array dimensions");if(!i[a].every((function(e){return"number"===typeof e})))throw new TypeError("Input data contains non-numeric values");r.data.push(Float64Array.from(i[a]))}r.rows=e,r.columns=n}return r}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return _(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return void 0===t&&(t=e,e=this.rows),_(this,e,!0),t=Float64Array.from(T(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){M(this,e);for(var t=0;t<this.rows;t++){for(var n=new Float64Array(this.columns-1),r=0;r<e;r++)n[r]=this.data[t][r];for(var i=e+1;i<this.columns;i++)n[i-1]=this.data[t][i];this.data[t]=n}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){"undefined"===typeof t&&(t=e,e=this.columns),M(this,e,!0),t=A(this,t);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),i=0;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}])}(D);function B(e,t){if(this.data=[],!(Number.isInteger(t)&&t>=0))throw new TypeError("nColumns must be a positive integer");for(var n=0;n<e;n++)this.data.push(new Float64Array(t));this.rows=e,this.columns=t}!function(e,t){e.prototype.add=function(e){return"number"===typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e.get(n,r));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return"number"===typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e.get(n,r));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"===typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e.get(n,r));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"===typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e.get(n,r));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"===typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)%e.get(n,r));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"===typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)&e.get(n,r));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return"number"===typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)|e.get(n,r));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return"number"===typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)^e.get(n,r));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return"number"===typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)<<e.get(n,r));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return"number"===typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>e.get(n,r));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return"number"===typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>>e.get(n,r));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return"number"===typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,Math.pow(this.get(n,r),e.get(n,r)));return this}}(D,U);var z=new WeakMap,G=function(e){function t(e){var n;if(g(this,t),n=u(this,t),a(n,z,void 0),U.isMatrix(e)){if(!e.isSymmetric())throw new TypeError("not symmetric data");o(z,n,U.copy(e,new U(e.rows,e.rows)))}else if(Number.isInteger(e)&&e>=0)o(z,n,new U(e,e));else if(o(z,n,new U(e)),!n.isSymmetric())throw new TypeError("not symmetric data");return n}return l(t,e),m(t,[{key:"size",get:function(){return s(z,this).size}},{key:"rows",get:function(){return s(z,this).rows}},{key:"columns",get:function(){return s(z,this).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var e,n=new t(this.diagonalSize),r=p(this.upperRightEntries());try{for(r.s();!(e=r.n()).done;){var i=f(e.value,3),a=i[0],o=i[1],s=i[2];n.set(a,o,s)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"toMatrix",value:function(){return new U(this)}},{key:"get",value:function(e,t){return s(z,this).get(e,t)}},{key:"set",value:function(e,t,n){return s(z,this).set(e,t,n),s(z,this).set(t,e,n),this}},{key:"removeCross",value:function(e){return s(z,this).removeRow(e),s(z,this).removeColumn(e),this}},{key:"addCross",value:function(e,t){void 0===t&&(t=e,e=this.diagonalSize);var n=t.slice();return n.splice(e,1),s(z,this).addRow(e,n),s(z,this).addColumn(e,t),this}},{key:"applyMask",value:function(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var t,n=[],r=p(e.entries());try{for(r.s();!(t=r.n()).done;){var i=f(t.value,2),a=i[0];i[1]||n.push(a)}}catch(l){r.e(l)}finally{r.f()}n.reverse();for(var o=0,s=n;o<s.length;o++){var u=s[o];this.removeCross(u)}return this}},{key:"toCompact",value:function(){for(var e=this.diagonalSize,t=new Array(e*(e+1)/2),n=0,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=++r);return t}},{key:"upperRightEntries",value:v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=0;case 1:if(!(t<this.diagonalSize)){e.next=9;break}return r=this.get(t,n),e.next=5,[t,n,r];case 5:++n>=this.diagonalSize&&(n=++t);case 6:e.next=1;break;case 9:case"end":return e.stop()}}),e,this)}))},{key:"upperRightValues",value:v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=0;case 1:if(!(t<this.diagonalSize)){e.next=9;break}return r=this.get(t,n),e.next=5,r;case 5:++n>=this.diagonalSize&&(n=++t);case 6:e.next=1;break;case 9:case"end":return e.stop()}}),e,this)}))}],[{key:"isSymmetricMatrix",value:function(e){return U.isMatrix(e)&&"SymmetricMatrix"===e.klassType}},{key:"zeros",value:function(e){return new this(e)}},{key:"ones",value:function(e){return new this(e).fill(1)}},{key:"fromCompact",value:function(e){var n=e.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(e)));for(var i=new t(r),a=0,o=0,s=0;s<n;s++)i.set(a,o,e[s]),++a>=r&&(a=++o);return i}}])}(D);G.prototype.klassType="SymmetricMatrix";var H=function(e){function t(e){var n;if(g(this,t),!(n=u(this,t,[e])).isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return n}return l(t,e),m(t,[{key:"set",value:function(e,n,a){return e===n&&(a=0),r(i(t.prototype),"set",this).call(this,e,n,a)}},{key:"addCross",value:function(e,n){return void 0===n&&(n=e,e=this.diagonalSize),(n=n.slice())[e]=0,r(i(t.prototype),"addCross",this).call(this,e,n)}},{key:"toSymmetricMatrix",value:function(){return new G(this)}},{key:"clone",value:function(){var e,n=new t(this.diagonalSize),r=p(this.upperRightEntries());try{for(r.s();!(e=r.n()).done;){var i=f(e.value,3),a=i[0],o=i[1],s=i[2];a!==o&&n.set(a,o,s)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"toCompact",value:function(){for(var e=this.diagonalSize,t=new Array((e-1)*e/2),n=1,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=1+ ++r);return t}}],[{key:"isDistanceMatrix",value:function(e){return G.isSymmetricMatrix(e)&&"DistanceMatrix"===e.klassSubType}},{key:"fromCompact",value:function(e){var t=e.length;if(0===t)return new this(0);var n=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(n))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(e)));for(var r=new this(n),i=1,a=0,o=0;o<t;o++)r.set(i,a,e[o]),++i>=n&&(i=1+ ++a);return r}}])}(G);H.prototype.klassSubType="DistanceMatrix";var j=function(e){function t(e,n,r){var i;return g(this,t),(i=u(this,t)).matrix=e,i.rows=n,i.columns=r,i}return l(t,e),m(t)}(D),V=function(e){function t(e,n){var r;return g(this,t),M(e,n),(r=u(this,t,[e,e.rows,1])).column=n,r}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.column,n),this}},{key:"get",value:function(e){return this.matrix.get(e,this.column)}}])}(j),W=function(e){function t(e,n){var r;return g(this,t),P(e,n),(r=u(this,t,[e,e.rows,n.length])).columnIndices=n,r}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columnIndices[t])}}])}(j),X=function(e){function t(e){return g(this,t),u(this,t,[e,e.rows,e.columns])}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columns-t-1)}}])}(j),Y=function(e){function t(e){return g(this,t),u(this,t,[e,e.rows,e.columns])}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rows-e-1,t)}}])}(j),q=function(e){function t(e,n){var r;return g(this,t),_(e,n),(r=u(this,t,[e,1,e.columns])).row=n,r}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(this.row,t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.row,t)}}])}(j),K=function(e){function t(e,n){var r;return g(this,t),C(e,n),(r=u(this,t,[e,n.length,e.columns])).rowIndices=n,r}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],t)}}])}(j),Z=function(e){function t(e,n,r){var i;return g(this,t),C(e,n),P(e,r),(i=u(this,t,[e,n.length,r.length])).rowIndices=n,i.columnIndices=r,i}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}])}(j),J=function(e){function t(e,n,r,i,a){var o;return g(this,t),R(e,n,r,i,a),(o=u(this,t,[e,r-n+1,a-i+1])).startRow=n,o.startColumn=i,o}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}])}(j),Q=function(e){function t(e){return g(this,t),u(this,t,[e,e.columns,e.rows])}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.matrix.set(t,e,n),this}},{key:"get",value:function(e,t){return this.matrix.get(t,e)}}])}(j),$=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t);var i=r.rows,a=void 0===i?1:i;if(e.length%a!==0)throw new Error("the data length is not divisible by the number of rows");return(n=u(this,t)).rows=a,n.columns=e.length/a,n.data=e,n}return l(t,e),m(t,[{key:"set",value:function(e,t,n){var r=this._calculateIndex(e,t);return this.data[r]=n,this}},{key:"get",value:function(e,t){var n=this._calculateIndex(e,t);return this.data[n]}},{key:"_calculateIndex",value:function(e,t){return e*this.columns+t}}])}(D),ee=function(e){function t(e){var n;return g(this,t),(n=u(this,t)).data=e,n.rows=e.length,n.columns=e[0].length,n}return l(t,e),m(t,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}}])}(D);var te=function(){return m((function e(t){g(this,e);var n,r,i,a,o,s,u,l,c,h=(t=ee.checkMatrix(t)).clone(),d=h.rows,f=h.columns,p=new Float64Array(d),v=1;for(n=0;n<d;n++)p[n]=n;for(l=new Float64Array(d),r=0;r<f;r++){for(n=0;n<d;n++)l[n]=h.get(n,r);for(n=0;n<d;n++){for(c=Math.min(n,r),o=0,i=0;i<c;i++)o+=h.get(n,i)*l[i];l[n]-=o,h.set(n,r,l[n])}for(a=r,n=r+1;n<d;n++)Math.abs(l[n])>Math.abs(l[a])&&(a=n);if(a!==r){for(i=0;i<f;i++)s=h.get(a,i),h.set(a,i,h.get(r,i)),h.set(r,i,s);u=p[a],p[a]=p[r],p[r]=u,v=-v}if(r<d&&0!==h.get(r,r))for(n=r+1;n<d;n++)h.set(n,r,h.get(n,r)/h.get(r,r))}this.LU=h,this.pivotVector=p,this.pivotSign=v}),[{key:"isSingular",value:function(){for(var e=this.LU,t=e.columns,n=0;n<t;n++)if(0===e.get(n,n))return!0;return!1}},{key:"solve",value:function(e){e=U.checkMatrix(e);var t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,i,a=e.columns,o=e.subMatrixRow(this.pivotVector,0,a-1),s=t.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*t.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<a;r++)o.set(i,r,o.get(i,r)/t.get(i,i));for(n=0;n<i;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*t.get(n,i))}return o}},{key:"determinant",get:function(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,n=e.columns,r=0;r<n;r++)t*=e.get(r,r);return t}},{key:"lowerTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new U(t,n),i=0;i<t;i++)for(var a=0;a<n;a++)i>a?r.set(i,a,e.get(i,a)):i===a?r.set(i,a,1):r.set(i,a,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new U(t,n),i=0;i<t;i++)for(var a=0;a<n;a++)i<=a?r.set(i,a,e.get(i,a)):r.set(i,a,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}])}();function ne(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var re=function(){return m((function e(t){g(this,e);var n,r,i,a,o=(t=ee.checkMatrix(t)).clone(),s=t.rows,u=t.columns,l=new Float64Array(u);for(i=0;i<u;i++){var c=0;for(n=i;n<s;n++)c=ne(c,o.get(n,i));if(0!==c){for(o.get(i,i)<0&&(c=-c),n=i;n<s;n++)o.set(n,i,o.get(n,i)/c);for(o.set(i,i,o.get(i,i)+1),r=i+1;r<u;r++){for(a=0,n=i;n<s;n++)a+=o.get(n,i)*o.get(n,r);for(a=-a/o.get(i,i),n=i;n<s;n++)o.set(n,r,o.get(n,r)+a*o.get(n,i))}}l[i]=-c}this.QR=o,this.Rdiag=l}),[{key:"solve",value:function(e){e=U.checkMatrix(e);var t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,i,a,o,s=e.columns,u=e.clone(),l=t.columns;for(a=0;a<l;a++)for(i=0;i<s;i++){for(o=0,r=a;r<n;r++)o+=t.get(r,a)*u.get(r,i);for(o=-o/t.get(a,a),r=a;r<n;r++)u.set(r,i,u.get(r,i)+o*t.get(r,a))}for(a=l-1;a>=0;a--){for(i=0;i<s;i++)u.set(a,i,u.get(a,i)/this.Rdiag[a]);for(r=0;r<a;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(a,i)*t.get(r,a))}return u.subMatrix(0,l-1,0,s-1)}},{key:"isFullRank",value:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var e,t,n=this.QR,r=n.columns,i=new U(r,r);for(e=0;e<r;e++)for(t=0;t<r;t++)e<t?i.set(e,t,n.get(e,t)):e===t?i.set(e,t,this.Rdiag[e]):i.set(e,t,0);return i}},{key:"orthogonalMatrix",get:function(){var e,t,n,r,i=this.QR,a=i.rows,o=i.columns,s=new U(a,o);for(n=o-1;n>=0;n--){for(e=0;e<a;e++)s.set(e,n,0);for(s.set(n,n,1),t=n;t<o;t++)if(0!==i.get(n,n)){for(r=0,e=n;e<a;e++)r+=i.get(e,n)*s.get(e,t);for(r=-r/i.get(n,n),e=n;e<a;e++)s.set(e,t,s.get(e,t)+r*i.get(e,n))}}return s}}])}(),ie=function(){return m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(this,e),(t=ee.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");var r,i=t.rows,a=t.columns,o=n.computeLeftSingularVectors,s=void 0===o||o,u=n.computeRightSingularVectors,l=void 0===u||u,c=n.autoTranspose,h=void 0!==c&&c,d=Boolean(s),f=Boolean(l),p=!1;if(i<a)if(h){i=(r=t.transpose()).rows,a=r.columns,p=!0;var v=d;d=f,f=v}else r=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=t.clone();for(var m=Math.min(i,a),y=Math.min(i+1,a),b=new Float64Array(y),x=new U(i,m),E=new U(a,a),w=new Float64Array(a),k=new Float64Array(i),S=new Float64Array(y),_=0;_<y;_++)S[_]=_;for(var M=Math.min(i-1,a),T=Math.max(0,Math.min(a-2,i)),A=Math.max(M,T),C=0;C<A;C++){if(C<M){b[C]=0;for(var P=C;P<i;P++)b[C]=ne(b[C],r.get(P,C));if(0!==b[C]){r.get(C,C)<0&&(b[C]=-b[C]);for(var R=C;R<i;R++)r.set(R,C,r.get(R,C)/b[C]);r.set(C,C,r.get(C,C)+1)}b[C]=-b[C]}for(var N=C+1;N<a;N++){if(C<M&&0!==b[C]){for(var O=0,L=C;L<i;L++)O+=r.get(L,C)*r.get(L,N);O=-O/r.get(C,C);for(var D=C;D<i;D++)r.set(D,N,r.get(D,N)+O*r.get(D,C))}w[N]=r.get(C,N)}if(d&&C<M)for(var I=C;I<i;I++)x.set(I,C,r.get(I,C));if(C<T){w[C]=0;for(var F=C+1;F<a;F++)w[C]=ne(w[C],w[F]);if(0!==w[C]){w[C+1]<0&&(w[C]=0-w[C]);for(var B=C+1;B<a;B++)w[B]/=w[C];w[C+1]+=1}if(w[C]=-w[C],C+1<i&&0!==w[C]){for(var z=C+1;z<i;z++)k[z]=0;for(var G=C+1;G<i;G++)for(var H=C+1;H<a;H++)k[G]+=w[H]*r.get(G,H);for(var j=C+1;j<a;j++)for(var V=-w[j]/w[C+1],W=C+1;W<i;W++)r.set(W,j,r.get(W,j)+V*k[W])}if(f)for(var X=C+1;X<a;X++)E.set(X,C,w[X])}}var Y=Math.min(a,i+1);if(M<a&&(b[M]=r.get(M,M)),i<Y&&(b[Y-1]=0),T+1<Y&&(w[T]=r.get(T,Y-1)),w[Y-1]=0,d){for(var q=M;q<m;q++){for(var K=0;K<i;K++)x.set(K,q,0);x.set(q,q,1)}for(var Z=M-1;Z>=0;Z--)if(0!==b[Z]){for(var J=Z+1;J<m;J++){for(var Q=0,$=Z;$<i;$++)Q+=x.get($,Z)*x.get($,J);Q=-Q/x.get(Z,Z);for(var te=Z;te<i;te++)x.set(te,J,x.get(te,J)+Q*x.get(te,Z))}for(var re=Z;re<i;re++)x.set(re,Z,-x.get(re,Z));x.set(Z,Z,1+x.get(Z,Z));for(var ie=0;ie<Z-1;ie++)x.set(ie,Z,0)}else{for(var ae=0;ae<i;ae++)x.set(ae,Z,0);x.set(Z,Z,1)}}if(f)for(var oe=a-1;oe>=0;oe--){if(oe<T&&0!==w[oe])for(var se=oe+1;se<a;se++){for(var ue=0,le=oe+1;le<a;le++)ue+=E.get(le,oe)*E.get(le,se);ue=-ue/E.get(oe+1,oe);for(var ce=oe+1;ce<a;ce++)E.set(ce,se,E.get(ce,se)+ue*E.get(ce,oe))}for(var he=0;he<a;he++)E.set(he,oe,0);E.set(oe,oe,1)}for(var de=Y-1,fe=Number.EPSILON;Y>0;){var pe=void 0,ve=void 0;for(pe=Y-2;pe>=-1&&-1!==pe;pe--){var ge=Number.MIN_VALUE+fe*Math.abs(b[pe]+Math.abs(b[pe+1]));if(Math.abs(w[pe])<=ge||Number.isNaN(w[pe])){w[pe]=0;break}}if(pe===Y-2)ve=4;else{var me=void 0;for(me=Y-1;me>=pe&&me!==pe;me--){var ye=(me!==Y?Math.abs(w[me]):0)+(me!==pe+1?Math.abs(w[me-1]):0);if(Math.abs(b[me])<=fe*ye){b[me]=0;break}}me===pe?ve=3:me===Y-1?ve=1:(ve=2,pe=me)}switch(pe++,ve){case 1:var be=w[Y-2];w[Y-2]=0;for(var xe=Y-2;xe>=pe;xe--){var Ee=ne(b[xe],be),we=b[xe]/Ee,ke=be/Ee;if(b[xe]=Ee,xe!==pe&&(be=-ke*w[xe-1],w[xe-1]=we*w[xe-1]),f)for(var Se=0;Se<a;Se++)Ee=we*E.get(Se,xe)+ke*E.get(Se,Y-1),E.set(Se,Y-1,-ke*E.get(Se,xe)+we*E.get(Se,Y-1)),E.set(Se,xe,Ee)}break;case 2:var _e=w[pe-1];w[pe-1]=0;for(var Me=pe;Me<Y;Me++){var Te=ne(b[Me],_e),Ae=b[Me]/Te,Ce=_e/Te;if(b[Me]=Te,_e=-Ce*w[Me],w[Me]=Ae*w[Me],d)for(var Pe=0;Pe<i;Pe++)Te=Ae*x.get(Pe,Me)+Ce*x.get(Pe,pe-1),x.set(Pe,pe-1,-Ce*x.get(Pe,Me)+Ae*x.get(Pe,pe-1)),x.set(Pe,Me,Te)}break;case 3:var Re=Math.max(Math.abs(b[Y-1]),Math.abs(b[Y-2]),Math.abs(w[Y-2]),Math.abs(b[pe]),Math.abs(w[pe])),Ne=b[Y-1]/Re,Oe=b[Y-2]/Re,Le=w[Y-2]/Re,De=b[pe]/Re,Ie=w[pe]/Re,Fe=((Oe+Ne)*(Oe-Ne)+Le*Le)/2,Ue=Ne*Le*(Ne*Le),Be=0;0===Fe&&0===Ue||(Be=Ue/(Fe+(Be=Fe<0?0-Math.sqrt(Fe*Fe+Ue):Math.sqrt(Fe*Fe+Ue))));for(var ze=(De+Ne)*(De-Ne)+Be,Ge=De*Ie,He=pe;He<Y-1;He++){var je=ne(ze,Ge);0===je&&(je=Number.MIN_VALUE);var Ve=ze/je,We=Ge/je;if(He!==pe&&(w[He-1]=je),ze=Ve*b[He]+We*w[He],w[He]=Ve*w[He]-We*b[He],Ge=We*b[He+1],b[He+1]=Ve*b[He+1],f)for(var Xe=0;Xe<a;Xe++)je=Ve*E.get(Xe,He)+We*E.get(Xe,He+1),E.set(Xe,He+1,-We*E.get(Xe,He)+Ve*E.get(Xe,He+1)),E.set(Xe,He,je);if(0===(je=ne(ze,Ge))&&(je=Number.MIN_VALUE),Ve=ze/je,We=Ge/je,b[He]=je,ze=Ve*w[He]+We*b[He+1],b[He+1]=-We*w[He]+Ve*b[He+1],Ge=We*w[He+1],w[He+1]=Ve*w[He+1],d&&He<i-1)for(var Ye=0;Ye<i;Ye++)je=Ve*x.get(Ye,He)+We*x.get(Ye,He+1),x.set(Ye,He+1,-We*x.get(Ye,He)+Ve*x.get(Ye,He+1)),x.set(Ye,He,je)}w[Y-2]=ze;break;case 4:if(b[pe]<=0&&(b[pe]=b[pe]<0?-b[pe]:0,f))for(var qe=0;qe<=de;qe++)E.set(qe,pe,-E.get(qe,pe));for(;pe<de&&!(b[pe]>=b[pe+1]);){var Ke=b[pe];if(b[pe]=b[pe+1],b[pe+1]=Ke,f&&pe<a-1)for(var Ze=0;Ze<a;Ze++)Ke=E.get(Ze,pe+1),E.set(Ze,pe+1,E.get(Ze,pe)),E.set(Ze,pe,Ke);if(d&&pe<i-1)for(var Je=0;Je<i;Je++)Ke=x.get(Je,pe+1),x.set(Je,pe+1,x.get(Je,pe)),x.set(Je,pe,Ke);pe++}Y--}}if(p){var Qe=E;E=x,x=Qe}this.m=i,this.n=a,this.s=b,this.U=x,this.V=E}),[{key:"solve",value:function(e){for(var t=e,n=this.threshold,r=this.s.length,i=U.zeros(r,r),a=0;a<r;a++)Math.abs(this.s[a])<=n?i.set(a,a,0):i.set(a,a,1/this.s[a]);for(var o=this.U,s=this.rightSingularVectors,u=s.mmul(i),l=s.rows,c=o.rows,h=U.zeros(l,c),d=0;d<l;d++)for(var f=0;f<c;f++){for(var p=0,v=0;v<r;v++)p+=u.get(d,v)*o.get(f,v);h.set(d,f,p)}return h.mmul(t)}},{key:"solveForDiagonal",value:function(e){return this.solve(U.diag(e))}},{key:"inverse",value:function(){for(var e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new U(n,this.s.length),a=0;a<n;a++)for(var o=0;o<r;o++)Math.abs(this.s[o])>t&&i.set(a,o,e.get(a,o)/this.s[o]);for(var s=this.U,u=s.rows,l=s.columns,c=new U(n,u),h=0;h<n;h++)for(var d=0;d<u;d++){for(var f=0,p=0;p<l;p++)f+=i.get(h,p)*s.get(d,p);c.set(h,d,f)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return U.diag(this.s)}}])}();function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=ee.checkMatrix(e),t=ee.checkMatrix(t),n?new ie(e).solve(t):e.isSquare()?new te(e).solve(t):new re(e).solve(t)}function oe(e,t){for(var n=[],r=0;r<e;r++)r!==t&&n.push(r);return n}function se(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(e>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(t.rows+1).fill(0);for(var i=t.addRow(n,[0]),a=0;a<i.rows;a++)Math.abs(i.get(a,0))<r&&i.set(a,0,0);return i.to1DArray()}var ue=function(){return m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e);var r=n.assumeSymmetric,i=void 0!==r&&r;if(!(t=ee.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");var a,o,s=t.columns,u=new U(s,s),l=new Float64Array(s),c=new Float64Array(s),h=t;if(!!i||t.isSymmetric()){for(a=0;a<s;a++)for(o=0;o<s;o++)u.set(a,o,h.get(a,o));!function(e,t,n,r){var i,a,o,s,u,l,c,h;for(u=0;u<e;u++)n[u]=r.get(e-1,u);for(s=e-1;s>0;s--){for(h=0,o=0,l=0;l<s;l++)h+=Math.abs(n[l]);if(0===h)for(t[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(l=0;l<s;l++)n[l]/=h,o+=n[l]*n[l];for(i=n[s-1],a=Math.sqrt(o),i>0&&(a=-a),t[s]=h*a,o-=i*a,n[s-1]=i-a,u=0;u<s;u++)t[u]=0;for(u=0;u<s;u++){for(i=n[u],r.set(u,s,i),a=t[u]+r.get(u,u)*i,l=u+1;l<=s-1;l++)a+=r.get(l,u)*n[l],t[l]+=r.get(l,u)*i;t[u]=a}for(i=0,u=0;u<s;u++)t[u]/=o,i+=t[u]*n[u];for(c=i/(o+o),u=0;u<s;u++)t[u]-=c*n[u];for(u=0;u<s;u++){for(i=n[u],a=t[u],l=u;l<=s-1;l++)r.set(l,u,r.get(l,u)-(i*t[l]+a*n[l]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=o}for(s=0;s<e-1;s++){if(r.set(e-1,s,r.get(s,s)),r.set(s,s,1),0!==(o=n[s+1])){for(l=0;l<=s;l++)n[l]=r.get(l,s+1)/o;for(u=0;u<=s;u++){for(a=0,l=0;l<=s;l++)a+=r.get(l,s+1)*r.get(l,u);for(l=0;l<=s;l++)r.set(l,u,r.get(l,u)-a*n[l])}}for(l=0;l<=s;l++)r.set(l,s+1,0)}for(u=0;u<e;u++)n[u]=r.get(e-1,u),r.set(e-1,u,0);r.set(e-1,e-1,1),t[0]=0}(s,c,l,u),function(e,t,n,r){var i,a,o,s,u,l,c,h,d,f,p,v,g,m,y,b;for(o=1;o<e;o++)t[o-1]=t[o];t[e-1]=0;var x=0,E=0,w=Number.EPSILON;for(l=0;l<e;l++){for(E=Math.max(E,Math.abs(n[l])+Math.abs(t[l])),c=l;c<e&&!(Math.abs(t[c])<=w*E);)c++;if(c>l)do{for(i=n[l],d=ne(h=(n[l+1]-i)/(2*t[l]),1),h<0&&(d=-d),n[l]=t[l]/(h+d),n[l+1]=t[l]*(h+d),f=n[l+1],a=i-n[l],o=l+2;o<e;o++)n[o]-=a;for(x+=a,h=n[c],v=p=1,g=p,m=t[l+1],y=0,b=0,o=c-1;o>=l;o--)for(g=v,v=p,b=y,i=p*t[o],a=p*h,d=ne(h,t[o]),t[o+1]=y*d,y=t[o]/d,h=(p=h/d)*n[o]-y*i,n[o+1]=a+y*(p*i+y*n[o]),u=0;u<e;u++)a=r.get(u,o+1),r.set(u,o+1,y*r.get(u,o)+p*a),r.set(u,o,p*r.get(u,o)-y*a);h=-y*b*g*m*t[l]/f,t[l]=y*h,n[l]=p*h}while(Math.abs(t[l])>w*E);n[l]=n[l]+x,t[l]=0}for(o=0;o<e-1;o++){for(u=o,h=n[o],s=o+1;s<e;s++)n[s]<h&&(u=s,h=n[s]);if(u!==o)for(n[u]=n[o],n[o]=h,s=0;s<e;s++)h=r.get(s,o),r.set(s,o,r.get(s,u)),r.set(s,u,h)}}(s,c,l,u)}else{var d=new U(s,s),f=new Float64Array(s);for(o=0;o<s;o++)for(a=0;a<s;a++)d.set(a,o,h.get(a,o));!function(e,t,n,r){var i,a,o,s,u,l,c,h=0,d=e-1;for(l=h+1;l<=d-1;l++){for(c=0,s=l;s<=d;s++)c+=Math.abs(t.get(s,l-1));if(0!==c){for(o=0,s=d;s>=l;s--)n[s]=t.get(s,l-1)/c,o+=n[s]*n[s];for(a=Math.sqrt(o),n[l]>0&&(a=-a),o-=n[l]*a,n[l]=n[l]-a,u=l;u<e;u++){for(i=0,s=d;s>=l;s--)i+=n[s]*t.get(s,u);for(i/=o,s=l;s<=d;s++)t.set(s,u,t.get(s,u)-i*n[s])}for(s=0;s<=d;s++){for(i=0,u=d;u>=l;u--)i+=n[u]*t.get(s,u);for(i/=o,u=l;u<=d;u++)t.set(s,u,t.get(s,u)-i*n[u])}n[l]=c*n[l],t.set(l,l-1,c*a)}}for(s=0;s<e;s++)for(u=0;u<e;u++)r.set(s,u,s===u?1:0);for(l=d-1;l>=h+1;l--)if(0!==t.get(l,l-1)){for(s=l+1;s<=d;s++)n[s]=t.get(s,l-1);for(u=l;u<=d;u++){for(a=0,s=l;s<=d;s++)a+=n[s]*r.get(s,u);for(a=a/n[l]/t.get(l,l-1),s=l;s<=d;s++)r.set(s,u,r.get(s,u)+a*n[s])}}}(s,d,f,u),function(e,t,n,r,i){var a,o,s,u,l,c,h,d,f,p,v,g,m,y,b,x=e-1,E=0,w=e-1,k=Number.EPSILON,S=0,_=0,M=0,T=0,A=0,C=0,P=0,R=0;for(a=0;a<e;a++)for((a<E||a>w)&&(n[a]=i.get(a,a),t[a]=0),o=Math.max(a-1,0);o<e;o++)_+=Math.abs(i.get(a,o));for(;x>=E;){for(u=x;u>E&&(0===(C=Math.abs(i.get(u-1,u-1))+Math.abs(i.get(u,u)))&&(C=_),!(Math.abs(i.get(u,u-1))<k*C));)u--;if(u===x)i.set(x,x,i.get(x,x)+S),n[x]=i.get(x,x),t[x]=0,x--,R=0;else if(u===x-1){if(h=i.get(x,x-1)*i.get(x-1,x),T=(M=(i.get(x-1,x-1)-i.get(x,x))/2)*M+h,P=Math.sqrt(Math.abs(T)),i.set(x,x,i.get(x,x)+S),i.set(x-1,x-1,i.get(x-1,x-1)+S),d=i.get(x,x),T>=0){for(P=M>=0?M+P:M-P,n[x-1]=d+P,n[x]=n[x-1],0!==P&&(n[x]=d-h/P),t[x-1]=0,t[x]=0,M=(d=i.get(x,x-1))/(C=Math.abs(d)+Math.abs(P)),T=P/C,M/=A=Math.sqrt(M*M+T*T),T/=A,o=x-1;o<e;o++)P=i.get(x-1,o),i.set(x-1,o,T*P+M*i.get(x,o)),i.set(x,o,T*i.get(x,o)-M*P);for(a=0;a<=x;a++)P=i.get(a,x-1),i.set(a,x-1,T*P+M*i.get(a,x)),i.set(a,x,T*i.get(a,x)-M*P);for(a=E;a<=w;a++)P=r.get(a,x-1),r.set(a,x-1,T*P+M*r.get(a,x)),r.set(a,x,T*r.get(a,x)-M*P)}else n[x-1]=d+M,n[x]=d+M,t[x-1]=P,t[x]=-P;x-=2,R=0}else{if(d=i.get(x,x),f=0,h=0,u<x&&(f=i.get(x-1,x-1),h=i.get(x,x-1)*i.get(x-1,x)),10===R){for(S+=d,a=E;a<=x;a++)i.set(a,a,i.get(a,a)-d);d=f=.75*(C=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2))),h=-.4375*C*C}if(30===R&&(C=(C=(f-d)/2)*C+h)>0){for(C=Math.sqrt(C),f<d&&(C=-C),C=d-h/((f-d)/2+C),a=E;a<=x;a++)i.set(a,a,i.get(a,a)-C);S+=C,d=f=h=.964}for(R+=1,l=x-2;l>=u&&(M=((A=d-(P=i.get(l,l)))*(C=f-P)-h)/i.get(l+1,l)+i.get(l,l+1),T=i.get(l+1,l+1)-P-A-C,A=i.get(l+2,l+1),M/=C=Math.abs(M)+Math.abs(T)+Math.abs(A),T/=C,A/=C,l!==u)&&!(Math.abs(i.get(l,l-1))*(Math.abs(T)+Math.abs(A))<k*(Math.abs(M)*(Math.abs(i.get(l-1,l-1))+Math.abs(P)+Math.abs(i.get(l+1,l+1)))));)l--;for(a=l+2;a<=x;a++)i.set(a,a-2,0),a>l+2&&i.set(a,a-3,0);for(s=l;s<=x-1&&(y=s!==x-1,s!==l&&(M=i.get(s,s-1),T=i.get(s+1,s-1),A=y?i.get(s+2,s-1):0,0!==(d=Math.abs(M)+Math.abs(T)+Math.abs(A))&&(M/=d,T/=d,A/=d)),0!==d);s++)if(C=Math.sqrt(M*M+T*T+A*A),M<0&&(C=-C),0!==C){for(s!==l?i.set(s,s-1,-C*d):u!==l&&i.set(s,s-1,-i.get(s,s-1)),d=(M+=C)/C,f=T/C,P=A/C,T/=M,A/=M,o=s;o<e;o++)M=i.get(s,o)+T*i.get(s+1,o),y&&(M+=A*i.get(s+2,o),i.set(s+2,o,i.get(s+2,o)-M*P)),i.set(s,o,i.get(s,o)-M*d),i.set(s+1,o,i.get(s+1,o)-M*f);for(a=0;a<=Math.min(x,s+3);a++)M=d*i.get(a,s)+f*i.get(a,s+1),y&&(M+=P*i.get(a,s+2),i.set(a,s+2,i.get(a,s+2)-M*A)),i.set(a,s,i.get(a,s)-M),i.set(a,s+1,i.get(a,s+1)-M*T);for(a=E;a<=w;a++)M=d*r.get(a,s)+f*r.get(a,s+1),y&&(M+=P*r.get(a,s+2),r.set(a,s+2,r.get(a,s+2)-M*A)),r.set(a,s,r.get(a,s)-M),r.set(a,s+1,r.get(a,s+1)-M*T)}}}if(0===_)return;for(x=e-1;x>=0;x--)if(M=n[x],0===(T=t[x]))for(u=x,i.set(x,x,1),a=x-1;a>=0;a--){for(h=i.get(a,a)-M,A=0,o=u;o<=x;o++)A+=i.get(a,o)*i.get(o,x);if(t[a]<0)P=h,C=A;else if(u=a,0===t[a]?i.set(a,x,0!==h?-A/h:-A/(k*_)):(d=i.get(a,a+1),f=i.get(a+1,a),c=(d*C-P*A)/(T=(n[a]-M)*(n[a]-M)+t[a]*t[a]),i.set(a,x,c),i.set(a+1,x,Math.abs(d)>Math.abs(P)?(-A-h*c)/d:(-C-f*c)/P)),k*(c=Math.abs(i.get(a,x)))*c>1)for(o=a;o<=x;o++)i.set(o,x,i.get(o,x)/c)}else if(T<0)for(u=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,T/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-M)/i.get(x,x-1))):(b=le(0,-i.get(x-1,x),i.get(x-1,x-1)-M,T),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),a=x-2;a>=0;a--){for(p=0,v=0,o=u;o<=x;o++)p+=i.get(a,o)*i.get(o,x-1),v+=i.get(a,o)*i.get(o,x);if(h=i.get(a,a)-M,t[a]<0)P=h,A=p,C=v;else if(u=a,0===t[a]?(b=le(-p,-v,h,T),i.set(a,x-1,b[0]),i.set(a,x,b[1])):(d=i.get(a,a+1),f=i.get(a+1,a),g=(n[a]-M)*(n[a]-M)+t[a]*t[a]-T*T,m=2*(n[a]-M)*T,0===g&&0===m&&(g=k*_*(Math.abs(h)+Math.abs(T)+Math.abs(d)+Math.abs(f)+Math.abs(P))),b=le(d*A-P*p+T*v,d*C-P*v-T*p,g,m),i.set(a,x-1,b[0]),i.set(a,x,b[1]),Math.abs(d)>Math.abs(P)+Math.abs(T)?(i.set(a+1,x-1,(-p-h*i.get(a,x-1)+T*i.get(a,x))/d),i.set(a+1,x,(-v-h*i.get(a,x)-T*i.get(a,x-1))/d)):(b=le(-A-f*i.get(a,x-1),-C-f*i.get(a,x),P,T),i.set(a+1,x-1,b[0]),i.set(a+1,x,b[1]))),k*(c=Math.max(Math.abs(i.get(a,x-1)),Math.abs(i.get(a,x))))*c>1)for(o=a;o<=x;o++)i.set(o,x-1,i.get(o,x-1)/c),i.set(o,x,i.get(o,x)/c)}for(a=0;a<e;a++)if(a<E||a>w)for(o=a;o<e;o++)r.set(a,o,i.get(a,o));for(o=e-1;o>=E;o--)for(a=E;a<=w;a++){for(P=0,s=E;s<=Math.min(o,w);s++)P+=r.get(a,s)*i.get(s,o);r.set(a,o,P)}}(s,c,l,u,d)}this.n=s,this.e=c,this.d=l,this.V=u}),[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var e,t,n=this.n,r=this.e,i=this.d,a=new U(n,n);for(e=0;e<n;e++){for(t=0;t<n;t++)a.set(e,t,0);a.set(e,e,i[e]),r[e]>0?a.set(e,e+1,r[e]):r[e]<0&&a.set(e,e-1,r[e])}return a}}])}();function le(e,t,n,r){var i,a;return Math.abs(n)>Math.abs(r)?[(e+(i=r/n)*t)/(a=n+i*r),(t-i*e)/a]:[((i=n/r)*e+t)/(a=r+i*n),(i*t-e)/a]}var ce=function(){return m((function e(t){if(g(this,e),!(t=ee.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var n,r,i,a=t,o=a.rows,s=new U(o,o),u=!0;for(r=0;r<o;r++){var l=0;for(i=0;i<r;i++){var c=0;for(n=0;n<i;n++)c+=s.get(i,n)*s.get(r,n);c=(a.get(r,i)-c)/s.get(i,i),s.set(r,i,c),l+=c*c}for(l=a.get(r,r)-l,u&&(u=l>0),s.set(r,r,Math.sqrt(Math.max(l,0))),i=r+1;i<o;i++)s.set(r,i,0)}this.L=s,this.positiveDefinite=u}),[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(e){e=ee.checkMatrix(e);var t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var r,i,a,o=e.columns,s=e.clone();for(a=0;a<n;a++)for(i=0;i<o;i++){for(r=0;r<a;r++)s.set(a,i,s.get(a,i)-s.get(r,i)*t.get(a,r));s.set(a,i,s.get(a,i)/t.get(a,a))}for(a=n-1;a>=0;a--)for(i=0;i<o;i++){for(r=a+1;r<n;r++)s.set(a,i,s.get(a,i)-s.get(r,i)*t.get(r,a));s.set(a,i,s.get(a,i)/t.get(a,a))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}])}(),he=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e),t=ee.checkMatrix(t);var r,i=n.Y,a=n.scaleScores,o=void 0!==a&&a,s=n.maxIterations,u=void 0===s?1e3:s,l=n.terminationCriteria,c=void 0===l?1e-10:l;if(i){if((i=y.isAnyArray(i)&&"number"===typeof i[0]?U.columnVector(i):ee.checkMatrix(i)).rows!==t.rows)throw new Error("Y should have the same number of rows as X");r=i.getColumnVector(0)}else r=t.getColumnVector(0);for(var h,d,f,p,v=1,m=0;m<u&&v>c;m++)f=(f=t.transpose().mmul(r).div(r.transpose().mmul(r).get(0,0))).div(f.norm()),h=t.mmul(f).div(f.transpose().mmul(f).get(0,0)),m>0&&(v=h.clone().sub(p).pow(2).sum()),p=h.clone(),i?(d=(d=i.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0))).div(d.norm()),r=i.mmul(d).div(d.transpose().mmul(d).get(0,0))):r=h;if(i){var b=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));b=b.div(b.norm());var x=t.clone().sub(h.clone().mmul(b.transpose())),E=r.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),w=i.clone().sub(h.clone().mulS(E.get(0,0)).mmul(d.transpose()));this.t=h,this.p=b.transpose(),this.w=f.transpose(),this.q=d,this.u=r,this.s=h.transpose().mmul(h),this.xResidual=x,this.yResidual=w,this.betas=E}else this.w=f.transpose(),this.s=h.transpose().mmul(h).sqrt(),this.t=o?h.clone().div(this.s.get(0,0)):h,this.xResidual=t.sub(h.mmul(f.transpose()))}));t.y3=D,t.jy=ce,t.oN=ce,t.Hc=H,t.cg=ue,t.hj=ue,t.LU=te,t.Tb=te,t.uq=U,t.Zm=W,t.Dq=V,t.__=X,t.q0=Y,t.lh=K,t.pI=q,t.zC=Z,t.zg=J,t.g6=Q,t.OL=he,t.ks=he,t.QR=re,t.jp=re,t.mk=ie,t.W2=ie,t.l=G,t.KY=$,t.dv=ee,t.BR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new U(e);var r=!1;if("object"!==typeof t||U.isMatrix(t)||y.isAnyArray(t)?t=new U(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n,a=i.center,o=void 0===a||a,s=i.scale,u=void 0===s||s;o&&(e.center("column"),r||t.center("column")),u&&(e.scale("column"),r||t.scale("column"));for(var l=e.standardDeviation("column",{unbiased:!0}),c=r?l:t.standardDeviation("column",{unbiased:!0}),h=e.transpose().mmul(t),d=0;d<h.rows;d++)for(var f=0;f<h.columns;f++)h.set(d,f,h.get(d,f)*(1/(l[d]*c[f]))*(1/(e.rows-1)));return h},t.Wu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new U(e);var r=!1;if("object"!==typeof t||U.isMatrix(t)||y.isAnyArray(t)?t=new U(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n.center;(void 0===i||i)&&(e=e.center("column"),r||(t=t.center("column")));for(var a=e.transpose().mmul(t),o=0;o<a.rows;o++)for(var s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(e.rows-1)));return a},t.a4=function e(t){var n,r,i,a,o,s;if((t=U.checkMatrix(t)).isSquare())return 0===t.columns?1:2===t.columns?(n=t.get(0,0),r=t.get(0,1),i=t.get(1,0),n*t.get(1,1)-r*i):3===t.columns?(a=new Z(t,[1,2],[1,2]),o=new Z(t,[1,2],[0,2]),s=new Z(t,[1,2],[0,1]),n=t.get(0,0),r=t.get(0,1),i=t.get(0,2),n*e(a)-r*e(o)+i*e(s)):new te(t).determinant;throw Error("determinant can only be calculated for a square matrix")},t.DI=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=ee.checkMatrix(e),t?new ie(e).inverse():ae(e,U.eye(e.rows))},t.Jo=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.thresholdValue,r=void 0===n?1e-9:n,i=t.thresholdError,a=void 0===i?1e-9:i,o=(e=U.checkMatrix(e)).rows,s=new U(o,o),u=0;u<o;u++){var l=U.columnVector(e.getRow(u)),c=e.subMatrixRow(oe(o,u)).transpose(),h=new ie(c).solve(l),d=U.sub(l,c.mmul(h)).abs().max();s.setRow(u,se(d,h,u,r,a))}return s},t.Zi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((e=U.checkMatrix(e)).isEmpty())return e.transpose();for(var n=new ie(e,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,a=n.diagonal,o=0;o<a.length;o++)Math.abs(a[o])>t?a[o]=1/a[o]:a[o]=0;return i.mmul(U.diag(a).mmul(r.transpose()))},t.kH=ae,t.LV=function(e,t){if(y.isAnyArray(e))return e[0]&&y.isAnyArray(e[0])?new ee(e):new $(e,t);throw new Error("the argument is not an array")}},713:function(e,t,n){"use strict";var r=n(9198),i=n(3356);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,U=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function G(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case M:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ne(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,de=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Me(e){if(e=xi(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Te(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ae(){if(Se){var e=Se,t=_e;if(_e=Se=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Se||null!==_e)&&(Pe(),Ae())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(he){Le=!1}function Ie(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Fe=!1,Ue=null,Be=!1,ze=null,Ge={onError:function(e){Fe=!0,Ue=e}};function He(e,t,n,r,i,a,o,s,u){Fe=!1,Ue=null,Ie.apply(Ge,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(a(188))}function Xe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Je=i.unstable_requestPaint,Qe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,et=i.unstable_ImmediatePriority,tt=i.unstable_UserBlockingPriority,nt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,it=i.unstable_IdlePriority,at=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/lt|0)|0},ut=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,_t,Mt,Tt=!1,At=[],Ct=null,Pt=null,Rt=null,Nt=new Map,Ot=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=bi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Mt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function Gt(){Tt=!1,null!==Ct&&Bt(Ct)&&(Ct=null),null!==Pt&&Bt(Pt)&&(Pt=null),null!==Rt&&Bt(Rt)&&(Rt=null),Nt.forEach(zt),Ot.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gt)))}function jt(e){function t(t){return Ht(t,e)}if(0<At.length){Ht(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ht(Ct,e),null!==Pt&&Ht(Pt,e),null!==Rt&&Ht(Rt,e),Nt.forEach(t),Ot.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Lt.shift()}var Vt=E.ReactCurrentBatchConfig,Wt=!0;function Xt(e,t,n,r){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=1,qt(e,t,n,r)}finally{xt=i,Vt.transition=a}}function Yt(e,t,n,r){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=4,qt(e,t,n,r)}finally{xt=i,Vt.transition=a}}function qt(e,t,n,r){if(Wt){var i=Zt(e,t,n,r);if(null===i)Wr(e,t,r,Kt,n),It(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return Pt=Ft(Pt,e,t,n,r,i),!0;case"mouseover":return Rt=Ft(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Ft(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Ft(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=xi(i);if(null!==a&&wt(a),null===(a=Zt(e,t,n,r))&&Wr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Zt(e,t,n,r){if(Kt=null,null!==(e=bi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function on(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:an,this.isPropagationStopped=an,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,un,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(cn),dn=U({},cn,{view:0,detail:0}),fn=on(dn),pn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,un=e.screenY-ln.screenY):un=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=on(pn),gn=on(U({},pn,{dataTransfer:0})),mn=on(U({},dn,{relatedTarget:0})),yn=on(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(bn),En=on(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Mn(){return _n}var Tn=U({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Tn),Cn=on(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Rn=on(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Nn),Ln=[9,13,27,32],Dn=c&&"CompositionEvent"in window,In=null;c&&"documentMode"in document&&(In=document.documentMode);var Fn=c&&"TextEvent"in window&&!In,Un=c&&(!Dn||In&&8<In&&11>=In),Bn=String.fromCharCode(32),zn=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Xn(e,t,n,r){Te(r),0<(t=Yr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,qn=null;function Kn(e){Br(e,0)}function Zn(e){if(q(Ei(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(c){var $n;if(c){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){Yn&&(Yn.detachEvent("onpropertychange",rr),qn=Yn=null)}function rr(e){if("value"===e.propertyName&&Zn(qn)){var t=[];Xn(t,qn,e,we(e)),Ne(Kn,t)}}function ir(e,t,n){"focusin"===e?(nr(),qn=n,(Yn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(qn)}function or(e,t){if("click"===e)return Zn(t)}function sr(e,t){if("input"===e||"change"===e)return Zn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=hr(n,a);var o=hr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,br=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Yr(yr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},_r={};function Mr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=Mr("animationend"),Ar=Mr("animationiteration"),Cr=Mr("animationstart"),Pr=Mr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),u(t,[e])}for(var Lr=0;Lr<Nr.length;Lr++){var Dr=Nr[Lr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Ar,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Ue;Fe=!1,Ue=null,Be||(Be=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,l),a=u}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Gr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Hr]){e[Hr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Gr(t,!1,e),Gr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Gr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var i=Xt;break;case 4:i=Yt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=bi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=hn,l=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Tr:case Ar:case Cr:u=yn;break;case Pr:u=Rn;break;case"scroll":u=fn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Oe(p,d))&&c.push(Xr(p,v,f)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ee||!(l=n.relatedTarget||n.fromElement)||!bi(l)&&!l[vi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?bi(l):null)&&(l!==(h=je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=vn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?s:Ei(u),f=null==l?s:Ei(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=f,v=null,bi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(d=l,p=0,f=c=u;f;f=qr(f))p++;for(f=0,v=d;v;v=qr(v))f++;for(;0<p-f;)c=qr(c),p--;for(;0<f-p;)d=qr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=qr(c),d=qr(d)}c=null}else c=null;null!==u&&Kr(o,s,u,c,!1),null!==l&&null!==h&&Kr(o,h,l,c,!0)}if("select"===(u=(s=r?Ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Jn;else if(Wn(s))if(Qn)g=sr;else{g=ar;var m=ir}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Xn(o,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&te(s,"number",s.value)),m=r?Ei(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(mr=m,yr=r,br=null);break;case"focusout":br=yr=mr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Gn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(y=tn()):($t="value"in(Qt=i)?Qt.value:Qt.textContent,jn=!0)),0<(m=Yr(r,b)).length&&(b=new En(b,e,null,n,i),o.push({event:b,listeners:m}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Dn&&Gn(e,t)?(e=tn(),en=$t=Qt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Br(o,t)}))}function Xr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Xr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Xr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Oe(n,a))&&o.unshift(Xr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Xr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,ai="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ui)}:ii;function ui(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,vi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[fi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[fi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function Mi(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ti(e,t){Si++,ki[Si]=e.current,e.current=t}var Ai={},Ci=_i(Ai),Pi=_i(!1),Ri=Ai;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Mi(Pi),Mi(Ci)}function Di(e,t,n){if(Ci.current!==Ai)throw Error(a(168));Ti(Ci,t),Ti(Pi,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return U({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ri=Ci.current,Ti(Ci,e),Ti(Pi,Pi.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ii(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Mi(Pi),Mi(Ci),Ti(Ci,e)):Mi(Pi),Ti(Pi,n)}var Bi=null,zi=!1,Gi=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function ji(){if(!Gi&&null!==Bi){Gi=!0;var e=0,t=xt;try{var n=Bi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,zi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),qe(et,ji),i}finally{xt=t,Gi=!1}}return null}var Vi=[],Wi=0,Xi=null,Yi=0,qi=[],Ki=0,Zi=null,Ji=1,Qi="";function $i(e,t){Vi[Wi++]=Yi,Vi[Wi++]=Xi,Xi=e,Yi=t}function ea(e,t,n){qi[Ki++]=Ji,qi[Ki++]=Qi,qi[Ki++]=Zi,Zi=e;var r=Ji;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-st(t)+i|n<<i|r,Qi=a+e}else Ji=1<<a|n<<i|r,Qi=e}function ta(e){null!==e.return&&($i(e,1),ea(e,1,0))}function na(e){for(;e===Xi;)Xi=Vi[--Wi],Vi[Wi]=null,Yi=Vi[--Wi],Vi[Wi]=null;for(;e===Zi;)Zi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null,Ji=qi[--Ki],qi[Ki]=null}var ra=null,ia=null,aa=!1,oa=null;function sa(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,ia=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(aa){var t=ia;if(t){var n=t;if(!ua(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=ra;t&&ua(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function da(e){if(e!==ra)return!1;if(!aa)return ha(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw fa(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=ra?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ia;e;)e=ci(e.nextSibling)}function pa(){ia=ra=null,aa=!1}function va(e){null===oa?oa=[e]:oa.push(e)}var ga=E.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=_i(null),ba=null,xa=null,Ea=null;function wa(){Ea=xa=ba=null}function ka(e){var t=ya.current;Mi(ya),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){ba=e,Ea=xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Es=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===xa){if(null===ba)throw Error(a(308));xa=e,ba.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var Ta=null;function Aa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Aa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Pa(e,r)}function Pa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Pa(e,n)}return null===(i=r.interleaved)?(t.next=t,Aa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Pa(e,n)}function Ia(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(f,h,d):p)||void 0===d)break e;h=U({},h,d);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Uu|=o,e.lanes=o,e.memoizedState=h}}function Ba(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var za=(new r.Component).refs;function Ga(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ha={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),a=La(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(il(t,e,i,r),Ia(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),a=La(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(il(t,e,i,r),Ia(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nl(),r=rl(e),i=La(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(il(t,e,r,n),Ia(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Va(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(i=Oi(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ha.enqueueReplaceState(t,t.state,null)}function Xa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=za,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ma(a):(a=Oi(t)?Ri:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ga(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ha.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ya(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===za&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Ya(e,t,n),r.return=e,r):((r=Il(n.type,n.key,n.props,null,e.mode,r)).ref=Ya(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Fl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Il(t.type,t.key,t.props,null,e.mode,n)).ref=Ya(e,null,t),n.return=e,n;case k:return(t=zl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(ne(t)||I(t))return(t=Fl(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(ne(n)||I(n))return null!==i?null:h(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||I(r))return h(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var m=f(i,h,s[v],u);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m,h=g}if(v===s.length)return n(i,h),aa&&$i(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return aa&&$i(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(g=p(h,i,v,s[v],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?v:g.key),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),aa&&$i(i,v),l}function g(i,s,u,l){var c=I(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=f(i,v,y.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,g),null===h?c=b:h.sibling=b,h=b,v=m}if(y.done)return n(i,v),aa&&$i(i,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=d(i,y.value,l))&&(s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return aa&&$i(i,g),c}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),aa&&$i(i,g),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Ka(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ya(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((a=Fl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Il(o.type,o.key,o.props,null,r.mode,u)).ref=Ya(r,a,o),u.return=r,r=u)}return s(r);case k:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zl(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(c=o._init)(o._payload),u)}if(ne(o))return v(r,a,o,u);if(I(o))return g(r,a,o,u);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Bl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Za(!0),Qa=Za(!1),$a={},eo=_i($a),to=_i($a),no=_i($a);function ro(e){if(e===$a)throw Error(a(174));return e}function io(e,t){switch(Ti(no,t),Ti(to,e),Ti(eo,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi(eo),Ti(eo,t)}function ao(){Mi(eo),Mi(to),Mi(no)}function oo(e){ro(no.current);var t=ro(eo.current),n=le(t,e.type);t!==n&&(Ti(to,e),Ti(eo,n))}function so(e){to.current===e&&(Mi(eo),Mi(to))}var uo=_i(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function ho(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=E.ReactCurrentDispatcher,po=E.ReactCurrentBatchConfig,vo=0,go=null,mo=null,yo=null,bo=!1,xo=!1,Eo=0,wo=0;function ko(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(vo=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?us:ls,e=n(r,i),xo){o=0;do{if(xo=!1,Eo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(xo)}if(fo.current=ss,t=null!==mo&&null!==mo.next,vo=0,yo=mo=go=null,bo=!1,t)throw Error(a(300));return e}function Mo(){var e=0!==Eo;return Eo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=e:yo=yo.next=e,yo}function Ao(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?go.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Po(e){var t=Ao(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((vo&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,go.lanes|=h,Uu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,ur(r,t.memoizedState)||(Es=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,Uu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Ao(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ur(o,t.memoizedState)||(Es=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Oo(e,t){var n=go,r=Ao(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,Es=!0),r=r.queue,Wo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&vo)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Uo(e)}function Io(e,t,n){return n((function(){Fo(t)&&Uo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Uo(e){var t=Pa(e,1);null!==t&&il(t,e,1,-1)}function Bo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,go,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Go(){return Ao().memoizedState}function Ho(e,t,n,r){var i=To();go.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=Ao();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=zo(t,n,a,r))}go.flags|=e,i.memoizedState=zo(1|t,n,a,r)}function Vo(e,t){return Ho(8390656,8,e,t)}function Wo(e,t){return jo(2048,8,e,t)}function Xo(e,t){return jo(4,2,e,t)}function Yo(e,t){return jo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,qo.bind(null,t,e),n)}function Zo(){}function Jo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,Es=!0),e.memoizedState=n):(ur(n,t)||(n=gt(),go.lanes|=n,Uu|=n,e.baseState=!0),t)}function es(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{xt=n,po.transition=r}}function ts(){return Ao().memoizedState}function ns(e,t,n){var r=rl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))as(t,n);else if(null!==(n=Ca(e,t,n,r))){il(n,e,r,nl()),os(n,t,r)}}function rs(e,t,n){var r=rl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))as(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,ur(s,o)){var u=t.interleaved;return null===u?(i.next=i,Aa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ca(e,t,i,r))&&(il(n,e,r,i=nl()),os(n,t,r))}}function is(e){var t=e.alternate;return e===go||null!==t&&t===go}function as(e,t){xo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ss={readContext:Ma,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},us={readContext:Ma,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ho(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ns.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Bo,useDebugValue:Zo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=es.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=To();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&vo)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Io.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ru.identifierPrefix;if(aa){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=Eo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ma,useCallback:Jo,useContext:Ma,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Xo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Po,useRef:Go,useState:function(){return Po(Co)},useDebugValue:Zo,useDeferredValue:function(e){return $o(Ao(),mo.memoizedState,e)},useTransition:function(){return[Po(Co)[0],Ao().memoizedState]},useMutableSource:No,useSyncExternalStore:Oo,useId:ts,unstable_isNewReconciler:!1},cs={readContext:Ma,useCallback:Jo,useContext:Ma,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:Xo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Ro,useRef:Go,useState:function(){return Ro(Co)},useDebugValue:Zo,useDeferredValue:function(e){var t=Ao();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],Ao().memoizedState]},useMutableSource:No,useSyncExternalStore:Oo,useId:ts,unstable_isNewReconciler:!1};function hs(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function vs(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,Yu=r),fs(0,t)},n}function gs(e,t,n){(n=La(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xs=E.ReactCurrentOwner,Es=!1;function ws(e,t,n,r){t.child=null===e?Qa(t,null,n,r):Ja(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var a=t.ref;return _a(t,i),r=_o(e,t,n,r,a,i),n=Mo(),null===e||Es?(aa&&n&&ta(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ll(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Il(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_s(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Xs(e,t,i)}return t.flags|=1,(e=Dl(a,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(Es=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Xs(e,t,i);0!==(131072&e.flags)&&(Es=!0)}}return As(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Du,Lu),Lu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Du,Lu),Lu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Du,Lu),Lu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Du,Lu),Lu|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,r,i){var a=Oi(n)?Ri:Ci.current;return a=Ni(t,a),_a(t,i),n=_o(e,t,n,r,a,i),r=Mo(),null===e||Es?(aa&&r&&ta(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xs(e,t,i))}function Cs(e,t,n,r,i){if(Oi(n)){var a=!0;Fi(t)}else a=!1;if(_a(t,i),null===t.stateNode)Ws(e,t),Va(t,n,r),Xa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ma(l):l=Ni(t,l=Oi(n)?Ri:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Wa(t,o,r,l),Ra=!1;var d=t.memoizedState;o.state=d,Ua(t,r,o,i),u=t.memoizedState,s!==r||d!==u||Pi.current||Ra?("function"===typeof c&&(Ga(t,n,c,r),u=t.memoizedState),(s=Ra||ja(t,n,s,r,d,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ma(u):u=Ni(t,u=Oi(n)?Ri:Ci.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==u)&&Wa(t,o,r,u),Ra=!1,d=t.memoizedState,o.state=d,Ua(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Pi.current||Ra?("function"===typeof f&&(Ga(t,n,f,r),p=t.memoizedState),(l=Ra||ja(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ps(e,t,n,r,a,i)}function Ps(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Xs(e,t,a);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),io(e,t.containerInfo)}function Ns(e,t,n,r,i){return pa(),va(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,Ls,Ds,Is,Fs={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,o=uo.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ul(u,i,0,null),e=Fl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Fs,e):zs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Gs(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ul({mode:"visible",children:r.children},i,0,null),(o=Fl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Fs,o);if(0===(1&t.mode))return Gs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Gs(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),Es||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Pa(e,i),il(r,e,i,-1))}return ml(),Gs(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ia=ci(i.nextSibling),ra=t,aa=!0,oa=null,null!==e&&(qi[Ki++]=Ji,qi[Ki++]=Qi,qi[Ki++]=Zi,Ji=e.id,Qi=e.overflow,Zi=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dl(r,s):(s=Fl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Us(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Dl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zs(e,t){return(t=Ul({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Gs(e,t,n,r){return null!==r&&va(r),Ja(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Oi(t.type)&&Li(),qs(t),null;case 3:return r=t.stateNode,ao(),Mi(Pi),Mi(Ci),ho(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oa&&(ul(oa),oa=null))),Ls(e,t),qs(t),null;case 5:so(t);var i=ro(no.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=ro(eo.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":J(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var u in be(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":Y(r),ee(r,o,!0);break;case"textarea":Y(r),se(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[pi]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":J(e,r),i=Z(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),i=ie(e,r),zr("invalid",e)}for(o in be(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&x(e,o,c,u))}switch(n){case"input":Y(e),ee(e,r,!1);break;case"textarea":Y(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Is(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ro(no.current),ro(eo.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return qs(t),null;case 13:if(Mi(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))fa(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==oa&&(ul(oa),oa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Iu&&(Iu=3):ml())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ao(),Ls(e,t),null===e&&jr(t.stateNode.containerInfo),qs(t),null;case 10:return ka(t.type._context),qs(t),null;case 19:if(Mi(uo),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ys(o,!1);else{if(0!==Iu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=lo(e))){for(t.flags|=128,Ys(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Ys(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!aa)return qs(t),null}else 2*Qe()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Ys(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Lu)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Zs(e,t){switch(na(t),t.tag){case 1:return Oi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Mi(Pi),Mi(Ci),ho(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return so(t),null;case 13:if(Mi(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(uo),null;case 4:return ao(),null;case 10:return ka(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ro(eo.current);var a,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=ie(e,i),r=ie(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(c in be(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,eu=null;function tu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ml(e,t,r)}else n.current=null}function nu(e,t,n){try{n()}catch(r){Ml(e,t,r)}}var ru=!1;function iu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&nu(t,n,a)}i=i.next}while(i!==r)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function su(e){var t=e.alternate;null!==t&&(e.alternate=null,su(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uu(e){return 5===e.tag||3===e.tag||4===e.tag}function lu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||uu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function hu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hu(e,t,n),e=e.sibling;null!==e;)hu(e,t,n),e=e.sibling}var du=null,fu=!1;function pu(e,t,n){for(n=n.child;null!==n;)vu(e,t,n),n=n.sibling}function vu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(h){}switch(n.tag){case 5:Qs||tu(n,t);case 6:var r=du,i=fu;du=null,pu(e,t,n),fu=i,null!==(du=r)&&(fu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(fu?(e=du,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(du,n.stateNode));break;case 4:r=du,i=fu,du=n.stateNode.containerInfo,fu=!0,pu(e,t,n),du=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&nu(n,t,o),i=i.next}while(i!==r)}pu(e,t,n);break;case 1:if(!Qs&&(tu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){Ml(n,t,h)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pu(e,t,n),Qs=r):pu(e,t,n);break;default:pu(e,t,n)}}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Pl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,fu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===du)throw Error(a(160));vu(o,s,i),du=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Ml(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),bu(e),4&r){try{iu(3,e,e.return),au(3,e)}catch(g){Ml(e,e.return,g)}try{iu(5,e,e.return)}catch(g){Ml(e,e.return,g)}}break;case 1:mu(t,e),bu(e),512&r&&null!==n&&tu(n,n.return);break;case 5:if(mu(t,e),bu(e),512&r&&null!==n&&tu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Ml(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(i,o),xe(u,s);var c=xe(u,o);for(s=0;s<l.length;s+=2){var h=l[s],d=l[s+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?de(i,d):"children"===h?fe(i,d):x(i,h,d,c)}switch(u){case"input":$(i,o);break;case"textarea":oe(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?re(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Ml(e,e.return,g)}}break;case 6:if(mu(t,e),bu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ml(e,e.return,g)}}break;case 3:if(mu(t,e),bu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Ml(e,e.return,g)}break;case 4:default:mu(t,e),bu(e);break;case 13:mu(t,e),bu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Qe())),4&r&&gu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||h,mu(t,e),Qs=c):mu(t,e),bu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(eu=e,h=e.child;null!==h;){for(d=eu=h;null!==eu;){switch(p=(f=eu).child,f.tag){case 0:case 11:case 14:case 15:iu(4,f,f.return);break;case 1:tu(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Ml(r,n,g)}}break;case 5:tu(f,f.return);break;case 22:if(null!==f.memoizedState){ku(d);continue}}null!==p?(p.return=f,eu=p):ku(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ge("display",s))}catch(g){Ml(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Ml(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),bu(e),4&r&&gu(e);case 21:}}function bu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(uu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),hu(e,lu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,lu(e),o);break;default:throw Error(a(161))}}catch(s){Ml(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xu(e,t,n){eu=e,Eu(e,t,n)}function Eu(e,t,n){for(var r=0!==(1&e.mode);null!==eu;){var i=eu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Js;var l=Qs;if(Js=o,(Qs=u)&&!l)for(eu=i;null!==eu;)u=(o=eu).child,22===o.tag&&null!==o.memoizedState?Su(i):null!==u?(u.return=o,eu=u):Su(i);for(;null!==a;)eu=a,Eu(a,t,n),a=a.sibling;eu=i,Js=s,Qs=l}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,eu=a):wu(e)}}function wu(e){for(;null!==eu;){var t=eu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||au(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ba(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ba(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&ou(t)}catch(f){Ml(t,t.return,f)}}if(t===e){eu=null;break}if(null!==(n=t.sibling)){n.return=t.return,eu=n;break}eu=t.return}}function ku(e){for(;null!==eu;){var t=eu;if(t===e){eu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,eu=n;break}eu=t.return}}function Su(e){for(;null!==eu;){var t=eu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{au(4,t)}catch(u){Ml(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ml(t,i,u)}}var a=t.return;try{ou(t)}catch(u){Ml(t,a,u)}break;case 5:var o=t.return;try{ou(t)}catch(u){Ml(t,o,u)}}}catch(u){Ml(t,t.return,u)}if(t===e){eu=null;break}var s=t.sibling;if(null!==s){s.return=t.return,eu=s;break}eu=t.return}}var _u,Mu=Math.ceil,Tu=E.ReactCurrentDispatcher,Au=E.ReactCurrentOwner,Cu=E.ReactCurrentBatchConfig,Pu=0,Ru=null,Nu=null,Ou=0,Lu=0,Du=_i(0),Iu=0,Fu=null,Uu=0,Bu=0,zu=0,Gu=null,Hu=null,ju=0,Vu=1/0,Wu=null,Xu=!1,Yu=null,qu=null,Ku=!1,Zu=null,Ju=0,Qu=0,$u=null,el=-1,tl=0;function nl(){return 0!==(6&Pu)?Qe():-1!==el?el:el=Qe()}function rl(e){return 0===(1&e.mode)?1:0!==(2&Pu)&&0!==Ou?Ou&-Ou:null!==ga.transition?(0===tl&&(tl=gt()),tl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function il(e,t,n,r){if(50<Qu)throw Qu=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Pu)&&e===Ru||(e===Ru&&(0===(2&Pu)&&(Bu|=n),4===Iu&&ll(e,Ou)),al(e,r),1===n&&0===Pu&&0===(1&t.mode)&&(Vu=Qe()+500,zi&&ji()))}function al(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-st(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ru?Ou:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(cl.bind(null,e)):Hi(cl.bind(null,e)),si((function(){0===(6&Pu)&&ji()})),n=null;else{switch(Et(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Rl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(el=-1,tl=0,0!==(6&Pu))throw Error(a(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=ft(e,e===Ru?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Pu;Pu|=2;var o=gl();for(Ru===e&&Ou===t||(Wu=null,Vu=Qe()+500,pl(e,t));;)try{xl();break}catch(h){vl(e,h)}wa(),Tu.current=o,Pu=i,null!==Nu?t=0:(Ru=null,Ou=0,t=Iu)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=sl(e,i))),1===t)throw n=Fu,pl(e,0),ll(e,r),al(e,Qe()),n;if(6===t)ll(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=vt(e))&&(r=o,t=sl(e,o))),1===t))throw n=Fu,pl(e,0),ll(e,r),al(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:kl(e,Hu,Wu);break;case 3:if(ll(e,r),(130023424&r)===r&&10<(t=ju+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(kl.bind(null,e,Hu,Wu),t);break}kl(e,Hu,Wu);break;case 4:if(ll(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-st(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mu(r/1960))-r)){e.timeoutHandle=ii(kl.bind(null,e,Hu,Wu),r);break}kl(e,Hu,Wu);break;default:throw Error(a(329))}}}return al(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function sl(e,t){var n=Gu;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Hu,Hu=n,null!==t&&ul(t)),e}function ul(e){null===Hu?Hu=e:Hu.push.apply(Hu,e)}function ll(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&Pu))throw Error(a(327));Sl();var t=ft(e,0);if(0===(1&t))return al(e,Qe()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Fu,pl(e,0),ll(e,t),al(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Hu,Wu),al(e,Qe()),null}function hl(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Vu=Qe()+500,zi&&ji())}}function dl(e){null!==Zu&&0===Zu.tag&&0===(6&Pu)&&Sl();var t=Pu;Pu|=1;var n=Cu.transition,r=xt;try{if(Cu.transition=null,xt=1,e)return e()}finally{xt=r,Cu.transition=n,0===(6&(Pu=t))&&ji()}}function fl(){Lu=Du.current,Mi(Du)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ai(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:ao(),Mi(Pi),Mi(Ci),ho();break;case 5:so(r);break;case 4:ao();break;case 13:case 19:Mi(uo);break;case 10:ka(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Ru=e,Nu=e=Dl(e.current,null),Ou=Lu=t,Iu=0,Fu=null,zu=Bu=Uu=0,Hu=Gu=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vl(e,t){for(;;){var n=Nu;try{if(wa(),fo.current=ss,bo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(vo=0,yo=mo=go=null,xo=!1,Eo=0,Au.current=null,null===n||null===n.return){Iu=1,Fu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Ou,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,bs(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),ml();break e}l=Error(a(426))}else if(aa&&1&u.mode){var m=ys(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),bs(m,s,u,0,t),va(hs(l,u));break e}}o=l=hs(l,u),4!==Iu&&(Iu=2),null===Gu?Gu=[o]:Gu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,vs(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,gs(o,u,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(x){t=x,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function gl(){var e=Tu.current;return Tu.current=ss,null===e?ss:e}function ml(){0!==Iu&&3!==Iu&&2!==Iu||(Iu=4),null===Ru||0===(268435455&Uu)&&0===(268435455&Bu)||ll(Ru,Ou)}function yl(e,t){var n=Pu;Pu|=2;var r=gl();for(Ru===e&&Ou===t||(Wu=null,pl(e,t));;)try{bl();break}catch(i){vl(e,i)}if(wa(),Pu=n,Tu.current=r,null!==Nu)throw Error(a(261));return Ru=null,Ou=0,Iu}function bl(){for(;null!==Nu;)El(Nu)}function xl(){for(;null!==Nu&&!Ze();)El(Nu)}function El(e){var t=_u(e.alternate,e,Lu);e.memoizedProps=e.pendingProps,null===t?wl(e):Nu=t,Au.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Lu)))return void(Nu=n)}else{if(null!==(n=Zs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Iu=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Iu&&(Iu=5)}function kl(e,t,n){var r=xt,i=Cu.transition;try{Cu.transition=null,xt=1,function(e,t,n,r){do{Sl()}while(null!==Zu);if(0!==(6&Pu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ru&&(Nu=Ru=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Rl(nt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=xt;xt=1;var u=Pu;Pu|=4,Au.current=null,function(e,t){if(ti=Wt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==o||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(u=s),f===o&&++h===r&&(l=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Wt=!1,eu=t;null!==eu;)if(e=(t=eu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,eu=e;else for(;null!==eu;){t=eu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ma(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(E){Ml(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,eu=e;break}eu=t.return}v=ru,ru=!1}(e,n),yu(n,e),vr(ni),Wt=!!ti,ni=ti=null,e.current=n,xu(n,e,i),Je(),Pu=u,xt=s,Cu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Zu=e,Ju=i),o=e.pendingLanes,0===o&&(qu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),al(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xu)throw Xu=!1,e=Yu,Yu=null,e;0!==(1&Ju)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===$u?Qu++:(Qu=0,$u=e):Qu=0,ji()}(e,t,n,r)}finally{Cu.transition=i,xt=r}return null}function Sl(){if(null!==Zu){var e=Et(Ju),t=Cu.transition,n=xt;try{if(Cu.transition=null,xt=16>e?16:e,null===Zu)var r=!1;else{if(e=Zu,Zu=null,Ju=0,0!==(6&Pu))throw Error(a(331));var i=Pu;for(Pu|=4,eu=e.current;null!==eu;){var o=eu,s=o.child;if(0!==(16&eu.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(eu=c;null!==eu;){var h=eu;switch(h.tag){case 0:case 11:case 15:iu(8,h,o)}var d=h.child;if(null!==d)d.return=h,eu=d;else for(;null!==eu;){var f=(h=eu).sibling,p=h.return;if(su(h),h===c){eu=null;break}if(null!==f){f.return=p,eu=f;break}eu=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}eu=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,eu=s;else e:for(;null!==eu;){if(0!==(2048&(o=eu).flags))switch(o.tag){case 0:case 11:case 15:iu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,eu=y;break e}eu=o.return}}var b=e.current;for(eu=b;null!==eu;){var x=(s=eu).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,eu=x;else e:for(s=b;null!==eu;){if(0!==(2048&(u=eu).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(w){Ml(u,u.return,w)}if(u===s){eu=null;break e}var E=u.sibling;if(null!==E){E.return=u.return,eu=E;break e}eu=u.return}}if(Pu=i,ji(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{xt=n,Cu.transition=t}}return!1}function _l(e,t,n){e=Da(e,t=vs(0,t=hs(n,t),1),1),t=nl(),null!==e&&(yt(e,1,t),al(e,t))}function Ml(e,t,n){if(3===e.tag)_l(e,e,n);else for(;null!==t;){if(3===t.tag){_l(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Da(t,e=gs(t,e=hs(n,e),1),1),e=nl(),null!==t&&(yt(t,1,e),al(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nl(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Ou&n)===n&&(4===Iu||3===Iu&&(130023424&Ou)===Ou&&500>Qe()-ju?pl(e,0):zu|=n),al(e,t)}function Al(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var n=nl();null!==(e=Pa(e,t))&&(yt(e,t,n),al(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Al(e,n)}function Pl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Al(e,n)}function Rl(e,t){return qe(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Nl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ll(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Fl(n.children,i,o,t);case _:s=8,i|=8;break;case M:return(e=Ol(12,n,t,2|i)).elementType=M,e.lanes=o,e;case P:return(e=Ol(13,n,t,i)).elementType=P,e.lanes=o,e;case R:return(e=Ol(19,n,t,i)).elementType=R,e.lanes=o,e;case L:return Ul(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case A:s=9;break e;case C:s=11;break e;case N:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ol(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Bl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hl(e,t,n,r,i,a,o,s,u){return e=new Gl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ol(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function jl(e){if(!e)return Ai;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ii(e,n,t)}return t}function Vl(e,t,n,r,i,a,o,s,u){return(e=Hl(n,r,!0,e,0,a,0,s,u)).context=jl(null),n=e.current,(a=La(r=nl(),i=rl(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),al(e,r),e}function Wl(e,t,n,r){var i=t.current,a=nl(),o=rl(i);return n=jl(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(il(e,i,o,a),Ia(e,i,o)),o}function Xl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)Es=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Es=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pa();break;case 5:oo(t);break;case 1:Oi(t.type)&&Fi(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ti(uo,1&uo.current),null!==(e=Xs(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Xs(e,t,n)}(e,t,n);Es=0!==(131072&e.flags)}else Es=!1,aa&&0!==(1048576&t.flags)&&ea(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);_a(t,n),i=_o(null,t,r,e,i,n);var o=Mo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=Ha,t.stateNode=i,i._reactInternals=t,Xa(t,r,e,n),t=Ps(null,t,r,!0,o,n)):(t.tag=0,aa&&o&&ta(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=As(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,i=hs(Error(a(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=hs(Error(a(424)),t));break e}for(ia=ci(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,oa=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Xs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return oo(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ri(r,i)?s=null:null!==o&&ri(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Bs(e,t,n);case 4:return io(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ya,r._currentValue),r._currentValue=s,null!==o)if(ur(o.value,s)){if(o.children===i.children&&!Pi.current){t=Xs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=La(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Sa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_a(t,n),r=r(i=Ma(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Ss(e,t,r,i=ma(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ws(e,t),t.tag=1,Oi(r)?(e=!0,Fi(t)):e=!1,_a(t,n),Va(t,r,i),Xa(t,r,i,n),Ps(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(){}function tc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Xl(o);s.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Xl(o);a.call(e)}}var o=Vl(t,r,e,0,null,!1,0,"",ec);return e._reactRootContainer=o,e[vi]=o.current,jr(8===e.nodeType?e.parentNode:e),dl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Xl(u);s.call(e)}}var u=Hl(e,0,!1,null,0,!1,0,"",ec);return e._reactRootContainer=u,e[vi]=u.current,jr(8===e.nodeType?e.parentNode:e),dl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Xl(o)}Jl.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},Jl.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Wl(null,e,null,null)})),t[vi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),al(t,Qe()),0===(6&Pu)&&(Vu=Qe()+500,ji()))}break;case 13:dl((function(){var t=Pa(e,1);if(null!==t){var n=nl();il(t,e,1,n)}})),ql(e,1)}},kt=function(e){if(13===e.tag){var t=Pa(e,134217728);if(null!==t)il(t,e,134217728,nl());ql(e,134217728)}},St=function(e){if(13===e.tag){var t=rl(e),n=Pa(e,t);if(null!==n)il(n,e,t,nl());ql(e,t)}},_t=function(){return xt},Mt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));q(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Ce=hl,Pe=dl;var nc={usingClientEntryPoint:!1,Events:[xi,Ei,wi,Te,Ae,hl]},rc={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(ic),ot=ac}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(a(299));var n=!1,r="",i=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hl(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Zl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(a(200));return tc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,i,0,o,s),e[vi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(a(200));return tc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(a(40));return!!e._reactRootContainer&&(dl((function(){tc(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=hl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return tc(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},8296:function(e,t,n){"use strict";var r=n(879);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},879:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(713)},2286:function(e,t,n){"use strict";var r=n(9198),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l},5649:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var x=b.prototype=new y;x.constructor=b,v(x,m.prototype),x.isPureReactComponent=!0;var E=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+A(u,0):a,E(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(M(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",E(e))for(var l=0;l<e.length;l++){var c=a+A(s=e[l],l);u+=C(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=C(s=s.value,t,i,c=a+A(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},O={transition:null},L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},9198:function(e,t,n){"use strict";e.exports=n(5649)},5582:function(e,t,n){"use strict";e.exports=n(2286)},9361:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function E(e){if(g=!1,x(e),!v)if(null!==r(l))v=!0,O(w);else{var t=r(c);null!==t&&L(E,t.startTime-e)}}function w(e,n){v=!1,g&&(g=!1,y(M),M=-1),p=!0;var a=f;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),x(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&L(E,h.startTime-n),u=!1}return u}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,_=null,M=-1,T=5,A=-1;function C(){return!(t.unstable_now()-A<T)}function P(){if(null!==_){var e=t.unstable_now();A=e;var n=!0;try{n=_(!0,e)}finally{n?k():(S=!1,_=null)}}else S=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,N=R.port2;R.port1.onmessage=P,k=function(){N.postMessage(null)}}else k=function(){m(P,0)};function O(e){_=e,S||(S=!0,k())}function L(e,n){M=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(g?(y(M),M=-1):g=!0,L(E,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3356:function(e,t,n){"use strict";e.exports=n(9361)},8298:function(e,t,n){"use strict";var r=n(5226),i=Array.prototype.concat,a=Array.prototype.slice,o=e.exports=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var s=e[n];r(s)?t=i.call(t,a.call(s)):t.push(s)}return t};o.wrap=function(e){return function(){return e(o(arguments))}}},5226:function(e){e.exports=function(e){return!(!e||"string"===typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},7256:function(){},79:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2987:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},1756:function(e){e.exports=function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")},e.exports.__esModule=!0,e.exports.default=e.exports},2475:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8336:function(e,t,n){var r=n(3072),i=n(7550),a=n(8452);e.exports=function(e,t,n){return t=r(t),a(e,i()?Reflect.construct(t,n||[],r(e).constructor):t.apply(e,n))},e.exports.__esModule=!0,e.exports.default=e.exports},7101:function(e){e.exports=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")},e.exports.__esModule=!0,e.exports.default=e.exports},7383:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},6668:function(e,t,n){var r=n(1756);e.exports=function(e,t){return e.get(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},2459:function(e,t,n){var r=n(7101);e.exports=function(e,t,n){r(e,t),t.set(e,n)},e.exports.__esModule=!0,e.exports.default=e.exports},7088:function(e,t,n){var r=n(1756);e.exports=function(e,t,n){return e.set(r(e,t),n),n},e.exports.__esModule=!0,e.exports.default=e.exports},3312:function(e,t,n){var r=n(7101);e.exports=function(e,t){r(e,t),t.add(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4579:function(e,t,n){var r=n(7736);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},883:function(e,t,n){var r=n(7122);e.exports=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},3693:function(e,t,n){var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},2395:function(e,t,n){var r=n(9552);function i(){return e.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports,i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3072:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9511:function(e,t,n){var r=n(5636);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},7550:function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1156:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},7752:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8452:function(e,t,n){var r=n(3738).default,i=n(2475);e.exports=function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5407:function(e){e.exports=function(e){throw new TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports},4633:function(e,t,n){var r=n(3738).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,a=Object.create(i.prototype),o=new O(r||[]);return s(a,"_invoke",{value:C(e,n,o)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function x(){}function E(){}function w(){}var k={};d(k,l,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(L([])));_&&_!==a&&o.call(_,l)&&(k=_);var M=w.prototype=x.prototype=Object.create(k);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,a,s,u){var l=p(e[i],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==r(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function C(e,n,r){var i=v;return function(a,o){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=P(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?y:g,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function P(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return E.prototype=w,s(M,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:E,configurable:!0}),E.displayName=d(w,h,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,h,"GeneratorFunction")),e.prototype=Object.create(M),e},n.awrap=function(e){return{__await:e}},T(A.prototype),d(A.prototype,c,(function(){return this})),n.AsyncIterator=A,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new A(f(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(M),d(M,h,"Generator"),d(M,l,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=L,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},5636:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5715:function(e,t,n){var r=n(2987),i=n(1156),a=n(7122),o=n(7752);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},9552:function(e,t,n){var r=n(3072);e.exports=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},9045:function(e,t,n){var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:function(e,t,n){var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7122:function(e,t,n){var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=function(e){return"static/js/"+e+".6ae0b1dd.chunk.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="./",n.b=document.baseURI||self.location.href,function(){"use strict";var e={};n.r(e),n.d(e,{ArcCurve:function(){return ed},CatmullRomCurve3:function(){return od},CubicBezierCurve:function(){return cd},CubicBezierCurve3:function(){return hd},EllipseCurve:function(){return $h},LineCurve:function(){return dd},LineCurve3:function(){return fd},QuadraticBezierCurve:function(){return pd},QuadraticBezierCurve3:function(){return vd},SplineCurve:function(){return gd}});var t={};n.r(t),n.d(t,{add:function(){return nx},adjoint:function(){return Eb},clone:function(){return pb},copy:function(){return vb},create:function(){return fb},determinant:function(){return wb},equals:function(){return sx},exactEquals:function(){return ox},frob:function(){return tx},fromQuat:function(){return jb},fromQuat2:function(){return Fb},fromRotation:function(){return Nb},fromRotationTranslation:function(){return Ib},fromRotationTranslationScale:function(){return Gb},fromRotationTranslationScaleOrigin:function(){return Hb},fromScaling:function(){return Rb},fromTranslation:function(){return Pb},fromValues:function(){return gb},fromXRotation:function(){return Ob},fromYRotation:function(){return Lb},fromZRotation:function(){return Db},frustum:function(){return Vb},getRotation:function(){return zb},getScaling:function(){return Bb},getTranslation:function(){return Ub},identity:function(){return yb},invert:function(){return xb},lookAt:function(){return Qb},mul:function(){return ux},multiply:function(){return kb},multiplyScalar:function(){return ix},multiplyScalarAndAdd:function(){return ax},ortho:function(){return Zb},orthoNO:function(){return Kb},orthoZO:function(){return Jb},perspective:function(){return Xb},perspectiveFromFieldOfView:function(){return qb},perspectiveNO:function(){return Wb},perspectiveZO:function(){return Yb},rotate:function(){return Mb},rotateX:function(){return Tb},rotateY:function(){return Ab},rotateZ:function(){return Cb},scale:function(){return _b},set:function(){return mb},str:function(){return ex},sub:function(){return lx},subtract:function(){return rx},targetTo:function(){return $b},translate:function(){return Sb},transpose:function(){return bb}});var r={};n.r(r),n.d(r,{circle:function(){return fD},diamond:function(){return vD},rect:function(){return mD},simple:function(){return bD},triangle:function(){return pD},triangleRect:function(){return yD},vee:function(){return gD}});var i=n(9198),a=n.t(i,2),o=n(8296);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),s=new N(r||[]);return i(o,"_invoke",{value:A(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",m="completed",y={};function b(){}function x(){}function E(){}var w={};h(w,o,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(O([])));S&&S!==n&&r.call(S,o)&&(w=S);var _=E.prototype=b.prototype=Object.create(w);function M(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,u){var l=f(e[i],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==s(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===g)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=f(t,n,r);if("normal"===l.type){if(i=r.done?m:v,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return x.prototype=E,i(_,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:x,configurable:!0}),x.displayName=h(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,h(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},M(T.prototype),h(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(d(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},M(_),h(_,c,"Generator"),h(_,o,(function(){return this})),h(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function l(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e){if(Array.isArray(e))return e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){return g(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||y(e,t)||b()}var E,w=n(879),k=n.t(w,2);function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function M(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e,t,n){return t=S(t),M(e,_()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function P(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t,n){if(_())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&A(i,n.prototype),i}function N(e){var t="function"==typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return R(e,arguments,S(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),A(n,e)},N(e)}function O(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function L(e){return g(e)||O(e)||y(e)||b()}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function I(e){return function(e){if(Array.isArray(e))return m(e)}(e)||O(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(E||(E={}));var U,B="popstate";function z(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function G(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function H(e,t){return{usr:e.state,key:e.key,idx:t}}function j(e,t,n,r){return void 0===n&&(n=null),F({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?W(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function V(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function W(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function X(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,l=o.history,c=E.Pop,h=null,d=f();function f(){return(l.state||{idx:null}).idx}function p(){c=E.Pop;var e=f(),t=null==e?null:e-d;d=e,h&&h({action:c,location:g.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:V(e);return z(t,"No window.location.(origin|href) available to create URL for href: "+(n=n.replace(/ $/,"%20"))),new URL(n,t)}null==d&&(d=0,l.replaceState(F({},l.state,{idx:d}),""));var g={get action(){return c},get location(){return e(o,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(B,p),h=e,function(){o.removeEventListener(B,p),h=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=E.Push;var r=j(g.location,e,t);n&&n(r,e);var i=H(r,d=f()+1),a=g.createHref(r);try{l.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(a)}u&&h&&h({action:c,location:g.location,delta:1})},replace:function(e,t){c=E.Replace;var r=j(g.location,e,t);n&&n(r,e);var i=H(r,d=f()),a=g.createHref(r);l.replaceState(i,"",a),u&&h&&h({action:c,location:g.location,delta:0})},go:function(e){return l.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(U||(U={}));var Y=new Set(["lazy","caseSensitive","path","id","index","children"]);function q(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map((function(e,i){var a=[].concat(I(n),[i]),o="string"===typeof e.id?e.id:a.join("-");if(z(!0!==e.index||!e.children,"Cannot specify children on an index route"),z(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var s=F({},e,t(e),{id:o});return r[o]=s,s}var u=F({},e,t(e),{id:o,children:void 0});return r[o]=u,e.children&&(u.children=q(e.children,t,a,r)),u}))}function K(e,t,n){void 0===n&&(n="/");var r=le(("string"===typeof t?W(t):t).pathname||"/",n);if(null==r)return null;var i=Z(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o){var s=ue(r);a=oe(i[o],s)}return a}function Z(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(z(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=fe([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(z(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),Z(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:ae(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=D(J(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function J(e){var t=e.split("/");if(0===t.length)return[];var n=L(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=J(i.join("/")),u=[];return u.push.apply(u,I(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,I(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Q=/^:[\w-]+$/,$=3,ee=2,te=1,ne=10,re=-2,ie=function(e){return"*"===e};function ae(e,t){var n=e.split("/"),r=n.length;return n.some(ie)&&(r+=re),t&&(r+=ee),n.filter((function(e){return!ie(e)})).reduce((function(e,t){return e+(Q.test(t)?$:""===t?te:ne)}),r)}function oe(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=se({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:fe([i,c.pathname]),pathnameBase:pe(fe([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=fe([i,c.pathnameBase]))}return a}function se(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);G("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=x(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),c=a.reduce((function(e,t,n){var r=t.paramName,i=t.isOptional;if("*"===r){var a=l[n]||"";u=s.slice(0,s.length-a.length).replace(/(.)\/+$/,"$1")}var o=l[n];return e[r]=i&&!o?void 0:(o||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function ue(e){try{return e.split("/").map((function(e){return decodeURIComponent(e).replace(/\//g,"%2F")})).join("/")}catch(t){return G(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function le(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ce(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function he(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function de(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=W(e):(z(!(i=F({},e)).pathname||!i.pathname.includes("?"),ce("?","pathname","search",i)),z(!i.pathname||!i.pathname.includes("#"),ce("#","pathname","hash",i)),z(!i.search||!i.search.includes("#"),ce("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else{var u=t.length-1;if(!r&&s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?W(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ve(a),hash:ge(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}var fe=function(e){return e.join("/").replace(/\/\/+/g,"/")},pe=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ve=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ge=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},me=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(N(Error));var ye=p((function e(t,n,r,i){v(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function be(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var xe=["post","put","patch","delete"],Ee=new Set(xe),we=["get"].concat(xe),ke=new Set(we),Se=new Set([301,302,303,307,308]),_e=new Set([307,308]),Me={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Te={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ae={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=function(e){return{hasErrorBoundary:Boolean(e.hasErrorBoundary)}},Re="remix-router-transitions";function Ne(e){var t,n=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,i=!r;if(z(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){var a=e.detectErrorBoundary;t=function(e){return{hasErrorBoundary:a(e)}}}else t=Pe;var o,s,l={},h=q(e.routes,t,void 0,l),d=e.basename||"/",f=F({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),p=null,v=new Set,g=null,m=null,y=null,b=null!=e.hydrationData,w=K(h,e.history.location,d),k=null;if(null==w){var S=Je(404,{pathname:e.history.location.pathname}),_=Ze(h);w=_.matches,k=P({},_.route.id,S)}var M,T=w.some((function(e){return e.route.lazy})),A=w.some((function(e){return e.route.loader}));if(T)s=!1;else if(A)if(f.v7_partialHydration){var C=e.hydrationData?e.hydrationData.loaderData:null,R=e.hydrationData?e.hydrationData.errors:null,N=function(e){return!e.route.loader||!0!==e.route.loader.hydrate&&(C&&void 0!==C[e.route.id]||R&&void 0!==R[e.route.id])};if(R){var O=w.findIndex((function(e){return void 0!==R[e.route.id]}));s=w.slice(0,O+1).every(N)}else s=w.every(N)}else s=null!=e.hydrationData;else s=!0;var L,B={historyAction:e.history.action,location:e.history.location,matches:w,initialized:s,navigation:Me,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},H=E.Pop,V=!1,W=!1,X=new Map,Y=null,Z=!1,J=!1,Q=[],$=[],ee=new Map,te=0,ne=-1,re=new Map,ie=new Set,ae=new Map,oe=new Map,se=new Set,ue=new Map,ce=new Map,he=!1;function de(e,t){void 0===t&&(t={}),B=F({},B,e);var n=[],r=[];f.v7_fetcherPersist&&B.fetchers.forEach((function(e,t){"idle"===e.state&&(se.has(t)?r.push(t):n.push(t))})),I(v).forEach((function(e){return e(B,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync})})),f.v7_fetcherPersist&&(n.forEach((function(e){return B.fetchers.delete(e)})),r.forEach((function(e){return Ve(e)})))}function fe(t,n,r){var i,a,s,u=(void 0===r?{}:r).flushSync,l=null!=B.actionData&&null!=B.navigation.formMethod&&st(B.navigation.formMethod)&&"loading"===B.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);s=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:l?B.actionData:null;var c=n.loaderData?qe(B.loaderData,n.loaderData,n.matches||[],n.errors):B.loaderData,d=B.blockers;d.size>0&&(d=new Map(d)).forEach((function(e,t){return d.set(t,Ae)}));var f,p=!0===V||null!=B.navigation.formMethod&&st(B.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(o&&(h=o,o=void 0),Z||H===E.Pop||(H===E.Push?e.history.push(t,t.state):H===E.Replace&&e.history.replace(t,t.state)),H===E.Pop){var v=X.get(B.location.pathname);v&&v.has(t.pathname)?f={currentLocation:B.location,nextLocation:t}:X.has(t.pathname)&&(f={currentLocation:t,nextLocation:B.location})}else if(W){var g=X.get(B.location.pathname);g?g.add(t.pathname):(g=new Set([t.pathname]),X.set(B.location.pathname,g)),f={currentLocation:B.location,nextLocation:t}}de(F({},n,{actionData:s,loaderData:c,historyAction:H,location:t,initialized:!0,navigation:Me,revalidation:"idle",restoreScrollPosition:Et(t,n.matches||B.matches),preventScrollReset:p,blockers:d}),{viewTransitionOpts:f,flushSync:!0===u}),H=E.Pop,V=!1,W=!1,Z=!1,J=!1,Q=[],$=[]}function pe(e,t){return ve.apply(this,arguments)}function ve(){return ve=c(u().mark((function t(n,r){var i,a,o,s,l,c,h,p,v,g,m,y;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:if(i=Oe(B.location,B.matches,d,f.v7_prependBasename,n,f.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),a=Le(f.v7_normalizeFormMethod,!1,i,r),o=a.path,s=a.submission,l=a.error,c=B.location,h=F({},h=j(B.location,o,r&&r.state),e.history.encodeLocation(h)),p=r&&null!=r.replace?r.replace:void 0,v=E.Push,!0===p?v=E.Replace:!1===p||null!=s&&st(s.formMethod)&&s.formAction===B.location.pathname+B.location.search&&(v=E.Replace),g=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,m=!0===(r&&r.unstable_flushSync),!(y=lt({currentLocation:c,nextLocation:h,historyAction:v}))){t.next=17;break}return ot(y,{state:"blocked",location:h,proceed:function(){ot(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),pe(n,r)},reset:function(){var e=new Map(B.blockers);e.set(y,Ae),de({blockers:e})}}),t.abrupt("return");case 17:return t.next=19,ge(v,h,{submission:s,pendingError:l,preventScrollReset:g,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:m});case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)}))),ve.apply(this,arguments)}function ge(e,t,n){return me.apply(this,arguments)}function me(){return me=c(u().mark((function t(n,r,i){var a,s,l,c,f,p,v,g,m,y,b,x,E,w,k,S;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L&&L.abort(),L=null,H=n,Z=!0===(i&&i.startUninterruptedRevalidation),xt(B.location,B.matches),V=!0===(i&&i.preventScrollReset),W=!0===(i&&i.enableViewTransition),a=o||h,s=i&&i.overrideNavigation,l=K(a,r,d),c=!0===(i&&i.flushSync),l){t.next=17;break}return f=Je(404,{pathname:r.pathname}),p=Ze(a),v=p.matches,g=p.route,ht(),fe(r,{matches:v,loaderData:{},errors:P({},g.id,f)},{flushSync:c}),t.abrupt("return");case 17:if(!B.initialized||J||!et(B.location,r)||i&&i.submission&&st(i.submission.formMethod)){t.next=20;break}return fe(r,{matches:l},{flushSync:c}),t.abrupt("return");case 20:if(L=new AbortController,m=je(e.history,r,L.signal,i&&i.submission),!i||!i.pendingError){t.next=26;break}b=P({},Ke(l).route.id,i.pendingError),t.next=37;break;case 26:if(!(i&&i.submission&&st(i.submission.formMethod))){t.next=37;break}return t.next=29,ye(m,r,i.submission,l,{replace:i.replace,flushSync:c});case 29:if(!(x=t.sent).shortCircuited){t.next=32;break}return t.abrupt("return");case 32:y=x.pendingActionData,b=x.pendingActionError,s=vt(r,i.submission),c=!1,m=new Request(m.url,{signal:m.signal});case 37:return t.next=39,xe(m,r,l,s,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,c,y,b);case 39:if(E=t.sent,w=E.shortCircuited,k=E.loaderData,S=E.errors,!w){t.next=45;break}return t.abrupt("return");case 45:L=null,fe(r,F({matches:l},y?{actionData:y}:{},{loaderData:k,errors:S}));case 47:case"end":return t.stop()}}),t)}))),me.apply(this,arguments)}function ye(e,t,n,r,i){return be.apply(this,arguments)}function be(){return be=c(u().mark((function e(n,r,i,a,o){var s,c,h,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o&&(o={}),Ue(),de({navigation:gt(r,i)},{flushSync:!0===o.flushSync}),(c=ft(a,r)).route.action||c.route.lazy){e.next=9;break}s={type:U.error,error:Je(405,{method:n.method,pathname:r.pathname,routeId:c.route.id})},e.next=14;break;case 9:return e.next=11,Ge("action",n,c,a,l,t,d,f.v7_relativeSplatPath);case 11:if(s=e.sent,!n.signal.aborted){e.next=14;break}return e.abrupt("return",{shortCircuited:!0});case 14:if(!rt(s)){e.next=19;break}return h=o&&null!=o.replace?o.replace:s.location===B.location.pathname+B.location.search,e.next=18,Se(B,s,{submission:i,replace:h});case 18:return e.abrupt("return",{shortCircuited:!0});case 19:if(!nt(s)){e.next=23;break}return p=Ke(a,c.route.id),!0!==(o&&o.replace)&&(H=E.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:P({},p.route.id,s.error)});case 23:if(!tt(s)){e.next=25;break}throw Je(400,{type:"defer-action"});case 25:return e.abrupt("return",{pendingActionData:P({},c.route.id,s.data)});case 26:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function xe(e,t,n,r,i,a,o,s,u,l,c){return Ee.apply(this,arguments)}function Ee(){return Ee=c(u().mark((function t(n,r,i,a,s,l,c,p,v,g,m){var y,b,E,w,k,S,_,M,T,A,C,R,N,O,D,I,U,z,G,H,j,V;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y=a||vt(r,s),b=s||l||pt(y),E=o||h,w=Ie(e.history,B,i,b,r,f.v7_partialHydration&&!0===p,J,Q,$,se,ae,ie,E,d,g,m),k=x(w,2),S=k[0],_=k[1],ht((function(e){return!(i&&i.some((function(t){return t.route.id===e})))||S&&S.some((function(t){return t.route.id===e}))})),ne=++te,0!==S.length||0!==_.length){t.next=10;break}return M=$e(),fe(r,F({matches:i,loaderData:{},errors:m||null},g?{actionData:g}:{},M?{fetchers:new Map(B.fetchers)}:{}),{flushSync:v}),t.abrupt("return",{shortCircuited:!0});case 10:return Z||f.v7_partialHydration&&p||(_.forEach((function(e){var t=B.fetchers.get(e.key),n=mt(void 0,t?t.data:void 0);B.fetchers.set(e.key,n)})),T=g||B.actionData,de(F({navigation:y},T?0===Object.keys(T).length?{actionData:null}:{actionData:T}:{},_.length>0?{fetchers:new Map(B.fetchers)}:{}),{flushSync:v})),_.forEach((function(e){ee.has(e.key)&&We(e.key),e.controller&&ee.set(e.key,e.controller)})),A=function(){return _.forEach((function(e){return We(e.key)}))},L&&L.signal.addEventListener("abort",A),t.next=16,De(B.matches,i,S,_,n);case 16:if(C=t.sent,R=C.results,N=C.loaderResults,O=C.fetcherResults,!n.signal.aborted){t.next=22;break}return t.abrupt("return",{shortCircuited:!0});case 22:if(L&&L.signal.removeEventListener("abort",A),_.forEach((function(e){return ee.delete(e.key)})),!(D=Qe(R))){t.next=30;break}return D.idx>=S.length&&(I=_[D.idx-S.length].key,ie.add(I)),t.next=29,Se(B,D.result,{replace:c});case 29:return t.abrupt("return",{shortCircuited:!0});case 30:return U=Ye(B,i,S,N,m,_,O,ue),z=U.loaderData,G=U.errors,ue.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&ue.delete(t)}))})),f.v7_partialHydration&&p&&B.errors&&Object.entries(B.errors).filter((function(e){var t=x(e,1)[0];return!S.some((function(e){return e.route.id===t}))})).forEach((function(e){var t=x(e,2),n=t[0],r=t[1];G=Object.assign(G||{},P({},n,r))})),H=$e(),j=it(ne),V=H||j||_.length>0,t.abrupt("return",F({loaderData:z,errors:G},V?{fetchers:new Map(B.fetchers)}:{}));case 37:case"end":return t.stop()}}),t)}))),Ee.apply(this,arguments)}function we(){return we=c(u().mark((function n(r,i,a,s,c,p,v){var g,m,y,b,E,w,k,S,_,M,T,A,C,R,N,O,D,I,F,U,G,j,V,W,X,Y,q;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ue(),ae.delete(r),s.route.action||s.route.lazy){n.next=6;break}return g=Je(405,{method:v.formMethod,pathname:a,routeId:i}),ze(r,i,g,{flushSync:p}),n.abrupt("return");case 6:return m=B.fetchers.get(r),Be(r,yt(v,m),{flushSync:p}),y=new AbortController,b=je(e.history,a,y.signal,v),ee.set(r,y),E=te,n.next=14,Ge("action",b,s,c,l,t,d,f.v7_relativeSplatPath);case 14:if(w=n.sent,!b.signal.aborted){n.next=18;break}return ee.get(r)===y&&ee.delete(r),n.abrupt("return");case 18:if(!f.v7_fetcherPersist||!se.has(r)){n.next=24;break}if(!rt(w)&&!nt(w)){n.next=22;break}return Be(r,bt(void 0)),n.abrupt("return");case 22:n.next=37;break;case 24:if(!rt(w)){n.next=34;break}if(ee.delete(r),!(ne>E)){n.next=31;break}return Be(r,bt(void 0)),n.abrupt("return");case 31:return ie.add(r),Be(r,mt(v)),n.abrupt("return",Se(B,w,{fetcherSubmission:v}));case 34:if(!nt(w)){n.next=37;break}return ze(r,i,w.error),n.abrupt("return");case 37:if(!tt(w)){n.next=39;break}throw Je(400,{type:"defer-action"});case 39:return k=B.navigation.location||B.location,S=je(e.history,k,y.signal),_=o||h,z(M="idle"!==B.navigation.state?K(_,B.navigation.location,d):B.matches,"Didn't find any matches after fetcher action"),T=++te,re.set(r,T),A=mt(v,w.data),B.fetchers.set(r,A),C=Ie(e.history,B,M,v,k,!1,J,Q,$,se,ae,ie,_,d,P({},s.route.id,w.data),void 0),R=x(C,2),N=R[0],(O=R[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=B.fetchers.get(t),r=mt(void 0,n?n.data:void 0);B.fetchers.set(t,r),ee.has(t)&&We(t),e.controller&&ee.set(t,e.controller)})),de({fetchers:new Map(B.fetchers)}),D=function(){return O.forEach((function(e){return We(e.key)}))},y.signal.addEventListener("abort",D),n.next=55,De(B.matches,M,N,O,S);case 55:if(I=n.sent,F=I.results,U=I.loaderResults,G=I.fetcherResults,!y.signal.aborted){n.next=61;break}return n.abrupt("return");case 61:if(y.signal.removeEventListener("abort",D),re.delete(r),ee.delete(r),O.forEach((function(e){return ee.delete(e.key)})),!(j=Qe(F))){n.next=69;break}return j.idx>=N.length&&(V=O[j.idx-N.length].key,ie.add(V)),n.abrupt("return",Se(B,j.result));case 69:W=Ye(B,B.matches,N,U,void 0,O,G,ue),X=W.loaderData,Y=W.errors,B.fetchers.has(r)&&(q=bt(w.data),B.fetchers.set(r,q)),it(T),"loading"===B.navigation.state&&T>ne?(z(H,"Expected pending action"),L&&L.abort(),fe(B.navigation.location,{matches:M,loaderData:X,errors:Y,fetchers:new Map(B.fetchers)})):(de({errors:Y,loaderData:qe(B.loaderData,X,M,Y),fetchers:new Map(B.fetchers)}),J=!1);case 73:case"end":return n.stop()}}),n)}))),we.apply(this,arguments)}function ke(){return ke=c(u().mark((function n(r,i,a,o,s,c,h){var p,v,g,m,y;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p=B.fetchers.get(r),Be(r,mt(h,p?p.data:void 0),{flushSync:c}),v=new AbortController,g=je(e.history,a,v.signal),ee.set(r,v),m=te,n.next=8,Ge("loader",g,o,s,l,t,d,f.v7_relativeSplatPath);case 8:if(!tt(y=n.sent)){n.next=16;break}return n.next=12,ct(y,g.signal,!0);case 12:if(n.t0=n.sent,n.t0){n.next=15;break}n.t0=y;case 15:y=n.t0;case 16:if(ee.get(r)===v&&ee.delete(r),!g.signal.aborted){n.next=19;break}return n.abrupt("return");case 19:if(!se.has(r)){n.next=22;break}return Be(r,bt(void 0)),n.abrupt("return");case 22:if(!rt(y)){n.next=32;break}if(!(ne>m)){n.next=28;break}return Be(r,bt(void 0)),n.abrupt("return");case 28:return ie.add(r),n.next=31,Se(B,y);case 31:return n.abrupt("return");case 32:if(!nt(y)){n.next=35;break}return ze(r,i,y.error),n.abrupt("return");case 35:z(!tt(y),"Unhandled fetcher deferred data"),Be(r,bt(y.data));case 37:case"end":return n.stop()}}),n)}))),ke.apply(this,arguments)}function Se(e,t,n){return Ne.apply(this,arguments)}function Ne(){return Ne=c(u().mark((function t(i,a,o){var s,l,c,h,f,p,v,g,m,y,b,x,w,k;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=(s=void 0===o?{}:o).submission,c=s.fetcherSubmission,h=s.replace,a.revalidate&&(J=!0),z(f=j(i.location,a.location,{_isRedirect:!0}),"Expected a location on the redirect navigation"),!r){t.next=10;break}if(p=!1,a.reloadDocument?p=!0:Ce.test(a.location)&&(v=e.history.createURL(a.location),p=v.origin!==n.location.origin||null==le(v.pathname,d)),!p){t.next=10;break}return h?n.location.replace(a.location):n.location.assign(a.location),t.abrupt("return");case 10:if(L=null,g=!0===h?E.Replace:E.Push,m=i.navigation,y=m.formMethod,b=m.formAction,x=m.formEncType,!l&&!c&&y&&b&&x&&(l=pt(i.navigation)),w=l||c,!(_e.has(a.status)&&w&&st(w.formMethod))){t.next=20;break}return t.next=18,ge(g,f,{submission:F({},w,{formAction:a.location}),preventScrollReset:V});case 18:t.next=23;break;case 20:return k=vt(f,l),t.next=23,ge(g,f,{overrideNavigation:k,fetcherSubmission:c,preventScrollReset:V});case 23:case"end":return t.stop()}}),t)}))),Ne.apply(this,arguments)}function De(e,t,n,r,i){return Fe.apply(this,arguments)}function Fe(){return Fe=c(u().mark((function n(r,i,a,o,s){var c,h,p;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([].concat(I(a.map((function(e){return Ge("loader",s,e,i,l,t,d,f.v7_relativeSplatPath)}))),I(o.map((function(n){return n.matches&&n.match&&n.controller?Ge("loader",je(e.history,n.path,n.controller.signal),n.match,n.matches,l,t,d,f.v7_relativeSplatPath):{type:U.error,error:Je(404,{pathname:n.path})}})))));case 2:return c=n.sent,h=c.slice(0,a.length),p=c.slice(a.length),n.next=7,Promise.all([ut(r,a,h,h.map((function(){return s.signal})),!1,B.loaderData),ut(r,o.map((function(e){return e.match})),p,o.map((function(e){return e.controller?e.controller.signal:null})),!0)]);case 7:return n.abrupt("return",{results:c,loaderResults:h,fetcherResults:p});case 8:case"end":return n.stop()}}),n)}))),Fe.apply(this,arguments)}function Ue(){var e;J=!0,(e=Q).push.apply(e,I(ht())),ae.forEach((function(e,t){ee.has(t)&&($.push(t),We(t))}))}function Be(e,t,n){void 0===n&&(n={}),B.fetchers.set(e,t),de({fetchers:new Map(B.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function ze(e,t,n,r){void 0===r&&(r={});var i=Ke(B.matches,t);Ve(e),de({errors:P({},i.route.id,n),fetchers:new Map(B.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function He(e){return f.v7_fetcherPersist&&(oe.set(e,(oe.get(e)||0)+1),se.has(e)&&se.delete(e)),B.fetchers.get(e)||Te}function Ve(e){var t=B.fetchers.get(e);!ee.has(e)||t&&"loading"===t.state&&re.has(e)||We(e),ae.delete(e),re.delete(e),ie.delete(e),se.delete(e),B.fetchers.delete(e)}function We(e){var t=ee.get(e);z(t,"Expected fetch controller: "+e),t.abort(),ee.delete(e)}function Xe(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=bt(He(r).data);B.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function $e(){var e,t=[],n=!1,r=D(ie);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=B.fetchers.get(i);z(a,"Expected fetcher: "+i),"loading"===a.state&&(ie.delete(i),t.push(i),n=!0)}}catch(o){r.e(o)}finally{r.f()}return Xe(t),n}function it(e){var t,n=[],r=D(re);try{for(r.s();!(t=r.n()).done;){var i=x(t.value,2),a=i[0];if(i[1]<e){var o=B.fetchers.get(a);z(o,"Expected fetcher: "+a),"loading"===o.state&&(We(a),re.delete(a),n.push(a))}}}catch(s){r.e(s)}finally{r.f()}return Xe(n),n.length>0}function at(e){B.blockers.delete(e),ce.delete(e)}function ot(e,t){var n=B.blockers.get(e)||Ae;z("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);var r=new Map(B.blockers);r.set(e,t),de({blockers:r})}function lt(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==ce.size){ce.size>1&&G(!1,"A router only supports one blocker at a time");var i=Array.from(ce.entries()),a=x(i[i.length-1],2),o=a[0],s=a[1],u=B.blockers.get(o);if(!u||"proceeding"!==u.state)return s({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}}function ht(e){var t=[];return ue.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),ue.delete(r))})),t}function dt(e,t){if(m){var n=m(e,t.map((function(e){return function(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,B.loaderData)})));return n||e.key}return e.key}function xt(e,t){if(g&&y){var n=dt(e,t);g[n]=y()}}function Et(e,t){if(g){var n=dt(e,t),r=g[n];if("number"===typeof r)return r}return null}return M={get basename(){return d},get future(){return f},get state(){return B},get routes(){return h},get window(){return n},initialize:function(){if(p=e.history.listen((function(t){var n=t.action,r=t.location,i=t.delta;if(!he){G(0===ce.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=lt({currentLocation:B.location,nextLocation:r,historyAction:n});return a&&null!=i?(he=!0,e.history.go(-1*i),void ot(a,{state:"blocked",location:r,proceed:function(){ot(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset:function(){var e=new Map(B.blockers);e.set(a,Ae),de({blockers:e})}})):ge(n,r)}he=!1})),r){!function(e,t){try{var n=e.sessionStorage.getItem(Re);if(n)for(var r=JSON.parse(n),i=0,a=Object.entries(r||{});i<a.length;i++){var o=x(a[i],2),s=o[0],u=o[1];u&&Array.isArray(u)&&t.set(s,new Set(u||[]))}}catch(l){}}(n,X);var t=function(){return function(e,t){if(t.size>0){var n,r={},i=D(t);try{for(i.s();!(n=i.n()).done;){var a=x(n.value,2),o=a[0],s=a[1];r[o]=I(s)}}catch(u){i.e(u)}finally{i.f()}try{e.sessionStorage.setItem(Re,JSON.stringify(r))}catch(S){G(!1,"Failed to save applied view transitions in sessionStorage ("+S+").")}}}(n,X)};n.addEventListener("pagehide",t),Y=function(){return n.removeEventListener("pagehide",t)}}return B.initialized||ge(E.Pop,B.location,{initialHydration:!0}),M},subscribe:function(e){return v.add(e),function(){return v.delete(e)}},enableScrollRestoration:function(e,t,n){if(g=e,y=t,m=n||null,!b&&B.navigation===Me){b=!0;var r=Et(B.location,B.matches);null!=r&&de({restoreScrollPosition:r})}return function(){g=null,y=null,m=null}},navigate:pe,fetch:function(e,t,n,r){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ee.has(e)&&We(e);var a=!0===(r&&r.unstable_flushSync),s=o||h,u=Oe(B.location,B.matches,d,f.v7_prependBasename,n,f.v7_relativeSplatPath,t,null==r?void 0:r.relative),l=K(s,u,d);if(l){var c=Le(f.v7_normalizeFormMethod,!0,u,r),p=c.path,v=c.submission,g=c.error;if(g)ze(e,t,g,{flushSync:a});else{var m=ft(l,p);V=!0===(r&&r.preventScrollReset),v&&st(v.formMethod)?function(e,t,n,r,i,a,o){we.apply(this,arguments)}(e,t,p,m,l,a,v):(ae.set(e,{routeId:t,path:p}),function(e,t,n,r,i,a,o){ke.apply(this,arguments)}(e,t,p,m,l,a,v))}}else ze(e,t,Je(404,{pathname:u}),{flushSync:a})},revalidate:function(){Ue(),de({revalidation:"loading"}),"submitting"!==B.navigation.state&&("idle"!==B.navigation.state?ge(H||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation}):ge(B.historyAction,B.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:He,deleteFetcher:function(e){if(f.v7_fetcherPersist){var t=(oe.get(e)||0)-1;t<=0?(oe.delete(e),se.add(e)):oe.set(e,t)}else Ve(e);de({fetchers:new Map(B.fetchers)})},dispose:function(){p&&p(),Y&&Y(),v.clear(),L&&L.abort(),B.fetchers.forEach((function(e,t){return Ve(t)})),B.blockers.forEach((function(e,t){return at(t)}))},getBlocker:function(e,t){var n=B.blockers.get(e)||Ae;return ce.get(e)!==t&&ce.set(e,t),n},deleteBlocker:at,_internalFetchControllers:ee,_internalActiveDeferreds:ue,_internalSetRoutes:function(e){o=q(e,t,void 0,l={})}},M}Symbol("deferred");function Oe(e,t,n,r,i,a,o,s){var u,l;if(o){u=[];var c,h=D(t);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(u.push(d),d.route.id===o){l=d;break}}}catch(p){h.e(p)}finally{h.f()}}else u=t,l=t[t.length-1];var f=de(i||".",function(e,t){var n=he(e);return t?n.map((function(t,n){return n===e.length-1?t.pathname:t.pathnameBase})):n.map((function(e){return e.pathnameBase}))}(u,a),le(e.pathname,n)||e.pathname,"path"===s);return null==i&&(f.search=e.search,f.hash=e.hash),null!=i&&""!==i&&"."!==i||!l||!l.route.index||dt(f.search)||(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(f.pathname="/"===f.pathname?n:fe([n,f.pathname])),V(f)}function Le(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!ot(r.formMethod))return{path:n,error:Je(405,{method:r.formMethod})};var i,a,o=function(){return{path:n,error:Je(400,{type:"invalid-body"})}},s=r.formMethod||"get",u=e?s.toUpperCase():s.toLowerCase(),l=$e(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!st(u))return o();var c="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((function(e,t){var n=x(t,2);return""+e+n[0]+"="+n[1]+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:c}}}if("application/json"===r.formEncType){if(!st(u))return o();try{var h="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch(p){return o()}}}if(z("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=Ve(r.formData),a=r.formData;else if(r.body instanceof FormData)i=Ve(r.body),a=r.body;else if(r.body instanceof URLSearchParams)a=We(i=r.body);else if(null==r.body)i=new URLSearchParams,a=new FormData;else try{a=We(i=new URLSearchParams(r.body))}catch(p){return o()}var d={formMethod:u,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if(st(d.formMethod))return{path:n,submission:d};var f=W(n);return t&&f.search&&dt(f.search)&&i.append("index",""),f.search="?"+i,{path:V(f),submission:d}}function De(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function Ie(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v){var g=v?Object.values(v)[0]:p?Object.values(p)[0]:void 0,m=e.createURL(t.location),y=e.createURL(i),b=v?Object.keys(v)[0]:void 0,x=De(n,b).filter((function(e,n){var i=e.route;if(i.lazy)return!0;if(null==i.loader)return!1;if(a)return!!i.loader.hydrate||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||s.some((function(t){return t===e.route.id})))return!0;var u=t.matches[n],l=e;return Ue(e,F({currentUrl:m,currentParams:u.params,nextUrl:y,nextParams:l.params},r,{actionResult:g,defaultShouldRevalidate:o||m.pathname+m.search===y.pathname+y.search||m.search!==y.search||Fe(u,l)}))})),E=[];return c.forEach((function(e,i){if(!a&&n.some((function(t){return t.route.id===e.routeId}))&&!l.has(i)){var s=K(d,e.path,f);if(s){var c=t.fetchers.get(i),p=ft(s,e.path);!h.has(i)&&(!!u.includes(i)||(c&&"idle"!==c.state&&void 0===c.data?o:Ue(p,F({currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:g,defaultShouldRevalidate:o}))))&&E.push({key:i,routeId:e.routeId,path:e.path,matches:s,match:p,controller:new AbortController})}else E.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null})}})),[x,E]}function Fe(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ue(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Be(e,t,n){return ze.apply(this,arguments)}function ze(){return ze=c(u().mark((function e(t,n,r){var i,a,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.lazy();case 4:if(i=e.sent,t.lazy){e.next=7;break}return e.abrupt("return");case 7:for(s in z(a=r[t.id],"No route found in manifest"),o={},i)l=a[s],G(!(c=void 0!==l&&"hasErrorBoundary"!==s),'Route "'+a.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),c||Y.has(s)||(o[s]=i[s]);Object.assign(a,o),Object.assign(a,F({},n(a),{lazy:void 0}));case 13:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ge(e,t,n,r,i,a,o,s,u){return He.apply(this,arguments)}function He(){return He=c(u().mark((function e(t,n,r,i,a,o,s,l,c){var h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c&&(c={}),p=function(e){var t,i=new Promise((function(e,n){return t=n}));return f=function(){return t()},n.signal.addEventListener("abort",f),Promise.race([e({request:n,params:r.params,context:c.requestContext}),i])},e.prev=2,v=r.route[t],!r.route.lazy){e.next=32;break}if(!v){e.next=14;break}return e.next=8,Promise.all([p(v).catch((function(e){g=e})),Be(r.route,o,a)]);case 8:if(m=e.sent,!g){e.next=11;break}throw g;case 11:d=m[0],e.next=30;break;case 14:return e.next=16,Be(r.route,o,a);case 16:if(!(v=r.route[t])){e.next=23;break}return e.next=20,p(v);case 20:d=e.sent,e.next=30;break;case 23:if("action"!==t){e.next=29;break}throw y=new URL(n.url),b=y.pathname+y.search,Je(405,{method:n.method,pathname:b,routeId:r.route.id});case 29:return e.abrupt("return",{type:U.data,data:void 0});case 30:e.next=41;break;case 32:if(v){e.next=38;break}throw x=new URL(n.url),Je(404,{pathname:x.pathname+x.search});case 38:return e.next=40,p(v);case 40:d=e.sent;case 41:z(void 0!==d,"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(2),h=U.error,d=e.t0;case 48:return e.prev=48,f&&n.signal.removeEventListener("abort",f),e.finish(48);case 51:if(!at(d)){e.next=87;break}if(E=d.status,!Se.has(E)){e.next=61;break}if(z(w=d.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),Ce.test(w)?c.isStaticRequest||(k=new URL(n.url),S=w.startsWith("//")?new URL(k.protocol+w):new URL(w),_=null!=le(S.pathname,s),S.origin===k.origin&&_&&(w=S.pathname+S.search+S.hash)):w=Oe(new URL(n.url),i.slice(0,i.indexOf(r)+1),s,!0,w,l),!c.isStaticRequest){e.next=60;break}throw d.headers.set("Location",w),d;case 60:return e.abrupt("return",{type:U.redirect,status:E,location:w,revalidate:null!==d.headers.get("X-Remix-Revalidate"),reloadDocument:null!==d.headers.get("X-Remix-Reload-Document")});case 61:if(!c.isRouteRequest){e.next=64;break}throw{type:h===U.error?U.error:U.data,response:d};case 64:if(e.prev=64,!(T=d.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(T)){e.next=76;break}if(null!=d.body){e.next=71;break}M=null,e.next=74;break;case 71:return e.next=73,d.json();case 73:M=e.sent;case 74:e.next=79;break;case 76:return e.next=78,d.text();case 78:M=e.sent;case 79:e.next=84;break;case 81:return e.prev=81,e.t1=e.catch(64),e.abrupt("return",{type:U.error,error:e.t1});case 84:if(h!==U.error){e.next=86;break}return e.abrupt("return",{type:h,error:new ye(E,d.statusText,M),headers:d.headers});case 86:return e.abrupt("return",{type:U.data,data:M,statusCode:d.status,headers:d.headers});case 87:if(h!==U.error){e.next=89;break}return e.abrupt("return",{type:h,error:d});case 89:if(!it(d)){e.next=91;break}return e.abrupt("return",{type:U.deferred,deferredData:d,statusCode:null==(A=d.init)?void 0:A.status,headers:(null==(C=d.init)?void 0:C.headers)&&new Headers(d.init.headers)});case 91:return e.abrupt("return",{type:U.data,data:d});case 92:case"end":return e.stop()}}),e,null,[[2,44,48,51],[64,81]])}))),He.apply(this,arguments)}function je(e,t,n,r){var i=e.createURL($e(t)).toString(),a={signal:n};if(r&&st(r.formMethod)){var o=r.formMethod,s=r.formEncType;a.method=o.toUpperCase(),"application/json"===s?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):"text/plain"===s?a.body=r.text:"application/x-www-form-urlencoded"===s&&r.formData?a.body=Ve(r.formData):a.body=r.formData}return new Request(i,a)}function Ve(e){var t,n=new URLSearchParams,r=D(e.entries());try{for(r.s();!(t=r.n()).done;){var i=x(t.value,2),a=i[0],o=i[1];n.append(a,"string"===typeof o?o:o.name)}}catch(s){r.e(s)}finally{r.f()}return n}function We(e){var t,n=new FormData,r=D(e.entries());try{for(r.s();!(t=r.n()).done;){var i=x(t.value,2),a=i[0],o=i[1];n.append(a,o)}}catch(s){r.e(s)}finally{r.f()}return n}function Xe(e,t,n,r,i){var a,o={},s=null,u=!1,l={};return n.forEach((function(n,c){var h=t[c].route.id;if(z(!rt(n),"Cannot handle redirect results in processLoaderData"),nt(n)){var d=Ke(e,h),f=n.error;r&&(f=Object.values(r)[0],r=void 0),null==(s=s||{})[d.route.id]&&(s[d.route.id]=f),o[h]=void 0,u||(u=!0,a=be(n.error)?n.error.status:500),n.headers&&(l[h]=n.headers)}else tt(n)?(i.set(h,n.deferredData),o[h]=n.deferredData.data):o[h]=n.data,null==n.statusCode||200===n.statusCode||u||(a=n.statusCode),n.headers&&(l[h]=n.headers)})),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function Ye(e,t,n,r,i,a,o,s){for(var u=Xe(t,n,r,i,s),l=u.loaderData,c=u.errors,h=0;h<a.length;h++){var d=a[h],f=d.key,p=d.match,v=d.controller;z(void 0!==o&&void 0!==o[h],"Did not find corresponding fetcher result");var g=o[h];if(!v||!v.signal.aborted)if(nt(g)){var m=Ke(e.matches,null==p?void 0:p.route.id);c&&c[m.route.id]||(c=F({},c,P({},m.route.id,g.error))),e.fetchers.delete(f)}else if(rt(g))z(!1,"Unhandled fetcher revalidation redirect");else if(tt(g))z(!1,"Unhandled fetcher deferred data");else{var y=bt(g.data);e.fetchers.set(f,y)}}return{loaderData:l,errors:c}}function qe(e,t,n,r){var i,a=F({},t),o=D(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.route.id;if(t.hasOwnProperty(u)?void 0!==t[u]&&(a[u]=t[u]):void 0!==e[u]&&s.route.loader&&(a[u]=e[u]),r&&r.hasOwnProperty(u))break}}catch(l){o.e(l)}finally{o.f()}return a}function Ke(e,t){var n=t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):I(e);return n.reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Ze(e){var t=1===e.length?e[0]:e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Je(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o=n.type,s="Unknown Server Error",u="Unknown @remix-run/router error";return 400===e?(s="Bad Request",a&&r&&i?u="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o?u="defer() is not supported in actions":"invalid-body"===o&&(u="Unable to encode submission body")):403===e?(s="Forbidden",u='Route "'+i+'" does not match URL "'+r+'"'):404===e?(s="Not Found",u='No route matches URL "'+r+'"'):405===e&&(s="Method Not Allowed",a&&r&&i?u="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new ye(e||500,s,new Error(u),!0)}function Qe(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(rt(n))return{result:n,idx:t}}}function $e(e){return V(F({},"string"===typeof e?W(e):e,{hash:""}))}function et(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}function tt(e){return e.type===U.deferred}function nt(e){return e.type===U.error}function rt(e){return(e&&e.type)===U.redirect}function it(e){var t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}function at(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function ot(e){return ke.has(e.toLowerCase())}function st(e){return Ee.has(e.toLowerCase())}function ut(e,t,n,r,i,a){return lt.apply(this,arguments)}function lt(){return lt=c(u().mark((function e(t,n,r,i,a,o){var s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=u().mark((function e(s){var l,c,h,d,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r[s],c=n[s]){e.next=4;break}return e.abrupt("return",1);case 4:if(h=t.find((function(e){return e.route.id===c.route.id})),d=null!=h&&!Fe(h,c)&&void 0!==(o&&o[c.route.id]),!tt(l)||!a&&!d){e.next=11;break}return z(f=i[s],"Expected an AbortSignal for revalidating fetcher deferred result"),e.next=11,ct(l,f,a).then((function(e){e&&(r[s]=e||r[s])}));case 11:case"end":return e.stop()}}),e)})),l=0;case 2:if(!(l<r.length)){e.next=9;break}return e.delegateYield(s(l),"t0",4);case 4:if(!e.t0){e.next=6;break}return e.abrupt("continue",6);case 6:l++,e.next=2;break;case 9:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ct(e,t,n){return ht.apply(this,arguments)}function ht(){return(ht=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:U.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:U.error,error:e.t0});case 14:return e.abrupt("return",{type:U.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])})))).apply(this,arguments)}function dt(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function ft(e,t){var n="string"===typeof t?W(t).search:t.search;if(e[e.length-1].route.index&&dt(n||""))return e[e.length-1];var r=he(e);return r[r.length-1]}function pt(e){var t=e.formMethod,n=e.formAction,r=e.formEncType,i=e.text,a=e.formData,o=e.json;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function vt(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function gt(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function mt(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function yt(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function bt(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}var Et=i.createContext(null);var wt=i.createContext(null);var kt=i.createContext(null);var St=i.createContext(null);var _t=i.createContext(null);var Mt=i.createContext({outlet:null,matches:[],isDataRoute:!1});var Tt=i.createContext(null);function At(){return null!=i.useContext(_t)}function Ct(){return At()||z(!1),i.useContext(_t).location}function Pt(e,t,n,r){At()||z(!1);var a,o=i.useContext(St).navigator,s=i.useContext(Mt).matches,u=s[s.length-1],l=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,Ct());if(t){var d,f="string"===typeof t?W(t):t;"/"===c||(null==(d=f.pathname)?void 0:d.startsWith(c))||z(!1),a=f}else a=h;var p=a.pathname||"/",v=p;if("/"!==c){var g=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(g.length).join("/")}var m=K(e,{pathname:v});var y=Dt(m&&m.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:fe([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:fe([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,n,r);return t&&y?i.createElement(_t.Provider,{value:{location:xt({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:E.Pop}},y):y}function Rt(){var e=function(){var e,t=i.useContext(Tt),n=Ft(It.UseRouteError),r=Ut(It.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=be(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}var Nt=i.createElement(Rt,null),Ot=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).state={location:e.location,revalidation:e.revalidation,error:e.error},n}return C(t,e),p(t,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return void 0!==this.state.error?i.createElement(Mt.Provider,{value:this.props.routeContext},i.createElement(Tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}])}(i.Component);function Lt(e){var t=e.routeContext,n=e.match,r=e.children,a=i.useContext(Et);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Mt.Provider,{value:t},r)}function Dt(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}var s=e,u=null==(a=n)?void 0:a.errors;if(null!=u){var l=s.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));l>=0||z(!1),s=s.slice(0,Math.min(s.length,l+1))}var c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(var d=0;d<s.length;d++){var f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=d),f.route.id){var p=n,v=p.loaderData,g=p.errors,m=f.route.loader&&void 0===v[f.route.id]&&(!g||void 0===g[f.route.id]);if(f.route.lazy||m){c=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight((function(e,r,a){var o,l,d=!1,f=null,p=null;n&&(o=u&&r.route.id?u[r.route.id]:void 0,f=r.route.errorElement||Nt,c&&(h<0&&0===a?(l="route-fallback",!1||Bt[l]||(Bt[l]=!0),d=!0,p=null):h===a&&(d=!0,p=r.route.hydrateFallbackElement||null)));var v=t.concat(s.slice(0,a+1)),g=function(){var t;return t=o?f:d?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(Lt,{match:r,routeContext:{outlet:e,matches:v,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(Ot,{location:n.location,revalidation:n.revalidation,component:f,error:o,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()}),null)}var It=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(It||{});function Ft(e){var t=i.useContext(wt);return t||z(!1),t}function Ut(e){var t=function(e){var t=i.useContext(Mt);return t||z(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||z(!1),n.route.id}var Bt={};a.startTransition;function zt(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,o=e.location,s=e.navigationType,u=void 0===s?E.Pop:s,l=e.navigator,c=e.static,h=void 0!==c&&c,d=e.future;At()&&z(!1);var f=n.replace(/^\/*/,"/"),p=i.useMemo((function(){return{basename:f,navigator:l,static:h,future:xt({v7_relativeSplatPath:!1},d)}}),[f,d,l,h]);"string"===typeof o&&(o=W(o));var v=o,g=v.pathname,m=void 0===g?"/":g,y=v.search,b=void 0===y?"":y,x=v.hash,w=void 0===x?"":x,k=v.state,S=void 0===k?null:k,_=v.key,M=void 0===_?"default":_,T=i.useMemo((function(){var e=le(m,f);return null==e?null:{location:{pathname:e,search:b,hash:w,state:S,key:M},navigationType:u}}),[f,m,b,w,S,M,u]);return null==T?null:i.createElement(St.Provider,{value:p},i.createElement(_t.Provider,{children:a,value:T}))}var Gt=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Gt||{}),Ht=new Promise((function(){}));i.Component;function jt(e){var t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:i.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:i.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:i.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(GK){}function Wt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Vt({},t,{errors:Xt(t.errors)})),t}function Xt(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=x(r[n],2),a=i[0],o=i[1];if(o&&"RouteErrorResponse"===o.__type)t[a]=new ye(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){if(o.__subType){var s=window[o.__subType];if("function"===typeof s)try{var u=new s(o.message);u.stack="",t[a]=u}catch(GK){}}if(null==t[a]){var l=new Error(o.message);l.stack="",t[a]=l}}else t[a]=o}return t}var Yt=i.createContext({isTransitioning:!1});var qt=i.createContext(new Map);var Kt=a.startTransition,Zt=k.flushSync;a.useId;function Jt(e){Zt?Zt(e):e()}var Qt=p((function e(){var t=this;v(this,e),this.status="pending",this.promise=new Promise((function(e,n){t.resolve=function(n){"pending"===t.status&&(t.status="resolved",e(n))},t.reject=function(e){"pending"===t.status&&(t.status="rejected",n(e))}}))}));function $t(e){var t=e.fallbackElement,n=e.router,r=e.future,a=x(i.useState(n.state),2),o=a[0],s=a[1],l=x(i.useState(),2),h=l[0],d=l[1],f=x(i.useState({isTransitioning:!1}),2),p=f[0],v=f[1],g=x(i.useState(),2),m=g[0],y=g[1],b=x(i.useState(),2),E=b[0],w=b[1],k=x(i.useState(),2),S=k[0],_=k[1],M=i.useRef(new Map),T=(r||{}).v7_startTransition,A=i.useCallback((function(e){T?function(e){Kt?Kt(e):e()}(e):e()}),[T]),C=i.useCallback((function(e,t){var r=t.deletedFetchers,i=t.unstable_flushSync,a=t.unstable_viewTransitionOpts;r.forEach((function(e){return M.current.delete(e)})),e.fetchers.forEach((function(e,t){void 0!==e.data&&M.current.set(t,e.data)}));var o=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(a&&!o){if(i){Jt((function(){E&&(m&&m.resolve(),E.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));var u=n.window.document.startViewTransition((function(){Jt((function(){return s(e)}))}));return u.finished.finally((function(){Jt((function(){y(void 0),w(void 0),d(void 0),v({isTransitioning:!1})}))})),void Jt((function(){return w(u)}))}E?(m&&m.resolve(),E.skipTransition(),_({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(d(e),v({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else i?Jt((function(){return s(e)})):A((function(){return s(e)}))}),[n.window,E,m,M,A]);i.useLayoutEffect((function(){return n.subscribe(C)}),[n,C]),i.useEffect((function(){p.isTransitioning&&!p.flushSync&&y(new Qt)}),[p]),i.useEffect((function(){if(m&&h&&n.window){var e=h,t=m.promise,r=n.window.document.startViewTransition(c(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return A((function(){return s(e)})),n.next=3,t;case 3:case"end":return n.stop()}}),n)}))));r.finished.finally((function(){y(void 0),w(void 0),d(void 0),v({isTransitioning:!1})})),w(r)}}),[A,h,m,n.window]),i.useEffect((function(){m&&h&&o.location.key===h.location.key&&m.resolve()}),[m,E,o.location,h]),i.useEffect((function(){!p.isTransitioning&&S&&(d(S.state),v({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),_(void 0))}),[p.isTransitioning,S]),i.useEffect((function(){}),[]);var P=i.useMemo((function(){return{createHref:n.createHref,encodeLocation:n.encodeLocation,go:function(e){return n.navigate(e)},push:function(e,t,r){return n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})},replace:function(e,t,r){return n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}}}),[n]),R=n.basename||"/",N=i.useMemo((function(){return{router:n,navigator:P,static:!1,basename:R}}),[n,P,R]);return i.createElement(i.Fragment,null,i.createElement(Et.Provider,{value:N},i.createElement(wt.Provider,{value:o},i.createElement(qt.Provider,{value:M.current},i.createElement(Yt.Provider,{value:p},i.createElement(zt,{basename:R,location:o.location,navigationType:o.historyAction,navigator:P,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},o.initialized||n.future.v7_partialHydration?i.createElement(en,{routes:n.routes,future:n.future,state:o}):t))))),null)}function en(e){var t=e.routes,n=e.future;return Pt(t,void 0,e.state,n)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var tn,nn;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tn||(tn={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(nn||(nn={}));function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on="dxfView_dxfBox__mzH3v";function sn(e){this._pointer=0,this._data=e,this._eof=!1}function un(e,t){return e<=9?t:e>=10&&e<=59?parseFloat(t.trim()):e>=60&&e<=99?parseInt(t.trim()):e>=100&&e<=109?t:e>=110&&e<=149?parseFloat(t.trim()):e>=160&&e<=179?parseInt(t.trim()):e>=210&&e<=239?parseFloat(t.trim()):e>=270&&e<=289?parseInt(t.trim()):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(t.trim()):e>=300&&e<=369?t:e>=370&&e<=389?parseInt(t.trim()):e>=390&&e<=399?t:e>=400&&e<=409?parseInt(t.trim()):e>=410&&e<=419?t:e>=420&&e<=429?parseInt(t.trim()):e>=430&&e<=439?t:e>=440&&e<=459?parseInt(t.trim()):e>=460&&e<=469?parseFloat(t.trim()):e>=470&&e<=481||999===e||e>=1e3&&e<=1009?t:e>=1010&&e<=1059?parseFloat(t.trim()):e>=1060&&e<=1071?parseInt(t.trim()):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:t}),t)}sn.prototype.next=function(){var e;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return e={code:parseInt(this._data[this._pointer])},this._pointer++,e.value=un(e.code,this._data[this._pointer]),this._pointer++,0===e.code&&"EOF"===e.value&&(this._eof=!0),this.lastReadGroup=e,e},sn.prototype.peek=function(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);var e={code:parseInt(this._data[this._pointer])};return e.value=un(e.code,this._data[this._pointer+1]),e},sn.prototype.rewind=function(e){e=e||1,this._pointer=this._pointer-2*e},sn.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},sn.prototype.isEOF=function(){return this._eof};var ln=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215],cn=n(9863),hn=n.n(cn),dn=function(){return p((function e(){v(this,e),this.appName=null,this.appNameWarningShown=!1,this.lastString=null,this.sectionStack=[this._CreateSection()],this.failure=!1}),[{key:"Feed",value:function(e){if(!this.appName)return 1001==e.code?(this.appName=e.value,!1):(this.appNameWarningShown||(this.appNameWarningShown=!0,hn().warn("XDATA section does not start with application name")),!1);if(1001==e.code)return!0;if(this.failure)return!1;if(1e3==e.code)return this.lastString&&hn().warn("XDATA section unused string: "+this.lastString),this.lastString=e.value,!1;var t=this._currentSection;if(1002==e.code){if("{"==e.value){if(!this.lastString)return hn().warn("Unnamed XDATA section encountered"),this.failure=!0,!1;var n=this._CreateSection();return t[this.lastString]=n,this.lastString=null,this.sectionStack.push(n),!1}return"}"==e.value?this.sectionStack.length<2?(hn().warn("Unmatched XDATA section closing"),this.failure=!0,!1):(this.sectionStack.length=this.sectionStack.length-1,!1):(hn().warn("Bad XDATA section control string encountered: "+e.value),this.failure=!0,!1)}return null!==this.lastString&&(t.values.push(this._CreateValue(1e3,this.lastString)),this.lastString=null),t.values.push(this._CreateValue(e.code,e.value)),!1}},{key:"Finish",value:function(e){var t;this.failure||this.appName&&(e.hasOwnProperty("xdata")?t=e.xdata:(t={},e.xdata=t),t[this.appName]=this.sectionStack[0])}},{key:"_currentSection",get:function(){return this.sectionStack[this.sectionStack.length-1]}},{key:"_CreateSection",value:function(){return{values:[]}}},{key:"_CreateValue",value:function(e,t){return{code:e,value:t}}}])}();function fn(e){var t={};e.rewind();var n=e.next(),r=n.code;if(t.x=n.value,r+=10,(n=e.next()).code!==r)throw new Error("Expected code for point value to be "+r+" but got "+n.code+".");return t.y=n.value,r+=10,(n=e.next()).code!==r?(e.rewind(),t):(t.z=n.value,t)}function pn(e){e.rewind();var t=e.next();if(101!==t.code)throw new Error("Bad call for skipEmbeddedObject()");do{t=e.next()}while(0!==t.code);e.rewind()}function vn(e,t,n){for(var r=null;t.code>=1e3;)null==r&&(r=new dn),r.Feed(t)?(r.Finish(e),r=null):t=n.next();if(r)return r.Finish(e),n.rewind(),!0;switch(t.code){case 0:e.type=t.value;break;case 5:e.handle=t.value;break;case 6:e.lineType=t.value;break;case 8:e.layer=t.value;break;case 48:e.lineTypeScale=t.value;break;case 60:e.visible=0===t.value;break;case 62:e.colorIndex=t.value,e.color=function(e){return ln[e]}(Math.abs(t.value));break;case 67:e.inPaperSpace=0!==t.value;break;case 100:break;case 330:e.ownerHandle=t.value;break;case 347:e.materialObjectHandle=t.value;break;case 370:e.lineweight=t.value;break;case 420:e.color=t.value;break;default:return!1}return!0}function gn(){}function mn(e,t){var n,r=[],i=!1,a=!1;for(n=0;n<=4;n++){for(var o={};"EOF"!==t&&0!==t.code&&!a;){switch(t.code){case 10:case 11:case 12:case 13:if(i){a=!0;continue}o.x=t.value,i=!0;break;case 20:case 21:case 22:case 23:o.y=t.value;break;case 30:case 31:case 32:case 33:o.z=t.value;break;default:return r}t=e.next()}r.push(o),i=!1,a=!1}return e.rewind(),r}function yn(){}function bn(){}function xn(){}function En(){}function wn(){}function kn(){}function Sn(){}function _n(){}function Mn(){}function Tn(e,t){if(!e||e<=0)throw Error("n must be greater than 0 vertices");var n,r=[],i=!1,a=!1,o=t.lastReadGroup;for(n=0;n<e;n++){for(var s={};"EOF"!==o&&0!==o.code&&!a;){switch(o.code){case 10:if(i){a=!0;continue}s.x=o.value,i=!0;break;case 20:s.y=o.value;break;case 30:s.z=o.value;break;case 40:s.startWidth=o.value;break;case 41:s.endWidth=o.value;break;case 42:0!=o.value&&(s.bulge=o.value);break;case 91:s.id=o.value;break;default:return i&&r.push(s),t.rewind(),r}o=t.next()}r.push(s),i=!1,a=!1}return t.rewind(),r}function An(){}function Cn(){}function Pn(){}function Rn(){}function Nn(e,t){var n={type:t.value};for(t=e.next();"EOF"!=t&&0!=t.code;)vn(n,t,e),t=e.next();return n}function On(){}function Ln(){}function Dn(){}function In(){}function Fn(e,t){for(var n=null,r=function(){for(var n={vertices:[],isClosed:!1},r=0;;){if(r>0){for(var i=0;i<r&&10==e.code;i++){var a=fn(t);42==(e=t.next()).code&&(a.bulge=e.value,e=t.next()),n.vertices.push(a)}return n}switch(e.code){case 72:e.value;break;case 73:n.isClosed=e.value;break;case 93:r=e.value;break;default:return n}e=t.next()}},i=function(){if(72!=e.code)return null;var n={type:e.value};e=t.next();for(var r=4==n.type;;){switch(e.code){case 10:r?(n.controlPoints||(n.controlPoints=[]),n.controlPoints.push(fn(t))):n.start=fn(t);break;case 11:r?(n.fitPoints||(n.fitPoints=[]),n.fitPoints.push(fn(t))):n.end=fn(t);break;case 40:r?(n.knotValues||(n.knotValues=[]),n.knotValues.push(e.value)):n.radius=e.value;break;case 50:n.startAngle=e.value*Math.PI/180;break;case 51:n.endAngle=e.value*Math.PI/180;break;case 73:r?n.rational=e.value:n.isCcw=e.value;break;case 74:n.periodic=e.value;break;case 94:n.degreeOfSplineCurve=e.value;break;case 95:case 96:case 40:case 42:case 97:break;default:return n}e=t.next()}},a=!1,o=0,s=0;;){if(!n){if(92!=e.code)return null;n={type:e.value},e=t.next()}for(2&n.type&&!a&&(n.polyline=r(),a=!0);o;){var u=i();u?(n.edges.push(u),o--):o=0}for(;s;)330==e.code?(n.sourceRefs.push(e.value),s--,e=t.next()):s=0;switch(e.code){case 93:(o=e.value)>0&&(n.edges=[]);break;case 97:(s=e.value)>0&&(n.sourceRefs=[]);break;default:return t.rewind(),n}e=t.next()}}function Un(e,t){if(53!=e.code)return null;var n={angle:e.value*Math.PI/180,base:{x:0,y:0},offset:{x:0,y:0}};e=t.next();for(var r=0;;){switch(e.code){case 43:n.base.x=e.value;break;case 44:n.base.y=e.value;break;case 45:n.offset.x=e.value;break;case 46:n.offset.y=e.value;break;case 49:r>0&&(n.dashes.push(e.value),r--);break;case 79:r=e.value,e.value&&(n.dashes=[]);break;default:return t.rewind(),n}e=t.next()}}function Bn(e,t){return 10!=e.code?null:fn(t)}gn.ForEntityName="3DFACE",gn.prototype.parseEntity=function(e,t){var n={type:t.value,vertices:[]};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 70:n.shape=1===(1&t.value),n.hasContinuousLinetypePattern=128===(128&t.value);break;case 10:n.vertices=mn(e,t),t=e.lastReadGroup;break;default:vn(n,t,e)}t=e.next()}return n},yn.ForEntityName="ARC",yn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.center=fn(e);break;case 40:n.radius=t.value;break;case 50:n.startAngle=Math.PI/180*t.value;break;case 51:n.endAngle=Math.PI/180*t.value;break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},bn.ForEntityName="ATTDEF",bn.prototype.parseEntity=function(e,t){var n={type:t.value,scale:1,textStyle:"STANDARD"};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 1:n.text=t.value;break;case 2:n.tag=t.value;break;case 3:n.prompt=t.value;break;case 7:n.textStyle=t.value;break;case 10:n.startPoint=fn(e);break;case 11:n.endPoint=fn(e);break;case 39:n.thickness=t.value;break;case 40:n.textHeight=t.value;break;case 41:n.scale=t.value;break;case 50:n.rotation=t.value;break;case 51:n.obliqueAngle=t.value;break;case 70:n.invisible=!!(1&t.value),n.constant=!!(2&t.value),n.verificationRequired=!!(4&t.value),n.preset=!!(8&t.value);break;case 71:n.backwards=!!(2&t.value),n.mirrored=!!(4&t.value);break;case 72:n.horizontalJustification=t.value;break;case 73:n.fieldLength=t.value;break;case 74:n.verticalJustification=t.value;break;case 100:break;case 101:pn(e);break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},xn.ForEntityName="ATTRIB",xn.prototype.parseEntity=function(e,t){var n={type:t.value,scale:1,textStyle:"STANDARD"};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 1:n.text=t.value;break;case 2:n.tag=t.value;break;case 3:n.prompt=t.value;break;case 7:n.textStyle=t.value;break;case 10:n.startPoint=fn(e);break;case 11:n.endPoint=fn(e);break;case 39:n.thickness=t.value;break;case 40:n.textHeight=t.value;break;case 41:n.scale=t.value;break;case 44:n.lineSpacingFactor=t.value;break;case 45:n.fillBoxScale=t.value;break;case 46:n.annotationHeight=t.value;break;case 50:n.rotation=t.value;break;case 51:n.obliqueAngle=t.value;break;case 63:n.backgroundFillColor=t.value;break;case 70:n.invisible=!!(1&t.value),n.constant=!!(2&t.value),n.verificationRequired=!!(4&t.value),n.preset=!!(8&t.value);break;case 71:n.attachmentPoint=t.value;break;case 72:n.horizontalJustification=t.value;break;case 73:n.lineSpacing=t.value;break;case 74:n.verticalJustification=t.value;break;case 90:n.backgroundFillSetting=t.value;break;case 100:break;case 210:n.extrusionDirection=fn(e);break;case 280:n.lockPositionFlag=t.value;break;case 340:n.hardPointerId=t.value;break;default:vn(n,t,e)}t=e.next()}return n},En.ForEntityName="CIRCLE",En.prototype.parseEntity=function(e,t){var n,r;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.center=fn(e);break;case 40:n.radius=t.value;break;case 50:n.startAngle=Math.PI/180*t.value;break;case 51:(r=Math.PI/180*t.value)<n.startAngle?n.angleLength=r+2*Math.PI-n.startAngle:n.angleLength=r-n.startAngle,n.endAngle=r;break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},wn.ForEntityName="DIMENSION",wn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 2:n.block=t.value;break;case 3:n.styleName=t.value;break;case 10:n.anchorPoint=fn(e);break;case 11:n.middleOfText=fn(e);break;case 12:n.insertionPoint=fn(e);break;case 13:n.linearOrAngularPoint1=fn(e);break;case 14:n.linearOrAngularPoint2=fn(e);break;case 15:n.diameterOrRadiusPoint=fn(e);break;case 16:n.arcPoint=fn(e);break;case 70:n.dimensionType=t.value;break;case 71:n.attachmentPoint=t.value;break;case 42:n.actualMeasurement=t.value;break;case 1:n.text=t.value;break;case 50:n.angle=t.value;break;case 53:n.textRotation=t.value;break;default:vn(n,t,e)}t=e.next()}return n},kn.ForEntityName="ELLIPSE",kn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.center=fn(e);break;case 11:n.majorAxisEndPoint=fn(e);break;case 40:n.axisRatio=t.value;break;case 41:n.startAngle=t.value;break;case 42:n.endAngle=t.value;break;case 2:n.name=t.value;break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},Sn.ForEntityName="INSERT",Sn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 2:n.name=t.value;break;case 41:n.xScale=t.value;break;case 42:n.yScale=t.value;break;case 43:n.zScale=t.value;break;case 10:n.position=fn(e);break;case 50:n.rotation=t.value;break;case 70:n.columnCount=t.value;break;case 71:n.rowCount=t.value;break;case 44:n.columnSpacing=t.value;break;case 45:n.rowSpacing=t.value;break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},_n.ForEntityName="LINE",_n.prototype.parseEntity=function(e,t){var n={type:t.value,vertices:[]};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.vertices.unshift(fn(e));break;case 11:n.vertices.push(fn(e));break;case 210:n.extrusionDirection=fn(e);break;case 100:break;default:vn(n,t,e)}t=e.next()}return n},Mn.ForEntityName="LWPOLYLINE",Mn.prototype.parseEntity=function(e,t){var n={type:t.value,vertices:[]},r=0;for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 38:n.elevation=t.value;break;case 39:n.depth=t.value;break;case 70:n.shape=1===(1&t.value),n.hasContinuousLinetypePattern=128===(128&t.value);break;case 90:r=t.value;break;case 10:n.vertices=Tn(r,e);break;case 43:0!==t.value&&(n.width=t.value);break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},An.ForEntityName="MTEXT",An.prototype.parseEntity=function(e,t){var n={type:t.value};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 3:case 1:n.text?n.text+=t.value:n.text=t.value;break;case 10:n.position=fn(e);break;case 11:n.direction=fn(e);break;case 40:n.height=t.value;break;case 41:n.width=t.value;break;case 44:n.lineSpacing=t.value;break;case 50:n.rotation=t.value;break;case 71:n.attachmentPoint=t.value;break;case 72:n.drawingDirection=t.value;break;case 101:pn(e);break;default:vn(n,t,e)}t=e.next()}return n},Cn.ForEntityName="POINT",Cn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.position=fn(e);break;case 39:n.thickness=t.value;break;case 210:n.extrusionDirection=fn(e);break;case 100:break;default:vn(n,t,e)}t=e.next()}return n},Pn.ForEntityName="VERTEX",Pn.prototype.parseEntity=function(e,t){var n={type:t.value};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.x=t.value;break;case 20:n.y=t.value;break;case 30:n.z=t.value;break;case 40:case 41:case 50:break;case 42:0!=t.value&&(n.bulge=t.value);break;case 70:n.curveFittingVertex=0!==(1&t.value),n.curveFitTangent=0!==(2&t.value),n.splineVertex=0!==(8&t.value),n.splineControlPoint=0!==(16&t.value),n.threeDPolylineVertex=0!==(32&t.value),n.threeDPolylineMesh=0!==(64&t.value),n.polyfaceMeshVertex=0!==(128&t.value);break;case 71:n.faces=[t.value];break;case 72:n.faces[1]=t.value;break;case 73:n.faces[2]=t.value;break;case 74:n.faces[3]=t.value;break;default:vn(n,t,e)}t=e.next()}return n},Rn.ForEntityName="POLYLINE",Rn.prototype.parseEntity=function(e,t){var n={type:t.value,vertices:[]};for(t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:case 20:case 30:case 40:case 41:case 71:case 72:case 73:case 74:case 75:break;case 39:n.thickness=t.value;break;case 70:n.shape=0!==(1&t.value),n.includesCurveFitVertices=0!==(2&t.value),n.includesSplineFitVertices=0!==(4&t.value),n.is3dPolyline=0!==(8&t.value),n.is3dPolygonMesh=0!==(16&t.value),n.is3dPolygonMeshClosed=0!==(32&t.value),n.isPolyfaceMesh=0!==(64&t.value),n.hasContinuousLinetypePattern=0!==(128&t.value);break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n.vertices=function(e,t){var n=new Pn,r=[];for(;!e.isEOF();)if(0===t.code)if("VERTEX"===t.value)r.push(n.parseEntity(e,t)),t=e.lastReadGroup;else if("SEQEND"===t.value){Nn(e,t);break}return r}(e,t),n},On.ForEntityName="SOLID",On.prototype.parseEntity=function(e,t){var n;for((n={type:t.value}).points=[],t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.points[0]=fn(e);break;case 11:n.points[1]=fn(e);break;case 12:n.points[2]=fn(e);break;case 13:n.points[3]=fn(e);break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},Ln.ForEntityName="SPLINE",Ln.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.controlPoints||(n.controlPoints=[]),n.controlPoints.push(fn(e));break;case 11:n.fitPoints||(n.fitPoints=[]),n.fitPoints.push(fn(e));break;case 12:n.startTangent=fn(e);break;case 13:n.endTangent=fn(e);break;case 40:n.knotValues||(n.knotValues=[]),n.knotValues.push(t.value);break;case 70:0!=(1&t.value)&&(n.closed=!0),0!=(2&t.value)&&(n.periodic=!0),0!=(4&t.value)&&(n.rational=!0),0!=(8&t.value)&&(n.planar=!0),0!=(16&t.value)&&(n.planar=!0,n.linear=!0);break;case 71:n.degreeOfSplineCurve=t.value;break;case 72:n.numberOfKnots=t.value;break;case 73:n.numberOfControlPoints=t.value;break;case 74:n.numberOfFitPoints=t.value;break;case 210:n.extrusionDirection=fn(e);break;default:vn(n,t,e)}t=e.next()}return n},Dn.ForEntityName="TEXT",Dn.prototype.parseEntity=function(e,t){var n;for(n={type:t.value},t=e.next();"EOF"!==t&&0!==t.code;){switch(t.code){case 10:n.startPoint=fn(e);break;case 11:n.endPoint=fn(e);break;case 40:n.textHeight=t.value;break;case 41:n.xScale=t.value;break;case 50:n.rotation=t.value;break;case 1:n.text=t.value;break;case 72:n.halign=t.value;break;case 73:n.valign=t.value;break;default:vn(n,t,e)}t=e.next()}return n},In.ForEntityName="HATCH",In.prototype.parseEntity=function(e,t){var n;n={type:t.value};var r=0,i=0,a=0;for(t=e.next();"EOF"!==t&&0!==t.code;){for(;r>0;){var o=Fn(t,e);o?(n.boundaryLoops.push(o),r--,t=e.next()):r=0}for(;i>0;){var s=Un(t,e);s?(n.definitionLines.push(s),i--,t=e.next()):i=0}for(;a>0;){var u=Bn(t,e);u?(n.seedPoints.push(u),a--,t=e.next()):a=0}if(0===t.code)break;switch(t.code){case 2:n.patternName=t.value;break;case 70:n.isSolid=0!=t.value;break;case 91:(r=t.value)>0&&(n.boundaryLoops=[]);break;case 75:n.hatchStyle=t.value;break;case 76:n.patternType=t.value;break;case 52:n.patternAngle=t.value*Math.PI/180;break;case 41:n.patternScale=t.value;break;case 78:(i=t.value)>0&&(n.definitionLines=[]);break;case 98:(a=t.value)>0&&(n.seedPoints=[]);break;default:vn(n,t,e)}t=e.next()}return n};var zn=new Map([[140,"DIMTXT"],[142,"DIMTSZ"],[144,"DIMLFAC"],[147,"DIMGAP"],[173,"DIMSAH"],[175,"DIMSOXD"],[176,"DIMCLRD"],[177,"DIMCLRE"],[178,"DIMCLRT"],[271,"DIMDEC"],[278,"DIMDSEP"],[281,"DIMSD1"],[282,"DIMSD2"],[3,"DIMPOST"],[40,"DIMSCALE"],[41,"DIMASZ"],[42,"DIMEXO"],[44,"DIMEXE"],[45,"DIMRND"],[46,"DIMDLE"],[5,"DIMBLK"],[6,"DIMBLK1"],[7,"DIMBLK2"],[75,"DIMSE1"],[76,"DIMSE2"],[78,"DIMZIN"]]);function Gn(){var e;this._entityHandlers={},(e=this).registerEntityHandler(gn),e.registerEntityHandler(yn),e.registerEntityHandler(bn),e.registerEntityHandler(xn),e.registerEntityHandler(En),e.registerEntityHandler(wn),e.registerEntityHandler(kn),e.registerEntityHandler(Sn),e.registerEntityHandler(_n),e.registerEntityHandler(Mn),e.registerEntityHandler(An),e.registerEntityHandler(Cn),e.registerEntityHandler(Rn),e.registerEntityHandler(On),e.registerEntityHandler(Ln),e.registerEntityHandler(Dn),e.registerEntityHandler(In)}function Hn(e){hn().debug("unhandled group "+jn(e))}function jn(e){return e.code+":"+e.value}function Vn(e){return ln[e]}hn().setLevel("error"),Gn.prototype.parse=function(e,t){throw new Error("read() not implemented. Use readSync()")},Gn.prototype.registerEntityHandler=function(e){var t=new e;this._entityHandlers[e.ForEntityName]=t},Gn.prototype.parseSync=function(e){return"string"===typeof e?this._parse(e):(console.error("Cannot read DXF source of type `"+typeof e),null)},Gn.prototype.parseStream=function(e,t){var n="",r=this;e.on("data",(function(e){n+=e})),e.on("end",(function(){try{var e=r._parse(n)}catch(i){return t(i)}t(null,e)})),e.on("error",(function(e){t(e)}))},Gn.prototype._parse=function(e){var t,n,r={},i=0,a=e.split(/\r\n|\r|\n/g);if(!(t=new sn(a)).hasNext())throw Error("Empty file");var o=this,s=function(e,t){return n.code===e&&n.value===t},u=function(){var e=null,r=null,i={};for(n=t.next();;){if(s(0,"ENDSEC")){e&&(i[e]=r);break}9===n.code?(e&&(i[e]=r),e=n.value):10===n.code?r={x:n.value}:20===n.code?r.y=n.value:30===n.code?r.z=n.value:r=n.value,n=t.next()}return n=t.next(),i},l=function(){var e,r={};for(n=t.next();"EOF"!==n.value&&!s(0,"ENDSEC");)s(0,"BLOCK")?(hn().debug("block {"),e=c(),hn().debug("}"),m(e),e.name?r[e.name]=e:hn().error('block with handle "'+e.handle+'" is missing a name.')):(Hn(n),n=t.next());return r},c=function(){var e={};for(n=t.next();"EOF"!==n.value;){switch(n.code){case 1:e.xrefPath=n.value,n=t.next();break;case 2:e.name=n.value,n=t.next();break;case 3:e.name2=n.value,n=t.next();break;case 5:e.handle=n.value,n=t.next();break;case 8:e.layer=n.value,n=t.next();break;case 10:e.position=g(),n=t.next();break;case 67:e.paperSpace=!(!n.value||1!=n.value),n=t.next();break;case 70:0!=n.value&&(e.type=n.value),n=t.next();break;case 100:n=t.next();break;case 330:e.ownerHandle=n.value,n=t.next();break;case 0:if("ENDBLK"==n.value)break;e.entities=v(!0);break;default:Hn(n),n=t.next()}if(s(0,"ENDBLK")){n=t.next();break}}return e},h=function(){var e={};for(n=t.next();"EOF"!==n.value&&!s(0,"ENDSEC");){s(0,"TABLE")?(n=t.next(),p[n.value]?(hn().debug(n.value+" Table {"),e[p[n.value].tableName]=f(),hn().debug("}")):hn().debug("Unhandled Table "+n.value)):n=t.next()}return n=t.next(),e},d="ENDTAB",f=function(){var e,r=p[n.value],i={},a=0;for(n=t.next();!s(0,d);)switch(n.code){case 5:i.handle=n.value,n=t.next();break;case 330:i.ownerHandle=n.value,n=t.next();break;case 100:"AcDbSymbolTable"===n.value||Hn(n),n=t.next();break;case 70:a=n.value,n=t.next();break;case 0:n.value===r.dxfSymbolName?i[r.tableRecordsProperty]=r.parseTableRecords():(Hn(n),n=t.next());break;default:Hn(n),n=t.next()}var o=i[r.tableRecordsProperty];return o?(o.constructor===Array?e=o.length:"object"===typeof o&&(e=Object.keys(o).length),a!==e&&hn().warn("Parsed ".concat(e," ").concat(r.dxfSymbolName,"'s but expected ").concat(a))):i[r.tableRecordsProperty]=[],n=t.next(),i},p={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:function(){var e=[],r={};for(hn().debug("ViewPort {"),n=t.next();!s(0,d);)switch(n.code){case 2:r.name=n.value,n=t.next();break;case 10:r.lowerLeftCorner=g(),n=t.next();break;case 11:r.upperRightCorner=g(),n=t.next();break;case 12:r.center=g(),n=t.next();break;case 13:r.snapBasePoint=g(),n=t.next();break;case 14:r.snapSpacing=g(),n=t.next();break;case 15:r.gridSpacing=g(),n=t.next();break;case 16:r.viewDirectionFromTarget=g(),n=t.next();break;case 17:r.viewTarget=g(),n=t.next();break;case 42:r.lensLength=n.value,n=t.next();break;case 43:r.frontClippingPlane=n.value,n=t.next();break;case 44:r.backClippingPlane=n.value,n=t.next();break;case 45:r.viewHeight=n.value,n=t.next();break;case 50:r.snapRotationAngle=n.value,n=t.next();break;case 51:r.viewTwistAngle=n.value,n=t.next();break;case 79:r.orthographicType=n.value,n=t.next();break;case 110:case 110:r.ucsOrigin=g(),n=t.next();break;case 111:r.ucsXAxis=g(),n=t.next();break;case 112:r.ucsYAxis=g(),n=t.next();break;case 281:r.renderMode=n.value,n=t.next();break;case 281:r.defaultLightingType=n.value,n=t.next();break;case 292:r.defaultLightingOn=n.value,n=t.next();break;case 330:r.ownerHandle=n.value,n=t.next();break;case 63:case 421:case 431:r.ambientColor=n.value,n=t.next();break;case 0:"VPORT"===n.value&&(hn().debug("}"),e.push(r),hn().debug("ViewPort {"),r={},n=t.next());break;default:Hn(n),n=t.next()}return hn().debug("}"),e.push(r),e}},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:function(){var e,r,i={},a={};for(hn().debug("LType {"),n=t.next();!s(0,"ENDTAB");)switch(n.code){case 2:a.name=n.value,e=n.value,n=t.next();break;case 3:a.description=n.value,n=t.next();break;case 73:(r=n.value)>0&&(a.pattern=[]),n=t.next();break;case 40:a.patternLength=n.value,n=t.next();break;case 49:a.pattern.push(n.value),n=t.next();break;case 0:hn().debug("}"),r>0&&r!==a.pattern.length&&hn().warn("lengths do not match on LTYPE pattern"),i[e]=a,a={},hn().debug("LType {"),n=t.next();break;default:n=t.next()}return hn().debug("}"),i[e]=a,i}},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:function(){var e,r={},i={};for(hn().debug("Layer {"),n=t.next();!s(0,"ENDTAB");)switch(n.code){case 2:i.name=n.value,e=n.value,n=t.next();break;case 62:i.visible=n.value>=0,i.colorIndex=Math.abs(n.value),i.color=Vn(i.colorIndex),n=t.next();break;case 70:i.frozen=0!==(1&n.value)||0!==(2&n.value),n=t.next();break;case 420:i.color=n.value,n=t.next();break;case 0:"LAYER"===n.value&&(hn().debug("}"),r[e]=i,hn().debug("Layer {"),i={},e=void 0,n=t.next());break;default:Hn(n),n=t.next()}return hn().debug("}"),r[e]=i,r}},DIMSTYLE:{tableRecordsProperty:"dimStyles",tableName:"dimstyle",dxfSymbolName:"DIMSTYLE",parseTableRecords:function(){var e,r={},i={};for(hn().debug("DimStyle {"),n=t.next();!s(0,"ENDTAB");)if(zn.has(n.code))i[zn.get(n.code)]=n.value,n=t.next();else switch(n.code){case 2:i.name=n.value,e=n.value,n=t.next();break;case 0:"DIMSTYLE"===n.value&&(hn().debug("}"),r[e]=i,hn().debug("DimStyle {"),i={},e=void 0,n=t.next());break;default:Hn(n),n=t.next()}return hn().debug("}"),r[e]=i,r}},STYLE:{tableRecordsProperty:"styles",tableName:"style",dxfSymbolName:"STYLE",parseTableRecords:function(){var e,r={},i={};for(hn().debug("Style {"),n=t.next();!s(0,d);)switch(n.code){case 100:i.subClassMarker=n.value,n=t.next();break;case 2:i.styleName=n.value,e=n.value,n=t.next();break;case 70:i.standardFlag=n.value,n=t.next();break;case 40:i.fixedTextHeight=n.value,n=t.next();break;case 41:i.widthFactor=n.value,n=t.next();break;case 50:i.obliqueAngle=n.value,n=t.next();break;case 71:i.textGenerationFlag=n.value,n=t.next();break;case 42:i.lastHeight=n.value,n=t.next();break;case 3:i.font=n.value,n=t.next();break;case 4:i.bigFont=n.value,n=t.next();break;case 1071:i.extendedFont=n.value,n=t.next();break;case 0:"STYLE"===n.value&&(hn().debug("}"),r[e]=i,hn().debug("Style {"),i={},e=void 0,n=t.next());break;default:Hn(n),n=t.next()}return hn().debug("}"),r[e]=i,r}}},v=function(e){var r=[],i=e?"ENDBLK":"ENDSEC";for(e||(n=t.next());;)if(0===n.code){if(n.value===i)break;var a,s=o._entityHandlers[n.value];if(null==s){hn().warn("Unhandled entity "+n.value),n=t.next();continue}hn().debug(n.value+" {"),a=s.parseEntity(t,n),n=t.lastReadGroup,hn().debug("}"),m(a),r.push(a)}else n=t.next();return"ENDSEC"==i&&(n=t.next()),r},g=function(){var e={},r=n.code;if(e.x=n.value,r+=10,(n=t.next()).code!=r)throw new Error("Expected code for point value to be "+r+" but got "+n.code+".");return e.y=n.value,r+=10,(n=t.next()).code!=r?(t.rewind(),e):(e.z=n.value,e)},m=function(e){if(!e)throw new TypeError("entity cannot be undefined or null");e.handle||(e.handle=i++)};return function(){for(n=t.next();!t.isEOF();)if(0===n.code&&"SECTION"===n.value){if(2!==(n=t.next()).code){console.error("Unexpected code %s after 0:SECTION",jn(n)),n=t.next();continue}"HEADER"===n.value?(hn().debug("> HEADER"),r.header=u(),hn().debug("<")):"BLOCKS"===n.value?(hn().debug("> BLOCKS"),r.blocks=l(),hn().debug("<")):"ENTITIES"===n.value?(hn().debug("> ENTITIES"),r.entities=v(!1),hn().debug("<")):"TABLES"===n.value?(hn().debug("> TABLES"),r.tables=h(),hn().debug("<")):"EOF"===n.value?hn().debug("EOF"):hn().warn("Skipping section '%s'",n.value)}else n=t.next()}(),r};var Wn=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";v(this,e),this.url=t,this.encoding=n}),[{key:"Fetch",value:function(){var e=c(u().mark((function e(){var t,n,r,i,a,o,s,l,c,h,d,f=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:null,e.next=3,fetch(this.url);case 3:n=e.sent,r=+n.headers.get("Content-Length"),i=n.body.getReader(),a=0,o="",s=new TextDecoder(this.encoding);case 9:return e.next=12,i.read();case 12:if(l=e.sent,c=l.done,h=l.value,!c){e.next=18;break}return o+=s.decode(new ArrayBuffer(0),{stream:!1}),e.abrupt("break",23);case 18:o+=s.decode(h,{stream:!0}),a+=h.length,null!==t&&t("fetch",a,r),e.next=9;break;case 23:return null!==t&&t("parse",0,null),d=new Gn,e.abrupt("return",d.parseSync(o));case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}();function Xn(){return Xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xn.apply(null,arguments)}var Yn="161",qn=0,Kn=1,Zn=2,Jn=0,Qn=1,$n=2,er=3,tr=1,nr=2,rr=3,ir=0,ar=1,or=100,sr=0,ur=1,lr=2,cr=0,hr=1,dr=2,fr=3,pr=4,vr=5,gr=6,mr=301,yr=302,br=303,xr=304,Er=306,wr=1e3,kr=1001,Sr=1002,_r=1003,Mr=1004,Tr=1005,Ar=1006,Cr=1007,Pr=1008,Rr=1009,Nr=1012,Or=1013,Lr=1014,Dr=1015,Ir=1016,Fr=1020,Ur=1023,Br=1026,zr=1027,Gr=33776,Hr=33777,jr=33778,Vr=33779,Wr=36492,Xr=2300,Yr=2301,qr=2302,Kr=2400,Zr=2401,Jr=2402,Qr=3001,$r="",ei="srgb",ti="srgb-linear",ni="display-p3",ri="display-p3-linear",ii="linear",ai="srgb",oi="rec709",si="p3",ui=7680,li=35044,ci="300 es",hi=1035,di=2e3,fi=2001,pi=function(){return p((function e(){v(this,e)}),[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}])}(),vi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gi=Math.PI/180,mi=180/Math.PI;function yi(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(vi[255&e]+vi[e>>8&255]+vi[e>>16&255]+vi[e>>24&255]+"-"+vi[255&t]+vi[t>>8&255]+"-"+vi[t>>16&15|64]+vi[t>>24&255]+"-"+vi[63&n|128]+vi[n>>8&255]+"-"+vi[n>>16&255]+vi[n>>24&255]+vi[255&r]+vi[r>>8&255]+vi[r>>16&255]+vi[r>>24&255]).toLowerCase()}function bi(e,t,n){return Math.max(t,Math.min(n,e))}function xi(e,t){return(e%t+t)%t}function Ei(e,t,n){return(1-n)*e+n*t}function wi(e){return 0===(e&e-1)&&0!==e}function ki(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Si(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function _i(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Mi=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),e.prototype.isVector2=!0,this.x=t,this.y=n}),[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(bi(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}])}(),Ti=function(){return p((function e(t,n,r,i,a,o,s,u,l){v(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l)}),[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],v=r[3],g=r[6],m=r[1],y=r[4],b=r[7],x=r[2],E=r[5],w=r[8];return i[0]=a*p+o*m+s*x,i[3]=a*v+o*y+s*E,i[6]=a*g+o*b+s*w,i[1]=u*p+l*m+c*x,i[4]=u*v+l*y+c*E,i[7]=u*g+l*b+c*w,i[2]=h*p+d*m+f*x,i[5]=h*v+d*y+f*E,i[8]=h*g+d*b+f*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,d=u*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(Ai.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(Ai.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(Ai.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),Ai=new Ti;function Ci(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Pi(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var Ri={};function Ni(e){e in Ri||(Ri[e]=!0,console.warn(e))}var Oi,Li=(new Ti).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Di=(new Ti).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ii=P(P(P(P({},ti,{transfer:ii,primaries:oi,toReference:function(e){return e},fromReference:function(e){return e}}),ei,{transfer:ai,primaries:oi,toReference:function(e){return e.convertSRGBToLinear()},fromReference:function(e){return e.convertLinearToSRGB()}}),ri,{transfer:ii,primaries:si,toReference:function(e){return e.applyMatrix3(Di)},fromReference:function(e){return e.applyMatrix3(Li)}}),ni,{transfer:ai,primaries:si,toReference:function(e){return e.convertSRGBToLinear().applyMatrix3(Di)},fromReference:function(e){return e.applyMatrix3(Li).convertLinearToSRGB()}}),Fi=new Set([ti,ri]),Ui={enabled:!0,_workingColorSpace:ti,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Fi.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=Ii[t].toReference;return(0,Ii[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Ii[e].primaries},getTransfer:function(e){return e===$r?ii:Ii[e].transfer}};function Bi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function zi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Gi=function(){return p((function e(){v(this,e)}),null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Oi&&(Oi=Pi("canvas")),Oi.width=e.width,Oi.height=e.height;var n=Oi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Oi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=Pi("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*Bi(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*Bi(o[s]/255)):o[s]=Bi(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}])}(),Hi=0,ji=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;v(this,e),this.isSource=!0,Object.defineProperty(this,"id",{value:Hi++}),this.uuid=yi(),this.data=t,this.dataReady=!0,this.version=0}),[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Vi(r[a].image)):i.push(Vi(r[a]))}else i=Vi(r);n.url=i}return t||(e.images[this.uuid]=n),n}}])}();function Vi(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Gi.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Wi=0,Xi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kr,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kr,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ar,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pr,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ur,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Rr,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:t.DEFAULT_ANISOTROPY,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:$r;return v(this,t),(e=T(this,t)).isTexture=!0,Object.defineProperty(e,"id",{value:Wi++}),e.uuid=yi(),e.name="",e.source=new ji(n),e.mipmaps=[],e.mapping=r,e.channel=0,e.wrapS=i,e.wrapT=a,e.magFilter=o,e.minFilter=s,e.anisotropy=c,e.format=u,e.internalFormat=null,e.type=l,e.offset=new Mi(0,0),e.repeat=new Mi(1,1),e.center=new Mi(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Ti,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,"string"===typeof h?e.colorSpace=h:(Ni("THREE.Texture: Property .encoding has been replaced by .colorSpace."),e.colorSpace=h===Qr?ei:$r),e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return C(t,e),p(t,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wr:e.x=e.x-Math.floor(e.x);break;case kr:e.x=e.x<0?0:1;break;case Sr:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case wr:e.y=e.y-Math.floor(e.y);break;case kr:e.y=e.y<0?0:1;break;case Sr:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"encoding",get:function(){return Ni("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ei?Qr:3e3},set:function(e){Ni("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Qr?ei:$r}}])}(pi);Xi.DEFAULT_IMAGE=null,Xi.DEFAULT_MAPPING=300,Xi.DEFAULT_ANISOTROPY=1;var Yi=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),e.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=i}),[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],v=s[6],g=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(f-v)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(f+v)<o&&Math.abs(u+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var m=(u+1)/2,y=(d+1)/2,b=(g+1)/2,x=(l+h)/4,E=(c+p)/4,w=(f+v)/4;return m>y&&m>b?m<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(m)),i=E/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=w/r):b<a?(n=.707106781,r=.707106781,i=0):(n=E/(i=Math.sqrt(b)),r=w/i),this.set(n,r,i,t),this}var k=Math.sqrt((v-f)*(v-f)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(k)<.001&&(k=1),this.x=(v-f)/k,this.y=(c-p)/k,this.z=(h-l)/k,this.w=Math.acos((u+d+g-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}])}(),qi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,t),(e=T(this,t)).isRenderTarget=!0,e.width=n,e.height=r,e.depth=1,e.scissor=new Yi(0,0,n,r),e.scissorTest=!1,e.viewport=new Yi(0,0,n,r);var a={width:n,height:r,depth:1};return void 0!==i.encoding&&(Ni("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Qr?ei:$r),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ar,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),e.texture=new Xi(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=i.generateMipmaps,e.texture.internalFormat=i.internalFormat,e.depthBuffer=i.depthBuffer,e.stencilBuffer=i.stencilBuffer,e.depthTexture=i.depthTexture,e.samples=i.samples,e}return C(t,e),p(t,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new ji(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(pi),Ki=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v(this,t),(e=T(this,t,[n,r,i])).isWebGLRenderTarget=!0,e}return C(t,e),p(t)}(qi),Zi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,t),(e=T(this,t,[null])).isDataArrayTexture=!0,e.image={data:n,width:r,height:i,depth:a},e.magFilter=_r,e.minFilter=_r,e.wrapR=kr,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return C(t,e),p(t)}(Xi),Ji=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,t),(e=T(this,t,[null])).isData3DTexture=!0,e.image={data:n,width:r,height:i,depth:a},e.magFilter=_r,e.minFilter=_r,e.wrapR=kr,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return C(t,e),p(t)}(Xi),Qi=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=i}),[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(bi(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||u!==d||l!==f){var v=1-o,g=s*h+u*d+l*f+c*p,m=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*m);v=Math.sin(v*x)/b,o=Math.sin(o*x)/b}var E=o*m;if(s=s*v+h*E,u=u*v+d*E,l=l*v+f*E,c=c*v+p*E,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+l*c+s*d-u*h,e[t+1]=s*f+l*h+u*c-o*d,e[t+2]=u*f+l*d+o*h-s*c,e[t+3]=l*f-o*c-s*h-u*d,e}}])}(),$i=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}),[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(ta.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(ta.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=2*(a*r-o*n),l=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*u+a*c-o*l,this.y=n+s*l+o*u-i*c,this.z=r+s*c+i*l-a*u,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return ea.copy(this).projectOnVector(e),this.sub(ea)}},{key:"reflect",value:function(e){return this.sub(ea.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(bi(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}])}(),ea=new $i,ta=new Qi,na=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $i(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $i(-1/0,-1/0,-1/0);v(this,e),this.isBox3=!0,this.min=t,this.max=n}),[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(ia.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(ia.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ia.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n){var r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(var i=0,a=r.count;i<a;i++)!0===e.isMesh?e.getVertexPosition(i,ia):ia.fromBufferAttribute(r,i),ia.applyMatrix4(e.matrixWorld),this.expandByPoint(ia);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),aa.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),aa.copy(n.boundingBox)),aa.applyMatrix4(e.matrixWorld),this.union(aa)}for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,ia),ia.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(da),fa.subVectors(this.max,da),oa.subVectors(e.a,da),sa.subVectors(e.b,da),ua.subVectors(e.c,da),la.subVectors(sa,oa),ca.subVectors(ua,sa),ha.subVectors(oa,ua);var t=[0,-la.z,la.y,0,-ca.z,ca.y,0,-ha.z,ha.y,la.z,0,-la.x,ca.z,0,-ca.x,ha.z,0,-ha.x,-la.y,la.x,0,-ca.y,ca.x,0,-ha.y,ha.x,0];return!!ga(t,oa,sa,ua,fa)&&(!!ga(t=[1,0,0,0,1,0,0,0,1],oa,sa,ua,fa)&&(pa.crossVectors(la,ca),ga(t=[pa.x,pa.y,pa.z],oa,sa,ua,fa)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,ia).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ia).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(ra[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ra[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ra[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ra[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ra[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ra[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ra[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ra[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ra)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}])}(),ra=[new $i,new $i,new $i,new $i,new $i,new $i,new $i,new $i],ia=new $i,aa=new na,oa=new $i,sa=new $i,ua=new $i,la=new $i,ca=new $i,ha=new $i,da=new $i,fa=new $i,pa=new $i,va=new $i;function ga(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){va.fromArray(e,a);var s=i.x*Math.abs(va.x)+i.y*Math.abs(va.y)+i.z*Math.abs(va.z),u=t.dot(va),l=n.dot(va),c=r.dot(va);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var ma=new na,ya=new $i,ba=new $i,xa=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;v(this,e),this.isSphere=!0,this.center=t,this.radius=n}),[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):ma.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ya.subVectors(e,this.center);var t=ya.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(ya,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ba.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ya.copy(e.center).add(ba)),this.expandByPoint(ya.copy(e.center).sub(ba))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Ea=new $i,wa=new $i,ka=new $i,Sa=new $i,_a=new $i,Ma=new $i,Ta=new $i,Aa=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $i(0,0,-1);v(this,e),this.origin=t,this.direction=n}),[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Ea)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Ea.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ea.copy(this.origin).addScaledVector(this.direction,t),Ea.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){wa.copy(e).add(t).multiplyScalar(.5),ka.copy(t).sub(e).normalize(),Sa.copy(this.origin).sub(wa);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(ka),c=Sa.dot(this.direction),h=-Sa.dot(ka),d=Sa.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-h,s=u*f,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+d}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+d):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(wa).addScaledVector(ka,a),o}},{key:"intersectSphere",value:function(e,t){Ea.subVectors(e.center,this.origin);var n=Ea.dot(this.direction),r=Ea.dot(Ea)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Ea)}},{key:"intersectTriangle",value:function(e,t,n,r,i){_a.subVectors(t,e),Ma.subVectors(n,e),Ta.crossVectors(_a,Ma);var a,o=this.direction.dot(Ta);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Sa.subVectors(this.origin,e);var s=a*this.direction.dot(Ma.crossVectors(Sa,Ma));if(s<0)return null;var u=a*this.direction.dot(_a.cross(Sa));if(u<0)return null;if(s+u>o)return null;var l=-a*Sa.dot(Ta);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Ca=function(){function e(t,n,r,i,a,o,s,u,l,c,h,d,f,p,g,m){v(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l,c,h,d,f,p,g,m)}return p(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/Pa.setFromMatrixColumn(e,0).length(),i=1/Pa.setFromMatrixColumn(e,1).length(),a=1/Pa.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,d=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+f*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=f+d*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,g=s*c,m=u*l,y=u*c;t[0]=v+y*o,t[4]=m*o-g,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=g*o-m,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,x=s*c,E=u*l,w=u*c;t[0]=b-w*o,t[4]=-a*c,t[8]=E+x*o,t[1]=x+E*o,t[5]=a*l,t[9]=w-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var k=a*l,S=a*c,_=o*l,M=o*c;t[0]=s*l,t[4]=_*u-S,t[8]=k*u+M,t[1]=s*c,t[5]=M*u+k,t[9]=S*u-_,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,A=a*u,C=o*s,P=o*u;t[0]=s*l,t[4]=P-T*c,t[8]=C*c+A,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=A*c+C,t[10]=T-P*c}else if("XZY"===e.order){var R=a*s,N=a*u,O=o*s,L=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=R*c+L,t[5]=a*l,t[9]=N*c-O,t[2]=O*c-N,t[6]=o*l,t[10]=L*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Na,e,Oa)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return Ia.subVectors(e,t),0===Ia.lengthSq()&&(Ia.z=1),Ia.normalize(),La.crossVectors(n,Ia),0===La.lengthSq()&&(1===Math.abs(n.z)?Ia.x+=1e-4:Ia.z+=1e-4,Ia.normalize(),La.crossVectors(n,Ia)),La.normalize(),Da.crossVectors(Ia,La),r[0]=La.x,r[4]=Da.x,r[8]=Ia.x,r[1]=La.y,r[5]=Da.y,r[9]=Ia.y,r[2]=La.z,r[6]=Da.z,r[10]=Ia.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],g=n[14],m=n[3],y=n[7],b=n[11],x=n[15],E=r[0],w=r[4],k=r[8],S=r[12],_=r[1],M=r[5],T=r[9],A=r[13],C=r[2],P=r[6],R=r[10],N=r[14],O=r[3],L=r[7],D=r[11],I=r[15];return i[0]=a*E+o*_+s*C+u*O,i[4]=a*w+o*M+s*P+u*L,i[8]=a*k+o*T+s*R+u*D,i[12]=a*S+o*A+s*N+u*I,i[1]=l*E+c*_+h*C+d*O,i[5]=l*w+c*M+h*P+d*L,i[9]=l*k+c*T+h*R+d*D,i[13]=l*S+c*A+h*N+d*I,i[2]=f*E+p*_+v*C+g*O,i[6]=f*w+p*M+v*P+g*L,i[10]=f*k+p*T+v*R+g*D,i[14]=f*S+p*A+v*N+g*I,i[3]=m*E+y*_+b*C+x*O,i[7]=m*w+y*M+b*P+x*L,i[11]=m*k+y*T+b*R+x*D,i[15]=m*S+y*A+b*N+x*I,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*u*h+i*a*h-r*a*d+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+n*a*d+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],g=e[15],m=c*v*u-p*h*u+p*s*d-o*v*d-c*s*g+o*h*g,y=f*h*u-l*v*u-f*s*d+a*v*d+l*s*g-a*h*g,b=l*p*u-f*c*u+f*o*d-a*p*d-l*o*g+a*c*g,x=f*c*s-l*p*s-f*o*h+a*p*h+l*o*v-a*c*v,E=t*m+n*y+r*b+i*x;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/E;return e[0]=m*w,e[1]=(p*h*i-c*v*i-p*r*d+n*v*d+c*r*g-n*h*g)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*g+n*s*g)*w,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*d-n*s*d)*w,e[4]=y*w,e[5]=(l*v*i-f*h*i+f*r*d-t*v*d-l*r*g+t*h*g)*w,e[6]=(f*s*i-a*v*i-f*r*u+t*v*u+a*r*g-t*s*g)*w,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*d+t*s*d)*w,e[8]=b*w,e[9]=(f*c*i-l*p*i-f*n*d+t*p*d+l*n*g-t*c*g)*w,e[10]=(a*p*i-f*o*i+f*n*u-t*p*u-a*n*g+t*o*g)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*d-t*o*d)*w,e[12]=x*w,e[13]=(l*p*r-f*c*r+f*n*h-t*p*h-l*n*v+t*c*v)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,d=i*l,f=i*c,p=a*l,v=a*c,g=o*c,m=s*u,y=s*l,b=s*c,x=n.x,E=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*E,r[5]=(1-(h+g))*E,r[6]=(v+m)*E,r[7]=0,r[8]=(f+y)*w,r[9]=(v-m)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=Pa.set(r[0],r[1],r[2]).length(),a=Pa.set(r[4],r[5],r[6]).length(),o=Pa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ra.copy(this);var s=1/i,u=1/a,l=1/o;return Ra.elements[0]*=s,Ra.elements[1]*=s,Ra.elements[2]*=s,Ra.elements[4]*=u,Ra.elements[5]*=u,Ra.elements[6]*=u,Ra.elements[8]*=l,Ra.elements[9]*=l,Ra.elements[10]*=l,t.setFromRotationMatrix(Ra),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:di,l=this.elements,c=2*i/(t-e),h=2*i/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r);if(u===di)o=-(a+i)/(a-i),s=-2*a*i/(a-i);else{if(u!==fi)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);o=-a/(a-i),s=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=o,l[14]=s,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:di,l=this.elements,c=1/(t-e),h=1/(n-r),d=1/(a-i),f=(t+e)*c,p=(n+r)*h;if(u===di)o=(a+i)*d,s=-2*d;else{if(u!==fi)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);o=i*d,s=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=s,l[14]=-o,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}])}(),Pa=new $i,Ra=new Ca,Na=new $i(0,0,0),Oa=new $i(1,1,1),La=new $i,Da=new $i,Ia=new $i,Fa=new Ca,Ua=new Qi,Ba=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DEFAULT_ORDER;v(this,e),this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=i}),[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(bi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-bi(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(bi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-bi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(bi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-bi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Fa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Fa,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Ua.setFromEuler(this),this.setFromQuaternion(Ua,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}])}();Ba.DEFAULT_ORDER="XYZ";var za=function(){return p((function e(){v(this,e),this.mask=1}),[{key:"set",value:function(e){this.mask=1<<e>>>0}},{key:"enable",value:function(e){this.mask|=1<<e}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e}},{key:"disable",value:function(e){this.mask&=~(1<<e)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&1<<e)}}])}(),Ga=0,Ha=new $i,ja=new Qi,Va=new Ca,Wa=new $i,Xa=new $i,Ya=new $i,qa=new Qi,Ka=new $i(1,0,0),Za=new $i(0,1,0),Ja=new $i(0,0,1),Qa={type:"added"},$a={type:"removed"},eo=function(e){function t(){var e;v(this,t),(e=T(this,t)).isObject3D=!0,Object.defineProperty(e,"id",{value:Ga++}),e.uuid=yi(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=t.DEFAULT_UP.clone();var n=new $i,r=new Ba,i=new Qi,a=new $i(1,1,1);return r._onChange((function(){i.setFromEuler(r,!1)})),i._onChange((function(){r.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(e,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Ca},normalMatrix:{value:new Ti}}),e.matrix=new Ca,e.matrixWorld=new Ca,e.matrixAutoUpdate=t.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new za,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return C(t,e),p(t,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return ja.setFromAxisAngle(e,t),this.quaternion.multiply(ja),this}},{key:"rotateOnWorldAxis",value:function(e,t){return ja.setFromAxisAngle(e,t),this.quaternion.premultiply(ja),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Ka,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Za,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Ja,e)}},{key:"translateOnAxis",value:function(e,t){return Ha.copy(e).applyQuaternion(this.quaternion),this.position.add(Ha.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Ka,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Za,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Ja,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Va.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Wa.copy(e):Wa.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Xa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Va.lookAt(Xa,Wa,this.up):Va.lookAt(Wa,Xa,this.up),this.quaternion.setFromRotationMatrix(Va),r&&(Va.extractRotation(r.matrixWorld),ja.setFromRotationMatrix(Va),this.quaternion.premultiply(ja.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qa)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent($a)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,I(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Va.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Va.multiply(e.parent.matrixWorld)),e.applyMatrix4(Va),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xa,e,Ya),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xa,qa,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((function(e){return{boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var g=S(e.geometries),m=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),E=S(e.skeletons),w=S(e.animations),k=S(e.nodes);g.length>0&&(n.geometries=g),m.length>0&&(n.materials=m),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),E.length>0&&(n.skeletons=E),w.length>0&&(n.animations=w),k.length>0&&(n.nodes=k)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}])}(pi);eo.DEFAULT_UP=new $i(0,1,0),eo.DEFAULT_MATRIX_AUTO_UPDATE=!0,eo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var to=new $i,no=new $i,ro=new $i,io=new $i,ao=new $i,oo=new $i,so=new $i,uo=new $i,lo=new $i,co=new $i,ho=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $i;v(this,e),this.a=t,this.b=n,this.c=r}return p(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return to.subVectors(this.c,this.b),no.subVectors(this.a,this.b),.5*to.cross(no).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;ao.subVectors(a,i),oo.subVectors(o,i),uo.subVectors(e,i);var s=ao.dot(uo),u=oo.dot(uo);if(s<=0&&u<=0)return t.copy(i);lo.subVectors(e,a);var l=ao.dot(lo),c=oo.dot(lo);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(ao,n);co.subVectors(e,o);var d=ao.dot(co),f=oo.dot(co);if(f>=0&&d<=f)return t.copy(o);var p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return r=u/(u-f),t.copy(i).addScaledVector(oo,r);var v=l*f-d*c;if(v<=0&&c-l>=0&&d-f>=0)return so.subVectors(o,a),r=(c-l)/(c-l+(d-f)),t.copy(a).addScaledVector(so,r);var g=1/(v+p+h);return n=p*g,r=h*g,t.copy(i).addScaledVector(ao,n).addScaledVector(oo,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),to.subVectors(e,t),r.cross(to);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){to.subVectors(r,t),no.subVectors(n,t),ro.subVectors(e,t);var a=to.dot(to),o=to.dot(no),s=to.dot(ro),u=no.dot(no),l=no.dot(ro),c=a*u-o*o;if(0===c)return i.set(0,0,0),null;var h=1/c,d=(u*s-o*l)*h,f=(a*l-o*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,io)&&(io.x>=0&&io.y>=0&&io.x+io.y<=1)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,io)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,io.x),s.addScaledVector(a,io.y),s.addScaledVector(o,io.z),s)}},{key:"isFrontFacing",value:function(e,t,n,r){return to.subVectors(n,t),no.subVectors(e,t),to.cross(no).dot(r)<0}}])}(),fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},po={h:0,s:0,l:0},vo={h:0,s:0,l:0};function go(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var mo=function(){return p((function e(t,n,r){return v(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}),[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ui.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ui.workingColorSpace;return this.r=e,this.g=t,this.b=n,Ui.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ui.workingColorSpace;if(e=xi(e,1),t=bi(t,0,1),n=bi(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=go(a,i,e+1/3),this.g=go(a,i,e),this.b=go(a,i,e-1/3)}return Ui.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei,n=fo[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=Bi(e.r),this.g=Bi(e.g),this.b=Bi(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=zi(e.r),this.g=zi(e.g),this.b=zi(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return Ui.fromWorkingColorSpace(yo.copy(this),e),65536*Math.round(bi(255*yo.r,0,255))+256*Math.round(bi(255*yo.g,0,255))+Math.round(bi(255*yo.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ui.workingColorSpace;Ui.fromWorkingColorSpace(yo.copy(this),t);var n,r,i=yo.r,a=yo.g,o=yo.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ui.workingColorSpace;return Ui.fromWorkingColorSpace(yo.copy(this),t),e.r=yo.r,e.g=yo.g,e.b=yo.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;Ui.fromWorkingColorSpace(yo.copy(this),e);var t=yo.r,n=yo.g,r=yo.b;return e!==ei?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(po),this.setHSL(po.h+e,po.s+t,po.l+n)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(po),e.getHSL(vo);var n=Ei(po.h,vo.h,t),r=Ei(po.s,vo.s,t),i=Ei(po.l,vo.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}])}(),yo=new mo;mo.NAMES=fo;var bo=0,xo=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isMaterial=!0,Object.defineProperty(e,"id",{value:bo++}),e.uuid=yi(),e.name="",e.type="Material",e.blending=1,e.side=ir,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=or,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new mo(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=ui,e.stencilZFail=ui,e.stencilZPass=ui,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return C(t,e),p(t,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==ir&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==or&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ui&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ui&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ui&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}])}(pi),Eo=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isMeshBasicMaterial=!0,n.type="MeshBasicMaterial",n.color=new mo(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.combine=sr,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.fog=!0,n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}])}(xo);var wo=new $i,ko=new Mi,So=function(){return p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(v(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=li,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Dr,this.version=0}),[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"updateRange",get:function(){return Ni("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)ko.fromBufferAttribute(this,t),ko.applyMatrix3(e),this.setXY(t,ko.x,ko.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)wo.fromBufferAttribute(this,r),wo.applyMatrix3(e),this.setXYZ(r,wo.x,wo.y,wo.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)wo.fromBufferAttribute(this,t),wo.applyMatrix4(e),this.setXYZ(t,wo.x,wo.y,wo.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)wo.fromBufferAttribute(this,t),wo.applyNormalMatrix(e),this.setXYZ(t,wo.x,wo.y,wo.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)wo.fromBufferAttribute(this,t),wo.transformDirection(e),this.setXYZ(t,wo.x,wo.y,wo.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.itemSize+t];return this.normalized&&(n=Si(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=_i(n,this.array)),this.array[e*this.itemSize+t]=n,this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=Si(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=Si(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=Si(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=Si(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array),i=_i(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==li&&(e.usage=this.usage),e}}])}(),_o=function(e){function t(e,n,r){return v(this,t),T(this,t,[new Uint16Array(e),n,r])}return C(t,e),p(t)}(So),Mo=function(e){function t(e,n,r){return v(this,t),T(this,t,[new Uint32Array(e),n,r])}return C(t,e),p(t)}(So),To=function(e){function t(e,n,r){return v(this,t),T(this,t,[new Float32Array(e),n,r])}return C(t,e),p(t)}(So),Ao=0,Co=new Ca,Po=new eo,Ro=new $i,No=new na,Oo=new na,Lo=new $i,Do=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isBufferGeometry=!0,Object.defineProperty(e,"id",{value:Ao++}),e.uuid=yi(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return C(t,e),p(t,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Ci(e)?Mo:_o)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Ti).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Co.makeRotationFromQuaternion(e),this.applyMatrix4(Co),this}},{key:"rotateX",value:function(e){return Co.makeRotationX(e),this.applyMatrix4(Co),this}},{key:"rotateY",value:function(e){return Co.makeRotationY(e),this.applyMatrix4(Co),this}},{key:"rotateZ",value:function(e){return Co.makeRotationZ(e),this.applyMatrix4(Co),this}},{key:"translate",value:function(e,t,n){return Co.makeTranslation(e,t,n),this.applyMatrix4(Co),this}},{key:"scale",value:function(e,t,n){return Co.makeScale(e,t,n),this.applyMatrix4(Co),this}},{key:"lookAt",value:function(e){return Po.lookAt(e),Po.updateMatrix(),this.applyMatrix4(Po.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ro).negate(),this.translate(Ro.x,Ro.y,Ro.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new To(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new na);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new $i(-1/0,-1/0,-1/0),new $i(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];No.setFromBufferAttribute(i),this.morphTargetsRelative?(Lo.addVectors(this.boundingBox.min,No.min),this.boundingBox.expandByPoint(Lo),Lo.addVectors(this.boundingBox.max,No.max),this.boundingBox.expandByPoint(Lo)):(this.boundingBox.expandByPoint(No.min),this.boundingBox.expandByPoint(No.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new xa);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new $i,1/0);if(e){var n=this.boundingSphere.center;if(No.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];Oo.setFromBufferAttribute(a),this.morphTargetsRelative?(Lo.addVectors(No.min,Oo.min),No.expandByPoint(Lo),Lo.addVectors(No.max,Oo.max),No.expandByPoint(Lo)):(No.expandByPoint(Oo.min),No.expandByPoint(Oo.max))}No.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)Lo.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Lo));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)Lo.fromBufferAttribute(h,f),d&&(Ro.fromBufferAttribute(e,f),Lo.add(Ro)),o=Math.max(o,n.distanceToSquared(Lo));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new So(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,u=[],l=[],c=0;c<o;c++)u[c]=new $i,l[c]=new $i;var h=new $i,d=new $i,f=new $i,p=new Mi,v=new Mi,g=new Mi,m=new $i,y=new $i,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,E=b.length;x<E;++x)for(var w=b[x],k=w.start,S=k,_=k+w.count;S<_;S+=3)I(n[S+0],n[S+1],n[S+2]);for(var M=new $i,T=new $i,A=new $i,C=new $i,P=0,R=b.length;P<R;++P)for(var N=b[P],O=N.start,L=O,D=O+N.count;L<D;L+=3)F(n[L+0]),F(n[L+1]),F(n[L+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,n){h.fromArray(r,3*e),d.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),g.fromArray(a,2*n),d.sub(h),f.sub(h),v.sub(p),g.sub(p);var i=1/(v.x*g.y-g.x*v.y);isFinite(i)&&(m.copy(d).multiplyScalar(g.y).addScaledVector(f,-v.y).multiplyScalar(i),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-g.x).multiplyScalar(i),u[e].add(m),u[t].add(m),u[n].add(m),l[e].add(y),l[t].add(y),l[n].add(y))}function F(e){A.fromArray(i,3*e),C.copy(A);var t=u[e];M.copy(t),M.sub(A.multiplyScalar(A.dot(t))).normalize(),T.crossVectors(C,t);var n=T.dot(l[e])<0?-1:1;s[4*e]=M.x,s[4*e+1]=M.y,s[4*e+2]=M.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new So(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new $i,o=new $i,s=new $i,u=new $i,l=new $i,c=new $i,h=new $i,d=new $i;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),g=e.getX(f+1),m=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,g),s.fromBufferAttribute(t,m),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,m),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Lo.fromBufferAttribute(e,t),Lo.normalize(),e.setXYZ(t,Lo.x,Lo.y,Lo.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new So(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var n=new t,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);n.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,d=c.length;h<d;h++){var f=e(c[h],r);l.push(f)}n.morphAttributes[u]=l}n.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,g=p.length;v<g;v++){var m=p[v];n.addGroup(m.start,m.count,m.materialIndex)}return n}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var g=this.boundingSphere;return null!==g&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var g=e.boundingBox;null!==g&&(this.boundingBox=g.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(pi),Io=new Ca,Fo=new Aa,Uo=new xa,Bo=new $i,zo=new $i,Go=new $i,Ho=new $i,jo=new $i,Vo=new $i,Wo=new Mi,Xo=new Mi,Yo=new Mi,qo=new $i,Ko=new $i,Zo=new $i,Jo=new $i,Qo=new $i,$o=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Do,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo;return v(this,t),(e=T(this,t)).isMesh=!0,e.type="Mesh",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){Vo.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var l=o[s],c=i[s];0!==l&&(jo.fromBufferAttribute(c,e),a?Vo.addScaledVector(jo,l):Vo.addScaledVector(jo.sub(t),l))}t.add(Vo)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Uo.copy(n.boundingSphere),Uo.applyMatrix4(i),Fo.copy(e.ray).recast(e.near),!1===Uo.containsPoint(Fo.origin)){if(null===Fo.intersectSphere(Uo,Bo))return;if(Fo.origin.distanceToSquared(Bo)>Math.pow(e.far-e.near,2))return}Io.copy(i).invert(),Fo.copy(e.ray).applyMatrix4(Io),null!==n.boundingBox&&!1===Fo.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Fo)}}},{key:"_computeIntersections",value:function(e,t,n){var r,i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,u=i.attributes.uv,l=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==o)if(Array.isArray(a))for(var f=0,p=h.length;f<p;f++)for(var v=h[f],g=a[v.materialIndex],m=Math.max(v.start,d.start),y=Math.min(o.count,Math.min(v.start+v.count,d.start+d.count));m<y;m+=3){(r=es(this,g,e,n,u,l,c,o.getX(m),o.getX(m+1),o.getX(m+2)))&&(r.faceIndex=Math.floor(m/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(var b=Math.max(0,d.start),x=Math.min(o.count,d.start+d.count);b<x;b+=3){(r=es(this,a,e,n,u,l,c,o.getX(b),o.getX(b+1),o.getX(b+2)))&&(r.faceIndex=Math.floor(b/3),t.push(r))}else if(void 0!==s)if(Array.isArray(a))for(var E=0,w=h.length;E<w;E++)for(var k=h[E],S=a[k.materialIndex],_=Math.max(k.start,d.start),M=Math.min(s.count,Math.min(k.start+k.count,d.start+d.count));_<M;_+=3){(r=es(this,S,e,n,u,l,c,_,_+1,_+2))&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=k.materialIndex,t.push(r))}else for(var T=Math.max(0,d.start),A=Math.min(s.count,d.start+d.count);T<A;T+=3){(r=es(this,a,e,n,u,l,c,T,T+1,T+2))&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}])}(eo);function es(e,t,n,r,i,a,o,s,u,l){e.getVertexPosition(s,zo),e.getVertexPosition(u,Go),e.getVertexPosition(l,Ho);var c=function(e,t,n,r,i,a,o,s){if(null===(t.side===ar?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===ir,s)))return null;Qo.copy(s),Qo.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Qo);return u<n.near||u>n.far?null:{distance:u,point:Qo.clone(),object:e}}(e,t,n,r,zo,Go,Ho,Jo);if(c){i&&(Wo.fromBufferAttribute(i,s),Xo.fromBufferAttribute(i,u),Yo.fromBufferAttribute(i,l),c.uv=ho.getInterpolation(Jo,zo,Go,Ho,Wo,Xo,Yo,new Mi)),a&&(Wo.fromBufferAttribute(a,s),Xo.fromBufferAttribute(a,u),Yo.fromBufferAttribute(a,l),c.uv1=ho.getInterpolation(Jo,zo,Go,Ho,Wo,Xo,Yo,new Mi),c.uv2=c.uv1),o&&(qo.fromBufferAttribute(o,s),Ko.fromBufferAttribute(o,u),Zo.fromBufferAttribute(o,l),c.normal=ho.getInterpolation(Jo,zo,Go,Ho,qo,Ko,Zo,new $i),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));var h={a:s,b:u,c:l,normal:new $i,materialIndex:0};ho.getNormal(zo,Go,Ho,h.normal),c.face=h}return c}var ts=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;v(this,t),(e=T(this,t)).type="BoxGeometry",e.parameters={width:n,height:r,depth:i,widthSegments:a,heightSegments:o,depthSegments:s};var u=e;a=Math.floor(a),o=Math.floor(o),s=Math.floor(s);var l=[],c=[],h=[],d=[],f=0,p=0;function g(e,t,n,r,i,a,o,s,v,g,m){for(var y=a/v,b=o/g,x=a/2,E=o/2,w=s/2,k=v+1,S=g+1,_=0,M=0,T=new $i,A=0;A<S;A++)for(var C=A*b-E,P=0;P<k;P++){var R=P*y-x;T[e]=R*r,T[t]=C*i,T[n]=w,c.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,h.push(T.x,T.y,T.z),d.push(P/v),d.push(1-A/g),_+=1}for(var N=0;N<g;N++)for(var O=0;O<v;O++){var L=f+O+k*N,D=f+O+k*(N+1),I=f+(O+1)+k*(N+1),F=f+(O+1)+k*N;l.push(L,D,F),l.push(D,I,F),M+=6}u.addGroup(p,M,m),p+=M,f+=_}return g("z","y","x",-1,-1,i,r,n,s,o,0),g("z","y","x",1,-1,i,r,-n,s,o,1),g("x","z","y",1,1,n,i,r,a,s,2),g("x","z","y",1,-1,n,i,-r,a,s,3),g("x","y","z",1,-1,n,r,i,a,o,4),g("x","y","z",-1,-1,n,r,-i,a,o,5),e.setIndex(l),e.setAttribute("position",new To(c,3)),e.setAttribute("normal",new To(h,3)),e.setAttribute("uv",new To(d,2)),e}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}])}(Do);function ns(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function rs(e){for(var t={},n=0;n<e.length;n++){var r=ns(e[n]);for(var i in r)t[i]=r[i]}return t}function is(e){return null===e.getRenderTarget()?e.outputColorSpace:Ui.workingColorSpace}var as={clone:ns,merge:rs},os=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isShaderMaterial=!0,n.type="ShaderMaterial",n.defines={},n.uniforms={},n.uniformsGroups=[],n.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",n.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",n.linewidth=1,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.lights=!1,n.clipping=!1,n.forceSinglePass=!0,n.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},n.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},n.index0AttributeName=void 0,n.uniformsNeedUpdate=!1,n.glslVersion=null,void 0!==e&&n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ns(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);for(var r in n.glslVersion=this.glslVersion,n.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?n.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?n.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?n.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?n.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?n.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?n.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?n.uniforms[r]={type:"m4",value:i.toArray()}:n.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(n.extensions=a),n}}])}(xo),ss=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Ca,e.projectionMatrix=new Ca,e.projectionMatrixInverse=new Ca,e.coordinateSystem=di,e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return Xn(S(t.prototype),"getWorldDirection",this).call(this,e).negate()}},{key:"updateMatrixWorld",value:function(e){Xn(S(t.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,n){Xn(S(t.prototype),"updateWorldMatrix",this).call(this,e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(eo),us=new $i,ls=new Mi,cs=new Mi,hs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return v(this,t),(e=T(this,t)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=n,e.zoom=1,e.near=i,e.far=a,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*mi*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*gi*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*mi*Math.atan(Math.tan(.5*gi*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,t,n){us.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(us.x,us.y).multiplyScalar(-e/us.z),us.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(us.x,us.y).multiplyScalar(-e/us.z)}},{key:"getViewSize",value:function(e,t){return this.getViewBounds(e,ls,cs),t.subVectors(cs,ls)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*gi*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}])}(ss),ds=-90,fs=function(e){function t(e,n,r){var i;v(this,t),(i=T(this,t)).type="CubeCamera",i.renderTarget=r,i.coordinateSystem=null,i.activeMipmapLevel=0;var a=new hs(ds,1,e,n);a.layers=i.layers,i.add(a);var o=new hs(ds,1,e,n);o.layers=i.layers,i.add(o);var s=new hs(ds,1,e,n);s.layers=i.layers,i.add(s);var u=new hs(ds,1,e,n);u.layers=i.layers,i.add(u);var l=new hs(ds,1,e,n);l.layers=i.layers,i.add(l);var c=new hs(ds,1,e,n);return c.layers=i.layers,i.add(c),i}return C(t,e),p(t,[{key:"updateCoordinateSystem",value:function(){var e,t=this.coordinateSystem,n=this.children.concat(),r=x(n,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=D(n);try{for(c.s();!(e=c.n()).done;){var h=e.value;this.remove(h)}}catch(v){c.e(v)}finally{c.f()}if(t===di)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(t!==fi)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}var d,f=D(n);try{for(f.s();!(d=f.n()).done;){var p=d.value;this.add(p),p.updateMatrixWorld()}}catch(v){f.e(v)}finally{f.f()}}},{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var i=x(this.children,6),a=i[0],o=i[1],s=i[2],u=i[3],l=i[4],c=i[5],h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;var v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(h,d,f),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}])}(eo),ps=function(e){function t(e,n,r,i,a,o,s,u,l,c){var h;return v(this,t),(h=T(this,t,[e=void 0!==e?e:[],n=void 0!==n?n:mr,r,i,a,o,s,u,l,c])).isCubeTexture=!0,h.flipY=!1,h}return C(t,e),p(t,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}])}(Xi),vs=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),(e=T(this,t,[n,n,r])).isWebGLCubeRenderTarget=!0;var i={width:n,height:n,depth:1},a=[i,i,i,i,i,i];return void 0!==r.encoding&&(Ni("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Qr?ei:$r),e.texture=new ps(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,e.texture.minFilter=void 0!==r.minFilter?r.minFilter:Ar,e}return C(t,e),p(t,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new ts(5,5,5),o=new os({name:"CubemapFromEquirect",uniforms:ns(n),vertexShader:r,fragmentShader:i,side:ar,blending:0});o.uniforms.tEquirect.value=t;var s=new $o(a,o),u=t.minFilter;return t.minFilter===Pr&&(t.minFilter=Ar),new fs(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}])}(Ki),gs=new $i,ms=new $i,ys=new Ti,bs=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $i(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.isPlane=!0,this.normal=t,this.constant=n}),[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=gs.subVectors(n,t).cross(ms.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(gs),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||ys.getNormalMatrix(e),r=this.coplanarPoint(gs).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),xs=new xa,Es=new $i,ws=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new bs,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new bs,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new bs,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new bs;v(this,e),this.planes=[t,n,r,i,a,o]}),[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di,n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],v=r[11],g=r[12],m=r[13],y=r[14],b=r[15];if(n[0].setComponents(s-i,h-u,v-d,b-g).normalize(),n[1].setComponents(s+i,h+u,v+d,b+g).normalize(),n[2].setComponents(s+a,h+l,v+f,b+m).normalize(),n[3].setComponents(s-a,h-l,v-f,b-m).normalize(),n[4].setComponents(s-o,h-c,v-p,b-y).normalize(),t===di)n[5].setComponents(s+o,h+c,v+p,b+y).normalize();else{if(t!==fi)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,c,p,y).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),xs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),xs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(xs)}},{key:"intersectsSprite",value:function(e){return xs.center.set(0,0,0),xs.radius=.7071067811865476,xs.applyMatrix4(e.matrixWorld),this.intersectsSphere(xs)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Es.x=r.normal.x>0?e.max.x:e.min.x,Es.y=r.normal.y>0?e.max.y:e.min.y,Es.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Es)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}();function ks(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ss(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);if(void 0===o)r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=a.byteLength,u=e.createBuffer();if(e.bindBuffer(r,u),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=e.FLOAT;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=e.HALF_FLOAT}else i=e.UNSIGNED_SHORT;else if(a instanceof Int16Array)i=e.SHORT;else if(a instanceof Uint32Array)i=e.UNSIGNED_INT;else if(a instanceof Int32Array)i=e.INT;else if(a instanceof Int8Array)i=e.BYTE;else if(a instanceof Uint8Array)i=e.UNSIGNED_BYTE;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=e.UNSIGNED_BYTE}return{buffer:u,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,i));else if(o.version<t.version){if(o.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){var a=r.array,o=r._updateRange,s=r.updateRanges;if(e.bindBuffer(i,t),-1===o.count&&0===s.length&&e.bufferSubData(i,0,a),0!==s.length){for(var u=0,l=s.length;u<l;u++){var c=s[u];n?e.bufferSubData(i,c.start*a.BYTES_PER_ELEMENT,a,c.start,c.count):e.bufferSubData(i,c.start*a.BYTES_PER_ELEMENT,a.subarray(c.start,c.start+c.count))}r.clearUpdateRanges()}-1!==o.count&&(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version}}}}}var _s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,t),(e=T(this,t)).type="PlaneGeometry",e.parameters={width:n,height:r,widthSegments:i,heightSegments:a};for(var o=n/2,s=r/2,u=Math.floor(i),l=Math.floor(a),c=u+1,h=l+1,d=n/u,f=r/l,p=[],g=[],m=[],y=[],b=0;b<h;b++)for(var x=b*f-s,E=0;E<c;E++){var w=E*d-o;g.push(w,-x,0),m.push(0,0,1),y.push(E/u),y.push(1-b/l)}for(var k=0;k<l;k++)for(var S=0;S<u;S++){var _=S+c*k,M=S+c*(k+1),A=S+1+c*(k+1),C=S+1+c*k;p.push(_,M,C),p.push(M,A,C)}return e.setIndex(p),e.setAttribute("position",new To(g,3)),e.setAttribute("normal",new To(m,3)),e.setAttribute("uv",new To(y,2)),e}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new t(e.width,e.height,e.widthSegments,e.heightSegments)}}])}(Do),Ms={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ts={common:{diffuse:{value:new mo(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ti},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ti}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ti}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ti}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ti},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ti},normalScale:{value:new Mi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ti},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ti}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ti}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ti}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mo(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mo(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0},uvTransform:{value:new Ti}},sprite:{diffuse:{value:new mo(16777215)},opacity:{value:1},center:{value:new Mi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ti},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0}}},As={basic:{uniforms:rs([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.fog]),vertexShader:Ms.meshbasic_vert,fragmentShader:Ms.meshbasic_frag},lambert:{uniforms:rs([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.fog,Ts.lights,{emissive:{value:new mo(0)}}]),vertexShader:Ms.meshlambert_vert,fragmentShader:Ms.meshlambert_frag},phong:{uniforms:rs([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.fog,Ts.lights,{emissive:{value:new mo(0)},specular:{value:new mo(1118481)},shininess:{value:30}}]),vertexShader:Ms.meshphong_vert,fragmentShader:Ms.meshphong_frag},standard:{uniforms:rs([Ts.common,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.roughnessmap,Ts.metalnessmap,Ts.fog,Ts.lights,{emissive:{value:new mo(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ms.meshphysical_vert,fragmentShader:Ms.meshphysical_frag},toon:{uniforms:rs([Ts.common,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.gradientmap,Ts.fog,Ts.lights,{emissive:{value:new mo(0)}}]),vertexShader:Ms.meshtoon_vert,fragmentShader:Ms.meshtoon_frag},matcap:{uniforms:rs([Ts.common,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.fog,{matcap:{value:null}}]),vertexShader:Ms.meshmatcap_vert,fragmentShader:Ms.meshmatcap_frag},points:{uniforms:rs([Ts.points,Ts.fog]),vertexShader:Ms.points_vert,fragmentShader:Ms.points_frag},dashed:{uniforms:rs([Ts.common,Ts.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ms.linedashed_vert,fragmentShader:Ms.linedashed_frag},depth:{uniforms:rs([Ts.common,Ts.displacementmap]),vertexShader:Ms.depth_vert,fragmentShader:Ms.depth_frag},normal:{uniforms:rs([Ts.common,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,{opacity:{value:1}}]),vertexShader:Ms.meshnormal_vert,fragmentShader:Ms.meshnormal_frag},sprite:{uniforms:rs([Ts.sprite,Ts.fog]),vertexShader:Ms.sprite_vert,fragmentShader:Ms.sprite_frag},background:{uniforms:{uvTransform:{value:new Ti},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ms.background_vert,fragmentShader:Ms.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ms.backgroundCube_vert,fragmentShader:Ms.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ms.cube_vert,fragmentShader:Ms.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ms.equirect_vert,fragmentShader:Ms.equirect_frag},distanceRGBA:{uniforms:rs([Ts.common,Ts.displacementmap,{referencePosition:{value:new $i},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ms.distanceRGBA_vert,fragmentShader:Ms.distanceRGBA_frag},shadow:{uniforms:rs([Ts.lights,Ts.fog,{color:{value:new mo(0)},opacity:{value:1}}]),vertexShader:Ms.shadow_vert,fragmentShader:Ms.shadow_frag}};As.physical={uniforms:rs([As.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ti},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ti},clearcoatNormalScale:{value:new Mi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ti},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ti},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ti},sheen:{value:0},sheenColor:{value:new mo(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ti},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ti},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ti},transmissionSamplerSize:{value:new Mi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ti},attenuationDistance:{value:0},attenuationColor:{value:new mo(0)},specularColor:{value:new mo(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ti},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ti},anisotropyVector:{value:new Mi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ti}}]),vertexShader:Ms.meshphysical_vert,fragmentShader:Ms.meshphysical_frag};var Cs={r:0,b:0,g:0};function Ps(e,t,n,r,i,a,o){var s,u,l=new mo(0),c=!0===a?0:1,h=null,d=0,f=null;function p(t,n){t.getRGB(Cs,is(e)),r.buffers.color.setClear(Cs.r,Cs.g,Cs.b,n,o)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),p(l,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(l,c=e)},render:function(a,v){var g=!1,m=!0===v.isScene?v.background:null;m&&m.isTexture&&(m=(v.backgroundBlurriness>0?n:t).get(m)),null===m?p(l,c):m&&m.isColor&&(p(m,1),g=!0);var y=e.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===Er)?(void 0===u&&((u=new $o(new ts(1,1,1),new os({name:"BackgroundCubeMaterial",uniforms:ns(As.backgroundCube.uniforms),vertexShader:As.backgroundCube.vertexShader,fragmentShader:As.backgroundCube.fragmentShader,side:ar,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=m,u.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=Ui.getTransfer(m.colorSpace)!==ai,h===m&&d===m.version&&f===e.toneMapping||(u.material.needsUpdate=!0,h=m,d=m.version,f=e.toneMapping),u.layers.enableAll(),a.unshift(u,u.geometry,u.material,0,0,null)):m&&m.isTexture&&(void 0===s&&((s=new $o(new _s(2,2),new os({name:"BackgroundMaterial",uniforms:ns(As.background.uniforms),vertexShader:As.background.vertexShader,fragmentShader:As.background.fragmentShader,side:ir,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=m,s.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,s.material.toneMapped=Ui.getTransfer(m.colorSpace)!==ai,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),h===m&&d===m.version&&f===e.toneMapping||(s.material.needsUpdate=!0,h=m,d=m.version,f=e.toneMapping),s.layers.enableAll(),a.unshift(s,s.geometry,s.material,0,0,null))}}}function Rs(e,t,n,r){var i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),l=u,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){g(e,0)}function g(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function b(){x(),c=!0,l!==u&&h((l=u).object)}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,d,b,x){var E=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(b,d,u);l!==w&&h((l=w).object),E=function(e,t,n,r){var i=l.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=i[u],h=a[u];if(void 0===h&&("instanceMatrix"===u&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(h=e.instanceColor)),void 0===c)return!0;if(c.attribute!==h)return!0;if(h&&c.data!==h.data)return!0;o++}}return l.attributesNum!==o||l.index!==r}(i,b,d,x),E&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=a[u];void 0===c&&("instanceMatrix"===u&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(c=e.instanceColor));var h={};h.attribute=c,c&&c.data&&(h.data=c.data),i[u]=h,o++}}l.attributes=i,l.attributesNum=o,l.index=r}(i,b,d,x)}else{var k=!0===u.wireframe;l.geometry===b.id&&l.program===d.id&&l.wireframe===k||(l.geometry=b.id,l.program=d.id,l.wireframe=k,E=!0)}null!==x&&n.update(x,e.ELEMENT_ARRAY_BUFFER),(E||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var d=l[h];if(d.location>=0){var f=u[h];if(void 0===f&&("instanceMatrix"===h&&i.instanceMatrix&&(f=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(f=i.instanceColor)),void 0!==f){var b=f.normalized,x=f.itemSize,E=n.get(f);if(void 0===E)continue;var w=E.buffer,k=E.type,S=E.bytesPerElement,_=!0===r.isWebGL2&&(k===e.INT||k===e.UNSIGNED_INT||f.gpuType===Or);if(f.isInterleavedBufferAttribute){var M=f.data,T=M.stride,A=f.offset;if(M.isInstancedInterleavedBuffer){for(var C=0;C<d.locationSize;C++)g(d.location+C,M.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var P=0;P<d.locationSize;P++)v(d.location+P);e.bindBuffer(e.ARRAY_BUFFER,w);for(var R=0;R<d.locationSize;R++)y(d.location+R,x/d.locationSize,k,b,T*S,(A+x/d.locationSize*R)*S,_)}else{if(f.isInstancedBufferAttribute){for(var N=0;N<d.locationSize;N++)g(d.location+N,f.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var O=0;O<d.locationSize;O++)v(d.location+O);e.bindBuffer(e.ARRAY_BUFFER,w);for(var L=0;L<d.locationSize;L++)y(d.location+L,x/d.locationSize,k,b,x*S,x/d.locationSize*L*S,_)}}else if(void 0!==c){var D=c[h];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(d.location,D);break;case 3:e.vertexAttrib3fv(d.location,D);break;case 4:e.vertexAttrib4fv(d.location,D);break;default:e.vertexAttrib1fv(d.location,D)}}}}m()}(i,u,d,b),null!==x&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){for(var e in b(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:m}}function Ns(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}},this.renderMultiDraw=function(e,r,a){if(0!==a){var o=t.get("WEBGL_multi_draw");if(null===o)for(var s=0;s<a;s++)this.render(e[s],r[s]);else{o.multiDrawArraysWEBGL(i,e,0,r,0,a);for(var u=0,l=0;l<a;l++)u+=r[l];n.update(u,i,1)}}}}function Os(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),v=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function Ls(e){var t=this,n=null,r=0,i=!1,a=!1,o=new bs,s=new Ti,u={value:null,needsUpdate:!1};function l(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,f=r;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(l,f),l[f+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(o,s,c){var h=o.clippingPlanes,d=o.clipIntersection,f=o.clipShadows,p=e.get(o);if(!i||null===h||0===h.length||a&&!f)a?l(null):function(){u.value!==n&&(u.value=n,u.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{var v=a?0:r,g=4*v,m=p.clippingState||null;u.value=m,m=l(h,s,g,c);for(var y=0;y!==g;++y)m[y]=n[y];p.clippingState=m,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function Ds(e){var t=new WeakMap;function n(e,t){return t===br?e.mapping=mr:t===xr&&(e.mapping=yr),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping;if(a===br||a===xr){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new vs(o.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var Is=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return v(this,t),(e=T(this,t)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=n,e.right=r,e.top=i,e.bottom=a,e.near=o,e.far=s,e.updateProjectionMatrix(),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}])}(ss),Fs=[.125,.215,.35,.446,.526,.582],Us=20,Bs=new Is,zs=new mo,Gs=null,Hs=0,js=0,Vs=(1+Math.sqrt(5))/2,Ws=1/Vs,Xs=[new $i(1,1,1),new $i(-1,1,1),new $i(1,1,-1),new $i(-1,1,-1),new $i(0,Vs,Ws),new $i(0,Vs,-Ws),new $i(Ws,0,Vs),new $i(-Ws,0,Vs),new $i(Vs,Ws,0),new $i(-Vs,Ws,0)],Ys=function(){return p((function e(t){v(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}),[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Gs=this._renderer.getRenderTarget(),Hs=this._renderer.getActiveCubeFace(),js=this._renderer.getActiveMipmapLevel(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=Js(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=Zs(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(Gs,Hs,js),e.scissorTest=!1,Ks(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===mr||e.mapping===yr?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gs=this._renderer.getRenderTarget(),Hs=this._renderer.getActiveCubeFace(),js=this._renderer.getActiveMipmapLevel();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ar,minFilter:Ar,generateMipmaps:!1,type:Ir,format:Ur,colorSpace:ti,depthBuffer:!1},r=qs(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=qs(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+Fs.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-4?u=Fs[o-e+4-1]:0===o&&(u=0),r.push(u);for(var l=1/(s-2),c=-l,h=1+l,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,g=2,m=1,y=new Float32Array(v*p*f),b=new Float32Array(g*p*f),x=new Float32Array(m*p*f),E=0;E<f;E++){var w=E%3*2/3-1,k=E>2?0:-1,S=[w,k,0,w+2/3,k,0,w+2/3,k+1,0,w,k,0,w+2/3,k+1,0,w,k+1,0];y.set(S,v*p*E),b.set(d,g*p*E);var _=[E,E,E,E,E,E];x.set(_,m*p*E)}var M=new Do;M.setAttribute("position",new So(y,v)),M.setAttribute("uv",new So(b,g)),M.setAttribute("faceIndex",new So(x,m)),t.push(M),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(Us),i=new $i(0,1,0),a=new os({name:"SphericalGaussianBlur",defines:{n:Us,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new $o(this._lodPlanes[0],e);this._renderer.compile(t,Bs)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new hs(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(zs),s.toneMapping=cr,s.autoClear=!1;var c=new Eo({name:"PMREM.Background",side:ar,depthWrite:!1,depthTest:!1}),h=new $o(new ts,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(zs),d=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var g=this._cubeSize;Ks(r,v*g,p>2?g:0,g,g),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=f}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===mr||e.mapping===yr;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Js()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Zs());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new $o(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;Ks(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Bs)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Xs[(r-1)%Xs.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new $o(this._lodPlanes[r],u),c=u.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):Us;p>Us&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Us));for(var v=[],g=0,m=0;m<Us;++m){var y=m/f,b=Math.exp(-y*y/2);v.push(b),0===m?g+=b:m<p&&(g+=2*b)}for(var x=0;x<v.length;x++)v[x]=v[x]/g;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var E=this._lodMax;c.dTheta.value=d,c.mipInt.value=E-n;var w=this._sizeLods[r];Ks(t,3*w*(r>E-4?r-E+4:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(l,Bs)}}])}();function qs(e,t,n){var r=new Ki(e,t,n);return r.texture.mapping=Er,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ks(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Zs(){return new os({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Js(){return new os({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Qs(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===br||a===xr,s=a===mr||a===yr;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new Ys(e)),u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var l=i.image;if(o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)){null===n&&(n=new Ys(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function $s(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function eu(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);for(var l in s.morphAttributes)for(var c=s.morphAttributes[l],h=0,d=c.length;h<d;h++)t.remove(c[h]);s.removeEventListener("dispose",o),delete i[s.id];var f=a.get(s);f&&(t.remove(f),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],d=s[u+2];n.push(c,h,h,d,d,c)}}else{if(void 0===i)return;var f=i.array;o=i.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var g=p+0,m=p+1,y=p+2;n.push(g,m,m,y,y,g)}}var b=new(Ci(n)?Mo:_o)(n,1);b.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){var r=n.attributes;for(var i in r)t.update(r[i],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function tu(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*o,l),n.update(u,i,l)}},this.renderMultiDraw=function(e,r,s){if(0!==s){var u=t.get("WEBGL_multi_draw");if(null===u)for(var l=0;l<s;l++)this.render(e[l]/o,r[l]);else{u.multiDrawElementsWEBGL(i,r,0,a,e,0,s);for(var c=0,h=0;h<s;h++)c+=r[h];n.update(c,i,1)}}}}function nu(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ru(e,t){return e[0]-t[0]}function iu(e,t){return Math.abs(t[1])-Math.abs(e[1])}function au(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new Yi,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c){var h=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=void 0!==d?d.length:0,p=a.get(l);if(void 0===p||p.count!==f){var v=function(){M.dispose(),a.delete(l),l.removeEventListener("dispose",v)};void 0!==p&&p.texture.dispose();var g=void 0!==l.morphAttributes.position,m=void 0!==l.morphAttributes.normal,y=void 0!==l.morphAttributes.color,b=l.morphAttributes.position||[],x=l.morphAttributes.normal||[],E=l.morphAttributes.color||[],w=0;!0===g&&(w=1),!0===m&&(w=2),!0===y&&(w=3);var k=l.attributes.position.count*w,S=1;k>t.maxTextureSize&&(S=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);var _=new Float32Array(k*S*4*f),M=new Zi(_,k,S,f);M.type=Dr,M.needsUpdate=!0;for(var T=4*w,A=0;A<f;A++)for(var C=b[A],P=x[A],R=E[A],N=k*S*4*A,O=0;O<C.count;O++){var L=O*T;!0===g&&(o.fromBufferAttribute(C,O),_[N+L+0]=o.x,_[N+L+1]=o.y,_[N+L+2]=o.z,_[N+L+3]=0),!0===m&&(o.fromBufferAttribute(P,O),_[N+L+4]=o.x,_[N+L+5]=o.y,_[N+L+6]=o.z,_[N+L+7]=0),!0===y&&(o.fromBufferAttribute(R,O),_[N+L+8]=o.x,_[N+L+9]=o.y,_[N+L+10]=o.z,_[N+L+11]=4===R.itemSize?o.w:1)}p={count:f,texture:M,size:new Mi(k,S)},a.set(l,p),l.addEventListener("dispose",v)}for(var D=0,I=0;I<h.length;I++)D+=h[I];var F=l.morphTargetsRelative?1:1-D;c.getUniforms().setValue(e,"morphTargetBaseInfluence",F),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var U=void 0===h?0:h.length,B=r[l.id];if(void 0===B||B.length!==U){B=[];for(var z=0;z<U;z++)B[z]=[z,0];r[l.id]=B}for(var G=0;G<U;G++){var H=B[G];H[0]=G,H[1]=h[G]}B.sort(iu);for(var j=0;j<8;j++)j<U&&B[j][1]?(s[j][0]=B[j][0],s[j][1]=B[j][1]):(s[j][0]=Number.MAX_SAFE_INTEGER,s[j][1]=0);s.sort(ru);for(var V=l.morphAttributes.position,W=l.morphAttributes.normal,X=0,Y=0;Y<8;Y++){var q=s[Y],K=q[0],Z=q[1];K!==Number.MAX_SAFE_INTEGER&&Z?(V&&l.getAttribute("morphTarget"+Y)!==V[K]&&l.setAttribute("morphTarget"+Y,V[K]),W&&l.getAttribute("morphNormal"+Y)!==W[K]&&l.setAttribute("morphNormal"+Y,W[K]),i[Y]=Z,X+=Z):(V&&!0===l.hasAttribute("morphTarget"+Y)&&l.deleteAttribute("morphTarget"+Y),W&&!0===l.hasAttribute("morphNormal"+Y)&&l.deleteAttribute("morphNormal"+Y),i[Y]=0)}var J=l.morphTargetsRelative?1:1-X;c.getUniforms().setValue(e,"morphTargetBaseInfluence",J),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function ou(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){var s=r.render.frame,u=o.geometry,l=t.get(o,u);if(i.get(l)!==s&&(t.update(l),i.set(l,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){var c=o.skeleton;i.get(c)!==s&&(c.update(),i.set(c,s))}return l},dispose:function(){i=new WeakMap}}}var su=function(e){function t(e,n,r,i,a,o,s,u,l,c){var h;if(v(this,t),(c=void 0!==c?c:Br)!==Br&&c!==zr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&c===Br&&(r=Lr),void 0===r&&c===zr&&(r=Fr),(h=T(this,t,[null,i,a,o,s,u,c,r,l])).isDepthTexture=!0,h.image={width:e,height:n},h.magFilter=void 0!==s?s:_r,h.minFilter=void 0!==u?u:_r,h.flipY=!1,h.generateMipmaps=!1,h.compareFunction=null,h}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}])}(Xi),uu=new Xi,lu=new su(1,1);lu.compareFunction=515;var cu=new Zi,hu=new Ji,du=new ps,fu=[],pu=[],vu=new Float32Array(16),gu=new Float32Array(9),mu=new Float32Array(4);function yu(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=fu[i];if(void 0===a&&(a=new Float32Array(i),fu[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function bu(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function xu(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Eu(e,t){var n=pu[t];void 0===n&&(n=new Int32Array(t),pu[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function wu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ku(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bu(n,t))return;e.uniform2fv(this.addr,t),xu(n,t)}}function Su(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(bu(n,t))return;e.uniform3fv(this.addr,t),xu(n,t)}}function _u(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bu(n,t))return;e.uniform4fv(this.addr,t),xu(n,t)}}function Mu(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),xu(n,t)}else{if(bu(n,r))return;mu.set(r),e.uniformMatrix2fv(this.addr,!1,mu),xu(n,r)}}function Tu(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),xu(n,t)}else{if(bu(n,r))return;gu.set(r),e.uniformMatrix3fv(this.addr,!1,gu),xu(n,r)}}function Au(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),xu(n,t)}else{if(bu(n,r))return;vu.set(r),e.uniformMatrix4fv(this.addr,!1,vu),xu(n,r)}}function Cu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Pu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bu(n,t))return;e.uniform2iv(this.addr,t),xu(n,t)}}function Ru(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bu(n,t))return;e.uniform3iv(this.addr,t),xu(n,t)}}function Nu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bu(n,t))return;e.uniform4iv(this.addr,t),xu(n,t)}}function Ou(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Lu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bu(n,t))return;e.uniform2uiv(this.addr,t),xu(n,t)}}function Du(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bu(n,t))return;e.uniform3uiv(this.addr,t),xu(n,t)}}function Iu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bu(n,t))return;e.uniform4uiv(this.addr,t),xu(n,t)}}function Fu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);var a=this.type===e.SAMPLER_2D_SHADOW?lu:uu;n.setTexture2D(t||a,i)}function Uu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||hu,i)}function Bu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||du,i)}function zu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||cu,i)}function Gu(e,t){e.uniform1fv(this.addr,t)}function Hu(e,t){var n=yu(t,this.size,2);e.uniform2fv(this.addr,n)}function ju(e,t){var n=yu(t,this.size,3);e.uniform3fv(this.addr,n)}function Vu(e,t){var n=yu(t,this.size,4);e.uniform4fv(this.addr,n)}function Wu(e,t){var n=yu(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Xu(e,t){var n=yu(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Yu(e,t){var n=yu(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function qu(e,t){e.uniform1iv(this.addr,t)}function Ku(e,t){e.uniform2iv(this.addr,t)}function Zu(e,t){e.uniform3iv(this.addr,t)}function Ju(e,t){e.uniform4iv(this.addr,t)}function Qu(e,t){e.uniform1uiv(this.addr,t)}function $u(e,t){e.uniform2uiv(this.addr,t)}function el(e,t){e.uniform3uiv(this.addr,t)}function tl(e,t){e.uniform4uiv(this.addr,t)}function nl(e,t,n){var r=this.cache,i=t.length,a=Eu(n,i);bu(r,a)||(e.uniform1iv(this.addr,a),xu(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||uu,a[o])}function rl(e,t,n){var r=this.cache,i=t.length,a=Eu(n,i);bu(r,a)||(e.uniform1iv(this.addr,a),xu(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||hu,a[o])}function il(e,t,n){var r=this.cache,i=t.length,a=Eu(n,i);bu(r,a)||(e.uniform1iv(this.addr,a),xu(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||du,a[o])}function al(e,t,n){var r=this.cache,i=t.length,a=Eu(n,i);bu(r,a)||(e.uniform1iv(this.addr,a),xu(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||cu,a[o])}var ol=p((function e(t,n,r){v(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=function(e){switch(e){case 5126:return wu;case 35664:return ku;case 35665:return Su;case 35666:return _u;case 35674:return Mu;case 35675:return Tu;case 35676:return Au;case 5124:case 35670:return Cu;case 35667:case 35671:return Pu;case 35668:case 35672:return Ru;case 35669:case 35673:return Nu;case 5125:return Ou;case 36294:return Lu;case 36295:return Du;case 36296:return Iu;case 35678:case 36198:case 36298:case 36306:case 35682:return Fu;case 35679:case 36299:case 36307:return Uu;case 35680:case 36300:case 36308:case 36293:return Bu;case 36289:case 36303:case 36311:case 36292:return zu}}(n.type)})),sl=p((function e(t,n,r){v(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function(e){switch(e){case 5126:return Gu;case 35664:return Hu;case 35665:return ju;case 35666:return Vu;case 35674:return Wu;case 35675:return Xu;case 35676:return Yu;case 5124:case 35670:return qu;case 35667:case 35671:return Ku;case 35668:case 35672:return Zu;case 35669:case 35673:return Ju;case 5125:return Qu;case 36294:return $u;case 36295:return el;case 36296:return tl;case 35678:case 36198:case 36298:case 36306:case 35682:return nl;case 35679:case 36299:case 36307:return rl;case 35680:case 36300:case 36308:case 36293:return il;case 36289:case 36303:case 36311:case 36292:return al}}(n.type)})),ul=function(){return p((function e(t){v(this,e),this.id=t,this.seq=[],this.map={}}),[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}])}(),ll=/(\w+)(\])?(\[|\.)?/g;function cl(e,t){e.seq.push(t),e.map[t.id]=t}function hl(e,t,n){var r=e.name,i=r.length;for(ll.lastIndex=0;;){var a=ll.exec(r),o=ll.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){cl(n,void 0===l?new ol(s,e,t):new sl(s,e,t));break}var c=n.map[s];void 0===c&&cl(n,c=new ul(s)),n=c}}var dl=function(){return p((function e(t,n){v(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=t.getActiveUniform(n,i);hl(a,t.getUniformLocation(n,a.name),this)}}),[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}])}();function fl(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var pl=37297,vl=0;function gl(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function ml(e,t){var n=function(e){var t,n=Ui.getPrimaries(Ui.workingColorSpace),r=Ui.getPrimaries(e);switch(n===r?t="":n===si&&r===oi?t="LinearDisplayP3ToLinearSRGB":n===oi&&r===si&&(t="LinearSRGBToLinearDisplayP3"),e){case ti:case ri:return[t,"LinearTransferOETF"];case ei:case ni:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[t,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function yl(e,t){var n;switch(t){case hr:n="Linear";break;case dr:n="Reinhard";break;case fr:n="OptimizedCineon";break;case pr:n="ACESFilmic";break;case gr:n="AgX";break;case vr:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function bl(e){return""!==e}function xl(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function El(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var wl=/^[ \t]*#include +<([\w\d./]+)>/gm;function kl(e){return e.replace(wl,_l)}var Sl=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function _l(e,t){var n=Ms[t];if(void 0===n){var r=Sl.get(t);if(void 0===r)throw new Error("Can not resolve #include <"+t+">");n=Ms[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r)}return kl(n)}var Ml=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tl(e){return e.replace(Ml,Al)}function Al(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Cl(e){var t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\t");return e.isWebGL2&&(t+="precision ".concat(e.precision," sampler3D;\n\t\tprecision ").concat(e.precision," sampler2DArray;\n\t\tprecision ").concat(e.precision," sampler2DShadow;\n\t\tprecision ").concat(e.precision," samplerCubeShadow;\n\t\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\t\tprecision ").concat(e.precision," isampler2D;\n\t\tprecision ").concat(e.precision," isampler3D;\n\t\tprecision ").concat(e.precision," isamplerCube;\n\t\tprecision ").concat(e.precision," isampler2DArray;\n\t\tprecision ").concat(e.precision," usampler2D;\n\t\tprecision ").concat(e.precision," usampler3D;\n\t\tprecision ").concat(e.precision," usamplerCube;\n\t\tprecision ").concat(e.precision," usampler2DArray;\n\t\t")),"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Pl(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===tr?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===nr?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===rr&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case mr:case yr:t="ENVMAP_TYPE_CUBE";break;case Er:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===yr&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case sr:t="ENVMAP_BLENDING_MULTIPLY";break;case ur:t="ENVMAP_BLENDING_MIX";break;case lr:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||e.alphaToCoverage||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bl).join("\n")}(n),g=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(bl).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=o.createProgram(),b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(bl).join("\n")).length>0&&(i+="\n"),(a=[v,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(bl).join("\n")).length>0&&(a+="\n")):(i=[Cl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(bl).join("\n"),a=[v,Cl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==cr?"#define TONE_MAPPING":"",n.toneMapping!==cr?Ms.tonemapping_pars_fragment:"",n.toneMapping!==cr?yl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ms.colorspace_pars_fragment,ml("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(bl).join("\n")),u=El(u=xl(u=kl(u),n),n),l=El(l=xl(l=kl(l),n),n),u=Tl(u),l=Tl(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",i=[g,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===ci?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ci?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var x,E,w=b+i+u,k=b+a+l,S=fl(o,o.VERTEX_SHADER,w),_=fl(o,o.FRAGMENT_SHADER,k);function M(t){if(e.debug.checkShaderErrors){var n=o.getProgramInfoLog(y).trim(),r=o.getShaderInfoLog(S).trim(),s=o.getShaderInfoLog(_).trim(),u=!0,l=!0;if(!1===o.getProgramParameter(y,o.LINK_STATUS))if(u=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(o,y,S,_);else{var c=gl(o,S,"vertex"),h=gl(o,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(y,o.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+c+"\n"+h)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==s||(l=!1);l&&(t.diagnostics={runnable:u,programLog:n,vertexShader:{log:r,prefix:i},fragmentShader:{log:s,prefix:a}})}o.deleteShader(S),o.deleteShader(_),x=new dl(o,y),E=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;a.type===e.FLOAT_MAT2&&(s=2),a.type===e.FLOAT_MAT3&&(s=3),a.type===e.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,y)}o.attachShader(y,S),o.attachShader(y,_),void 0!==n.index0AttributeName?o.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y),this.getUniforms=function(){return void 0===x&&M(this),x},this.getAttributes=function(){return void 0===E&&M(this),E};var T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=o.getProgramParameter(y,pl)),T},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=vl++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=_,this}var Rl=0,Nl=function(){return p((function e(){v(this,e),this.shaderCache=new Map,this.materialCache=new Map}),[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=D(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(i){n.e(i)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Ol(e),t.set(e,n)),n}}])}(),Ol=p((function e(t){v(this,e),this.id=Rl++,this.code=t,this.usedTimes=0}));function Ll(e,t,n,r,i,a,o){var s=new za,u=new Nl,l=new Set,c=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures,p=i.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return l.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(a,s,c,m,y){var b=m.fog,x=y.geometry,E=a.isMeshStandardMaterial?m.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||E),k=w&&w.mapping===Er?w.image.height:null,S=v[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead.");var _,M,T,A,C=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,P=void 0!==C?C.length:0,R=0;if(void 0!==x.morphAttributes.position&&(R=1),void 0!==x.morphAttributes.normal&&(R=2),void 0!==x.morphAttributes.color&&(R=3),S){var N=As[S];_=N.vertexShader,M=N.fragmentShader}else _=a.vertexShader,M=a.fragmentShader,u.update(a),T=u.getVertexShaderID(a),A=u.getFragmentShaderID(a);var O=e.getRenderTarget(),L=!0===y.isInstancedMesh,D=!0===y.isBatchedMesh,I=!!a.map,F=!!a.matcap,U=!!w,B=!!a.aoMap,z=!!a.lightMap,G=!!a.bumpMap,H=!!a.normalMap,j=!!a.displacementMap,V=!!a.emissiveMap,W=!!a.metalnessMap,X=!!a.roughnessMap,Y=a.anisotropy>0,q=a.clearcoat>0,K=a.iridescence>0,Z=a.sheen>0,J=a.transmission>0,Q=Y&&!!a.anisotropyMap,$=q&&!!a.clearcoatMap,ee=q&&!!a.clearcoatNormalMap,te=q&&!!a.clearcoatRoughnessMap,ne=K&&!!a.iridescenceMap,re=K&&!!a.iridescenceThicknessMap,ie=Z&&!!a.sheenColorMap,ae=Z&&!!a.sheenRoughnessMap,oe=!!a.specularMap,se=!!a.specularColorMap,ue=!!a.specularIntensityMap,le=J&&!!a.transmissionMap,ce=J&&!!a.thicknessMap,he=!!a.gradientMap,de=!!a.alphaMap,fe=a.alphaTest>0,pe=!!a.alphaHash,ve=!!a.extensions,ge=cr;a.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(ge=e.toneMapping));var me={isWebGL2:h,shaderID:S,shaderType:a.type,shaderName:a.name,vertexShader:_,fragmentShader:M,defines:a.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:D,instancing:L,instancingColor:L&&null!==y.instanceColor,supportsVertexTextures:f,outputColorSpace:null===O?e.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:ti,alphaToCoverage:!!a.alphaToCoverage,map:I,matcap:F,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:k,aoMap:B,lightMap:z,bumpMap:G,normalMap:H,displacementMap:f&&j,emissiveMap:V,normalMapObjectSpace:H&&1===a.normalMapType,normalMapTangentSpace:H&&0===a.normalMapType,metalnessMap:W,roughnessMap:X,anisotropy:Y,anisotropyMap:Q,clearcoat:q,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,iridescence:K,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:Z,sheenColorMap:ie,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:se,specularIntensityMap:ue,transmission:J,transmissionMap:le,thicknessMap:ce,gradientMap:he,opaque:!1===a.transparent&&1===a.blending&&!1===a.alphaToCoverage,alphaMap:de,alphaTest:fe,alphaHash:pe,combine:a.combine,mapUv:I&&g(a.map.channel),aoMapUv:B&&g(a.aoMap.channel),lightMapUv:z&&g(a.lightMap.channel),bumpMapUv:G&&g(a.bumpMap.channel),normalMapUv:H&&g(a.normalMap.channel),displacementMapUv:j&&g(a.displacementMap.channel),emissiveMapUv:V&&g(a.emissiveMap.channel),metalnessMapUv:W&&g(a.metalnessMap.channel),roughnessMapUv:X&&g(a.roughnessMap.channel),anisotropyMapUv:Q&&g(a.anisotropyMap.channel),clearcoatMapUv:$&&g(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&g(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&g(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&g(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&g(a.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&g(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&g(a.sheenRoughnessMap.channel),specularMapUv:oe&&g(a.specularMap.channel),specularColorMapUv:se&&g(a.specularColorMap.channel),specularIntensityMapUv:ue&&g(a.specularIntensityMap.channel),transmissionMapUv:le&&g(a.transmissionMap.channel),thicknessMapUv:ce&&g(a.thicknessMap.channel),alphaMapUv:de&&g(a.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(H||Y),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!x.attributes.uv&&(I||de),fog:!!b,useFog:!0===a.fog,fogExp2:!!b&&b.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:P,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,useLegacyLights:e._useLegacyLights,decodeVideoTexture:I&&!0===a.map.isVideoTexture&&Ui.getTransfer(a.map.colorSpace)===ai,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:a.side===ar,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ve&&!0===a.extensions.derivatives,extensionFragDepth:ve&&!0===a.extensions.fragDepth,extensionDrawBuffers:ve&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ve&&!0===a.extensions.shaderTextureLOD,extensionClipCullDistance:ve&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ve&&!0===a.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return me.vertexUv1s=l.has(1),me.vertexUv2s=l.has(2),me.vertexUv3s=l.has(3),l.clear(),me},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.alphaToCoverage&&s.enable(20);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=v[e.type];if(n){var r=As[n];t=as.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=c.length;i<o;i++){var s=c[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Pl(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:c,dispose:function(){u.dispose()}}}function Dl(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Il(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Fl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ul(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Il),r.length>1&&r.sort(t||Fl),i.length>1&&i.sort(t||Fl)}}}function Bl(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new Ul,e.set(t,[r])):n>=i.length?(r=new Ul,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function zl(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new $i,color:new mo};break;case"SpotLight":n={position:new $i,direction:new $i,color:new mo,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $i,color:new mo,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $i,skyColor:new mo,groundColor:new mo};break;case"RectAreaLight":n={color:new mo,position:new $i,halfWidth:new $i,halfHeight:new $i}}return e[t.id]=n,n}}}var Gl=0;function Hl(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function jl(e,t){for(var n=new zl,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mi};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mi,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},a=0;a<9;a++)i.probe.push(new $i);var o=new $i,s=new Ca,u=new Ca;return{setup:function(a,o){for(var s=0,u=0,l=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,d=0,f=0,p=0,v=0,g=0,m=0,y=0,b=0,x=0,E=0;a.sort(Hl);for(var w=!0===o?Math.PI:1,k=0,S=a.length;k<S;k++){var _=a[k],M=_.color,T=_.intensity,A=_.distance,C=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)s+=M.r*T*w,u+=M.g*T*w,l+=M.b*T*w;else if(_.isLightProbe){for(var P=0;P<9;P++)i.probe[P].addScaledVector(_.sh.coefficients[P],T);E++}else if(_.isDirectionalLight){var R=n.get(_);if(R.color.copy(_.color).multiplyScalar(_.intensity*w),_.castShadow){var N=_.shadow,O=r.get(_);O.shadowBias=N.bias,O.shadowNormalBias=N.normalBias,O.shadowRadius=N.radius,O.shadowMapSize=N.mapSize,i.directionalShadow[h]=O,i.directionalShadowMap[h]=C,i.directionalShadowMatrix[h]=_.shadow.matrix,g++}i.directional[h]=R,h++}else if(_.isSpotLight){var L=n.get(_);L.position.setFromMatrixPosition(_.matrixWorld),L.color.copy(M).multiplyScalar(T*w),L.distance=A,L.coneCos=Math.cos(_.angle),L.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),L.decay=_.decay,i.spot[f]=L;var D=_.shadow;if(_.map&&(i.spotLightMap[b]=_.map,b++,D.updateMatrices(_),_.castShadow&&x++),i.spotLightMatrix[f]=D.matrix,_.castShadow){var I=r.get(_);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,i.spotShadow[f]=I,i.spotShadowMap[f]=C,y++}f++}else if(_.isRectAreaLight){var F=n.get(_);F.color.copy(M).multiplyScalar(T),F.halfWidth.set(.5*_.width,0,0),F.halfHeight.set(0,.5*_.height,0),i.rectArea[p]=F,p++}else if(_.isPointLight){var U=n.get(_);if(U.color.copy(_.color).multiplyScalar(_.intensity*w),U.distance=_.distance,U.decay=_.decay,_.castShadow){var B=_.shadow,z=r.get(_);z.shadowBias=B.bias,z.shadowNormalBias=B.normalBias,z.shadowRadius=B.radius,z.shadowMapSize=B.mapSize,z.shadowCameraNear=B.camera.near,z.shadowCameraFar=B.camera.far,i.pointShadow[d]=z,i.pointShadowMap[d]=C,i.pointShadowMatrix[d]=_.shadow.matrix,m++}i.point[d]=U,d++}else if(_.isHemisphereLight){var G=n.get(_);G.skyColor.copy(_.color).multiplyScalar(T*w),G.groundColor.copy(_.groundColor).multiplyScalar(T*w),i.hemi[v]=G,v++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ts.LTC_FLOAT_1,i.rectAreaLTC2=Ts.LTC_FLOAT_2):(i.rectAreaLTC1=Ts.LTC_HALF_1,i.rectAreaLTC2=Ts.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ts.LTC_FLOAT_1,i.rectAreaLTC2=Ts.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ts.LTC_HALF_1,i.rectAreaLTC2=Ts.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=l;var H=i.hash;H.directionalLength===h&&H.pointLength===d&&H.spotLength===f&&H.rectAreaLength===p&&H.hemiLength===v&&H.numDirectionalShadows===g&&H.numPointShadows===m&&H.numSpotShadows===y&&H.numSpotMaps===b&&H.numLightProbes===E||(i.directional.length=h,i.spot.length=f,i.rectArea.length=p,i.point.length=d,i.hemi.length=v,i.directionalShadow.length=g,i.directionalShadowMap.length=g,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=g,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=y+b-x,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=x,i.numLightProbes=E,H.directionalLength=h,H.pointLength=d,H.spotLength=f,H.rectAreaLength=p,H.hemiLength=v,H.numDirectionalShadows=g,H.numPointShadows=m,H.numSpotShadows=y,H.numSpotMaps=b,H.numLightProbes=E,i.version=Gl++)},setupView:function(e,t){for(var n=0,r=0,a=0,l=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var g=i.spot[a];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),g.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),g.direction.sub(o),g.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var m=i.rectArea[l];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),u.identity(),s.copy(p.matrixWorld),s.premultiply(h),u.extractRotation(s),m.halfWidth.set(.5*p.width,0,0),m.halfHeight.set(0,.5*p.height,0),m.halfWidth.applyMatrix4(u),m.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=i.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),c++}}},state:i}}function Vl(e,t){var n=new jl(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Wl(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new Vl(e,t),n.set(r,[i])):a>=o.length?(i=new Vl(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}var Xl=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isMeshDepthMaterial=!0,n.type="MeshDepthMaterial",n.depthPacking=3200,n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}])}(xo),Yl=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isMeshDistanceMaterial=!0,n.type="MeshDistanceMaterial",n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}])}(xo);function ql(e,t,n){var r=new ws,i=new Mi,a=new Mi,o=new Yi,s=new Xl({depthPacking:3201}),u=new Yl,l={},c=n.maxTextureSize,h=P(P(P({},ir,ar),ar,ir),2,2),d=new os({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;var p=new Do;p.setAttribute("position",new So(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new $o(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tr;var m=this.type;function y(n,r){var a=t.update(v);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ki(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,f,v,null)}function b(t,n,r,i){var a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?u:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var c=a.uuid,d=n.uuid,f=l[c];void 0===f&&(f={},l[c]=f);var p=f[d];void 0===p&&(p=a.clone(),f[d]=p,n.addEventListener("dispose",E)),a=p}(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===rr?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial)&&(e.properties.get(a).light=r);return a}function x(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===rr)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=l[f.materialIndex];if(p&&p.visible){var v=b(n,p,o,s);n.onBeforeShadow(e,n,i,a,u,v,f),e.renderBufferDirect(a,null,u,v,n,f),n.onAfterShadow(e,n,i,a,u,v,f)}}else if(l.visible){var g=b(n,l,o,s);n.onBeforeShadow(e,n,i,a,u,g,null),e.renderBufferDirect(a,null,u,g,n,null),n.onAfterShadow(e,n,i,a,u,g,null)}}for(var m=n.children,y=0,E=m.length;y<E;y++)x(m[y],i,a,o,s)}}function E(e){var t=e.target;for(var n in t.removeEventListener("dispose",E),l){var r=l[n],i=e.target.uuid;if(i in r)r[i].dispose(),delete r[i]}}this.render=function(t,n,s){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=m!==rr&&this.type===rr,p=m===rr&&this.type!==rr,v=0,b=t.length;v<b;v++){var E=t[v],w=E.shadow;if(void 0!==w){if(!1!==w.autoUpdate||!1!==w.needsUpdate){i.copy(w.mapSize);var k=w.getFrameExtents();if(i.multiply(k),a.copy(w.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/k.x),i.x=a.x*k.x,w.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/k.y),i.y=a.y*k.y,w.mapSize.y=a.y)),null===w.map||!0===f||!0===p){var S=this.type!==rr?{minFilter:_r,magFilter:_r}:{};null!==w.map&&w.map.dispose(),w.map=new Ki(i.x,i.y,S),w.map.texture.name=E.name+".shadowMap",w.camera.updateProjectionMatrix()}e.setRenderTarget(w.map),e.clear();for(var _=w.getViewportCount(),M=0;M<_;M++){var T=w.getViewport(M);o.set(a.x*T.x,a.y*T.y,a.x*T.z,a.y*T.w),d.viewport(o),w.updateMatrices(E,M),r=w.getFrustum(),x(n,s,w.camera,E,this.type)}!0!==w.isPointLightShadow&&this.type===rr&&y(w,s),w.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",E,"has no shadow.")}m=this.type,g.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function Kl(e,t,n){var r,i=n.isWebGL2;var a=new function(){var t=!1,n=new Yi,r=null,i=new Yi(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?V(e.DEPTH_TEST):W(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(n){t||(n?V(e.STENCIL_TEST):W(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},u=new WeakMap,l=new WeakMap,c={},h={},d=new WeakMap,f=[],p=null,v=!1,g=null,m=null,y=null,b=null,x=null,E=null,w=null,k=new mo(0,0,0),S=0,_=!1,M=null,T=null,A=null,C=null,R=null,N=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),O=!1,L=0,D=e.getParameter(e.VERSION);-1!==D.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(D)[1]),O=L>=1):-1!==D.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),O=L>=2);var I=null,F={},U=e.getParameter(e.SCISSOR_BOX),B=e.getParameter(e.VIEWPORT),z=(new Yi).fromArray(U),G=(new Yi).fromArray(B);function H(t,n,r,a){var o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var u=0;u<r;u++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+u,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}var j={};function V(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function W(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}j[e.TEXTURE_2D]=H(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=H(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(j[e.TEXTURE_2D_ARRAY]=H(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),j[e.TEXTURE_3D]=H(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),V(e.DEPTH_TEST),o.setFunc(3),Z(!1),J(1),V(e.CULL_FACE),K(0);var X=P(P(P({},or,e.FUNC_ADD),101,e.FUNC_SUBTRACT),102,e.FUNC_REVERSE_SUBTRACT);if(i)X[103]=e.MIN,X[104]=e.MAX;else{var Y=t.get("EXT_blend_minmax");null!==Y&&(X[103]=Y.MIN_EXT,X[104]=Y.MAX_EXT)}var q=(P(P(P(P(P(P(P(P(P(P(r={},200,e.ZERO),201,e.ONE),202,e.SRC_COLOR),204,e.SRC_ALPHA),210,e.SRC_ALPHA_SATURATE),208,e.DST_COLOR),206,e.DST_ALPHA),203,e.ONE_MINUS_SRC_COLOR),205,e.ONE_MINUS_SRC_ALPHA),209,e.ONE_MINUS_DST_COLOR),P(P(P(P(P(r,207,e.ONE_MINUS_DST_ALPHA),211,e.CONSTANT_COLOR),212,e.ONE_MINUS_CONSTANT_COLOR),213,e.CONSTANT_ALPHA),214,e.ONE_MINUS_CONSTANT_ALPHA));function K(t,n,r,i,a,o,s,u,l,c){if(0!==t){if(!1===v&&(V(e.BLEND),v=!0),5===t)a=a||n,o=o||r,s=s||i,n===m&&a===x||(e.blendEquationSeparate(X[n],X[a]),m=n,x=a),r===y&&i===b&&o===E&&s===w||(e.blendFuncSeparate(q[r],q[i],q[o],q[s]),y=r,b=i,E=o,w=s),!1!==u.equals(k)&&l===S||(e.blendColor(u.r,u.g,u.b,l),k.copy(u),S=l),g=t,_=!1;else if(t!==g||c!==_){if(m===or&&x===or||(e.blendEquation(e.FUNC_ADD),m=or,x=or),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,E=null,w=null,k.set(0,0,0),S=0,g=t,_=c}}else!0===v&&(W(e.BLEND),v=!1)}function Z(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function J(t){0!==t?(V(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):W(e.CULL_FACE),T=t}function Q(t,n,r){t?(V(e.POLYGON_OFFSET_FILL),C===n&&R===r||(e.polygonOffset(n,r),C=n,R=r)):W(e.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:o,stencil:s},enable:V,disable:W,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){var a=f,o=!1;if(r)if(void 0===(a=d.get(i))&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||a[0]!==e.COLOR_ATTACHMENT0){for(var u=0,l=s.length;u<l;u++)a[u]=e.COLOR_ATTACHMENT0+u;a.length=s.length,o=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,o=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:K,setMaterial:function(t,n){2===t.side?W(e.CULL_FACE):V(e.CULL_FACE);var r=t.side===ar;n&&(r=!r),Z(r),1===t.blending&&!1===t.transparent?K(0):K(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),a.setMask(t.colorWrite);var i=t.stencilWrite;s.setTest(i),i&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):W(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Z,setCullFace:J,setLineWidth:function(t){t!==A&&(O&&e.lineWidth(t),A=t)},setPolygonOffset:Q,setScissorTest:function(t){t?V(e.SCISSOR_TEST):W(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+N-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===I?e.TEXTURE0+N-1:I);var i=F[r];void 0===i&&(i={type:void 0,texture:void 0},F[r]=i),i.type===t&&i.texture===n||(I!==r&&(e.activeTexture(r),I=r),e.bindTexture(t,n||j[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=F[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=l.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===G.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),G.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},I=null,F={},h={},d=new WeakMap,f=[],p=null,v=!1,g=null,m=null,y=null,b=null,x=null,E=null,w=null,k=new mo(0,0,0),S=0,_=!1,M=null,T=null,A=null,C=null,R=null,z.set(0,0,e.canvas.width,e.canvas.height),G.set(0,0,e.canvas.width,e.canvas.height),a.reset(),o.reset(),s.reset()}}}function Zl(e,t,n,r,i,a,o){var s,u=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap,d=new WeakMap,f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function p(e,t){return f?new OffscreenCanvas(e,t):Pi("canvas")}function v(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?ki:Math.floor,o=a(i*e.width),u=a(i*e.height);void 0===s&&(s=p(o,u));var l=n?p(o,u):s;return l.width=o,l.height=u,l.getContext("2d").drawImage(e,0,0,o,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+u+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return wi(e.width)&&wi(e.height)}function m(e,t){return e.generateMipmaps&&t&&e.minFilter!==_r&&e.minFilter!==Ar}function y(t){e.generateMipmap(t)}function b(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RGBA){var l=o?ii:Ui.getTransfer(a);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=l===ai?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function x(e,t,n){return!0===m(e,n)||e.isFramebufferTexture&&e.minFilter!==_r&&e.minFilter!==Ar?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(t){return t===_r||t===Mr||t===Tr?e.NEAREST:e.LINEAR}function w(e){var t=e.target;t.removeEventListener("dispose",w),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=d.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&S(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++){if(Array.isArray(i.__webglFramebuffer[s]))for(var u=0;u<i.__webglFramebuffer[s].length;u++)e.deleteFramebuffer(i.__webglFramebuffer[s][u]);else e.deleteFramebuffer(i.__webglFramebuffer[s]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s])}else{if(Array.isArray(i.__webglFramebuffer))for(var l=0;l<i.__webglFramebuffer.length;l++)e.deleteFramebuffer(i.__webglFramebuffer[l]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var c=0;c<i.__webglColorRenderbuffer.length;c++)i.__webglColorRenderbuffer[c]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[c]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var h=0,d=n.length;h<d;h++){var f=r.get(n[h]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),o.memory.textures--),r.remove(n[h])}r.remove(n),r.remove(t)}(n)}function S(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete d.get(i)[n.__cacheKey],o.memory.textures--}var _=0;function M(t,i){var a=r.get(t);if(t.isVideoTexture&&function(e){var t=o.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){var s=t.image;if(null===s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==s.complete)return void O(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}var T=P(P(P({},wr,e.REPEAT),kr,e.CLAMP_TO_EDGE),Sr,e.MIRRORED_REPEAT),A=P(P(P(P(P(P({},_r,e.NEAREST),Mr,e.NEAREST_MIPMAP_NEAREST),Tr,e.NEAREST_MIPMAP_LINEAR),Ar,e.LINEAR),Cr,e.LINEAR_MIPMAP_NEAREST),Pr,e.LINEAR_MIPMAP_LINEAR),C=P(P(P(P(P(P(P(P({},512,e.NEVER),519,e.ALWAYS),513,e.LESS),515,e.LEQUAL),514,e.EQUAL),518,e.GEQUAL),516,e.GREATER),517,e.NOTEQUAL);function R(n,a,o){if(a.type!==Dr||!1!==t.has("OES_texture_float_linear")||a.magFilter!==Ar&&a.magFilter!==Cr&&a.magFilter!==Tr&&a.magFilter!==Pr&&a.minFilter!==Ar&&a.minFilter!==Cr&&a.minFilter!==Tr&&a.minFilter!==Pr||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),o?(e.texParameteri(n,e.TEXTURE_WRAP_S,T[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===kr&&a.wrapT===kr||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,E(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,E(a.minFilter)),a.minFilter!==_r&&a.minFilter!==Ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,C[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===_r)return;if(a.minFilter!==Tr&&a.minFilter!==Pr)return;if(a.type===Dr&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&a.type===Ir&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));var i=n.source,a=d.get(i);void 0===a&&(a={},d.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&S(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function O(t,o,s){var l=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=e.TEXTURE_3D);var c=N(t,o),h=o.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);var d=r.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+s);var f=Ui.getPrimaries(Ui.workingColorSpace),p=o.colorSpace===$r?null:Ui.getPrimaries(o.colorSpace),E=o.colorSpace===$r||f===p?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,E);var w,k=function(e){return!u&&(e.wrapS!==kr||e.wrapT!==kr||e.minFilter!==_r&&e.minFilter!==Ar)}(o)&&!1===g(o.image),S=v(o.image,k,!1,i.maxTextureSize),_=g(S=B(o,S))||u,M=a.convert(o.format,o.colorSpace),T=a.convert(o.type),A=b(o.internalFormat,M,T,o.colorSpace,o.isVideoTexture);R(l,o,_);var C=o.mipmaps,P=u&&!0!==o.isVideoTexture&&36196!==A,O=void 0===d.__version||!0===c,L=h.dataReady,D=x(o,S,_);if(o.isDepthTexture)A=e.DEPTH_COMPONENT,u?A=o.type===Dr?e.DEPTH_COMPONENT32F:o.type===Lr?e.DEPTH_COMPONENT24:o.type===Fr?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:o.type===Dr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),o.format===Br&&A===e.DEPTH_COMPONENT&&o.type!==Nr&&o.type!==Lr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),o.type=Lr,T=a.convert(o.type)),o.format===zr&&A===e.DEPTH_COMPONENT&&(A=e.DEPTH_STENCIL,o.type!==Fr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),o.type=Fr,T=a.convert(o.type))),O&&(P?n.texStorage2D(e.TEXTURE_2D,1,A,S.width,S.height):n.texImage2D(e.TEXTURE_2D,0,A,S.width,S.height,0,M,T,null));else if(o.isDataTexture)if(C.length>0&&_){P&&O&&n.texStorage2D(e.TEXTURE_2D,D,A,C[0].width,C[0].height);for(var I=0,F=C.length;I<F;I++)w=C[I],P?L&&n.texSubImage2D(e.TEXTURE_2D,I,0,0,w.width,w.height,M,T,w.data):n.texImage2D(e.TEXTURE_2D,I,A,w.width,w.height,0,M,T,w.data);o.generateMipmaps=!1}else P?(O&&n.texStorage2D(e.TEXTURE_2D,D,A,S.width,S.height),L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,S.width,S.height,M,T,S.data)):n.texImage2D(e.TEXTURE_2D,0,A,S.width,S.height,0,M,T,S.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){P&&O&&n.texStorage3D(e.TEXTURE_2D_ARRAY,D,A,C[0].width,C[0].height,S.depth);for(var U=0,z=C.length;U<z;U++)w=C[U],o.format!==Ur?null!==M?P?L&&n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,U,0,0,0,w.width,w.height,S.depth,M,w.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,U,A,w.width,w.height,S.depth,0,w.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):P?L&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,U,0,0,0,w.width,w.height,S.depth,M,T,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,U,A,w.width,w.height,S.depth,0,M,T,w.data)}else{P&&O&&n.texStorage2D(e.TEXTURE_2D,D,A,C[0].width,C[0].height);for(var G=0,H=C.length;G<H;G++)w=C[G],o.format!==Ur?null!==M?P?L&&n.compressedTexSubImage2D(e.TEXTURE_2D,G,0,0,w.width,w.height,M,w.data):n.compressedTexImage2D(e.TEXTURE_2D,G,A,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):P?L&&n.texSubImage2D(e.TEXTURE_2D,G,0,0,w.width,w.height,M,T,w.data):n.texImage2D(e.TEXTURE_2D,G,A,w.width,w.height,0,M,T,w.data)}else if(o.isDataArrayTexture)P?(O&&n.texStorage3D(e.TEXTURE_2D_ARRAY,D,A,S.width,S.height,S.depth),L&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,S.width,S.height,S.depth,M,T,S.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,S.width,S.height,S.depth,0,M,T,S.data);else if(o.isData3DTexture)P?(O&&n.texStorage3D(e.TEXTURE_3D,D,A,S.width,S.height,S.depth),L&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,S.width,S.height,S.depth,M,T,S.data)):n.texImage3D(e.TEXTURE_3D,0,A,S.width,S.height,S.depth,0,M,T,S.data);else if(o.isFramebufferTexture){if(O)if(P)n.texStorage2D(e.TEXTURE_2D,D,A,S.width,S.height);else for(var j=S.width,V=S.height,W=0;W<D;W++)n.texImage2D(e.TEXTURE_2D,W,A,j,V,0,M,T,null),j>>=1,V>>=1}else if(C.length>0&&_){P&&O&&n.texStorage2D(e.TEXTURE_2D,D,A,C[0].width,C[0].height);for(var X=0,Y=C.length;X<Y;X++)w=C[X],P?L&&n.texSubImage2D(e.TEXTURE_2D,X,0,0,M,T,w):n.texImage2D(e.TEXTURE_2D,X,A,M,T,w);o.generateMipmaps=!1}else P?(O&&n.texStorage2D(e.TEXTURE_2D,D,A,S.width,S.height),L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,M,T,S)):n.texImage2D(e.TEXTURE_2D,0,A,M,T,S);m(o,_)&&y(l),d.__version=h.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function L(t,i,o,s,u,c){var h=a.convert(o.format,o.colorSpace),d=a.convert(o.type),f=b(o.internalFormat,h,d,o.colorSpace);if(!r.get(i).__hasExternalTextures){var p=Math.max(1,i.width>>c),v=Math.max(1,i.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,f,p,v,i.depth,0,h,d,null):n.texImage2D(u,c,f,p,v,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,0,F(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){var i=!0===u?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||U(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Dr?i=e.DEPTH_COMPONENT32F:o.type===Lr&&(i=e.DEPTH_COMPONENT24));var s=F(n);U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,s,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,s,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){var c=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,e.DEPTH24_STENCIL8,n.width,n.height):U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else for(var h=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],d=0;d<h.length;d++){var f=h[d],p=a.convert(f.format,f.colorSpace),v=a.convert(f.type),g=b(f.internalFormat,p,v,f.colorSpace),m=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,m,g,n.width,n.height):U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,m,g,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,g,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function I(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),M(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=F(i);if(i.depthTexture.format===Br)U(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==zr)throw new Error("Unknown depthTexture format");U(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),D(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(i.maxSamples,e.samples)}function U(e){var n=r.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){var r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===hi||r!==ti&&r!==$r&&(Ui.getTransfer(r)===ai?!1===u?!0===t.has("EXT_sRGB")&&i===Ur?(e.format=hi,e.minFilter=Ar,e.generateMipmaps=!1):n=Gi.sRGBToLinear(n):i===Ur&&a===Rr||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){var e=_;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),_+=1,e},this.resetTextureUnits=function(){_=0},this.setTexture2D=M,this.setTexture2DArray=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?O(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?O(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){var s=r.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;var l=N(t,o),c=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);var h=r.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+s);var d=Ui.getPrimaries(Ui.workingColorSpace),f=o.colorSpace===$r?null:Ui.getPrimaries(o.colorSpace),p=o.colorSpace===$r||d===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);for(var E=o.isCompressedTexture||o.image[0].isCompressedTexture,w=o.image[0]&&o.image[0].isDataTexture,k=[],S=0;S<6;S++)k[S]=E||w?w?o.image[S].image:o.image[S]:v(o.image[S],!1,!0,i.maxCubemapSize),k[S]=B(o,k[S]);var _,M=k[0],T=g(M)||u,A=a.convert(o.format,o.colorSpace),C=a.convert(o.type),P=b(o.internalFormat,A,C,o.colorSpace),O=u&&!0!==o.isVideoTexture,L=void 0===h.__version||!0===l,D=c.dataReady,I=x(o,M,T);if(R(e.TEXTURE_CUBE_MAP,o,T),E){O&&L&&n.texStorage2D(e.TEXTURE_CUBE_MAP,I,P,M.width,M.height);for(var F=0;F<6;F++){_=k[F].mipmaps;for(var U=0;U<_.length;U++){var z=_[U];o.format!==Ur?null!==A?O?D&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U,0,0,z.width,z.height,A,z.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U,P,z.width,z.height,0,z.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):O?D&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U,0,0,z.width,z.height,A,C,z.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U,P,z.width,z.height,0,A,C,z.data)}}}else{_=o.mipmaps,O&&L&&(_.length>0&&I++,n.texStorage2D(e.TEXTURE_CUBE_MAP,I,P,k[0].width,k[0].height));for(var G=0;G<6;G++)if(w){O?D&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,0,0,k[G].width,k[G].height,A,C,k[G].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,P,k[G].width,k[G].height,0,A,C,k[G].data);for(var H=0;H<_.length;H++){var j=_[H].image[G].image;O?D&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,H+1,0,0,j.width,j.height,A,C,j.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,H+1,P,j.width,j.height,0,A,C,j.data)}}else{O?D&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,0,0,A,C,k[G]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,P,A,C,k[G]);for(var V=0;V<_.length;V++){var W=_[V];O?D&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,V+1,0,0,A,C,W.image[G]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+G,V+1,P,A,C,W.image[G])}}}m(o,T)&&y(e.TEXTURE_CUBE_MAP),h.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){var a=r.get(t);void 0!==n&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&I(t)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),c=r.get(s);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=g(t)||u;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)if(u&&s.mipmaps&&s.mipmaps.length>0){l.__webglFramebuffer[p]=[];for(var v=0;v<s.mipmaps.length;v++)l.__webglFramebuffer[p][v]=e.createFramebuffer()}else l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(u&&s.mipmaps&&s.mipmaps.length>0){l.__webglFramebuffer=[];for(var x=0;x<s.mipmaps.length;x++)l.__webglFramebuffer[x]=e.createFramebuffer()}else l.__webglFramebuffer=e.createFramebuffer();if(d)if(i.drawBuffers)for(var E=t.texture,w=0,S=E.length;w<S;w++){var _=r.get(E[w]);void 0===_.__webglTexture&&(_.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===U(t)){var M=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(var T=0;T<M.length;T++){var A=M[T];l.__webglColorRenderbuffer[T]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,l.__webglColorRenderbuffer[T]);var C=a.convert(A.format,A.colorSpace),P=a.convert(A.type),N=b(A.internalFormat,C,P,A.colorSpace,!0===t.isXRRenderTarget),O=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,O,N,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+T,e.RENDERBUFFER,l.__webglColorRenderbuffer[T])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),D(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),R(e.TEXTURE_CUBE_MAP,s,f);for(var B=0;B<6;B++)if(u&&s.mipmaps&&s.mipmaps.length>0)for(var z=0;z<s.mipmaps.length;z++)L(l.__webglFramebuffer[B][z],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+B,z);else L(l.__webglFramebuffer[B],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+B,0);m(s,f)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(var G=t.texture,H=0,j=G.length;H<j;H++){var V=G[H],W=r.get(V);n.bindTexture(e.TEXTURE_2D,W.__webglTexture),R(e.TEXTURE_2D,V,f),L(l.__webglFramebuffer,t,V,e.COLOR_ATTACHMENT0+H,e.TEXTURE_2D,0),m(V,f)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{var X=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?X=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(X,c.__webglTexture),R(X,s,f),u&&s.mipmaps&&s.mipmaps.length>0)for(var Y=0;Y<s.mipmaps.length;Y++)L(l.__webglFramebuffer[Y],t,s,e.COLOR_ATTACHMENT0,X,Y);else L(l.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,X,0);m(s,f)&&y(X),n.unbindTexture()}t.depthBuffer&&I(t)},this.updateRenderTargetMipmap=function(t){for(var i=g(t)||u,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=0,s=a.length;o<s;o++){var l=a[o];if(m(l,i)){var c=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,h=r.get(l).__webglTexture;n.bindTexture(c,h),y(c),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===U(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,l=[],h=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),f=!0===t.isWebGLMultipleRenderTargets;if(f)for(var p=0;p<i.length;p++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+p,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+p,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(var v=0;v<i.length;v++){l.push(e.COLOR_ATTACHMENT0+v),t.depthBuffer&&l.push(h);var g=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===g&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),f&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[v]),!0===g&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[h]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[h])),f){var m=r.get(i[v]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),f)for(var y=0;y<i.length;y++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+y,e.RENDERBUFFER,d.__webglColorRenderbuffer[y]);var b=r.get(i[y]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+y,e.TEXTURE_2D,b,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=I,this.setupFrameBufferTexture=L,this.useMultisampledRTT=U}function Jl(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$r,o=Ui.getTransfer(a);if(n===Rr)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===Nr)return e.UNSIGNED_SHORT;if(n===Or)return e.INT;if(n===Lr)return e.UNSIGNED_INT;if(n===Dr)return e.FLOAT;if(n===Ir)return r?e.HALF_FLOAT:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(1021===n)return e.ALPHA;if(n===Ur)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===Br)return e.DEPTH_COMPONENT;if(n===zr)return e.DEPTH_STENCIL;if(n===hi)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===Gr||n===Hr||n===jr||n===Vr)if(o===ai){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===Gr)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Hr)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===jr)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Vr)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===Gr)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Hr)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===jr)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Vr)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(37492===n)return o===ai?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return o===ai?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Wr||36494===n||36495===n){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===Wr)return o===ai?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(n===Wr)return i.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Fr?r?e.UNSIGNED_INT_24_8:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Ql=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v(this,t),(e=T(this,t)).isArrayCamera=!0,e.cameras=n,e}return C(t,e),p(t)}(hs),$l=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isGroup=!0,e.type="Group",e}return C(t,e),p(t)}(eo),ec={type:"move"},tc=function(){return p((function e(){v(this,e),this._targetRay=null,this._grip=null,this._hand=null}),[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new $l,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new $l,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $i,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $i),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new $l,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $i,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $i),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=D(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(a){r.e(a)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var l,c=D(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,d=t.getJointPose(h,n),f=this._getHandJoint(u,h);null!==d&&(f.matrix.fromArray(d.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,f.jointRadius=d.radius),f.visible=null!==d}}catch(m){c.e(m)}finally{c.f()}var p=u.joints["index-finger-tip"],v=u.joints["thumb-tip"],g=p.position.distanceTo(v.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ec)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new $l;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}])}(),nc=function(){return p((function e(){v(this,e),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}),[{key:"init",value:function(e,t,n){if(null===this.texture){var r=new Xi;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}},{key:"render",value:function(e,t){if(null!==this.texture){if(null===this.mesh){var n=t.cameras[0].viewport,r=new os({extensions:{fragDepth:!0},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new $o(new _s(20,20),r)}e.render(this.mesh,t)}}},{key:"reset",value:function(){this.texture=null,this.mesh=null}}])}(),rc=function(e){function t(e,n){var r;v(this,t);var i=r=T(this,t),a=null,o=1,s=null,l="local-floor",h=1,d=null,f=null,p=null,g=null,m=null,y=null,b=new nc,x=n.getContextAttributes(),E=null,w=null,k=[],S=[],_=new Mi,M=null,A=new hs;A.layers.enable(1),A.viewport=new Yi;var C=new hs;C.layers.enable(2),C.viewport=new Yi;var P=[A,C],R=new Ql;R.layers.enable(1),R.layers.enable(2);var N=null,O=null;function L(e){var t=S.indexOf(e.inputSource);if(-1!==t){var n=k[t];void 0!==n&&(n.update(e.inputSource,e.frame,d||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}}function D(){a.removeEventListener("select",L),a.removeEventListener("selectstart",L),a.removeEventListener("selectend",L),a.removeEventListener("squeeze",L),a.removeEventListener("squeezestart",L),a.removeEventListener("squeezeend",L),a.removeEventListener("end",D),a.removeEventListener("inputsourceschange",I);for(var t=0;t<k.length;t++){var n=S[t];null!==n&&(S[t]=null,k[t].disconnect(n))}N=null,O=null,b.reset(),e.setRenderTarget(E),m=null,g=null,p=null,a=null,w=null,G.stop(),i.isPresenting=!1,e.setPixelRatio(M),e.setSize(_.width,_.height,!1),i.dispatchEvent({type:"sessionend"})}function I(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=S.indexOf(n);r>=0&&(S[r]=null,k[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=S.indexOf(a);if(-1===o){for(var s=0;s<k.length;s++){if(s>=S.length){S.push(a),o=s;break}if(null===S[s]){S[s]=a,o=s;break}}if(-1===o)break}var u=k[o];u&&u.connect(a)}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=k[e];return void 0===t&&(t=new tc,k[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=k[e];return void 0===t&&(t=new tc,k[e]=t),t.getGripSpace()},r.getHand=function(e){var t=k[e];return void 0===t&&(t=new tc,k[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){o=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){l=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return d||s},r.setReferenceSpace=function(e){d=e},r.getBaseLayer=function(){return null!==g?g:m},r.getBinding=function(){return p},r.getFrame=function(){return y},r.getSession=function(){return a},r.setSession=function(){var t=c(u().mark((function t(r){var c,f,v,y,b;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=r)){t.next=27;break}if(E=e.getRenderTarget(),a.addEventListener("select",L),a.addEventListener("selectstart",L),a.addEventListener("selectend",L),a.addEventListener("squeeze",L),a.addEventListener("squeezestart",L),a.addEventListener("squeezeend",L),a.addEventListener("end",D),a.addEventListener("inputsourceschange",I),!0===x.xrCompatible){t.next=14;break}return t.next=14,n.makeXRCompatible();case 14:return M=e.getPixelRatio(),e.getSize(_),void 0===a.renderState.layers||!1===e.capabilities.isWebGL2?(c={antialias:void 0!==a.renderState.layers||x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o},m=new XRWebGLLayer(a,n,c),a.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),w=new Ki(m.framebufferWidth,m.framebufferHeight,{format:Ur,type:Rr,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})):(f=null,v=null,y=null,x.depth&&(y=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,f=x.stencil?zr:Br,v=x.stencil?Fr:Lr),b={colorFormat:n.RGBA8,depthFormat:y,scaleFactor:o},p=new XRWebGLBinding(a,n),g=p.createProjectionLayer(b),a.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),w=new Ki(g.textureWidth,g.textureHeight,{format:Ur,type:Rr,depthTexture:new su(g.textureWidth,g.textureHeight,v,void 0,void 0,void 0,void 0,void 0,void 0,f),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=g.ignoreDepthValues),w.isXRRenderTarget=!0,this.setFoveation(h),d=null,t.next=22,a.requestReferenceSpace(l);case 22:s=t.sent,G.setContext(a),G.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode};var F=new $i,U=new $i;function B(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==a){null!==b.texture&&(e.near=b.depthNear,e.far=b.depthFar),R.near=C.near=A.near=e.near,R.far=C.far=A.far=e.far,N===R.near&&O===R.far||(a.updateRenderState({depthNear:R.near,depthFar:R.far}),N=R.near,O=R.far,A.near=N,A.far=O,C.near=N,C.far=O,A.updateProjectionMatrix(),C.updateProjectionMatrix(),e.updateProjectionMatrix());var t=e.parent,n=R.cameras;B(R,t);for(var r=0;r<n.length;r++)B(n[r],t);2===n.length?function(e,t,n){F.setFromMatrixPosition(t.matrixWorld),U.setFromMatrixPosition(n.matrixWorld);var r=F.distanceTo(U),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var g=o+p,m=s+p,y=d-v,b=f+(r-v),x=u*s/m*g,E=l*s/m*g;e.projectionMatrix.makePerspective(y,b,x,E,g,m),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(R,A,C):R.projectionMatrix.copy(A.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*mi*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,R,t)}},r.getCamera=function(){return R},r.getFoveation=function(){if(null!==g||null!==m)return h},r.setFoveation=function(e){h=e,null!==g&&(g.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)},r.hasDepthSensing=function(){return null!==b.texture};var z=null;var G=new ks;return G.setAnimationLoop((function(t,n){if(f=n.getViewerPose(d||s),y=n,null!==f){var r=f.views;null!==m&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));var o=!1;r.length!==R.cameras.length&&(R.cameras.length=0,o=!0);for(var u=0;u<r.length;u++){var l=r[u],c=null;if(null!==m)c=m.getViewport(l);else{var h=p.getViewSubImage(g,l);c=h.viewport,0===u&&(e.setRenderTargetTextures(w,h.colorTexture,g.ignoreDepthValues?void 0:h.depthStencilTexture),e.setRenderTarget(w))}var v=P[u];void 0===v&&((v=new hs).layers.enable(u),v.viewport=new Yi,P[u]=v),v.matrix.fromArray(l.transform.matrix),v.matrix.decompose(v.position,v.quaternion,v.scale),v.projectionMatrix.fromArray(l.projectionMatrix),v.projectionMatrixInverse.copy(v.projectionMatrix).invert(),v.viewport.set(c.x,c.y,c.width,c.height),0===u&&(R.matrix.copy(v.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),!0===o&&R.cameras.push(v)}var x=a.enabledFeatures;if(x&&x.includes("depth-sensing")){var E=p.getDepthInformation(r[0]);E&&E.isValid&&E.texture&&b.init(e,E,a.renderState)}}for(var _=0;_<k.length;_++){var M=S[_],T=k[_];null!==M&&void 0!==T&&T.update(M,n,d||s)}b.render(e,R),z&&z(t,n),n.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:n}),y=null})),r.setAnimationLoop=function(e){z=e},r.dispose=function(){},r}return C(t,e),p(t)}(pi);function ic(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===ar&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===ar&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);var a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;var o=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*o,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,is(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));var i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===ar&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function ac(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(e,t,n,r){var i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;var o=r[a];if("number"===typeof i||"boolean"===typeof i){if(o!==i)return r[a]=i,!0}else if(!1===o.equals(i))return o.copy(i),!0;return!1}function l(e){var t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var d=i[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=t.length;i<a;i++)for(var o=Array.isArray(t[i])?t[i]:[t[i]],s=0,u=o.length;s<u;s++)for(var c=o[s],h=Array.isArray(c.value)?c.value:[c.value],d=0,f=h.length;d<f;d++){var p=l(h[d]),v=n%r;0!==v&&r-v<p.boundary&&(n+=r-v),c.__data=new Float32Array(p.storage/Float32Array.BYTES_PER_ELEMENT),c.__offset=n,n+=p.storage}var g=n%r;g>0&&(n+=r-g);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));var f=h.program;r.updateUBOMapping(n,f);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(var o=0,s=r.length;o<s;o++)for(var c=Array.isArray(r[o])?r[o]:[r[o]],h=0,d=c.length;h<d;h++){var f=c[h];if(!0===u(f,o,h,a)){for(var p=f.__offset,v=Array.isArray(f.value)?f.value:[f.value],g=0,m=0;m<v.length;m++){var y=v[m],b=l(y);"number"===typeof y||"boolean"===typeof y?(f.__data[0]=y,e.bufferSubData(e.UNIFORM_BUFFER,p+g,f.__data)):y.isMatrix3?(f.__data[0]=y.elements[0],f.__data[1]=y.elements[1],f.__data[2]=y.elements[2],f.__data[3]=0,f.__data[4]=y.elements[3],f.__data[5]=y.elements[4],f.__data[6]=y.elements[5],f.__data[7]=0,f.__data[8]=y.elements[6],f.__data[9]=y.elements[7],f.__data[10]=y.elements[8],f.__data[11]=0):(y.toArray(f.__data,g),g+=b.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,p,f.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}var oc=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e);var n,r=t.canvas,i=void 0===r?function(){var e=Pi("canvas");return e.style.display="block",e}():r,a=t.context,o=void 0===a?null:a,s=t.depth,u=void 0===s||s,l=t.stencil,c=void 0===l||l,h=t.alpha,d=void 0!==h&&h,f=t.antialias,p=void 0!==f&&f,g=t.premultipliedAlpha,m=void 0===g||g,y=t.preserveDrawingBuffer,b=void 0!==y&&y,x=t.powerPreference,E=void 0===x?"default":x,w=t.failIfMajorPerformanceCaveat,k=void 0!==w&&w;this.isWebGLRenderer=!0,n=null!==o?o.getContextAttributes().alpha:d;var S=new Uint32Array(4),_=new Int32Array(4),M=null,T=null,A=[],C=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ei,this._useLegacyLights=!1,this.toneMapping=cr,this.toneMappingExposure=1;var P=this,R=!1,N=0,O=0,L=null,D=-1,I=null,F=new Yi,U=new Yi,B=null,z=new mo(0),G=0,H=i.width,j=i.height,V=1,W=null,X=null,Y=new Yi(0,0,H,j),q=new Yi(0,0,H,j),K=!1,Z=new ws,J=!1,Q=!1,$=null,ee=new Ca,te=new Mi,ne=new $i,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ie(){return null===L?V:1}var ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye,be,xe,Ee,we,ke,Se,_e,Me,Te,Ae,Ce=o;function Pe(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i.getContext(r,t);if(null!==a)return a}return null}try{var Re={alpha:!0,depth:u,stencil:c,antialias:p,premultipliedAlpha:m,preserveDrawingBuffer:b,powerPreference:E,failIfMajorPerformanceCaveat:k};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(Yn)),i.addEventListener("webglcontextlost",De,!1),i.addEventListener("webglcontextrestored",Ie,!1),i.addEventListener("webglcontextcreationerror",Fe,!1),null===Ce){var Ne=["webgl2","webgl","experimental-webgl"];if(!0===P.isWebGL1Renderer&&Ne.shift(),null===(Ce=Pe(Ne,Re)))throw Pe(Ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&Ce instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Ce.getShaderPrecisionFormat&&(Ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Je){throw console.error("THREE.WebGLRenderer: "+Je.message),Je}function Oe(){ae=new $s(Ce),oe=new Os(Ce,ae,t),ae.init(oe),Me=new Jl(Ce,ae,oe),se=new Kl(Ce,ae,oe),ue=new nu(Ce),le=new Dl,ce=new Zl(Ce,ae,se,le,oe,Me,ue),he=new Ds(P),de=new Qs(P),fe=new Ss(Ce,oe),Te=new Rs(Ce,ae,fe,oe),pe=new eu(Ce,fe,ue,Te),ve=new ou(Ce,pe,fe,ue),ke=new au(Ce,oe,ce),xe=new Ls(le),ge=new Ll(P,he,de,ae,oe,Te,xe),me=new ic(P,le),ye=new Bl,be=new Wl(ae,oe),we=new Ps(P,he,de,se,ve,n,m),Ee=new ql(P,ve,oe),Ae=new ac(Ce,ue,oe,se),Se=new Ns(Ce,ae,ue,oe),_e=new tu(Ce,ae,ue,oe),ue.programs=ge.programs,P.capabilities=oe,P.extensions=ae,P.properties=le,P.renderLists=ye,P.shadowMap=Ee,P.state=se,P.info=ue}Oe();var Le=new rc(P,Ce);function De(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;var e=ue.autoReset,t=Ee.enabled,n=Ee.autoUpdate,r=Ee.needsUpdate,i=Ee.type;Oe(),ue.autoReset=e,Ee.enabled=t,Ee.autoUpdate=n,Ee.needsUpdate=r,Ee.type=i}function Fe(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ue(e){var t=e.target;t.removeEventListener("dispose",Ue),function(e){(function(e){var t=le.get(e).programs;void 0!==t&&(t.forEach((function(e){ge.releaseProgram(e)})),e.isShaderMaterial&&ge.releaseShaderCache(e))})(e),le.remove(e)}(t)}function Be(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=ar,e.needsUpdate=!0,qe(e,t,n),e.side=ir,e.needsUpdate=!0,qe(e,t,n),e.side=2):qe(e,t,n)}this.xr=Le,this.getContext=function(){return Ce},this.getContextAttributes=function(){return Ce.getContextAttributes()},this.forceContextLoss=function(){var e=ae.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=ae.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(e){void 0!==e&&(V=e,this.setSize(H,j,!1))},this.getSize=function(e){return e.set(H,j)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Le.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=e,j=t,i.width=Math.floor(e*V),i.height=Math.floor(t*V),!0===n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(H*V,j*V).floor()},this.setDrawingBufferSize=function(e,t,n){H=e,j=t,V=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(F)},this.getViewport=function(e){return e.copy(Y)},this.setViewport=function(e,t,n,r){e.isVector4?Y.set(e.x,e.y,e.z,e.w):Y.set(e,t,n,r),se.viewport(F.copy(Y).multiplyScalar(V).floor())},this.getScissor=function(e){return e.copy(q)},this.setScissor=function(e,t,n,r){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,n,r),se.scissor(U.copy(q).multiplyScalar(V).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(e){se.setScissorTest(K=e)},this.setOpaqueSort=function(e){W=e},this.setTransparentSort=function(e){X=e},this.getClearColor=function(e){return e.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var r=!1;if(null!==L){var i=L.texture.format;r=1033===i||1031===i||1029===i}if(r){var a=L.texture.type,o=a===Rr||a===Lr||a===Nr||a===Fr||1017===a||1018===a,s=we.getClearColor(),u=we.getClearAlpha(),l=s.r,c=s.g,h=s.b;o?(S[0]=l,S[1]=c,S[2]=h,S[3]=u,Ce.clearBufferuiv(Ce.COLOR,0,S)):(_[0]=l,_[1]=c,_[2]=h,_[3]=u,Ce.clearBufferiv(Ce.COLOR,0,_))}else n|=Ce.COLOR_BUFFER_BIT}e&&(n|=Ce.DEPTH_BUFFER_BIT),t&&(n|=Ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ce.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",De,!1),i.removeEventListener("webglcontextrestored",Ie,!1),i.removeEventListener("webglcontextcreationerror",Fe,!1),ye.dispose(),be.dispose(),le.dispose(),he.dispose(),de.dispose(),ve.dispose(),Te.dispose(),Ae.dispose(),ge.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",Ge),Le.removeEventListener("sessionend",He),$&&($.dispose(),$=null),je.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=re);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=re);ce.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===L?P.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:ti,u=(r.isMeshStandardMaterial?de:he).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=cr;r.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(p=P.toneMapping));var v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==v?v.length:0,m=le.get(r),y=T.state.lights;if(!0===J&&(!0===Q||e!==I)){var b=e===I&&r.id===D;xe.setState(r,e,b)}var x=!1;r.version===m.__version?m.needsLights&&m.lightsStateVersion!==y.state.version||m.outputColorSpace!==s||i.isBatchedMesh&&!1===m.batching?x=!0:i.isBatchedMesh||!0!==m.batching?i.isInstancedMesh&&!1===m.instancing?x=!0:i.isInstancedMesh||!0!==m.instancing?i.isSkinnedMesh&&!1===m.skinning?x=!0:i.isSkinnedMesh||!0!==m.skinning?i.isInstancedMesh&&!0===m.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===m.instancingColor&&null!==i.instanceColor||m.envMap!==u||!0===r.fog&&m.fog!==a?x=!0:void 0===m.numClippingPlanes||m.numClippingPlanes===xe.numPlanes&&m.numIntersection===xe.numIntersection?(m.vertexAlphas!==l||m.vertexTangents!==c||m.morphTargets!==h||m.morphNormals!==d||m.morphColors!==f||m.toneMapping!==p||!0===oe.isWebGL2&&m.morphTargetsCount!==g)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,m.__version=r.version);var E=m.currentProgram;!0===x&&(E=qe(r,t,i));var w=!1,k=!1,S=!1,_=E.getUniforms(),M=m.uniforms;se.useProgram(E.program)&&(w=!0,k=!0,S=!0);r.id!==D&&(D=r.id,k=!0);if(w||I!==e){_.setValue(Ce,"projectionMatrix",e.projectionMatrix),_.setValue(Ce,"viewMatrix",e.matrixWorldInverse);var A=_.map.cameraPosition;void 0!==A&&A.setValue(Ce,ne.setFromMatrixPosition(e.matrixWorld)),oe.logarithmicDepthBuffer&&_.setValue(Ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&_.setValue(Ce,"isOrthographic",!0===e.isOrthographicCamera),I!==e&&(I=e,k=!0,S=!0)}if(i.isSkinnedMesh){_.setOptional(Ce,i,"bindMatrix"),_.setOptional(Ce,i,"bindMatrixInverse");var C=i.skeleton;C&&(oe.floatVertexTextures?(null===C.boneTexture&&C.computeBoneTexture(),_.setValue(Ce,"boneTexture",C.boneTexture,ce)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}i.isBatchedMesh&&(_.setOptional(Ce,i,"batchingTexture"),_.setValue(Ce,"batchingTexture",i._matricesTexture,ce));var R=n.morphAttributes;(void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===oe.isWebGL2)&&ke.update(i,n,E);(k||m.receiveShadow!==i.receiveShadow)&&(m.receiveShadow=i.receiveShadow,_.setValue(Ce,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(M.envMap.value=u,M.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1);k&&(_.setValue(Ce,"toneMappingExposure",P.toneMappingExposure),m.needsLights&&(O=S,(N=M).ambientLightColor.needsUpdate=O,N.lightProbe.needsUpdate=O,N.directionalLights.needsUpdate=O,N.directionalLightShadows.needsUpdate=O,N.pointLights.needsUpdate=O,N.pointLightShadows.needsUpdate=O,N.spotLights.needsUpdate=O,N.spotLightShadows.needsUpdate=O,N.rectAreaLights.needsUpdate=O,N.hemisphereLights.needsUpdate=O),a&&!0===r.fog&&me.refreshFogUniforms(M,a),me.refreshMaterialUniforms(M,r,V,j,$),dl.upload(Ce,Ke(m),M,ce));var N,O;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(dl.upload(Ce,Ke(m),M,ce),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&_.setValue(Ce,"center",i.center);if(_.setValue(Ce,"modelViewMatrix",i.modelViewMatrix),_.setValue(Ce,"normalMatrix",i.normalMatrix),_.setValue(Ce,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var F=r.uniformsGroups,U=0,B=F.length;U<B;U++)if(oe.isWebGL2){var z=F[U];Ae.update(z,E),Ae.bind(z,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return E}(e,t,n,r,i);se.setMaterial(r,o);var u=n.index,l=1;if(!0===r.wireframe){if(void 0===(u=pe.getWireframeAttribute(n)))return;l=2}var c=n.drawRange,h=n.attributes.position,d=c.start*l,f=(c.start+c.count)*l;null!==a&&(d=Math.max(d,a.start*l),f=Math.min(f,(a.start+a.count)*l)),null!==u?(d=Math.max(d,0),f=Math.min(f,u.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));var p=f-d;if(!(p<0||p===1/0)){var v;Te.setup(i,r,s,n,u);var g=Se;if(null!==u&&(v=fe.get(u),(g=_e).setIndex(v)),i.isMesh)!0===r.wireframe?(se.setLineWidth(r.wireframeLinewidth*ie()),g.setMode(Ce.LINES)):g.setMode(Ce.TRIANGLES);else if(i.isLine){var m=r.linewidth;void 0===m&&(m=1),se.setLineWidth(m*ie()),i.isLineSegments?g.setMode(Ce.LINES):i.isLineLoop?g.setMode(Ce.LINE_LOOP):g.setMode(Ce.LINE_STRIP)}else i.isPoints?g.setMode(Ce.POINTS):i.isSprite&&g.setMode(Ce.TRIANGLES);if(i.isBatchedMesh)g.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)g.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){var y=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,b=Math.min(n.instanceCount,y);g.renderInstances(d,p,b)}else g.render(d,p)}},this.compile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),(T=be.get(n)).init(),C.push(T),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(T.pushLight(e),e.castShadow&&T.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(T.pushLight(e),e.castShadow&&T.pushShadow(e))})),T.setupLights(P._useLegacyLights);var r=new Set;return e.traverse((function(e){var t=e.material;if(t)if(Array.isArray(t))for(var i=0;i<t.length;i++){var a=t[i];Be(a,n,e),r.add(a)}else Be(t,n,e),r.add(t)})),C.pop(),T=null,r},this.compileAsync=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.compile(e,t,n);return new Promise((function(t){function n(){r.forEach((function(e){le.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==ae.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};var ze=null;function Ge(){je.stop()}function He(){je.start()}var je=new ks;function Ve(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)T.pushLight(e),e.castShadow&&T.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Z.intersectsSprite(e)){r&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ee);var i=ve.update(e),a=e.material;a.visible&&M.push(e,i,a,n,ne.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Z.intersectsObject(e))){var o=ve.update(e),s=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ne.copy(e.boundingSphere.center)):(null===o.boundingSphere&&o.computeBoundingSphere(),ne.copy(o.boundingSphere.center)),ne.applyMatrix4(e.matrixWorld).applyMatrix4(ee)),Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var h=u[l],d=s[h.materialIndex];d&&d.visible&&M.push(e,o,d,n,ne.z,h)}else s.visible&&M.push(e,o,s,n,ne.z,null)}for(var f=e.children,p=0,v=f.length;p<v;p++)Ve(f[p],t,n,r)}}function We(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;T.setupLightsView(n),!0===J&&xe.setGlobalState(P.clippingPlanes,n),a.length>0&&function(e,t,n,r){var i=!0===n.isScene?n.overrideMaterial:null;if(null!==i)return;var a=oe.isWebGL2;null===$&&($=new Ki(1,1,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?Ir:Rr,minFilter:Pr,samples:a?4:0}));P.getDrawingBufferSize(te),a?$.setSize(te.x,te.y):$.setSize(ki(te.x),ki(te.y));var o=P.getRenderTarget();P.setRenderTarget($),P.getClearColor(z),(G=P.getClearAlpha())<1&&P.setClearColor(16777215,.5);P.clear();var s=P.toneMapping;P.toneMapping=cr,Xe(e,n,r),ce.updateMultisampleRenderTarget($),ce.updateRenderTargetMipmap($);for(var u=!1,l=0,c=t.length;l<c;l++){var h=t[l],d=h.object,f=h.geometry,p=h.material,v=h.group;if(2===p.side&&d.layers.test(r.layers)){var g=p.side;p.side=ar,p.needsUpdate=!0,Ye(d,n,r,f,p,v),p.side=g,p.needsUpdate=!0,u=!0}}!0===u&&(ce.updateMultisampleRenderTarget($),ce.updateRenderTargetMipmap($));P.setRenderTarget(o),P.setClearColor(z,G),P.toneMapping=s}(i,a,t,n),r&&se.viewport(F.copy(r)),i.length>0&&Xe(i,t,n),a.length>0&&Xe(a,t,n),o.length>0&&Xe(o,t,n),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function Xe(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Ye(s,t,n,u,l,c)}}function Ye(e,t,n,r,i,a){e.onBeforeRender(P,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(P,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=ar,i.needsUpdate=!0,P.renderBufferDirect(n,t,r,i,e,a),i.side=ir,i.needsUpdate=!0,P.renderBufferDirect(n,t,r,i,e,a),i.side=2):P.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(P,t,n,r,i,a)}function qe(e,t,n){!0!==t.isScene&&(t=re);var r=le.get(e),i=T.state.lights,a=T.state.shadowsArray,o=i.state.version,s=ge.getParameters(e,i.state,a,t,n),u=ge.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?de:he).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",Ue),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ze(e,s),c}else s.uniforms=ge.getUniforms(e),e.onBuild(n,s,P),e.onBeforeCompile(s,P),c=ge.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=xe.uniform),Ze(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function Ke(e){if(null===e.uniformsList){var t=e.currentProgram.getUniforms();e.uniformsList=dl.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ze(e,t){var n=le.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}je.setAnimationLoop((function(e){ze&&ze(e)})),"undefined"!==typeof self&&je.setContext(self),this.setAnimationLoop=function(e){ze=e,Le.setAnimationLoop(e),null===e?je.stop():je.start()},Le.addEventListener("sessionstart",Ge),Le.addEventListener("sessionend",He),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==R){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Le.enabled&&!0===Le.isPresenting&&(!0===Le.cameraAutoUpdate&&Le.updateCamera(t),t=Le.getCamera()),!0===e.isScene&&e.onBeforeRender(P,e,t,L),(T=be.get(e,C.length)).init(),C.push(T),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromProjectionMatrix(ee),Q=this.localClippingEnabled,J=xe.init(this.clippingPlanes,Q),(M=ye.get(e,A.length)).init(),A.push(M),Ve(e,t,0,P.sortObjects),M.finish(),!0===P.sortObjects&&M.sort(W,X),this.info.render.frame++,!0===J&&xe.beginShadows();var n=T.state.shadowsArray;if(Ee.render(n,e,t),!0===J&&xe.endShadows(),!0===this.info.autoReset&&this.info.reset(),!1!==Le.enabled&&!1!==Le.isPresenting&&!1!==Le.hasDepthSensing()||we.render(M,e),T.setupLights(P._useLegacyLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];We(M,e,o,o.viewport)}else We(M,e,t);null!==L&&(ce.updateMultisampleRenderTarget(L),ce.updateRenderTargetMipmap(L)),!0===e.isScene&&e.onAfterRender(P,e,t),Te.resetDefaultState(),D=-1,I=null,C.pop(),T=C.length>0?C[C.length-1]:null,A.pop(),M=A.length>0?A[A.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(e,t,n){le.get(e.texture).__webglTexture=t,le.get(e.depthTexture).__webglTexture=n;var r=le.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===ae.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=le.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;L=e,N=t,O=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=le.get(e);void 0!==s.__useDefaultFramebuffer?(se.bindFramebuffer(Ce.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?ce.setupRenderTarget(e):s.__hasExternalTextures&&ce.rebindTextures(e,le.get(e.texture).__webglTexture,le.get(e.depthTexture).__webglTexture);var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(o=!0);var l=le.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(l[t])?l[t][n]:l[t],a=!0):i=oe.isWebGL2&&e.samples>0&&!1===ce.useMultisampledRTT(e)?le.get(e).__webglMultisampledFramebuffer:Array.isArray(l)?l[n]:l,F.copy(e.viewport),U.copy(e.scissor),B=e.scissorTest}else F.copy(Y).multiplyScalar(V).floor(),U.copy(q).multiplyScalar(V).floor(),B=K;if(se.bindFramebuffer(Ce.FRAMEBUFFER,i)&&oe.drawBuffers&&r&&se.drawBuffers(e,i),se.viewport(F),se.scissor(U),se.setScissorTest(B),a){var c=le.get(e.texture);Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_CUBE_MAP_POSITIVE_X+t,c.__webglTexture,n)}else if(o){var h=le.get(e.texture),d=t||0;Ce.framebufferTextureLayer(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,h.__webglTexture,n||0,d)}D=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=le.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){se.bindFramebuffer(Ce.FRAMEBUFFER,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==Ur&&Me.convert(l)!==Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Ir&&(ae.has("EXT_color_buffer_half_float")||oe.isWebGL2&&ae.has("EXT_color_buffer_float"));if(c!==Rr&&Me.convert(c)!==Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==Dr||!(oe.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Ce.readPixels(t,n,r,i,Me.convert(l),Me.convert(c),a)}finally{var d=null!==L?le.get(L).__webglFramebuffer:null;se.bindFramebuffer(Ce.FRAMEBUFFER,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);ce.setTexture2D(t,0),Ce.copyTexSubImage2D(Ce.TEXTURE_2D,n,0,0,e.x,e.y,i,a),se.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=Me.convert(n.format),s=Me.convert(n.type);ce.setTexture2D(n,0),Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,n.flipY),Ce.pixelStorei(Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ce.pixelStorei(Ce.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Ce.texSubImage2D(Ce.TEXTURE_2D,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?Ce.compressedTexSubImage2D(Ce.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ce.texSubImage2D(Ce.TEXTURE_2D,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&Ce.generateMipmap(Ce.TEXTURE_2D),se.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(P.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=Me.convert(r.format),c=Me.convert(r.type);if(r.isData3DTexture)ce.setTexture3D(r,0),a=Ce.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ce.setTexture2DArray(r,0),a=Ce.TEXTURE_2D_ARRAY}Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,r.flipY),Ce.pixelStorei(Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Ce.pixelStorei(Ce.UNPACK_ALIGNMENT,r.unpackAlignment);var h=Ce.getParameter(Ce.UNPACK_ROW_LENGTH),d=Ce.getParameter(Ce.UNPACK_IMAGE_HEIGHT),f=Ce.getParameter(Ce.UNPACK_SKIP_PIXELS),p=Ce.getParameter(Ce.UNPACK_SKIP_ROWS),v=Ce.getParameter(Ce.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH,g.width),Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT,g.height),Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS,e.min.x),Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS,e.min.y),Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Ce.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ce.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,g.data)):Ce.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g),Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH,h),Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT,d),Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS,f),Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS,p),Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES,v),0===i&&r.generateMipmaps&&Ce.generateMipmap(a),se.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?ce.setTextureCube(e,0):e.isData3DTexture?ce.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ce.setTexture2DArray(e,0):ce.setTexture2D(e,0),se.unbindTexture()},this.resetState=function(){N=0,O=0,L=null,se.reset(),Te.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}),[{key:"coordinateSystem",get:function(){return di}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var t=this.getContext();t.drawingBufferColorSpace=e===ni?"display-p3":"srgb",t.unpackColorSpace=Ui.workingColorSpace===ri?"display-p3":"srgb"}},{key:"outputEncoding",get:function(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ei?Qr:3e3},set:function(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Qr?ei:ti}},{key:"useLegacyLights",get:function(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}])}(),sc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(oc);sc.prototype.isWebGL1Renderer=!0;var uc=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:e})),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}])}(eo),lc=function(){return p((function e(t,n){v(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=li,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=yi()}),[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"updateRange",get:function(){return Ni("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=yi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=yi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}])}(),cc=new $i,hc=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return p(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)cc.fromBufferAttribute(this,t),cc.applyMatrix4(e),this.setXYZ(t,cc.x,cc.y,cc.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)cc.fromBufferAttribute(this,t),cc.applyNormalMatrix(e),this.setXYZ(t,cc.x,cc.y,cc.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)cc.fromBufferAttribute(this,t),cc.transformDirection(e),this.setXYZ(t,cc.x,cc.y,cc.z);return this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Si(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=_i(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}},{key:"setX",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=_i(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Si(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Si(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Si(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Si(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_i(t,this.array),n=_i(n,this.array),r=_i(r,this.array),i=_i(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new So(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}])}();var dc=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return v(this,t),(i=T(this,t,[e,n,r])).isInstancedBufferAttribute=!0,i.meshPerAttribute=a,i}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}])}(So);var fc=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isLineBasicMaterial=!0,n.type="LineBasicMaterial",n.color=new mo(16777215),n.map=null,n.linewidth=1,n.linecap="round",n.linejoin="round",n.fog=!0,n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}])}(xo),pc=new $i,vc=new $i,gc=new Ca,mc=new Aa,yc=new xa,bc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Do,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fc;return v(this,t),(e=T(this,t)).isLine=!0,e.type="Line",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)pc.fromBufferAttribute(t,r-1),vc.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=pc.distanceTo(vc);e.setAttribute("lineDistance",new To(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yc.copy(n.boundingSphere),yc.applyMatrix4(r),yc.radius+=i,!1!==e.ray.intersectsSphere(yc)){gc.copy(r).invert(),mc.copy(e.ray).applyMatrix4(gc);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new $i,l=new $i,c=new $i,h=new $i,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(var v=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count)-1;v<g;v+=d){var m=f.getX(v),y=f.getX(v+1);if(u.fromBufferAttribute(p,m),l.fromBufferAttribute(p,y),!(mc.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,a.start),E=Math.min(p.count,a.start+a.count)-1;x<E;x+=d){if(u.fromBufferAttribute(p,x),l.fromBufferAttribute(p,x+1),!(mc.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}])}(eo),xc=new $i,Ec=new $i,wc=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,n])).isLineSegments=!0,r.type="LineSegments",r}return C(t,e),p(t,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)xc.fromBufferAttribute(t,r),Ec.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+xc.distanceTo(Ec);e.setAttribute("lineDistance",new To(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}])}(bc),kc=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isPointsMaterial=!0,n.type="PointsMaterial",n.color=new mo(16777215),n.map=null,n.alphaMap=null,n.size=1,n.sizeAttenuation=!0,n.fog=!0,n.setValues(e),n}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}])}(xo),Sc=new Ca,_c=new Aa,Mc=new xa,Tc=new $i,Ac=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Do,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kc;return v(this,t),(e=T(this,t)).isPoints=!0,e.type="Points",e.geometry=n,e.material=r,e.updateMorphTargets(),e}return C(t,e),p(t,[{key:"copy",value:function(e,n){return Xn(S(t.prototype),"copy",this).call(this,e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mc.copy(n.boundingSphere),Mc.applyMatrix4(r),Mc.radius+=i,!1!==e.ray.intersectsSphere(Mc)){Sc.copy(r).invert(),_c.copy(e.ray).applyMatrix4(Sc);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var d=u.getX(c);Tc.fromBufferAttribute(l,d),Cc(Tc,d,s,r,e,t,this)}else for(var f=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);f<p;f++)Tc.fromBufferAttribute(l,f),Cc(Tc,f,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}])}(eo);function Cc(e,t,n,r,i,a,o){var s=_c.distanceSqToPoint(e);if(s<n){var u=new $i;_c.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}var Pc=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).isRawShaderMaterial=!0,n.type="RawShaderMaterial",n}return C(t,e),p(t)}(os);function Rc(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Nc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var Oc=function(){return p((function e(t,n,r,i){v(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}),[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}])}(),Lc=function(e){function t(e,n,r,i){var a;return v(this,t),(a=T(this,t,[e,n,r,i]))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:Kr,endingEnd:Kr},a}return C(t,e),p(t,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Zr:i=e,o=2*t-n;break;case Jr:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Zr:a=e,s=2*n-t;break;case Jr:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,v=p*f,g=-h*v+2*h*p-h*f,m=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,b=d*v-d*p,x=0;x!==o;++x)i[x]=g*a[l+x]+m*a[u+x]+y*a[s+x]+b*a[c+x];return i}}])}(Oc),Dc=function(e){function t(e,n,r,i){return v(this,t),T(this,t,[e,n,r,i])}return C(t,e),p(t,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}])}(Oc),Ic=function(e){function t(e,n,r,i){return v(this,t),T(this,t,[e,n,r,i])}return C(t,e),p(t,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}])}(Oc),Fc=function(){return p((function e(t,n,r,i){if(v(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Rc(n,this.TimeBufferType),this.values=Rc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}),[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Ic(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Dc(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Lc(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Xr:t=this.InterpolantFactoryMethodDiscrete;break;case Yr:t=this.InterpolantFactoryMethodLinear;break;case qr:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xr;case this.InterpolantFactoryMethodLinear:return Yr;case this.InterpolantFactoryMethodSmooth:return qr}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Nc(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===qr,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,g=0;g!==n;++g)t[v+g]=t[p+g]}++a}}if(i>0){e[a]=e[i];for(var m=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[m+b];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Rc(e.times,Array),values:Rc(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}])}();Fc.prototype.TimeBufferType=Float32Array,Fc.prototype.ValueBufferType=Float32Array,Fc.prototype.DefaultInterpolation=Yr;var Uc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(Fc);Uc.prototype.ValueTypeName="bool",Uc.prototype.ValueBufferType=Array,Uc.prototype.DefaultInterpolation=Xr,Uc.prototype.InterpolantFactoryMethodLinear=void 0,Uc.prototype.InterpolantFactoryMethodSmooth=void 0;var Bc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(Fc);Bc.prototype.ValueTypeName="color";var zc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(Fc);zc.prototype.ValueTypeName="number";var Gc=function(e){function t(e,n,r,i){return v(this,t),T(this,t,[e,n,r,i])}return C(t,e),p(t,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)Qi.slerpFlat(i,0,a,u-o,a,u,s);return i}}])}(Oc),Hc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Gc(this.times,this.values,this.getValueSize(),e)}}])}(Fc);Hc.prototype.ValueTypeName="quaternion",Hc.prototype.DefaultInterpolation=Yr,Hc.prototype.InterpolantFactoryMethodSmooth=void 0;var jc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(Fc);jc.prototype.ValueTypeName="string",jc.prototype.ValueBufferType=Array,jc.prototype.DefaultInterpolation=Xr,jc.prototype.InterpolantFactoryMethodLinear=void 0,jc.prototype.InterpolantFactoryMethodSmooth=void 0;var Vc=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(Fc);Vc.prototype.ValueTypeName="vector";var Wc=p((function e(t,n,r){v(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),Xc=new Wc,Yc=function(){return p((function e(t){v(this,e),this.manager=void 0!==t?t:Xc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}),[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}])}();Yc.DEFAULT_MATERIAL_NAME="__DEFAULT";var qc=function(e){function t(){var e;return v(this,t),(e=T(this,t)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}])}(Do);var Kc="\\[\\]\\.:\\/",Zc=new RegExp("["+Kc+"]","g"),Jc="[^"+Kc+"]",Qc="[^"+Kc.replace("\\.","")+"]",$c=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Jc)+/(WCOD+)?/.source.replace("WCOD",Qc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Jc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Jc)+"$"),eh=["material","materials","bones","map"],th=function(){return p((function e(t,n,r){v(this,e);var i=r||nh.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}),[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}])}(),nh=function(){function e(t,n,r){v(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return p(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Zc,"")}},{key:"parseTrackName",value:function(e){var t=$c.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==eh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var a=r(i.children);if(a)return a}return null},i=r(e.children);if(i)return i}return null}}])}();nh.Composite=th,nh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},nh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},nh.prototype.GetterByBindingType=[nh.prototype._getValue_direct,nh.prototype._getValue_array,nh.prototype._getValue_arrayElement,nh.prototype._getValue_toArray],nh.prototype.SetterByBindingTypeAndVersioning=[[nh.prototype._setValue_direct,nh.prototype._setValue_direct_setNeedsUpdate,nh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nh.prototype._setValue_array,nh.prototype._setValue_array_setNeedsUpdate,nh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nh.prototype._setValue_arrayElement,nh.prototype._setValue_arrayElement_setNeedsUpdate,nh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nh.prototype._setValue_fromArray,nh.prototype._setValue_fromArray_setNeedsUpdate,nh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);var rh=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return v(this,t),(r=T(this,t,[e,n])).isInstancedInterleavedBuffer=!0,r.meshPerAttribute=i,r}return C(t,e),p(t,[{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var n=Xn(S(t.prototype),"clone",this).call(this,e);return n.meshPerAttribute=this.meshPerAttribute,n}},{key:"toJSON",value:function(e){var n=Xn(S(t.prototype),"toJSON",this).call(this,e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}])}(lc);var ih=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,e),this.radius=t,this.phi=n,this.theta=r,this}),[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(bi(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),ah=new Mi,oh=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mi(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi(-1/0,-1/0);v(this,e),this.isBox2=!0,this.min=t,this.max=n}),[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ah.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,ah).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}])}();"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Yn}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Yn);var sh=function(){function e(t,n,r,i,a){v(this,e),this.layerName=null!==t&&void 0!==t?t:null,this.blockName=null!==n&&void 0!==n?n:null,this.geometryType=null!==r&&void 0!==r?r:null,this.color=i,this.lineType=null!==a&&void 0!==a?a:null}return p(e,[{key:"Compare",value:function(e){var t=uh(this.layerName,e.layerName);return 0!==t||0!==(t=uh(this.blockName,e.blockName))||0!==(t=uh(this.geometryType,e.geometryType))||0!==(t=uh(this.color,e.color))?t:uh(this.lineType,e.lineType)}},{key:"IsIndexed",value:function(){return this.geometryType===e.GeometryType.INDEXED_LINES||this.geometryType===e.GeometryType.INDEXED_TRIANGLES}},{key:"IsInstanced",value:function(){return this.geometryType===e.GeometryType.BLOCK_INSTANCE||this.geometryType===e.GeometryType.POINT_INSTANCE}}])}();function uh(e,t){return null===e?null===t?0:-1:null===t?1:e<t?-1:e>t?1:0}sh.GeometryType=Object.freeze({POINTS:0,LINES:1,INDEXED_LINES:2,TRIANGLES:3,INDEXED_TRIANGLES:4,BLOCK_INSTANCE:5,POINT_INSTANCE:6});var lh=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;v(this,e),this.type=t,this.capacity=n,this.size=0,this.buffer=new(hh(t))(n)}),[{key:"GetSize",value:function(){return this.size}},{key:"Push",value:function(e){this._CheckGrow();var t=this.size;return this.buffer[t]=e,this.size++,t}},{key:"Get",value:function(e){if(e>=this.size)throw new Error("Index out of range: ".concat(e,"/").concat(this.size));return this.buffer[e]}},{key:"CopyTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;-1===r&&(r=this.size-n);var i=new(hh(this.type))(this.buffer.buffer,n,r);e.set(i,t)}},{key:"_CheckGrow",value:function(){if(!(this.size<this.capacity)){this.capacity*=2;var e=new(hh(this.type))(this.capacity);e.set(this.buffer),this.buffer=e}}}])}(),ch={INT8:0,UINT8:1,UINT8_CLAMPED:2,INT16:3,UINT16:4,INT32:5,UINT32:6,INT64:7,UINT64:8,FLOAT32:9,FLOAT64:10};function hh(e){switch(e){case ch.INT8:return Int8Array;case ch.UINT8:return Uint8Array;case ch.UINT8_CLAMPED:return Uint8ClampedArray;case ch.INT16:return Int16Array;case ch.UINT16:return Uint16Array;case ch.INT32:return Int32Array;case ch.UINT32:return Uint32Array;case ch.FLOAT32:return Float32Array;case ch.FLOAT64:return Float64Array;default:throw new Error("Unrecognized native type: "+e)}}var dh=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];Math.PI,Math.PI;function fh(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(dh[255&e]+dh[e>>8&255]+dh[e>>16&255]+dh[e>>24&255]+"-"+dh[255&t]+dh[t>>8&255]+"-"+dh[t>>16&15|64]+dh[t>>24&255]+"-"+dh[63&n|128]+dh[n>>8&255]+"-"+dh[n>>16&255]+dh[n>>24&255]+dh[255&r]+dh[r>>8&255]+dh[r>>16&255]+dh[r>>24&255]).toLowerCase()}function ph(e,t,n){return Math.max(t,Math.min(n,e))}function vh(e,t){return(e%t+t)%t}function gh(e,t,n){return(1-n)*e+n*t}var mh="srgb",yh="srgb-linear",bh="display-p3-linear",xh="linear",Eh="srgb",wh="rec709",kh=2e3,Sh=function(){return p((function e(t,n,r,i,a,o,s,u,l){v(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l)}),[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],v=r[3],g=r[6],m=r[1],y=r[4],b=r[7],x=r[2],E=r[5],w=r[8];return i[0]=a*p+o*m+s*x,i[3]=a*v+o*y+s*E,i[6]=a*g+o*b+s*w,i[1]=u*p+l*m+c*x,i[4]=u*v+l*y+c*E,i[7]=u*g+l*b+c*w,i[2]=h*p+d*m+f*x,i[5]=h*v+d*y+f*E,i[8]=h*g+d*b+f*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,d=u*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(_h.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(_h.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(_h.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),_h=new Sh,Mh=(new Sh).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Th=(new Sh).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ah=P(P(P(P({},yh,{transfer:xh,primaries:wh,toReference:function(e){return e},fromReference:function(e){return e}}),mh,{transfer:Eh,primaries:wh,toReference:function(e){return e.convertSRGBToLinear()},fromReference:function(e){return e.convertLinearToSRGB()}}),bh,{transfer:xh,primaries:"p3",toReference:function(e){return e.applyMatrix3(Th)},fromReference:function(e){return e.applyMatrix3(Mh)}}),"display-p3",{transfer:Eh,primaries:"p3",toReference:function(e){return e.convertSRGBToLinear().applyMatrix3(Th)},fromReference:function(e){return e.applyMatrix3(Mh).convertLinearToSRGB()}}),Ch=new Set([yh,bh]),Ph={enabled:!0,_workingColorSpace:yh,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Ch.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=Ah[t].toReference;return(0,Ah[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Ah[e].primaries},getTransfer:function(e){return""===e?xh:Ah[e].transfer}};function Rh(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Nh(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lh={h:0,s:0,l:0},Dh={h:0,s:0,l:0};function Ih(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var Fh=function(){return p((function e(t,n,r){return v(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}),[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mh;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ph.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ph.workingColorSpace;return this.r=e,this.g=t,this.b=n,Ph.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ph.workingColorSpace;if(e=vh(e,1),t=ph(t,0,1),n=ph(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=Ih(a,i,e+1/3),this.g=Ih(a,i,e),this.b=Ih(a,i,e-1/3)}return Ph.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mh;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mh,n=Oh[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=Rh(e.r),this.g=Rh(e.g),this.b=Rh(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Nh(e.r),this.g=Nh(e.g),this.b=Nh(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mh;return Ph.fromWorkingColorSpace(Uh.copy(this),e),65536*Math.round(ph(255*Uh.r,0,255))+256*Math.round(ph(255*Uh.g,0,255))+Math.round(ph(255*Uh.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mh;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ph.workingColorSpace;Ph.fromWorkingColorSpace(Uh.copy(this),t);var n,r,i=Uh.r,a=Uh.g,o=Uh.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ph.workingColorSpace;return Ph.fromWorkingColorSpace(Uh.copy(this),t),e.r=Uh.r,e.g=Uh.g,e.b=Uh.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mh;Ph.fromWorkingColorSpace(Uh.copy(this),e);var t=Uh.r,n=Uh.g,r=Uh.b;return e!==mh?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Lh),this.setHSL(Lh.h+e,Lh.s+t,Lh.l+n)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Lh),e.getHSL(Dh);var n=gh(Lh.h,Dh.h,t),r=gh(Lh.s,Dh.s,t),i=gh(Lh.l,Dh.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}])}(),Uh=new Fh;Fh.NAMES=Oh;var Bh=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),e.prototype.isVector2=!0,this.x=t,this.y=n}),[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(ph(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}])}(),zh=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=i}),[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(ph(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||u!==d||l!==f){var v=1-o,g=s*h+u*d+l*f+c*p,m=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*m);v=Math.sin(v*x)/b,o=Math.sin(o*x)/b}var E=o*m;if(s=s*v+h*E,u=u*v+d*E,l=l*v+f*E,c=c*v+p*E,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+l*c+s*d-u*h,e[t+1]=s*f+l*h+u*c-o*d,e[t+2]=u*f+l*d+o*h-s*c,e[t+3]=l*f-o*c-s*h-u*d,e}}])}(),Gh=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}),[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(jh.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(jh.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=2*(a*r-o*n),l=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*u+a*c-o*l,this.y=n+s*l+o*u-i*c,this.z=r+s*c+i*l-a*u,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Hh.copy(this).projectOnVector(e),this.sub(Hh)}},{key:"reflect",value:function(e){return this.sub(Hh.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(ph(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}])}(),Hh=new Gh,jh=new zh,Vh=function(){function e(t,n,r,i,a,o,s,u,l,c,h,d,f,p,g,m){v(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l,c,h,d,f,p,g,m)}return p(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/Wh.setFromMatrixColumn(e,0).length(),i=1/Wh.setFromMatrixColumn(e,1).length(),a=1/Wh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,d=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+f*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=f+d*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,g=s*c,m=u*l,y=u*c;t[0]=v+y*o,t[4]=m*o-g,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=g*o-m,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,x=s*c,E=u*l,w=u*c;t[0]=b-w*o,t[4]=-a*c,t[8]=E+x*o,t[1]=x+E*o,t[5]=a*l,t[9]=w-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var k=a*l,S=a*c,_=o*l,M=o*c;t[0]=s*l,t[4]=_*u-S,t[8]=k*u+M,t[1]=s*c,t[5]=M*u+k,t[9]=S*u-_,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,A=a*u,C=o*s,P=o*u;t[0]=s*l,t[4]=P-T*c,t[8]=C*c+A,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=A*c+C,t[10]=T-P*c}else if("XZY"===e.order){var R=a*s,N=a*u,O=o*s,L=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=R*c+L,t[5]=a*l,t[9]=N*c-O,t[2]=O*c-N,t[6]=o*l,t[10]=L*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Yh,e,qh)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return Jh.subVectors(e,t),0===Jh.lengthSq()&&(Jh.z=1),Jh.normalize(),Kh.crossVectors(n,Jh),0===Kh.lengthSq()&&(1===Math.abs(n.z)?Jh.x+=1e-4:Jh.z+=1e-4,Jh.normalize(),Kh.crossVectors(n,Jh)),Kh.normalize(),Zh.crossVectors(Jh,Kh),r[0]=Kh.x,r[4]=Zh.x,r[8]=Jh.x,r[1]=Kh.y,r[5]=Zh.y,r[9]=Jh.y,r[2]=Kh.z,r[6]=Zh.z,r[10]=Jh.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],g=n[14],m=n[3],y=n[7],b=n[11],x=n[15],E=r[0],w=r[4],k=r[8],S=r[12],_=r[1],M=r[5],T=r[9],A=r[13],C=r[2],P=r[6],R=r[10],N=r[14],O=r[3],L=r[7],D=r[11],I=r[15];return i[0]=a*E+o*_+s*C+u*O,i[4]=a*w+o*M+s*P+u*L,i[8]=a*k+o*T+s*R+u*D,i[12]=a*S+o*A+s*N+u*I,i[1]=l*E+c*_+h*C+d*O,i[5]=l*w+c*M+h*P+d*L,i[9]=l*k+c*T+h*R+d*D,i[13]=l*S+c*A+h*N+d*I,i[2]=f*E+p*_+v*C+g*O,i[6]=f*w+p*M+v*P+g*L,i[10]=f*k+p*T+v*R+g*D,i[14]=f*S+p*A+v*N+g*I,i[3]=m*E+y*_+b*C+x*O,i[7]=m*w+y*M+b*P+x*L,i[11]=m*k+y*T+b*R+x*D,i[15]=m*S+y*A+b*N+x*I,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*u*h+i*a*h-r*a*d+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+n*a*d+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],g=e[15],m=c*v*u-p*h*u+p*s*d-o*v*d-c*s*g+o*h*g,y=f*h*u-l*v*u-f*s*d+a*v*d+l*s*g-a*h*g,b=l*p*u-f*c*u+f*o*d-a*p*d-l*o*g+a*c*g,x=f*c*s-l*p*s-f*o*h+a*p*h+l*o*v-a*c*v,E=t*m+n*y+r*b+i*x;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/E;return e[0]=m*w,e[1]=(p*h*i-c*v*i-p*r*d+n*v*d+c*r*g-n*h*g)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*g+n*s*g)*w,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*d-n*s*d)*w,e[4]=y*w,e[5]=(l*v*i-f*h*i+f*r*d-t*v*d-l*r*g+t*h*g)*w,e[6]=(f*s*i-a*v*i-f*r*u+t*v*u+a*r*g-t*s*g)*w,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*d+t*s*d)*w,e[8]=b*w,e[9]=(f*c*i-l*p*i-f*n*d+t*p*d+l*n*g-t*c*g)*w,e[10]=(a*p*i-f*o*i+f*n*u-t*p*u-a*n*g+t*o*g)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*d-t*o*d)*w,e[12]=x*w,e[13]=(l*p*r-f*c*r+f*n*h-t*p*h-l*n*v+t*c*v)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,d=i*l,f=i*c,p=a*l,v=a*c,g=o*c,m=s*u,y=s*l,b=s*c,x=n.x,E=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*E,r[5]=(1-(h+g))*E,r[6]=(v+m)*E,r[7]=0,r[8]=(f+y)*w,r[9]=(v-m)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=Wh.set(r[0],r[1],r[2]).length(),a=Wh.set(r[4],r[5],r[6]).length(),o=Wh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Xh.copy(this);var s=1/i,u=1/a,l=1/o;return Xh.elements[0]*=s,Xh.elements[1]*=s,Xh.elements[2]*=s,Xh.elements[4]*=u,Xh.elements[5]*=u,Xh.elements[6]*=u,Xh.elements[8]*=l,Xh.elements[9]*=l,Xh.elements[10]*=l,t.setFromRotationMatrix(Xh),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kh,l=this.elements,c=2*i/(t-e),h=2*i/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r);if(u===kh)o=-(a+i)/(a-i),s=-2*a*i/(a-i);else{if(2001!==u)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);o=-a/(a-i),s=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=o,l[14]=s,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kh,l=this.elements,c=1/(t-e),h=1/(n-r),d=1/(a-i),f=(t+e)*c,p=(n+r)*h;if(u===kh)o=(a+i)*d,s=-2*d;else{if(2001!==u)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);o=i*d,s=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=s,l[14]=-o,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}])}(),Wh=new Gh,Xh=new Vh,Yh=new Gh(0,0,0),qh=new Gh(1,1,1),Kh=new Gh,Zh=new Gh,Jh=new Gh,Qh=function(){return p((function e(){v(this,e),this.type="Curve",this.arcLengthDivisions=200}),[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Bh:new Gh);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Gh,r=[],i=[],a=[],o=new Gh,s=new Vh,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new Gh)}i[0]=new Gh,a[0]=new Gh;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(ph(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var g=Math.acos(ph(i[0].dot(i[e]),-1,1));g/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(g=-g);for(var m=1;m<=e;m++)i[m].applyMatrix4(s.makeRotationAxis(r[m],g*m)),a[m].crossVectors(r[m],i[m])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}])}(),$h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return v(this,t),(e=T(this,t)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=n,e.aY=r,e.xRadius=i,e.yRadius=a,e.aStartAngle=o,e.aEndAngle=s,e.aClockwise=u,e.aRotation=l,e}return C(t,e),p(t,[{key:"getPoint",value:function(e,t){for(var n=t||new Bh,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}])}(Qh),ed=function(e){function t(e,n,r,i,a,o){var s;return v(this,t),(s=T(this,t,[e,n,r,r,i,a,o])).isArcCurve=!0,s.type="ArcCurve",s}return C(t,e),p(t)}($h);function td(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var nd=new Gh,rd=new td,id=new td,ad=new td,od=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return v(this,t),(e=T(this,t)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=n,e.closed=r,e.curveType=i,e.tension=a,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),u=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===u&&s===a-1&&(s=a-2,u=1),this.closed||s>0?t=i[(s-1)%a]:(nd.subVectors(i[0],i[1]).add(i[0]),t=nd);var l=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?n=i[(s+2)%a]:(nd.subVectors(i[a-1],i[a-2]).add(i[a-1]),n=nd),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(l),h),f=Math.pow(l.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(n),h);f<1e-4&&(f=1),d<1e-4&&(d=f),p<1e-4&&(p=f),rd.initNonuniformCatmullRom(t.x,l.x,c.x,n.x,d,f,p),id.initNonuniformCatmullRom(t.y,l.y,c.y,n.y,d,f,p),ad.initNonuniformCatmullRom(t.z,l.z,c.z,n.z,d,f,p)}else"catmullrom"===this.curveType&&(rd.initCatmullRom(t.x,l.x,c.x,n.x,this.tension),id.initCatmullRom(t.y,l.y,c.y,n.y,this.tension),ad.initCatmullRom(t.z,l.z,c.z,n.z,this.tension));return r.set(rd.calc(u),id.calc(u),ad.calc(u)),r}},{key:"copy",value:function(e){Xn(S(t.prototype),"copy",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);e.points=[];for(var n=0,r=this.points.length;n<r;n++){var i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Xn(S(t.prototype),"fromJSON",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push((new Gh).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}])}(Qh);function sd(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function ud(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ld(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var cd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Bh,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Bh;return v(this,t),(e=T(this,t)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=n,e.v1=r,e.v2=i,e.v3=a,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ld(e,n.x,r.x,i.x,a.x),ld(e,n.y,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(Qh),hd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gh,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Gh;return v(this,t),(e=T(this,t)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=n,e.v1=r,e.v2=i,e.v3=a,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ld(e,n.x,r.x,i.x,a.x),ld(e,n.y,r.y,i.y,a.y),ld(e,n.z,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(Qh),dd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh;return v(this,t),(e=T(this,t)).isLineCurve=!0,e.type="LineCurve",e.v1=n,e.v2=r,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Qh),fd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh;return v(this,t),(e=T(this,t)).isLineCurve3=!0,e.type="LineCurve3",e.v1=n,e.v2=r,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Qh),pd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Bh;return v(this,t),(e=T(this,t)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=n,e.v1=r,e.v2=i,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh,n=this.v0,r=this.v1,i=this.v2;return t.set(ud(e,n.x,r.x,i.x),ud(e,n.y,r.y,i.y)),t}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Qh),vd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gh,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gh;return v(this,t),(e=T(this,t)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=n,e.v1=r,e.v2=i,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gh,n=this.v0,r=this.v1,i=this.v2;return t.set(ud(e,n.x,r.x,i.x),ud(e,n.y,r.y,i.y),ud(e,n.z,r.z,i.z)),t}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Qh),gd=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v(this,t),(e=T(this,t)).isSplineCurve=!0,e.type="SplineCurve",e.points=n,e}return C(t,e),p(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bh,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],u=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2];return t.set(sd(a,o.x,s.x,u.x,l.x),sd(a,o.y,s.y,u.y,l.y)),t}},{key:"copy",value:function(e){Xn(S(t.prototype),"copy",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);e.points=[];for(var n=0,r=this.points.length;n<r;n++){var i=this.points[n];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){Xn(S(t.prototype),"fromJSON",this).call(this,e),this.points=[];for(var n=0,r=e.points.length;n<r;n++){var i=e.points[n];this.points.push((new Bh).fromArray(i))}return this}}])}(Qh),md=function(t){function n(){var e;return v(this,n),(e=T(this,n)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return C(n,t),p(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(n)){var r=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new e[r](n,t))}return this}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),u=0===s?0:1-a/s;return o.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Xn(S(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Xn(S(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(t){Xn(S(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var r=0,i=t.curves.length;r<i;r++){var a=t.curves[r];this.curves.push((new e[a.type]).fromJSON(a))}return this}}])}(Qh),yd=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).type="Path",n.currentPoint=new Bh,e&&n.setFromPoints(e),n}return C(t,e),p(t,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new dd(this.currentPoint.clone(),new Bh(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new pd(this.currentPoint.clone(),new Bh(e,t),new Bh(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new cd(this.currentPoint.clone(),new Bh(e,t),new Bh(n,r),new Bh(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new gd(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new $h(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Xn(S(t.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Xn(S(t.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}])}(md),bd=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).uuid=fh(),n.type="Shape",n.holes=[],n}return C(t,e),p(t,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Xn(S(t.prototype),"copy",this).call(this,e),this.holes=[];for(var n=0,r=e.holes.length;n<r;n++){var i=e.holes[n];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Xn(S(t.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var n=0,r=this.holes.length;n<r;n++){var i=this.holes[n];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Xn(S(t.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var n=0,r=e.holes.length;n<r;n++){var i=e.holes[n];this.holes.push((new yd).fromJSON(i))}return this}}])}(yd),xd=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,d=Ed(e,0,h,l,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Ed(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Nd(o));for(s.sort(Ad),i=0;i<s.length;i++)n=Cd(s[i],n);return n}(e,t,d,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<h;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?32767/u:0}return kd(d,f,l,n,r,u,0),f};function Ed(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Hd(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Hd(a,e[a],e[a+1],o);return o&&Id(o,o.next)&&(jd(o),o=o.next),o}function wd(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Id(r,r.next)&&0!==Dd(r.prev,r,r.next))r=r.next;else{if(jd(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function kd(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Rd(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?_d(e,r,i,a):Sd(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),jd(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?kd(e=Md(wd(e),t,n),t,n,r,i,a,2):2===o&&Td(e,t,n,r,i,a):kd(wd(e),t,n,r,i,a,1);break}}}function Sd(e){var t=e.prev,n=e,r=e.next;if(Dd(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,l=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<u?s<l?s:l:u<l?u:l,d=i>a?i>o?i:o:a>o?a:o,f=s>u?s>l?s:l:u>l?u:l,p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Od(i,s,a,u,o,l,p.x,p.y)&&Dd(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function _d(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Dd(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,l=o.x,c=i.y,h=a.y,d=o.y,f=s<u?s<l?s:l:u<l?u:l,p=c<h?c<d?c:d:h<d?h:d,v=s>u?s>l?s:l:u>l?u:l,g=c>h?c>d?c:d:h>d?h:d,m=Rd(f,p,t,n,r),y=Rd(v,g,t,n,r),b=e.prevZ,x=e.nextZ;b&&b.z>=m&&x&&x.z<=y;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Od(s,c,u,h,l,d,b.x,b.y)&&Dd(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=f&&x.x<=v&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&Od(s,c,u,h,l,d,x.x,x.y)&&Dd(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=m;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Od(s,c,u,h,l,d,b.x,b.y)&&Dd(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&Od(s,c,u,h,l,d,x.x,x.y)&&Dd(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Md(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Id(i,a)&&Fd(i,r,r.next,a)&&zd(i,a)&&zd(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),jd(r),jd(r.next),r=e=a),r=r.next}while(r!==e);return wd(r)}function Td(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ld(o,s)){var u=Gd(o,s);return o=wd(o,o.next),u=wd(u,u.next),kd(o,t,n,r,i,a,0),void kd(u,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Ad(e,t){return e.x-t.x}function Cd(e,t){var n=function(e,t){var n,r=t,i=-1/0,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===a))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&Od(o<h?a:i,o,c,h,o<h?i:a,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(a-r.x),zd(r,e)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&Pd(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=Gd(n,e);return wd(r,r.next),wd(n,n.next)}function Pd(e,t){return Dd(e.prev,e,t.prev)<0&&Dd(t.next,e,e.next)<0}function Rd(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Nd(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Od(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Ld(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(zd(e,t)&&zd(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Dd(e.prev,e,t.prev)||Dd(e,t.prev,t))||Id(e,t)&&Dd(e.prev,e,e.next)>0&&Dd(t.prev,t,t.next)>0)}function Dd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Id(e,t){return e.x===t.x&&e.y===t.y}function Fd(e,t,n,r){var i=Bd(Dd(e,t,n)),a=Bd(Dd(e,t,r)),o=Bd(Dd(n,r,e)),s=Bd(Dd(n,r,t));return i!==a&&o!==s||(!(0!==i||!Ud(e,n,t))||(!(0!==a||!Ud(e,r,t))||(!(0!==o||!Ud(n,e,r))||!(0!==s||!Ud(n,t,r)))))}function Ud(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Bd(e){return e>0?1:e<0?-1:0}function zd(e,t){return Dd(e.prev,e,e.next)<0?Dd(e,t,e.next)>=0&&Dd(e,e.prev,t)>=0:Dd(e,t,e.prev)<0||Dd(e,e.next,t)<0}function Gd(e,t){var n=new Vd(e.i,e.x,e.y),r=new Vd(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Hd(e,t,n,r){var i=new Vd(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Wd=function(){function e(){v(this,e)}return p(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];Xd(e),Yd(n,e);var a=e.length;t.forEach(Xd);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Yd(n,t[o]);for(var s=xd(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}])}();function Xd(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yd(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var qd=function(){return p((function e(){v(this,e),this.type="ShapePath",this.color=new Fh,this.subPaths=[],this.currentPath=null}),[{key:"moveTo",value:function(e,t){return this.currentPath=new yd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var n,r,i,a=Wd.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return r=o[0],(i=new bd).curves=r.curves,s.push(i),s;var u=!a(o[0].getPoints());u=e?!u:u;var l,c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var v=0,g=o.length;v<g;v++)n=a(l=(r=o[v]).getPoints()),(n=e?!n:n)?(!u&&d[p]&&p++,d[p]={s:new bd,p:l},d[p].s.curves=r.curves,u&&p++,f[p]=[]):f[p].push({h:r,p:l[0]});if(!d[0])return function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new bd;a.curves=i.curves,t.push(a)}return t}(o);if(d.length>1){for(var m=!1,y=0,b=0,x=d.length;b<x;b++)h[b]=[];for(var E=0,w=d.length;E<w;E++)for(var k=f[E],S=0;S<k.length;S++){for(var _=k[S],M=!0,T=0;T<d.length;T++)t(_.p,d[T].p)&&(E!==T&&y++,M?(M=!1,h[T].push(_)):m=!0);M&&h[E].push(_)}y>0&&!1===m&&(f=h)}for(var A=0,C=d.length;A<C;A++){i=d[A].s,s.push(i);for(var P=0,R=(c=f[A]).length;P<R;P++)i.holes.push(c[P].h)}return s}}])}(),Kd=Object.freeze({TEXT:0,ESCAPE:1,SKIP_FORMAT:2,PARAGRAPH1:3,PARAGRAPH2:4,PARAGRAPH3:5}),Zd=Object.freeze({TEXT:0,SCOPE:1,PARAGRAPH:2,NON_BREAKING_SPACE:3,PARAGRAPH_ALIGNMENT:4}),Jd=new Set(["L","l","O","o","K","k","P","X","~"]),Qd=new Set(["f","F","p","Q","H","W","S","A","C","T"]),$d=new Set(["\\","{","}"]),ef=function(){return p((function e(){v(this,e),this.entities=[]}),[{key:"Parse",value:function(e){var t=e.length,n=0,r=Kd.TEXT,i=[],a=this.entities,o=0,s=this;function u(){r===Kd.TEXT&&n!==o&&(a.push({type:Zd.TEXT,content:e.slice(n,o)}),n=o)}function l(e){a.push({type:e})}function c(){var e={type:Zd.SCOPE,content:[]};a.push(e),a=e.content,i.push(e)}for(;o<t;o++){var h=e.charAt(o);switch(r){case Kd.TEXT:if("{"===h){u(),c(),n=o+1;continue}if("}"===h){u(),0!==i.length&&(i.pop(),a=0===i.length?s.entities:i[i.length-1].content),n=o+1;continue}if("\\"===h){u(),r=Kd.ESCAPE;continue}continue;case Kd.ESCAPE:if(Jd.has(h)){switch(h){case"P":l(Zd.PARAGRAPH);break;case"~":l(Zd.NON_BREAKING_SPACE)}r=Kd.TEXT,n=o+1;continue}if(Qd.has(h)){if("p"===h){r=Kd.PARAGRAPH1;continue}r=Kd.SKIP_FORMAT;continue}n=$d.has(h)?o:o-1,r=Kd.TEXT;continue;case Kd.PARAGRAPH1:r="x"===h?Kd.PARAGRAPH2:Kd.SKIP_FORMAT;continue;case Kd.PARAGRAPH2:r="q"===h?Kd.PARAGRAPH3:Kd.SKIP_FORMAT;continue;case Kd.PARAGRAPH3:a.push({type:Zd.PARAGRAPH_ALIGNMENT,alignment:h}),r=Kd.SKIP_FORMAT;continue;case Kd.SKIP_FORMAT:";"===h&&(n=o+1,r=Kd.TEXT);continue;default:throw new Error("Unhandled state")}}u()}},{key:"GetContent",value:function(){return this.entities}},{key:"GetText",value:u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){var r,i,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=D(e),t.prev=1,r.s();case 3:if((i=r.n()).done){t.next=14;break}if((a=i.value).type!==Zd.TEXT){t.next=10;break}return t.next=8,a.content;case 8:t.next=12;break;case 10:if(a.type!==Zd.SCOPE){t.next=12;break}return t.delegateYield(n(a.content),"t0",12);case 12:t.next=3;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(1),r.e(t.t1);case 19:return t.prev=19,r.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[1,16,19,22]])},t=u().mark(n),e.delegateYield(n(this.GetContent()),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))}])}();ef.EntityType=Zd;var tf=/(?:%%([dpcou%]))|(?:\\U\+([0-9a-fA-F]{4}))/g;function nf(e){return e.replaceAll(tf,(function(e,t,n){if(void 0!==t)switch(t){case"d":return"\xb0";case"p":return"\xb1";case"c":return"\u2205";case"o":case"u":return"";case"%":return"%"}else if(void 0!==n){var r=parseInt(n,16);return isNaN(r)?e:String.fromCharCode(r)}return e}))}var rf=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(this,e),this.fontFetchers=t,this.fonts=[],this.options=Object.create(e.DefaultOptions),n&&Object.assign(this.options,n),this.shapes=new Map,this.stubShapeLoaded=!1,this.stubShape=null}),[{key:"FetchFonts",value:function(){var e=c(u().mark((function e(t){var n,r,i,a,o,s,l,c,h,d,f,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stubShapeLoaded){e.next=13;break}this.stubShapeLoaded=!0,n=0,r=Array.from(this.options.fallbackChar);case 3:if(!(n<r.length)){e.next=13;break}return i=r[n],e.next=7,this.FetchFonts(i);case 7:if(!e.sent){e.next=10;break}return this.stubShape=this._CreateCharShape(i),e.abrupt("break",13);case 10:n++,e.next=3;break;case 13:a=!1,o=D(t),e.prev=15,o.s();case 17:if((s=o.n()).done){e.next=58;break}if(!((l=s.value).codePointAt(0)<32)){e.next=21;break}return e.abrupt("continue",56);case 21:c=!1,h=D(this.fonts),e.prev=23,h.s();case 25:if((d=h.n()).done){e.next=32;break}if(!d.value.HasChar(l)){e.next=30;break}return c=!0,e.abrupt("break",32);case 30:e.next=25;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(23),h.e(e.t0);case 37:return e.prev=37,h.f(),e.finish(37);case 40:if(!c){e.next=42;break}return e.abrupt("continue",56);case 42:if(this.fontFetchers){e.next=44;break}return e.abrupt("return",!1);case 44:if(!(this.fontFetchers.length>0)){e.next=55;break}return f=this.fontFetchers.shift(),e.next=48,this._FetchFont(f);case 48:if(p=e.sent,this.fonts.push(p),!p.HasChar(l)){e.next=53;break}return c=!0,e.abrupt("break",55);case 53:e.next=44;break;case 55:c||(a=!0);case 56:e.next=17;break;case 58:e.next=63;break;case 60:e.prev=60,e.t1=e.catch(15),o.e(e.t1);case 63:return e.prev=63,o.f(),e.finish(63);case 66:return e.abrupt("return",!a);case 67:case"end":return e.stop()}}),e,this,[[15,60,63,66],[23,34,37,40]])})));return function(t){return e.apply(this,arguments)}}()},{key:"canRender",get:function(){return null!==this.fonts&&this.fonts.length>0}},{key:"GetLineWidth",value:function(e,t){var n,r=new hf(t),i=D(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=this._GetCharShape(a);o&&r.PushChar(a,o)}}catch(s){i.e(s)}finally{i.f()}return r.GetCurrentPosition()}},{key:"Render",value:function(e){var t=this,n=e.text,r=e.startPos,i=e.endPos,a=e.rotation,o=void 0===a?0:a,s=e.widthFactor,l=void 0===s?1:s,c=e.hAlign,h=void 0===c?0:c,d=e.vAlign,f=void 0===d?0:d,p=e.color,v=e.layer,g=void 0===v?null:v,m=e.fontSize;return u().mark((function e(){var a,s,c,d,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new hf(m),s=D(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=12;break}if(d=c.value,v=t._GetCharShape(d)){e.next=9;break}return e.abrupt("continue",10);case 9:a.PushChar(d,v);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:return e.delegateYield(a.Render(r,i,o,l,h,f,p,g),"t1",21);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))()}},{key:"RenderMText",value:function(e){var t=this,n=e.formattedText,r=e.position,i=e.fontSize,a=e.width,o=void 0===a?null:a,s=e.rotation,l=void 0===s?0:s,c=e.direction,h=void 0===c?null:c,d=e.attachment,f=e.lineSpacing,p=void 0===f?1:f,v=e.color,g=e.layer,m=void 0===g?null:g;return u().mark((function e(){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new cf(i,t._GetCharShape.bind(t))).FeedText(n),e.delegateYield(a.Render(r,o,l,h,d,p,v,m),"t0",3);case 3:case"end":return e.stop()}}),e)}))()}},{key:"_GetCharShape",value:function(e){var t=this.shapes.get(e);return t||(t=this._CreateCharShape(e),this.shapes.set(e,t),t)}},{key:"_CreateCharShape",value:function(e){var t,n=D(this.fonts);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.GetCharPath(e);if(i)return new af(r,i,this.options)}}catch(a){n.e(a)}finally{n.f()}return this.stubShape}},{key:"_FetchFont",value:function(){var e=c(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=of,e.next=3,t();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])}();rf.DefaultOptions={curveSubdivision:2,fallbackChar:"\ufffd?"};var af=function(){return p((function e(t,n,r){var i=this;if(v(this,e),this.font=t,this.advance=n.advance,this.bounds=n.bounds,n.path){var a=n.path.toShapes(!1);this.vertices=[],this.indices=[];var o,s=D(a);try{var u=function(){var e=o.value.extractPoints(r.curveSubdivision);if(!Wd.isClockWise(e.shape)){e.shape=e.shape.reverse();var t,n=D(e.holes);try{for(n.s();!(t=n.n()).done;){var a=t.value;Wd.isClockWise(a)&&(e.holes[h]=a.reverse())}}catch(b){n.e(b)}finally{n.f()}}var s=Wd.triangulateShape(e.shape,e.holes),u=i,l=i.vertices.length;function c(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;u.vertices.push(r)}}catch(b){n.e(b)}finally{n.f()}}c(e.shape);var d,f=D(e.holes);try{for(f.s();!(d=f.n()).done;){c(d.value)}}catch(b){f.e(b)}finally{f.f()}var p,v=D(s);try{for(v.s();!(p=v.n()).done;){var g,m=D(p.value);try{for(m.s();!(g=m.n()).done;){var y=g.value;i.indices.push(l+y)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){v.e(b)}finally{v.f()}};for(s.s();!(o=s.n()).done;)u()}catch(l){s.e(l)}finally{s.f()}}else this.vertices=null}),[{key:"GetVertices",value:function(e,t){return this.vertices.map((function(n){return n.clone().multiplyScalar(t).add(e)}))}}])}(),of=function(){return p((function e(t){v(this,e),this.data=t,this.charMap=new Map;for(var n=0,r=Object.values(t.glyphs.glyphs);n<r.length;n++){var i=r[n];void 0!==i.unicode&&this.charMap.set(String.fromCodePoint(i.unicode),i)}this.scale=100/(72*(this.data.unitsPerEm||2048))}),[{key:"HasChar",value:function(e){return this.charMap.has(e)}},{key:"GetCharPath",value:function(e){var t=this.charMap.get(e);if(!t)return null;var n,r=this.scale,i=new qd,a=D(t.path.commands);try{for(a.s();!(n=a.n()).done;){var o=n.value;switch(o.type){case"M":i.moveTo(o.x*r,o.y*r);break;case"L":i.lineTo(o.x*r,o.y*r);break;case"Q":i.quadraticCurveTo(o.x1*r,o.y1*r,o.x*r,o.y*r);break;case"C":i.bezierCurveTo(o.x1*r,o.y1*r,o.x2*r,o.y2*r,o.x*r,o.y*r)}}}catch(s){a.e(s)}finally{a.f()}return{advance:t.advanceWidth*r,path:i,bounds:{xMin:t.xMin*r,xMax:t.xMax*r,yMin:t.yMin*r,yMax:t.yMax*r}}}},{key:"GetKerning",value:function(e,t){var n=this.data.charToGlyphIndex(e);if(0===n)return 0;var r=this.data.charToGlyphIndex(e);return 0===r?0:this.data.getKerningValue(n,r)*this.scale}}])}(),sf=Object.freeze({LEFT:0,CENTER:1,RIGHT:2,ALIGNED:3,MIDDLE:4,FIT:5}),uf=Object.freeze({BASELINE:0,BOTTOM:1,MIDDLE:2,TOP:3}),lf=Object.freeze({TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,MIDDLE_LEFT:4,MIDDLE_CENTER:5,MIDDLE_RIGHT:6,BOTTOM_LEFT:7,BOTTOM_CENTER:8,BOTTOM_RIGHT:9}),cf=function(){function e(t,n){v(this,e),this.fontSize=t,this.charShapeProvider=n,this.curParagraph=new e.Paragraph(this),this.paragraphs=[this.curParagraph],this.spaceShape=n(" ")}return p(e,[{key:"FeedText",value:function(t){var n=u().mark(r);function r(e){var t,i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=D(e),n.prev=1,t.s();case 3:if((i=t.n()).done){n.next=13;break}if((a=i.value).type!==ef.EntityType.SCOPE){n.next=9;break}return n.delegateYield(r(a.content),"t0",7);case 7:n.next=11;break;case 9:return n.next=11,a;case 11:n.next=3;break;case 13:n.next=18;break;case 15:n.prev=15,n.t1=n.catch(1),t.e(n.t1);case 18:return n.prev=18,t.f(),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[1,15,18,21]])}var i,a=null,o=D(r(t));try{for(o.s();!(i=o.n()).done;){var s=i.value;switch(s.type){case ef.EntityType.TEXT:var l,c=D(s.content);try{for(c.s();!(l=c.n()).done;){var h=l.value;" "===h?this.curParagraph.FeedSpace():this.curParagraph.FeedChar(h)}}catch(f){c.e(f)}finally{c.f()}break;case ef.EntityType.PARAGRAPH:this.curParagraph=new e.Paragraph(this),this.curParagraph.SetAlignment(a),this.paragraphs.push(this.curParagraph);break;case ef.EntityType.NON_BREAKING_SPACE:this.curParagraph.FeedChar(" ");break;case ef.EntityType.PARAGRAPH_ALIGNMENT:var d=null;switch(s.alignment){case"l":d=e.Paragraph.Alignment.LEFT;break;case"c":d=e.Paragraph.Alignment.CENTER;break;case"r":d=e.Paragraph.Alignment.RIGHT;break;case"d":d=e.Paragraph.Alignment.JUSTIFY;break;case"j":d=null}this.curParagraph.SetAlignment(d),a=d}}}catch(f){o.e(f)}finally{o.f()}}},{key:"Render",value:u().mark((function t(n,r,i,a,o,s,l,c){var h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C,P,R,N,O,L,I,F,U;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h=D(this.paragraphs);try{for(h.s();!(d=h.n()).done;)d.value.BuildLines(r)}catch(u){h.e(u)}finally{h.f()}if(null===r||0===r){r=0,f=D(this.paragraphs);try{for(f.s();!(p=f.n()).done;)v=p.value,(g=v.GetMaxLineWidth())>r&&(r=g)}catch(u){f.e(u)}finally{f.f()}}m=e.Paragraph.Alignment.LEFT,t.t0=o,t.next=t.t0===lf.TOP_CENTER||t.t0===lf.MIDDLE_CENTER||t.t0===lf.BOTTOM_CENTER?7:t.t0===lf.TOP_RIGHT||t.t0===lf.MIDDLE_RIGHT||t.t0===lf.BOTTOM_RIGHT?9:11;break;case 7:return m=e.Paragraph.Alignment.CENTER,t.abrupt("break",11);case 9:return m=e.Paragraph.Alignment.RIGHT,t.abrupt("break",11);case 11:y=D(this.paragraphs);try{for(y.s();!(b=y.n()).done;)b.value.ApplyAlignment(r,m)}catch(u){y.e(u)}finally{y.f()}null!==a&&(i=180*Math.atan2(a.y,a.x)/Math.PI),x=5*s*this.fontSize/3,E=0,w=D(this.paragraphs);try{for(w.s();!(k=w.n()).done;)null===(S=k.value).lines?E++:E+=S.lines.length}catch(u){w.e(u)}finally{w.f()}E*=x,_=new Mi,t.t1=o,t.next=t.t1===lf.TOP_LEFT?23:t.t1===lf.TOP_CENTER?24:t.t1===lf.TOP_RIGHT?26:t.t1===lf.MIDDLE_LEFT?28:t.t1===lf.MIDDLE_CENTER?30:t.t1===lf.MIDDLE_RIGHT?33:t.t1===lf.BOTTOM_LEFT?36:t.t1===lf.BOTTOM_CENTER?38:t.t1===lf.BOTTOM_RIGHT?41:44;break;case 23:return t.abrupt("break",45);case 24:return _.x=r/2,t.abrupt("break",45);case 26:return _.x=r,t.abrupt("break",45);case 28:return _.y=-E/2,t.abrupt("break",45);case 30:return _.x=r/2,_.y=-E/2,t.abrupt("break",45);case 33:return _.x=r,_.y=-E/2,t.abrupt("break",45);case 36:return _.y=-E,t.abrupt("break",45);case 38:return _.x=r/2,_.y=-E,t.abrupt("break",45);case 41:return _.x=r,_.y=-E,t.abrupt("break",45);case 44:throw new Error("Unhandled alignment");case 45:M=(new Ti).translate(-_.x,-_.y).rotate(-i*Math.PI/180).translate(n.x,n.y),T=-this.fontSize,A=D(this.paragraphs),t.prev=48,A.s();case 50:if((C=A.n()).done){t.next=85;break}if(null!==(P=C.value).lines){t.next=55;break}return T-=x,t.abrupt("continue",83);case 55:R=D(P.lines),t.prev=56,R.s();case 58:if((N=R.n()).done){t.next=75;break}O=N.value,L=O.startChunkIdx;case 61:if(!(L<O.startChunkIdx+O.numChunks)){t.next=72;break}if(I=P.chunks[L],F=I.position,0!==L&&L===O.startChunkIdx||(F+=I.GetSpacingWidth()),(U=new Mi(F,T)).applyMatrix3(M),!I.block){t.next=69;break}return t.delegateYield(I.block.Render(U,null,i,null,sf.LEFT,uf.BASELINE,l,c),"t2",69);case 69:L++,t.next=61;break;case 72:T-=x;case 73:t.next=58;break;case 75:t.next=80;break;case 77:t.prev=77,t.t3=t.catch(56),R.e(t.t3);case 80:return t.prev=80,R.f(),t.finish(80);case 83:t.next=50;break;case 85:t.next=90;break;case 87:t.prev=87,t.t4=t.catch(48),A.e(t.t4);case 90:return t.prev=90,A.f(),t.finish(90);case 93:case"end":return t.stop()}}),t,this,[[48,87,90,93],[56,77,80,83]])}))}])}();cf.Paragraph=function(){return p((function e(t){v(this,e),this.textBox=t,this.chunks=[],this.curChunk=null,this.alignment=null,this.lines=null}),[{key:"FeedChar",value:function(e){var t=this.textBox.charShapeProvider(e);null!==t&&(null===this.curChunk&&this._AddChunk(),this.curChunk.PushChar(e,t))}},{key:"FeedSpace",value:function(){null!==this.curChunk&&null===this.curChunk.lastChar||this._AddChunk(),this.curChunk.PushSpace()}},{key:"SetAlignment",value:function(e){this.alignment=e}},{key:"BuildLines",value:function(e){var t=this;if(null!==this.curChunk){this.lines=[];for(var n=0,r=0,i=0,a=function(){t.lines.push(new cf.Paragraph.Line(t,n,r-n,i)),n=r,i=0};r<this.chunks.length;r++){var o=this.chunks[r],s=o.GetWidth(0===n||r!==n);null!==e&&0!==e&&0!==i&&i+s>e&&a(),o.position=i,i+=s}n!==r&&0!==i&&a()}}},{key:"GetMaxLineWidth",value:function(){if(null===this.lines)return 0;var e,t=0,n=D(this.lines);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.width>t&&(t=r.width)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"ApplyAlignment",value:function(e,t){if(this.lines){var n,r=D(this.lines);try{for(r.s();!(n=r.n()).done;){n.value.ApplyAlignment(e,t)}}catch(i){r.e(i)}finally{r.f()}}}},{key:"_AddChunk",value:function(){this.curChunk=new cf.Paragraph.Chunk(this,this.textBox.fontSize,this.curChunk),this.chunks.push(this.curChunk)}}])}(),cf.Paragraph.Alignment=Object.freeze({LEFT:0,CENTER:1,RIGHT:2,JUSTIFY:3}),cf.Paragraph.Chunk=function(){return p((function e(t,n,r){v(this,e),this.paragraph=t,this.fontSize=n,this.prevChunk=r,this.lastChar=null,this.lastShape=null,this.leadingSpaces=0,this.spaceStartKerning=null,this.spaceEndKerning=null,this.block=null,this.position=null}),[{key:"PushSpace",value:function(){if(this.block)throw new Error("Illegal operation");this.leadingSpaces++}},{key:"PushChar",value:function(e,t){null===this.spaceStartKerning&&(0===this.leadingSpaces?(this.spaceStartKerning=0,this.spaceEndKerning=0):(this.prevChunk&&this.prevChunk.lastShape&&this.prevChunk.fontSize===this.fontSize&&this.prevChunk.lastShape.font===this.paragraph.textBox.spaceShape.font?this.spaceStartKerning=this.prevChunk.lastShape.font.GetKerning(this.prevChunk.lastChar," "):this.spaceStartKerning=0,t.font===this.paragraph.textBox.spaceShape.font?this.spaceEndKerning=t.font.GetKerning(" ",e):this.spaceEndKerning=0)),null===this.block&&(this.block=new hf(this.fontSize)),this.block.PushChar(e,t),this.lastChar=e,this.lastShape=t}},{key:"GetSpacingWidth",value:function(){return(this.leadingSpaces*this.paragraph.textBox.spaceShape.advance+this.spaceStartKerning+this.spaceEndKerning)*this.fontSize}},{key:"GetWidth",value:function(e){if(null===this.block)return 0;var t=this.block.GetCurrentPosition();return e&&(t+=this.GetSpacingWidth()),t}}])}(),cf.Paragraph.Line=function(){return p((function e(t,n,r,i){v(this,e),this.paragraph=t,this.startChunkIdx=n,this.numChunks=r,this.width=i}),[{key:"ApplyAlignment",value:function(e,t){var n;switch(null!==(n=this.paragraph.alignment)&&void 0!==n?n:t){case cf.Paragraph.Alignment.LEFT:break;case cf.Paragraph.Alignment.CENTER:var r=(e-this.width)/2;this.ForEachChunk((function(e){return e.position+=r}));break;case cf.Paragraph.Alignment.RIGHT:var i=e-this.width;this.ForEachChunk((function(e){return e.position+=i}));break;case cf.Paragraph.Alignment.JUSTIFY:var a=e-this.width;if(a<=0||1===this.numChunks)break;var o=a/(this.numChunks-1),s=0;this.ForEachChunk((function(e){e.position+=s,s+=o}));break;default:throw new Error("Unhandled alignment: "+this.paragraph.alignment)}}},{key:"ForEachChunk",value:function(e){for(var t=0;t<this.numChunks;t++)e(this.paragraph.chunks[this.startChunkIdx+t])}}])}();var hf=function(){return p((function e(t){v(this,e),this.fontSize=t,this.glyphs=[],this.bounds=null,this.curX=0,this.prevChar=null,this.prevFont=null}),[{key:"PushChar",value:function(e,t){var n;n=null!==this.prevChar&&this.prevFont===t.font?this.prevFont.GetKerning(this.prevChar,e):0;var r,i=this.curX+n*this.fontSize;if(t.vertices){r=t.GetVertices({x:i,y:0},this.fontSize);var a=i+t.bounds.xMin*this.fontSize,o=i+t.bounds.xMax*this.fontSize,s=t.bounds.yMin*this.fontSize,u=t.bounds.yMax*this.fontSize;null===this.bounds?this.bounds={xMin:a,xMax:o,yMin:s,yMax:u}:(a<this.bounds.xMin&&(this.bounds.xMin=a),s<this.bounds.yMin&&(this.bounds.yMin=s),o>this.bounds.xMax&&(this.bounds.xMax=o),u>this.bounds.yMax&&(this.bounds.yMax=u))}else r=null;this.curX=i+t.advance*this.fontSize,this.glyphs.push({shape:t,vertices:r}),this.prevChar=e,this.prevFont=t.font}},{key:"GetCurrentPosition",value:function(){return this.curX}},{key:"Render",value:u().mark((function e(t,n,r,i,a,o,s,l){var c,h,d,f,p,v,g,m,y,b,x,E,w=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.bounds){e.next=2;break}return e.abrupt("return");case 2:n=null!==n&&void 0!==n?n:t,r?r*=-Math.PI/180:r=0,i=null!==i&&void 0!==i?i:1,a=null!==a&&void 0!==a?a:sf.LEFT,o=null!==o&&void 0!==o?o:uf.BASELINE,c=new Mi,h=new Mi(i,1),d=a===sf.LEFT&&o===uf.BASELINE||a===sf.FIT||a===sf.ALIGNED?new Mi(t.x,t.y):new Mi(n.x,n.y),f=function(){var e=n.x-t.x;return e<2*Number.MIN_VALUE?i:e/(w.bounds.xMax-w.bounds.xMin)},p=function(){return-Math.atan2(n.y-t.y,n.x-t.x)},e.t0=a,e.next=e.t0===sf.LEFT?15:e.t0===sf.CENTER?17:e.t0===sf.RIGHT?19:e.t0===sf.MIDDLE?21:e.t0===sf.ALIGNED?24:e.t0===sf.FIT?29:32;break;case 15:return c.x=this.bounds.xMin,e.abrupt("break",33);case 17:return c.x=(this.bounds.xMax-this.bounds.xMin)/2,e.abrupt("break",33);case 19:return c.x=this.bounds.xMax,e.abrupt("break",33);case 21:return c.x=(this.bounds.xMax-this.bounds.xMin)/2,c.y=(this.bounds.yMax-this.bounds.yMin)/2,e.abrupt("break",33);case 24:return v=f(),h.x=v,h.y=v,r=p(),e.abrupt("break",33);case 29:return h.x=f(),r=p(),e.abrupt("break",33);case 32:console.warn("Unrecognized hAlign value: "+a);case 33:e.t1=o,e.next=e.t1===uf.BASELINE?36:e.t1===uf.BOTTOM?37:e.t1===uf.MIDDLE?39:e.t1===uf.TOP?41:43;break;case 36:return e.abrupt("break",44);case 37:return c.y=this.bounds.yMin,e.abrupt("break",44);case 39:return c.y=(this.bounds.yMax-this.bounds.yMin)/2,e.abrupt("break",44);case 41:return c.y=this.bounds.yMax,e.abrupt("break",44);case 43:console.warn("Unrecognized vAlign value: "+o);case 44:g=(new Ti).translate(-c.x,-c.y).scale(h.x,h.y).rotate(r).translate(d.x,d.y),m=D(this.glyphs),e.prev=46,m.s();case 48:if((y=m.n()).done){e.next=57;break}if(!(b=y.value).vertices){e.next=55;break}x=D(b.vertices);try{for(x.s();!(E=x.n()).done;)E.value.applyMatrix3(g)}catch(u){x.e(u)}finally{x.f()}return e.next=55,new Uf({type:Uf.Type.TRIANGLES,vertices:b.vertices,indices:b.shape.indices,layer:l,color:s});case 55:e.next=48;break;case 57:e.next=62;break;case 59:e.prev=59,e.t2=e.catch(46),m.e(e.t2);case 62:return e.prev=62,m.f(),e.finish(62);case 65:case"end":return e.stop()}}),e,this,[[46,59,62,65]])}))}])}(),df=function(e){self;var t=function(e){var n=t.m[e];if(n.mod)return n.mod.exports;var r=n.mod={exports:{}};return n(r,r.exports),r.exports};return t.m={},t.m["./treebase"]=function(e,t){function n(){}function r(e){this._tree=e,this._ancestors=[],this._cursor=null}n.prototype.clear=function(){this._root=null,this.size=0},n.prototype.find=function(e){for(var t=this._root;null!==t;){var n=this._comparator(e,t.data);if(0===n)return t.data;t=t.get_child(n>0)}return null},n.prototype.findIter=function(e){for(var t=this._root,n=this.iterator();null!==t;){var r=this._comparator(e,t.data);if(0===r)return n._cursor=t,n;n._ancestors.push(t),t=t.get_child(r>0)}return null},n.prototype.lowerBound=function(e){for(var t=this._root,n=this.iterator(),r=this._comparator;null!==t;){var i=r(e,t.data);if(0===i)return n._cursor=t,n;n._ancestors.push(t),t=t.get_child(i>0)}for(var a=n._ancestors.length-1;a>=0;--a)if(r(e,(t=n._ancestors[a]).data)<0)return n._cursor=t,n._ancestors.length=a,n;return n._ancestors.length=0,n},n.prototype.upperBound=function(e){for(var t=this.lowerBound(e),n=this._comparator;null!==t.data()&&0===n(t.data(),e);)t.next();return t},n.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},n.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},n.prototype.iterator=function(){return new r(this)},n.prototype.each=function(e){for(var t,n=this.iterator();null!==(t=n.next());)e(t)},n.prototype.reach=function(e){for(var t,n=this.iterator();null!==(t=n.prev());)e(t)},r.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},r.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else{var t;if(null===this._cursor.right)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},r.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else{var t;if(null===this._cursor.left)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},r.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},r.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e.exports=n},t.m.__main__=function(e,n){var r=t("./treebase");function i(e){this.data=e,this.left=null,this.right=null,this.red=!0}function a(e){this._root=null,this._comparator=e,this.size=0}function o(e){return null!==e&&e.red}function s(e,t){var n=e.get_child(!t);return e.set_child(!t,n.get_child(t)),n.set_child(t,e),e.red=!0,n.red=!1,n}function u(e,t){return e.set_child(!t,s(e.get_child(!t),!t)),s(e,t)}i.prototype.get_child=function(e){return e?this.right:this.left},i.prototype.set_child=function(e,t){e?this.right=t:this.left=t},a.prototype=new r,a.prototype.insert=function(e){var t=!1;if(null===this._root)this._root=new i(e),t=!0,this.size++;else{var n=new i(void 0),r=0,a=0,l=null,c=n,h=null,d=this._root;for(c.right=this._root;;){if(null===d?(d=new i(e),h.set_child(r,d),t=!0,this.size++):o(d.left)&&o(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),o(d)&&o(h)){var f=c.right===l;d===h.get_child(a)?c.set_child(f,s(l,!a)):c.set_child(f,u(l,!a))}var p=this._comparator(d.data,e);if(0===p)break;a=r,r=p<0,null!==l&&(c=l),l=h,h=d,d=d.get_child(r)}this._root=n.right}return this._root.red=!1,t},a.prototype.remove=function(e){if(null===this._root)return!1;var t=new i(void 0),n=t;n.right=this._root;for(var r=null,a=null,l=null,c=1;null!==n.get_child(c);){var h=c;a=r,r=n,n=n.get_child(c);var d=this._comparator(e,n.data);if(c=d>0,0===d&&(l=n),!o(n)&&!o(n.get_child(c)))if(o(n.get_child(!c))){var f=s(n,c);r.set_child(h,f),r=f}else if(!o(n.get_child(!c))){var p=r.get_child(!h);if(null!==p)if(o(p.get_child(!h))||o(p.get_child(h))){var v=a.right===r;o(p.get_child(h))?a.set_child(v,u(r,h)):o(p.get_child(!h))&&a.set_child(v,s(r,h));var g=a.get_child(v);g.red=!0,n.red=!0,g.left.red=!1,g.right.red=!1}else r.red=!1,p.red=!0,n.red=!0}}return null!==l&&(l.data=n.data,r.set_child(r.right===n,n.get_child(null===n.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==l},e.exports=a},t("__main__")}(),ff=function(){return p((function e(){v(this,e),this.lines=[],this.triangles=[],this.texts=[]}),[{key:"AddLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.lines.push({start:e,end:t,color:n})}},{key:"AddTriangles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.triangles.push({vertices:e,indices:t,color:n})}},{key:"AddText",value:function(e,t,n,r,i){this.texts.push({text:e,size:t,angle:n,color:r,position:i})}}])}(),pf={vertices:[new Mi(0,0),new Mi(1,-.25),new Mi(1,.25)],indices:[0,1,2]},vf=function(){return p((function e(t,n,r){v(this,e),this.params=t,this.styleResolver=n,this.textWidthCalculator=r,this.isValid=!0,this._CalculateGeometry()}),[{key:"IsValid",value:function(){return this.isValid}},{key:"GetTexts",value:function(){return[this._GetText()]}},{key:"GenerateLayout",value:function(){var e,t,n,r,i,a,o,s,u,l,c=new ff,h=this.d1.distanceTo(this.d2),d=this.styleResolver("DIMCLRD"),f=null!==(e=this.styleResolver("DIMSCALE"))&&void 0!==e?e:1;0==f&&(f=1);var p=this._GetText(),v=(null!==(t=this.styleResolver("DIMTXT"))&&void 0!==t?t:1)*f,g=(this.textWidthCalculator(p,v),this.styleResolver("DIMCLRT")),m=(null!==(n=this.styleResolver("DIMASZ"))&&void 0!==n?n:1)*f,y=(null!==(r=this.styleResolver("DIMTSZ"))&&void 0!==r?r:0)*f,b=this.params.textAnchor,x=!1,E=this.d1.clone(),w=(null!==(i=this.styleResolver("DIMDLE"))&&void 0!==i?i:0)*f;0!=w&&E.add(this.vDim.clone().multiplyScalar(-w));var k=this.d2.clone();0!=w&&k.add(this.vDim.clone().multiplyScalar(w)),c.AddLine(E,k,d),h<2*m&&(x=!0),b||(b=this.vDim.clone().multiplyScalar(this.d1.distanceTo(this.d2)/2).add(this.d1).add(this.vDimNorm.clone().multiplyScalar(.75*v)));var S=180*this.vDimNorm.angle()/Math.PI-90+(null!==(a=this.params.textRotation)&&void 0!==a?a:0);c.AddText(p,v,S,g,b);var _=this.styleResolver("DIMCLRE"),M=(null!==(o=this.styleResolver("DIMEXO"))&&void 0!==o?o:0)*f,T=(null!==(s=this.styleResolver("DIMEXE"))&&void 0!==s?s:0)*f,A=function(e,t){var n=t.clone().sub(e);if(0!=n.length()){n.normalize();var r=e.clone();0!=M&&r.add(n.clone().multiplyScalar(M));var i=t.clone();0!=T&&i.add(n.clone().multiplyScalar(T)),c.AddLine(r,i,_)}};null!==(u=this.styleResolver("DIMSE1"))&&void 0!==u&&u||A(this.params.p1,this.d1),null!==(l=this.styleResolver("DIMSE2"))&&void 0!==l&&l||A(this.params.p2,this.d2);for(var C=0;C<2;C++){var P=0==C?this.d1:this.d2,R=1==C;x&&(R=!R);var N=(new Ti).identity();y>0?N.scale(y,y):(N.scale(m,m),R&&N.scale(-1,1));var O=-this.vDim.angle();N.rotate(O),N.translate(P.x,P.y),y>0?this._CreateTick(c,N,d):this._CreateArrowShape(c,N,d)}return c}},{key:"_CreateArrowShape",value:function(e,t,n){var r,i=[],a=D(pf.vertices);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(o.clone().applyMatrix3(t))}}catch(s){a.e(s)}finally{a.f()}e.AddTriangles(i,pf.indices,n)}},{key:"_CreateTick",value:function(e,t,n){e.AddLine(new Mi(.5,.5).applyMatrix3(t),new Mi(-.5,-.5).applyMatrix3(t),n)}},{key:"_CalculateGeometry",value:function(){if(this.vBase=this.params.p2.clone().sub(this.params.p1).normalize(),this.params.isAligned)this.vDim=this.vBase;else{var e,t=(null!==(e=this.params.angle)&&void 0!==e?e:0)*Math.PI/180;this.vDim=new Mi(Math.cos(t),Math.sin(t))}this.d1=this.vDim.clone().multiplyScalar(this.params.p1.clone().sub(this.params.anchor).dot(this.vDim)).add(this.params.anchor),this.d2=this.vDim.clone().multiplyScalar(this.params.p2.clone().sub(this.params.anchor).dot(this.vDim)).add(this.params.anchor),0==this.d1.distanceTo(this.d2)&&(this.isValid=!1),this.vDim.copy(this.d2).sub(this.d1).normalize(),this.vDim.y<-this.vDim.x?this.vDimNorm=new Mi(this.vDim.y,-this.vDim.x):this.vDimNorm=new Mi(-this.vDim.y,this.vDim.x)}},{key:"_GetText",value:function(){var e,t,n,r,i,a,o,s;if(" "==this.params.text)return"";if(""!=(null!==(e=this.params.text)&&void 0!==e?e:"")&&-1==this.params.text.indexOf("<>"))return nf(this.params.text);var u=this.d2.distanceTo(this.d1);u*=null!==(t=this.styleResolver("DIMLFAC"))&&void 0!==t?t:1;var l=null!==(n=this.styleResolver("DIMRND"))&&void 0!==n?n:0;l>0&&(u=l*Math.round(u/l));var c=null!==(r=this.styleResolver("DIMZIN"))&&void 0!==r?r:0,h=0!=(4&c),d=0!=(8&c),f=u.toFixed(null!==(i=this.styleResolver("DIMDEC"))&&void 0!==i?i:2);d&&(f=f.replace(/.0+$/,"")),h&&(f=f.replace(/^0+/,"")),f.startsWith(".")?f="0"+f:""==f&&(f="0"),f.endsWith(".")&&(f=f.substring(0,f.length-1));var p=null!==(a=this.styleResolver("DIMDSEP"))&&void 0!==a?a:".";isNaN(p)||(p=String.fromCharCode(p)),"."!=p&&(f=f.replace(".",p));var v=null!==(o=this.styleResolver("DIMPOST"))&&void 0!==o?o:"";return""!=v&&(-1!=v.indexOf("<>")?f=v.replaceAll("<>",f):f+=v),""!=(null!==(s=this.params.text)&&void 0!==s?s:"")&&(f=this.params.text.replaceAll("<>",f)),nf(f)}}])}();function gf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.clone().sub(e),o=r.clone().sub(n);if(0==a.lengthSq()||0==o.lengthSq())return null;var s=a.cross(o);if(Math.abs(s)<=Number.EPSILON)return null;var u=n.clone().sub(e),l=u.cross(o)/s;if(!i&&(l<0||l>1))return null;var c=u.cross(a)/s;return!i&&(c<0||c>1)?null:[l,c,s]}var mf=Object.freeze({ODD_PARITY:0,OUTERMOST:1,THROUGH_ENTIRE_AREA:2}),yf=1e-4;function bf(e,t){return(e.intersection[2]>0&&t.intersection[2])>0||e.intersection[2]<0&&t.intersection[2]<0}var xf=function(){return p((function e(t,n,r){v(this,e),this.style=n,this.line=r,this.lineDir=r[1].clone().sub(r[0]).normalize(),this.loops=[];for(var i=0;i<t.length;i++){for(var a=t[i],o=[],s=0;s<a.length;s++)o.push({idx:s,start:a[s],end:a[s==a.length-1?0:s+1],loopIdx:i});this.loops.push(o)}}),[{key:"Calculate",value:function(){return this._ProcessEdges(),this._CreateNodes(),this.nodes.sort((function(e,t){return e.intersection[0]-t.intersection[0]})),this.style==mf.ODD_PARITY?this._GenerateOddParitySegments():this._GenerateThroughAllSegments()}},{key:"_ProcessEdges",value:function(){var e,t=D(this.loops);try{for(t.s();!(e=t.n()).done;){var n,r=D(e.value);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.end.clone().sub(i.start),o=a.length();if(i.isZero=o<=Number.EPSILON,!i.isZero){a.divideScalar(o);var s=a.cross(this.lineDir);i.isParallel=Math.abs(s)<=1e-6,i.isParallel||(i.intersection=gf(this.line[0],this.line[1],i.start,i.end,!0))}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_CreateNodes",value:function(){this.nodes=[];var e,t=D(this.loops);try{for(t.s();!(e=t.n()).done;){var n,r=D(e.value);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i.isZero||i.isParallel||i.isProcessed)&&i.intersection&&!(i.intersection[1]<-1e-4||i.intersection[1]>1.0001)){var a=i.intersection[1]<=yf;if(a||i.intersection[1]>=.9999){var o=x(this._GetConnectedEdge(i,a),2),s=o[0],u=o[1];if(!s)continue;if(i.isProcessed=!0,s.isProcessed=!0,u)bf(i,s)&&(i.toggle=!0,this.nodes.push(i));else{if(i.intersection[0]>s.intersection[0]){var l=s;s=i,i=l}i.suppress=!0,s.unsuppress=!0,this.nodes.push(i),bf(i,s)&&(s.toggle=!0),this.nodes.push(s)}}else i.isProcessed=!0,i.toggle=!0,this.nodes.push(i)}}}catch(c){r.e(c)}finally{r.f()}}}catch(c){t.e(c)}finally{t.f()}}},{key:"_GetConnectedEdge",value:function(e,t){var n=this.loops[e.loopIdx],r=e.idx,i=!0;do{t?0==r?r=n.length-1:r--:r==n.length-1?r=0:r++;var a=n[r];if(!a.isZero&&!a.isParallel)return[a,i];i=!1}while(r!=e.idx);return[null,!1]}},{key:"_GenerateOddParitySegments",value:function(){var e,t=[],n=!1,r=0,i=null,a=D(this.nodes);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.suppress&&r++,o.unsuppress&&r--,o.toggle&&(n=!n),0==r&&n&&(o.unsuppress||o.toggle)?i=o:!r&&n||!i||(o.intersection[0]-i.intersection[0]>Number.EPSILON&&t.push([i.intersection[0],o.intersection[0]]),i=null)}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"_GenerateThroughAllSegments",value:function(){var e=[],t=0,n=null,r=new Array(this.loops.length).fill(0);function i(){var e,t=D(r);try{for(t.s();!(e=t.n()).done;){if(0!=e.value)return!1}}catch(n){t.e(n)}finally{t.f()}return!0}var a,o=D(this.nodes);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.suppress&&t++,s.unsuppress&&t--;var u=i();s.toggle&&(s.intersection[2]>0?r[s.loopIdx]++:r[s.loopIdx]--),0!=t||i()||!s.unsuppress&&!u?(t||i())&&n&&(s.intersection[0]-n.intersection[0]>Number.EPSILON&&e.push([n.intersection[0],s.intersection[0]]),n=null):n=s}}catch(l){o.e(l)}finally{o.f()}return e}}])}(),Ef=function(){return p((function e(t,n){v(this,e),P(this,"boundaryLoops",void 0),P(this,"style",void 0),this.boundaryLoops=t,this.style=n}),[{key:"ClipLine",value:function(e){return new xf(this.boundaryLoops,this.style,e).Calculate()}},{key:"GetPatternTransform",value:function(e){var t=e.seedPoint,n=e.angle,r=e.scale,i=(new Ti).makeTranslation(-t.x,-t.y);return n&&i.rotate(n),1!=(null!==r&&void 0!==r?r:1)&&i.scale(1/r,1/r),i}},{key:"GetLineTransform",value:function(e){var t=e.patTransform,n=e.basePoint,r=e.angle,i=t.clone();return n&&i.translate(-n.x,-n.y),r&&i.rotate(r),i}},{key:"GetBoundingBox",value:function(e){var t,n=new oh,r=D(this.boundaryLoops);try{for(r.s();!(t=r.n()).done;){var i,a=D(t.value);try{for(a.s();!(i=a.n()).done;){var o=i.value;n.expandByPoint(o.clone().applyMatrix3(e))}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return n}}])}(),wf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v(this,e),this.lines=t,this.name=n,this.offsetInLineSpace=r}return p(e,null,[{key:"ParsePatFile",value:function(t){var n=t.split(/\r?\n/);if(n.length<2)throw new Error("Invalid .pat file content");var r,i=null,a=[],o=D(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(""!=(s=s.trim())&&!s.startsWith(";"))if(null!==i){var u=s.indexOf(";");-1!=u&&(s=s.substring(0,u).trim());var l=s.split(/\s*,\s*/);""==l[l.length-1]&&(l.length=l.length-1),l=l.map((function(e){var t=parseFloat(e);if(isNaN(t))throw new Error("Failed to parse number in .pat file: "+e);return t}));var c={angle:l[0]*Math.PI/180,base:new Mi(l[1],l[2]),offset:new Mi(l[3],l[4])};l.length>5&&(c.dashes=l.slice(5)),a.push(c)}else{var h=s.match(/\*([^,]+)(?:,.*)?/);if(!h)throw new Error("Bad header for .pat file content");i=h[1]}}}catch(d){o.e(d)}finally{o.f()}return new e(a,i)}}])}(),kf=new Map,Sf=new Map;function _f(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.name)throw new Error("Anonymous pattern cannot be registered");var n=e.name.toUpperCase(),r=t?kf:Sf;r.has(n)?console.warn("Pattern with name ".concat(n," is already registered")):r.set(n,e)}function Mf(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?kf:Sf).get(e.toUpperCase())}_f(wf.ParsePatFile("\n*ACAD_ISO02W100,ACAD_ISO02W100\n0, 0,0, 0,5, 12,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO03W100,ACAD_ISO03W100\n0, 0,0, 0,5, 12,-18\n")),_f(wf.ParsePatFile("\n*ACAD_ISO04W100,ACAD_ISO04W100\n0, 0,0, 0,5, 24,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO05W100,ACAD_ISO05W100\n0, 0,0, 0,5, 24,-3,.5,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO06W100,ACAD_ISO06W100\n0, 0,0, 0,5, 24,-3,.5,-3,.5,-6.5\n0, 0,0, 0,5, -34,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO07W100,ACAD_ISO07W100\n0, 0,0, 0,5, .5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO08W100,ACAD_ISO08W100\n0, 0,0, 0,5, 24,-3,6,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO09W100,ACAD_ISO09W100\n0, 0,0, 0,5, 24,-3,6,-3,6,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO10W100,ACAD_ISO10W100\n0, 0,0, 0,5, 12,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO11W100,ACAD_ISO11W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO12W100,ACAD_ISO12W100\n0, 0,0, 0,5, 12,-3,.5,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO13W100,ACAD_ISO13W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-6.5\n0, 0,0, 0,5, -33.5,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO14W100,ACAD_ISO14W100\n0, 0,0, 0,5, 12,-3,.5,-3,.5,-6.5\n0, 0,0, 0,5, -22,.5,-3\n")),_f(wf.ParsePatFile("\n*ACAD_ISO15W100,ACAD_ISO15W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-10\n0, 0,0, 0,5, -33.5,.5,-3,.5,-3\n")),_f(wf.ParsePatFile("\n*ANGLE,ANGLE\n0, 0,0, 0,6.985, 5.08,-1.905\n90, 0,0, 0,6.985, 5.08,-1.905\n")),_f(wf.ParsePatFile("\n*ANSI31,ANSI31\n45, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*ANSI32,ANSI32\n45, 0,0, 0,9.525\n45, 4.49013,0, 0,9.525\n")),_f(wf.ParsePatFile("\n*ANSI33,ANSI33\n45, 0,0, 0,6.35\n45, 4.49013,0, 0,6.35, 3.175,-1.5875\n")),_f(wf.ParsePatFile("\n*ANSI34,ANSI34\n45, 0,0, 0,19.05\n45, 4.49013,0, 0,19.05\n45, 8.98026,0, 0,19.05\n45, 13.4704,0, 0,19.05\n")),_f(wf.ParsePatFile("\n*ANSI35,ANSI35\n45, 0,0, 0,6.35\n45, 4.49013,0, 0,6.35, 7.9375,-1.5875,0,-1.5875\n")),_f(wf.ParsePatFile("\n*ANSI36,ANSI36\n45, 0,0, 5.55625,3.175, 7.9375,-1.5875,0,-1.5875\n")),_f(wf.ParsePatFile("\n*ANSI37,ANSI37\n45, 0,0, 0,3.175\n135, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*ANSI38,ANSI38\n45, 0,0, 0,3.175\n135, 0,0, 6.35,3.175, 7.9375,-4.7625\n")),_f(wf.ParsePatFile("\n*AR-B816,AR-B816\n0, 0,0, 0,203.2\n90, 0,0, 203.2,203.2, 203.2,-203.2\n")),_f(wf.ParsePatFile("\n*AR-B816C,AR-B816C\n0, 0,0, 203.2,203.2, 396.875,-9.525\n0, -203.2,9.525, 203.2,203.2, 396.875,-9.525\n90, 0,0, 203.2,203.2, -212.725,193.675\n90, -9.525,0, 203.2,203.2, -212.725,193.675\n")),_f(wf.ParsePatFile("\n*AR-B88,AR-B88\n0, 0,0, 0,203.2\n90, 0,0, 203.2,101.6, 203.2,-203.2\n")),_f(wf.ParsePatFile("\n*AR-BRELM,AR-BRELM\n0, 0,0, 0,135.484, 193.675,-9.525\n0, 0,57.15, 0,135.484, 193.675,-9.525\n0, 50.8,67.7418, 0,135.484, 92.075,-9.525\n0, 50.8,124.892, 0,135.484, 92.075,-9.525\n90, 0,0, 0,203.2, 57.15,-78.3336\n90, -9.525,0, 0,203.2, 57.15,-78.3336\n90, 50.8,67.7418, 0,101.6, 57.15,-78.3336\n90, 41.275,67.7418, 0,101.6, 57.15,-78.3336\n")),_f(wf.ParsePatFile("\n*AR-BRSTD,AR-BRSTD\n0, 0,0, 0,67.7418\n90, 0,0, 67.7418,101.6, 67.7418,-67.7418\n")),_f(wf.ParsePatFile("\n*AR-CONC-01,AR-CONC-01\n;Optimize to replace existing AR-CONC Pattern\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n243.434949,7.62,20.32,227.18450626,113.5922544,5.67961272,-562.2816542\n90,7.62,15.24,0,254,5.08,-248.92\n0,5.08,15.24,0,254,2.54,-251.46\n315,2.54,2.54,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,7.62,5.08,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,5.08,0,227.18450626,113.5922544,5.67961272,-562.2816542\n45,50.8,10.16,179.60512212,179.60512212,7.18420458,-352.02603966\n161.565051,58.42,7.62,240.9655582,80.32185358,8.03218612,-795.18633952\n288.434949,55.88,15.24,562.25296744,80.32185358,8.03218612,-795.18633952\n315,58.42,22.86,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,63.5,25.4,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,60.96,20.32,227.18450626,113.5922544,5.67961272,-562.2816542\n270,104.14,15.24,0,254,5.08,-248.92\n45,99.06,10.16,179.60512212,179.60512212,7.18420458,-352.02603966\n180,104.14,10.16,0,254,5.08,-248.92\n333.434949,99.06,5.08,227.18450626,113.5922544,5.67961272,-562.2816542\n225,101.6,7.62,179.60512212,179.60512212,3.59210356,-355.61814322\n116.565051,104.14,2.54,340.77676066,113.5922544,5.67961272,-562.2816542\n198.434949,160.02,20.32,562.25296744,80.32185358,8.03218612,-795.18633952\n63.434949,157.48,15.24,227.18450626,113.5922544,5.67961272,-562.2816542\n333.434949,152.4,17.78,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,144.78,0,340.77676066,113.5922544,5.67961272,-562.2816542\n251.565051,147.32,7.62,240.9655582,80.32185358,8.03218612,-795.18633952\n116.565051,149.86,2.54,340.77676066,113.5922544,5.67961272,-562.2816542\n45,170.18,2.54,179.60512212,179.60512212,7.18420458,-352.02603966\n161.565051,177.8,0,240.9655582,80.32185358,8.03218612,-795.18633952\n288.434949,175.26,7.62,562.25296744,80.32185358,8.03218612,-795.18633952\n315,76.2,71.12,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,81.28,73.66,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,78.74,68.58,227.18450626,113.5922544,5.67961272,-562.2816542\n45,27.94,20.32,179.60512212,179.60512212,7.18420458,-352.02603966\n180,33.02,20.32,0,254,5.08,-248.92\n270,33.02,25.4,0,254,5.08,-248.92\n225,45.72,60.96,179.60512212,179.60512212,3.59210356,-355.61814322\n270,45.72,66.04,0,254,5.08,-248.92\n71.565051,43.18,58.42,240.9655582,80.32185358,8.03218612,-795.18633952\n198.434949,25.4,53.34,562.25296744,80.32185358,8.03218612,-795.18633952\n63.434949,22.86,48.26,227.18450626,113.5922544,5.67961272,-562.2816542\n333.434949,17.78,50.8,227.18450626,113.5922544,5.67961272,-562.2816542\n0,88.9,55.88,0,254,5.08,-248.92\n225,93.98,60.96,179.60512212,179.60512212,7.18420458,-352.02603966\n90,93.98,55.88,0,254,5.08,-248.92\n315,114.3,43.18,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,119.38,45.72,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,116.84,40.64,227.18450626,113.5922544,5.67961272,-562.2816542\n315,139.7,53.34,179.60512212,179.60512212,3.59210356,-355.61814322\n270,139.7,58.42,0,254,5.08,-248.92\n108.434949,142.24,50.8,562.25296744,80.32185358,8.03218612,-795.18633952\n206.565051,175.26,68.58,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,172.72,63.5,227.18450626,113.5922544,5.67961272,-562.2816542\n315,170.18,66.04,179.60512212,179.60512212,3.59210356,-355.61814322\n333.434949,185.42,48.26,227.18450626,113.5922544,5.67961272,-562.2816542\n225,187.96,50.8,179.60512212,179.60512212,3.59210356,-355.61814322\n116.565051,190.5,45.72,340.77676066,113.5922544,5.67961272,-562.2816542\n26.565051,208.28,38.1,340.77676066,113.5922544,5.67961272,-562.2816542\n153.434949,213.36,35.56,227.18450626,113.5922544,5.67961272,-562.2816542\n270,213.36,40.64,0,254,5.08,-248.92\n180,236.22,43.18,0,254,2.54,-251.46\n270,236.22,45.72,0,254,2.54,-251.46\n45,233.68,43.18,179.60512212,179.60512212,3.59210356,-355.61814322\n153.434949,236.22,60.96,227.18450626,113.5922544,5.67961272,-562.2816542\n270,236.22,68.58,0,254,7.62,-246.38\n45,231.14,63.5,179.60512212,179.60512212,7.18420458,-352.02603966\n206.565051,231.14,88.9,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,228.6,83.82,227.18450626,113.5922544,5.67961272,-562.2816542\n315,226.06,86.36,179.60512212,179.60512212,3.59210356,-355.61814322\n180,165.1,73.66,0,254,5.08,-248.92\n270,165.1,81.28,0,254,7.62,-246.38\n56.309932,160.02,73.66,563.57539812,70.4469254,9.15809954,-906.65192304\n198.434949,137.16,96.52,562.25296744,80.32185358,8.03218612,-795.18633952\n71.565051,134.62,88.9,240.9655582,80.32185358,8.03218612,-795.18633952\n315,129.54,93.98,179.60512212,179.60512212,7.18420458,-352.02603966\n180,96.52,83.82,0,254,7.62,-246.38\n270,96.52,91.44,0,254,7.62,-246.38\n45,88.9,83.82,179.60512212,179.60512212,10.77630814,-348.43393864\n225,83.82,109.22,179.60512212,179.60512212,7.18420458,-352.02603966\n90,83.82,104.14,0,254,5.08,-248.92\n0,78.74,104.14,0,254,5.08,-248.92\n206.565051,40.64,99.06,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,38.1,93.98,227.18450626,113.5922544,5.67961272,-562.2816542\n315,35.56,96.52,179.60512212,179.60512212,3.59210356,-355.61814322\n108.434949,25.4,93.98,562.25296744,80.32185358,8.03218612,-795.18633952\n341.565051,17.78,96.52,240.9655582,80.32185358,8.03218612,-795.18633952\n225,22.86,101.6,179.60512212,179.60512212,7.18420458,-352.02603966\n270,38.1,114.3,0,254,5.08,-248.92\n45,33.02,109.22,179.60512212,179.60512212,7.18420458,-352.02603966\n180,38.1,109.22,0,254,5.08,-248.92\n315,91.44,119.38,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,96.52,121.92,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,93.98,116.84,227.18450626,113.5922544,5.67961272,-562.2816542\n0,129.54,101.6,0,254,2.54,-251.46\n225,132.08,104.14,179.60512212,179.60512212,3.59210356,-355.61814322\n90,132.08,101.6,0,254,2.54,-251.46\n0,175.26,96.52,0,254,5.08,-248.92\n243.434949,177.8,101.6,227.18450626,113.5922544,5.67961272,-562.2816542\n116.565051,180.34,96.52,340.77676066,113.5922544,5.67961272,-562.2816542\n26.565051,185.42,114.3,340.77676066,113.5922544,5.67961272,-562.2816542\n116.565051,187.96,109.22,340.77676066,113.5922544,5.67961272,-562.2816542\n251.565051,190.5,116.84,240.9655582,80.32185358,8.03218612,-795.18633952\n63.434949,223.52,91.44,227.18450626,113.5922544,5.67961272,-562.2816542\n180,228.6,91.44,0,254,5.08,-248.92\n296.565051,226.06,96.52,340.77676066,113.5922544,5.67961272,-562.2816542\n180,228.6,137.16,0,254,7.62,-246.38\n270,228.6,144.78,0,254,7.62,-246.38\n45,220.98,137.16,179.60512212,179.60512212,10.77630814,-348.43393864\n180,218.44,142.24,0,254,5.08,-248.92\n270,218.44,147.32,0,254,5.08,-248.92\n45,213.36,142.24,179.60512212,179.60512212,7.18420458,-352.02603966\n243.434949,208.28,165.1,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,203.2,162.56,340.77676066,113.5922544,5.67961272,-562.2816542\n135,205.74,160.02,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,170.18,152.4,227.18450626,113.5922544,5.67961272,-562.2816542\n116.565051,172.72,147.32,340.77676066,113.5922544,5.67961272,-562.2816542\n0,167.64,147.32,0,254,5.08,-248.92\n225,157.48,154.94,179.60512212,179.60512212,7.18420458,-352.02603966\n108.434949,160.02,147.32,562.25296744,80.32185358,8.03218612,-795.18633952\n341.565051,152.4,149.86,240.9655582,80.32185358,8.03218612,-795.18633952\n135,149.86,137.16,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,152.4,142.24,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,147.32,139.7,340.77676066,113.5922544,5.67961272,-562.2816542\n180,121.92,152.4,0,254,2.54,-251.46\n270,121.92,154.94,0,254,2.54,-251.46\n45,119.38,152.4,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,111.76,170.18,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,109.22,165.1,227.18450626,113.5922544,5.67961272,-562.2816542\n315,106.68,167.64,179.60512212,179.60512212,3.59210356,-355.61814322\n225,86.36,165.1,179.60512212,179.60512212,7.18420458,-352.02603966\n90,86.36,157.48,0,254,7.62,-246.38\n333.434949,81.28,160.02,227.18450626,113.5922544,5.67961272,-562.2816542\n180,76.2,154.94,0,254,5.08,-248.92\n270,76.2,160.02,0,254,5.08,-248.92\n45,71.12,154.94,179.60512212,179.60512212,7.18420458,-352.02603966\n135,53.34,142.24,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,55.88,147.32,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,50.8,144.78,340.77676066,113.5922544,5.67961272,-562.2816542\n180,27.94,160.02,0,254,5.08,-248.92\n270,27.94,165.1,0,254,5.08,-248.92\n45,22.86,160.02,179.60512212,179.60512212,7.18420458,-352.02603966\n270,15.24,177.8,0,254,7.62,-246.38\n45,10.16,172.72,179.60512212,179.60512212,7.18420458,-352.02603966\n153.434949,15.24,170.18,227.18450626,113.5922544,5.67961272,-562.2816542\n243.434949,208.28,198.12,227.18450626,113.5922544,5.67961272,-562.2816542\n90,208.28,193.04,0,254,5.08,-248.92\n0,205.74,193.04,0,254,2.54,-251.46\n135,220.98,208.28,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,223.52,213.36,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,218.44,210.82,340.77676066,113.5922544,5.67961272,-562.2816542\n180,218.44,213.36,0,254,5.08,-248.92\n251.565051,220.98,220.98,240.9655582,80.32185358,8.03218612,-795.18633952\n45,213.36,213.36,179.60512212,179.60512212,10.77630814,-348.43393864\n153.434949,182.88,233.68,227.18450626,113.5922544,5.67961272,-562.2816542\n135,165.1,185.42,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,167.64,190.5,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,162.56,187.96,340.77676066,113.5922544,5.67961272,-562.2816542\n135,160.02,195.58,179.60512212,179.60512212,3.59210356,-355.61814322\n251.565051,162.56,203.2,240.9655582,80.32185358,8.03218612,-795.18633952\n45,157.48,198.12,179.60512212,179.60512212,7.18420458,-352.02603966\n26.565051,66.04,193.04,340.77676066,113.5922544,5.67961272,-562.2816542\n153.434949,71.12,190.5,227.18450626,113.5922544,5.67961272,-562.2816542\n270,71.12,195.58,0,254,5.08,-248.92\n90,114.3,200.66,0,254,5.08,-248.92\n0,109.22,200.66,0,254,5.08,-248.92\n225,114.3,205.74,179.60512212,179.60512212,7.18420458,-352.02603966\n63.434949,124.46,210.82,227.18450626,113.5922544,5.67961272,-562.2816542\n315,121.92,213.36,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,127,215.9,340.77676066,113.5922544,5.67961272,-562.2816542\n153.434949,147.32,223.52,227.18450626,113.5922544,5.67961272,-562.2816542\n270,147.32,231.14,0,254,7.62,-246.38\n45,142.24,226.06,179.60512212,179.60512212,7.18420458,-352.02603966\n0,71.12,236.22,0,254,7.62,-246.38\n135,66.04,203.2,179.60512212,179.60512212,3.59210356,-355.61814322\n270,66.04,208.28,0,254,5.08,-248.92\n45,63.5,205.74,179.60512212,179.60512212,3.59210356,-355.61814322\n116.565051,20.32,208.28,340.77676066,113.5922544,5.67961272,-562.2816542\n333.434949,15.24,210.82,227.18450626,113.5922544,5.67961272,-562.2816542\n225,17.78,213.36,179.60512212,179.60512212,3.59210356,-355.61814322\n135,30.48,218.44,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,33.02,223.52,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,27.94,220.98,340.77676066,113.5922544,5.67961272,-562.2816542\n0,222.21825,218.170506,0,254,0,-254\n0,206.330804,232.72877,0,254,0,-254\n0,208.872836,188.32957,0,254,0,-254\n0,183.55056,211.532978,0,254,0,-254\n0,167.663114,226.091242,0,254,0,-254\n0,222.022924,134.20979,0,254,0,-254\n0,206.135224,148.768054,0,254,0,-254\n0,170.205146,181.692042,0,254,0,-254\n0,144.88287,204.895704,0,254,0,-254\n0,128.99517,219.453968,0,254,0,-254\n0,208.677256,104.368854,0,254,0,-254\n0,183.35498,127.572516,0,254,0,-254\n0,167.467534,142.13078,0,254,0,-254\n0,131.537202,175.054768,0,254,0,-254\n0,106.214926,198.258176,0,254,0,-254\n0,90.32748,212.81644,0,254,0,-254\n0,221.827344,50.249328,0,254,0,-254\n0,205.939898,64.807592,0,254,0,-254\n0,170.009566,97.73158,0,254,0,-254\n0,144.68729,120.934988,0,254,0,-254\n0,128.799844,135.493252,0,254,0,-254\n0,92.869512,168.41724,0,254,0,-254\n0,67.547236,191.620902,0,254,0,-254\n0,51.65979,206.179166,0,254,0,-254\n0,208.48193,20.408392,0,254,0,-254\n0,183.159654,43.6118,0,254,0,-254\n0,167.271954,58.170064,0,254,0,-254\n0,131.341876,91.094052,0,254,0,-254\n0,106.0196,114.297714,0,254,0,-254\n0,90.1319,128.855978,0,254,0,-254\n0,54.201822,161.779966,0,254,0,-254\n0,28.879546,184.983628,0,254,0,-254\n0,12.991846,199.541638,0,254,0,-254\n0,169.813986,13.770864,0,254,0,-254\n0,144.49171,36.974526,0,254,0,-254\n0,128.604264,51.53279,0,254,0,-254\n0,89.821004,81.952846,0,254,0,-254\n0,67.351656,107.660186,0,254,0,-254\n0,51.46421,122.21845,0,254,0,-254\n0,15.533878,155.142438,0,254,0,-254\n0,131.146296,7.13359,0,254,0,-254\n0,105.82402,30.336998,0,254,0,-254\n0,89.936574,44.895262,0,254,0,-254\n0,54.006242,77.81925,0,254,0,-254\n0,28.683966,101.022912,0,254,0,-254\n0,12.79652,115.581176,0,254,0,-254\n0,92.478606,0.496062,0,254,0,-254\n0,67.15633,23.699724,0,254,0,-254\n0,51.26863,38.257988,0,254,0,-254\n0,15.338552,71.181976,0,254,0,-254\n0,28.488386,17.062196,0,254,0,-254\n0,12.60094,31.62046,0,254,0,-254\n0,232.573576,212.125814,0,254,0,-254\n0,211.15909,204.714856,0,254,0,-254\n0,197.17893,213.621112,0,254,0,-254\n0,219.38234,178.422554,0,254,0,-254\n0,175.76419,206.210408,0,254,0,-254\n0,161.78403,215.116664,0,254,0,-254\n0,183.98744,179.918106,0,254,0,-254\n0,140.369544,207.705706,0,254,0,-254\n0,126.389384,216.612216,0,254,0,-254\n0,220.450664,135.634984,0,254,0,-254\n0,206.470504,144.541494,0,254,0,-254\n0,148.592794,181.413658,0,254,0,-254\n0,104.974898,209.201258,0,254,0,-254\n0,90.994738,218.107514,0,254,0,-254\n0,228.673914,109.342936,0,254,0,-254\n0,185.055764,137.130536,0,254,0,-254\n0,171.075858,146.036792,0,254,0,-254\n0,113.198148,182.908956,0,254,0,-254\n0,69.579998,210.69681,0,254,0,-254\n0,55.599838,219.603066,0,254,0,-254\n0,193.279268,110.838234,0,254,0,-254\n0,149.661118,138.626088,0,254,0,-254\n0,135.680958,147.532344,0,254,0,-254\n0,77.803248,184.404508,0,254,0,-254\n0,34.185352,212.192362,0,254,0,-254\n0,20.205192,221.098618,0,254,0,-254\n0,229.742238,66.555366,0,254,0,-254\n0,215.762078,75.461622,0,254,0,-254\n0,157.884368,112.333786,0,254,0,-254\n0,114.266472,140.12164,0,254,0,-254\n0,100.286312,149.027896,0,254,0,-254\n0,42.408602,185.90006,0,254,0,-254\n0,237.965488,40.263064,0,254,0,-254\n0,194.347592,68.050918,0,254,0,-254\n0,180.367432,76.957174,0,254,0,-254\n0,122.489722,113.829338,0,254,0,-254\n0,78.871572,141.616938,0,254,0,-254\n0,64.891666,150.523448,0,254,0,-254\n0,7.013702,187.395612,0,254,0,-254\n0,202.570842,41.758616,0,254,0,-254\n0,158.952692,69.546216,0,254,0,-254\n0,144.972532,78.452726,0,254,0,-254\n0,87.094822,115.32489,0,254,0,-254\n0,43.476926,143.11249,0,254,0,-254\n0,29.496766,152.018746,0,254,0,-254\n0,225.053652,6.38175,0,254,0,-254\n0,167.175942,43.254168,0,254,0,-254\n0,123.558046,71.041768,0,254,0,-254\n0,109.577886,79.948024,0,254,0,-254\n0,51.700176,116.820188,0,254,0,-254\n0,8.08228,144.608042,0,254,0,-254\n0,189.659006,7.877302,0,254,0,-254\n0,131.781296,44.749466,0,254,0,-254\n0,88.1634,72.53732,0,254,0,-254\n0,74.18324,81.443576,0,254,0,-254\n0,16.30553,118.31574,0,254,0,-254\n0,168.24452,0.466598,0,254,0,-254\n0,154.26436,9.372854,0,254,0,-254\n0,96.38665,46.245018,0,254,0,-254\n0,52.7685,74.032872,0,254,0,-254\n0,38.78834,82.939128,0,254,0,-254\n0,132.84962,1.961896,0,254,0,-254\n0,118.86946,10.868406,0,254,0,-254\n0,60.99175,47.74057,0,254,0,-254\n0,17.373854,75.52817,0,254,0,-254\n0,3.393694,84.43468,0,254,0,-254\n0,97.454974,3.457448,0,254,0,-254\n0,83.474814,12.363704,0,254,0,-254\n0,25.597104,49.235868,0,254,0,-254\n0,62.060074,4.953,0,254,0,-254\n0,48.080168,13.859256,0,254,0,-254\n0,26.665428,6.448552,0,254,0,-254\n0,12.685268,15.354808,0,254,0,-254\n0,163.20897,236.374178,0,254,0,-254\n0,121.33453,230.861362,0,254,0,-254\n0,96.22282,227.555298,0,254,0,-254\n0,79.624174,225.370136,0,254,0,-254\n0,37.749734,219.85732,0,254,0,-254\n0,12.638278,216.551256,0,254,0,-254\n0,229.351078,221.227142,0,254,0,-254\n0,187.476638,215.714326,0,254,0,-254\n0,162.364928,212.408262,0,254,0,-254\n0,145.766282,210.2231,0,254,0,-254\n0,103.891842,204.710284,0,254,0,-254\n0,78.780132,201.40422,0,254,0,-254\n0,62.18174,199.219058,0,254,0,-254\n0,20.307046,193.705988,0,254,0,-254\n0,228.507036,197.261226,0,254,0,-254\n0,211.90839,195.076064,0,254,0,-254\n0,170.03395,189.563248,0,254,0,-254\n0,144.92224,186.257184,0,254,0,-254\n0,128.323594,184.071768,0,254,0,-254\n0,86.449154,178.558952,0,254,0,-254\n0,61.337698,175.252888,0,254,0,-254\n0,44.739052,173.067726,0,254,0,-254\n0,2.864358,167.55491,0,254,0,-254\n0,236.176058,174.415958,0,254,0,-254\n0,211.064348,171.110148,0,254,0,-254\n0,194.465702,168.924732,0,254,0,-254\n0,152.591262,163.411916,0,254,0,-254\n0,127.479552,160.105852,0,254,0,-254\n0,110.88116,157.92069,0,254,0,-254\n0,69.006466,152.407874,0,254,0,-254\n0,43.89501,149.10181,0,254,0,-254\n0,27.296364,146.916648,0,254,0,-254\n0,218.73337,148.26488,0,254,0,-254\n0,193.62166,144.958816,0,254,0,-254\n0,177.023014,142.773654,0,254,0,-254\n0,135.148574,137.260838,0,254,0,-254\n0,110.037118,133.954774,0,254,0,-254\n0,93.438472,131.769358,0,254,0,-254\n0,51.563778,126.256542,0,254,0,-254\n0,26.452322,122.950478,0,254,0,-254\n0,9.853676,120.765316,0,254,0,-254\n0,201.290682,122.113548,0,254,0,-254\n0,176.178972,118.807738,0,254,0,-254\n0,159.58058,116.622322,0,254,0,-254\n0,117.705886,111.109506,0,254,0,-254\n0,92.59443,107.803442,0,254,0,-254\n0,75.995784,105.61828,0,254,0,-254\n0,34.121344,100.105464,0,254,0,-254\n0,9.009634,96.7994,0,254,0,-254\n0,225.722434,101.475286,0,254,0,-254\n0,183.847994,95.96247,0,254,0,-254\n0,158.736538,92.656406,0,254,0,-254\n0,142.137892,90.471244,0,254,0,-254\n0,100.263198,84.958428,0,254,0,-254\n0,75.151742,81.652364,0,254,0,-254\n0,58.553096,79.466948,0,254,0,-254\n0,16.678656,73.954132,0,254,0,-254\n0,224.878392,77.50937,0,254,0,-254\n0,208.279746,75.324208,0,254,0,-254\n0,166.405306,69.811138,0,254,0,-254\n0,141.29385,66.505328,0,254,0,-254\n0,124.695204,64.319912,0,254,0,-254\n0,82.82051,58.807096,0,254,0,-254\n0,57.709054,55.501032,0,254,0,-254\n0,41.110408,53.31587,0,254,0,-254\n0,232.547414,54.664102,0,254,0,-254\n0,207.435704,51.358038,0,254,0,-254\n0,190.837312,49.172876,0,254,0,-254\n0,148.962618,43.66006,0,254,0,-254\n0,123.851162,40.353996,0,254,0,-254\n0,107.252516,38.168834,0,254,0,-254\n0,65.378076,32.656018,0,254,0,-254\n0,40.266366,29.349954,0,254,0,-254\n0,23.66772,27.164538,0,254,0,-254\n0,215.104726,28.513024,0,254,0,-254\n0,189.99327,25.20696,0,254,0,-254\n0,173.394624,23.021798,0,254,0,-254\n0,131.51993,17.508728,0,254,0,-254\n0,106.408474,14.202918,0,254,0,-254\n0,89.809828,12.017502,0,254,0,-254\n0,47.935388,6.504686,0,254,0,-254\n0,22.823678,3.198622,0,254,0,-254\n0,6.225032,1.01346,0,254,0,-254\n0,197.662038,2.361692,0,254,0,-254\n0,31.866332,226.2124,0,254,0,-254\n0,65.909444,230.88092,0,254,0,-254\n0,31.060136,204.140054,0,254,0,-254\n0,99.400106,235.125768,0,254,0,-254\n0,65.103248,208.808574,0,254,0,-254\n0,30.253686,182.067962,0,254,0,-254\n0,98.59391,213.053422,0,254,0,-254\n0,64.296798,186.736482,0,254,0,-254\n0,29.44749,159.995616,0,254,0,-254\n0,133.031484,218.02471,0,254,0,-254\n0,97.787714,190.981076,0,254,0,-254\n0,63.490602,164.664136,0,254,0,-254\n0,28.641294,137.92327,0,254,0,-254\n0,167.074596,222.69323,0,254,0,-254\n0,132.225288,195.952364,0,254,0,-254\n0,96.981264,168.90873,0,254,0,-254\n0,62.684406,142.59179,0,254,0,-254\n0,27.835098,115.850924,0,254,0,-254\n0,200.565258,226.937824,0,254,0,-254\n0,166.2684,200.620884,0,254,0,-254\n0,131.419092,173.880018,0,254,0,-254\n0,96.175068,146.836384,0,254,0,-254\n0,61.87821,120.519444,0,254,0,-254\n0,27.028902,93.778578,0,254,0,-254\n0,235.002832,231.909112,0,254,0,-254\n0,199.759062,204.865478,0,254,0,-254\n0,165.46195,178.548538,0,254,0,-254\n0,130.612642,151.807672,0,254,0,-254\n0,95.368872,124.764292,0,254,0,-254\n0,61.07176,98.447098,0,254,0,-254\n0,26.222452,71.706232,0,254,0,-254\n0,234.196636,209.836766,0,254,0,-254\n0,198.952866,182.793386,0,254,0,-254\n0,164.655754,156.476192,0,254,0,-254\n0,129.806446,129.735326,0,254,0,-254\n0,94.562676,102.691946,0,254,0,-254\n0,60.265564,76.374752,0,254,0,-254\n0,25.416256,49.63414,0,254,0,-254\n0,233.39044,187.76442,0,254,0,-254\n0,198.14667,160.72104,0,254,0,-254\n0,163.849558,134.403846,0,254,0,-254\n0,129.00025,107.663234,0,254,0,-254\n0,93.75648,80.6196,0,254,0,-254\n0,59.459368,54.30266,0,254,0,-254\n0,24.61006,27.561794,0,254,0,-254\n0,232.584244,165.692328,0,254,0,-254\n0,197.34022,138.648694,0,254,0,-254\n0,163.043362,112.331754,0,254,0,-254\n0,128.194054,85.590888,0,254,0,-254\n0,58.653172,32.230314,0,254,0,-254\n0,23.803864,5.489448,0,254,0,-254\n0,231.777794,143.619982,0,254,0,-254\n0,196.534024,116.576348,0,254,0,-254\n0,162.237166,90.259408,0,254,0,-254\n0,127.387858,63.518542,0,254,0,-254\n0,92.143834,36.474908,0,254,0,-254\n0,57.846976,10.157968,0,254,0,-254\n0,230.971598,121.547636,0,254,0,-254\n0,195.727828,94.504002,0,254,0,-254\n0,161.430716,68.187062,0,254,0,-254\n0,126.581408,41.446196,0,254,0,-254\n0,91.337638,14.402562,0,254,0,-254\n0,230.165402,99.47529,0,254,0,-254\n0,194.921632,72.431656,0,254,0,-254\n0,160.62452,46.114716,0,254,0,-254\n0,125.775212,19.37385,0,254,0,-254\n0,229.359206,77.402944,0,254,0,-254\n0,194.115436,50.359564,0,254,0,-254\n0,159.818324,24.04237,0,254,0,-254\n0,228.55301,55.330598,0,254,0,-254\n0,193.308986,28.287218,0,254,0,-254\n0,159.012128,1.970024,0,254,0,-254\n0,227.74656,33.258506,0,254,0,-254\n0,192.50279,6.214872,0,254,0,-254\n0,226.940364,11.18616,0,254,0,-254\n206.565051,254,15.24,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,251.46,10.16,227.18450626,113.5922544,5.67961272,-562.2816542\n315,248.92,12.7,179.60512212,179.60512212,3.59210356,-355.61814322\n206.565051,246.38,137.16,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,243.84,132.08,227.18450626,113.5922544,5.67961272,-562.2816542\n315,241.3,134.62,179.60512212,179.60512212,3.59210356,-355.61814322\n153.434949,254,182.88,227.18450626,113.5922544,5.67961272,-562.2816542\n288.434949,251.46,190.5,562.25296744,80.32185358,8.03218612,-795.18633952\n63.434949,248.92,185.42,227.18450626,113.5922544,5.67961272,-562.2816542\n135,246.38,236.22,179.60512212,179.60512212,3.59210356,-355.61814322\n270,246.38,241.3,0,254,5.08,-248.92\n45,243.84,238.76,179.60512212,179.60512212,3.59210356,-355.61814322\n0,195.58,243.84,0,254,5.08,-248.92\n270,182.88,238.76,0,254,5.08,-248.92\n26.565051,177.8,236.22,340.77676066,113.5922544,5.67961272,-562.2816542\n0,241.457734,241.2111,0,254,0,-254\n0,247.540526,194.966844,0,254,0,-254\n0,244.803168,155.405582,0,254,0,-254\n0,247.3452,111.006382,0,254,0,-254\n0,244.607588,71.444866,0,254,0,-254\n0,247.14962,27.045666,0,254,0,-254\n0,246.553736,203.219304,0,254,0,-254\n0,241.86515,143.045942,0,254,0,-254\n0,251.156978,73.96607,0,254,0,-254\n0,204.919072,241.865658,0,254,0,-254\n0,179.807616,238.559594,0,254,0,-254\n0,245.949724,223.412558,0,254,0,-254\n0,253.618492,200.56729,0,254,0,-254\n0,243.165122,127.626618,0,254,0,-254\n0,242.32108,103.660448,0,254,0,-254\n0,249.990102,80.815434,0,254,0,-254\n0,239.536732,7.874762,0,254,0,-254\n243.434949,198.12,248.92,227.18450626,113.5922544,5.67961272,-562.2816542\n116.565051,200.66,243.84,340.77676066,113.5922544,5.67961272,-562.2816542\n180,152.4,246.38,0,254,5.08,-248.92\n270,152.4,251.46,0,254,5.08,-248.92\n45,147.32,246.38,179.60512212,179.60512212,7.18420458,-352.02603966\n296.565051,104.14,254,340.77676066,113.5922544,5.67961272,-562.2816542\n63.434949,101.6,248.92,227.18450626,113.5922544,5.67961272,-562.2816542\n180,106.68,248.92,0,254,5.08,-248.92\n135,86.36,238.76,179.60512212,179.60512212,3.59210356,-355.61814322\n243.434949,88.9,243.84,227.18450626,113.5922544,5.67961272,-562.2816542\n26.565051,83.82,241.3,340.77676066,113.5922544,5.67961272,-562.2816542\n116.565051,78.74,236.22,340.77676066,113.5922544,5.67961272,-562.2816542\n225,76.2,241.3,179.60512212,179.60512212,7.18420458,-352.02603966\n45,0,246.38,179.60512212,179.60512212,7.18420458,-352.02603966\n161.565051,7.62,243.84,240.9655582,80.32185358,8.03218612,-795.18633952\n288.434949,5.08,251.46,562.25296744,80.32185358,8.03218612,-795.18633952\n0,93.065092,252.377956,0,254,0,-254\n0,54.397148,245.740428,0,254,0,-254\n0,15.729458,239.103154,0,254,0,-254\n0,174.695866,248.997978,0,254,0,-254\n0,139.30122,250.493276,0,254,0,-254\n0,68.511674,253.48438,0,254,0,-254\n0,113.665508,253.70663,0,254,0,-254\n0,97.066862,251.521468,0,254,0,-254\n0,55.192422,246.008398,0,254,0,-254\n0,30.080966,242.702588,0,254,0,-254\n0,13.48232,240.517172,0,254,0,-254\n0,32.672528,248.284746,0,254,0,-254\n0,66.71564,252.953266,0,254,0,-254\n0,133.83768,240.097056,0,254,0,-254\n0,167.880792,244.765576,0,254,0,-254\n0,201.371454,249.01017,0,254,0,-254\n0,245.485412,246.006874,0,254,0,-254\n0,210.090512,247.502426,0,254,0,-254\n0,246.793766,247.378474,0,254,0,-254\n0,235.809282,253.981458,0,254,0,-254\n")),_f(wf.ParsePatFile("\n*AR-CONC,AR-CONC\n50, 0,0, 104.896,-149.807, 19.05,-209.55\n355, 0,0, -51.7604,187.258, 15.24,-167.64\n100.451, 15.182,-1.32825, 145.557,-176.27, 16.19,-178.09\n46.1842, 0,50.8, 157.343,-224.71, 28.575,-314.325\n96.6356, 22.5899,47.2965, 218.335,-264.405, 24.285,-267.135\n351.184, 0,50.8, 196.679,280.887, 22.86,-251.46\n21, 25.4,38.1, 104.896,-149.807, 19.05,-209.55\n326, 25.4,38.1, -51.7604,187.258, 15.24,-167.64\n71.4514, 38.0345,29.5779, 145.557,-176.27, 16.19,-178.09\n37.5, 0,0, 53.9242,65.2018, 0,-165.608,0,-170.18,0,-168.275\n7.5, 0,0, 79.3242,90.6018, 0,-97.028,0,-161.798,0,-64.135\n-32.5, -56.642,0, 117.434,68.0212, 0,-63.5,0,-198.12,0,-262.89\n-42.5, -82.042,0, 92.0344,118.821, 0,-82.55,0,-131.572,0,-186.69\n")),_f(wf.ParsePatFile("\n*AR-HBONE,AR-HBONE\n45, 0,0, 101.6,101.6, 304.8,-101.6\n135, 71.842,71.842, 101.6,-101.6, 304.8,-101.6\n")),_f(wf.ParsePatFile("\n*AR-PARQ1,AR-PARQ1\n90, 0,0, 304.8,304.8, 304.8,-304.8\n90, 50.8,0, 304.8,304.8, 304.8,-304.8\n90, 101.6,0, 304.8,304.8, 304.8,-304.8\n90, 152.4,0, 304.8,304.8, 304.8,-304.8\n90, 203.2,0, 304.8,304.8, 304.8,-304.8\n90, 254,0, 304.8,304.8, 304.8,-304.8\n90, 304.8,0, 304.8,304.8, 304.8,-304.8\n0, 0,304.8, 304.8,-304.8, 304.8,-304.8\n0, 0,355.6, 304.8,-304.8, 304.8,-304.8\n0, 0,406.4, 304.8,-304.8, 304.8,-304.8\n0, 0,457.2, 304.8,-304.8, 304.8,-304.8\n0, 0,508, 304.8,-304.8, 304.8,-304.8\n0, 0,558.8, 304.8,-304.8, 304.8,-304.8\n0, 0,609.6, 304.8,-304.8, 304.8,-304.8\n")),_f(wf.ParsePatFile("\n*AR-RROOF,AR-RROOF\n0, 0,0, 55.88,25.4, 381,-50.8,127,-25.4\n0, 33.782,12.7, -25.4,33.782, 76.2,-8.382,152.4,-19.05\n0, 12.7,21.59, 132.08,17.018, 203.2,-35.56,101.6,-25.4\n")),_f(wf.ParsePatFile("\n*AR-RSHKE,AR-RSHKE\n0, 0,0, 647.7,304.8, 152.4,-127,177.8,-76.2,228.6,-101.6\n0, 152.4,12.7, 647.7,304.8, 127,-482.6,101.6,-152.4\n0, 457.2,-19.05, 647.7,304.8, 76.2,-787.4\n90, 0,0, 304.8,215.9, 292.1,-927.1\n90, 152.4,0, 304.8,215.9, 285.75,-933.45\n90, 279.4,0, 304.8,215.9, 266.7,-952.5\n90, 457.2,-19.05, 304.8,215.9, 292.1,-927.1\n90, 533.4,-19.05, 304.8,215.9, 292.1,-927.1\n90, 762,0, 304.8,215.9, 279.4,-939.8\n")),_f(wf.ParsePatFile("\n*AR-SAND,AR-SAND\n37.5, 0,0, 28.5242,39.8018, 0,-38.608,0,-43.18,0,-41.275\n7.5, 0,0, 53.9242,65.2018, 0,-20.828,0,-34.798,0,-13.335\n-32.5, -31.242,0, 66.6344,42.6212, 0,-12.7,0,-45.72,0,-59.69\n-42.5, -31.242,0, 41.2344,68.0212, 0,-6.35,0,-29.972,0,-34.29\n")),_f(wf.ParsePatFile("\n*BARBWIRE,BARBWIRE\n;By John Hyslop\n;Developed in mm as metric QCAD3 pattern\n315,7.62,14.224,17.960512212,17.960512212,0.359210356,-35.561814322\n288.434949,6.604,17.272,56.225296744,8.032185358,3.212874194,-77.10897837\n158.198591,7.874,16.764,80.18324705,4.716661636,1.36783191,-135.415354264\n116.565051,8.128,16.256,34.077676066,11.35922544,0.567961272,-56.22816542\n116.565051,8.636,15.24,34.077676066,11.35922544,1.135922544,-55.660204148\n111.801409,11.176,9.906,56.599939124,4.716661636,1.36783191,-135.415354264\n156.801409,12.954,9.144,136.74251925,3.335183322,1.934406342,-191.506230398\n289.653824,11.684,12.7,297.294468148,1.708588912,3.775981526,-373.822164724\n194.036243,7.874,9.144,80.085263502,6.160405002,1.047268924,-103.679614078\n251.565051,8.128,9.906,24.09655582,8.032185358,0.803218612,-79.518633952\n254.054604,8.636,11.684,104.668749768,3.488958224,1.84914794,-183.065643266\n74.744881,8.636,11.684,104.703186326,2.22772732,2.896045516,-286.708512434\n135,9.144,11.176,17.960512212,17.960512212,0.718420458,-35.202603966\n180,9.906,11.176,0,25.4,0.762,-24.638\n270,9.906,11.43,0,25.4,0.254,-25.146\n74.054604,9.906,11.43,104.668749768,3.488958224,3.69829588,-181.216495326\n161.565051,10.668,11.176,24.09655582,8.032185358,0.803218612,-79.518633952\n198.434949,11.43,11.43,56.225296744,8.032185358,0.803218612,-79.518633952\n258.231711,12.7,17.526,129.51095129,1.03608759,6.226886454,-616.461767582\n21.801409,11.43,17.018,56.599939124,4.716661636,1.36783191,-135.415354264\n75.963757,10.922,14.986,24.6416195,6.160405002,2.094537594,-102.632345154\n341.565051,10.16,15.24,24.09655582,8.032185358,0.803218612,-79.518633952\n45,9.398,14.478,17.960512212,17.960512212,1.077630814,-34.843393864\n288.434949,9.144,15.24,56.225296744,8.032185358,0.803218612,-79.518633952\n0,8.636,15.24,0,25.4,0.508,-24.892\n26.565051,8.128,14.986,34.077676066,11.35922544,0.567961272,-56.22816542\n78.231711,6.858,8.89,129.51095129,1.03608759,6.226886454,-616.461767582\n4.085617,19.812,12.192,331.17053781,1.80967507,3.565059926,-352.940928864\n0,17.526,12.192,0,25.4,2.286,-23.114\n354.289407,14.986,12.446,25.273944626,2.527394488,2.552668504,-252.714172244\n356.185925,11.938,13.97,25.343743064,1.689582854,3.818457184,-378.027270614\n351.469234,20.32,13.97,179.600730968,1.255949228,5.136831992,-508.546377622\n0,16.764,13.97,0,25.4,3.556,-21.844\n14.036243,11.684,12.7,80.085263502,6.160405002,5.236344112,-99.490538636\n189.865807,17.78,12.954,438.470633344,1.088016366,5.92968969,-587.039280834\n180,20.32,12.954,0,25.4,2.54,-22.86\n171.469234,25.4,12.192,179.600730968,1.255949228,5.136831992,-508.546377622\n186.115504,25.4,14.224,230.005013954,0.901980416,3.973724844,-711.296769428\n5.52754,3.499555612,13.546666582,255.265537982,0.815544724,4.394880466,-786.683623734\n3.691386,0,12.192,381.844852514,0.817654956,3.84896106,-785.188047096\n348.310631,0,13.208,129.51225558,0.85769704,7.522003244,-744.678315822\n348.690068,0,14.224,24.906749272,4.981349956,7.770905718,-121.744189836\n")),_f(wf.ParsePatFile("\n*BLOCKS-01\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n270,7.874,16.764,25.4,25.4,5.588,-19.812\n180,2.032,2.286,0,25.4,14.478,-10.922\n270,2.032,2.286,25.4,25.4,5.334,-20.066\n180,2.032,22.352,0,25.4,14.478,-10.922\n270,12.954,2.286,25.4,25.4,5.334,-20.066\n270,22.606,8.128,25.4,25.4,5.08,-20.32\n0,12.446,8.128,0,25.4,10.16,-15.24\n90,12.446,3.048,25.4,25.4,5.08,-20.32\n180,22.606,3.048,0,25.4,10.16,-15.24\n270,17.526,21.336,25.4,25.4,12.192,-13.208\n0,12.192,21.336,0,25.4,5.334,-20.066\n90,12.192,9.144,25.4,25.4,12.192,-13.208\n180,17.526,9.144,0,25.4,5.334,-20.066\n270,3.048,0.762,25.4,25.4,8.382,-17.018\n0,3.048,17.78,0,25.4,8.128,-17.272\n270,11.176,0.762,25.4,25.4,8.382,-17.018\n0,3.048,0.762,0,25.4,8.128,-17.272\n270,11.43,17.018,25.4,25.4,6.096,-19.304\n0,9.144,17.018,0,25.4,2.286,-23.114\n90,9.144,10.922,25.4,25.4,6.096,-19.304\n180,11.43,10.922,0,25.4,2.286,-23.114\n270,11.43,10.16,25.4,25.4,8.382,-17.018\n0,2.794,10.16,0,25.4,8.636,-16.764\n90,2.794,1.778,25.4,25.4,8.382,-17.018\n180,11.43,1.778,0,25.4,8.636,-16.764\n270,22.606,10.414,25.4,25.4,1.524,-23.876\n0,18.542,10.414,0,25.4,4.064,-21.336\n90,18.542,8.89,25.4,25.4,1.524,-23.876\n180,22.606,8.89,0,25.4,4.064,-21.336\n180,1.778,10.16,0,25.4,3.556,-21.844\n270,23.622,10.16,25.4,25.4,6.858,-18.542\n180,1.778,3.302,0,25.4,3.556,-21.844\n270,1.778,10.16,25.4,25.4,6.858,-18.542\n180,2.032,20.574,0,25.4,8.636,-16.764\n270,18.796,20.574,25.4,25.4,2.54,-22.86\n180,2.032,18.034,0,25.4,8.636,-16.764\n270,2.032,20.574,25.4,25.4,2.54,-22.86\n180,7.874,16.764,0,25.4,14.986,-10.414\n270,18.288,16.764,25.4,25.4,5.588,-19.812\n180,7.874,11.176,0,25.4,14.986,-10.414\n")),_f(wf.ParsePatFile("\n*BLOCKS-02\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,8.128,4.572,0,25.4,12.446,-12.954\n270,8.128,13.97,25.4,25.4,9.398,-16.002\n0,9.398,24.384,0,25.4,10.668,-14.732\n0,4.318,24.892,0,25.4,4.318,-21.082\n90,20.828,0,25.4,25.4,3.81,-21.59\n180,23.368,0,0,25.4,2.54,-22.86\n180,8.128,13.97,0,25.4,12.446,-12.954\n270,21.082,13.97,25.4,25.4,9.398,-16.002\n180,3.302,20.32,0,25.4,4.572,-20.828\n90,3.556,14.986,25.4,25.4,4.318,-21.082\n270,3.302,3.81,25.4,25.4,8.89,-16.51\n180,18.034,14.986,0,25.4,14.478,-10.922\n270,23.368,3.81,25.4,25.4,3.81,-21.59\n0,20.828,3.81,0,25.4,2.54,-22.86\n270,18.034,19.304,25.4,25.4,4.318,-21.082\n0,3.556,19.304,0,25.4,14.478,-10.922\n180,2.032,14.986,0,25.4,8.128,-17.272\n270,2.032,19.304,25.4,25.4,4.318,-21.082\n180,3.302,3.81,0,25.4,4.572,-20.828\n270,24.13,3.81,25.4,25.4,8.89,-16.51\n90,4.572,20.32,25.4,25.4,3.302,-22.098\n180,23.114,20.32,0,25.4,18.542,-6.858\n180,2.032,19.304,0,25.4,8.128,-17.272\n270,19.304,19.304,25.4,25.4,4.318,-21.082\n270,8.636,3.81,25.4,25.4,4.318,-21.082\n0,4.318,3.81,0,25.4,4.318,-21.082\n270,23.114,23.622,25.4,25.4,3.302,-22.098\n0,4.572,23.622,0,25.4,18.542,-6.858\n0,9.398,13.97,0,25.4,10.668,-14.732\n270,9.398,13.97,25.4,25.4,14.986,-10.414\n270,4.318,3.81,25.4,25.4,4.318,-21.082\n270,20.066,13.97,25.4,25.4,14.986,-10.414\n")),_f(wf.ParsePatFile("\n*BOX-OVERLAP\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,5.08,17.78,0,25.4,10.16,-15.24\n90,5.08,5.08,25.4,25.4,15.24,-10.16\n270,7.62,5.08,25.4,25.4,10.16,-15.24\n180,5.08,7.62,0,25.4,10.16,-15.24\n0,5.08,20.32,0,25.4,15.24,-10.16\n180,20.32,5.08,0,25.4,15.24,-10.16\n270,20.32,20.32,25.4,25.4,15.24,-10.16\n270,17.78,5.08,25.4,25.4,10.16,-15.24\n")),_f(wf.ParsePatFile("\n*BOX,BOX\n90, 0,0, 0,25.4\n90, 6.35,0, 0,25.4\n0, 0,0, 0,25.4, -6.35,6.35\n0, 0,6.35, 0,25.4, -6.35,6.35\n0, 0,12.7, 0,25.4, 6.35,-6.35\n0, 0,19.05, 0,25.4, 6.35,-6.35\n90, 12.7,0, 0,25.4, 6.35,-6.35\n90, 19.05,0, 0,25.4, 6.35,-6.35\n")),_f(wf.ParsePatFile("\n*BOXJOIN-01\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n90,3.810000254,3.81,25.4,25.4,17.78,-7.62\n0,3.810000254,21.59,0,25.4,17.78,-7.62\n270,11.430000254,3.81,25.4,25.4,7.62,-17.78\n180,3.810000254,11.43,0,25.4,7.62,-17.78\n270,13.970000254,3.81,25.4,25.4,7.62,-17.78\n180,21.590000254,3.81,0,25.4,17.78,-7.62\n270,21.590000254,21.59,25.4,25.4,17.78,-7.62\n180,3.810000254,13.97,0,25.4,7.62,-17.78\n")),_f(wf.ParsePatFile("\n*BOXJOIN-02\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n90,3.810000254,13.97,25.4,25.4,7.62,-17.78\n270,21.590000254,21.59,25.4,25.4,7.62,-17.78\n0,13.970000254,21.59,0,25.4,7.62,-17.78\n180,3.810000254,13.97,0,25.4,7.62,-17.78\n90,3.810000254,3.81,25.4,25.4,7.62,-17.78\n180,11.430000254,3.81,0,25.4,7.62,-17.78\n180,3.810000254,11.43,0,25.4,7.62,-17.78\n180,21.590000254,3.81,0,25.4,7.62,-17.78\n270,21.590000254,11.43,25.4,25.4,7.62,-17.78\n270,11.430000254,3.81,25.4,25.4,7.62,-17.78\n270,13.970000254,3.81,25.4,25.4,7.62,-17.78\n0,3.810000254,21.59,0,25.4,7.62,-17.78\n")),_f(wf.ParsePatFile("\n*BRASS,BRASS\n0, 0,0, 0,6.35\n0, 0,3.175, 0,6.35, 3.175,-1.5875\n")),_f(wf.ParsePatFile("\n*BRICK,BRICK\n0, 0,0, 0,6.35\n90, 0,0, 0,12.7, 6.35,-6.35\n90, 6.35,0, 0,12.7, -6.35,6.35\n")),_f(wf.ParsePatFile("\n*BRSTONE,BRSTONE\n0, 0,0, 0,8.382\n90, 22.86,0, 8.382,12.7, 8.382,-8.382\n90, 20.32,0, 8.382,12.7, 8.382,-8.382\n0, 22.86,1.397, 12.7,8.382, -22.86,2.54\n0, 22.86,2.794, 12.7,8.382, -22.86,2.54\n0, 22.86,4.191, 12.7,8.382, -22.86,2.54\n0, 22.86,5.588, 12.7,8.382, -22.86,2.54\n0, 22.86,6.985, 12.7,8.382, -22.86,2.54\n")),_f(wf.ParsePatFile("\n*BUBBLES-01,BUBBLES-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n0,1.4976856,0.4251706,0,25.4,0,-25.4\n0,1.5807944,0.8431022,0,25.4,0,-25.4\n0,1.7177766,1.2465812,0,25.4,0,-25.4\n0,1.9062192,1.6287242,0,25.4,0,-25.4\n0,2.1429472,1.9830034,0,25.4,0,-25.4\n0,2.4238966,2.3033736,0,25.4,0,-25.4\n0,2.7442414,2.584323,0,25.4,0,-25.4\n0,3.098546,2.821051,0,25.4,0,-25.4\n0,3.480689,3.0094936,0,25.4,0,-25.4\n0,3.884168,3.1464504,0,25.4,0,-25.4\n0,4.3020742,3.2295846,0,25.4,0,-25.4\n0,4.7272702,3.2574484,0,25.4,0,-25.4\n0,5.1524408,3.2295846,0,25.4,0,-25.4\n0,5.570347,3.1464504,0,25.4,0,-25.4\n0,5.973826,3.0094936,0,25.4,0,-25.4\n0,6.3559944,2.821051,0,25.4,0,-25.4\n0,6.7102736,2.584323,0,25.4,0,-25.4\n0,7.0306184,2.3033736,0,25.4,0,-25.4\n0,7.3115678,1.9830034,0,25.4,0,-25.4\n0,7.5482958,1.6287242,0,25.4,0,-25.4\n0,7.7367638,1.2465812,0,25.4,0,-25.4\n0,7.8737206,0.8431022,0,25.4,0,-25.4\n0,7.9568548,0.4251706,0,25.4,0,-25.4\n0,3.0482032,5.5942992,0,25.4,0,-25.4\n0,2.9839412,5.1610768,0,25.4,0,-25.4\n0,2.8775152,4.7362618,0,25.4,0,-25.4\n0,2.729992,4.3239182,0,25.4,0,-25.4\n0,2.5427432,3.9280338,0,25.4,0,-25.4\n0,2.3175976,3.5523932,0,25.4,0,-25.4\n0,2.0567142,3.2006286,0,25.4,0,-25.4\n0,1.7626076,2.8761436,0,25.4,0,-25.4\n0,1.4380972,2.582037,0,25.4,0,-25.4\n0,1.086358,2.3211536,0,25.4,0,-25.4\n0,0.7107174,2.096008,0,25.4,0,-25.4\n0,0.3148076,1.9087592,0,25.4,0,-25.4\n0,0.3148076,10.154666,0,25.4,0,-25.4\n0,0.7107174,9.9674172,0,25.4,0,-25.4\n0,1.086358,9.7422716,0,25.4,0,-25.4\n0,1.4380972,9.4813882,0,25.4,0,-25.4\n0,1.7626076,9.1872816,0,25.4,0,-25.4\n0,2.0567142,8.8627966,0,25.4,0,-25.4\n0,2.3175976,8.511032,0,25.4,0,-25.4\n0,2.5427432,8.1353914,0,25.4,0,-25.4\n0,2.729992,7.7394816,0,25.4,0,-25.4\n0,2.8775152,7.327138,0,25.4,0,-25.4\n0,2.9839412,6.902323,0,25.4,0,-25.4\n0,3.0482032,6.469126,0,25.4,0,-25.4\n0,3.0696916,6.0317126,0,25.4,0,-25.4\n0,18.7471304,9.4569026,0,25.4,0,-25.4\n0,18.6083702,9.0603324,0,25.4,0,-25.4\n0,18.3848248,8.70458,0,25.4,0,-25.4\n0,18.0877464,8.4074762,0,25.4,0,-25.4\n0,17.731994,8.1839562,0,25.4,0,-25.4\n0,17.3354238,8.0451706,0,25.4,0,-25.4\n0,16.9178986,7.9981298,0,25.4,0,-25.4\n0,16.5003988,8.0451706,0,25.4,0,-25.4\n0,16.1038286,8.1839562,0,25.4,0,-25.4\n0,15.7480762,8.4074762,0,25.4,0,-25.4\n0,15.4509724,8.70458,0,25.4,0,-25.4\n0,15.2274524,9.0603324,0,25.4,0,-25.4\n0,15.0886668,9.4569026,0,25.4,0,-25.4\n0,15.041626,9.8744024,0,25.4,0,-25.4\n0,15.0886668,10.2919276,0,25.4,0,-25.4\n0,15.2274524,10.6884978,0,25.4,0,-25.4\n0,15.4509724,11.0442502,0,25.4,0,-25.4\n0,15.7480762,11.341354,0,25.4,0,-25.4\n0,16.1038286,11.564874,0,25.4,0,-25.4\n0,16.5003988,11.7036342,0,25.4,0,-25.4\n0,16.9178986,11.750675,0,25.4,0,-25.4\n0,17.3354238,11.7036342,0,25.4,0,-25.4\n0,17.731994,11.564874,0,25.4,0,-25.4\n0,18.0877464,11.341354,0,25.4,0,-25.4\n0,18.3848248,11.0442502,0,25.4,0,-25.4\n0,18.6083702,10.6884978,0,25.4,0,-25.4\n0,18.7471304,10.2919276,0,25.4,0,-25.4\n0,18.7941712,9.8744024,0,25.4,0,-25.4\n0,21.2068664,21.1084414,0,25.4,0,-25.4\n0,20.8647792,21.3569804,0,25.4,0,-25.4\n0,20.5818486,21.6712292,0,25.4,0,-25.4\n0,11.7541802,19.0603632,0,25.4,0,-25.4\n0,11.6505482,18.6510676,0,25.4,0,-25.4\n0,11.480927,18.264378,0,25.4,0,-25.4\n0,11.2499902,17.9108862,0,25.4,0,-25.4\n0,10.9640116,17.6002442,0,25.4,0,-25.4\n0,10.6308144,17.3409102,0,25.4,0,-25.4\n0,10.2594664,17.1399454,0,25.4,0,-25.4\n0,9.8601022,17.0028362,0,25.4,0,-25.4\n0,9.4436184,16.9333418,0,25.4,0,-25.4\n0,9.0213688,16.9333418,0,25.4,0,-25.4\n0,8.6049104,17.0028362,0,25.4,0,-25.4\n0,8.2055462,17.1399454,0,25.4,0,-25.4\n0,7.8341982,17.3409102,0,25.4,0,-25.4\n0,7.5009756,17.6002442,0,25.4,0,-25.4\n0,7.2150224,17.9108862,0,25.4,0,-25.4\n0,6.9840602,18.264378,0,25.4,0,-25.4\n0,6.8144644,18.6510676,0,25.4,0,-25.4\n0,6.710807,19.0603632,0,25.4,0,-25.4\n0,6.6759328,19.481165,0,25.4,0,-25.4\n0,6.710807,19.9019668,0,25.4,0,-25.4\n0,6.8144644,20.3112878,0,25.4,0,-25.4\n0,6.9840602,20.697952,0,25.4,0,-25.4\n0,7.2150224,21.0514438,0,25.4,0,-25.4\n0,7.5009756,21.3620858,0,25.4,0,-25.4\n0,7.8341982,21.6214452,0,25.4,0,-25.4\n0,8.2055462,21.82241,0,25.4,0,-25.4\n0,10.2594664,21.82241,0,25.4,0,-25.4\n0,10.6308144,21.6214452,0,25.4,0,-25.4\n0,10.9640116,21.3620858,0,25.4,0,-25.4\n0,11.2499902,21.0514438,0,25.4,0,-25.4\n0,11.480927,20.697952,0,25.4,0,-25.4\n0,11.6505482,20.3112878,0,25.4,0,-25.4\n0,11.7541802,19.9019668,0,25.4,0,-25.4\n0,11.7890544,19.481165,0,25.4,0,-25.4\n0,20.8583784,16.4692076,0,25.4,0,-25.4\n0,20.7913224,16.0457896,0,25.4,0,-25.4\n0,20.6803752,15.6317442,0,25.4,0,-25.4\n0,20.5267306,15.2315418,0,25.4,0,-25.4\n0,20.3321158,14.8495766,0,25.4,0,-25.4\n0,20.0986644,14.490065,0,25.4,0,-25.4\n0,19.828891,14.1569186,0,25.4,0,-25.4\n0,19.5257674,13.853795,0,25.4,0,-25.4\n0,19.192621,13.5840216,0,25.4,0,-25.4\n0,18.8331094,13.3505448,0,25.4,0,-25.4\n0,18.4511442,13.15593,0,25.4,0,-25.4\n0,18.0509418,13.0023108,0,25.4,0,-25.4\n0,17.636871,12.8913636,0,25.4,0,-25.4\n0,17.2134784,12.8243076,0,25.4,0,-25.4\n0,16.7853868,12.8018794,0,25.4,0,-25.4\n0,16.3573206,12.8243076,0,25.4,0,-25.4\n0,15.9339026,12.8913636,0,25.4,0,-25.4\n0,15.5198572,13.0023108,0,25.4,0,-25.4\n0,15.1196548,13.15593,0,25.4,0,-25.4\n0,14.7376896,13.3505448,0,25.4,0,-25.4\n0,14.378178,13.5840216,0,25.4,0,-25.4\n0,14.0450316,13.853795,0,25.4,0,-25.4\n0,13.741908,14.1569186,0,25.4,0,-25.4\n0,13.4721346,14.490065,0,25.4,0,-25.4\n0,13.2386578,14.8495766,0,25.4,0,-25.4\n0,13.044043,15.2315418,0,25.4,0,-25.4\n0,12.8904238,15.6317442,0,25.4,0,-25.4\n0,12.7794766,16.0457896,0,25.4,0,-25.4\n0,12.7124206,16.4692076,0,25.4,0,-25.4\n0,12.6899924,16.8972738,0,25.4,0,-25.4\n0,12.7124206,17.3253654,0,25.4,0,-25.4\n0,12.7794766,17.748758,0,25.4,0,-25.4\n0,12.8904238,18.1628288,0,25.4,0,-25.4\n0,13.044043,18.5630312,0,25.4,0,-25.4\n0,13.2386578,18.9449964,0,25.4,0,-25.4\n0,13.4721346,19.304508,0,25.4,0,-25.4\n0,13.741908,19.6376544,0,25.4,0,-25.4\n0,14.0450316,19.9407526,0,25.4,0,-25.4\n0,14.378178,20.2105514,0,25.4,0,-25.4\n0,14.7376896,20.4440028,0,25.4,0,-25.4\n0,15.1196548,20.6386176,0,25.4,0,-25.4\n0,15.5198572,20.7922368,0,25.4,0,-25.4\n0,15.9339026,20.9032094,0,25.4,0,-25.4\n0,16.3573206,20.9702654,0,25.4,0,-25.4\n0,16.7853868,20.9926936,0,25.4,0,-25.4\n0,17.2134784,20.9702654,0,25.4,0,-25.4\n0,17.636871,20.9032094,0,25.4,0,-25.4\n0,18.0509418,20.7922368,0,25.4,0,-25.4\n0,18.4511442,20.6386176,0,25.4,0,-25.4\n0,18.8331094,20.4440028,0,25.4,0,-25.4\n0,19.192621,20.2105514,0,25.4,0,-25.4\n0,19.5257674,19.9407526,0,25.4,0,-25.4\n0,19.828891,19.6376544,0,25.4,0,-25.4\n0,20.0986644,19.304508,0,25.4,0,-25.4\n0,20.3321158,18.9449964,0,25.4,0,-25.4\n0,20.5267306,18.5630312,0,25.4,0,-25.4\n0,20.6803752,18.1628288,0,25.4,0,-25.4\n0,20.7913224,17.748758,0,25.4,0,-25.4\n0,20.8583784,17.3253654,0,25.4,0,-25.4\n0,20.8808066,16.8972738,0,25.4,0,-25.4\n0,13.3174994,9.6961452,0,25.4,0,-25.4\n0,13.2480558,9.2577158,0,25.4,0,-25.4\n0,13.1331716,8.8289638,0,25.4,0,-25.4\n0,12.9740914,8.4145628,0,25.4,0,-25.4\n0,12.7725932,8.0190594,0,25.4,0,-25.4\n0,12.530836,7.6467716,0,25.4,0,-25.4\n0,12.2514868,7.3018142,0,25.4,0,-25.4\n0,11.9375936,6.9879464,0,25.4,0,-25.4\n0,11.5926362,6.7085972,0,25.4,0,-25.4\n0,11.2203738,6.46684,0,25.4,0,-25.4\n0,10.824845,6.2653164,0,25.4,0,-25.4\n0,10.410444,6.1062362,0,25.4,0,-25.4\n0,9.981692,5.991352,0,25.4,0,-25.4\n0,9.5432626,5.9219084,0,25.4,0,-25.4\n0,9.0999818,5.8986928,0,25.4,0,-25.4\n0,8.6567264,5.9219084,0,25.4,0,-25.4\n0,8.218297,5.991352,0,25.4,0,-25.4\n0,7.7895196,6.1062362,0,25.4,0,-25.4\n0,7.3751186,6.2653164,0,25.4,0,-25.4\n0,6.9796152,6.46684,0,25.4,0,-25.4\n0,6.6073528,6.7085972,0,25.4,0,-25.4\n0,6.2623954,6.9879464,0,25.4,0,-25.4\n0,5.9485022,7.3018142,0,25.4,0,-25.4\n0,5.669153,7.6467716,0,25.4,0,-25.4\n0,5.4273958,8.0190594,0,25.4,0,-25.4\n0,5.2258722,8.4145628,0,25.4,0,-25.4\n0,5.0668174,8.8289638,0,25.4,0,-25.4\n0,4.9519332,9.2577158,0,25.4,0,-25.4\n0,4.8824896,9.6961452,0,25.4,0,-25.4\n0,4.8592486,10.139426,0,25.4,0,-25.4\n0,4.8824896,10.5827068,0,25.4,0,-25.4\n0,4.9519332,11.0211362,0,25.4,0,-25.4\n0,5.0668174,11.4498882,0,25.4,0,-25.4\n0,5.2258722,11.8642892,0,25.4,0,-25.4\n0,5.4273958,12.2597926,0,25.4,0,-25.4\n0,5.669153,12.6320804,0,25.4,0,-25.4\n0,5.9485022,12.9770378,0,25.4,0,-25.4\n0,6.2623954,13.2909056,0,25.4,0,-25.4\n0,6.6073528,13.5702548,0,25.4,0,-25.4\n0,6.9796152,13.812012,0,25.4,0,-25.4\n0,7.3751186,14.0135356,0,25.4,0,-25.4\n0,7.7895196,14.1726158,0,25.4,0,-25.4\n0,8.218297,14.2875,0,25.4,0,-25.4\n0,8.6567264,14.3569436,0,25.4,0,-25.4\n0,9.0999818,14.3801592,0,25.4,0,-25.4\n0,9.5432626,14.3569436,0,25.4,0,-25.4\n0,9.981692,14.2875,0,25.4,0,-25.4\n0,10.410444,14.1726158,0,25.4,0,-25.4\n0,10.824845,14.0135356,0,25.4,0,-25.4\n0,11.2203738,13.812012,0,25.4,0,-25.4\n0,11.5926362,13.5702548,0,25.4,0,-25.4\n0,11.9375936,13.2909056,0,25.4,0,-25.4\n0,12.2514868,12.9770378,0,25.4,0,-25.4\n0,12.530836,12.6320804,0,25.4,0,-25.4\n0,12.7725932,12.2597926,0,25.4,0,-25.4\n0,12.9740914,11.8642892,0,25.4,0,-25.4\n0,13.1331716,11.4498882,0,25.4,0,-25.4\n0,13.2480558,11.0211362,0,25.4,0,-25.4\n0,13.3174994,10.5827068,0,25.4,0,-25.4\n0,13.3407404,10.139426,0,25.4,0,-25.4\n0,21.5277192,2.3211536,0,25.4,0,-25.4\n0,21.1759546,2.582037,0,25.4,0,-25.4\n0,20.8514442,2.8761436,0,25.4,0,-25.4\n0,20.557363,3.2006286,0,25.4,0,-25.4\n0,20.2964796,3.5523932,0,25.4,0,-25.4\n0,20.0713086,3.9280338,0,25.4,0,-25.4\n0,19.8840852,4.3239182,0,25.4,0,-25.4\n0,19.7365366,4.7362618,0,25.4,0,-25.4\n0,19.630136,5.1610768,0,25.4,0,-25.4\n0,19.565874,5.5942992,0,25.4,0,-25.4\n0,19.5443856,6.0317126,0,25.4,0,-25.4\n0,19.565874,6.469126,0,25.4,0,-25.4\n0,19.630136,6.902323,0,25.4,0,-25.4\n0,19.7365366,7.327138,0,25.4,0,-25.4\n0,19.8840852,7.7394816,0,25.4,0,-25.4\n0,20.0713086,8.1353914,0,25.4,0,-25.4\n0,20.2964796,8.511032,0,25.4,0,-25.4\n0,20.557363,8.8627966,0,25.4,0,-25.4\n0,20.8514442,9.1872816,0,25.4,0,-25.4\n0,21.1759546,9.4813882,0,25.4,0,-25.4\n0,21.5277192,9.7422716,0,25.4,0,-25.4\n0,6.1278008,16.064738,0,25.4,0,-25.4\n0,6.0612782,15.6162756,0,25.4,0,-25.4\n0,5.9511438,15.1765,0,25.4,0,-25.4\n0,5.7983882,14.749653,0,25.4,0,-25.4\n0,5.6045608,14.339824,0,25.4,0,-25.4\n0,5.3714904,13.95095,0,25.4,0,-25.4\n0,5.1014122,13.5868156,0,25.4,0,-25.4\n0,4.7969678,13.2509006,0,25.4,0,-25.4\n0,4.4610528,12.9464308,0,25.4,0,-25.4\n0,4.0969184,12.676378,0,25.4,0,-25.4\n0,3.7080444,12.4433076,0,25.4,0,-25.4\n0,3.2982154,12.2494548,0,25.4,0,-25.4\n0,2.8713684,12.0967246,0,25.4,0,-25.4\n0,2.4315928,11.9865648,0,25.4,0,-25.4\n0,1.9831304,11.9200422,0,25.4,0,-25.4\n0,1.5303246,11.8977918,0,25.4,0,-25.4\n0,1.0774934,11.9200422,0,25.4,0,-25.4\n0,0.6290564,11.9865648,0,25.4,0,-25.4\n0,0.1892808,12.0967246,0,25.4,0,-25.4\n0,0.1892808,20.938363,0,25.4,0,-25.4\n0,0.6290564,21.0485228,0,25.4,0,-25.4\n0,1.0774934,21.1150454,0,25.4,0,-25.4\n0,1.5303246,21.1372958,0,25.4,0,-25.4\n0,1.9831304,21.1150454,0,25.4,0,-25.4\n0,2.4315928,21.0485228,0,25.4,0,-25.4\n0,2.8713684,20.938363,0,25.4,0,-25.4\n0,3.2982154,20.7856328,0,25.4,0,-25.4\n0,3.7080444,20.59178,0,25.4,0,-25.4\n0,4.0969184,20.3587096,0,25.4,0,-25.4\n0,4.4610528,20.0886568,0,25.4,0,-25.4\n0,4.7969678,19.784187,0,25.4,0,-25.4\n0,5.1014122,19.448272,0,25.4,0,-25.4\n0,5.3714904,19.0841376,0,25.4,0,-25.4\n0,5.6045608,18.6952636,0,25.4,0,-25.4\n0,5.7983882,18.2854346,0,25.4,0,-25.4\n0,5.9511438,17.8585876,0,25.4,0,-25.4\n0,6.0612782,17.418812,0,25.4,0,-25.4\n0,6.1278008,16.9703496,0,25.4,0,-25.4\n0,6.1500512,16.5175438,0,25.4,0,-25.4\n0,19.5946268,1.221359,0,25.4,0,-25.4\n0,19.5242688,0.7469886,0,25.4,0,-25.4\n0,19.4077336,0.281813,0,25.4,0,-25.4\n0,10.055352,0.281813,0,25.4,0,-25.4\n0,9.9388168,0.7469886,0,25.4,0,-25.4\n0,9.8684588,1.221359,0,25.4,0,-25.4\n0,9.844913,1.7003268,0,25.4,0,-25.4\n0,9.8684588,2.1792946,0,25.4,0,-25.4\n0,9.9388168,2.653665,0,25.4,0,-25.4\n0,10.055352,3.1188406,0,25.4,0,-25.4\n0,10.216896,3.570351,0,25.4,0,-25.4\n0,10.4219248,4.0038528,0,25.4,0,-25.4\n0,10.6684572,4.4151804,0,25.4,0,-25.4\n0,10.954131,4.800346,0,25.4,0,-25.4\n0,11.2761776,5.155692,0,25.4,0,-25.4\n0,11.6314982,5.4777386,0,25.4,0,-25.4\n0,12.0166892,5.763387,0,25.4,0,-25.4\n0,12.4280168,6.0099448,0,25.4,0,-25.4\n0,12.8615186,6.2149736,0,25.4,0,-25.4\n0,13.313029,6.3765176,0,25.4,0,-25.4\n0,13.7782046,6.4930528,0,25.4,0,-25.4\n0,14.252575,6.5634108,0,25.4,0,-25.4\n0,14.7315428,6.5869312,0,25.4,0,-25.4\n0,15.2105106,6.5634108,0,25.4,0,-25.4\n0,15.684881,6.4930528,0,25.4,0,-25.4\n0,16.1500566,6.3765176,0,25.4,0,-25.4\n0,16.601567,6.2149736,0,25.4,0,-25.4\n0,17.0350688,6.0099448,0,25.4,0,-25.4\n0,17.4463964,5.763387,0,25.4,0,-25.4\n0,17.8315874,5.4777386,0,25.4,0,-25.4\n0,18.186908,5.155692,0,25.4,0,-25.4\n0,18.5089546,4.800346,0,25.4,0,-25.4\n0,18.794603,4.4151804,0,25.4,0,-25.4\n0,19.0411608,4.0038528,0,25.4,0,-25.4\n0,19.2461896,3.570351,0,25.4,0,-25.4\n0,19.4077336,3.1188406,0,25.4,0,-25.4\n0,19.5242688,2.653665,0,25.4,0,-25.4\n0,19.5946268,2.1792946,0,25.4,0,-25.4\n0,19.6181472,1.7003268,0,25.4,0,-25.4\n0,25.1624084,12.2494548,0,25.4,0,-25.4\n0,24.7525794,12.4433076,0,25.4,0,-25.4\n0,24.3637308,12.676378,0,25.4,0,-25.4\n0,23.9995964,12.9464308,0,25.4,0,-25.4\n0,23.663656,13.2509006,0,25.4,0,-25.4\n0,23.3592116,13.5868156,0,25.4,0,-25.4\n0,23.0891334,13.95095,0,25.4,0,-25.4\n0,22.856063,14.339824,0,25.4,0,-25.4\n0,22.6622356,14.749653,0,25.4,0,-25.4\n0,22.5095054,15.1765,0,25.4,0,-25.4\n0,22.3993456,15.6162756,0,25.4,0,-25.4\n0,22.332823,16.064738,0,25.4,0,-25.4\n0,22.3105726,16.5175438,0,25.4,0,-25.4\n0,22.332823,16.9703496,0,25.4,0,-25.4\n0,22.3993456,17.418812,0,25.4,0,-25.4\n0,22.5095054,17.8585876,0,25.4,0,-25.4\n0,22.6622356,18.2854346,0,25.4,0,-25.4\n0,22.856063,18.6952636,0,25.4,0,-25.4\n0,23.0891334,19.0841376,0,25.4,0,-25.4\n0,23.3592116,19.448272,0,25.4,0,-25.4\n0,23.663656,19.784187,0,25.4,0,-25.4\n0,23.9995964,20.0886568,0,25.4,0,-25.4\n0,24.3637308,20.3587096,0,25.4,0,-25.4\n0,24.7525794,20.59178,0,25.4,0,-25.4\n0,25.1624084,20.7856328,0,25.4,0,-25.4\n0,24.0659412,22.037421,0,25.4,0,-25.4\n0,23.854537,21.6712292,0,25.4,0,-25.4\n0,23.571581,21.3569804,0,25.4,0,-25.4\n0,23.2294938,21.1084414,0,25.4,0,-25.4\n0,22.8432106,20.936458,0,25.4,0,-25.4\n0,22.429597,20.8485486,0,25.4,0,-25.4\n0,22.0067632,20.8485486,0,25.4,0,-25.4\n0,21.5931496,20.936458,0,25.4,0,-25.4\n0,20.370419,22.037421,0,25.4,0,-25.4\n0,25.302464,1.7612106,0,25.4,0,-25.4\n0,24.877649,1.65481,0,25.4,0,-25.4\n0,24.444452,1.590548,0,25.4,0,-25.4\n0,24.0070386,1.5690596,0,25.4,0,-25.4\n0,23.5696252,1.590548,0,25.4,0,-25.4\n0,23.1364028,1.65481,0,25.4,0,-25.4\n0,22.7115878,1.7612106,0,25.4,0,-25.4\n0,22.2992442,1.9087592,0,25.4,0,-25.4\n0,21.9033598,2.096008,0,25.4,0,-25.4\n0,21.9033598,9.9674172,0,25.4,0,-25.4\n0,22.2992442,10.154666,0,25.4,0,-25.4\n0,22.7115878,10.3022146,0,25.4,0,-25.4\n0,23.1364028,10.4086152,0,25.4,0,-25.4\n0,23.5696252,10.4728772,0,25.4,0,-25.4\n0,24.0070386,10.4943656,0,25.4,0,-25.4\n0,24.444452,10.4728772,0,25.4,0,-25.4\n0,24.877649,10.4086152,0,25.4,0,-25.4\n0,25.302464,10.3022146,0,25.4,0,-25.4\n0,19.2461896,25.2303026,0,25.4,0,-25.4\n0,19.0411608,24.7967754,0,25.4,0,-25.4\n0,18.794603,24.3854732,0,25.4,0,-25.4\n0,18.5089546,24.0002822,0,25.4,0,-25.4\n0,18.186908,23.6449616,0,25.4,0,-25.4\n0,17.8315874,23.322915,0,25.4,0,-25.4\n0,17.4463964,23.0372412,0,25.4,0,-25.4\n0,17.0350688,22.7907088,0,25.4,0,-25.4\n0,16.601567,22.58568,0,25.4,0,-25.4\n0,16.1500566,22.4241106,0,25.4,0,-25.4\n0,15.684881,22.3076008,0,25.4,0,-25.4\n0,15.2105106,22.2372428,0,25.4,0,-25.4\n0,14.7315428,22.213697,0,25.4,0,-25.4\n0,14.252575,22.2372428,0,25.4,0,-25.4\n0,13.7782046,22.3076008,0,25.4,0,-25.4\n0,13.313029,22.4241106,0,25.4,0,-25.4\n0,12.8615186,22.58568,0,25.4,0,-25.4\n0,12.4280168,22.7907088,0,25.4,0,-25.4\n0,12.0166892,23.0372412,0,25.4,0,-25.4\n0,11.6314982,23.322915,0,25.4,0,-25.4\n0,11.2761776,23.6449616,0,25.4,0,-25.4\n0,10.954131,24.0002822,0,25.4,0,-25.4\n0,10.6684572,24.3854732,0,25.4,0,-25.4\n0,10.4219248,24.7967754,0,25.4,0,-25.4\n0,10.216896,25.2303026,0,25.4,0,-25.4\n0,20.2397614,22.4395792,0,25.4,0,-25.4\n0,20.1955654,22.8601016,0,25.4,0,-25.4\n0,20.2397614,23.280624,0,25.4,0,-25.4\n0,20.370419,23.6827822,0,25.4,0,-25.4\n0,20.5818486,24.048974,0,25.4,0,-25.4\n0,20.8647792,24.3631974,0,25.4,0,-25.4\n0,21.2068664,24.6117364,0,25.4,0,-25.4\n0,8.6049104,21.9594938,0,25.4,0,-25.4\n0,9.0213688,22.0289882,0,25.4,0,-25.4\n0,9.4436184,22.0289882,0,25.4,0,-25.4\n0,9.8601022,21.9594938,0,25.4,0,-25.4\n0,7.9568548,24.9748294,0,25.4,0,-25.4\n0,7.8737206,24.5568978,0,25.4,0,-25.4\n0,7.7367638,24.1534188,0,25.4,0,-25.4\n0,7.5482958,23.7712758,0,25.4,0,-25.4\n0,7.3115678,23.4169966,0,25.4,0,-25.4\n0,7.0306184,23.0966264,0,25.4,0,-25.4\n0,6.7102736,22.815677,0,25.4,0,-25.4\n0,6.3559944,22.578949,0,25.4,0,-25.4\n0,5.973826,22.3905064,0,25.4,0,-25.4\n0,5.570347,22.2535496,0,25.4,0,-25.4\n0,5.1524408,22.1704154,0,25.4,0,-25.4\n0,4.7272702,22.1425516,0,25.4,0,-25.4\n0,4.3020742,22.1704154,0,25.4,0,-25.4\n0,3.884168,22.2535496,0,25.4,0,-25.4\n0,3.480689,22.3905064,0,25.4,0,-25.4\n0,3.098546,22.578949,0,25.4,0,-25.4\n0,2.7442414,22.815677,0,25.4,0,-25.4\n0,2.4238966,23.0966264,0,25.4,0,-25.4\n0,2.1429472,23.4169966,0,25.4,0,-25.4\n0,1.9062192,23.7712758,0,25.4,0,-25.4\n0,1.7177766,24.1534188,0,25.4,0,-25.4\n0,1.5807944,24.5568978,0,25.4,0,-25.4\n0,1.4976856,24.9748294,0,25.4,0,-25.4\n0,1.4697964,25.4,0,25.4,0,-25.4\n0,7.9847186,25.4,0,25.4,0,-25.4\n0,24.1966242,22.4395792,0,25.4,0,-25.4\n0,21.5931496,24.7837452,0,25.4,0,-25.4\n0,22.0067632,24.8716546,0,25.4,0,-25.4\n0,22.429597,24.8716546,0,25.4,0,-25.4\n0,22.8432106,24.7837452,0,25.4,0,-25.4\n0,23.2294938,24.6117364,0,25.4,0,-25.4\n0,23.571581,24.3631974,0,25.4,0,-25.4\n0,23.854537,24.048974,0,25.4,0,-25.4\n0,24.0659412,23.6827822,0,25.4,0,-25.4\n0,24.1966242,23.280624,0,25.4,0,-25.4\n0,24.2408202,22.8601016,0,25.4,0,-25.4\n")),_f(wf.ParsePatFile("\n*BUBBLES-02,BUBBLES-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n0,0.315722,3.5481006,0,25.4,0,-25.4\n0,0.1191006,3.162173,0,25.4,0,-25.4\n0,0.1191006,4.7896018,0,25.4,0,-25.4\n0,0.315722,4.4036742,0,25.4,0,-25.4\n0,0.3834892,3.9758874,0,25.4,0,-25.4\n0,0.9946386,13.9859512,0,25.4,0,-25.4\n0,0.840232,13.5788146,0,25.4,0,-25.4\n0,0.5928614,13.220446,0,25.4,0,-25.4\n0,0.2669286,12.9316988,0,25.4,0,-25.4\n0,0.2669286,15.9047688,0,25.4,0,-25.4\n0,0.5928614,15.6160216,0,25.4,0,-25.4\n0,0.840232,15.257653,0,25.4,0,-25.4\n0,0.9946386,14.8505164,0,25.4,0,-25.4\n0,1.0471404,14.4182338,0,25.4,0,-25.4\n0,0.321437,1.5549118,0,25.4,0,-25.4\n0,0.7453122,1.6269208,0,25.4,0,-25.4\n0,1.1745976,1.6510254,0,25.4,0,-25.4\n0,1.6039084,1.6269208,0,25.4,0,-25.4\n0,2.0277836,1.5549118,0,25.4,0,-25.4\n0,2.44094,1.435862,0,25.4,0,-25.4\n0,2.838196,1.2713208,0,25.4,0,-25.4\n0,3.214497,1.0633456,0,25.4,0,-25.4\n0,3.5651694,0.8145526,0,25.4,0,-25.4\n0,3.8857682,0.5280406,0,25.4,0,-25.4\n0,4.1722802,0.2074418,0,25.4,0,-25.4\n0,5.3785008,15.8337504,0,25.4,0,-25.4\n0,5.1644804,15.4630628,0,25.4,0,-25.4\n0,4.8365664,15.1879046,0,25.4,0,-25.4\n0,4.434332,15.041499,0,25.4,0,-25.4\n0,4.0062658,15.041499,0,25.4,0,-25.4\n0,3.6040314,15.1879046,0,25.4,0,-25.4\n0,3.2761174,15.4630628,0,25.4,0,-25.4\n0,3.062097,15.8337504,0,25.4,0,-25.4\n0,2.9877512,16.2553142,0,25.4,0,-25.4\n0,3.062097,16.676878,0,25.4,0,-25.4\n0,3.2761174,17.0475656,0,25.4,0,-25.4\n0,3.6040314,17.3227238,0,25.4,0,-25.4\n0,4.0062658,17.4691294,0,25.4,0,-25.4\n0,4.434332,17.4691294,0,25.4,0,-25.4\n0,4.8365664,17.3227238,0,25.4,0,-25.4\n0,5.1644804,17.0475656,0,25.4,0,-25.4\n0,5.3785008,16.676878,0,25.4,0,-25.4\n0,5.4528212,16.2553142,0,25.4,0,-25.4\n0,1.6039084,19.4068192,0,25.4,0,-25.4\n0,1.1745976,19.3827146,0,25.4,0,-25.4\n0,0.7453122,19.4068192,0,25.4,0,-25.4\n0,8.07212,6.3135002,0,25.4,0,-25.4\n0,7.9904082,5.9026552,0,25.4,0,-25.4\n0,7.8557628,5.5059834,0,25.4,0,-25.4\n0,7.6704952,5.130292,0,25.4,0,-25.4\n0,7.437755,4.7820072,0,25.4,0,-25.4\n0,7.1615554,4.4670472,0,25.4,0,-25.4\n0,6.8466208,4.1908476,0,25.4,0,-25.4\n0,6.4983106,3.9581328,0,25.4,0,-25.4\n0,6.1226192,3.7728652,0,25.4,0,-25.4\n0,5.7259474,3.6382198,0,25.4,0,-25.4\n0,5.3151024,3.5564826,0,25.4,0,-25.4\n0,4.89712,3.5291014,0,25.4,0,-25.4\n0,4.4791122,3.5564826,0,25.4,0,-25.4\n0,4.0682672,3.6382198,0,25.4,0,-25.4\n0,3.6715954,3.7728652,0,25.4,0,-25.4\n0,3.295904,3.9581328,0,25.4,0,-25.4\n0,2.9475938,4.1908476,0,25.4,0,-25.4\n0,2.6326592,4.4670472,0,25.4,0,-25.4\n0,2.3564596,4.7820072,0,25.4,0,-25.4\n0,2.1237448,5.130292,0,25.4,0,-25.4\n0,1.9384772,5.5059834,0,25.4,0,-25.4\n0,1.8038064,5.9026552,0,25.4,0,-25.4\n0,1.7220946,6.3135002,0,25.4,0,-25.4\n0,1.694688,6.731508,0,25.4,0,-25.4\n0,1.7220946,7.1495158,0,25.4,0,-25.4\n0,1.8038064,7.5603608,0,25.4,0,-25.4\n0,1.9384772,7.9570072,0,25.4,0,-25.4\n0,2.1237448,8.332724,0,25.4,0,-25.4\n0,2.3564596,8.6810088,0,25.4,0,-25.4\n0,2.6326592,8.9959434,0,25.4,0,-25.4\n0,2.9475938,9.272143,0,25.4,0,-25.4\n0,3.295904,9.5048832,0,25.4,0,-25.4\n0,3.6715954,9.6901508,0,25.4,0,-25.4\n0,4.0682672,9.8247962,0,25.4,0,-25.4\n0,4.4791122,9.9065334,0,25.4,0,-25.4\n0,4.89712,9.9339146,0,25.4,0,-25.4\n0,5.3151024,9.9065334,0,25.4,0,-25.4\n0,5.7259474,9.8247962,0,25.4,0,-25.4\n0,6.1226192,9.6901508,0,25.4,0,-25.4\n0,6.4983106,9.5048832,0,25.4,0,-25.4\n0,6.8466208,9.272143,0,25.4,0,-25.4\n0,7.1615554,8.9959434,0,25.4,0,-25.4\n0,7.437755,8.6810088,0,25.4,0,-25.4\n0,7.6704952,8.332724,0,25.4,0,-25.4\n0,7.8557628,7.9570072,0,25.4,0,-25.4\n0,7.9904082,7.5603608,0,25.4,0,-25.4\n0,8.07212,7.1495158,0,25.4,0,-25.4\n0,8.0995266,6.731508,0,25.4,0,-25.4\n0,18.0404516,13.0813048,0,25.4,0,-25.4\n0,17.9789836,12.6669292,0,25.4,0,-25.4\n0,17.8771804,12.2606054,0,25.4,0,-25.4\n0,17.736058,11.8661942,0,25.4,0,-25.4\n0,17.5569626,11.4875056,0,25.4,0,-25.4\n0,17.3416214,11.1282226,0,25.4,0,-25.4\n0,17.0920664,10.7917488,0,25.4,0,-25.4\n0,16.8107614,10.4813862,0,25.4,0,-25.4\n0,16.5003734,10.2000558,0,25.4,0,-25.4\n0,16.163925,9.9505262,0,25.4,0,-25.4\n0,15.8046166,9.7351596,0,25.4,0,-25.4\n0,15.4259534,9.5560642,0,25.4,0,-25.4\n0,15.0315422,9.4149418,0,25.4,0,-25.4\n0,14.625193,9.313164,0,25.4,0,-25.4\n0,14.2108428,9.251696,0,25.4,0,-25.4\n0,13.792454,9.2311474,0,25.4,0,-25.4\n0,13.3740652,9.251696,0,25.4,0,-25.4\n0,12.9596896,9.313164,0,25.4,0,-25.4\n0,12.5533404,9.4149418,0,25.4,0,-25.4\n0,12.1589292,9.5560642,0,25.4,0,-25.4\n0,11.780266,9.7351596,0,25.4,0,-25.4\n0,11.4209576,9.9505262,0,25.4,0,-25.4\n0,11.0845092,10.2000558,0,25.4,0,-25.4\n0,10.7741212,10.4813862,0,25.4,0,-25.4\n0,10.4928162,10.7917488,0,25.4,0,-25.4\n0,10.2432866,11.1282226,0,25.4,0,-25.4\n0,10.02792,11.4875056,0,25.4,0,-25.4\n0,9.8488246,11.8661942,0,25.4,0,-25.4\n0,9.7077022,12.2606054,0,25.4,0,-25.4\n0,9.6059244,12.6669292,0,25.4,0,-25.4\n0,9.5444564,13.0813048,0,25.4,0,-25.4\n0,9.5239078,13.4996936,0,25.4,0,-25.4\n0,9.5444564,13.9180824,0,25.4,0,-25.4\n0,9.6059244,14.332458,0,25.4,0,-25.4\n0,9.7077022,14.7387818,0,25.4,0,-25.4\n0,9.8488246,15.133193,0,25.4,0,-25.4\n0,10.02792,15.5118816,0,25.4,0,-25.4\n0,10.2432866,15.8711646,0,25.4,0,-25.4\n0,10.4928162,16.2076384,0,25.4,0,-25.4\n0,10.7741212,16.518001,0,25.4,0,-25.4\n0,11.0845092,16.7993314,0,25.4,0,-25.4\n0,11.4209576,17.048861,0,25.4,0,-25.4\n0,11.780266,17.2642276,0,25.4,0,-25.4\n0,12.1589292,17.443323,0,25.4,0,-25.4\n0,12.5533404,17.5844454,0,25.4,0,-25.4\n0,12.9596896,17.6862232,0,25.4,0,-25.4\n0,13.3740652,17.7476912,0,25.4,0,-25.4\n0,13.792454,17.7682398,0,25.4,0,-25.4\n0,14.2108428,17.7476912,0,25.4,0,-25.4\n0,14.625193,17.6862232,0,25.4,0,-25.4\n0,15.0315422,17.5844454,0,25.4,0,-25.4\n0,15.4259534,17.443323,0,25.4,0,-25.4\n0,15.8046166,17.2642276,0,25.4,0,-25.4\n0,16.163925,17.048861,0,25.4,0,-25.4\n0,16.5003734,16.7993314,0,25.4,0,-25.4\n0,16.8107614,16.518001,0,25.4,0,-25.4\n0,17.0920664,16.2076384,0,25.4,0,-25.4\n0,17.3416214,15.8711646,0,25.4,0,-25.4\n0,17.5569626,15.5118816,0,25.4,0,-25.4\n0,17.736058,15.133193,0,25.4,0,-25.4\n0,17.8771804,14.7387818,0,25.4,0,-25.4\n0,17.9789836,14.332458,0,25.4,0,-25.4\n0,18.0404516,13.9180824,0,25.4,0,-25.4\n0,18.0610002,13.4996936,0,25.4,0,-25.4\n0,8.9792048,0.3298444,0,25.4,0,-25.4\n0,8.9318846,0.7497064,0,25.4,0,-25.4\n0,8.9160858,1.1719306,0,25.4,0,-25.4\n0,8.9318846,1.5941294,0,25.4,0,-25.4\n0,8.9792048,2.0139914,0,25.4,0,-25.4\n0,9.0577416,2.429129,0,25.4,0,-25.4\n0,9.1670886,2.8372562,0,25.4,0,-25.4\n0,9.3066362,3.2360616,0,25.4,0,-25.4\n0,9.475597,3.62331,0,25.4,0,-25.4\n0,9.6730312,3.9968424,0,25.4,0,-25.4\n0,9.8978212,4.3546014,0,25.4,0,-25.4\n0,10.1487224,4.694555,0,25.4,0,-25.4\n0,10.4243124,5.0147982,0,25.4,0,-25.4\n0,10.7230672,5.3135784,0,25.4,0,-25.4\n0,11.0433104,5.5891684,0,25.4,0,-25.4\n0,11.383264,5.8400696,0,25.4,0,-25.4\n0,11.741023,6.0648596,0,25.4,0,-25.4\n0,12.1145554,6.2622684,0,25.4,0,-25.4\n0,12.5018292,6.4312292,0,25.4,0,-25.4\n0,12.9006346,6.5707768,0,25.4,0,-25.4\n0,13.3087364,6.6801238,0,25.4,0,-25.4\n0,13.723874,6.758686,0,25.4,0,-25.4\n0,14.143736,6.8059808,0,25.4,0,-25.4\n0,14.5659602,6.8217796,0,25.4,0,-25.4\n0,14.988159,6.8059808,0,25.4,0,-25.4\n0,15.408021,6.758686,0,25.4,0,-25.4\n0,15.8231586,6.6801238,0,25.4,0,-25.4\n0,16.2312858,6.5707768,0,25.4,0,-25.4\n0,16.6300658,6.4312292,0,25.4,0,-25.4\n0,17.0173396,6.2622684,0,25.4,0,-25.4\n0,17.390872,6.0648596,0,25.4,0,-25.4\n0,17.748631,5.8400696,0,25.4,0,-25.4\n0,18.0885846,5.5891684,0,25.4,0,-25.4\n0,18.4088278,5.3135784,0,25.4,0,-25.4\n0,18.7075826,5.0147982,0,25.4,0,-25.4\n0,18.983198,4.694555,0,25.4,0,-25.4\n0,19.2340992,4.3546014,0,25.4,0,-25.4\n0,19.4588892,3.9968424,0,25.4,0,-25.4\n0,19.656298,3.62331,0,25.4,0,-25.4\n0,19.8252588,3.2360616,0,25.4,0,-25.4\n0,23.5769404,0.2074418,0,25.4,0,-25.4\n0,23.8634524,0.5280406,0,25.4,0,-25.4\n0,24.1840512,0.8145526,0,25.4,0,-25.4\n0,24.5347236,1.0633456,0,25.4,0,-25.4\n0,24.9110246,1.2713208,0,25.4,0,-25.4\n0,25.3082552,1.435862,0,25.4,0,-25.4\n0,25.2128274,2.8558998,0,25.4,0,-25.4\n0,24.8269252,2.6592784,0,25.4,0,-25.4\n0,24.399113,2.5915112,0,25.4,0,-25.4\n0,23.9713262,2.6592784,0,25.4,0,-25.4\n0,23.5853986,2.8558998,0,25.4,0,-25.4\n0,23.2791508,3.162173,0,25.4,0,-25.4\n0,23.082504,3.5481006,0,25.4,0,-25.4\n0,23.0147622,3.9758874,0,25.4,0,-25.4\n0,23.082504,4.4036742,0,25.4,0,-25.4\n0,23.2791508,4.7896018,0,25.4,0,-25.4\n0,23.5853986,5.095875,0,25.4,0,-25.4\n0,23.9713262,5.2924964,0,25.4,0,-25.4\n0,24.399113,5.3602636,0,25.4,0,-25.4\n0,24.8269252,5.2924964,0,25.4,0,-25.4\n0,25.2128274,5.095875,0,25.4,0,-25.4\n0,25.2813566,12.729337,0,25.4,0,-25.4\n0,24.8585736,12.6251208,0,25.4,0,-25.4\n0,24.423116,12.6251208,0,25.4,0,-25.4\n0,24.000333,12.729337,0,25.4,0,-25.4\n0,23.614761,12.9316988,0,25.4,0,-25.4\n0,23.2888028,13.220446,0,25.4,0,-25.4\n0,23.0414576,13.5788146,0,25.4,0,-25.4\n0,22.887051,13.9859512,0,25.4,0,-25.4\n0,22.8345492,14.4182338,0,25.4,0,-25.4\n0,22.887051,14.8505164,0,25.4,0,-25.4\n0,23.0414576,15.257653,0,25.4,0,-25.4\n0,23.2888028,15.6160216,0,25.4,0,-25.4\n0,23.614761,15.9047688,0,25.4,0,-25.4\n0,24.000333,16.1071306,0,25.4,0,-25.4\n0,24.423116,16.2113468,0,25.4,0,-25.4\n0,24.8585736,16.2113468,0,25.4,0,-25.4\n0,25.2813566,16.1071306,0,25.4,0,-25.4\n0,20.2000104,0.7497064,0,25.4,0,-25.4\n0,20.1527156,0.3298444,0,25.4,0,-25.4\n0,19.9648064,2.8372562,0,25.4,0,-25.4\n0,20.0741534,2.429129,0,25.4,0,-25.4\n0,20.1527156,2.0139914,0,25.4,0,-25.4\n0,20.2000104,1.5941294,0,25.4,0,-25.4\n0,20.2158092,1.1719306,0,25.4,0,-25.4\n0,20.0741534,25.3147068,0,25.4,0,-25.4\n0,19.9648064,24.906605,0,25.4,0,-25.4\n0,19.8252588,24.5077996,0,25.4,0,-25.4\n0,19.656298,24.1205512,0,25.4,0,-25.4\n0,19.4588892,23.7469934,0,25.4,0,-25.4\n0,19.2340992,23.3892344,0,25.4,0,-25.4\n0,18.983198,23.0492808,0,25.4,0,-25.4\n0,18.7075826,22.7290376,0,25.4,0,-25.4\n0,18.4088278,22.4302828,0,25.4,0,-25.4\n0,18.0885846,22.1546928,0,25.4,0,-25.4\n0,17.748631,21.9037916,0,25.4,0,-25.4\n0,17.390872,21.6790016,0,25.4,0,-25.4\n0,17.0173396,21.4815674,0,25.4,0,-25.4\n0,16.6300658,21.3126066,0,25.4,0,-25.4\n0,16.2312858,21.173059,0,25.4,0,-25.4\n0,15.8231586,21.063712,0,25.4,0,-25.4\n0,15.408021,20.9851752,0,25.4,0,-25.4\n0,14.988159,20.937855,0,25.4,0,-25.4\n0,14.5659602,20.9220562,0,25.4,0,-25.4\n0,14.143736,20.937855,0,25.4,0,-25.4\n0,13.723874,20.9851752,0,25.4,0,-25.4\n0,13.3087364,21.063712,0,25.4,0,-25.4\n0,12.9006346,21.173059,0,25.4,0,-25.4\n0,12.5018292,21.3126066,0,25.4,0,-25.4\n0,12.1145554,21.4815674,0,25.4,0,-25.4\n0,11.741023,21.6790016,0,25.4,0,-25.4\n0,11.383264,21.9037916,0,25.4,0,-25.4\n0,11.0433104,22.1546928,0,25.4,0,-25.4\n0,10.7230672,22.4302828,0,25.4,0,-25.4\n0,10.4243124,22.7290376,0,25.4,0,-25.4\n0,10.1487224,23.0492808,0,25.4,0,-25.4\n0,9.8978212,23.3892344,0,25.4,0,-25.4\n0,9.6730312,23.7469934,0,25.4,0,-25.4\n0,9.475597,24.1205512,0,25.4,0,-25.4\n0,9.3066362,24.5077996,0,25.4,0,-25.4\n0,9.1670886,24.906605,0,25.4,0,-25.4\n0,9.0577416,25.3147068,0,25.4,0,-25.4\n0,4.9846484,22.7875846,0,25.4,0,-25.4\n0,4.9126394,22.3637094,0,25.4,0,-25.4\n0,4.793615,21.9505276,0,25.4,0,-25.4\n0,4.6290738,21.553297,0,25.4,0,-25.4\n0,4.4210732,21.176996,0,25.4,0,-25.4\n0,4.1722802,20.8263236,0,25.4,0,-25.4\n0,3.8857682,20.5057248,0,25.4,0,-25.4\n0,3.5651694,20.2192128,0,25.4,0,-25.4\n0,3.214497,19.9703944,0,25.4,0,-25.4\n0,2.838196,19.7624192,0,25.4,0,-25.4\n0,2.44094,19.597878,0,25.4,0,-25.4\n0,2.0277836,19.4788536,0,25.4,0,-25.4\n0,0.321437,19.4788536,0,25.4,0,-25.4\n0,4.4210732,25.2567694,0,25.4,0,-25.4\n0,4.6290738,24.880443,0,25.4,0,-25.4\n0,4.793615,24.4832124,0,25.4,0,-25.4\n0,4.9126394,24.070056,0,25.4,0,-25.4\n0,4.9846484,23.6461554,0,25.4,0,-25.4\n0,5.008753,23.21687,0,25.4,0,-25.4\n0,25.3082552,19.597878,0,25.4,0,-25.4\n0,24.9110246,19.7624192,0,25.4,0,-25.4\n0,24.5347236,19.9703944,0,25.4,0,-25.4\n0,24.1840512,20.2192128,0,25.4,0,-25.4\n0,23.8634524,20.5057248,0,25.4,0,-25.4\n0,23.5769404,20.8263236,0,25.4,0,-25.4\n0,23.3281474,21.176996,0,25.4,0,-25.4\n0,23.1201468,21.553297,0,25.4,0,-25.4\n0,22.9556056,21.9505276,0,25.4,0,-25.4\n0,22.8365812,22.3637094,0,25.4,0,-25.4\n0,22.7645722,22.7875846,0,25.4,0,-25.4\n0,22.7404422,23.21687,0,25.4,0,-25.4\n0,22.7645722,23.6461554,0,25.4,0,-25.4\n0,22.8365812,24.070056,0,25.4,0,-25.4\n0,22.9556056,24.4832124,0,25.4,0,-25.4\n0,23.1201468,24.880443,0,25.4,0,-25.4\n0,23.3281474,25.2567694,0,25.4,0,-25.4\n")),_f(wf.ParsePatFile("\n*BUBBLES-03,BUBBLES-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n0,10.1887274,4.1559734,0,25.4,0,-25.4\n0,10.0855526,3.6595304,0,25.4,0,-25.4\n0,9.9157536,3.181731,0,25.4,0,-25.4\n0,9.68248,2.7315414,0,25.4,0,-25.4\n0,9.3900752,2.3172928,0,25.4,0,-25.4\n0,9.0439748,1.9467068,0,25.4,0,-25.4\n0,8.6506558,1.6267176,0,25.4,0,-25.4\n0,8.217408,1.3632688,0,25.4,0,-25.4\n0,7.752334,1.1612372,0,25.4,0,-25.4\n0,7.2640952,1.0244582,0,25.4,0,-25.4\n0,6.7617594,0.9553956,0,25.4,0,-25.4\n0,6.2546992,0.9553956,0,25.4,0,-25.4\n0,5.7523634,1.0244582,0,25.4,0,-25.4\n0,5.2641246,1.1612372,0,25.4,0,-25.4\n0,4.7990252,1.3632688,0,25.4,0,-25.4\n0,4.3658028,1.6267176,0,25.4,0,-25.4\n0,3.9724838,1.9467068,0,25.4,0,-25.4\n0,3.6263834,2.3172928,0,25.4,0,-25.4\n0,3.3339786,2.7315414,0,25.4,0,-25.4\n0,3.100705,3.181731,0,25.4,0,-25.4\n0,2.9308806,3.6595304,0,25.4,0,-25.4\n0,2.8277312,4.1559734,0,25.4,0,-25.4\n0,2.7931364,4.6618398,0,25.4,0,-25.4\n0,2.8277312,5.1677062,0,25.4,0,-25.4\n0,2.9308806,5.6641746,0,25.4,0,-25.4\n0,3.100705,6.1419486,0,25.4,0,-25.4\n0,3.3339786,6.5921382,0,25.4,0,-25.4\n0,3.6263834,7.0063868,0,25.4,0,-25.4\n0,3.9724838,7.3769728,0,25.4,0,-25.4\n0,4.3658028,7.696962,0,25.4,0,-25.4\n0,4.7990252,7.9604362,0,25.4,0,-25.4\n0,5.2641246,8.1624424,0,25.4,0,-25.4\n0,5.7523634,8.2992468,0,25.4,0,-25.4\n0,6.2546992,8.368284,0,25.4,0,-25.4\n0,6.7617594,8.368284,0,25.4,0,-25.4\n0,7.2640952,8.2992468,0,25.4,0,-25.4\n0,7.752334,8.1624424,0,25.4,0,-25.4\n0,8.217408,7.9604362,0,25.4,0,-25.4\n0,8.6506558,7.696962,0,25.4,0,-25.4\n0,9.0439748,7.3769728,0,25.4,0,-25.4\n0,9.3900752,7.0063868,0,25.4,0,-25.4\n0,9.68248,6.5921382,0,25.4,0,-25.4\n0,9.9157536,6.1419486,0,25.4,0,-25.4\n0,10.0855526,5.6641746,0,25.4,0,-25.4\n0,10.1887274,5.1677062,0,25.4,0,-25.4\n0,10.2233222,4.6618398,0,25.4,0,-25.4\n0,18.2143908,14.7408138,0,25.4,0,-25.4\n0,17.687036,14.9496018,0,25.4,0,-25.4\n0,17.1900342,15.222855,0,25.4,0,-25.4\n0,16.7311578,15.55623,0,25.4,0,-25.4\n0,16.317722,15.9444944,0,25.4,0,-25.4\n0,15.9561784,16.3815014,0,25.4,0,-25.4\n0,15.6522674,16.860393,0,25.4,0,-25.4\n0,15.4107896,17.3736,0,25.4,0,-25.4\n0,15.2355042,17.9130198,0,25.4,0,-25.4\n0,15.1292306,18.4701434,0,25.4,0,-25.4\n0,15.0936198,19.0362078,0,25.4,0,-25.4\n0,15.1292306,19.6022722,0,25.4,0,-25.4\n0,15.2355042,20.1593958,0,25.4,0,-25.4\n0,15.4107896,20.6988156,0,25.4,0,-25.4\n0,18.1163722,0.530352,0,25.4,0,-25.4\n0,17.4814484,0.5615432,0,25.4,0,-25.4\n0,16.8526714,0.654812,0,25.4,0,-25.4\n0,16.236061,0.8092694,0,25.4,0,-25.4\n0,15.6375354,1.0234168,0,25.4,0,-25.4\n0,15.0629112,1.2951968,0,25.4,0,-25.4\n0,14.5176748,1.6219932,0,25.4,0,-25.4\n0,14.0071094,2.0006564,0,25.4,0,-25.4\n0,13.5361172,2.4275542,0,25.4,0,-25.4\n0,13.1092194,2.8985464,0,25.4,0,-25.4\n0,12.7305562,3.4091372,0,25.4,0,-25.4\n0,12.4037598,3.9543482,0,25.4,0,-25.4\n0,12.1319798,4.5289978,0,25.4,0,-25.4\n0,11.9178324,5.127498,0,25.4,0,-25.4\n0,11.763375,5.7441084,0,25.4,0,-25.4\n0,11.6701062,6.3729108,0,25.4,0,-25.4\n0,11.638915,7.0078092,0,25.4,0,-25.4\n0,11.6701062,7.6427076,0,25.4,0,-25.4\n0,11.763375,8.2714846,0,25.4,0,-25.4\n0,11.9178324,8.8881204,0,25.4,0,-25.4\n0,12.1319798,9.4866206,0,25.4,0,-25.4\n0,12.4037598,10.0612702,0,25.4,0,-25.4\n0,12.7305562,10.6064812,0,25.4,0,-25.4\n0,13.1092194,11.117072,0,25.4,0,-25.4\n0,13.5361172,11.5880642,0,25.4,0,-25.4\n0,14.0071094,12.0149366,0,25.4,0,-25.4\n0,14.5176748,12.3936252,0,25.4,0,-25.4\n0,15.0629112,12.7204216,0,25.4,0,-25.4\n0,15.6375354,12.9922016,0,25.4,0,-25.4\n0,16.236061,13.206349,0,25.4,0,-25.4\n0,16.8526714,13.3608064,0,25.4,0,-25.4\n0,17.4814484,13.4540752,0,25.4,0,-25.4\n0,18.1163722,13.4852664,0,25.4,0,-25.4\n0,14.3025876,16.7496744,0,25.4,0,-25.4\n0,14.1946122,16.0217104,0,25.4,0,-25.4\n0,14.0157962,15.3078434,0,25.4,0,-25.4\n0,13.7678668,14.6149568,0,25.4,0,-25.4\n0,13.453237,13.94968,0,25.4,0,-25.4\n0,13.0748786,13.3184646,0,25.4,0,-25.4\n0,12.6365,12.7273558,0,25.4,0,-25.4\n0,12.1422922,12.1820686,0,25.4,0,-25.4\n0,11.597005,11.6878608,0,25.4,0,-25.4\n0,11.0058962,11.2494822,0,25.4,0,-25.4\n0,10.3746808,10.8711492,0,25.4,0,-25.4\n0,9.7094294,10.556494,0,25.4,0,-25.4\n0,9.0165174,10.3085646,0,25.4,0,-25.4\n0,8.3026504,10.1297486,0,25.4,0,-25.4\n0,7.5746864,10.0217732,0,25.4,0,-25.4\n0,6.8396612,9.9856544,0,25.4,0,-25.4\n0,6.1046106,10.0217732,0,25.4,0,-25.4\n0,5.376672,10.1297486,0,25.4,0,-25.4\n0,4.662805,10.3085646,0,25.4,0,-25.4\n0,3.969893,10.556494,0,25.4,0,-25.4\n0,3.3046416,10.8711492,0,25.4,0,-25.4\n0,2.6734008,11.2494822,0,25.4,0,-25.4\n0,2.0823174,11.6878608,0,25.4,0,-25.4\n0,1.5370302,12.1820686,0,25.4,0,-25.4\n0,1.0428224,12.7273558,0,25.4,0,-25.4\n0,0.6044184,13.3184646,0,25.4,0,-25.4\n0,0.2260854,13.94968,0,25.4,0,-25.4\n0,13.7678668,20.3544678,0,25.4,0,-25.4\n0,14.0157962,19.6615558,0,25.4,0,-25.4\n0,14.1946122,18.9476888,0,25.4,0,-25.4\n0,14.3025876,18.2197502,0,25.4,0,-25.4\n0,14.3387064,17.4846996,0,25.4,0,-25.4\n0,25.3114302,14.6149568,0,25.4,0,-25.4\n0,25.0635262,15.3078434,0,25.4,0,-25.4\n0,24.8847102,16.0217104,0,25.4,0,-25.4\n0,24.7767094,16.7496744,0,25.4,0,-25.4\n0,24.740616,17.4846996,0,25.4,0,-25.4\n0,24.7767094,18.2197502,0,25.4,0,-25.4\n0,24.8847102,18.9476888,0,25.4,0,-25.4\n0,25.0635262,19.6615558,0,25.4,0,-25.4\n0,25.3114302,20.3544678,0,25.4,0,-25.4\n0,24.090884,18.4701434,0,25.4,0,-25.4\n0,23.984585,17.9130198,0,25.4,0,-25.4\n0,23.809325,17.3736,0,25.4,0,-25.4\n0,23.5678472,16.860393,0,25.4,0,-25.4\n0,23.2639362,16.3815014,0,25.4,0,-25.4\n0,22.9023926,15.9444944,0,25.4,0,-25.4\n0,22.4889314,15.55623,0,25.4,0,-25.4\n0,22.0300804,15.222855,0,25.4,0,-25.4\n0,21.5330532,14.9496018,0,25.4,0,-25.4\n0,21.0056984,14.7408138,0,25.4,0,-25.4\n0,20.4563472,14.5997676,0,25.4,0,-25.4\n0,19.8936356,14.528673,0,25.4,0,-25.4\n0,19.3264536,14.528673,0,25.4,0,-25.4\n0,18.7637674,14.5997676,0,25.4,0,-25.4\n0,15.6522674,21.2120226,0,25.4,0,-25.4\n0,15.9561784,21.6908888,0,25.4,0,-25.4\n0,16.317722,22.1279212,0,25.4,0,-25.4\n0,16.7311578,22.5161856,0,25.4,0,-25.4\n0,17.1900342,22.8495606,0,25.4,0,-25.4\n0,17.687036,23.1227884,0,25.4,0,-25.4\n0,18.2143908,23.3315764,0,25.4,0,-25.4\n0,18.7637674,23.472648,0,25.4,0,-25.4\n0,19.3264536,23.5437172,0,25.4,0,-25.4\n0,19.8936356,23.5437172,0,25.4,0,-25.4\n0,20.4563472,23.472648,0,25.4,0,-25.4\n0,21.0056984,23.3315764,0,25.4,0,-25.4\n0,21.5330532,23.1227884,0,25.4,0,-25.4\n0,22.0300804,22.8495606,0,25.4,0,-25.4\n0,22.4889314,22.5161856,0,25.4,0,-25.4\n0,22.9023926,22.1279212,0,25.4,0,-25.4\n0,23.2639362,21.6908888,0,25.4,0,-25.4\n0,23.5678472,21.2120226,0,25.4,0,-25.4\n0,23.809325,20.6988156,0,25.4,0,-25.4\n0,23.984585,20.1593958,0,25.4,0,-25.4\n0,24.090884,19.6022722,0,25.4,0,-25.4\n0,24.1264948,19.0362078,0,25.4,0,-25.4\n0,24.5626128,6.3729108,0,25.4,0,-25.4\n0,24.469344,5.7441084,0,25.4,0,-25.4\n0,24.3148866,5.127498,0,25.4,0,-25.4\n0,24.1007392,4.5289978,0,25.4,0,-25.4\n0,23.8289592,3.9543482,0,25.4,0,-25.4\n0,23.5021628,3.4091372,0,25.4,0,-25.4\n0,23.1234996,2.8985464,0,25.4,0,-25.4\n0,22.6966018,2.4275542,0,25.4,0,-25.4\n0,22.2256096,2.0006564,0,25.4,0,-25.4\n0,21.7150442,1.6219932,0,25.4,0,-25.4\n0,21.1698078,1.2951968,0,25.4,0,-25.4\n0,20.5951836,1.0234168,0,25.4,0,-25.4\n0,19.996658,0.8092694,0,25.4,0,-25.4\n0,19.3800476,0.654812,0,25.4,0,-25.4\n0,18.7512706,0.5615432,0,25.4,0,-25.4\n0,18.7512706,13.4540752,0,25.4,0,-25.4\n0,19.3800476,13.3608064,0,25.4,0,-25.4\n0,19.996658,13.206349,0,25.4,0,-25.4\n0,20.5951836,12.9922016,0,25.4,0,-25.4\n0,21.1698078,12.7204216,0,25.4,0,-25.4\n0,21.7150442,12.3936252,0,25.4,0,-25.4\n0,22.2256096,12.0149366,0,25.4,0,-25.4\n0,22.6966018,11.5880642,0,25.4,0,-25.4\n0,23.1234996,11.117072,0,25.4,0,-25.4\n0,23.5021628,10.6064812,0,25.4,0,-25.4\n0,23.8289592,10.0612702,0,25.4,0,-25.4\n0,24.1007392,9.4866206,0,25.4,0,-25.4\n0,24.3148866,8.8881204,0,25.4,0,-25.4\n0,24.469344,8.2714846,0,25.4,0,-25.4\n0,24.5626128,7.6427076,0,25.4,0,-25.4\n0,24.593804,7.0078092,0,25.4,0,-25.4\n0,12.6365,22.2420434,0,25.4,0,-25.4\n0,13.0748786,21.65096,0,25.4,0,-25.4\n0,13.453237,21.0197446,0,25.4,0,-25.4\n0,0.2260854,21.0197446,0,25.4,0,-25.4\n0,0.6044184,21.65096,0,25.4,0,-25.4\n0,1.0428224,22.2420434,0,25.4,0,-25.4\n0,1.5370302,22.7873306,0,25.4,0,-25.4\n0,2.0823174,23.2815638,0,25.4,0,-25.4\n0,2.6734008,23.7199424,0,25.4,0,-25.4\n0,3.3046416,24.0982754,0,25.4,0,-25.4\n0,3.969893,24.4129306,0,25.4,0,-25.4\n0,4.662805,24.66086,0,25.4,0,-25.4\n0,5.376672,24.839676,0,25.4,0,-25.4\n0,6.1046106,24.9476514,0,25.4,0,-25.4\n0,6.8396612,24.9837448,0,25.4,0,-25.4\n0,7.5746864,24.9476514,0,25.4,0,-25.4\n0,8.3026504,24.839676,0,25.4,0,-25.4\n0,9.0165174,24.66086,0,25.4,0,-25.4\n0,9.7094294,24.4129306,0,25.4,0,-25.4\n0,10.3746808,24.0982754,0,25.4,0,-25.4\n0,11.0058962,23.7199424,0,25.4,0,-25.4\n0,11.597005,23.2815638,0,25.4,0,-25.4\n0,12.1422922,22.7873306,0,25.4,0,-25.4\n")),_f(wf.ParsePatFile("\n*CELTIC-01,CELTIC PATTERN 01\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n135,9.144,10.72444439,17.96051221,17.96051221,2.235085954,-33.68593847\n135,10.72444439,9.934222194,17.96051221,17.96051221,6.565564974,-29.35545945\n315,9.934222194,14.67555561,17.96051221,17.96051221,2.235085954,-33.68593847\n315,7.662333418,16.15722219,17.96051221,17.96051221,6.565564974,-29.35545945\n225,19.31811122,10.82322219,17.96051221,17.96051221,2.235085954,-33.68593847\n225,21.98511122,12.7,17.96051221,17.96051221,7.124336526,-28.7966879\n225,21.68877781,8.452555612,17.96051221,17.96051221,2.235085954,-33.68593847\n225,25.146,12.7,17.96051221,17.96051221,9.35942248,-26.56160194\n225,19.31811122,18.52788878,17.96051221,17.96051221,2.235085954,-33.68593847\n225,21.68877781,16.15722219,17.96051221,17.96051221,2.235085954,-33.68593847\n90,25.146,22.91091405,0,25.4,2.235085954,-23.16491405\n0,22.91091405,22.35214249,0,25.4,2.235085954,-23.16491405\n0,21.33046966,22.91091405,0,25.4,3.815530342,-21.58446966\n0,20.40466658,25.146,0,25.4,4.741333418,-20.65866658\n90,22.91091405,21.33046966,0,25.4,1.021672836,-24.37832716\n90,25.146,20.40466658,0,25.4,1.947475912,-23.45252409\n180,2.489085954,25.146,0,25.4,2.235085954,-23.16491405\n90,3.047857506,22.91091405,0,25.4,2.235085954,-23.16491405\n90,2.489085954,21.33046966,0,25.4,3.815530342,-21.58446966\n90,0.254,20.40466658,0,25.4,4.741333418,-20.65866658\n180,4.069530342,22.91091405,0,25.4,1.021672836,-24.37832716\n180,4.995333418,25.146,0,25.4,1.947475912,-23.45252409\n270,0.254,2.489085954,0,25.4,2.235085954,-23.16491405\n180,2.489085954,3.047857506,0,25.4,2.235085954,-23.16491405\n180,4.069530342,2.489085954,0,25.4,3.815530342,-21.58446966\n180,4.995333418,0.254,0,25.4,4.741333418,-20.65866658\n270,2.489085954,4.069530342,0,25.4,1.021672836,-24.37832716\n270,0.254,4.995333418,0,25.4,1.947475912,-23.45252409\n45,17.83644439,13.09511122,17.96051221,17.96051221,10.3372727,-25.58375198\n45,13.09511122,7.563555612,17.96051221,17.96051221,2.235085954,-33.68593847\n45,10.82322219,6.081888776,17.96051221,17.96051221,6.565564974,-29.35545945\n45,4.995333418,0.254,17.96051221,17.96051221,4.889250572,-31.03177385\n45,16.256,14.67555561,17.96051221,17.96051221,9.41146962,-26.5095548\n45,10.72444439,9.934222194,17.96051221,17.96051221,2.235085954,-33.68593847\n45,9.242777806,7.662333418,17.96051221,17.96051221,6.565564974,-29.35545945\n45,4.069530342,2.489085954,17.96051221,17.96051221,3.96344775,-31.95757693\n45,16.94744439,21.68877781,17.96051221,17.96051221,4.889250572,-31.03177385\n45,10.72444439,16.256,17.96051221,17.96051221,2.235085954,-33.68593847\n45,3.711222194,9.242777806,17.96051221,17.96051221,2.235085954,-33.68593847\n45,9.934222194,14.67555561,17.96051221,17.96051221,6.565564974,-29.35545945\n45,0.254,4.995333418,17.96051221,17.96051221,10.3372727,-25.58375198\n45,18.52788878,20.10833342,17.96051221,17.96051221,3.96344775,-31.95757693\n45,6.081888776,6.872111224,17.96051221,17.96051221,2.235085954,-33.68593847\n45,13.09511122,13.88533342,17.96051221,17.96051221,2.235085954,-33.68593847\n45,11.51466658,13.09511122,17.96051221,17.96051221,6.565564974,-29.35545945\n45,2.489085954,4.069530342,17.96051221,17.96051221,9.41146962,-26.5095548\n0,22.91091405,0.254,0,25.4,2.235085954,-23.16491405\n135,17.83644439,13.09511122,17.96051221,17.96051221,2.235085954,-33.68593847\n135,10.82322219,20.10833342,17.96051221,17.96051221,2.235085954,-33.68593847\n135,12.30488878,17.83644439,17.96051221,17.96051221,10.3372727,-25.58375198\n135,19.31811122,10.82322219,17.96051221,17.96051221,6.565564974,-29.35545945\n135,25.146,4.995333418,17.96051221,17.96051221,4.889250572,-31.03177385\n135,8.452555612,17.73766658,17.96051221,17.96051221,2.235085954,-33.68593847\n135,10.72444439,16.256,17.96051221,17.96051221,9.41146962,-26.5095548\n135,15.46577781,10.72444439,17.96051221,17.96051221,2.235085954,-33.68593847\n135,17.73766658,9.242777806,17.96051221,17.96051221,6.565564974,-29.35545945\n135,22.91091405,4.069530342,17.96051221,17.96051221,3.96344775,-31.95757693\n135,16.15722219,3.711222194,17.96051221,17.96051221,2.235085954,-33.68593847\n135,3.711222194,16.94744439,17.96051221,17.96051221,4.889250572,-31.03177385\n135,20.40466658,0.254,17.96051221,17.96051221,10.3372727,-25.58375198\n135,18.52788878,6.081888776,17.96051221,17.96051221,2.235085954,-33.68593847\n135,5.291666582,18.52788878,17.96051221,17.96051221,3.96344775,-31.95757693\n135,21.33046966,2.489085954,17.96051221,17.96051221,9.41146962,-26.5095548\n270,22.35214249,2.489085954,0,25.4,2.235085954,-23.16491405\n270,22.91091405,4.069530342,0,25.4,3.815530342,-21.58446966\n270,25.146,4.995333418,0,25.4,4.741333418,-20.65866658\n0,21.33046966,2.489085954,0,25.4,1.021672836,-24.37832716\n0,20.40466658,0.254,0,25.4,1.947475912,-23.45252409\n135,25.146,12.7,17.96051221,17.96051221,4.889250572,-31.03177385\n45,12.7,0.254,17.96051221,17.96051221,4.889250572,-31.03177385\n315,6.872111224,5.291666582,17.96051221,17.96051221,2.235085954,-33.68593847\n315,6.081888776,6.872111224,17.96051221,17.96051221,9.35942248,-26.56160194\n315,0.254,12.7,17.96051221,17.96051221,4.889250572,-31.03177385\n225,5.291666582,18.52788878,17.96051221,17.96051221,2.235085954,-33.68593847\n225,6.872111224,19.31811122,17.96051221,17.96051221,9.35942248,-26.56160194\n225,12.7,25.146,17.96051221,17.96051221,4.889250572,-31.03177385\n135,18.52788878,20.10833342,17.96051221,17.96051221,2.235085954,-33.68593847\n135,19.31811122,18.52788878,17.96051221,17.96051221,9.35942248,-26.56160194\n135,21.98511122,12.7,17.96051221,17.96051221,2.654164618,-33.26685981\n45,12.7,3.414888776,17.96051221,17.96051221,2.654164618,-33.26685981\n315,9.242777806,7.662333418,17.96051221,17.96051221,2.235085954,-33.68593847\n315,7.662333418,8.452555612,17.96051221,17.96051221,7.124336526,-28.7966879\n315,3.414888776,12.7,17.96051221,17.96051221,2.654164618,-33.26685981\n225,7.662333418,16.15722219,17.96051221,17.96051221,2.235085954,-33.68593847\n225,8.452555612,17.73766658,17.96051221,17.96051221,7.124336526,-28.7966879\n225,12.7,21.98511122,17.96051221,17.96051221,2.654164618,-33.26685981\n135,16.15722219,17.73766658,17.96051221,17.96051221,2.235085954,-33.68593847\n135,17.73766658,16.94744439,17.96051221,17.96051221,7.124336526,-28.7966879\n")),_f(wf.ParsePatFile("\n*CELTIC-02,CELTIC PATTERN 02\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern,,,,,,\n180,11.1371634,0.392662664,0,25.4,3.125672946,-22.27432705\n270,25.00733734,11.1371634,0,25.4,3.125672946,-22.27432705\n270,0.392662664,17.38850955,0,25.4,3.125672946,-22.27432705\n180,17.38850955,25.00733734,0,25.4,3.125672946,-22.27432705\n90,25.00733734,11.9185817,0,25.4,13.08875564,-12.31124436\n270,25.00733734,7.230072408,0,25.4,6.837409744,-18.56259026\n180,11.1371634,7.230072408,0,25.4,3.125672946,-22.27432705\n180,13.4814183,8.011490454,0,25.4,9.18166439,-16.21833561\n0,8.011490454,11.9185817,0,25.4,3.125672946,-22.27432705\n0,4.29975391,11.1371634,0,25.4,9.18166439,-16.21833561\n270,21.10024609,17.38850955,0,25.4,3.125672946,-22.27432705\n270,21.88166439,21.88166439,0,25.4,9.96308269,-15.43691731\n270,13.4814183,25.00733734,0,25.4,3.125672946,-22.27432705\n270,18.16992759,25.00733734,0,25.4,3.125672946,-22.27432705\n90,17.38850955,18.16992759,0,25.4,6.837409744,-18.56259026\n90,18.16992759,8.011490454,0,25.4,3.125672946,-22.27432705\n90,17.38850955,4.29975391,0,25.4,9.18166439,-16.21833561\n90,14.2628366,18.16992759,0,25.4,6.837409744,-18.56259026\n90,13.4814183,8.011490454,0,25.4,3.125672946,-22.27432705\n90,14.2628366,4.29975391,0,25.4,9.18166439,-16.21833561\n90,7.230072408,14.2628366,0,25.4,3.125672946,-22.27432705\n90,7.230072408,0.392662664,0,25.4,3.125672946,-22.27432705\n90,8.011490454,11.9185817,0,25.4,9.18166439,-16.21833561\n90,8.011490454,0.392662664,0,25.4,6.837409744,-18.56259026\n90,11.9185817,0.392662664,0,25.4,3.125672946,-22.27432705\n90,11.9185817,14.2628366,0,25.4,3.125672946,-22.27432705\n90,11.1371634,11.9185817,0,25.4,9.18166439,-16.21833561\n90,11.1371634,0.392662664,0,25.4,6.837409744,-18.56259026\n180,17.38850955,18.16992759,0,25.4,3.125672946,-22.27432705\n180,3.51833561,18.16992759,0,25.4,3.125672946,-22.27432705\n180,7.230072408,17.38850955,0,25.4,6.837409744,-18.56259026\n180,21.10024609,17.38850955,0,25.4,9.18166439,-16.21833561\n180,3.51833561,13.4814183,0,25.4,3.125672946,-22.27432705\n180,7.230072408,14.2628366,0,25.4,6.837409744,-18.56259026\n180,17.38850955,13.4814183,0,25.4,3.125672946,-22.27432705\n180,21.10024609,14.2628366,0,25.4,9.18166439,-16.21833561\n180,25.00733734,7.230072408,0,25.4,3.125672946,-22.27432705\n180,25.00733734,8.011490454,0,25.4,6.837409744,-18.56259026\n180,25.00733734,11.9185817,0,25.4,3.125672946,-22.27432705\n180,25.00733734,11.1371634,0,25.4,6.837409744,-18.56259026\n180,25.00733734,25.00733734,0,25.4,6.837409744,-18.56259026\n0,11.9185817,0.392662664,0,25.4,13.08875564,-12.31124436\n0,0.392662664,0.392662664,0,25.4,6.837409744,-18.56259026\n270,0.392662664,13.4814183,0,25.4,13.08875564,-12.31124436\n270,0.392662664,25.00733734,0,25.4,6.837409744,-18.56259026\n180,13.4814183,25.00733734,0,25.4,13.08875564,-12.31124436\n180,21.88166439,21.88166439,0,25.4,3.711736544,-21.68826346\n90,21.88166439,3.51833561,0,25.4,3.711736544,-21.68826346\n0,14.2628366,4.29975391,0,25.4,3.125672946,-22.27432705\n0,11.9185817,3.51833561,0,25.4,9.96308269,-15.43691731\n0,3.51833561,3.51833561,0,25.4,3.711736544,-21.68826346\n270,4.29975391,11.1371634,0,25.4,3.125672946,-22.27432705\n270,3.51833561,13.4814183,0,25.4,9.96308269,-15.43691731\n270,3.51833561,21.88166439,0,25.4,3.711736544,-21.68826346\n180,11.1371634,21.10024609,0,25.4,3.125672946,-22.27432705\n180,13.4814183,21.88166439,0,25.4,9.96308269,-15.43691731\n")),_f(wf.ParsePatFile("\n*CELTIC-03,CELTIC-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n90,6.35,13.97,0,25.4,5.08,-20.32\n90,19.05,6.35,0,25.4,5.08,-20.32\n0,6.35,6.35,0,25.4,12.7,-12.7\n270,6.35,11.43,0,25.4,5.08,-20.32\n90,3.81,3.81,0,25.4,7.62,-17.78\n180,21.59,3.81,0,25.4,17.78,-7.62\n270,21.59,11.43,0,25.4,7.62,-17.78\n270,21.59,21.59,0,25.4,7.62,-17.78\n0,3.81,21.59,0,25.4,17.78,-7.62\n90,3.81,13.97,0,25.4,7.62,-17.78\n270,19.05,19.05,0,25.4,5.08,-20.32\n0,6.35,19.05,0,25.4,12.7,-12.7\n90,13.97,6.35,0,25.4,12.7,-12.7\n90,11.43,6.35,0,25.4,12.7,-12.7\n270,13.97,3.81,0,25.4,7.62,-17.78\n90,11.43,-3.81,0,25.4,7.62,-17.78\n180,11.43,11.43,0,25.4,22.86,-2.54\n0,-11.43,13.97,0,25.4,22.86,-2.54\n")),_f(wf.ParsePatFile("\n*CELTIC-04,CELTIC-04\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n45,3.81,13.97,17.960512212,17.960512212,12.57235865,-23.348666028\n135,21.59,13.97,17.960512212,17.960512212,12.57235865,-23.348666028\n45,12.7,2.54,17.960512212,17.960512212,12.57235865,-23.348666028\n315,3.81,11.43,17.960512212,17.960512212,12.57235865,-23.348666028\n135,12.7,5.08,17.960512212,17.960512212,8.980256106,-26.940768318\n225,19.05,11.43,17.960512212,17.960512212,8.980256106,-26.940768318\n315,12.7,20.32,17.960512212,17.960512212,8.980256106,-26.940768318\n45,6.35,13.97,17.960512212,17.960512212,8.980256106,-26.940768318\n90,13.97,6.35,0,25.4,12.7,-12.7\n90,11.43,6.35,0,25.4,12.7,-12.7\n270,13.97,3.81,0,25.4,7.62,-17.78\n90,11.43,-3.81,0,25.4,7.62,-17.78\n180,11.43,11.43,0,25.4,22.86,-2.54\n0,-11.43,13.97,0,25.4,22.86,-2.54\n")),_f(wf.ParsePatFile("\n*CIRCLES-02,CIRCLES-02\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n0,24.3609368,11.9663464,0,25.4,0,-25.4\n0,24.2918742,11.2356138,0,25.4,0,-25.4\n0,24.1770408,10.510647,0,25.4,0,-25.4\n0,24.0169192,9.7943162,0,25.4,0,-25.4\n0,23.8121444,9.0894408,0,25.4,0,-25.4\n0,23.5635038,8.3988402,0,25.4,0,-25.4\n0,23.271988,7.7252068,0,25.4,0,-25.4\n0,22.9387654,7.0711822,0,25.4,0,-25.4\n0,22.5651314,6.439408,0,25.4,0,-25.4\n0,22.1525592,5.8323226,0,25.4,0,-25.4\n0,21.7026744,5.252339,0,25.4,0,-25.4\n0,21.2172804,4.7017432,0,25.4,0,-25.4\n0,20.6982568,4.1827196,0,25.4,0,-25.4\n0,20.147661,3.6973256,0,25.4,0,-25.4\n0,19.5676774,3.2474408,0,25.4,0,-25.4\n0,18.960592,2.8348686,0,25.4,0,-25.4\n0,18.3288178,2.4612346,0,25.4,0,-25.4\n0,17.6747932,2.128012,0,25.4,0,-25.4\n0,17.0011598,1.8364962,0,25.4,0,-25.4\n0,16.3105592,1.5878556,0,25.4,0,-25.4\n0,15.6056838,1.3830808,0,25.4,0,-25.4\n0,14.889353,1.2229592,0,25.4,0,-25.4\n0,14.1643862,1.1081258,0,25.4,0,-25.4\n0,13.4336536,1.0390632,0,25.4,0,-25.4\n0,12.7,1.016,0,25.4,0,-25.4\n0,11.9663464,1.0390632,0,25.4,0,-25.4\n0,11.2356138,1.1081258,0,25.4,0,-25.4\n0,10.510647,1.2229592,0,25.4,0,-25.4\n0,9.7943162,1.3830808,0,25.4,0,-25.4\n0,9.0894408,1.5878556,0,25.4,0,-25.4\n0,8.3988402,1.8364962,0,25.4,0,-25.4\n0,7.7252068,2.128012,0,25.4,0,-25.4\n0,7.0711822,2.4612346,0,25.4,0,-25.4\n0,6.439408,2.8348686,0,25.4,0,-25.4\n0,5.8323226,3.2474408,0,25.4,0,-25.4\n0,5.252339,3.6973256,0,25.4,0,-25.4\n0,4.7017432,4.1827196,0,25.4,0,-25.4\n0,4.1827196,4.7017432,0,25.4,0,-25.4\n0,3.6973256,5.252339,0,25.4,0,-25.4\n0,3.2474408,5.8323226,0,25.4,0,-25.4\n0,2.8348686,6.439408,0,25.4,0,-25.4\n0,2.4612346,7.0711822,0,25.4,0,-25.4\n0,2.128012,7.7252068,0,25.4,0,-25.4\n0,1.8364962,8.3988402,0,25.4,0,-25.4\n0,1.5878556,9.0894408,0,25.4,0,-25.4\n0,1.3830808,9.7943162,0,25.4,0,-25.4\n0,1.2229592,10.510647,0,25.4,0,-25.4\n0,1.1081258,11.2356138,0,25.4,0,-25.4\n0,1.0390632,11.9663464,0,25.4,0,-25.4\n0,1.016,12.7,0,25.4,0,-25.4\n0,1.0390632,13.4336536,0,25.4,0,-25.4\n0,1.1081258,14.1643862,0,25.4,0,-25.4\n0,1.2229592,14.889353,0,25.4,0,-25.4\n0,1.3830808,15.6056838,0,25.4,0,-25.4\n0,1.5878556,16.3105592,0,25.4,0,-25.4\n0,1.8364962,17.0011598,0,25.4,0,-25.4\n0,2.128012,17.6747932,0,25.4,0,-25.4\n0,2.4612346,18.3288178,0,25.4,0,-25.4\n0,2.8348686,18.960592,0,25.4,0,-25.4\n0,3.2474408,19.5676774,0,25.4,0,-25.4\n0,3.6973256,20.147661,0,25.4,0,-25.4\n0,4.1827196,20.6982568,0,25.4,0,-25.4\n0,4.7017432,21.2172804,0,25.4,0,-25.4\n0,5.252339,21.7026744,0,25.4,0,-25.4\n0,5.8323226,22.1525592,0,25.4,0,-25.4\n0,6.439408,22.5651314,0,25.4,0,-25.4\n0,7.0711822,22.9387654,0,25.4,0,-25.4\n0,7.7252068,23.271988,0,25.4,0,-25.4\n0,8.3988402,23.5635038,0,25.4,0,-25.4\n0,9.0894408,23.8121444,0,25.4,0,-25.4\n0,9.7943162,24.0169192,0,25.4,0,-25.4\n0,10.510647,24.1770408,0,25.4,0,-25.4\n0,11.2356138,24.2918742,0,25.4,0,-25.4\n0,11.9663464,24.3609368,0,25.4,0,-25.4\n0,12.7,24.384,0,25.4,0,-25.4\n0,13.4336536,24.3609368,0,25.4,0,-25.4\n0,14.1643862,24.2918742,0,25.4,0,-25.4\n0,14.889353,24.1770408,0,25.4,0,-25.4\n0,15.6056838,24.0169192,0,25.4,0,-25.4\n0,16.3105592,23.8121444,0,25.4,0,-25.4\n0,17.0011598,23.5635038,0,25.4,0,-25.4\n0,17.6747932,23.271988,0,25.4,0,-25.4\n0,18.3288178,22.9387654,0,25.4,0,-25.4\n0,18.960592,22.5651314,0,25.4,0,-25.4\n0,19.5676774,22.1525592,0,25.4,0,-25.4\n0,20.147661,21.7026744,0,25.4,0,-25.4\n0,20.6982568,21.2172804,0,25.4,0,-25.4\n0,21.2172804,20.6982568,0,25.4,0,-25.4\n0,21.7026744,20.147661,0,25.4,0,-25.4\n0,22.1525592,19.5676774,0,25.4,0,-25.4\n0,22.5651314,18.960592,0,25.4,0,-25.4\n0,22.9387654,18.3288178,0,25.4,0,-25.4\n0,23.271988,17.6747932,0,25.4,0,-25.4\n0,23.5635038,17.0011598,0,25.4,0,-25.4\n0,23.8121444,16.3105592,0,25.4,0,-25.4\n0,24.0169192,15.6056838,0,25.4,0,-25.4\n0,24.1770408,14.889353,0,25.4,0,-25.4\n0,24.2918742,14.1643862,0,25.4,0,-25.4\n0,24.3609368,13.4336536,0,25.4,0,-25.4\n0,24.384,12.7,0,25.4,0,-25.4\n")),_f(wf.ParsePatFile("\n*CIRCLES,CIRCLES\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n0,23.7384082,10.9516926,0,25.4,0,-25.4\n0,23.329011,9.2464382,0,25.4,0,-25.4\n0,22.6578922,7.6261976,0,25.4,0,-25.4\n0,21.7415618,6.1308996,0,25.4,0,-25.4\n0,20.6026258,4.7973742,0,25.4,0,-25.4\n0,19.2691004,3.6584382,0,25.4,0,-25.4\n0,17.7738024,2.7421078,0,25.4,0,-25.4\n0,16.1535618,2.070989,0,25.4,0,-25.4\n0,14.4483074,1.6615918,0,25.4,0,-25.4\n0,12.7,1.524,0,25.4,0,-25.4\n0,10.9516926,1.6615918,0,25.4,0,-25.4\n0,9.2464382,2.070989,0,25.4,0,-25.4\n0,7.6261976,2.7421078,0,25.4,0,-25.4\n0,6.1308996,3.6584382,0,25.4,0,-25.4\n0,4.7973742,4.7973742,0,25.4,0,-25.4\n0,3.6584382,6.1308996,0,25.4,0,-25.4\n0,2.7421078,7.6261976,0,25.4,0,-25.4\n0,2.070989,9.2464382,0,25.4,0,-25.4\n0,1.6615918,10.9516926,0,25.4,0,-25.4\n0,1.524,12.7,0,25.4,0,-25.4\n0,1.6615918,14.4483074,0,25.4,0,-25.4\n0,2.070989,16.1535618,0,25.4,0,-25.4\n0,2.7421078,17.7738024,0,25.4,0,-25.4\n0,3.6584382,19.2691004,0,25.4,0,-25.4\n0,4.7973742,20.6026258,0,25.4,0,-25.4\n0,6.1308996,21.7415618,0,25.4,0,-25.4\n0,7.6261976,22.6578922,0,25.4,0,-25.4\n0,9.2464382,23.329011,0,25.4,0,-25.4\n0,10.9516926,23.7384082,0,25.4,0,-25.4\n0,12.7,23.876,0,25.4,0,-25.4\n0,14.4483074,23.7384082,0,25.4,0,-25.4\n0,16.1535618,23.329011,0,25.4,0,-25.4\n0,17.7738024,22.6578922,0,25.4,0,-25.4\n0,19.2691004,21.7415618,0,25.4,0,-25.4\n0,20.6026258,20.6026258,0,25.4,0,-25.4\n0,21.7415618,19.2691004,0,25.4,0,-25.4\n0,22.6578922,17.7738024,0,25.4,0,-25.4\n0,23.329011,16.1535618,0,25.4,0,-25.4\n0,23.7384082,14.4483074,0,25.4,0,-25.4\n0,23.876,12.7,0,25.4,0,-25.4\n")),_f(wf.ParsePatFile("\n*CLAY,CLAY\n0, 0,0, 0,4.7625\n0, 0,.79375, 0,4.7625\n0, 0,1.5875, 0,4.7625\n0, 0,3.175, 0,4.7625, 4.7625,-3.175\n")),_f(wf.ParsePatFile("\n*CORK,CORK\n0, 0,0, 0,3.175\n135, 1.5875,-1.5875, 0,8.98026, 4.49013,-4.49013\n135, 2.38125,-1.5875, 0,8.98026, 4.49013,-4.49013\n135, 3.175,-1.5875, 0,8.98026, 4.49013,-4.49013\n")),_f(wf.ParsePatFile("\n*CROSS,CROSS\n0, 0,0, 6.35,6.35, 3.175,-9.525\n90, 1.5875,-1.5875, 6.35,6.35, 3.175,-9.525\n")),_f(wf.ParsePatFile("\n*DASH,DASH\n0, 0,0, 3.175,3.175, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*DOLMIT,DOLMIT\n0, 0,0, 0,6.35\n45, 0,0, 0,17.9605, 8.98026,-17.9605\n")),_f(wf.ParsePatFile("\n*DOTS,DOTS\n0, 0,0, .79375,1.5875, 0,-1.5875\n")),_f(wf.ParsePatFile("\n*EARTH,EARTH\n0, 0,0, 6.35,6.35, 6.35,-6.35\n0, 0,2.38125, 6.35,6.35, 6.35,-6.35\n0, 0,4.7625, 6.35,6.35, 6.35,-6.35\n90, .79375,5.55625, 6.35,6.35, 6.35,-6.35\n90, 3.175,5.55625, 6.35,6.35, 6.35,-6.35\n90, 5.55625,5.55625, 6.35,6.35, 6.35,-6.35\n")),_f(wf.ParsePatFile("\n*ESCHER,ESCHER\n60, 0,0, -15.24,26.3965, 27.94,-2.54\n180, 0,0, -15.24,26.3965, 27.94,-2.54\n300, 0,0, 15.24,26.3965, 27.94,-2.54\n60, 2.54,0, -15.24,26.3965, 5.08,-25.4\n300, 2.54,0, 15.24,26.3965, 5.08,-25.4\n60, -1.27,2.1997, -15.24,26.3965, 5.08,-25.4\n180, -1.27,2.1997, -15.24,26.3965, 5.08,-25.4\n300, -1.27,-2.1997, 15.24,26.3965, 5.08,-25.4\n180, -1.27,-2.1997, -15.24,26.3965, 5.08,-25.4\n60, -10.16,0, -15.24,26.3965, 5.08,-25.4\n300, -10.16,0, 15.24,26.3965, 5.08,-25.4\n60, 5.08,-8.79882, -15.24,26.3965, 5.08,-25.4\n180, 5.08,-8.79882, -15.24,26.3965, 5.08,-25.4\n300, 5.08,8.79882, 15.24,26.3965, 5.08,-25.4\n180, 5.08,8.79882, -15.24,26.3965, 5.08,-25.4\n0, 5.08,4.39941, -15.24,26.3965, 17.78,-12.7\n0, 5.08,-4.39941, -15.24,26.3965, 17.78,-12.7\n120, 1.27,6.59911, 15.24,26.3965, 17.78,-12.7\n120, -6.35,2.1997, 15.24,26.3965, 17.78,-12.7\n240, -6.35,-2.1997, 15.24,26.3965, 17.78,-12.7\n240, 1.27,-6.59911, 15.24,26.3965, 17.78,-12.7\n")),_f(wf.ParsePatFile("\n*EXPLOSION,EXPLOSION\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n270,11.43,2.794,0,25.4,2.794,-22.606\n143.130102,12.446,2.032,91.44,5.08,1.27,-125.73\n270,12.446,4.318,0,25.4,2.286,-23.114\n112.380135,14.224,0,330.1971097,1.381577882,4.669733104,-462.3035852\n75.256437,12.954,20.574,104.7189028,1.292825964,4.990308282,-494.0405126\n287.525568,11.43,25.4,80.31173574,1.274789424,5.060914186,-501.0305006\n135,1.524,12.446,17.96051221,17.96051221,2.155261374,-33.76576305\n26.565051,0,11.684,34.07767607,11.35922544,1.703883816,-55.09224288\n353.884496,18.288,12.446,485.2654803,0.901980416,7.152705024,-708.1177892\n192.094757,25.4,13.97,234.1697095,1.774012962,7.273453068,-356.3992019\n3.691386,17.526,9.652,381.8448525,0.817654956,7.890370046,-781.1466379\n136.080924,24.384,3.048,916.1619403,0.677634662,9.52076582,-942.5558068\n336.037511,22.098,4.064,193.4234445,2.578979348,2.501609932,-247.6593782\n123.690068,24.638,0.254,35.22346245,7.04469254,4.579050024,-87.00195223\n324.462322,15.748,6.604,91.53339072,2.952690056,10.924953,-207.5741086\n117.645975,18.542,1.27,545.3600756,1.07143423,6.021460906,-596.1246343\n326.309932,13.97,4.318,56.35753981,7.04469254,5.494860232,-86.08614228\n106.38954,15.24,0,265.1799113,1.433404804,4.50089143,-445.5882554\n153.434949,3.048,8.636,22.71845063,11.35922544,3.407767632,-53.38835906\n64.798876,1.016,4.318,420.4426387,1.351905602,4.772226676,-472.4504468\n202.619865,4.064,5.588,193.4307693,1.953846232,3.302,-326.898\n59.036243,2.54,3.048,56.62883289,4.356064186,2.962123616,-145.1440546\n211.75948,7.874,6.35,239.620914,1.028416028,6.273337212,-621.0603858\n79.215702,6.858,1.016,413.4803361,1.188161962,5.429899732,-537.5600816\n212.471192,9.652,2.794,91.56028043,1.9480911,3.31175487,-327.8637273\n63.434949,8.89,1.27,22.71845063,11.35922544,1.703883816,-55.09224288\n135,10.16,0,17.96051221,17.96051221,1.796051272,-34.12497315\n74.357754,8.382,19.05,474.5101503,0.978371424,6.59422354,-652.8281297\n333.434949,0.762,22.86,22.71845063,11.35922544,8.51941908,-48.27670761\n110.556045,4.572,12.7,136.7508764,2.97284521,10.85088483,-206.1668104\n330.945396,0,15.24,56.74251999,2.467066186,5.23018004,-256.2788255\n99.462322,16.002,20.828,129.4477627,4.175734346,4.635065152,-149.8671031\n222.70939,19.304,23.876,35.89232217,1.435692836,4.493718724,-444.8781539\n74.744881,18.542,21.082,104.7031863,2.22772732,2.896045516,-286.7085124\n208.61046,24.13,24.13,261.5011486,2.027140726,6.365221712,-311.8958659\n62.744672,19.812,15.748,56.79200478,0.684240948,9.428841188,-933.4552873\n212.275644,24.638,18.796,331.1735533,1.130285268,5.70794007,-565.0860682\n55.00798,22.86,16.256,91.55735943,2.080849026,3.100465224,-306.9460475\n158.198591,25.4,15.24,80.18324705,4.716661636,2.73566382,-134.0475224\n51.911227,14.986,12.954,741.8363621,0.540303212,11.9407018,-1182.12948\n153.434949,16.51,12.192,22.71845063,11.35922544,1.703883816,-55.09224288\n35.537678,14.732,10.922,126.9656711,2.952690056,2.18499055,-216.3140711\n129.289407,19.304,5.334,198.3722919,1.78713765,7.220036614,-353.7817918\n322.30576,13.716,9.652,416.5899728,0.9135745,7.061931012,-699.1311588\n77.905243,12.954,6.096,129.5029455,1.774012962,3.636726534,-360.0359284\n282.994617,12.192,9.398,104.709577,1.903810518,3.388782656,-335.4894845\n62.525568,8.89,3.048,56.78897304,0.901412218,7.157213524,-708.564129\n267.137595,9.144,8.128,25.36830944,1.268415548,5.086345936,-503.5482576\n12.994617,2.54,6.604,104.709577,1.903810518,6.777565312,-332.1007018\n211.75948,7.874,9.906,239.620914,1.028416028,6.273337212,-621.0603858\n318.366461,5.588,11.938,269.9974641,2.109355192,3.05856513,-302.7979372\n189.462322,7.112,12.192,129.4477627,4.175734346,1.545021802,-152.9571465\n297.299572,3.048,20.066,829.3009284,0.728095572,8.860923858,-877.231464\n132.273689,8.128,14.478,35.8803669,1.708588912,7.551962798,-370.0461832\n282.994617,7.366,17.78,104.709577,1.903810518,3.388782656,-335.4894845\n140.194429,10.414,15.24,162.6068376,3.252136752,3.967606746,-194.4127349\n268.363423,10.668,24.13,25.38963909,0.725418158,8.893627882,-880.4691552\n102.200469,12.7,14.732,597.8446202,0.67098164,9.615166444,-951.9014896\n250.016893,14.732,20.32,80.29253258,2.170068558,5.9459876,-291.3533901\n84.559668,14.224,14.986,280.549586,1.20407557,5.358135842,-530.4554512\n222.184443,22.352,22.352,377.597688,0.588158336,10.96915408,-1085.946248\n")),_f(wf.ParsePatFile("\n*FLEX,FLEX\n0, 0,0, 0,6.35, 6.35,-6.35\n45, 6.35,0, 4.49013,4.49013, 1.5875,-5.80526,1.5875,-8.98026\n")),_f(wf.ParsePatFile("\n*GRASS,GRASS\n90, 0,0, 17.9605,17.9605, 4.7625,-31.1585\n45, 0,0, 0,25.4, 4.7625,-20.6375\n135, 0,0, 0,25.4, 4.7625,-20.6375\n")),_f(wf.ParsePatFile("\n*GRATE,GRATE\n0, 0,0, 0,.79375\n90, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*GRAVEL-01,GRAVEL-01\n;Optimize to replace existing GRAVEL Pattern\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n159.443955,4.064,3.302,80.266818638,2.97284521,4.340353778,-212.677341218\n114.775141,5.588,0,56.76841453,1.774012962,3.636726534,-360.03592839\n249.443955,8.128,2.032,80.266818638,2.97284521,2.170177016,-214.847518234\n186.009006,12.954,2.54,230.002940044,1.329496706,4.852663142,-480.413655376\n165.963757,18.034,1.27,24.6416195,6.160405002,5.236344112,-99.490538636\n101.309932,18.288,0,104.608346536,4.981349956,1.29515108,-128.219944728\n243.434949,21.336,3.556,22.718450626,11.35922544,3.975728904,-52.820397788\n355.426079,12.446,3.302,331.173933536,1.012764294,6.370287488,-630.658471472\n300.256437,10.668,6.35,148.094892532,1.828332132,3.528680776,-349.33939657\n228.012788,15.24,11.43,305.850675318,1.887967014,6.834440992,-334.887609878\n180,21.844,11.43,0,25.4,6.604,-18.796\n303.690068,15.748,15.748,35.223462446,7.04469254,3.66324007,-87.917762188\n225,18.288,18.288,17.960512212,17.960512212,3.592102544,-32.328922134\n110.224859,2.032,5.842,217.014069654,1.254416592,5.143108078,-509.167692864\n177.273689,7.366,5.588,25.371250756,1.20815481,5.340044184,-528.664375232\n217.69424,12.954,9.906,289.603117008,0.9135745,7.061931012,-699.131158758\n252.255328,14.986,16.256,586.403737782,0.967663038,6.667197486,-660.05256356\n301.429566,12.192,20.828,387.712303314,1.20407557,5.358135842,-530.455451152\n355.236358,6.096,21.336,25.312262304,2.109355192,6.117130006,-299.739372326\n43.66778,0.508,16.002,35.911314766,0.83514692,7.725108502,-764.785732808\n87.273689,0.254,10.668,25.371250756,1.20815481,5.340044184,-528.664375232\n30.963757,15.748,18.034,91.477345366,4.356064186,4.443185424,-143.662992836\n291.801409,14.732,20.574,56.599939124,4.716661636,2.73566382,-134.047522354\n203.198591,16.51,21.336,56.698117744,3.335183322,1.934406342,-191.506230398\n161.565051,19.558,20.32,24.09655582,8.032185358,3.212874194,-77.10897837\n4.969741,10.16,22.352,280.550012686,1.100196174,5.864045422,-580.540490682\n16.38954,0,20.574,265.179911346,1.433404804,4.50089143,-445.58825538\n197.354025,25.4,4.826,80.307559222,1.515237,4.25781597,-421.523771378\n74.054604,24.13,5.588,104.668749768,3.488958224,3.69829588,-181.216495326\n27.645975,18.796,2.794,545.360075648,1.07143423,6.021460906,-596.124634266\n145.304846,25.146,9.144,91.566911862,1.60643697,4.016092552,-397.593170268\n353.157227,17.78,12.7,434.77679618,1.008762778,6.395556678,-633.160101724\n171.469234,23.368,17.526,179.600730968,1.255949228,5.136831992,-508.546377622\n138.814075,25.4,15.748,234.164238554,2.389431086,2.700057084,-267.30564649\n90,25.4,14.224,0,25.4,1.524,-23.876\n60.945396,24.13,11.938,56.742519992,2.467066186,2.61509002,-258.893915536\n343.61046,21.082,21.844,184.909235464,1.433404804,4.50089143,-445.58825538\n293.198591,19.558,25.4,56.698117744,3.335183322,3.868812684,-189.571824056\n48.012788,16.002,22.86,305.850675318,1.887967014,3.417220496,-338.304830374\n312.510447,7.366,25.4,35.887120758,1.560309554,4.134820534,-409.347222706\n70.346176,4.318,21.844,80.303678102,1.708588912,3.775981526,-373.822164724\n")),_f(wf.ParsePatFile("\n*GRAVEL,GRAVEL\n228.0128, 18.288,25.4, 305.851,1.88796, 3.41721,-338.305\n184.9697, 16.002,22.86, -305.855,1.1002, 5.86405,-580.54\n132.5104, 10.16,22.352, -377.595,1.56032, 4.13482,-409.347\n267.2737, .254,16.002, -508.633,1.20815, 5.34005,-528.664\n292.8337, 0,10.668, -330.198,1.23208, 5.23634,-518.398\n357.2737, 2.032,5.842, -508.633,1.20815, 5.34005,-528.664\n37.6942, 7.366,5.588, -416.59,.913587, 7.06194,-699.131\n72.2553, 12.954,9.906, 586.404,.967664, 6.6672,-660.053\n121.4296, 14.986,16.256, 387.712,1.20409, 5.35813,-530.455\n175.2364, 12.192,20.828, -280.544,2.10934, 6.11713,-299.739\n222.3974, 6.096,21.336, 413.481,.815543, 7.91078,-783.168\n138.8141, 25.4,15.748, 234.164,2.38943, 2.70005,-267.306\n171.4692, 23.368,17.526, -334.082,1.25595, 5.13682,-508.546\n225, 18.288,18.288, 17.9605,17.9605, 3.59209,-32.3289\n203.1986, 16.51,21.336, -136.743,3.33517, 1.93441,-191.506\n291.8014, 14.732,20.574, -80.1833,4.71665, 2.73566,-134.048\n30.9638, 15.748,18.034, 91.4773,4.35607, 4.4432,-143.663\n161.5651, 19.558,20.32, -56.2253,8.03219, 3.21287,-77.109\n16.3895, 0,20.574, 265.18,1.4334, 4.50088,-445.588\n70.3462, 4.318,21.844, -297.294,1.70858, 3.77599,-373.822\n293.1986, 19.558,25.4, -136.743,3.33517, 3.8688,-189.572\n343.6105, 21.082,21.844, -265.18,1.4334, 4.50088,-445.588\n339.444, 0,4.826, -136.751,2.97284, 4.34035,-212.677\n294.7751, 4.064,3.302, -306.904,1.77401, 3.63672,-360.036\n66.8014, 19.812,0, 136.743,3.33517, 3.8688,-189.572\n17.354, 21.336,3.556, -345.474,1.51524, 4.25783,-421.524\n69.444, 7.366,0, -136.751,2.97284, 2.17018,-214.848\n101.3099, 18.288,0, 104.608,4.98135, 1.29515,-128.22\n165.9638, 18.034,1.27, -80.0853,6.16041, 5.23634,-99.4905\n186.009, 12.954,2.54, -255.263,1.32949, 4.85267,-480.414\n303.6901, 15.748,15.748, -56.3575,7.04469, 3.66324,-87.9178\n353.1572, 17.78,12.7, 434.777,1.00876, 6.39557,-633.16\n60.9454, 24.13,11.938, -204.766,2.46708, 2.61508,-258.894\n90, 25.4,14.224, 25.4,25.4, 1.524,-23.876\n120.2564, 12.446,3.302, -204.773,1.82834, 3.52867,-349.339\n48.0128, 10.668,6.35, 305.851,1.88796, 6.83443,-334.888\n0, 15.24,11.43, 25.4,25.4, 6.604,-18.796\n325.3048, 21.844,11.43, -310.042,1.60645, 4.0161,-397.593\n254.0546, 25.146,9.144, 104.669,3.48897, 3.69829,-181.217\n207.646, 24.13,5.588, 545.36,1.07142, 6.02145,-596.125\n175.4261, 18.796,2.794, 331.174,1.01277, 6.37029,-630.658\n175.4261, 18.796,2.794, 331.174,1.01277, 6.37029,-630.658\n")),_f(wf.ParsePatFile("\n*HATCH-DOTS\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n225,14.364914374,2.934914374,17.960512212,17.960512212,11.492295278,-24.428729146\n225,6.359242552,5.089242552,17.960512212,17.960512212,16.19060262,-19.730421804\n225,3.281299762,9.631299762,17.960512212,17.960512212,18.261173282,-17.659851142\n225,19.161365538,5.191365538,17.960512212,17.960512212,11.492295278,-24.428729146\n225,7.864421914,4.054421914,17.960512212,17.960512212,16.85579052,-19.065234158\n225,2.841461932,11.731461932,17.960512212,17.960512212,20.609227006,-15.311797418\n225,9.631299762,3.281299762,17.960512212,17.960512212,18.261173282,-17.659851142\n225,2.934914374,14.364914374,17.960512212,17.960512212,11.492295278,-24.428729146\n225,5.089242552,6.359242552,17.960512212,17.960512212,16.19060262,-19.730421804\n225,11.731462186,2.841462186,17.960512212,17.960512212,20.60922726,-15.311797164\n225,5.191365538,19.161365538,17.960512212,17.960512212,11.492295278,-24.428729146\n225,4.054421914,7.864421914,17.960512212,17.960512212,16.85579052,-19.065234158\n")),_f(wf.ParsePatFile("\n*HATCH-SQRS\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n225,2.794,9.144,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,21.844,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,6.604,17.960512212,17.960512212,13.290779108,-22.630245316\n225,19.304,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,14.224,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,11.684,17.960512212,17.960512212,7.902625292,-28.018399132\n225,6.604,2.794,17.960512212,17.960512212,13.290779108,-22.630245316\n225,2.794,19.304,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,4.064,17.960512212,17.960512212,9.698676564,-26.22234786\n225,4.064,2.794,17.960512212,17.960512212,9.698676564,-26.22234786\n225,11.684,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n225,14.224,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n225,9.144,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n225,21.844,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n225,2.794,16.764,17.960512212,17.960512212,7.902625292,-28.018399132\n225,16.764,2.794,17.960512212,17.960512212,7.902625292,-28.018399132\n")),_f(wf.ParsePatFile("\n*HEX,HEX\n0, 0,0, 0,5.49926, 3.175,-6.35\n120, 0,0, 0,5.49926, 3.175,-6.35\n60, 3.175,0, 0,5.49926, 3.175,-6.35\n")),_f(wf.ParsePatFile("\n*HEXAGONS\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n239.931417,5.587999746,25.399999492,204.778078632,1.15693825,5.576441984,-552.067817376\n239.931417,22.606,4.826,204.778078632,1.15693825,5.576441984,-552.067817376\n300.068583,19.812000254,25.399999492,352.866180728,1.15693825,5.576441984,-552.067817376\n60.068488,3.048,12.7,204.780260492,0.667036766,9.672031964,-957.531152498\n119.931512,7.874,4.318,762.42292397,0.667036766,9.67203171,-957.531152498\n300.068583,2.794,4.826,352.866180728,1.15693825,5.576441984,-552.067817376\n180,2.794,4.826,0,25.4,5.587998984,-19.812001016\n299.931512,17.526,21.082,762.42292397,0.667036766,9.67203171,-957.531152498\n0,7.874,21.082,0,25.4,9.652,-15.748\n180,17.526,4.318,0,25.4,9.652,-15.748\n240.068488,22.352,12.7,204.780260492,0.667036766,9.672031964,-957.531152498\n180,2.794,20.574,0,25.4,5.587998984,-19.812001016\n")),_f(wf.ParsePatFile("\n*HEXJOIN-01\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n45,3.81,16.51,17.960512212,17.960512212,7.184204834,-28.73681959\n270,21.59,16.51,25.4,25.4,7.62,-17.78\n315,16.51,21.59,17.960512212,17.960512212,7.184204834,-28.73681959\n180,16.51,3.81,0,25.4,7.62,-17.78\n270,13.97,3.81,25.4,25.4,7.62,-17.78\n90,3.81,8.89,25.4,25.4,7.62,-17.78\n135,8.89,3.81,17.960512212,17.960512212,7.184204834,-28.73681959\n180,3.81,13.97,0,25.4,7.62,-17.78\n270,11.43,3.81,25.4,25.4,7.62,-17.78\n180,3.81,11.43,0,25.4,7.62,-17.78\n225,21.59,8.89,17.960512212,17.960512212,7.184204834,-28.73681959\n0,8.89,21.59,0,25.4,7.62,-17.78\n")),_f(wf.ParsePatFile("\n*HEXJOIN-02\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n270,21.59,11.43,25.4,25.4,2.54,-22.86\n315,16.51,21.59,17.960512212,17.960512212,7.184204834,-28.73681959\n270,13.97,3.81,25.4,25.4,7.62,-17.78\n180,3.81,13.97,0,25.4,7.62,-17.78\n180,16.51,3.81,0,25.4,2.54,-22.86\n45,3.81,16.51,17.960512212,17.960512212,7.184204834,-28.73681959\n90,3.81,13.97,25.4,25.4,2.54,-22.86\n180,3.81,11.43,0,25.4,7.62,-17.78\n180,11.43,3.81,0,25.4,2.54,-22.86\n270,11.43,3.81,25.4,25.4,7.62,-17.78\n90,3.81,8.89,25.4,25.4,2.54,-22.86\n0,13.97,21.59,0,25.4,2.54,-22.86\n135,8.89,3.81,17.960512212,17.960512212,7.184204834,-28.73681959\n0,8.89,21.59,0,25.4,2.54,-22.86\n225,21.59,8.89,17.960512212,17.960512212,7.184204834,-28.73681959\n270,21.59,16.51,25.4,25.4,2.54,-22.86\n")),_f(wf.ParsePatFile("\n*HOLLY,HOLLY\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n99.462322,20.32,2.794,129.4477627,4.175734346,1.545021802,-152.9571465\n74.744881,17.018,2.032,104.7031863,2.22772732,2.896045516,-286.7085124\n68.198591,13.462,3.81,80.18324705,4.716661636,2.73566382,-134.0475224\n270,14.732,9.398,0,25.4,1.778,-23.622\n248.198591,19.05,8.89,80.18324705,4.716661636,2.73566382,-134.0475224\n45,20.32,5.08,17.96051221,17.96051221,2.155261374,-33.76576305\n351.869898,22.86,3.302,25.14471705,3.592102544,1.796051272,-177.8090711\n0,21.844,3.302,0,25.4,1.016,-24.384\n26.565051,20.828,2.794,34.07767607,11.35922544,1.135922544,-55.66020415\n45,20.32,2.286,17.96051221,17.96051221,0.718420458,-35.20260397\n341.565051,19.558,2.54,24.09655582,8.032185358,0.803218612,-79.51863395\n0,18.542,2.54,0,25.4,1.016,-24.384\n26.565051,18.034,2.286,34.07767607,11.35922544,0.567961272,-56.22816542\n26.565051,17.526,2.032,34.07767607,11.35922544,0.567961272,-56.22816542\n53.130102,16.764,1.016,91.44,5.08,1.27,-125.73\n270,16.764,2.032,0,25.4,1.016,-24.384\n303.690068,16.256,2.794,35.22346245,7.04469254,0.915809954,-90.6651923\n315,15.748,3.302,17.96051221,17.96051221,0.718420458,-35.20260397\n345.963757,14.732,3.556,24.6416195,6.160405002,1.047268924,-103.6796141\n0,13.716,3.556,0,25.4,1.016,-24.384\n33.690068,12.954,3.048,35.22346245,7.04469254,0.915809954,-90.6651923\n255.963757,13.208,4.064,24.6416195,6.160405002,1.047268924,-103.6796141\n281.309932,12.954,5.334,104.6083465,4.981349956,1.29515108,-128.2199447\n284.036243,12.7,6.35,80.0852635,6.160405002,1.047268924,-103.6796141\n296.565051,12.192,7.366,34.07767607,11.35922544,1.135922544,-55.66020415\n303.690068,11.684,8.128,35.22346245,7.04469254,0.915809954,-90.6651923\n180,12.7,8.128,0,25.4,1.016,-24.384\n180,13.462,8.128,0,25.4,0.762,-24.638\n213.690068,14.224,8.636,35.22346245,7.04469254,0.915809954,-90.6651923\n243.434949,14.478,9.144,22.71845063,11.35922544,0.567961272,-56.22816542\n251.565051,14.732,9.906,24.09655582,8.032185358,0.803218612,-79.51863395\n108.434949,14.986,9.144,56.22529674,8.032185358,0.803218612,-79.51863395\n135,15.494,8.636,17.96051221,17.96051221,0.718420458,-35.20260397\n153.434949,16.002,8.382,22.71845063,11.35922544,0.567961272,-56.22816542\n161.565051,16.764,8.128,24.09655582,8.032185358,0.803218612,-79.51863395\n180,17.526,8.128,0,25.4,0.762,-24.638\n198.434949,18.288,8.382,56.22529674,8.032185358,0.803218612,-79.51863395\n225,18.796,8.89,17.96051221,17.96051221,0.718420458,-35.20260397\n251.565051,19.05,9.652,24.09655582,8.032185358,0.803218612,-79.51863395\n108.434949,19.304,8.89,56.22529674,8.032185358,0.803218612,-79.51863395\n116.565051,19.812,7.874,34.07767607,11.35922544,1.135922544,-55.66020415\n135,20.574,7.112,17.96051221,17.96051221,1.077630814,-34.84339386\n161.565051,21.336,6.858,24.09655582,8.032185358,0.803218612,-79.51863395\n180,22.098,6.858,0,25.4,0.762,-24.638\n90,22.098,6.096,0,25.4,0.762,-24.638\n111.801409,22.606,4.826,56.59993912,4.716661636,1.36783191,-135.4153543\n126.869898,23.368,3.81,35.56,5.08,1.27,-125.73\n149.036243,24.638,3.048,56.62883289,4.356064186,1.481061808,-146.6251165\n338.587031,11.684,8.128,627.3335515,0.463661252,13.91447154,-1377.532674\n338.198591,20.32,17.526,80.18324705,4.716661636,1.36783191,-135.4153543\n323.972627,18.034,15.748,218.4910814,1.867445084,3.454773634,-342.0225773\n315,15.24,13.462,17.96051221,17.96051221,2.873681832,-33.04734259\n135,14.732,13.97,17.96051221,17.96051221,1.796051272,-34.12497315\n126.869898,17.272,16.51,35.56,5.08,2.54,-124.46\n105.945396,19.558,18.288,80.24604144,3.488958224,1.84914794,-183.0656433\n30.963757,22.098,20.32,91.47734537,4.356064186,1.481061808,-146.6251165\n14.036243,21.082,20.066,80.0852635,6.160405002,1.047268924,-103.6796141\n0,20.32,20.066,0,25.4,0.762,-24.638\n341.565051,19.558,20.32,24.09655582,8.032185358,0.803218612,-79.51863395\n333.434949,19.05,20.574,22.71845063,11.35922544,0.567961272,-56.22816542\n63.434949,18.796,20.066,22.71845063,11.35922544,0.567961272,-56.22816542\n45,18.288,19.558,17.96051221,17.96051221,0.718420458,-35.20260397\n33.690068,17.526,19.05,35.22346245,7.04469254,0.915809954,-90.6651923\n18.434949,16.764,18.796,56.22529674,8.032185358,0.803218612,-79.51863395\n0,16.002,18.796,0,25.4,0.762,-24.638\n341.565051,15.24,19.05,24.09655582,8.032185358,0.803218612,-79.51863395\n108.434949,15.494,18.288,56.22529674,8.032185358,0.803218612,-79.51863395\n90,15.494,17.526,0,25.4,0.762,-24.638\n75.963757,15.24,16.51,24.6416195,6.160405002,1.047268924,-103.6796141\n45,14.478,15.748,17.96051221,17.96051221,1.077630814,-34.84339386\n14.036243,13.462,15.494,80.0852635,6.160405002,1.047268924,-103.6796141\n0,12.7,15.494,0,25.4,0.762,-24.638\n126.869898,13.462,14.478,35.56,5.08,1.27,-125.73\n90,13.462,13.716,0,25.4,0.762,-24.638\n75.963757,13.208,12.7,24.6416195,6.160405002,1.047268924,-103.6796141\n56.309932,12.7,11.938,56.35753981,7.04469254,0.915809954,-90.6651923\n191.309932,13.97,12.192,104.6083465,4.981349956,1.29515108,-128.2199447\n168.690068,15.24,11.938,24.90674927,4.981349956,1.29515108,-128.2199447\n161.565051,16.764,11.43,24.09655582,8.032185358,1.60643697,-78.71541559\n143.130102,17.78,10.668,91.44,5.08,1.27,-125.73\n270,17.78,10.922,0,25.4,0.254,-25.146\n270,17.78,11.684,0,25.4,0.762,-24.638\n243.434949,18.288,12.7,22.71845063,11.35922544,1.135922544,-55.66020415\n213.690068,19.05,13.208,35.22346245,7.04469254,0.915809954,-90.6651923\n198.434949,19.812,13.462,56.22529674,8.032185358,0.803218612,-79.51863395\n180,20.828,13.462,0,25.4,1.016,-24.384\n146.309932,21.59,12.954,56.35753981,7.04469254,0.915809954,-90.6651923\n303.690068,21.082,13.716,35.22346245,7.04469254,0.915809954,-90.6651923\n270,21.082,14.478,0,25.4,0.762,-24.638\n270,21.082,15.494,0,25.4,1.016,-24.384\n243.434949,21.59,16.51,22.71845063,11.35922544,1.135922544,-55.66020415\n225,22.098,17.018,17.96051221,17.96051221,0.718420458,-35.20260397\n296.565051,21.844,17.526,34.07767607,11.35922544,0.567961272,-56.22816542\n270,21.844,18.034,0,25.4,0.508,-24.892\n255.963757,22.098,19.05,24.6416195,6.160405002,1.047268924,-103.6796141\n243.434949,22.606,20.066,22.71845063,11.35922544,1.135922544,-55.66020415\n233.130102,23.368,21.082,91.44,5.08,1.27,-125.73\n40.601295,12.7,11.938,35.81521869,2.755016842,14.05058582,-220.1258435\n195.945396,6.604,13.716,80.24604144,3.488958224,1.84914794,-183.0656433\n5.194429,7.366,13.97,255.2564824,2.29960805,2.805521694,-277.7466482\n19.983107,7.112,17.272,217.0068451,2.170068558,2.9729938,-294.3263839\n185.710593,5.842,17.272,229.9928961,2.527394488,2.552668504,-252.7141722\n164.054604,5.588,20.066,104.6687498,3.488958224,1.84914794,-183.0656433\n45,6.858,20.066,17.96051221,17.96051221,1.436840916,-34.48418351\n90,5.334,23.368,0,25.4,1.016,-24.384\n75.963757,5.08,22.352,24.6416195,6.160405002,1.047268924,-103.6796141\n243.434949,7.874,11.938,22.71845063,11.35922544,1.135922544,-55.66020415\n236.309932,8.382,12.7,56.35753981,7.04469254,0.915809954,-90.6651923\n225,9.144,13.462,17.96051221,17.96051221,1.077630814,-34.84339386\n213.690068,9.906,13.97,35.22346245,7.04469254,0.915809954,-90.6651923\n189.462322,11.43,14.224,129.4477627,4.175734346,1.545021802,-152.9571465\n333.434949,10.922,14.478,22.71845063,11.35922544,0.567961272,-56.22816542\n326.309932,10.16,14.986,56.35753981,7.04469254,0.915809954,-90.6651923\n303.690068,9.652,15.748,35.22346245,7.04469254,0.915809954,-90.6651923\n270,9.652,16.764,0,25.4,1.016,-24.384\n251.565051,9.906,17.526,24.09655582,8.032185358,0.803218612,-79.51863395\n236.309932,10.414,18.288,56.35753981,7.04469254,0.915809954,-90.6651923\n213.690068,11.176,18.796,35.22346245,7.04469254,0.915809954,-90.6651923\n0,10.16,18.796,0,25.4,1.016,-24.384\n333.434949,9.144,19.304,22.71845063,11.35922544,1.135922544,-55.66020415\n306.869898,8.382,20.32,35.56,5.08,1.27,-125.73\n284.036243,8.128,21.336,80.0852635,6.160405002,1.047268924,-103.6796141\n341.565051,7.366,21.59,24.09655582,8.032185358,0.803218612,-79.51863395\n326.309932,6.604,22.098,56.35753981,7.04469254,0.915809954,-90.6651923\n303.690068,6.096,22.86,35.22346245,7.04469254,0.915809954,-90.6651923\n296.565051,5.334,24.384,34.07767607,11.35922544,1.703883816,-55.09224288\n56.309932,4.572,21.59,56.35753981,7.04469254,0.915809954,-90.6651923\n45,4.064,21.082,17.96051221,17.96051221,0.718420458,-35.20260397\n33.690068,3.302,20.574,35.22346245,7.04469254,0.915809954,-90.6651923\n116.565051,3.556,20.066,34.07767607,11.35922544,0.567961272,-56.22816542\n108.434949,3.81,19.304,56.22529674,8.032185358,0.803218612,-79.51863395\n90,3.81,18.288,0,25.4,1.016,-24.384\n63.434949,3.302,17.272,22.71845063,11.35922544,1.135922544,-55.66020415\n33.690068,2.54,16.764,35.22346245,7.04469254,0.915809954,-90.6651923\n165.963757,3.556,16.51,24.6416195,6.160405002,1.047268924,-103.6796141\n143.130102,4.572,15.748,91.44,5.08,1.27,-125.73\n116.565051,5.08,14.732,34.07767607,11.35922544,1.135922544,-55.66020415\n75.963757,4.826,13.716,24.6416195,6.160405002,1.047268924,-103.6796141\n63.434949,4.318,12.7,22.71845063,11.35922544,1.135922544,-55.66020415\n180,5.334,12.7,0,25.4,1.016,-24.384\n165.963757,6.35,12.446,24.6416195,6.160405002,1.047268924,-103.6796141\n135,6.858,11.938,17.96051221,17.96051221,0.718420458,-35.20260397\n116.565051,7.366,10.922,34.07767607,11.35922544,1.135922544,-55.66020415\n278.583621,5.334,24.384,847.7664863,0.473877386,13.61449474,-1347.834983\n104.036243,7.62,5.08,80.0852635,6.160405002,1.047268924,-103.6796141\n123.690068,8.128,4.318,35.22346245,7.04469254,0.915809954,-90.6651923\n153.434949,9.144,3.81,22.71845063,11.35922544,1.135922544,-55.66020415\n180,9.906,3.81,0,25.4,0.762,-24.638\n206.565051,10.922,4.318,34.07767607,11.35922544,1.135922544,-55.66020415\n236.309932,11.43,5.08,56.35753981,7.04469254,0.915809954,-90.6651923\n255.963757,11.684,6.096,24.6416195,6.160405002,1.047268924,-103.6796141\n288.434949,11.43,6.858,56.22529674,8.032185358,0.803218612,-79.51863395\n303.690068,10.922,7.62,35.22346245,7.04469254,0.915809954,-90.6651923\n333.434949,9.906,8.128,22.71845063,11.35922544,1.135922544,-55.66020415\n0,9.144,8.128,0,25.4,0.762,-24.638\n26.565051,8.128,7.62,34.07767607,11.35922544,1.135922544,-55.66020415\n56.309932,7.62,6.858,56.35753981,7.04469254,0.915809954,-90.6651923\n71.565051,7.366,6.096,24.09655582,8.032185358,0.803218612,-79.51863395\n104.036243,4.064,7.874,80.0852635,6.160405002,1.047268924,-103.6796141\n123.690068,4.572,7.112,35.22346245,7.04469254,0.915809954,-90.6651923\n153.434949,5.588,6.604,22.71845063,11.35922544,1.135922544,-55.66020415\n180,6.35,6.604,0,25.4,0.762,-24.638\n206.565051,7.366,7.112,34.07767607,11.35922544,1.135922544,-55.66020415\n236.309932,7.874,7.874,56.35753981,7.04469254,0.915809954,-90.6651923\n255.963757,8.128,8.89,24.6416195,6.160405002,1.047268924,-103.6796141\n288.434949,7.874,9.652,56.22529674,8.032185358,0.803218612,-79.51863395\n303.690068,7.366,10.414,35.22346245,7.04469254,0.915809954,-90.6651923\n333.434949,6.35,10.922,22.71845063,11.35922544,1.135922544,-55.66020415\n0,5.588,10.922,0,25.4,0.762,-24.638\n26.565051,4.572,10.414,34.07767607,11.35922544,1.135922544,-55.66020415\n56.309932,4.064,9.652,56.35753981,7.04469254,0.915809954,-90.6651923\n71.565051,3.81,8.89,24.09655582,8.032185358,0.803218612,-79.51863395\n104.036243,8.636,9.652,80.0852635,6.160405002,1.047268924,-103.6796141\n123.690068,9.144,8.89,35.22346245,7.04469254,0.915809954,-90.6651923\n153.434949,10.16,8.382,22.71845063,11.35922544,1.135922544,-55.66020415\n180,10.922,8.382,0,25.4,0.762,-24.638\n206.565051,11.938,8.89,34.07767607,11.35922544,1.135922544,-55.66020415\n236.309932,12.446,9.652,56.35753981,7.04469254,0.915809954,-90.6651923\n255.963757,12.7,10.668,24.6416195,6.160405002,1.047268924,-103.6796141\n288.434949,12.446,11.43,56.22529674,8.032185358,0.803218612,-79.51863395\n303.690068,11.938,12.192,35.22346245,7.04469254,0.915809954,-90.6651923\n333.434949,10.922,12.7,22.71845063,11.35922544,1.135922544,-55.66020415\n0,10.16,12.7,0,25.4,0.762,-24.638\n26.565051,9.144,12.192,34.07767607,11.35922544,1.135922544,-55.66020415\n56.309932,8.636,11.43,56.35753981,7.04469254,0.915809954,-90.6651923\n71.565051,8.382,10.668,24.09655582,8.032185358,0.803218612,-79.51863395\n")),_f(wf.ParsePatFile("\n*HONEY,HONEY\n0, 0,0, 4.7625,2.74963, 3.175,-6.35\n120, 0,0, 4.7625,2.74963, 3.175,-6.35\n60, 0,0, 4.7625,2.74963, -6.35,3.175\n")),_f(wf.ParsePatFile("\n*HOUND,HOUND\n0, 0,0, 6.35,1.5875, 25.4,-12.7\n90, 0,0, -6.35,1.5875, 25.4,-12.7\n")),_f(wf.ParsePatFile("\n*INSUL,INSUL\n0, 0,0, 0,9.525\n0, 0,3.175, 0,9.525, 3.175,-3.175\n0, 0,6.35, 0,9.525, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*JIS_LC_20,JIS_LC_20\n45, 0,0, 0,20\n45, .4,0, 0,20\n")),_f(wf.ParsePatFile("\n*JIS_LC_20A,JIS_LC_20A\n45, 0,0, 0,20\n45, 1,0, 0,20\n")),_f(wf.ParsePatFile("\n*JIS_LC_8,JIS_LC_8\n45, 0,0, 0,7.8\n45, .4,0, 0,7.8\n")),_f(wf.ParsePatFile("\n*JIS_LC_8A,JIS_LC_8A\n45, 0,0, 0,7.8\n45, 1,0, 0,7.8\n")),_f(wf.ParsePatFile("\n*JIS_RC_10,JIS_RC_10\n45, 0,0, 0,10\n45, .725,0, 0,10\n45, 1.45,0, 0,10\n")),_f(wf.ParsePatFile("\n*JIS_RC_15,JIS_RC_15\n45, 0,0, 0,15\n45, .725,0, 0,15\n45, 1.45,0, 0,15\n")),_f(wf.ParsePatFile("\n*JIS_RC_18,JIS_RC_18\n45, 0,0, 0,18\n45, 1,0, 0,18\n45, 2,0, 0,18\n")),_f(wf.ParsePatFile("\n*JIS_RC_30,JIS_RC_30\n45, 0,0, 0,30\n45, 1,0, 0,30\n45, 2,0, 0,30\n")),_f(wf.ParsePatFile("\n*JIS_STN_1E,JIS_STN_1E\n45, 0,0, 0,1\n45, .705,0, 0,1, 1,-.5\n")),_f(wf.ParsePatFile("\n*JIS_STN_2.5,JIS_STN_2.5\n45, 0,0, 0,2.5\n45, 1.765,0, 0,2.5, 1.2,-.5\n")),_f(wf.ParsePatFile("\n*JIS_WOOD,JIS_WOOD\n45, 0,0, 0,.70710678\n")),_f(wf.ParsePatFile("\n*LATTICE-01\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,2.162738626,10.16,0,25.4,4.325477252,-21.074522748\n270,15.24,2.162738626,25.4,25.4,4.325477252,-21.074522748\n270,10.16,2.162738626,25.4,25.4,4.325477252,-21.074522748\n135,12.7,6.80694346,17.960512212,17.960512212,8.334040482,-27.586983942\n225,18.59305654,12.7,17.960512212,17.960512212,8.334040482,-27.586983942\n45,2.162738626,15.24,17.960512212,17.960512212,11.309835394,-24.61118903\n180,2.162738626,15.24,0,25.4,4.325477252,-21.074522748\n315,12.7,18.59305654,17.960512212,17.960512212,8.334040482,-27.586983942\n45,6.80694346,12.7,17.960512212,17.960512212,8.334040482,-27.586983942\n315,15.24,23.237261374,17.960512212,17.960512212,11.309835394,-24.61118903\n45,15.24,2.162738626,17.960512212,17.960512212,11.309835394,-24.61118903\n315,2.162738626,10.16,17.960512212,17.960512212,11.309835394,-24.61118903\n")),_f(wf.ParsePatFile("\n*LATTICE-02\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,9.736666582,9.736666582,0,25.4,19.473333164,-5.926666836\n270,15.663333418,25.4,25.4,25.4,25.4;,0 Removed 0 IT RENDERS A POINT\n180,9.736666582,15.663333418,0,25.4,19.473333164,-5.926666836\n270,9.736666582,25.4,25.4,25.4,25.4;,0 Removed 0 IT RENDERS A POINT\n")),_f(wf.ParsePatFile("\n*LATTICE-03\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,9.736666582,9.736666582,0,25.4,19.473333164,-5.926666836\n180,9.736666582,15.663333418,0,25.4,19.473333164,-5.926666836\n270,15.663333418,9.736666582,25.4,25.4,19.473333164,-5.926666836\n270,9.736666582,9.736666582,25.4,25.4,19.473333164,-5.926666836\n")),_f(wf.ParsePatFile("\n*LATTICE-04\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n296.565051,3.894666582,11.684,34.077676066,11.35922544,28.776704194,-28.019422498\n296.565051,8.636000254,14.054666582,34.077676066,11.35922544,28.776704194,-28.019422498\n206.565051,11.684,21.505333418,34.077676066,11.35922544,28.776704194,-28.019422498\n206.565051,14.054666582,16.763999746,34.077676066,11.35922544,28.776704194,-28.019422498\n")),_f(wf.ParsePatFile("\n*LATTICE-05,LATTICE-05\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n0,19.685,1.905,0,25.4,3.81,-21.59\n180,5.715,23.495,0,25.4,3.81,-21.59\n180,15.875,5.715,0,25.4,10.16,-15.24\n180,15.875,1.905,0,25.4,13.97,-11.43\n270,15.875,5.715,0,25.4,3.81,-21.59\n270,19.685,19.685,0,25.4,17.78,-7.62\n270,23.495,23.495,0,25.4,21.59,-3.81\n0,9.525,19.685,0,25.4,10.16,-15.24\n0,9.525,23.495,0,25.4,13.97,-11.43\n90,9.525,19.685,0,25.4,3.81,-21.59\n90,5.715,5.715,0,25.4,17.78,-7.62\n90,1.905,1.905,0,25.4,21.59,-3.81\n")),_f(wf.ParsePatFile("\n*LATTICE-06,LATTICE-06\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n180,15.875,9.525,0,25.4,6.35,-19.05\n270,15.875,15.875,0,25.4,6.35,-19.05\n0,9.525,15.875,0,25.4,6.35,-19.05\n90,9.525,9.525,0,25.4,6.35,-19.05\n0,19.685,1.905,0,25.4,3.81,-21.59\n180,5.715,23.495,0,25.4,3.81,-21.59\n180,15.875,5.715,0,25.4,10.16,-15.24\n180,15.875,1.905,0,25.4,13.97,-11.43\n270,15.875,5.715,0,25.4,3.81,-21.59\n270,19.685,19.685,0,25.4,17.78,-7.62\n270,23.495,23.495,0,25.4,21.59,-3.81\n0,9.525,19.685,0,25.4,10.16,-15.24\n0,9.525,23.495,0,25.4,13.97,-11.43\n90,9.525,19.685,0,25.4,3.81,-21.59\n90,5.715,5.715,0,25.4,17.78,-7.62\n90,1.905,1.905,0,25.4,21.59,-3.81\n")),_f(wf.ParsePatFile("\n*LATTICE-07\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n270,17.568333418,17.568333164,25.4,25.4,22.436666582,-2.963333418\n270,20.531666836,17.568333164,25.4,25.4,22.436666582,-2.963333418\n270,4.868333164,4.868333418,25.4,25.4,22.436666582,-2.963333418\n270,7.831666582,4.868333418,25.4,25.4,22.436666582,-2.963333418\n180,17.568333418,7.831666582,0,25.4,22.436666582,-2.963333418\n180,17.568333418,4.868333164,0,25.4,22.436666582,-2.963333418\n180,4.868333418,20.531666836,0,25.4,22.436666582,-2.963333418\n180,4.868333418,17.568333418,0,25.4,22.436666582,-2.963333418\n")),_f(wf.ParsePatFile("\n*LEAF-01,LEAF-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n83.659808,22.86,5.08,25.244646742,2.804960862,2.30006779,-227.706714766\n26.565051,22.352,4.826,34.077676066,11.35922544,0.567961272,-56.22816542\n14.036243,21.336,4.572,80.085263502,6.160405002,1.047268924,-103.679614078\n315,21.336,4.572,17.960512212,17.960512212,1.436840916,-34.484183508\n83.659808,21.336,4.572,25.244646742,2.804960862,2.30006779,-227.706714766\n0,20.066,4.572,0,25.4,1.27,-24.13\n345.963757,20.828,3.048,24.6416195,6.160405002,1.047268924,-103.679614078\n326.309932,20.066,3.556,56.357539812,7.04469254,0.915809954,-90.665192304\n303.690068,19.558,4.318,35.223462446,7.04469254,0.915809954,-90.665192304\n18.434949,18.796,4.064,56.225296744,8.032185358,0.803218612,-79.518633952\n288.434949,18.542,4.826,56.225296744,8.032185358,0.803218612,-79.518633952\n180,19.558,4.826,0,25.4,1.016,-24.384\n258.690068,19.812,6.096,24.906749272,4.981349956,1.29515108,-128.219944728\n243.434949,20.066,6.604,22.718450626,11.35922544,0.567961272,-56.22816542\n225,20.828,7.366,17.960512212,17.960512212,1.077630814,-34.843393864\n213.690068,21.59,7.874,35.223462446,7.04469254,0.915809954,-90.665192304\n191.309932,22.86,8.128,104.608346536,4.981349956,1.29515108,-128.219944728\n128.659808,7.62,10.668,35.701322044,3.966813504,1.626393496,-161.0129622\n143.130102,8.636,9.906,91.44,5.08,1.27,-125.73\n153.434949,9.652,9.398,22.718450626,11.35922544,1.135922544,-55.660204148\n192.528808,9.652,9.398,104.69063898,2.755016842,2.341764176,-231.834664854\n105.945396,9.652,9.398,80.246041438,3.488958224,1.84914794,-183.065643266\n153.434949,10.668,8.89,22.718450626,11.35922544,1.135922544,-55.660204148\n149.036243,11.938,8.128,56.628832894,4.356064186,1.481061808,-146.625116452\n95.710593,11.938,8.128,229.992896122,2.527394488,2.552668504,-252.714172244\n194.931417,11.938,8.128,289.599936166,1.636157764,3.94314045,-390.37089693\n135,12.954,7.112,17.960512212,17.960512212,1.436840916,-34.484183508\n123.690068,13.462,6.35,35.223462446,7.04469254,0.915809954,-90.665192304\n199.653824,13.462,6.35,297.294468148,1.708588912,3.775981526,-373.822164724\n71.565051,13.462,6.35,24.09655582,8.032185358,2.409655582,-77.912196982\n119.054604,14.732,4.064,204.766485564,2.467066186,2.61509002,-258.893915536\n288.434949,14.732,3.556,56.225296744,8.032185358,1.60643697,-78.715415594\n21.801409,13.462,3.048,56.599939124,4.716661636,1.36783191,-135.415354264\n11.309932,12.192,2.794,104.608346536,4.981349956,1.29515108,-128.219944728\n0,11.43,2.794,0,25.4,0.762,-24.638\n341.565051,9.906,3.302,24.09655582,8.032185358,1.60643697,-78.715415594\n326.309932,8.382,4.318,56.357539812,7.04469254,1.831620162,-89.74938235\n308.659808,7.366,5.588,35.701322044,3.966813504,1.626393496,-161.0129622\n300.963757,6.604,6.858,91.477345366,4.356064186,1.481061808,-146.625116452\n285.945396,6.096,8.636,80.246041438,3.488958224,1.84914794,-183.065643266\n270,6.096,10.414,0,25.4,1.778,-23.622\n279.462322,5.842,11.938,129.447762694,4.175734346,1.545021802,-152.95714646\n285.945396,5.334,13.716,80.246041438,3.488958224,1.84914794,-183.065643266\n123.690068,5.842,12.954,35.223462446,7.04469254,0.915809954,-90.665192304\n161.565051,6.604,12.7,24.09655582,8.032185358,0.803218612,-79.518633952\n171.869898,8.382,12.446,25.144717046,3.592102544,1.796051272,-177.809071102\n171.869898,10.16,12.192,25.144717046,3.592102544,1.796051272,-177.809071102\n161.565051,11.684,11.684,24.09655582,8.032185358,1.60643697,-78.715415594\n161.565051,13.208,11.176,24.09655582,8.032185358,1.60643697,-78.715415594\n146.309932,14.732,10.16,56.357539812,7.04469254,1.831620162,-89.74938235\n119.744881,15.748,8.382,148.072666262,3.150482142,2.047813532,-202.733533318\n111.801409,16.256,7.112,56.599939124,4.716661636,1.36783191,-135.415354264\n90,16.256,6.096,0,25.4,1.016,-24.384\n75.963757,16.002,5.08,24.6416195,6.160405002,1.047268924,-103.679614078\n56.309932,15.494,4.318,56.357539812,7.04469254,0.915809954,-90.665192304\n63.434949,15.24,3.81,22.718450626,11.35922544,0.567961272,-56.22816542\n126.869898,16.002,2.794,35.56,5.08,1.27,-125.73\n45,15.24,2.032,17.960512212,17.960512212,1.077630814,-34.843393864\n233.130102,22.606,1.016,91.44,5.08,1.27,-125.73\n258.690068,1.778,1.27,24.906749272,4.981349956,1.29515108,-128.219944728\n258.690068,3.556,1.27,24.906749272,4.981349956,1.29515108,-128.219944728\n198.434949,6.604,0.508,56.225296744,8.032185358,1.60643697,-78.715415594\n225,7.874,0.508,17.960512212,17.960512212,0.718420458,-35.202603966\n198.434949,8.636,0.762,56.225296744,8.032185358,0.803218612,-79.518633952\n348.690068,7.366,1.016,24.906749272,4.981349956,1.29515108,-128.219944728\n345.963757,6.35,1.27,24.6416195,6.160405002,1.047268924,-103.679614078\n333.434949,5.334,1.778,22.718450626,11.35922544,1.135922544,-55.660204148\n333.434949,3.81,2.54,22.718450626,11.35922544,1.703883816,-55.092242876\n348.690068,2.54,2.794,24.906749272,4.981349956,1.29515108,-128.219944728\n0,1.778,2.794,0,25.4,0.762,-24.638\n8.130102,0,2.54,154.460405328,3.592102544,1.796051272,-177.809071102\n236.309932,0.508,5.842,56.357539812,7.04469254,0.915809954,-90.665192304\n236.309932,1.016,6.604,56.357539812,7.04469254,0.915809954,-90.665192304\n213.690068,1.778,7.112,35.223462446,7.04469254,0.915809954,-90.665192304\n0,0.762,7.112,0,25.4,1.016,-24.384\n326.309932,0,7.62,56.357539812,7.04469254,0.915809954,-90.665192304\n18.434949,0,6.604,56.225296744,8.032185358,0.803218612,-79.518633952\n0,0,13.97,0,25.4,1.778,-23.622\n14.036243,2.54,15.494,80.085263502,6.160405002,1.047268924,-103.679614078\n21.801409,1.27,14.986,56.599939124,4.716661636,1.36783191,-135.415354264\n30.963757,0,14.224,91.477345366,4.356064186,1.481061808,-146.625116452\n254.054604,0.508,16.764,104.668749768,3.488958224,1.84914794,-183.065643266\n158.198591,1.27,17.526,80.18324705,4.716661636,1.36783191,-135.415354264\n153.434949,2.794,16.764,22.718450626,11.35922544,1.703883816,-55.092242876\n158.198591,4.064,16.256,80.18324705,4.716661636,1.36783191,-135.415354264\n180,5.334,16.256,0,25.4,1.27,-24.13\n33.690068,4.572,15.748,35.223462446,7.04469254,0.915809954,-90.665192304\n45,4.064,15.24,17.960512212,17.960512212,0.718420458,-35.202603966\n53.130102,3.302,14.224,91.44,5.08,1.27,-125.73\n56.309932,2.286,12.7,56.357539812,7.04469254,1.831620162,-89.74938235\n51.340192,1.27,11.43,126.938033652,3.966813504,1.626393496,-161.0129622\n38.659808,0,10.414,35.701322044,3.966813504,1.626393496,-161.0129622\n180,20.828,12.192,0,25.4,2.54,-22.86\n310.601295,20.828,12.192,35.815218692,2.755016842,2.341764176,-231.834664854\n82.405357,20.828,12.192,204.774468022,1.678479244,3.843717484,-380.528029646\n180,21.336,12.192,0,25.4,0.508,-24.892\n194.036243,22.352,12.446,80.085263502,6.160405002,1.047268924,-103.679614078\n198.434949,23.114,12.7,56.225296744,8.032185358,0.803218612,-79.518633952\n0,21.082,9.398,0,25.4,2.032,-23.368\n348.690068,19.812,9.652,24.906749272,4.981349956,1.29515108,-128.219944728\n321.340192,18.542,10.668,126.938033652,3.966813504,1.626393496,-161.0129622\n300.963757,17.78,11.938,91.477345366,4.356064186,1.481061808,-146.625116452\n21.801409,16.51,11.43,56.599939124,4.716661636,1.36783191,-135.415354264\n284.036243,16.256,12.446,80.085263502,6.160405002,1.047268924,-103.679614078\n180,17.78,12.446,0,25.4,1.524,-23.876\n261.869898,18.034,14.224,25.144717046,3.592102544,1.796051272,-177.809071102\n248.198591,18.542,15.494,80.18324705,4.716661636,1.36783191,-135.415354264\n225,19.558,16.51,17.960512212,17.960512212,1.436840916,-34.484183508\n216.869898,20.574,17.272,35.56,5.08,1.27,-125.73\n198.434949,22.86,18.034,56.225296744,8.032185358,2.409655582,-77.912196982\n153.434949,9.144,16.51,22.718450626,11.35922544,1.703883816,-55.092242876\n170.537678,10.668,16.256,25.054405568,4.175734346,1.545021802,-152.95714646\n188.130102,12.446,16.51,154.460405328,3.592102544,1.796051272,-177.809071102\n201.801409,13.716,17.018,56.599939124,4.716661636,1.36783191,-135.415354264\n219.805571,15.24,18.288,35.773504272,3.252136752,1.9838035,-196.396538372\n18.434949,24.638,6.35,56.225296744,8.032185358,0.803218612,-79.518633952\n33.690068,23.876,5.842,35.223462446,7.04469254,0.915809954,-90.665192304\n0,23.876,5.842,0,25.4,1.016,-24.384\n80.537678,23.876,5.842,25.054405568,4.175734346,1.545021802,-152.95714646\n36.869898,22.86,5.08,35.56,5.08,1.27,-125.73\n341.565051,22.86,5.08,24.09655582,8.032185358,1.60643697,-78.715415594\n53.130102,24.638,4.064,91.44,5.08,1.27,-125.73\n38.659808,23.368,3.048,35.701322044,3.966813504,1.626393496,-161.0129622\n9.462322,21.844,2.794,129.447762694,4.175734346,1.545021802,-152.95714646\n180,24.13,8.128,0,25.4,1.27,-24.13\n158.198591,25.4,7.62,80.18324705,4.716661636,1.36783191,-135.415354264\n216.869898,23.622,1.778,35.56,5.08,1.27,-125.73\n206.565051,24.638,2.286,34.077676066,11.35922544,1.135922544,-55.660204148\n198.434949,25.4,2.54,56.225296744,8.032185358,0.803218612,-79.518633952\n90,24.638,0,0,25.4,0.508,-24.892\n26.565051,24.384,13.462,34.077676066,11.35922544,1.135922544,-55.660204148\n56.309932,24.384,13.462,56.357539812,7.04469254,1.831620162,-89.74938235\n36.869898,24.384,13.462,35.56,5.08,1.27,-125.73\n30.963757,23.114,12.7,91.477345366,4.356064186,1.481061808,-146.625116452\n78.690068,23.114,12.7,24.906749272,4.981349956,3.885452986,-125.629642822\n156.037511,25.4,11.684,193.423444496,2.578979348,2.501609932,-247.659378188\n30.963757,24.13,9.652,91.477345366,4.356064186,1.481061808,-146.625116452\n14.036243,23.114,9.398,80.085263502,6.160405002,1.047268924,-103.679614078\n180,25.4,18.034,0,25.4,2.54,-22.86\n0,21.844,22.098,0,25.4,2.286,-23.114\n11.309932,24.13,22.098,104.608346536,4.981349956,1.29515108,-128.219944728\n135,25.4,20.828,17.960512212,17.960512212,1.796051272,-34.124973152\n0,24.384,19.304,0,25.4,1.016,-24.384\n345.963757,23.368,19.558,24.6416195,6.160405002,1.047268924,-103.679614078\n333.434949,22.352,20.066,22.718450626,11.35922544,1.135922544,-55.660204148\n315,21.844,20.574,17.960512212,17.960512212,0.718420458,-35.202603966\n306.869898,21.082,21.59,35.56,5.08,1.27,-125.73\n11.309932,19.812,21.336,104.608346536,4.981349956,1.29515108,-128.219944728\n284.036243,19.558,22.352,80.085263502,6.160405002,1.047268924,-103.679614078\n180,21.082,22.352,0,25.4,1.524,-23.876\n14.036243,16.51,22.606,80.085263502,6.160405002,1.047268924,-103.679614078\n18.434949,15.748,22.352,56.225296744,8.032185358,0.803218612,-79.518633952\n33.690068,14.986,21.844,35.223462446,7.04469254,0.915809954,-90.665192304\n230.194429,16.51,19.812,162.6068376,3.252136752,1.9838035,-196.396538372\n239.036243,17.272,21.082,56.628832894,4.356064186,1.481061808,-146.625116452\n236.309932,18.288,22.606,56.357539812,7.04469254,1.831620162,-89.74938235\n213.690068,19.05,23.114,35.223462446,7.04469254,0.915809954,-90.665192304\n198.434949,19.812,23.368,56.225296744,8.032185358,0.803218612,-79.518633952\n0,18.796,23.368,0,25.4,1.016,-24.384\n345.963757,17.78,23.622,24.6416195,6.160405002,1.047268924,-103.679614078\n261.869898,21.336,24.13,25.144717046,3.592102544,1.796051272,-177.809071102\n248.198591,21.844,25.4,80.18324705,4.716661636,1.36783191,-135.415354264\n36.869898,13.97,21.082,35.56,5.08,1.27,-125.73\n0,13.97,21.082,0,25.4,2.032,-23.368\n78.690068,13.97,21.082,24.906749272,4.981349956,2.590301906,-126.924793648\n33.690068,13.208,20.574,35.223462446,7.04469254,0.915809954,-90.665192304\n30.963757,11.938,19.812,91.477345366,4.356064186,1.481061808,-146.625116452\n336.037511,11.938,19.812,193.423444496,2.578979348,2.501609932,-247.659378188\n79.380345,11.938,19.812,283.976346702,1.560309554,4.134820534,-409.347222706\n26.565051,10.922,19.304,34.077676066,11.35922544,1.135922544,-55.660204148\n9.462322,9.398,19.05,129.447762694,4.175734346,1.545021802,-152.95714646\n318.814075,9.398,19.05,234.164238554,2.389431086,2.700057084,-267.30564649\n82.405357,9.398,19.05,204.774468022,1.678479244,3.843717484,-380.528029646\n0,8.382,19.05,0,25.4,1.016,-24.384\n0,7.366,19.05,0,25.4,1.016,-24.384\n0,5.08,19.304,0,25.4,1.524,-23.876\n104.036243,5.334,18.288,80.085263502,6.160405002,1.047268924,-103.679614078\n201.801409,6.604,18.796,56.599939124,4.716661636,1.36783191,-135.415354264\n123.690068,7.62,17.272,35.223462446,7.04469254,1.831620162,-89.74938235\n338.198591,16.51,24.13,80.18324705,4.716661636,1.36783191,-135.415354264\n333.434949,14.986,24.892,22.718450626,11.35922544,1.703883816,-55.092242876\n348.690068,13.716,25.146,24.906749272,4.981349956,1.29515108,-128.219944728\n0,11.684,25.146,0,25.4,2.032,-23.368\n18.434949,10.16,24.638,56.225296744,8.032185358,1.60643697,-78.715415594\n26.565051,8.636,23.876,34.077676066,11.35922544,1.703883816,-55.092242876\n45,7.366,22.606,17.960512212,17.960512212,1.796051272,-34.124973152\n71.565051,6.858,21.082,24.09655582,8.032185358,1.60643697,-78.715415594\n81.869898,6.604,19.304,25.144717046,3.592102544,1.796051272,-177.809071102\n;0,5.08,19.304,0,25.4,1.524,-23.876\n315,0,20.828,17.960512212,17.960512212,0.718420458,-35.202603966\n198.434949,0.762,22.606,56.225296744,8.032185358,0.803218612,-79.518633952\n343.300756,0.762,22.606,184.898786158,2.432878802,2.651837978,-262.531947376\n74.744881,0.762,22.606,104.703186326,2.22772732,2.896045516,-286.708512434\n206.565051,1.27,22.86,34.077676066,11.35922544,0.567961272,-56.22816542\n213.690068,2.032,23.368,35.223462446,7.04469254,0.915809954,-90.665192304\n216.869898,3.048,24.13,35.56,5.08,1.27,-125.73\n352.874984,3.048,24.13,25.203858152,3.150482142,2.047813532,-202.733533318\n78.690068,3.048,24.13,24.906749272,4.981349956,1.29515108,-128.219944728\n213.690068,3.81,24.638,35.223462446,7.04469254,0.915809954,-90.665192304\n213.690068,4.572,25.146,35.223462446,7.04469254,0.915809954,-90.665192304\n206.565051,5.08,25.4,34.077676066,11.35922544,0.567961272,-56.22816542\n45,7.112,25.146,17.960512212,17.960512212,0.359210356,-35.561814322\n56.309932,6.604,24.384,56.357539812,7.04469254,0.915809954,-90.665192304\n56.309932,5.588,22.86,56.357539812,7.04469254,1.831620162,-89.74938235\n53.130102,4.826,21.844,91.44,5.08,1.27,-125.73\n45,3.556,20.574,17.960512212,17.960512212,1.796051272,-34.124973152\n36.869898,2.54,19.812,35.56,5.08,1.27,-125.73\n18.434949,1.016,19.304,56.225296744,8.032185358,1.60643697,-78.715415594\n0,0,19.304,0,25.4,1.016,-24.384\n81.253838,24.13,22.098,179.594740378,1.931126186,3.340848284,-330.743991038\n")),_f(wf.ParsePatFile("\n*LEAF-02,LEAF-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n303.690068,19.558,4.318,35.223462446,7.04469254,0.915809954,-90.665192304\n18.434949,18.796,4.064,56.225296744,8.032185358,0.803218612,-79.518633952\n288.434949,18.542,4.826,56.225296744,8.032185358,0.803218612,-79.518633952\n180,19.558,4.826,0,25.4,1.016,-24.384\n258.690068,19.812,6.096,24.906749272,4.981349956,1.29515108,-128.219944728\n243.434949,20.066,6.604,22.718450626,11.35922544,0.567961272,-56.22816542\n288.434949,14.732,3.556,56.225296744,8.032185358,1.60643697,-78.715415594\n21.801409,13.462,3.048,56.599939124,4.716661636,1.36783191,-135.415354264\n11.309932,12.192,2.794,104.608346536,4.981349956,1.29515108,-128.219944728\n0,11.43,2.794,0,25.4,0.762,-24.638\n341.565051,9.906,3.302,24.09655582,8.032185358,1.60643697,-78.715415594\n326.309932,8.382,4.318,56.357539812,7.04469254,1.831620162,-89.74938235\n308.659808,7.366,5.588,35.701322044,3.966813504,1.626393496,-161.0129622\n300.963757,6.604,6.858,91.477345366,4.356064186,1.481061808,-146.625116452\n285.945396,6.096,8.636,80.246041438,3.488958224,1.84914794,-183.065643266\n270,6.096,10.414,0,25.4,1.778,-23.622\n279.462322,5.842,11.938,129.447762694,4.175734346,1.545021802,-152.95714646\n285.945396,5.334,13.716,80.246041438,3.488958224,1.84914794,-183.065643266\n123.690068,5.842,12.954,35.223462446,7.04469254,0.915809954,-90.665192304\n161.565051,6.604,12.7,24.09655582,8.032185358,0.803218612,-79.518633952\n171.869898,8.382,12.446,25.144717046,3.592102544,1.796051272,-177.809071102\n171.869898,10.16,12.192,25.144717046,3.592102544,1.796051272,-177.809071102\n161.565051,11.684,11.684,24.09655582,8.032185358,1.60643697,-78.715415594\n161.565051,13.208,11.176,24.09655582,8.032185358,1.60643697,-78.715415594\n146.309932,14.732,10.16,56.357539812,7.04469254,1.831620162,-89.74938235\n119.744881,15.748,8.382,148.072666262,3.150482142,2.047813532,-202.733533318\n111.801409,16.256,7.112,56.599939124,4.716661636,1.36783191,-135.415354264\n90,16.256,6.096,0,25.4,1.016,-24.384\n75.963757,16.002,5.08,24.6416195,6.160405002,1.047268924,-103.679614078\n56.309932,15.494,4.318,56.357539812,7.04469254,0.915809954,-90.665192304\n63.434949,15.24,3.81,22.718450626,11.35922544,0.567961272,-56.22816542\n126.869898,16.002,2.794,35.56,5.08,1.27,-125.73\n45,15.24,2.032,17.960512212,17.960512212,1.077630814,-34.843393864\n225,7.874,0.508,17.960512212,17.960512212,0.718420458,-35.202603966\n198.434949,8.636,0.762,56.225296744,8.032185358,0.803218612,-79.518633952\n348.690068,7.366,1.016,24.906749272,4.981349956,1.29515108,-128.219944728\n345.963757,6.35,1.27,24.6416195,6.160405002,1.047268924,-103.679614078\n333.434949,5.334,1.778,22.718450626,11.35922544,1.135922544,-55.660204148\n333.434949,3.81,2.54,22.718450626,11.35922544,1.703883816,-55.092242876\n348.690068,2.54,2.794,24.906749272,4.981349956,1.29515108,-128.219944728\n0,1.778,2.794,0,25.4,0.762,-24.638\n8.130102,0,2.54,154.460405328,3.592102544,1.796051272,-177.809071102\n236.309932,0.508,5.842,56.357539812,7.04469254,0.915809954,-90.665192304\n236.309932,1.016,6.604,56.357539812,7.04469254,0.915809954,-90.665192304\n213.690068,1.778,7.112,35.223462446,7.04469254,0.915809954,-90.665192304\n0,0.762,7.112,0,25.4,1.016,-24.384\n326.309932,0,7.62,56.357539812,7.04469254,0.915809954,-90.665192304\n158.198591,1.27,17.526,80.18324705,4.716661636,1.36783191,-135.415354264\n153.434949,2.794,16.764,22.718450626,11.35922544,1.703883816,-55.092242876\n158.198591,4.064,16.256,80.18324705,4.716661636,1.36783191,-135.415354264\n180,5.334,16.256,0,25.4,1.27,-24.13\n33.690068,4.572,15.748,35.223462446,7.04469254,0.915809954,-90.665192304\n45,4.064,15.24,17.960512212,17.960512212,0.718420458,-35.202603966\n53.130102,3.302,14.224,91.44,5.08,1.27,-125.73\n56.309932,2.286,12.7,56.357539812,7.04469254,1.831620162,-89.74938235\n51.340192,1.27,11.43,126.938033652,3.966813504,1.626393496,-161.0129622\n38.659808,0,10.414,35.701322044,3.966813504,1.626393496,-161.0129622\n321.340192,18.542,10.668,126.938033652,3.966813504,1.626393496,-161.0129622\n300.963757,17.78,11.938,91.477345366,4.356064186,1.481061808,-146.625116452\n21.801409,16.51,11.43,56.599939124,4.716661636,1.36783191,-135.415354264\n284.036243,16.256,12.446,80.085263502,6.160405002,1.047268924,-103.679614078\n180,17.78,12.446,0,25.4,1.524,-23.876\n261.869898,18.034,14.224,25.144717046,3.592102544,1.796051272,-177.809071102\n248.198591,18.542,15.494,80.18324705,4.716661636,1.36783191,-135.415354264\n225,19.558,16.51,17.960512212,17.960512212,1.436840916,-34.484183508\n284.036243,19.558,22.352,80.085263502,6.160405002,1.047268924,-103.679614078\n0,5.08,19.304,0,25.4,1.524,-23.876\n104.036243,5.334,18.288,80.085263502,6.160405002,1.047268924,-103.679614078\n201.801409,6.604,18.796,56.599939124,4.716661636,1.36783191,-135.415354264\n123.690068,7.62,17.272,35.223462446,7.04469254,1.831620162,-89.74938235\n153.434949,9.144,16.51,22.718450626,11.35922544,1.703883816,-55.092242876\n170.537678,10.668,16.256,25.054405568,4.175734346,1.545021802,-152.95714646\n188.130102,12.446,16.51,154.460405328,3.592102544,1.796051272,-177.809071102\n201.801409,13.716,17.018,56.599939124,4.716661636,1.36783191,-135.415354264\n219.805571,15.24,18.288,35.773504272,3.252136752,1.9838035,-196.396538372\n230.194429,16.51,19.812,162.6068376,3.252136752,1.9838035,-196.396538372\n239.036243,17.272,21.082,56.628832894,4.356064186,1.481061808,-146.625116452\n236.309932,18.288,22.606,56.357539812,7.04469254,1.831620162,-89.74938235\n213.690068,19.05,23.114,35.223462446,7.04469254,0.915809954,-90.665192304\n198.434949,19.812,23.368,56.225296744,8.032185358,0.803218612,-79.518633952\n0,18.796,23.368,0,25.4,1.016,-24.384\n345.963757,17.78,23.622,24.6416195,6.160405002,1.047268924,-103.679614078\n338.198591,16.51,24.13,80.18324705,4.716661636,1.36783191,-135.415354264\n45,7.366,22.606,17.960512212,17.960512212,1.796051272,-34.124973152\n71.565051,6.858,21.082,24.09655582,8.032185358,1.60643697,-78.715415594\n81.869898,6.604,19.304,25.144717046,3.592102544,1.796051272,-177.809071102\n;0,5.08,19.304,0,25.4,1.524,-23.876\n53.130102,4.826,21.844,91.44,5.08,1.27,-125.73\n45,3.556,20.574,17.960512212,17.960512212,1.796051272,-34.124973152\n36.869898,2.54,19.812,35.56,5.08,1.27,-125.73\n18.434949,1.016,19.304,56.225296744,8.032185358,1.60643697,-78.715415594\n0,0,19.304,0,25.4,1.016,-24.384\n0,24.384,19.304,0,25.4,1.016,-24.384\n345.963757,23.368,19.558,24.6416195,6.160405002,1.047268924,-103.679614078\n333.434949,22.352,20.066,22.718450626,11.35922544,1.135922544,-55.660204148\n315,21.844,20.574,17.960512212,17.960512212,0.718420458,-35.202603966\n306.869898,21.082,21.59,35.56,5.08,1.27,-125.73\n11.309932,19.812,21.336,104.608346536,4.981349956,1.29515108,-128.219944728\n180,21.082,22.352,0,25.4,1.524,-23.876\n261.869898,21.336,24.13,25.144717046,3.592102544,1.796051272,-177.809071102\n248.198591,21.844,25.4,80.18324705,4.716661636,1.36783191,-135.415354264\n333.434949,14.986,24.892,22.718450626,11.35922544,1.703883816,-55.092242876\n348.690068,13.716,25.146,24.906749272,4.981349956,1.29515108,-128.219944728\n0,11.684,25.146,0,25.4,2.032,-23.368\n18.434949,10.16,24.638,56.225296744,8.032185358,1.60643697,-78.715415594\n26.565051,8.636,23.876,34.077676066,11.35922544,1.703883816,-55.092242876\n45,7.112,25.146,17.960512212,17.960512212,0.359210356,-35.561814322\n56.309932,6.604,24.384,56.357539812,7.04469254,0.915809954,-90.665192304\n56.309932,5.588,22.86,56.357539812,7.04469254,1.831620162,-89.74938235\n53.130102,24.638,4.064,91.44,5.08,1.27,-125.73\n38.659808,23.368,3.048,35.701322044,3.966813504,1.626393496,-161.0129622\n9.462322,21.844,2.794,129.447762694,4.175734346,1.545021802,-152.95714646\n345.963757,20.828,3.048,24.6416195,6.160405002,1.047268924,-103.679614078\n326.309932,20.066,3.556,56.357539812,7.04469254,0.915809954,-90.665192304\n225,20.828,7.366,17.960512212,17.960512212,1.077630814,-34.843393864\n213.690068,21.59,7.874,35.223462446,7.04469254,0.915809954,-90.665192304\n191.309932,22.86,8.128,104.608346536,4.981349956,1.29515108,-128.219944728\n180,24.13,8.128,0,25.4,1.27,-24.13\n158.198591,25.4,7.62,80.18324705,4.716661636,1.36783191,-135.415354264\n233.130102,22.606,1.016,91.44,5.08,1.27,-125.73\n216.869898,23.622,1.778,35.56,5.08,1.27,-125.73\n206.565051,24.638,2.286,34.077676066,11.35922544,1.135922544,-55.660204148\n198.434949,25.4,2.54,56.225296744,8.032185358,0.803218612,-79.518633952\n30.963757,24.13,9.652,91.477345366,4.356064186,1.481061808,-146.625116452\n14.036243,23.114,9.398,80.085263502,6.160405002,1.047268924,-103.679614078\n0,21.082,9.398,0,25.4,2.032,-23.368\n348.690068,19.812,9.652,24.906749272,4.981349956,1.29515108,-128.219944728\n216.869898,20.574,17.272,35.56,5.08,1.27,-125.73\n198.434949,22.86,18.034,56.225296744,8.032185358,2.409655582,-77.912196982\n180,25.4,18.034,0,25.4,2.54,-22.86\n")),_f(wf.ParsePatFile("\n*LEAF-03,LEAF-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n344.054604,21.844,9.652,104.668749768,3.488958224,1.84914794,-183.065643266\n338.198591,20.574,10.16,80.18324705,4.716661636,1.36783191,-135.415354264\n326.309932,19.05,11.176,56.357539812,7.04469254,1.831620162,-89.74938235\n320.194429,17.526,12.446,162.6068376,3.252136752,1.9838035,-196.396538372\n308.659808,16.51,13.716,35.701322044,3.966813504,1.626393496,-161.0129622\n300.963757,15.748,14.986,91.477345366,4.356064186,1.481061808,-146.625116452\n293.198591,14.986,16.764,56.698117744,3.335183322,1.934406342,-191.506230398\n281.309932,14.732,18.034,104.608346536,4.981349956,1.29515108,-128.219944728\n276.340192,14.478,20.32,204.76213556,2.804960862,2.30006779,-227.706714766\n270,14.478,21.59,0,25.4,1.27,-24.13\n257.471192,14.986,23.876,129.485790304,2.755016842,2.341764176,-231.834664854\n164.054604,16.764,23.368,104.668749768,3.488958224,1.84914794,-183.065643266\n158.198591,18.034,22.86,80.18324705,4.716661636,1.36783191,-135.415354264\n146.309932,19.558,21.844,56.357539812,7.04469254,1.831620162,-89.74938235\n140.194429,21.082,20.574,162.6068376,3.252136752,1.9838035,-196.396538372\n125.537678,22.352,18.796,126.965671138,2.952690056,2.18499055,-216.314071054\n116.565051,23.368,16.764,34.077676066,11.35922544,2.271845088,-54.524281604\n105.945396,23.876,14.986,80.246041438,3.488958224,1.84914794,-183.065643266\n97.125016,24.13,12.954,179.577488698,3.150482142,2.047813532,-202.733533318\n90,24.13,11.43,0,25.4,1.524,-23.876\n77.471192,23.622,9.144,129.485790304,2.755016842,2.341764176,-231.834664854\n195.945396,3.556,9.652,80.246041438,3.488958224,1.84914794,-183.065643266\n201.801409,4.826,10.16,56.599939124,4.716661636,1.36783191,-135.415354264\n213.690068,6.35,11.176,35.223462446,7.04469254,1.831620162,-89.74938235\n219.805571,7.874,12.446,35.773504272,3.252136752,1.9838035,-196.396538372\n231.340192,8.89,13.716,126.938033652,3.966813504,1.626393496,-161.0129622\n239.036243,9.652,14.986,56.628832894,4.356064186,1.481061808,-146.625116452\n246.801409,10.414,16.764,136.74251925,3.335183322,1.934406342,-191.506230398\n258.690068,10.668,18.034,24.906749272,4.981349956,1.29515108,-128.219944728\n263.659808,10.922,20.32,25.244646742,2.804960862,2.30006779,-227.706714766\n270,10.922,21.59,0,25.4,1.27,-24.13\n282.528808,10.414,23.876,104.69063898,2.755016842,2.341764176,-231.834664854\n15.945396,8.636,23.368,80.246041438,3.488958224,1.84914794,-183.065643266\n21.801409,7.366,22.86,56.599939124,4.716661636,1.36783191,-135.415354264\n33.690068,5.842,21.844,35.223462446,7.04469254,1.831620162,-89.74938235\n39.805571,4.318,20.574,35.773504272,3.252136752,1.9838035,-196.396538372\n54.462322,3.048,18.796,91.53339072,2.952690056,2.18499055,-216.314071054\n63.434949,2.032,16.764,22.718450626,11.35922544,2.271845088,-54.524281604\n74.054604,1.524,14.986,104.668749768,3.488958224,1.84914794,-183.065643266\n82.874984,1.27,12.954,25.203858152,3.150482142,2.047813532,-202.733533318\n90,1.27,11.43,0,25.4,1.524,-23.876\n102.528808,1.778,9.144,104.69063898,2.755016842,2.341764176,-231.834664854\n128.659808,5.334,3.81,35.701322044,3.966813504,1.626393496,-161.0129622\n146.309932,6.858,2.794,56.357539812,7.04469254,1.831620162,-89.74938235\n153.434949,8.382,2.032,22.718450626,11.35922544,1.703883816,-55.092242876\n164.054604,10.16,1.524,104.668749768,3.488958224,1.84914794,-183.065643266\n171.869898,11.938,1.27,25.144717046,3.592102544,1.796051272,-177.809071102\n180,13.462,1.27,0,25.4,1.524,-23.876\n188.130102,15.24,1.524,154.460405328,3.592102544,1.796051272,-177.809071102\n195.945396,17.018,2.032,80.246041438,3.488958224,1.84914794,-183.065643266\n206.565051,18.542,2.794,34.077676066,11.35922544,1.703883816,-55.092242876\n218.659808,19.812,3.81,35.701322044,3.966813504,1.626393496,-161.0129622\n225,21.082,5.08,17.960512212,17.960512212,1.796051272,-34.124973152\n315,19.812,6.35,17.960512212,17.960512212,1.796051272,-34.124973152\n321.340192,18.542,7.366,126.938033652,3.966813504,1.626393496,-161.0129622\n336.801409,16.764,8.128,136.74251925,3.335183322,1.934406342,-191.506230398\n341.565051,15.24,8.636,24.09655582,8.032185358,1.60643697,-78.715415594\n351.869898,13.462,8.89,25.144717046,3.592102544,1.796051272,-177.809071102\n0,11.938,8.89,0,25.4,1.524,-23.876\n8.130102,10.16,8.636,154.460405328,3.592102544,1.796051272,-177.809071102\n18.434949,8.636,8.128,56.225296744,8.032185358,1.60643697,-78.715415594\n23.198591,6.858,7.366,56.698117744,3.335183322,1.934406342,-191.506230398\n38.659808,5.588,6.35,35.701322044,3.966813504,1.626393496,-161.0129622\n45,4.318,5.08,17.960512212,17.960512212,1.796051272,-34.124973152\n")),_f(wf.ParsePatFile("\n*LINE,LINE\n0, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*LOOPLINKS,LOOPLINKS\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n206.565051,13.462,17.018,34.077676066,11.35922544,0.567961272,-56.22816542\n243.434949,13.716,17.526,22.718450626,11.35922544,0.567961272,-56.22816542\n116.565051,11.938,17.018,34.077676066,11.35922544,0.567961272,-56.22816542\n153.434949,12.446,16.764,22.718450626,11.35922544,0.567961272,-56.22816542\n180,12.954,16.764,0,25.4,0.508,-24.892\n258.690068,4.826,14.986,24.906749272,4.981349956,1.29515108,-128.219944728\n251.565051,5.08,15.748,24.09655582,8.032185358,0.803218612,-79.518633952\n243.434949,5.588,16.764,22.718450626,11.35922544,1.135922544,-55.660204148\n230.194429,6.858,18.288,162.6068376,3.252136752,1.9838035,-196.396538372\n225,7.874,19.304,17.960512212,17.960512212,1.436840916,-34.484183508\n209.744881,9.652,20.32,148.072666262,3.150482142,2.047813532,-202.733533318\n194.036243,11.684,20.828,80.085263502,6.160405002,2.094537594,-102.632345154\n251.565051,7.112,15.24,24.09655582,8.032185358,1.60643697,-78.715415594\n239.036243,7.874,16.51,56.628832894,4.356064186,1.481061808,-146.625116452\n225,8.89,17.526,17.960512212,17.960512212,1.436840916,-34.484183508\n210.963757,10.16,18.288,91.477345366,4.356064186,1.481061808,-146.625116452\n198.434949,11.684,18.796,56.225296744,8.032185358,1.60643697,-78.715415594\n116.565051,17.018,11.938,34.077676066,11.35922544,0.567961272,-56.22816542\n153.434949,17.526,11.684,22.718450626,11.35922544,0.567961272,-56.22816542\n26.565051,17.018,13.462,34.077676066,11.35922544,0.567961272,-56.22816542\n63.434949,16.764,12.954,22.718450626,11.35922544,0.567961272,-56.22816542\n90,16.764,12.446,0,25.4,0.508,-24.892\n168.690068,14.986,20.574,24.906749272,4.981349956,1.29515108,-128.219944728\n161.565051,15.748,20.32,24.09655582,8.032185358,0.803218612,-79.518633952\n153.434949,16.764,19.812,22.718450626,11.35922544,1.135922544,-55.660204148\n140.194429,18.288,18.542,162.6068376,3.252136752,1.9838035,-196.396538372\n135,19.304,17.526,17.960512212,17.960512212,1.436840916,-34.484183508\n119.744881,20.32,15.748,148.072666262,3.150482142,2.047813532,-202.733533318\n104.036243,20.828,13.716,80.085263502,6.160405002,2.094537594,-102.632345154\n161.565051,15.24,18.288,24.09655582,8.032185358,1.60643697,-78.715415594\n149.036243,16.51,17.526,56.628832894,4.356064186,1.481061808,-146.625116452\n135,17.526,16.51,17.960512212,17.960512212,1.436840916,-34.484183508\n120.963757,18.288,15.24,91.477345366,4.356064186,1.481061808,-146.625116452\n108.434949,18.796,13.716,56.225296744,8.032185358,1.60643697,-78.715415594\n26.565051,11.938,8.382,34.077676066,11.35922544,0.567961272,-56.22816542\n63.434949,11.684,7.874,22.718450626,11.35922544,0.567961272,-56.22816542\n296.565051,13.462,8.382,34.077676066,11.35922544,0.567961272,-56.22816542\n333.434949,12.954,8.636,22.718450626,11.35922544,0.567961272,-56.22816542\n0,12.446,8.636,0,25.4,0.508,-24.892\n78.690068,20.574,10.414,24.906749272,4.981349956,1.29515108,-128.219944728\n71.565051,20.32,9.652,24.09655582,8.032185358,0.803218612,-79.518633952\n63.434949,19.812,8.636,22.718450626,11.35922544,1.135922544,-55.660204148\n50.194429,18.542,7.112,162.6068376,3.252136752,1.9838035,-196.396538372\n45,17.526,6.096,17.960512212,17.960512212,1.436840916,-34.484183508\n29.744881,15.748,5.08,148.072666262,3.150482142,2.047813532,-202.733533318\n14.036243,13.716,4.572,80.085263502,6.160405002,2.094537594,-102.632345154\n71.565051,18.288,10.16,24.09655582,8.032185358,1.60643697,-78.715415594\n59.036243,17.526,8.89,56.628832894,4.356064186,1.481061808,-146.625116452\n45,16.51,7.874,17.960512212,17.960512212,1.436840916,-34.484183508\n30.963757,15.24,7.112,91.477345366,4.356064186,1.481061808,-146.625116452\n18.434949,13.716,6.604,56.225296744,8.032185358,1.60643697,-78.715415594\n296.565051,8.382,13.462,34.077676066,11.35922544,0.567961272,-56.22816542\n333.434949,7.874,13.716,22.718450626,11.35922544,0.567961272,-56.22816542\n206.565051,8.382,11.938,34.077676066,11.35922544,0.567961272,-56.22816542\n243.434949,8.636,12.446,22.718450626,11.35922544,0.567961272,-56.22816542\n270,8.636,12.954,0,25.4,0.508,-24.892\n348.690068,10.414,4.826,24.906749272,4.981349956,1.29515108,-128.219944728\n341.565051,9.652,5.08,24.09655582,8.032185358,0.803218612,-79.518633952\n333.434949,8.636,5.588,22.718450626,11.35922544,1.135922544,-55.660204148\n320.194429,7.112,6.858,162.6068376,3.252136752,1.9838035,-196.396538372\n315,6.096,7.874,17.960512212,17.960512212,1.436840916,-34.484183508\n299.744881,5.08,9.652,148.072666262,3.150482142,2.047813532,-202.733533318\n284.036243,4.572,11.684,80.085263502,6.160405002,2.094537594,-102.632345154\n341.565051,10.16,7.112,24.09655582,8.032185358,1.60643697,-78.715415594\n329.036243,8.89,7.874,56.628832894,4.356064186,1.481061808,-146.625116452\n315,7.874,8.89,17.960512212,17.960512212,1.436840916,-34.484183508\n300.963757,7.112,10.16,91.477345366,4.356064186,1.481061808,-146.625116452\n288.434949,6.604,11.684,56.225296744,8.032185358,1.60643697,-78.715415594\n90,11.684,-7.874,0,25.4,15.748,-9.652\n270,13.716,7.874,0,25.4,15.748,-9.652\n180,7.874,11.684,0,25.4,15.748,-9.652\n0,-7.874,13.716,0,25.4,15.748,-9.652\n")),_f(wf.ParsePatFile("\n*MAZE-01\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n180,24.13,23.368,0,25.4,6.35,-19.05\n90,24.13,13.97,25.4,25.4,9.398,-16.002\n90,21.082,13.97,25.4,25.4,6.35,-19.05\n0,17.78,10.668,0,25.4,2.794,-22.606\n180,14.478,20.32,0,25.4,9.652,-15.748\n270,14.478,23.368,25.4,25.4,3.048,-22.352\n0,1.778,23.368,0,25.4,12.7,-12.7\n90,24.13,7.366,25.4,25.4,3.302,-22.098\n180,11.43,1.27,0,25.4,9.652,-15.748\n0,17.78,7.366,0,25.4,6.35,-19.05\n270,11.43,4.318,25.4,25.4,3.048,-22.352\n0,4.826,4.318,0,25.4,6.604,-18.796\n90,17.78,4.318,25.4,25.4,3.048,-22.352\n270,4.826,20.32,25.4,25.4,16.002,-9.398\n0,7.874,7.366,0,25.4,6.604,-18.796\n270,7.874,17.272,25.4,25.4,9.906,-15.494\n180,17.78,17.272,0,25.4,9.906,-15.494\n270,17.78,23.368,25.4,25.4,6.096,-19.304\n180,24.13,4.318,0,25.4,6.35,-19.05\n90,24.13,1.27,25.4,25.4,3.048,-22.352\n0,14.478,1.27,0,25.4,9.652,-15.748\n270,14.478,10.668,25.4,25.4,9.398,-16.002\n270,17.78,13.97,25.4,25.4,3.302,-22.098\n0,11.43,13.97,0,25.4,6.35,-19.05\n90,11.43,10.668,25.4,25.4,3.302,-22.098\n90,1.778,1.27,25.4,25.4,22.098,-3.302\n")),_f(wf.ParsePatFile("\n*MAZE-02\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n270,22.859999746,2.54,25.4,25.4,2.54,-22.86\n0,17.779999746,2.54,0,25.4,5.08,-20.32\n90,0,7.62,25.4,25.4,12.7,-12.7\n270,22.859999746,22.86,25.4,25.4,12.7,-12.7\n270,7.619999746,22.86,25.4,25.4,2.54,-22.86\n180,7.619999746,22.86,0,25.4,10.16,-15.24\n0,5.079999746,5.08,0,25.4,3.81,-21.59\n90,5.079999746,7.62,25.4,25.4,5.08,-20.32\n180,12.699999746,7.62,0,25.4,7.62,-17.78\n90,12.699999746,2.54,25.4,25.4,5.08,-20.32\n270,17.779999746,5.08,25.4,25.4,2.54,-22.86\n0,15.239999746,5.08,0,25.4,2.54,-22.86\n270,15.239999746,7.62,25.4,25.4,2.54,-22.86\n180,17.779999746,7.62,0,25.4,2.54,-22.86\n270,15.239999746,15.24,25.4,25.4,2.54,-22.86\n0,7.619999746,15.24,0,25.4,7.62,-17.78\n90,7.619999746,10.16,25.4,25.4,5.08,-20.32\n180,17.779999746,10.16,0,25.4,10.16,-15.24\n180,15.239999746,12.7,0,25.4,5.08,-20.32\n270,20.319999746,20.32,25.4,25.4,12.7,-12.7\n0,2.539999746,2.54,0,25.4,10.16,-15.24\n0,2.539999746,20.32,0,25.4,17.78,-7.62\n270,2.539999746,5.08,25.4,25.4,2.54,-22.86\n90,2.539999746,7.62,25.4,25.4,12.7,-12.7\n180,2.539999746,5.08,0,25.4,7.62,-17.78\n180,0,7.62,0,25.4,5.080000254,-20.319999746\n180,7.619999746,0,0,25.4,7.62,-17.78\n270,17.779999746,17.78,25.4,25.4,5.08,-20.32\n0,10.159999746,0,0,25.4,10.16,-15.24\n0,5.079999746,17.78,0,25.4,12.7,-12.7\n90,5.079999746,15.24,25.4,25.4,2.54,-22.86\n270,15.239999746,2.54,25.4,25.4,2.54,-22.86\n0,10.159999746,22.86,0,25.4,10.16,-15.24\n270,10.159999746,25.4,25.4,25.4,2.54,-22.86\n")),_f(wf.ParsePatFile("\n*MUDST,MUDST\n0, 0,0, 12.7,6.35, 6.35,-6.35,0,-6.35,0,-6.35\n")),_f(wf.ParsePatFile("\n*NET,NET\n0, 0,0, 0,3.175\n90, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*NET3,NET3\n0, 0,0, 0,3.175\n60, 0,0, 0,3.175\n120, 0,0, 0,3.175\n")),_f(wf.ParsePatFile("\n*PLAST,PLAST\n0, 0,0, 0,6.35\n0, 0,.79375, 0,6.35\n0, 0,1.5875, 0,6.35\n")),_f(wf.ParsePatFile("\n*PLASTI,PLASTI\n0, 0,0, 0,6.35\n0, 0,.79375, 0,6.35\n0, 0,1.5875, 0,6.35\n0, 0,3.96875, 0,6.35\n")),_f(wf.ParsePatFile("\n*QCAD-LOGO\n;By John Hyslop,    Line 101 modified by CVH to fix left side of pencil drift when hatching far from Origin\n;Developed in mm as metric QCAD3 pattern\n243.434949,20.32,9.144,22.718450626,11.35922544,0.567961272,-56.22816542\n248.198591,20.828,10.414,80.18324705,4.716661636,1.36783191,-135.415354264\n263.659808,21.082,12.7,25.244646742,2.804960862,2.30006779,-227.706714766\n276.340192,20.828,14.986,204.76213556,2.804960862,2.30006779,-227.706714766\n290.556045,20.066,17.018,136.750876358,2.97284521,2.170177016,-214.847518234\n310.601295,18.542,18.796,35.815218692,2.755016842,2.341764176,-231.834664854\n324.462322,16.764,20.066,91.53339072,2.952690056,2.18499055,-216.314071054\n336.801409,14.986,20.828,136.74251925,3.335183322,1.934406342,-191.506230398\n351.869898,13.208,21.082,25.144717046,3.592102544,1.796051272,-177.809071102\n26.565051,15.494,4.572,34.077676066,11.35922544,1.703883816,-55.092242876\n7.125016,13.462,4.318,179.577488698,3.150482142,2.047813532,-202.733533318\n0,11.43,4.318,0,25.4,2.032,-23.368\n344.054604,9.652,4.826,104.668749768,3.488958224,1.84914794,-183.065643266\n336.801409,7.874,5.588,136.74251925,3.335183322,1.934406342,-191.506230398\n320.194429,6.35,6.858,162.6068376,3.252136752,1.9838035,-196.396538372\n308.659808,5.334,8.128,35.701322044,3.966813504,1.626393496,-161.0129622\n293.198591,4.572,9.906,56.698117744,3.335183322,1.934406342,-191.506230398\n285.945396,4.064,11.684,80.246041438,3.488958224,1.84914794,-183.065643266\n270,4.064,13.208,0,25.4,1.524,-23.876\n261.869898,4.318,14.986,25.144717046,3.592102544,1.796051272,-177.809071102\n246.801409,5.08,16.764,136.74251925,3.335183322,1.934406342,-191.506230398\n234.462322,6.35,18.542,91.53339072,2.952690056,2.18499055,-216.314071054\n219.805571,7.874,19.812,35.773504272,3.252136752,1.9838035,-196.396538372\n206.565051,9.398,20.574,34.077676066,11.35922544,1.703883816,-55.092242876\n195.945396,11.176,21.082,80.246041438,3.488958224,1.84914794,-183.065643266\n180,12.192,21.082,0,25.4,1.016,-24.384\n180,13.208,21.082,0,25.4,1.016,-24.384\n233.130102,23.368,6.858,91.44,5.08,1.27,-125.73\n248.198591,23.876,8.128,80.18324705,4.716661636,1.36783191,-135.415354264\n248.198591,24.384,9.398,80.18324705,4.716661636,1.36783191,-135.415354264\n260.537678,24.638,10.922,25.054405568,4.175734346,1.545021802,-152.95714646\n261.869898,24.892,12.7,25.144717046,3.592102544,1.796051272,-177.809071102\n278.130102,24.638,14.478,154.460405328,3.592102544,1.796051272,-177.809071102\n279.462322,24.384,16.002,129.447762694,4.175734346,1.545021802,-152.95714646\n288.434949,23.876,17.526,56.225296744,8.032185358,1.60643697,-78.715415594\n299.744881,22.86,19.304,148.072666262,3.150482142,2.047813532,-202.733533318\n308.659808,21.844,20.574,35.701322044,3.966813504,1.626393496,-161.0129622\n315,20.574,21.844,17.960512212,17.960512212,1.796051272,-34.124973152\n321.340192,19.304,22.86,126.938033652,3.966813504,1.626393496,-161.0129622\n329.036243,18.034,23.622,56.628832894,4.356064186,1.481061808,-146.625116452\n338.198591,16.764,24.13,80.18324705,4.716661636,1.36783191,-135.415354264\n338.198591,15.494,24.638,80.18324705,4.716661636,1.36783191,-135.415354264\n350.537678,13.97,24.892,25.054405568,4.175734346,1.545021802,-152.95714646\n0,12.7,24.892,0,25.4,1.27,-24.13\n0,11.43,24.892,0,25.4,1.27,-24.13\n11.309932,10.16,24.638,104.608346536,4.981349956,1.29515108,-128.219944728\n14.036243,9.144,24.384,80.085263502,6.160405002,1.047268924,-103.679614078\n21.801409,7.874,23.876,56.599939124,4.716661636,1.36783191,-135.415354264\n21.801409,6.604,23.368,56.599939124,4.716661636,1.36783191,-135.415354264\n36.869898,5.588,22.606,35.56,5.08,1.27,-125.73\n36.869898,4.572,21.844,35.56,5.08,1.27,-125.73\n33.690068,19.05,2.286,35.223462446,7.04469254,0.915809954,-90.665192304\n26.565051,17.526,1.524,34.077676066,11.35922544,1.703883816,-55.092242876\n21.801409,16.256,1.016,56.599939124,4.716661636,1.36783191,-135.415354264\n11.309932,14.986,0.762,104.608346536,4.981349956,1.29515108,-128.219944728\n8.130102,13.208,0.508,154.460405328,3.592102544,1.796051272,-177.809071102\n0,11.684,0.508,0,25.4,1.524,-23.876\n350.537678,10.16,0.762,25.054405568,4.175734346,1.545021802,-152.95714646\n348.690068,8.89,1.016,24.906749272,4.981349956,1.29515108,-128.219944728\n338.198591,7.62,1.524,80.18324705,4.716661636,1.36783191,-135.415354264\n333.434949,6.604,2.032,22.718450626,11.35922544,1.135922544,-55.660204148\n323.130102,5.588,2.794,91.44,5.08,1.27,-125.73\n323.130102,4.572,3.556,91.44,5.08,1.27,-125.73\n315,3.556,4.572,17.960512212,17.960512212,1.436840916,-34.484183508\n306.869898,2.794,5.588,35.56,5.08,1.27,-125.73\n306.869898,2.032,6.604,35.56,5.08,1.27,-125.73\n296.565051,1.524,7.62,34.077676066,11.35922544,1.135922544,-55.660204148\n291.801409,1.016,8.89,56.599939124,4.716661636,1.36783191,-135.415354264\n281.309932,0.762,10.16,104.608346536,4.981349956,1.29515108,-128.219944728\n281.309932,0.508,11.43,104.608346536,4.981349956,1.29515108,-128.219944728\n270,0.508,12.7,0,25.4,1.27,-24.13\n270,0.508,13.97,0,25.4,1.27,-24.13\n258.690068,0.762,15.24,24.906749272,4.981349956,1.29515108,-128.219944728\n258.690068,1.016,16.51,24.906749272,4.981349956,1.29515108,-128.219944728\n248.198591,1.524,17.78,80.18324705,4.716661636,1.36783191,-135.415354264\n243.434949,2.032,18.796,22.718450626,11.35922544,1.135922544,-55.660204148\n233.130102,2.794,19.812,91.44,5.08,1.27,-125.73\n233.130102,3.556,20.828,91.44,5.08,1.27,-125.73\n225,4.572,21.844,17.960512212,17.960512212,1.436840916,-34.484183508\n0,8.89,5.334,0,25.4,7.366,-18.034\n180,14.224,9.906,0,25.4,1.016,-24.384\n270,14.224,11.176,0,25.4,1.27,-24.13\n180,15.748,11.176,0,25.4,1.524,-23.876\n270,15.748,12.192,0,25.4,1.016,-24.384\n270,24.892,2.794,0,25.4,0.254,-25.146\n270,24.892,3.302,0,25.4,0.508,-24.892\n45,20.828,2.032,17.960512212,17.960512212,3.592102544,-32.328922134\n225,22.86,5.08,17.960512212,17.960512212,3.592102544,-32.328922134\n45,20.066,2.794,17.960512212,17.960512212,3.592102544,-32.328922134\n0,13.8209782,14.218285,0,25.4,0,-25.4\n0,14.9935692,16.1227008,0,25.4,0,-25.4\n0,16.2642042,18.3038496,0,25.4,0,-25.4\n135,24.892,3.302,17.960512212,17.960512212,12.57235865,-23.348666028\n56.309932,24.384,1.778,56.357539812,7.04469254,0.915809954,-90.665192304\n45,23.876,1.27,17.960512212,17.960512212,0.718420458,-35.202603966\n33.690068,23.114,0.762,35.223462446,7.04469254,0.915809954,-90.665192304\n18.434949,22.352,0.508,56.225296744,8.032185358,0.803218612,-79.518633952\n135.806929,22.352,0.508,-35.917462074,0.505879862,12.753228494,-1262.569616842\n289.983107,12.192,12.192,217.006845132,2.170068558,2.9729938,-294.326383914\n338.198591,13.462,13.208,80.18324705,4.716661636,2.73566382,-134.047522354\n105.945396,12.192,12.192,80.246041438,3.488958224,1.84914794,-183.065643266\n218.659808,13.462,13.208,35.701322044,3.966813504,1.626393496,-161.0129622\n336.801409,11.684,13.97,136.74251925,3.335183322,1.934406342,-191.506230398\n56.309932,16.764,19.177,56.357539812,7.04469254,0.457905104,-91.123097408\n239.036243,12.065,11.049,56.628832894,4.356064186,0.740530904,-147.365647356\n236.309932,14.478,15.24,56.357539812,7.04469254,0.457905104,-91.123097408\n236.309932,15.748,17.272,56.357539812,7.04469254,0.457905104,-91.123097408\n0,11.684,10.414,0,25.4,0,-25.4\n0,12.446,8.636,0,25.4,0.508,-24.892\n0,13.716,8.636,0,25.4,0,-25.4\n0,11.43,8.636,0,25.4,0,-25.4\n0,9.144,8.636,0,25.4,0,-25.4\n0,6.858,8.636,0,25.4,0,-25.4\n180,6.096,8.636,0,25.4,0.762,-24.638\n180,8.382,8.636,0,25.4,0.762,-24.638\n180,10.668,8.636,0,25.4,0.762,-24.638\n239.036243,11.43,9.906,56.628832894,4.356064186,1.481061808,-146.625116452\n0,11.176,11.176,0,25.4,1.27,-24.13\n341.565051,10.414,11.43,24.09655582,8.032185358,0.803218612,-79.518633952\n315,9.906,11.938,17.960512212,17.960512212,0.718420458,-35.202603966\n296.565051,9.652,12.446,34.077676066,11.35922544,0.567961272,-56.22816542\n180,9.652,12.446,0,25.4,5.334,-20.066\n240.068488,14.478,20.828,204.780260492,0.667036766,9.672031964,-957.531152498\n0,16.002,12.446,0,25.4,4.572,-20.828\n240.255119,19.05,17.78,56.708680588,3.150482142,6.143440342,-198.637906508\n")),_f(wf.ParsePatFile("\n*REDBACK,REDBACK\n;By John Hyslop\n;Developed in mm as Metric QCAD3 pattern\n63.434949,18.542,19.812,22.71845063,11.35922544,0.567961272,-56.22816542\n33.690068,17.78,19.304,35.22346245,7.04469254,0.915809954,-90.6651923\n75.963757,17.526,18.288,24.6416195,6.160405002,1.047268924,-103.6796141\n0,16.764,18.288,0,25.4,0.762,-24.638\n108.434949,17.018,17.526,56.22529674,8.032185358,0.803218612,-79.51863395\n90,17.018,17.272,0,25.4,0.254,-25.146\n0,13.716,14.478,0,25.4,0.254,-25.146\n270,13.716,14.732,0,25.4,0.254,-25.146\n225,13.97,14.986,17.96051221,17.96051221,0.359210356,-35.56181432\n180,14.224,14.986,0,25.4,0.254,-25.146\n315,13.97,15.24,17.96051221,17.96051221,0.359210356,-35.56181432\n15.524111,9.398,13.97,184.9097925,1.359630758,4.745111668,-469.7660475\n0,8.89,13.97,0,25.4,0.508,-24.892\n45,8.636,13.716,17.96051221,17.96051221,0.359210356,-35.56181432\n0,7.874,13.716,0,25.4,0.762,-24.638\n26.565051,4.826,12.192,34.07767607,11.35922544,3.407767632,-53.38835906\n0,4.572,12.192,0,25.4,0.254,-25.146\n33.690068,3.81,11.684,35.22346245,7.04469254,0.915809954,-90.6651923\n32.005383,1.778,10.414,91.54141687,2.692394666,2.396231174,-237.2268895\n45,1.524,10.16,17.96051221,17.96051221,0.359210356,-35.56181432\n270,1.524,10.414,0,25.4,0.254,-25.146\n225,1.778,10.668,17.96051221,17.96051221,0.359210356,-35.56181432\n213.690068,4.064,12.192,35.22346245,7.04469254,2.747430116,-88.8335724\n243.434949,4.318,12.7,22.71845063,11.35922544,0.567961272,-56.22816542\n205.016893,8.128,14.478,56.77539445,1.534470134,4.20444803,-416.2403639\n189.462322,9.652,14.732,129.4477627,4.175734346,1.545021802,-152.9571465\n194.036243,10.668,14.986,80.0852635,6.160405002,1.047268924,-103.6796141\n194.036243,12.7,15.494,80.0852635,6.160405002,2.094537594,-102.6323452\n198.434949,14.224,16.002,56.22529674,8.032185358,1.60643697,-78.71541559\n6.340192,11.938,15.748,204.7621356,2.804960862,2.30006779,-227.7067148\n315,11.684,16.002,17.96051221,17.96051221,0.359210356,-35.56181432\n45,11.43,15.748,17.96051221,17.96051221,0.359210356,-35.56181432\n23.198591,9.652,14.986,56.69811774,3.335183322,1.934406342,-191.5062304\n0,8.89,14.986,0,25.4,0.762,-24.638\n45,8.128,14.224,17.96051221,17.96051221,1.077630814,-34.84339386\n236.309932,8.636,14.986,56.35753981,7.04469254,0.915809954,-90.6651923\n206.565051,9.144,15.24,34.07767607,11.35922544,0.567961272,-56.22816542\n206.565051,10.668,16.002,34.07767607,11.35922544,1.703883816,-55.09224288\n206.565051,11.176,16.256,34.07767607,11.35922544,0.567961272,-56.22816542\n206.565051,11.684,16.51,34.07767607,11.35922544,0.567961272,-56.22816542\n180,14.478,16.51,0,25.4,2.794,-22.606\n225,14.732,16.764,17.96051221,17.96051221,0.359210356,-35.56181432\n321.340192,13.462,17.78,126.9380337,3.966813504,1.626393496,-161.0129622\n296.565051,13.208,18.288,34.07767607,11.35922544,0.567961272,-56.22816542\n285.945396,12.7,20.066,80.24604144,3.488958224,1.84914794,-183.0656433\n254.054604,13.208,21.844,104.6687498,3.488958224,1.84914794,-183.0656433\n135,13.462,21.59,17.96051221,17.96051221,0.359210356,-35.56181432\n90,13.462,20.828,0,25.4,0.762,-24.638\n71.565051,13.208,20.066,24.09655582,8.032185358,0.803218612,-79.51863395\n105.945396,13.716,18.288,80.24604144,3.488958224,1.84914794,-183.0656433\n135,14.732,17.272,17.96051221,17.96051221,1.436840916,-34.48418351\n180,14.986,17.272,0,25.4,0.254,-25.146\n270,14.986,17.526,0,25.4,0.254,-25.146\n270,14.986,18.034,0,25.4,0.508,-24.892\n296.565051,14.732,18.542,34.07767607,11.35922544,0.567961272,-56.22816542\n278.130102,14.478,20.32,154.4604053,3.592102544,1.796051272,-177.8090711\n251.565051,14.732,21.082,24.09655582,8.032185358,0.803218612,-79.51863395\n225,14.986,21.336,17.96051221,17.96051221,0.359210356,-35.56181432\n225,15.24,21.59,17.96051221,17.96051221,0.359210356,-35.56181432\n243.434949,15.494,22.098,22.71845063,11.35922544,0.567961272,-56.22816542\n243.434949,16.002,23.114,22.71845063,11.35922544,1.135922544,-55.66020415\n243.434949,16.51,24.13,22.71845063,11.35922544,1.135922544,-55.66020415\n225,16.764,24.384,17.96051221,17.96051221,0.359210356,-35.56181432\n168.690068,20.574,23.622,24.90674927,4.981349956,3.885452986,-125.6296428\n355.601295,17.272,23.876,25.32518405,1.9480911,3.31175487,-327.8637273\n56.309932,16.764,23.114,56.35753981,7.04469254,0.915809954,-90.6651923\n56.309932,16.256,22.352,56.35753981,7.04469254,0.915809954,-90.6651923\n63.434949,16.002,21.844,22.71845063,11.35922544,0.567961272,-56.22816542\n56.309932,15.494,21.082,56.35753981,7.04469254,0.915809954,-90.6651923\n71.565051,15.24,20.32,24.09655582,8.032185358,0.803218612,-79.51863395\n90,15.24,20.066,0,25.4,0.254,-25.146\n90,15.24,19.558,0,25.4,0.508,-24.892\n90,15.24,18.796,0,25.4,0.762,-24.638\n225,15.494,19.05,17.96051221,17.96051221,0.359210356,-35.56181432\n243.434949,15.748,19.558,22.71845063,11.35922544,0.567961272,-56.22816542\n225,16.002,19.812,17.96051221,17.96051221,0.359210356,-35.56181432\n206.565051,16.51,20.066,34.07767607,11.35922544,0.567961272,-56.22816542\n206.565051,17.018,20.32,34.07767607,11.35922544,0.567961272,-56.22816542\n180,17.526,20.32,0,25.4,0.508,-24.892\n180,18.034,20.32,0,25.4,0.508,-24.892\n180,18.796,20.32,0,25.4,0.762,-24.638\n153.434949,19.304,20.066,22.71845063,11.35922544,0.567961272,-56.22816542\n135,19.558,19.812,17.96051221,17.96051221,0.359210356,-35.56181432\n135,14.224,14.224,17.96051221,17.96051221,0.359210356,-35.56181432\n26.565051,19.558,18.796,34.07767607,11.35922544,0.567961272,-56.22816542\n56.309932,19.05,18.034,56.35753981,7.04469254,0.915809954,-90.6651923\n14.036243,18.034,17.78,80.0852635,6.160405002,1.047268924,-103.6796141\n90,18.034,17.018,0,25.4,0.762,-24.638\n341.565051,17.272,17.272,24.09655582,8.032185358,0.803218612,-79.51863395\n0,17.018,17.272,0,25.4,0.254,-25.146\n90,14.224,13.97,0,25.4,0.254,-25.146\n180,14.478,13.97,0,25.4,0.254,-25.146\n225,14.732,14.224,17.96051221,17.96051221,0.359210356,-35.56181432\n270,14.732,14.478,0,25.4,0.254,-25.146\n135,14.986,14.224,17.96051221,17.96051221,0.359210356,-35.56181432\n74.475889,13.716,9.652,289.6013664,1.359630758,4.745111668,-469.7660475\n90,13.716,9.144,0,25.4,0.508,-24.892\n45,13.462,8.89,17.96051221,17.96051221,0.359210356,-35.56181432\n90,13.462,8.128,0,25.4,0.762,-24.638\n63.434949,11.938,5.08,22.71845063,11.35922544,3.407767632,-53.38835906\n90,11.938,4.826,0,25.4,0.254,-25.146\n56.309932,11.43,4.064,56.35753981,7.04469254,0.915809954,-90.6651923\n57.994617,10.16,2.032,148.0817038,2.692394666,2.396231174,-237.2268895\n45,9.906,1.778,17.96051221,17.96051221,0.359210356,-35.56181432\n180,10.16,1.778,0,25.4,0.254,-25.146\n225,10.414,2.032,17.96051221,17.96051221,0.359210356,-35.56181432\n236.309932,11.938,4.318,56.35753981,7.04469254,2.747430116,-88.8335724\n206.565051,12.446,4.572,34.07767607,11.35922544,0.567961272,-56.22816542\n244.983107,14.224,8.382,363.6694177,1.534470134,4.20444803,-416.2403639\n260.537678,14.478,9.906,25.05440557,4.175734346,1.545021802,-152.9571465\n255.963757,14.732,10.922,24.6416195,6.160405002,1.047268924,-103.6796141\n255.963757,15.24,12.954,24.6416195,6.160405002,2.094537594,-102.6323452\n251.565051,15.748,14.478,24.09655582,8.032185358,1.60643697,-78.71541559\n83.659808,15.494,12.192,25.24464674,2.804960862,2.30006779,-227.7067148\n135,15.748,11.938,17.96051221,17.96051221,0.359210356,-35.56181432\n45,15.494,11.684,17.96051221,17.96051221,0.359210356,-35.56181432\n66.801409,14.732,9.906,136.7425193,3.335183322,1.934406342,-191.5062304\n90,14.732,9.144,0,25.4,0.762,-24.638\n45,13.97,8.382,17.96051221,17.96051221,1.077630814,-34.84339386\n213.690068,14.732,8.89,35.22346245,7.04469254,0.915809954,-90.6651923\n243.434949,14.986,9.398,22.71845063,11.35922544,0.567961272,-56.22816542\n243.434949,15.748,10.922,22.71845063,11.35922544,1.703883816,-55.09224288\n243.434949,16.002,11.43,22.71845063,11.35922544,0.567961272,-56.22816542\n243.434949,16.256,11.938,22.71845063,11.35922544,0.567961272,-56.22816542\n270,16.256,14.732,0,25.4,2.794,-22.606\n225,16.51,14.986,17.96051221,17.96051221,0.359210356,-35.56181432\n128.659808,17.526,13.716,35.70132204,3.966813504,1.626393496,-161.0129622\n153.434949,18.034,13.462,22.71845063,11.35922544,0.567961272,-56.22816542\n164.054604,19.812,12.954,104.6687498,3.488958224,1.84914794,-183.0656433\n195.945396,21.59,13.462,80.24604144,3.488958224,1.84914794,-183.0656433\n315,21.336,13.716,17.96051221,17.96051221,0.359210356,-35.56181432\n0,20.574,13.716,0,25.4,0.762,-24.638\n18.434949,19.812,13.462,56.22529674,8.032185358,0.803218612,-79.51863395\n344.054604,18.034,13.97,104.6687498,3.488958224,1.84914794,-183.0656433\n315,17.018,14.986,17.96051221,17.96051221,1.436840916,-34.48418351\n270,17.018,15.24,0,25.4,0.254,-25.146\n180,17.272,15.24,0,25.4,0.254,-25.146\n180,17.78,15.24,0,25.4,0.508,-24.892\n153.434949,18.288,14.986,22.71845063,11.35922544,0.567961272,-56.22816542\n171.869898,20.066,14.732,25.14471705,3.592102544,1.796051272,-177.8090711\n198.434949,20.828,14.986,56.22529674,8.032185358,0.803218612,-79.51863395\n225,21.082,15.24,17.96051221,17.96051221,0.359210356,-35.56181432\n225,21.336,15.494,17.96051221,17.96051221,0.359210356,-35.56181432\n206.565051,21.844,15.748,34.07767607,11.35922544,0.567961272,-56.22816542\n206.565051,22.86,16.256,34.07767607,11.35922544,1.135922544,-55.66020415\n206.565051,23.876,16.764,34.07767607,11.35922544,1.135922544,-55.66020415\n225,24.13,17.018,17.96051221,17.96051221,0.359210356,-35.56181432\n281.309932,23.368,20.828,104.6083465,4.981349956,3.885452986,-125.6296428\n94.398705,23.622,17.526,305.8502981,1.9480911,3.31175487,-327.8637273\n33.690068,22.86,17.018,35.22346245,7.04469254,0.915809954,-90.6651923\n33.690068,22.098,16.51,35.22346245,7.04469254,0.915809954,-90.6651923\n26.565051,21.59,16.256,34.07767607,11.35922544,0.567961272,-56.22816542\n33.690068,20.828,15.748,35.22346245,7.04469254,0.915809954,-90.6651923\n18.434949,20.066,15.494,56.22529674,8.032185358,0.803218612,-79.51863395\n0,19.812,15.494,0,25.4,0.254,-25.146\n0,19.304,15.494,0,25.4,0.508,-24.892\n0,18.542,15.494,0,25.4,0.762,-24.638\n225,18.796,15.748,17.96051221,17.96051221,0.359210356,-35.56181432\n206.565051,19.304,16.002,34.07767607,11.35922544,0.567961272,-56.22816542\n225,19.558,16.256,17.96051221,17.96051221,0.359210356,-35.56181432\n243.434949,19.812,16.764,22.71845063,11.35922544,0.567961272,-56.22816542\n243.434949,20.066,17.272,22.71845063,11.35922544,0.567961272,-56.22816542\n270,20.066,17.78,0,25.4,0.508,-24.892\n270,20.066,18.288,0,25.4,0.508,-24.892\n270,20.066,19.05,0,25.4,0.762,-24.638\n296.565051,19.812,19.558,34.07767607,11.35922544,0.567961272,-56.22816542\n315,19.558,19.812,17.96051221,17.96051221,0.359210356,-35.56181432\n")),_f(wf.ParsePatFile("\n*SACNCR,SACNCR\n45, 0,0, 0,2.38125\n45, 1.6838,0, 0,2.38125, 0,-2.38125\n")),_f(wf.ParsePatFile("\n*SCAFFOLD\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n270,19.304,21.336,25.4,25.4,0.508,-24.892\n326.3099325,6.604,4.064,56.357539812,7.04469254,14.652960026,-76.928042486\n90,6.096,12.446,25.4,25.4,0.508,-24.892\n270,6.35,4.064,25.4,25.4,8.128,-17.272\n146.3099325,6.096,21.336,56.357539812,7.04469254,14.65296028,-76.928041978\n180,19.304,12.446,0,25.4,0.508,-24.892\n270,18.796,4.572,25.4,25.4,0.508,-24.892\n0,18.796,21.336,0,25.4,0.508,-24.892\n90,6.35,12.954,25.4,25.4,7.874,-17.526\n270,19.304,12.954,25.4,25.4,0.508,-24.892\n0,6.604,4.318,0,25.4,12.192,-13.208\n0,6.096,12.954,0,25.4,0.508,-24.892\n180,19.304,4.572,0,25.4,0.508,-24.892\n90,18.796,20.828,25.4,25.4,0.508,-24.892\n212.855722,6.096,12.446,514.310608918,0.444520828,14.513605212,-1436.846928942\n147.144278,6.096,4.572,937.049925236,0.444520828,14.513605212,-1436.846928942\n213.6900675,6.096,4.064,35.223462446,7.04469254,14.652959772,-76.928042486\n180,6.096,4.318,0,25.4,12.192,-13.208\n0,6.604,21.082,0,25.4,12.192,-13.208\n90,6.604,4.064,25.4,25.4,0.508,-24.892\n180,19.304,20.828,0,25.4,0.508,-24.892\n90,18.796,12.446,25.4,25.4,0.508,-24.892\n147.144278,18.796,4.572,937.049925236,0.444520828,14.513605466,-1436.846928688\n0,6.096,4.064,0,25.4,0.508,-24.892\n0,6.604,12.7,0,25.4,12.192,-13.208\n270,6.604,21.336,25.4,25.4,0.508,-24.892\n90,19.05,4.572,25.4,25.4,7.874,-17.526\n212.855722,18.796,20.828,514.310608918,0.444520828,14.513605466,-1436.846928688\n180,6.604,12.446,0,25.4,0.508,-24.892\n270,6.096,4.572,25.4,25.4,0.508,-24.892\n0,6.096,21.336,0,25.4,0.508,-24.892\n270,6.604,12.954,25.4,25.4,0.508,-24.892\n270,19.05,20.828,25.4,25.4,7.874,-17.526\n32.855722,6.604,4.572,514.310608918,0.444520828,14.513605466,-1436.846928688\n180,6.604,4.572,0,25.4,0.508,-24.892\n0,18.796,12.954,0,25.4,0.508,-24.892\n90,19.304,4.064,25.4,25.4,0.508,-24.892\n90,6.096,20.828,25.4,25.4,0.508,-24.892\n180,6.096,21.082,0,25.4,12.192,-13.208\n147.144278,6.096,12.954,937.049925236,0.444520828,14.513605212,-1436.846928942\n180,6.096,12.7,0,25.4,12.192,-13.208\n270,6.35,12.446,25.4,25.4,7.874,-17.526\n212.855722,6.096,20.828,514.310608918,0.444520828,14.513605466,-1436.846928688\n0,18.796,4.064,0,25.4,0.508,-24.892\n270,19.05,4.064,25.4,25.4,8.128,-17.272\n180,6.604,20.828,0,25.4,0.508,-24.892\n213.6900675,18.796,4.064,35.223462446,7.04469254,14.652960026,-76.928042486\n327.144278,6.604,20.828,937.049925236,0.444520828,14.513605466,-1436.846928688\n")),_f(wf.ParsePatFile("\n*SQUARE,SQUARE\n0, 0,0, 0,3.175, 3.175,-3.175\n90, 0,0, 0,3.175, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*SQUIGGLE-01,SQUIGGLE-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n45,2.794,-9.906,17.960512212,17.960512212,28.377609234,-7.54341519\n56.309932,1.778,13.97,56.357539812,7.04469254,1.831620162,-89.74938235\n81.869898,1.524,12.192,25.144717046,3.592102544,1.796051272,-177.809071102\n99.462322,1.778,10.668,129.447762694,4.175734346,1.545021802,-152.95714646\n123.690068,2.794,9.144,35.223462446,7.04469254,1.831620162,-89.74938235\n146.309932,4.318,8.128,56.357539812,7.04469254,1.831620162,-89.74938235\n170.537678,5.842,7.874,25.054405568,4.175734346,1.545021802,-152.95714646\n188.130102,7.62,8.128,154.460405328,3.592102544,1.796051272,-177.809071102\n213.690068,9.144,9.144,35.223462446,7.04469254,1.831620162,-89.74938235\n225,16.51,16.51,17.960512212,17.960512212,10.417097022,-25.503927402\n213.690068,18.034,17.526,35.223462446,7.04469254,1.831620162,-89.74938235\n189.462322,19.558,17.78,129.447762694,4.175734346,1.545021802,-152.95714646\n171.869898,21.336,17.526,25.144717046,3.592102544,1.796051272,-177.809071102\n146.309932,22.86,16.51,56.357539812,7.04469254,1.831620162,-89.74938235\n123.690068,23.876,14.986,35.223462446,7.04469254,1.831620162,-89.74938235\n99.462322,24.13,13.462,129.447762694,4.175734346,1.545021802,-152.95714646\n81.869898,23.876,11.684,25.144717046,3.592102544,1.796051272,-177.809071102\n56.309932,22.86,10.16,56.357539812,7.04469254,1.831620162,-89.74938235\n")),_f(wf.ParsePatFile("\n*SQUIGGLE-02,SQUIGGLE-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n75.963757,25.146,4.064,24.6416195,6.160405002,1.047268924,-103.679614078\n63.434949,24.638,3.048,22.718450626,11.35922544,1.135922544,-55.660204148\n45,23.876,2.286,17.960512212,17.960512212,1.077630814,-34.843393864\n14.036243,22.86,2.032,80.085263502,6.160405002,1.047268924,-103.679614078\n0,21.59,2.032,0,25.4,1.27,-24.13\n345.963757,20.574,2.286,24.6416195,6.160405002,1.047268924,-103.679614078\n315,19.812,3.048,17.960512212,17.960512212,1.077630814,-34.843393864\n296.565051,19.304,4.064,34.077676066,11.35922544,1.135922544,-55.660204148\n284.036243,19.05,5.08,80.085263502,6.160405002,1.047268924,-103.679614078\n281.309932,18.796,21.59,104.608346536,4.981349956,1.29515108,-128.219944728\n303.690068,18.288,22.352,35.223462446,7.04469254,0.915809954,-90.665192304\n315,17.526,23.114,17.960512212,17.960512212,1.077630814,-34.843393864\n345.963757,16.51,23.368,24.6416195,6.160405002,1.047268924,-103.679614078\n0,15.24,23.368,0,25.4,1.27,-24.13\n14.036243,14.224,23.114,80.085263502,6.160405002,1.047268924,-103.679614078\n45,13.462,22.352,17.960512212,17.960512212,1.077630814,-34.843393864\n56.309932,12.954,21.59,56.357539812,7.04469254,0.915809954,-90.665192304\n78.690068,12.7,20.32,24.906749272,4.981349956,1.29515108,-128.219944728\n75.963757,12.446,4.064,24.6416195,6.160405002,1.047268924,-103.679614078\n63.434949,11.938,3.048,22.718450626,11.35922544,1.135922544,-55.660204148\n45,11.176,2.286,17.960512212,17.960512212,1.077630814,-34.843393864\n14.036243,10.16,2.032,80.085263502,6.160405002,1.047268924,-103.679614078\n0,8.89,2.032,0,25.4,1.27,-24.13\n345.963757,7.874,2.286,24.6416195,6.160405002,1.047268924,-103.679614078\n315,7.112,3.048,17.960512212,17.960512212,1.077630814,-34.843393864\n296.565051,6.604,4.064,34.077676066,11.35922544,1.135922544,-55.660204148\n284.036243,6.35,5.08,80.085263502,6.160405002,1.047268924,-103.679614078\n281.309932,6.096,21.59,104.608346536,4.981349956,1.29515108,-128.219944728\n303.690068,5.588,22.352,35.223462446,7.04469254,0.915809954,-90.665192304\n315,4.826,23.114,17.960512212,17.960512212,1.077630814,-34.843393864\n345.963757,3.81,23.368,24.6416195,6.160405002,1.047268924,-103.679614078\n0,2.54,23.368,0,25.4,1.27,-24.13\n14.036243,1.524,23.114,80.085263502,6.160405002,1.047268924,-103.679614078\n45,0.762,22.352,17.960512212,17.960512212,1.077630814,-34.843393864\n56.309932,0.254,21.59,56.357539812,7.04469254,0.915809954,-90.665192304\n78.690068,0,20.32,24.906749272,4.981349956,1.29515108,-128.219944728\n270,19.05,20.32,0,25.4,15.24,-10.16\n270,12.7,20.32,0,25.4,15.24,-10.16\n270,6.35,20.32,0,25.4,15.24,-10.16\n270,0,20.32,0,25.4,15.24,-10.16\n")),_f(wf.ParsePatFile("\n*STARS,STARS\n0, 0,0, 0,5.49926, 3.175,-3.175\n60, 0,0, 0,5.49926, 3.175,-3.175\n120, 1.5875,2.74963, 0,5.49926, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*STEEL,STEEL\n45, 0,0, 0,3.175\n45, 0,1.5875, 0,3.175\n")),_f(wf.ParsePatFile("\n*SWAMP,SWAMP\n0, 0,0, 12.7,21.997, 3.175,-22.225\n90, 1.5875,0, 21.997,12.7, 1.5875,-42.4066\n90, 1.98438,0, 21.997,12.7, 1.27,-42.7241\n90, 1.19062,0, 21.997,12.7, 1.27,-42.7241\n60, 2.38125,0, 12.7,21.997, 1.016,-24.384\n120, .79375,0, 12.7,21.997, 1.016,-24.384\n")),_f(wf.ParsePatFile("\n*TRANS,TRANS\n0, 0,0, 0,6.35\n0, 0,3.175, 0,6.35, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*TRI-OVERLAP\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n59.641885,2.286000254,3.81,1206.700468992,0.313103514,20.605334202,-2039.928082188\n300.358115,12.7,21.590000254,853.832947398,0.313103514,20.605334202,-2039.928082188\n180,9.129485678,15.494,0,25.4,18.258981262,-7.141018738\n59.036243,22.737590288,4.452650734,56.628832894,4.356064186,5.17479407,-142.931383936\n180,23.114,3.81,0,25.4,20.827999746,-4.572000254\n300.963757,0,8.89,91.477345366,4.356064186,5.174794324,-142.931383682\n300.784147,3.048,3.81,148.105450296,0.464280504,13.89591328,-1375.695350204\n239.215853,22.352,3.81,1241.485813188,0.464280504,13.89591328,-1375.695350204\n")),_f(wf.ParsePatFile("\n*TRIANG,TRIANG\n60, 0,0, 4.7625,8.24889, 4.7625,-4.7625\n120, 0,0, 4.76250001,8.24889, 4.7625,-4.7625\n0, -2.38125,4.12445, 4.7625,8.24889, 4.7625,-4.7625\n")),_f(wf.ParsePatFile("\n*WEATHERBOARD,WEATHERBOARD\n; By John Hyslop,    Manually Entered QCAD3 pattern\n; Developed in mm as metric QCAD3 pattern\n; Metric Hatch Scale 1 Makes 152mm horizontally placed boards\n; with a 13mm offset line to simulate a rounded edge\n0,0,0,0,152\n0,0,13,0,152\n")),_f(wf.ParsePatFile("\n*WEAVING,WEAVING\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n90,22.86,5.08,0,25.4,1.27,-24.13\n75.963757,22.352,3.048,24.6416195,6.160405002,2.094537594,-102.632345154\n66.801409,21.59,1.27,136.74251925,3.335183322,1.934406342,-191.506230398\n54.462322,20.32,-0.508,91.53339072,2.952690056,2.18499055,-216.314071054\n56.309932,19.304,-2.032,56.357539812,7.04469254,1.831620162,-89.74938235\n90,20.066,5.588,0,25.4,1.778,-23.622\n80.537678,19.812,4.064,25.054405568,4.175734346,1.545021802,-152.95714646\n63.434949,19.05,2.54,22.718450626,11.35922544,1.703883816,-55.092242876\n56.309932,18.034,1.016,56.357539812,7.04469254,1.831620162,-89.74938235\n56.309932,17.018,-0.508,56.357539812,7.04469254,1.831620162,-89.74938235\n333.434949,21.844,6.858,22.718450626,11.35922544,1.703883816,-55.092242876\n344.054604,20.066,7.366,104.668749768,3.488958224,1.84914794,-183.065643266\n0,18.034,7.366,0,25.4,2.032,-23.368\n9.462322,16.51,7.112,129.447762694,4.175734346,1.545021802,-152.95714646\n26.565051,14.986,6.35,34.077676066,11.35922544,1.703883816,-55.092242876\n38.659808,13.716,5.334,35.701322044,3.966813504,1.626393496,-161.0129622\n36.869898,11.684,3.81,35.56,5.08,2.54,-124.46\n20.556045,9.652,3.048,136.750876358,2.97284521,2.170177016,-214.847518234\n330.255119,23.114,9.398,56.708680588,3.150482142,2.047813532,-202.733533318\n344.054604,21.336,9.906,104.668749768,3.488958224,1.84914794,-183.065643266\n352.874984,19.304,10.16,25.203858152,3.150482142,2.047813532,-202.733533318\n0,17.526,10.16,0,25.4,1.778,-23.622\n14.036243,15.494,9.652,80.085263502,6.160405002,2.094537594,-102.632345154\n26.565051,13.462,8.636,34.077676066,11.35922544,2.271845088,-54.524281604\n33.690068,11.938,7.62,35.223462446,7.04469254,1.831620162,-89.74938235\n35.537678,10.16,6.35,126.965671138,2.952690056,2.18499055,-216.314071054\n0,5.08,2.54,0,25.4,1.27,-24.13\n348.690068,3.81,2.794,24.906749272,4.981349956,1.29515108,-128.219944728\n341.565051,3.048,3.048,24.09655582,8.032185358,0.803218612,-79.518633952\n336.801409,1.27,3.81,136.74251925,3.335183322,1.934406342,-191.506230398\n326.309932,-0.254,4.826,56.357539812,7.04469254,1.831620162,-89.74938235\n324.462322,-2.032,6.096,91.53339072,2.952690056,2.18499055,-216.314071054\n0,5.588,5.334,0,25.4,1.778,-23.622\n350.537678,4.064,5.588,25.054405568,4.175734346,1.545021802,-152.95714646\n333.434949,2.54,6.35,22.718450626,11.35922544,1.703883816,-55.092242876\n326.309932,1.016,7.366,56.357539812,7.04469254,1.831620162,-89.74938235\n326.309932,-0.508,8.382,56.357539812,7.04469254,1.831620162,-89.74938235\n60.255119,16.002,23.114,56.708680588,3.150482142,2.047813532,-202.733533318\n180,20.066,20.066,0,25.4,2.032,-23.368\n164.054604,21.844,19.558,104.668749768,3.488958224,1.84914794,-183.065643266\n153.434949,23.368,18.796,22.718450626,11.35922544,1.703883816,-55.092242876\n330.255119,23.114,22.098,56.708680588,3.150482142,2.047813532,-202.733533318\n345.963757,21.082,22.606,24.6416195,6.160405002,2.094537594,-102.632345154\n352.874984,19.05,22.86,25.203858152,3.150482142,2.047813532,-202.733533318\n60.255119,18.288,21.59,56.708680588,3.150482142,2.047813532,-202.733533318\n80.537678,18.034,20.066,25.054405568,4.175734346,1.545021802,-152.95714646\n90,18.034,18.034,0,25.4,2.032,-23.368\n104.036243,18.542,16.002,80.085263502,6.160405002,2.094537594,-102.632345154\n116.565051,19.304,14.478,34.077676066,11.35922544,1.703883816,-55.092242876\n129.805571,20.574,12.954,35.773504272,3.252136752,1.9838035,-196.396538372\n123.690068,21.59,11.43,35.223462446,7.04469254,1.831620162,-89.74938235\n113.198591,22.352,9.652,56.698117744,3.335183322,1.934406342,-191.506230398\n309.805571,18.034,11.684,35.773504272,3.252136752,1.9838035,-196.396538372\n305.537678,16.764,13.462,126.965671138,2.952690056,2.18499055,-216.314071054\n299.744881,15.748,15.24,148.072666262,3.150482142,2.047813532,-202.733533318\n285.945396,15.24,17.018,80.246041438,3.488958224,1.84914794,-183.065643266\n270,15.24,19.304,0,25.4,2.286,-23.114\n74.054604,15.494,21.336,104.668749768,3.488958224,1.84914794,-183.065643266\n82.874984,15.24,19.304,25.203858152,3.150482142,2.047813532,-202.733533318\n39.805571,13.716,18.034,35.773504272,3.252136752,1.9838035,-196.396538372\n35.537678,11.938,16.764,126.965671138,2.952690056,2.18499055,-216.314071054\n33.690068,10.414,15.748,35.223462446,7.04469254,1.831620162,-89.74938235\n15.945396,8.636,15.24,80.246041438,3.488958224,1.84914794,-183.065643266\n6.340192,6.35,14.986,204.76213556,2.804960862,2.30006779,-227.706714766\n350.537678,4.826,15.24,25.054405568,4.175734346,1.545021802,-152.95714646\n344.054604,3.048,15.748,104.668749768,3.488958224,1.84914794,-183.065643266\n23.198591,13.97,21.59,56.698117744,3.335183322,1.934406342,-191.506230398\n29.744881,12.192,20.574,148.072666262,3.150482142,2.047813532,-202.733533318\n39.805571,10.668,19.304,35.773504272,3.252136752,1.9838035,-196.396538372\n29.744881,8.89,18.288,148.072666262,3.150482142,2.047813532,-202.733533318\n7.125016,6.858,18.034,179.577488698,3.150482142,2.047813532,-202.733533318\n0,5.334,18.034,0,25.4,1.524,-23.876\n344.054604,3.556,18.542,104.668749768,3.488958224,1.84914794,-183.065643266\n333.434949,2.54,19.05,22.718450626,11.35922544,1.135922544,-55.660204148\n234.462322,7.874,-0.254,91.53339072,2.952690056,2.18499055,-216.314071054\n240.255119,8.89,1.524,56.708680588,3.150482142,2.047813532,-202.733533318\n243.434949,9.906,3.556,22.718450626,11.35922544,2.271845088,-54.524281604\n262.874984,10.16,5.588,25.203858152,3.150482142,2.047813532,-202.733533318\n270,10.16,7.62,0,25.4,2.032,-23.368\n282.528808,9.652,9.906,104.69063898,2.755016842,2.341764176,-231.834664854\n293.198591,8.89,11.684,56.698117744,3.335183322,1.934406342,-191.506230398\n309.805571,7.62,13.208,35.773504272,3.252136752,1.9838035,-196.396538372\n305.537678,6.35,14.986,126.965671138,2.952690056,2.18499055,-216.314071054\n270,5.334,19.812,0,25.4,1.778,-23.622\n254.054604,5.842,21.59,104.668749768,3.488958224,1.84914794,-183.065643266\n246.801409,6.604,23.368,136.74251925,3.335183322,1.934406342,-191.506230398\n236.309932,5.334,1.016,56.357539812,7.04469254,1.831620162,-89.74938235\n234.462322,6.604,2.794,91.53339072,2.952690056,2.18499055,-216.314071054\n249.443955,7.366,4.826,80.266818638,2.97284521,2.170177016,-214.847518234\n270,7.366,6.858,0,25.4,2.032,-23.368\n278.130102,7.112,8.636,154.460405328,3.592102544,1.796051272,-177.809071102\n296.565051,6.096,10.668,34.077676066,11.35922544,2.271845088,-54.524281604\n309.805571,4.826,12.192,35.773504272,3.252136752,1.9838035,-196.396538372\n303.690068,3.81,13.716,35.223462446,7.04469254,1.831620162,-89.74938235\n290.556045,3.048,15.748,136.750876358,2.97284521,2.170177016,-214.847518234\n341.565051,1.524,16.256,24.09655582,8.032185358,1.60643697,-78.715415594\n324.462322,-0.254,17.526,91.53339072,2.952690056,2.18499055,-216.314071054\n324.462322,-2.032,18.796,91.53339072,2.952690056,2.18499055,-216.314071054\n146.309932,1.016,20.066,56.357539812,7.04469254,1.831620162,-89.74938235\n146.309932,2.54,19.05,56.357539812,7.04469254,1.831620162,-89.74938235\n262.874984,2.794,21.082,25.203858152,3.150482142,2.047813532,-202.733533318\n255.963757,3.302,23.114,24.6416195,6.160405002,2.094537594,-102.632345154\n240.255119,4.318,24.892,56.708680588,3.150482142,2.047813532,-202.733533318\n")),_f(wf.ParsePatFile("\n*WIRE-FENCE\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in mm as metric QCAD3 pattern\n315,11.684,12.7,17.960512212,17.960512212,1.186955462,-34.734068962\n315,13.353142966,14.332857034,17.960512212,17.960512212,1.231577928,-34.689446496\n3.731397,12.767918076,14.294690232,381.845330542,0.55100347,0.586467966,-1170.2956782\n183.17983,11.77579941,14.229987034,432.544118908,1.408938508,23.016097986,-434.888914066\n183.17983,11.714581854,13.209697736,432.544118908,1.408938508,23.012451308,-434.892560744\n153.434949,13.208,12.954,22.718450626,11.35922544,0.567961272,-56.22816542\n266.593556,13.208,12.954,432.546308388,0.301846742,25.69937837,-2111.67704156\n266.593556,14.224,13.462,432.546308388,0.301846742,25.69937837,-2111.67704156\n2.602562,12.523304392,11.860695608,534.003174054,1.153354564,0.622066574,-558.754908396\n")),_f(wf.ParsePatFile("\n*XMASTREE-01,XMASTREE-01\n;By John Hyslop\n;Developed in mm as metric QCAD3 pattern\n180,1.016,24.13,0,25.4,1.016,-24.384\n90,1.016,20.828,0,25.4,3.302,-22.098\n180,8.382,20.828,0,25.4,7.366,-18.034\n49.763642,5.588,17.526,198.374734568,1.491539308,4.325464044,-428.2209495\n180,7.112,17.526,0,25.4,1.524,-23.876\n51.340192,4.064,13.716,126.938033652,3.966813504,4.879180742,-157.760174954\n180,5.588,13.716,0,25.4,1.524,-23.876\n52.431408,3.048,10.414,126.990557296,1.548665432,4.165909626,-412.425064658\n180,4.318,10.414,0,25.4,1.27,-24.13\n53.130102,2.032,7.366,91.44,5.08,3.81,-123.19\n180,3.302,7.366,0,25.4,1.27,-24.13\n53.972627,1.27,4.572,218.491081432,1.867445084,3.454773634,-342.02257732\n180,2.54,4.572,0,25.4,1.27,-24.13\n54.462322,0,1.016,91.53339072,2.952690056,4.369981354,-214.129080504\n0,24.384,24.13,0,25.4,1.016,-24.384\n90,24.384,20.828,0,25.4,3.302,-22.098\n0,17.018,20.828,0,25.4,7.366,-18.034\n130.236358,19.812,17.526,234.17167923,1.491539308,4.325464044,-428.2209495\n0,18.288,17.526,0,25.4,1.524,-23.876\n128.659808,21.336,13.716,35.701322044,3.966813504,4.879180742,-157.760174954\n0,19.812,13.716,0,25.4,1.524,-23.876\n127.568592,22.352,10.414,289.600417242,1.548665432,4.165909626,-412.425064658\n0,21.082,10.414,0,25.4,1.27,-24.13\n126.869898,23.368,7.366,35.56,5.08,3.81,-123.19\n0,22.098,7.366,0,25.4,1.27,-24.13\n126.027373,24.13,4.572,126.986269522,1.867445084,3.454773634,-342.02257732\n0,22.86,4.572,0,25.4,1.27,-24.13\n125.537678,25.4,1.016,126.965671138,2.952690056,4.369981354,-214.129080504\n0,11.684,1.016,0,25.4,1.016,-24.384\n270,11.684,4.318,0,25.4,3.302,-22.098\n0,4.318,4.318,0,25.4,7.366,-18.034\n229.763642,7.112,7.62,198.374734568,1.491539308,4.325464044,-428.2209495\n0,5.588,7.62,0,25.4,1.524,-23.876\n231.340192,8.636,11.43,126.938033652,3.966813504,4.879180742,-157.760174954\n0,7.112,11.43,0,25.4,1.524,-23.876\n232.431408,9.652,14.732,126.990557296,1.548665432,4.165909626,-412.425064658\n0,8.382,14.732,0,25.4,1.27,-24.13\n233.130102,10.668,17.78,91.44,5.08,3.81,-123.19\n0,9.398,17.78,0,25.4,1.27,-24.13\n233.972627,11.43,20.574,218.491081432,1.867445084,3.454773634,-342.02257732\n0,10.16,20.574,0,25.4,1.27,-24.13\n234.462322,12.7,24.13,91.53339072,2.952690056,4.369981354,-214.129080504\n180,13.716,1.016,0,25.4,1.016,-24.384\n270,13.716,4.318,0,25.4,3.302,-22.098\n180,21.082,4.318,0,25.4,7.366,-18.034\n310.236358,18.288,7.62,234.17167923,1.491539308,4.325464044,-428.2209495\n180,19.812,7.62,0,25.4,1.524,-23.876\n308.659808,16.764,11.43,35.701322044,3.966813504,4.879180742,-157.760174954\n180,18.288,11.43,0,25.4,1.524,-23.876\n307.568592,15.748,14.732,289.600417242,1.548665432,4.165909626,-412.425064658\n180,17.018,14.732,0,25.4,1.27,-24.13\n306.869898,14.732,17.78,35.56,5.08,3.81,-123.19\n180,16.002,17.78,0,25.4,1.27,-24.13\n306.027373,13.97,20.574,126.986269522,1.867445084,3.454773634,-342.02257732\n180,15.24,20.574,0,25.4,1.27,-24.13\n305.537678,12.7,24.13,126.965671138,2.952690056,4.369981354,-214.129080504\n")),_f(wf.ParsePatFile("\n*XMASTREE-02,XMASTREE-02\n;By John Hyslop\n;Developed in mm as metric QCAD3 pattern\n180,1.016,6.604,0,25.4,1.016,-24.384\n90,1.016,3.302,0,25.4,3.302,-22.098\n180,8.382,3.302,0,25.4,7.366,-18.034\n49.763642,5.588,0,198.374734568,1.491539308,4.325464044,-428.2209495\n180,7.112,25.4,0,25.4,1.524,-23.876\n51.340192,4.064,21.59,126.938033652,3.966813504,4.879180742,-157.760174954\n180,5.588,21.59,0,25.4,1.524,-23.876\n52.431408,3.048,18.288,126.990557296,1.548665432,4.165909626,-412.425064658\n180,4.318,18.288,0,25.4,1.27,-24.13\n53.130102,2.032,15.24,91.44,5.08,3.81,-123.19\n180,3.302,15.24,0,25.4,1.27,-24.13\n53.972627,1.27,12.446,218.491081432,1.867445084,3.454773634,-342.02257732\n180,2.54,12.446,0,25.4,1.27,-24.13\n54.462322,0,8.89,91.53339072,2.952690056,4.369981354,-214.129080504\n0,24.384,6.604,0,25.4,1.016,-24.384\n90,24.384,3.302,0,25.4,3.302,-22.098\n0,17.018,3.302,0,25.4,7.366,-18.034\n130.236358,19.812,0,234.17167923,1.491539308,4.325464044,-428.2209495\n0,18.288,25.4,0,25.4,1.524,-23.876\n128.659808,21.336,21.59,35.701322044,3.966813504,4.879180742,-157.760174954\n0,19.812,21.59,0,25.4,1.524,-23.876\n127.568592,22.352,18.288,289.600417242,1.548665432,4.165909626,-412.425064658\n0,21.082,18.288,0,25.4,1.27,-24.13\n126.869898,23.368,15.24,35.56,5.08,3.81,-123.19\n0,22.098,15.24,0,25.4,1.27,-24.13\n126.027373,24.13,12.446,126.986269522,1.867445084,3.454773634,-342.02257732\n0,22.86,12.446,0,25.4,1.27,-24.13\n125.537678,25.4,8.89,126.965671138,2.952690056,4.369981354,-214.129080504\n0,11.684,2.286,0,25.4,1.016,-24.384\n270,11.684,5.588,0,25.4,3.302,-22.098\n0,4.318,5.588,0,25.4,7.366,-18.034\n229.763642,7.112,8.89,198.374734568,1.491539308,4.325464044,-428.2209495\n0,5.588,8.89,0,25.4,1.524,-23.876\n231.340192,8.636,12.7,126.938033652,3.966813504,4.879180742,-157.760174954\n0,7.112,12.7,0,25.4,1.524,-23.876\n232.431408,9.652,16.002,126.990557296,1.548665432,4.165909626,-412.425064658\n0,8.382,16.002,0,25.4,1.27,-24.13\n233.130102,10.668,19.05,91.44,5.08,3.81,-123.19\n0,9.398,19.05,0,25.4,1.27,-24.13\n233.972627,11.43,21.844,218.491081432,1.867445084,3.454773634,-342.02257732\n0,10.16,21.844,0,25.4,1.27,-24.13\n234.462322,12.7,25.4,91.53339072,2.952690056,4.369981354,-214.129080504\n180,13.716,2.286,0,25.4,1.016,-24.384\n270,13.716,5.588,0,25.4,3.302,-22.098\n180,21.082,5.588,0,25.4,7.366,-18.034\n310.236358,18.288,8.89,234.17167923,1.491539308,4.325464044,-428.2209495\n180,19.812,8.89,0,25.4,1.524,-23.876\n308.659808,16.764,12.7,35.701322044,3.966813504,4.879180742,-157.760174954\n180,18.288,12.7,0,25.4,1.524,-23.876\n307.568592,15.748,16.002,289.600417242,1.548665432,4.165909626,-412.425064658\n180,17.018,16.002,0,25.4,1.27,-24.13\n306.869898,14.732,19.05,35.56,5.08,3.81,-123.19\n180,16.002,19.05,0,25.4,1.27,-24.13\n306.027373,13.97,21.844,126.986269522,1.867445084,3.454773634,-342.02257732\n180,15.24,21.844,0,25.4,1.27,-24.13\n305.537678,12.7,25.4,126.965671138,2.952690056,4.369981354,-214.129080504\n")),_f(wf.ParsePatFile("\n*ZIGZAG,ZIGZAG\n0, 0,0, 3.175,3.175, 3.175,-3.175\n90, 3.175,0, 3.175,3.175, 3.175,-3.175\n")),_f(wf.ParsePatFile("\n*ACAD_ISO02W100,ACAD_ISO02W100\n0, 0,0, 0,5, 12,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO03W100,ACAD_ISO03W100\n0, 0,0, 0,5, 12,-18\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO04W100,ACAD_ISO04W100\n0, 0,0, 0,5, 24,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO05W100,ACAD_ISO05W100\n0, 0,0, 0,5, 24,-3,.5,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO06W100,ACAD_ISO06W100\n0, 0,0, 0,5, 24,-3,.5,-3,.5,-6.5\n0, 0,0, 0,5, -34,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO07W100,ACAD_ISO07W100\n0, 0,0, 0,5, .5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO08W100,ACAD_ISO08W100\n0, 0,0, 0,5, 24,-3,6,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO09W100,ACAD_ISO09W100\n0, 0,0, 0,5, 24,-3,6,-3,6,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO10W100,ACAD_ISO10W100\n0, 0,0, 0,5, 12,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO11W100,ACAD_ISO11W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO12W100,ACAD_ISO12W100\n0, 0,0, 0,5, 12,-3,.5,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO13W100,ACAD_ISO13W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-6.5\n0, 0,0, 0,5, -33.5,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO14W100,ACAD_ISO14W100\n0, 0,0, 0,5, 12,-3,.5,-3,.5,-6.5\n0, 0,0, 0,5, -22,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ACAD_ISO15W100,ACAD_ISO15W100\n0, 0,0, 0,5, 12,-3,12,-3,.5,-10\n0, 0,0, 0,5, -33.5,.5,-3,.5,-3\n"),!1),_f(wf.ParsePatFile("\n*ANGLE,ANGLE\n0, 0,0, 0,.275, .2,-.075\n90, 0,0, 0,.275, .2,-.075\n"),!1),_f(wf.ParsePatFile("\n*ANSI31,ANSI31\n45, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*ANSI32,ANSI32\n45, 0,0, 0,.375\n45, .1767767,0, 0,.375\n"),!1),_f(wf.ParsePatFile("\n*ANSI33,ANSI33\n45, 0,0, 0,.25\n45, .1767767,0, 0,.25, .125,-.0625\n"),!1),_f(wf.ParsePatFile("\n*ANSI34,ANSI34\n45, 0,0, 0,.75\n45, .1767767,0, 0,.75\n45, .35355339,0, 0,.75\n45, .53033009,0, 0,.75\n"),!1),_f(wf.ParsePatFile("\n*ANSI35,ANSI35\n45, 0,0, 0,.25\n45, .1767767,0, 0,.25, .3125,-.0625,0,-.0625\n"),!1),_f(wf.ParsePatFile("\n*ANSI36,ANSI36\n45, 0,0, .21875,.125, .3125,-.0625,0,-.0625\n"),!1),_f(wf.ParsePatFile("\n*ANSI37,ANSI37\n45, 0,0, 0,.125\n135, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*ANSI38,ANSI38\n45, 0,0, 0,.125\n135, 0,0, .25,.125, .3125,-.1875\n"),!1),_f(wf.ParsePatFile("\n*AR-B816C,AR-B816C\n0, 0,0, 8,8, 15.625,-.375\n0, -8,.375, 8,8, 15.625,-.375\n90, 0,0, 8,8, -8.375,7.625\n90, -.375,0, 8,8, -8.375,7.625\n"),!1),_f(wf.ParsePatFile("\n*AR-B816,AR-B816\n0, 0,0, 0,8\n90, 0,0, 8,8, 8,-8\n"),!1),_f(wf.ParsePatFile("\n*AR-B88,AR-B88\n0, 0,0, 0,8\n90, 0,0, 8,4, 8,-8\n"),!1),_f(wf.ParsePatFile("\n*AR-BRELM,AR-BRELM\n0, 0,0, 0,5.334, 7.625,-.375\n0, 0,2.25, 0,5.334, 7.625,-.375\n0, 2,2.667, 0,5.334, 3.625,-.375\n0, 2,4.917, 0,5.334, 3.625,-.375\n90, 0,0, 0,8, 2.25,-3.084\n90, -.375,0, 0,8, 2.25,-3.084\n90, 2,2.667, 0,4, 2.25,-3.084\n90, 1.625,2.667, 0,4, 2.25,-3.084\n"),!1),_f(wf.ParsePatFile("\n*AR-BRSTD,AR-BRSTD\n0, 0,0, 0,2.667\n90, 0,0, 2.667,4, 2.667,-2.667\n"),!1),_f(wf.ParsePatFile("\n*AR-CONC-01,AR-CONC-01\n;Optimize to replace existing AR-CONC Pattern\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n243.434949,0.3,0.8,8.9442719,4.472136,0.2236068,-22.137073\n90,0.3,0.6,0,10,0.2,-9.8\n0,0.2,0.6,0,10,0.1,-9.9\n315,0.1,0.1,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,0.3,0.2,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,0.2,0,8.9442719,4.472136,0.2236068,-22.137073\n45,2,0.4,7.0710678,7.0710678,0.2828427,-13.8592929\n161.565051,2.3,0.3,9.486833,3.1622777,0.3162278,-31.3065488\n288.434949,2.2,0.6,22.1359436,3.1622777,0.3162278,-31.3065488\n315,2.3,0.9,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,2.5,1,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,2.4,0.8,8.9442719,4.472136,0.2236068,-22.137073\n270,4.1,0.6,0,10,0.2,-9.8\n45,3.9,0.4,7.0710678,7.0710678,0.2828427,-13.8592929\n180,4.1,0.4,0,10,0.2,-9.8\n333.434949,3.9,0.2,8.9442719,4.472136,0.2236068,-22.137073\n225,4,0.3,7.0710678,7.0710678,0.1414214,-14.0007143\n116.565051,4.1,0.1,13.4164079,4.472136,0.2236068,-22.137073\n198.434949,6.3,0.8,22.1359436,3.1622777,0.3162278,-31.3065488\n63.434949,6.2,0.6,8.9442719,4.472136,0.2236068,-22.137073\n333.434949,6,0.7,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,5.7,0,13.4164079,4.472136,0.2236068,-22.137073\n251.565051,5.8,0.3,9.486833,3.1622777,0.3162278,-31.3065488\n116.565051,5.9,0.1,13.4164079,4.472136,0.2236068,-22.137073\n45,6.7,0.1,7.0710678,7.0710678,0.2828427,-13.8592929\n161.565051,7,0,9.486833,3.1622777,0.3162278,-31.3065488\n288.434949,6.9,0.3,22.1359436,3.1622777,0.3162278,-31.3065488\n315,3,2.8,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,3.2,2.9,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,3.1,2.7,8.9442719,4.472136,0.2236068,-22.137073\n45,1.1,0.8,7.0710678,7.0710678,0.2828427,-13.8592929\n180,1.3,0.8,0,10,0.2,-9.8\n270,1.3,1,0,10,0.2,-9.8\n225,1.8,2.4,7.0710678,7.0710678,0.1414214,-14.0007143\n270,1.8,2.6,0,10,0.2,-9.8\n71.565051,1.7,2.3,9.486833,3.1622777,0.3162278,-31.3065488\n198.434949,1,2.1,22.1359436,3.1622777,0.3162278,-31.3065488\n63.434949,0.9,1.9,8.9442719,4.472136,0.2236068,-22.137073\n333.434949,0.7,2,8.9442719,4.472136,0.2236068,-22.137073\n0,3.5,2.2,0,10,0.2,-9.8\n225,3.7,2.4,7.0710678,7.0710678,0.2828427,-13.8592929\n90,3.7,2.2,0,10,0.2,-9.8\n315,4.5,1.7,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,4.7,1.8,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,4.6,1.6,8.9442719,4.472136,0.2236068,-22.137073\n315,5.5,2.1,7.0710678,7.0710678,0.1414214,-14.0007143\n270,5.5,2.3,0,10,0.2,-9.8\n108.434949,5.6,2,22.1359436,3.1622777,0.3162278,-31.3065488\n206.565051,6.9,2.7,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,6.8,2.5,8.9442719,4.472136,0.2236068,-22.137073\n315,6.7,2.6,7.0710678,7.0710678,0.1414214,-14.0007143\n333.434949,7.3,1.9,8.9442719,4.472136,0.2236068,-22.137073\n225,7.4,2,7.0710678,7.0710678,0.1414214,-14.0007143\n116.565051,7.5,1.8,13.4164079,4.472136,0.2236068,-22.137073\n26.565051,8.2,1.5,13.4164079,4.472136,0.2236068,-22.137073\n153.434949,8.4,1.4,8.9442719,4.472136,0.2236068,-22.137073\n270,8.4,1.6,0,10,0.2,-9.8\n180,9.3,1.7,0,10,0.1,-9.9\n270,9.3,1.8,0,10,0.1,-9.9\n45,9.2,1.7,7.0710678,7.0710678,0.1414214,-14.0007143\n153.434949,9.3,2.4,8.9442719,4.472136,0.2236068,-22.137073\n270,9.3,2.7,0,10,0.3,-9.7\n45,9.1,2.5,7.0710678,7.0710678,0.2828427,-13.8592929\n206.565051,9.1,3.5,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,9,3.3,8.9442719,4.472136,0.2236068,-22.137073\n315,8.9,3.4,7.0710678,7.0710678,0.1414214,-14.0007143\n180,6.5,2.9,0,10,0.2,-9.8\n270,6.5,3.2,0,10,0.3,-9.7\n56.309932,6.3,2.9,22.1880078,2.773501,0.3605551,-35.6949576\n198.434949,5.4,3.8,22.1359436,3.1622777,0.3162278,-31.3065488\n71.565051,5.3,3.5,9.486833,3.1622777,0.3162278,-31.3065488\n315,5.1,3.7,7.0710678,7.0710678,0.2828427,-13.8592929\n180,3.8,3.3,0,10,0.3,-9.7\n270,3.8,3.6,0,10,0.3,-9.7\n45,3.5,3.3,7.0710678,7.0710678,0.4242641,-13.7178716\n225,3.3,4.3,7.0710678,7.0710678,0.2828427,-13.8592929\n90,3.3,4.1,0,10,0.2,-9.8\n0,3.1,4.1,0,10,0.2,-9.8\n206.565051,1.6,3.9,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,1.5,3.7,8.9442719,4.472136,0.2236068,-22.137073\n315,1.4,3.8,7.0710678,7.0710678,0.1414214,-14.0007143\n108.434949,1,3.7,22.1359436,3.1622777,0.3162278,-31.3065488\n341.565051,0.7,3.8,9.486833,3.1622777,0.3162278,-31.3065488\n225,0.9,4,7.0710678,7.0710678,0.2828427,-13.8592929\n270,1.5,4.5,0,10,0.2,-9.8\n45,1.3,4.3,7.0710678,7.0710678,0.2828427,-13.8592929\n180,1.5,4.3,0,10,0.2,-9.8\n315,3.6,4.7,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,3.8,4.8,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,3.7,4.6,8.9442719,4.472136,0.2236068,-22.137073\n0,5.1,4,0,10,0.1,-9.9\n225,5.2,4.1,7.0710678,7.0710678,0.1414214,-14.0007143\n90,5.2,4,0,10,0.1,-9.9\n0,6.9,3.8,0,10,0.2,-9.8\n243.434949,7,4,8.9442719,4.472136,0.2236068,-22.137073\n116.565051,7.1,3.8,13.4164079,4.472136,0.2236068,-22.137073\n26.565051,7.3,4.5,13.4164079,4.472136,0.2236068,-22.137073\n116.565051,7.4,4.3,13.4164079,4.472136,0.2236068,-22.137073\n251.565051,7.5,4.6,9.486833,3.1622777,0.3162278,-31.3065488\n63.434949,8.8,3.6,8.9442719,4.472136,0.2236068,-22.137073\n180,9,3.6,0,10,0.2,-9.8\n296.565051,8.9,3.8,13.4164079,4.472136,0.2236068,-22.137073\n180,9,5.4,0,10,0.3,-9.7\n270,9,5.7,0,10,0.3,-9.7\n45,8.7,5.4,7.0710678,7.0710678,0.4242641,-13.7178716\n180,8.6,5.6,0,10,0.2,-9.8\n270,8.6,5.8,0,10,0.2,-9.8\n45,8.4,5.6,7.0710678,7.0710678,0.2828427,-13.8592929\n243.434949,8.2,6.5,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,8,6.4,13.4164079,4.472136,0.2236068,-22.137073\n135,8.1,6.3,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,6.7,6,8.9442719,4.472136,0.2236068,-22.137073\n116.565051,6.8,5.8,13.4164079,4.472136,0.2236068,-22.137073\n0,6.6,5.8,0,10,0.2,-9.8\n225,6.2,6.1,7.0710678,7.0710678,0.2828427,-13.8592929\n108.434949,6.3,5.8,22.1359436,3.1622777,0.3162278,-31.3065488\n341.565051,6,5.9,9.486833,3.1622777,0.3162278,-31.3065488\n135,5.9,5.4,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,6,5.6,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,5.8,5.5,13.4164079,4.472136,0.2236068,-22.137073\n180,4.8,6,0,10,0.1,-9.9\n270,4.8,6.1,0,10,0.1,-9.9\n45,4.7,6,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,4.4,6.7,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,4.3,6.5,8.9442719,4.472136,0.2236068,-22.137073\n315,4.2,6.6,7.0710678,7.0710678,0.1414214,-14.0007143\n225,3.4,6.5,7.0710678,7.0710678,0.2828427,-13.8592929\n90,3.4,6.2,0,10,0.3,-9.7\n333.434949,3.2,6.3,8.9442719,4.472136,0.2236068,-22.137073\n180,3,6.1,0,10,0.2,-9.8\n270,3,6.3,0,10,0.2,-9.8\n45,2.8,6.1,7.0710678,7.0710678,0.2828427,-13.8592929\n135,2.1,5.6,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,2.2,5.8,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,2,5.7,13.4164079,4.472136,0.2236068,-22.137073\n180,1.1,6.3,0,10,0.2,-9.8\n270,1.1,6.5,0,10,0.2,-9.8\n45,0.9,6.3,7.0710678,7.0710678,0.2828427,-13.8592929\n270,0.6,7,0,10,0.3,-9.7\n45,0.4,6.8,7.0710678,7.0710678,0.2828427,-13.8592929\n153.434949,0.6,6.7,8.9442719,4.472136,0.2236068,-22.137073\n243.434949,8.2,7.8,8.9442719,4.472136,0.2236068,-22.137073\n90,8.2,7.6,0,10,0.2,-9.8\n0,8.1,7.6,0,10,0.1,-9.9\n135,8.7,8.2,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,8.8,8.4,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,8.6,8.3,13.4164079,4.472136,0.2236068,-22.137073\n180,8.6,8.4,0,10,0.2,-9.8\n251.565051,8.7,8.7,9.486833,3.1622777,0.3162278,-31.3065488\n45,8.4,8.4,7.0710678,7.0710678,0.4242641,-13.7178716\n153.434949,7.2,9.2,8.9442719,4.472136,0.2236068,-22.137073\n135,6.5,7.3,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,6.6,7.5,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,6.4,7.4,13.4164079,4.472136,0.2236068,-22.137073\n135,6.3,7.7,7.0710678,7.0710678,0.1414214,-14.0007143\n251.565051,6.4,8,9.486833,3.1622777,0.3162278,-31.3065488\n45,6.2,7.8,7.0710678,7.0710678,0.2828427,-13.8592929\n26.565051,2.6,7.6,13.4164079,4.472136,0.2236068,-22.137073\n153.434949,2.8,7.5,8.9442719,4.472136,0.2236068,-22.137073\n270,2.8,7.7,0,10,0.2,-9.8\n90,4.5,7.9,0,10,0.2,-9.8\n0,4.3,7.9,0,10,0.2,-9.8\n225,4.5,8.1,7.0710678,7.0710678,0.2828427,-13.8592929\n63.434949,4.9,8.3,8.9442719,4.472136,0.2236068,-22.137073\n315,4.8,8.4,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,5,8.5,13.4164079,4.472136,0.2236068,-22.137073\n153.434949,5.8,8.8,8.9442719,4.472136,0.2236068,-22.137073\n270,5.8,9.1,0,10,0.3,-9.7\n45,5.6,8.9,7.0710678,7.0710678,0.2828427,-13.8592929\n0,2.8,9.3,0,10,0.3,-9.7\n135,2.6,8,7.0710678,7.0710678,0.1414214,-14.0007143\n270,2.6,8.2,0,10,0.2,-9.8\n45,2.5,8.1,7.0710678,7.0710678,0.1414214,-14.0007143\n116.565051,0.8,8.2,13.4164079,4.472136,0.2236068,-22.137073\n333.434949,0.6,8.3,8.9442719,4.472136,0.2236068,-22.137073\n225,0.7,8.4,7.0710678,7.0710678,0.1414214,-14.0007143\n135,1.2,8.6,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,1.3,8.8,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,1.1,8.7,13.4164079,4.472136,0.2236068,-22.137073\n0,8.74875,8.58939,0,10,0,-10\n0,8.12326,9.16255,0,10,0,-10\n0,8.22334,7.41455,0,10,0,-10\n0,7.2264,8.32807,0,10,0,-10\n0,6.60091,8.90123,0,10,0,-10\n0,8.74106,5.28385,0,10,0,-10\n0,8.11556,5.85701,0,10,0,-10\n0,6.70099,7.15323,0,10,0,-10\n0,5.70405,8.06676,0,10,0,-10\n0,5.07855,8.63992,0,10,0,-10\n0,8.21564,4.10901,0,10,0,-10\n0,7.2187,5.02254,0,10,0,-10\n0,6.59321,5.5957,0,10,0,-10\n0,5.17863,6.89192,0,10,0,-10\n0,4.18169,7.80544,0,10,0,-10\n0,3.5562,8.3786,0,10,0,-10\n0,8.73336,1.97832,0,10,0,-10\n0,8.10787,2.55148,0,10,0,-10\n0,6.69329,3.8477,0,10,0,-10\n0,5.69635,4.76122,0,10,0,-10\n0,5.07086,5.33438,0,10,0,-10\n0,3.65628,6.6306,0,10,0,-10\n0,2.65934,7.54413,0,10,0,-10\n0,2.03385,8.11729,0,10,0,-10\n0,8.20795,0.80348,0,10,0,-10\n0,7.21101,1.717,0,10,0,-10\n0,6.58551,2.29016,0,10,0,-10\n0,5.17094,3.58638,0,10,0,-10\n0,4.174,4.49991,0,10,0,-10\n0,3.5485,5.07307,0,10,0,-10\n0,2.13393,6.36929,0,10,0,-10\n0,1.13699,7.28282,0,10,0,-10\n0,0.51149,7.85597,0,10,0,-10\n0,6.68559,0.54216,0,10,0,-10\n0,5.68865,1.45569,0,10,0,-10\n0,5.06316,2.02885,0,10,0,-10\n0,3.53626,3.22649,0,10,0,-10\n0,2.65164,4.23859,0,10,0,-10\n0,2.02615,4.81175,0,10,0,-10\n0,0.61157,6.10797,0,10,0,-10\n0,5.16324,0.28085,0,10,0,-10\n0,4.1663,1.19437,0,10,0,-10\n0,3.54081,1.76753,0,10,0,-10\n0,2.12623,3.06375,0,10,0,-10\n0,1.12929,3.97728,0,10,0,-10\n0,0.5038,4.55044,0,10,0,-10\n0,3.64089,0.01953,0,10,0,-10\n0,2.64395,0.93306,0,10,0,-10\n0,2.01845,1.50622,0,10,0,-10\n0,0.60388,2.80244,0,10,0,-10\n0,1.12159,0.67174,0,10,0,-10\n0,0.4961,1.2449,0,10,0,-10\n0,9.15644,8.35141,0,10,0,-10\n0,8.31335,8.05964,0,10,0,-10\n0,7.76295,8.41028,0,10,0,-10\n0,8.6371,7.02451,0,10,0,-10\n0,6.91985,8.11852,0,10,0,-10\n0,6.36945,8.46916,0,10,0,-10\n0,7.2436,7.08339,0,10,0,-10\n0,5.52636,8.17739,0,10,0,-10\n0,4.97596,8.52804,0,10,0,-10\n0,8.67916,5.33996,0,10,0,-10\n0,8.12876,5.69061,0,10,0,-10\n0,5.85011,7.14227,0,10,0,-10\n0,4.13287,8.23627,0,10,0,-10\n0,3.58247,8.58691,0,10,0,-10\n0,9.00291,4.30484,0,10,0,-10\n0,7.28566,5.39884,0,10,0,-10\n0,6.73527,5.74948,0,10,0,-10\n0,4.45662,7.20114,0,10,0,-10\n0,2.73937,8.29515,0,10,0,-10\n0,2.18897,8.64579,0,10,0,-10\n0,7.60942,4.36371,0,10,0,-10\n0,5.89217,5.45772,0,10,0,-10\n0,5.34177,5.80836,0,10,0,-10\n0,3.06312,7.26002,0,10,0,-10\n0,1.34588,8.35403,0,10,0,-10\n0,0.79548,8.70467,0,10,0,-10\n0,9.04497,2.62029,0,10,0,-10\n0,8.49457,2.97093,0,10,0,-10\n0,6.21592,4.42259,0,10,0,-10\n0,4.49868,5.5166,0,10,0,-10\n0,3.94828,5.86724,0,10,0,-10\n0,1.66963,7.3189,0,10,0,-10\n0,9.36872,1.58516,0,10,0,-10\n0,7.65148,2.67917,0,10,0,-10\n0,7.10108,3.02981,0,10,0,-10\n0,4.82243,4.48147,0,10,0,-10\n0,3.10518,5.57547,0,10,0,-10\n0,2.55479,5.92612,0,10,0,-10\n0,0.27613,7.37778,0,10,0,-10\n0,7.97523,1.64404,0,10,0,-10\n0,6.25798,2.73804,0,10,0,-10\n0,5.70758,3.08869,0,10,0,-10\n0,3.42893,4.54035,0,10,0,-10\n0,1.71169,5.63435,0,10,0,-10\n0,1.16129,5.98499,0,10,0,-10\n0,8.86038,0.25125,0,10,0,-10\n0,6.58173,1.70292,0,10,0,-10\n0,4.86449,2.79692,0,10,0,-10\n0,4.31409,3.14756,0,10,0,-10\n0,2.03544,4.59922,0,10,0,-10\n0,0.3182,5.69323,0,10,0,-10\n0,7.46689,0.31013,0,10,0,-10\n0,5.18824,1.76179,0,10,0,-10\n0,3.471,2.8558,0,10,0,-10\n0,2.9206,3.20644,0,10,0,-10\n0,0.64195,4.6581,0,10,0,-10\n0,6.6238,0.01837,0,10,0,-10\n0,6.0734,0.36901,0,10,0,-10\n0,3.79475,1.82067,0,10,0,-10\n0,2.0775,2.91468,0,10,0,-10\n0,1.5271,3.26532,0,10,0,-10\n0,5.2303,0.07724,0,10,0,-10\n0,4.6799,0.42789,0,10,0,-10\n0,2.40125,1.87955,0,10,0,-10\n0,0.68401,2.97355,0,10,0,-10\n0,0.13361,3.3242,0,10,0,-10\n0,3.83681,0.13612,0,10,0,-10\n0,3.28641,0.48676,0,10,0,-10\n0,1.00776,1.93842,0,10,0,-10\n0,2.44331,0.195,0,10,0,-10\n0,1.89292,0.54564,0,10,0,-10\n0,1.04982,0.25388,0,10,0,-10\n0,0.49942,0.60452,0,10,0,-10\n0,6.42555,9.30607,0,10,0,-10\n0,4.77695,9.08903,0,10,0,-10\n0,3.7883,8.95887,0,10,0,-10\n0,3.13481,8.87284,0,10,0,-10\n0,1.48621,8.6558,0,10,0,-10\n0,0.49757,8.52564,0,10,0,-10\n0,9.02957,8.70973,0,10,0,-10\n0,7.38097,8.49269,0,10,0,-10\n0,6.39232,8.36253,0,10,0,-10\n0,5.73883,8.2765,0,10,0,-10\n0,4.09023,8.05946,0,10,0,-10\n0,3.10158,7.9293,0,10,0,-10\n0,2.4481,7.84327,0,10,0,-10\n0,0.79949,7.62622,0,10,0,-10\n0,8.99634,7.76619,0,10,0,-10\n0,8.34285,7.68016,0,10,0,-10\n0,6.69425,7.46312,0,10,0,-10\n0,5.7056,7.33296,0,10,0,-10\n0,5.05211,7.24692,0,10,0,-10\n0,3.40351,7.02988,0,10,0,-10\n0,2.41487,6.89972,0,10,0,-10\n0,1.76138,6.81369,0,10,0,-10\n0,0.11277,6.59665,0,10,0,-10\n0,9.29827,6.86677,0,10,0,-10\n0,8.30962,6.73662,0,10,0,-10\n0,7.65613,6.65058,0,10,0,-10\n0,6.00753,6.43354,0,10,0,-10\n0,5.01888,6.30338,0,10,0,-10\n0,4.3654,6.21735,0,10,0,-10\n0,2.71679,6.00031,0,10,0,-10\n0,1.72815,5.87015,0,10,0,-10\n0,1.07466,5.78412,0,10,0,-10\n0,8.61155,5.8372,0,10,0,-10\n0,7.6229,5.70704,0,10,0,-10\n0,6.96941,5.62101,0,10,0,-10\n0,5.32081,5.40397,0,10,0,-10\n0,4.33217,5.27381,0,10,0,-10\n0,3.67868,5.18777,0,10,0,-10\n0,2.03007,4.97073,0,10,0,-10\n0,1.04143,4.84057,0,10,0,-10\n0,0.38794,4.75454,0,10,0,-10\n0,7.92483,4.80762,0,10,0,-10\n0,6.93618,4.67747,0,10,0,-10\n0,6.2827,4.59143,0,10,0,-10\n0,4.63409,4.37439,0,10,0,-10\n0,3.64545,4.24423,0,10,0,-10\n0,2.99196,4.1582,0,10,0,-10\n0,1.34336,3.94116,0,10,0,-10\n0,0.35471,3.811,0,10,0,-10\n0,8.88671,3.99509,0,10,0,-10\n0,7.23811,3.77805,0,10,0,-10\n0,6.24947,3.64789,0,10,0,-10\n0,5.59598,3.56186,0,10,0,-10\n0,3.94737,3.34482,0,10,0,-10\n0,2.95873,3.21466,0,10,0,-10\n0,2.30524,3.12862,0,10,0,-10\n0,0.65664,2.91158,0,10,0,-10\n0,8.85348,3.05155,0,10,0,-10\n0,8.19999,2.96552,0,10,0,-10\n0,6.55139,2.74847,0,10,0,-10\n0,5.56275,2.61832,0,10,0,-10\n0,4.90926,2.53228,0,10,0,-10\n0,3.26065,2.31524,0,10,0,-10\n0,2.27201,2.18508,0,10,0,-10\n0,1.61852,2.09905,0,10,0,-10\n0,9.15541,2.15213,0,10,0,-10\n0,8.16676,2.02197,0,10,0,-10\n0,7.51328,1.93594,0,10,0,-10\n0,5.86467,1.7189,0,10,0,-10\n0,4.87603,1.58874,0,10,0,-10\n0,4.22254,1.50271,0,10,0,-10\n0,2.57394,1.28567,0,10,0,-10\n0,1.58529,1.15551,0,10,0,-10\n0,0.9318,1.06947,0,10,0,-10\n0,8.46869,1.12256,0,10,0,-10\n0,7.48005,0.9924,0,10,0,-10\n0,6.82656,0.90637,0,10,0,-10\n0,5.17795,0.68932,0,10,0,-10\n0,4.18931,0.55917,0,10,0,-10\n0,3.53582,0.47313,0,10,0,-10\n0,1.88722,0.25609,0,10,0,-10\n0,0.89857,0.12593,0,10,0,-10\n0,0.24508,0.0399,0,10,0,-10\n0,7.78197,0.09298,0,10,0,-10\n0,1.25458,8.906,0,10,0,-10\n0,2.59486,9.0898,0,10,0,-10\n0,1.22284,8.03701,0,10,0,-10\n0,3.91339,9.25692,0,10,0,-10\n0,2.56312,8.22081,0,10,0,-10\n0,1.19109,7.16803,0,10,0,-10\n0,3.88165,8.38793,0,10,0,-10\n0,2.53137,7.35183,0,10,0,-10\n0,1.15935,6.29904,0,10,0,-10\n0,5.23746,8.58365,0,10,0,-10\n0,3.84991,7.51894,0,10,0,-10\n0,2.49963,6.48284,0,10,0,-10\n0,1.12761,5.43005,0,10,0,-10\n0,6.57774,8.76745,0,10,0,-10\n0,5.20572,7.71466,0,10,0,-10\n0,3.81816,6.64995,0,10,0,-10\n0,2.46789,5.61385,0,10,0,-10\n0,1.09587,4.56106,0,10,0,-10\n0,7.89627,8.93456,0,10,0,-10\n0,6.546,7.89846,0,10,0,-10\n0,5.17398,6.84567,0,10,0,-10\n0,3.78642,5.78096,0,10,0,-10\n0,2.43615,4.74486,0,10,0,-10\n0,1.06413,3.69207,0,10,0,-10\n0,9.25208,9.13028,0,10,0,-10\n0,7.86453,8.06557,0,10,0,-10\n0,6.51425,7.02947,0,10,0,-10\n0,5.14223,5.97668,0,10,0,-10\n0,3.75468,4.91198,0,10,0,-10\n0,2.4044,3.87587,0,10,0,-10\n0,1.03238,2.82308,0,10,0,-10\n0,9.22034,8.26129,0,10,0,-10\n0,7.83279,7.19659,0,10,0,-10\n0,6.48251,6.16048,0,10,0,-10\n0,5.11049,5.10769,0,10,0,-10\n0,3.72294,4.04299,0,10,0,-10\n0,2.37266,3.00688,0,10,0,-10\n0,1.00064,1.9541,0,10,0,-10\n0,9.1886,7.3923,0,10,0,-10\n0,7.80105,6.3276,0,10,0,-10\n0,6.45077,5.29149,0,10,0,-10\n0,5.07875,4.23871,0,10,0,-10\n0,3.6912,3.174,0,10,0,-10\n0,2.34092,2.1379,0,10,0,-10\n0,0.9689,1.08511,0,10,0,-10\n0,9.15686,6.52332,0,10,0,-10\n0,7.7693,5.45861,0,10,0,-10\n0,6.41903,4.42251,0,10,0,-10\n0,5.04701,3.36972,0,10,0,-10\n0,2.30918,1.26891,0,10,0,-10\n0,0.93716,0.21612,0,10,0,-10\n0,9.12511,5.65433,0,10,0,-10\n0,7.73756,4.58962,0,10,0,-10\n0,6.38729,3.55352,0,10,0,-10\n0,5.01527,2.50073,0,10,0,-10\n0,3.62771,1.43602,0,10,0,-10\n0,2.27744,0.39992,0,10,0,-10\n0,9.09337,4.78534,0,10,0,-10\n0,7.70582,3.72063,0,10,0,-10\n0,6.35554,2.68453,0,10,0,-10\n0,4.98352,1.63174,0,10,0,-10\n0,3.59597,0.56703,0,10,0,-10\n0,9.06163,3.91635,0,10,0,-10\n0,7.67408,2.85164,0,10,0,-10\n0,6.3238,1.81554,0,10,0,-10\n0,4.95178,0.76275,0,10,0,-10\n0,9.02989,3.04736,0,10,0,-10\n0,7.64234,1.98266,0,10,0,-10\n0,6.29206,0.94655,0,10,0,-10\n0,8.99815,2.17837,0,10,0,-10\n0,7.61059,1.11367,0,10,0,-10\n0,6.26032,0.07756,0,10,0,-10\n0,8.9664,1.30939,0,10,0,-10\n0,7.57885,0.24468,0,10,0,-10\n0,8.93466,0.4404,0,10,0,-10\n206.565051,10,0.6,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,9.9,0.4,8.9442719,4.472136,0.2236068,-22.137073\n315,9.8,0.5,7.0710678,7.0710678,0.1414214,-14.0007143\n206.565051,9.7,5.4,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,9.6,5.2,8.9442719,4.472136,0.2236068,-22.137073\n315,9.5,5.3,7.0710678,7.0710678,0.1414214,-14.0007143\n153.434949,10,7.2,8.9442719,4.472136,0.2236068,-22.137073\n288.434949,9.9,7.5,22.1359436,3.1622777,0.3162278,-31.3065488\n63.434949,9.8,7.3,8.9442719,4.472136,0.2236068,-22.137073\n135,9.7,9.3,7.0710678,7.0710678,0.1414214,-14.0007143\n270,9.7,9.5,0,10,0.2,-9.8\n45,9.6,9.4,7.0710678,7.0710678,0.1414214,-14.0007143\n0,7.7,9.6,0,10,0.2,-9.8\n270,7.2,9.4,0,10,0.2,-9.8\n26.565051,7,9.3,13.4164079,4.472136,0.2236068,-22.137073\n0,9.50621,9.4965,0,10,0,-10\n0,9.74569,7.67586,0,10,0,-10\n0,9.63792,6.11833,0,10,0,-10\n0,9.738,4.37033,0,10,0,-10\n0,9.63022,2.81279,0,10,0,-10\n0,9.7303,1.06479,0,10,0,-10\n0,9.70684,8.00076,0,10,0,-10\n0,9.52225,5.63173,0,10,0,-10\n0,9.88807,2.91205,0,10,0,-10\n0,8.06768,9.52227,0,10,0,-10\n0,7.07904,9.39211,0,10,0,-10\n0,9.68306,8.79577,0,10,0,-10\n0,9.98498,7.89635,0,10,0,-10\n0,9.57343,5.02467,0,10,0,-10\n0,9.5402,4.08112,0,10,0,-10\n0,9.84213,3.18171,0,10,0,-10\n0,9.43058,0.31003,0,10,0,-10\n243.434949,7.8,9.8,8.9442719,4.472136,0.2236068,-22.137073\n116.565051,7.9,9.6,13.4164079,4.472136,0.2236068,-22.137073\n180,6,9.7,0,10,0.2,-9.8\n270,6,9.9,0,10,0.2,-9.8\n45,5.8,9.7,7.0710678,7.0710678,0.2828427,-13.8592929\n296.565051,4.1,10,13.4164079,4.472136,0.2236068,-22.137073\n63.434949,4,9.8,8.9442719,4.472136,0.2236068,-22.137073\n180,4.2,9.8,0,10,0.2,-9.8\n135,3.4,9.4,7.0710678,7.0710678,0.1414214,-14.0007143\n243.434949,3.5,9.6,8.9442719,4.472136,0.2236068,-22.137073\n26.565051,3.3,9.5,13.4164079,4.472136,0.2236068,-22.137073\n116.565051,3.1,9.3,13.4164079,4.472136,0.2236068,-22.137073\n225,3,9.5,7.0710678,7.0710678,0.2828427,-13.8592929\n45,0,9.7,7.0710678,7.0710678,0.2828427,-13.8592929\n161.565051,0.3,9.6,9.486833,3.1622777,0.3162278,-31.3065488\n288.434949,0.2,9.9,22.1359436,3.1622777,0.3162278,-31.3065488\n0,3.66398,9.93614,0,10,0,-10\n0,2.14162,9.67482,0,10,0,-10\n0,0.61927,9.41351,0,10,0,-10\n0,6.87779,9.80307,0,10,0,-10\n0,5.4843,9.86194,0,10,0,-10\n0,2.69731,9.9797,0,10,0,-10\n0,4.47502,9.98845,0,10,0,-10\n0,3.82153,9.90242,0,10,0,-10\n0,2.17293,9.68537,0,10,0,-10\n0,1.18429,9.55522,0,10,0,-10\n0,0.5308,9.46918,0,10,0,-10\n0,1.28632,9.77499,0,10,0,-10\n0,2.6266,9.95879,0,10,0,-10\n0,5.2692,9.45264,0,10,0,-10\n0,6.60948,9.63644,0,10,0,-10\n0,7.92801,9.80355,0,10,0,-10\n0,9.66478,9.68531,0,10,0,-10\n0,8.27128,9.74419,0,10,0,-10\n0,9.71629,9.73931,0,10,0,-10\n0,9.28383,9.99927,0,10,0,-10\n"),!1),_f(wf.ParsePatFile("\n*AR-CONC,AR-CONC\n50, 0,0, 4.12975034,-5.89789472, .75,-8.25\n355, 0,0, -2.03781207,7.3723684, .6,-6.6\n100.4514, .5977168,-.0522934, 5.7305871,-6.9397673, .6374019,-7.01142112\n46.1842, 0,2, 6.19462551,-8.84684208, 1.125,-12.375\n96.6356, .88936745,1.86206693, 8.59588071,-10.40965104, .95610288,-10.51713\n351.1842, 0,2, 7.74328189,11.0585526, .9,-9.9\n21, 1,1.5, 4.12975034,-5.89789472, .75,-8.25\n326, 1,1.5, -2.03781207,7.3723684, .6,-6.6\n71.4514, 1.49742233,1.16448394, 5.7305871,-6.9397673, .6374019,-7.01142112\n37.5, 0,0, 2.123,2.567, 0,-6.52,0,-6.7,0,-6.625\n7.5, 0,0, 3.123,3.567, 0,-3.82,0,-6.37,0,-2.525\n-32.5, -2.23,0, 4.6234,2.678, 0,-2.5,0,-7.8,0,-10.35\n-42.5, -3.23,0, 3.6234,4.678, 0,-3.25,0,-5.18,0,-7.35\n"),!1),_f(wf.ParsePatFile("\n*AR-HBONE,AR-HBONE\n45, 0,0, 4,4, 12,-4\n135, 2.82842713,2.82842713, 4,-4, 12,-4\n"),!1),_f(wf.ParsePatFile("\n*AR-PARQ1,AR-PARQ1\n90, 0,0, 12,12, 12,-12\n90, 2,0, 12,12, 12,-12\n90, 4,0, 12,12, 12,-12\n90, 6,0, 12,12, 12,-12\n90, 8,0, 12,12, 12,-12\n90, 10,0, 12,12, 12,-12\n90, 12,0, 12,12, 12,-12\n0, 0,12, 12,-12, 12,-12\n0, 0,14, 12,-12, 12,-12\n0, 0,16, 12,-12, 12,-12\n0, 0,18, 12,-12, 12,-12\n0, 0,20, 12,-12, 12,-12\n0, 0,22, 12,-12, 12,-12\n0, 0,24, 12,-12, 12,-12\n"),!1),_f(wf.ParsePatFile("\n*AR-RROOF,AR-RROOF\n0, 0,0, 2.2,1, 15,-2,5,-1\n0, 1.33,.5, -1,1.33, 3,-.33,6,-.75\n0, .5,.85, 5.2,.67, 8,-1.4,4,-1\n"),!1),_f(wf.ParsePatFile("\n*AR-RSHKE,AR-RSHKE\n0, 0,0, 25.5,12, 6,-5,7,-3,9,-4\n0, 6,.5, 25.5,12, 5,-19,4,-6\n0, 18,-.75, 25.5,12, 3,-31\n90, 0,0, 12,8.5, 11.5,-36.5\n90, 6,0, 12,8.5, 11.25,-36.75\n90, 11,0, 12,8.5, 10.5,-37.5\n90, 18,-.75, 12,8.5, 11.5,-36.5\n90, 21,-.75, 12,8.5, 11.5,-36.5\n90, 30,0, 12,8.5, 11,-37\n"),!1),_f(wf.ParsePatFile("\n*AR-SAND,AR-SAND\n37.5, 0,0, 1.123,1.567, 0,-1.52,0,-1.7,0,-1.625\n7.5, 0,0, 2.123,2.567, 0,-.82,0,-1.37,0,-.525\n-32.5, -1.23,0, 2.6234,1.678, 0,-.5,0,-1.8,0,-2.35\n-42.5, -1.23,0, 1.6234,2.678, 0,-.25,0,-1.18,0,-1.35\n"),!1),_f(wf.ParsePatFile("\n*BARBWIRE,BARBWIRE\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n315,0.3,0.56,0.70710678,0.70710678,0.01414214,-1.40007143\n288.434949,0.26,0.68,2.21359436,0.31622777,0.12649111,-3.03578655\n158.198591,0.31,0.66,3.15682075,0.18569534,0.05385165,-5.33131316\n116.565051,0.32,0.64,1.34164079,0.4472136,0.02236068,-2.2137073\n116.565051,0.34,0.6,1.34164079,0.4472136,0.04472136,-2.19134662\n111.801409,0.44,0.39,2.22834406,0.18569534,0.05385165,-5.33131316\n156.801409,0.51,0.36,5.38356375,0.13130643,0.07615773,-7.53961537\n289.653824,0.46,0.5,11.70450662,0.06726728,0.14866069,-14.71740806\n194.036243,0.31,0.36,3.15296313,0.24253563,0.04123106,-4.08187457\n251.565051,0.32,0.39,0.9486833,0.31622777,0.03162278,-3.13065488\n254.054604,0.34,0.46,4.12081692,0.13736056,0.0728011,-7.20730879\n74.744881,0.34,0.46,4.12217269,0.0877058,0.11401754,-11.28773671\n135,0.36,0.44,0.70710678,0.70710678,0.02828427,-1.38592929\n180,0.39,0.44,0,1,0.03,-0.97\n270,0.39,0.45,0,1,0.01,-0.99\n74.054604,0.39,0.45,4.12081692,0.13736056,0.1456022,-7.13450769\n161.565051,0.42,0.44,0.9486833,0.31622777,0.03162278,-3.13065488\n198.434949,0.45,0.45,2.21359436,0.31622777,0.03162278,-3.13065488\n258.231711,0.5,0.69,5.09885635,0.04079085,0.24515301,-24.27014833\n21.801409,0.45,0.67,2.22834406,0.18569534,0.05385165,-5.33131316\n75.963757,0.43,0.59,0.9701425,0.24253563,0.08246211,-4.04064351\n341.565051,0.4,0.6,0.9486833,0.31622777,0.03162278,-3.13065488\n45,0.37,0.57,0.70710678,0.70710678,0.04242641,-1.37178716\n288.434949,0.36,0.6,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.34,0.6,0,1,0.02,-0.98\n26.565051,0.32,0.59,1.34164079,0.4472136,0.02236068,-2.2137073\n78.231711,0.27,0.35,5.09885635,0.04079085,0.24515301,-24.27014833\n4.085617,0.78,0.48,13.03821015,0.07124705,0.14035669,-13.89531216\n0,0.69,0.48,0,1,0.09,-0.91\n354.289407,0.59,0.49,0.99503719,0.09950372,0.10049876,-9.94937686\n356.185925,0.47,0.55,0.99778516,0.06651901,0.15033296,-14.88296341\n351.469234,0.8,0.55,7.07089492,0.04944682,0.20223748,-20.02151093\n0,0.66,0.55,0,1,0.14,-0.86\n14.036243,0.46,0.5,3.15296313,0.24253563,0.20615528,-3.91695034\n189.865807,0.7,0.51,17.26262336,0.04283529,0.23345235,-23.11178271\n180,0.8,0.51,0,1,0.1,-0.9\n171.469234,1,0.48,7.07089492,0.04944682,0.20223748,-20.02151093\n186.115504,1,0.56,9.05531551,0.03551104,0.15644586,-28.00380982\n5.52754,0.13777778,0.53333333,10.04982433,0.03210806,0.17302679,-30.97179621\n3.691386,0,0.48,15.03326191,0.03219114,0.1515339,-30.91291524\n348.310631,0,0.52,5.0989077,0.0337676,0.29614186,-29.31804393\n348.690068,0,0.56,0.98058068,0.19611614,0.30594117,-4.79307834\n"),!1),_f(wf.ParsePatFile("\n*BLOCKS-01,BLOCKS-01 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n270,0.31,0.66,1,1,0.22,-0.78\n180,0.08,0.09,0,1,0.57,-0.43\n270,0.08,0.09,1,1,0.21,-0.79\n180,0.08,0.88,0,1,0.57,-0.43\n270,0.51,0.09,1,1,0.21,-0.79\n270,0.89,0.32,1,1,0.2,-0.8\n0,0.49,0.32,0,1,0.4,-0.6\n90,0.49,0.12,1,1,0.2,-0.8\n180,0.89,0.12,0,1,0.4,-0.6\n270,0.69,0.84,1,1,0.48,-0.52\n0,0.48,0.84,0,1,0.21,-0.79\n90,0.48,0.36,1,1,0.48,-0.52\n180,0.69,0.36,0,1,0.21,-0.79\n270,0.12,0.03,1,1,0.33,-0.67\n0,0.12,0.7,0,1,0.32,-0.68\n270,0.44,0.03,1,1,0.33,-0.67\n0,0.12,0.03,0,1,0.32,-0.68\n270,0.45,0.67,1,1,0.24,-0.76\n0,0.36,0.67,0,1,0.09,-0.91\n90,0.36,0.43,1,1,0.24,-0.76\n180,0.45,0.43,0,1,0.09,-0.91\n270,0.45,0.4,1,1,0.33,-0.67\n0,0.11,0.4,0,1,0.34,-0.66\n90,0.11,0.07,1,1,0.33,-0.67\n180,0.45,0.07,0,1,0.34,-0.66\n270,0.89,0.41,1,1,0.06,-0.94\n0,0.73,0.41,0,1,0.16,-0.84\n90,0.73,0.35,1,1,0.06,-0.94\n180,0.89,0.35,0,1,0.16,-0.84\n180,0.07,0.4,0,1,0.14,-0.86\n270,0.93,0.4,1,1,0.27,-0.73\n180,0.07,0.13,0,1,0.14,-0.86\n270,0.07,0.4,1,1,0.27,-0.73\n180,0.08,0.81,0,1,0.34,-0.66\n270,0.74,0.81,1,1,0.1,-0.9\n180,0.08,0.71,0,1,0.34,-0.66\n270,0.08,0.81,1,1,0.1,-0.9\n180,0.31,0.66,0,1,0.59,-0.41\n270,0.72,0.66,1,1,0.22,-0.78\n180,0.31,0.44,0,1,0.59,-0.41\n"),!1),_f(wf.ParsePatFile("\n*BLOCKS-02,BLOCKS-02 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.32,0.18,0,1,0.49,-0.51\n270,0.32,0.55,1,1,0.37,-0.63\n0,0.37,0.96,0,1,0.42,-0.58\n0,0.17,0.98,0,1,0.17,-0.83\n90,0.82,0,1,1,0.15,-0.85\n180,0.92,0,0,1,0.1,-0.9\n180,0.32,0.55,0,1,0.49,-0.51\n270,0.83,0.55,1,1,0.37,-0.63\n180,0.13,0.8,0,1,0.18,-0.82\n90,0.14,0.59,1,1,0.17,-0.83\n270,0.13,0.15,1,1,0.35,-0.65\n180,0.71,0.59,0,1,0.57,-0.43\n270,0.92,0.15,1,1,0.15,-0.85\n0,0.82,0.15,0,1,0.1,-0.9\n270,0.71,0.76,1,1,0.17,-0.83\n0,0.14,0.76,0,1,0.57,-0.43\n180,0.08,0.59,0,1,0.32,-0.68\n270,0.08,0.76,1,1,0.17,-0.83\n180,0.13,0.15,0,1,0.18,-0.82\n270,0.95,0.15,1,1,0.35,-0.65\n90,0.18,0.8,1,1,0.13,-0.87\n180,0.91,0.8,0,1,0.73,-0.27\n180,0.08,0.76,0,1,0.32,-0.68\n270,0.76,0.76,1,1,0.17,-0.83\n270,0.34,0.15,1,1,0.17,-0.83\n0,0.17,0.15,0,1,0.17,-0.83\n270,0.91,0.93,1,1,0.13,-0.87\n0,0.18,0.93,0,1,0.73,-0.27\n0,0.37,0.55,0,1,0.42,-0.58\n270,0.37,0.55,1,1,0.59,-0.41\n270,0.17,0.15,1,1,0.17,-0.83\n270,0.79,0.55,1,1,0.59,-0.41\n"),!1),_f(wf.ParsePatFile("\n*BOXJOIN-01,BOXJOIN-01 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n90,0.15000001,0.15,1,1,0.7,-0.3\n0,0.15000001,0.85,0,1,0.7,-0.3\n270,0.45000001,0.15,1,1,0.3,-0.7\n180,0.15000001,0.45,0,1,0.3,-0.7\n270,0.55000001,0.15,1,1,0.3,-0.7\n180,0.85000001,0.15,0,1,0.7,-0.3\n270,0.85000001,0.85,1,1,0.7,-0.3\n180,0.15000001,0.55,0,1,0.3,-0.7\n"),!1),_f(wf.ParsePatFile("\n*BOXJOIN-02,BOXJOIN-02 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n90,0.15000001,0.55,1,1,0.3,-0.7\n270,0.85000001,0.85,1,1,0.3,-0.7\n0,0.55000001,0.85,0,1,0.3,-0.7\n180,0.15000001,0.55,0,1,0.3,-0.7\n90,0.15000001,0.15,1,1,0.3,-0.7\n180,0.45000001,0.15,0,1,0.3,-0.7\n180,0.15000001,0.45,0,1,0.3,-0.7\n180,0.85000001,0.15,0,1,0.3,-0.7\n270,0.85000001,0.45,1,1,0.3,-0.7\n270,0.45000001,0.15,1,1,0.3,-0.7\n270,0.55000001,0.15,1,1,0.3,-0.7\n0,0.15000001,0.85,0,1,0.3,-0.7\n"),!1),_f(wf.ParsePatFile("\n*BOX,BOX\n90, 0,0, 0,1\n90, .25,0, 0,1\n0, 0,0, 0,1, -.25,.25\n0, 0,.25, 0,1, -.25,.25\n0, 0,.5, 0,1, .25,-.25\n0, 0,.75, 0,1, .25,-.25\n90, .5,0, 0,1, .25,-.25\n90, .75,0, 0,1, .25,-.25\n"),!1),_f(wf.ParsePatFile("\n*BOX-OVERLAP,BOX-OVERLAP verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.2,0.7,0,1,0.4,-0.6\n90,0.2,0.2,1,1,0.6,-0.4\n270,0.3,0.2,1,1,0.4,-0.6\n180,0.2,0.3,0,1,0.4,-0.6\n0,0.2,0.8,0,1,0.6,-0.4\n180,0.8,0.2,0,1,0.6,-0.4\n270,0.8,0.8,1,1,0.6,-0.4\n270,0.7,0.2,1,1,0.4,-0.6\n"),!1),_f(wf.ParsePatFile("\n*BRASS,BRASS\n0, 0,0, 0,.25\n0, 0,.125, 0,.25, .125,-.0625\n"),!1),_f(wf.ParsePatFile("\n*BRICK,BRICK\n0, 0,0, 0,.25\n90, 0,0, 0,.5, .25,-.25\n90, .25,0, 0,.5, -.25,.25\n"),!1),_f(wf.ParsePatFile("\n*BRSTONE,BRSTONE\n0, 0,0, 0,.33\n90, .9,0, .33,.5, .33,-.33\n90, .8,0, .33,.5, .33,-.33\n0, .9,.055, .5,.33, -.9,.1\n0, .9,.11, .5,.33, -.9,.1\n0, .9,.165, .5,.33, -.9,.1\n0, .9,.22, .5,.33, -.9,.1\n0, .9,.275, .5,.33, -.9,.1\n"),!1),_f(wf.ParsePatFile("\n*BUBBLES-01,BUBBLES-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n0,0.058964,0.016739,0,1,0,-1\n0,0.062236,0.033193,0,1,0,-1\n0,0.067629,0.049078,0,1,0,-1\n0,0.075048,0.064123,0,1,0,-1\n0,0.084368,0.078071,0,1,0,-1\n0,0.095429,0.090684,0,1,0,-1\n0,0.108041,0.101745,0,1,0,-1\n0,0.12199,0.111065,0,1,0,-1\n0,0.137035,0.118484,0,1,0,-1\n0,0.15292,0.123876,0,1,0,-1\n0,0.169373,0.127149,0,1,0,-1\n0,0.186113,0.128246,0,1,0,-1\n0,0.202852,0.127149,0,1,0,-1\n0,0.219305,0.123876,0,1,0,-1\n0,0.23519,0.118484,0,1,0,-1\n0,0.250236,0.111065,0,1,0,-1\n0,0.264184,0.101745,0,1,0,-1\n0,0.276796,0.090684,0,1,0,-1\n0,0.287857,0.078071,0,1,0,-1\n0,0.297177,0.064123,0,1,0,-1\n0,0.304597,0.049078,0,1,0,-1\n0,0.309989,0.033193,0,1,0,-1\n0,0.313262,0.016739,0,1,0,-1\n0,0.120008,0.220248,0,1,0,-1\n0,0.117478,0.203192,0,1,0,-1\n0,0.113288,0.186467,0,1,0,-1\n0,0.10748,0.170233,0,1,0,-1\n0,0.100108,0.154647,0,1,0,-1\n0,0.091244,0.139858,0,1,0,-1\n0,0.080973,0.126009,0,1,0,-1\n0,0.069394,0.113234,0,1,0,-1\n0,0.056618,0.101655,0,1,0,-1\n0,0.04277,0.091384,0,1,0,-1\n0,0.027981,0.08252,0,1,0,-1\n0,0.012394,0.075148,0,1,0,-1\n0,0.012394,0.39979,0,1,0,-1\n0,0.027981,0.392418,0,1,0,-1\n0,0.04277,0.383554,0,1,0,-1\n0,0.056618,0.373283,0,1,0,-1\n0,0.069394,0.361704,0,1,0,-1\n0,0.080973,0.348929,0,1,0,-1\n0,0.091244,0.33508,0,1,0,-1\n0,0.100108,0.320291,0,1,0,-1\n0,0.10748,0.304704,0,1,0,-1\n0,0.113288,0.28847,0,1,0,-1\n0,0.117478,0.271745,0,1,0,-1\n0,0.120008,0.25469,0,1,0,-1\n0,0.120854,0.237469,0,1,0,-1\n0,0.738076,0.372319,0,1,0,-1\n0,0.732613,0.356706,0,1,0,-1\n0,0.723812,0.3427,0,1,0,-1\n0,0.712116,0.331003,0,1,0,-1\n0,0.69811,0.322203,0,1,0,-1\n0,0.682497,0.316739,0,1,0,-1\n0,0.666059,0.314887,0,1,0,-1\n0,0.649622,0.316739,0,1,0,-1\n0,0.634009,0.322203,0,1,0,-1\n0,0.620003,0.331003,0,1,0,-1\n0,0.608306,0.3427,0,1,0,-1\n0,0.599506,0.356706,0,1,0,-1\n0,0.594042,0.372319,0,1,0,-1\n0,0.59219,0.388756,0,1,0,-1\n0,0.594042,0.405194,0,1,0,-1\n0,0.599506,0.420807,0,1,0,-1\n0,0.608306,0.434813,0,1,0,-1\n0,0.620003,0.44651,0,1,0,-1\n0,0.634009,0.45531,0,1,0,-1\n0,0.649622,0.460773,0,1,0,-1\n0,0.666059,0.462625,0,1,0,-1\n0,0.682497,0.460773,0,1,0,-1\n0,0.69811,0.45531,0,1,0,-1\n0,0.712116,0.44651,0,1,0,-1\n0,0.723812,0.434813,0,1,0,-1\n0,0.732613,0.420807,0,1,0,-1\n0,0.738076,0.405194,0,1,0,-1\n0,0.739928,0.388756,0,1,0,-1\n0,0.834916,0.831041,0,1,0,-1\n0,0.821448,0.840826,0,1,0,-1\n0,0.810309,0.853198,0,1,0,-1\n0,0.462763,0.750408,0,1,0,-1\n0,0.458683,0.734294,0,1,0,-1\n0,0.452005,0.71907,0,1,0,-1\n0,0.442913,0.705153,0,1,0,-1\n0,0.431654,0.692923,0,1,0,-1\n0,0.418536,0.682713,0,1,0,-1\n0,0.403916,0.674801,0,1,0,-1\n0,0.388193,0.669403,0,1,0,-1\n0,0.371796,0.666667,0,1,0,-1\n0,0.355172,0.666667,0,1,0,-1\n0,0.338776,0.669403,0,1,0,-1\n0,0.323053,0.674801,0,1,0,-1\n0,0.308433,0.682713,0,1,0,-1\n0,0.295314,0.692923,0,1,0,-1\n0,0.284056,0.705153,0,1,0,-1\n0,0.274963,0.71907,0,1,0,-1\n0,0.268286,0.734294,0,1,0,-1\n0,0.264205,0.750408,0,1,0,-1\n0,0.262832,0.766975,0,1,0,-1\n0,0.264205,0.783542,0,1,0,-1\n0,0.268286,0.799657,0,1,0,-1\n0,0.274963,0.81488,0,1,0,-1\n0,0.284056,0.828797,0,1,0,-1\n0,0.295314,0.841027,0,1,0,-1\n0,0.308433,0.851238,0,1,0,-1\n0,0.323053,0.85915,0,1,0,-1\n0,0.403916,0.85915,0,1,0,-1\n0,0.418536,0.851238,0,1,0,-1\n0,0.431654,0.841027,0,1,0,-1\n0,0.442913,0.828797,0,1,0,-1\n0,0.452005,0.81488,0,1,0,-1\n0,0.458683,0.799657,0,1,0,-1\n0,0.462763,0.783542,0,1,0,-1\n0,0.464136,0.766975,0,1,0,-1\n0,0.821196,0.648394,0,1,0,-1\n0,0.818556,0.631724,0,1,0,-1\n0,0.814188,0.615423,0,1,0,-1\n0,0.808139,0.599667,0,1,0,-1\n0,0.800477,0.584629,0,1,0,-1\n0,0.791286,0.570475,0,1,0,-1\n0,0.780665,0.557359,0,1,0,-1\n0,0.768731,0.545425,0,1,0,-1\n0,0.755615,0.534804,0,1,0,-1\n0,0.741461,0.525612,0,1,0,-1\n0,0.726423,0.51795,0,1,0,-1\n0,0.710667,0.511902,0,1,0,-1\n0,0.694365,0.507534,0,1,0,-1\n0,0.677696,0.504894,0,1,0,-1\n0,0.660842,0.504011,0,1,0,-1\n0,0.643989,0.504894,0,1,0,-1\n0,0.627319,0.507534,0,1,0,-1\n0,0.611018,0.511902,0,1,0,-1\n0,0.595262,0.51795,0,1,0,-1\n0,0.580224,0.525612,0,1,0,-1\n0,0.56607,0.534804,0,1,0,-1\n0,0.552954,0.545425,0,1,0,-1\n0,0.54102,0.557359,0,1,0,-1\n0,0.530399,0.570475,0,1,0,-1\n0,0.521207,0.584629,0,1,0,-1\n0,0.513545,0.599667,0,1,0,-1\n0,0.507497,0.615423,0,1,0,-1\n0,0.503129,0.631724,0,1,0,-1\n0,0.500489,0.648394,0,1,0,-1\n0,0.499606,0.665247,0,1,0,-1\n0,0.500489,0.682101,0,1,0,-1\n0,0.503129,0.69877,0,1,0,-1\n0,0.507497,0.715072,0,1,0,-1\n0,0.513545,0.730828,0,1,0,-1\n0,0.521207,0.745866,0,1,0,-1\n0,0.530399,0.76002,0,1,0,-1\n0,0.54102,0.773136,0,1,0,-1\n0,0.552954,0.785069,0,1,0,-1\n0,0.56607,0.795691,0,1,0,-1\n0,0.580224,0.804882,0,1,0,-1\n0,0.595262,0.812544,0,1,0,-1\n0,0.611018,0.818592,0,1,0,-1\n0,0.627319,0.822961,0,1,0,-1\n0,0.643989,0.825601,0,1,0,-1\n0,0.660842,0.826484,0,1,0,-1\n0,0.677696,0.825601,0,1,0,-1\n0,0.694365,0.822961,0,1,0,-1\n0,0.710667,0.818592,0,1,0,-1\n0,0.726423,0.812544,0,1,0,-1\n0,0.741461,0.804882,0,1,0,-1\n0,0.755615,0.795691,0,1,0,-1\n0,0.768731,0.785069,0,1,0,-1\n0,0.780665,0.773136,0,1,0,-1\n0,0.791286,0.76002,0,1,0,-1\n0,0.800477,0.745866,0,1,0,-1\n0,0.808139,0.730828,0,1,0,-1\n0,0.814188,0.715072,0,1,0,-1\n0,0.818556,0.69877,0,1,0,-1\n0,0.821196,0.682101,0,1,0,-1\n0,0.822079,0.665247,0,1,0,-1\n0,0.524311,0.381738,0,1,0,-1\n0,0.521577,0.364477,0,1,0,-1\n0,0.517054,0.347597,0,1,0,-1\n0,0.510791,0.331282,0,1,0,-1\n0,0.502858,0.315711,0,1,0,-1\n0,0.49334,0.301054,0,1,0,-1\n0,0.482342,0.287473,0,1,0,-1\n0,0.469984,0.275116,0,1,0,-1\n0,0.456403,0.264118,0,1,0,-1\n0,0.441747,0.2546,0,1,0,-1\n0,0.426175,0.246666,0,1,0,-1\n0,0.40986,0.240403,0,1,0,-1\n0,0.39298,0.23588,0,1,0,-1\n0,0.375719,0.233146,0,1,0,-1\n0,0.358267,0.232232,0,1,0,-1\n0,0.340816,0.233146,0,1,0,-1\n0,0.323555,0.23588,0,1,0,-1\n0,0.306674,0.240403,0,1,0,-1\n0,0.290359,0.246666,0,1,0,-1\n0,0.274788,0.2546,0,1,0,-1\n0,0.260132,0.264118,0,1,0,-1\n0,0.246551,0.275116,0,1,0,-1\n0,0.234193,0.287473,0,1,0,-1\n0,0.223195,0.301054,0,1,0,-1\n0,0.213677,0.315711,0,1,0,-1\n0,0.205743,0.331282,0,1,0,-1\n0,0.199481,0.347597,0,1,0,-1\n0,0.194958,0.364477,0,1,0,-1\n0,0.192224,0.381738,0,1,0,-1\n0,0.191309,0.39919,0,1,0,-1\n0,0.192224,0.416642,0,1,0,-1\n0,0.194958,0.433903,0,1,0,-1\n0,0.199481,0.450783,0,1,0,-1\n0,0.205743,0.467098,0,1,0,-1\n0,0.213677,0.482669,0,1,0,-1\n0,0.223195,0.497326,0,1,0,-1\n0,0.234193,0.510907,0,1,0,-1\n0,0.246551,0.523264,0,1,0,-1\n0,0.260132,0.534262,0,1,0,-1\n0,0.274788,0.54378,0,1,0,-1\n0,0.290359,0.551714,0,1,0,-1\n0,0.306674,0.557977,0,1,0,-1\n0,0.323555,0.5625,0,1,0,-1\n0,0.340816,0.565234,0,1,0,-1\n0,0.358267,0.566148,0,1,0,-1\n0,0.375719,0.565234,0,1,0,-1\n0,0.39298,0.5625,0,1,0,-1\n0,0.40986,0.557977,0,1,0,-1\n0,0.426175,0.551714,0,1,0,-1\n0,0.441747,0.54378,0,1,0,-1\n0,0.456403,0.534262,0,1,0,-1\n0,0.469984,0.523264,0,1,0,-1\n0,0.482342,0.510907,0,1,0,-1\n0,0.49334,0.497326,0,1,0,-1\n0,0.502858,0.482669,0,1,0,-1\n0,0.510791,0.467098,0,1,0,-1\n0,0.517054,0.450783,0,1,0,-1\n0,0.521577,0.433903,0,1,0,-1\n0,0.524311,0.416642,0,1,0,-1\n0,0.525226,0.39919,0,1,0,-1\n0,0.847548,0.091384,0,1,0,-1\n0,0.833699,0.101655,0,1,0,-1\n0,0.820923,0.113234,0,1,0,-1\n0,0.809345,0.126009,0,1,0,-1\n0,0.799074,0.139858,0,1,0,-1\n0,0.790209,0.154647,0,1,0,-1\n0,0.782838,0.170233,0,1,0,-1\n0,0.777029,0.186467,0,1,0,-1\n0,0.77284,0.203192,0,1,0,-1\n0,0.77031,0.220248,0,1,0,-1\n0,0.769464,0.237469,0,1,0,-1\n0,0.77031,0.25469,0,1,0,-1\n0,0.77284,0.271745,0,1,0,-1\n0,0.777029,0.28847,0,1,0,-1\n0,0.782838,0.304704,0,1,0,-1\n0,0.790209,0.320291,0,1,0,-1\n0,0.799074,0.33508,0,1,0,-1\n0,0.809345,0.348929,0,1,0,-1\n0,0.820923,0.361704,0,1,0,-1\n0,0.833699,0.373283,0,1,0,-1\n0,0.847548,0.383554,0,1,0,-1\n0,0.241252,0.63247,0,1,0,-1\n0,0.238633,0.614814,0,1,0,-1\n0,0.234297,0.5975,0,1,0,-1\n0,0.228283,0.580695,0,1,0,-1\n0,0.220652,0.56456,0,1,0,-1\n0,0.211476,0.54925,0,1,0,-1\n0,0.200843,0.534914,0,1,0,-1\n0,0.188857,0.521689,0,1,0,-1\n0,0.175632,0.509702,0,1,0,-1\n0,0.161296,0.49907,0,1,0,-1\n0,0.145986,0.489894,0,1,0,-1\n0,0.129851,0.482262,0,1,0,-1\n0,0.113046,0.476249,0,1,0,-1\n0,0.095732,0.471912,0,1,0,-1\n0,0.078076,0.469293,0,1,0,-1\n0,0.060249,0.468417,0,1,0,-1\n0,0.042421,0.469293,0,1,0,-1\n0,0.024766,0.471912,0,1,0,-1\n0,0.007452,0.476249,0,1,0,-1\n0,0.007452,0.824345,0,1,0,-1\n0,0.024766,0.828682,0,1,0,-1\n0,0.042421,0.831301,0,1,0,-1\n0,0.060249,0.832177,0,1,0,-1\n0,0.078076,0.831301,0,1,0,-1\n0,0.095732,0.828682,0,1,0,-1\n0,0.113046,0.824345,0,1,0,-1\n0,0.129851,0.818332,0,1,0,-1\n0,0.145986,0.8107,0,1,0,-1\n0,0.161296,0.801524,0,1,0,-1\n0,0.175632,0.790892,0,1,0,-1\n0,0.188857,0.778905,0,1,0,-1\n0,0.200843,0.76568,0,1,0,-1\n0,0.211476,0.751344,0,1,0,-1\n0,0.220652,0.736034,0,1,0,-1\n0,0.228283,0.719899,0,1,0,-1\n0,0.234297,0.703094,0,1,0,-1\n0,0.238633,0.68578,0,1,0,-1\n0,0.241252,0.668124,0,1,0,-1\n0,0.242128,0.650297,0,1,0,-1\n0,0.771442,0.048085,0,1,0,-1\n0,0.768672,0.029409,0,1,0,-1\n0,0.764084,0.011095,0,1,0,-1\n0,0.39588,0.011095,0,1,0,-1\n0,0.391292,0.029409,0,1,0,-1\n0,0.388522,0.048085,0,1,0,-1\n0,0.387595,0.066942,0,1,0,-1\n0,0.388522,0.085799,0,1,0,-1\n0,0.391292,0.104475,0,1,0,-1\n0,0.39588,0.122789,0,1,0,-1\n0,0.40224,0.140565,0,1,0,-1\n0,0.410312,0.157632,0,1,0,-1\n0,0.420018,0.173826,0,1,0,-1\n0,0.431265,0.18899,0,1,0,-1\n0,0.443944,0.20298,0,1,0,-1\n0,0.457933,0.215659,0,1,0,-1\n0,0.473098,0.226905,0,1,0,-1\n0,0.489292,0.236612,0,1,0,-1\n0,0.506359,0.244684,0,1,0,-1\n0,0.524135,0.251044,0,1,0,-1\n0,0.542449,0.255632,0,1,0,-1\n0,0.561125,0.258402,0,1,0,-1\n0,0.579982,0.259328,0,1,0,-1\n0,0.598839,0.258402,0,1,0,-1\n0,0.617515,0.255632,0,1,0,-1\n0,0.635829,0.251044,0,1,0,-1\n0,0.653605,0.244684,0,1,0,-1\n0,0.670672,0.236612,0,1,0,-1\n0,0.686866,0.226905,0,1,0,-1\n0,0.702031,0.215659,0,1,0,-1\n0,0.71602,0.20298,0,1,0,-1\n0,0.728699,0.18899,0,1,0,-1\n0,0.739945,0.173826,0,1,0,-1\n0,0.749652,0.157632,0,1,0,-1\n0,0.757724,0.140565,0,1,0,-1\n0,0.764084,0.122789,0,1,0,-1\n0,0.768672,0.104475,0,1,0,-1\n0,0.771442,0.085799,0,1,0,-1\n0,0.772368,0.066942,0,1,0,-1\n0,0.990646,0.482262,0,1,0,-1\n0,0.974511,0.489894,0,1,0,-1\n0,0.959202,0.49907,0,1,0,-1\n0,0.944866,0.509702,0,1,0,-1\n0,0.93164,0.521689,0,1,0,-1\n0,0.919654,0.534914,0,1,0,-1\n0,0.909021,0.54925,0,1,0,-1\n0,0.899845,0.56456,0,1,0,-1\n0,0.892214,0.580695,0,1,0,-1\n0,0.886201,0.5975,0,1,0,-1\n0,0.881864,0.614814,0,1,0,-1\n0,0.879245,0.63247,0,1,0,-1\n0,0.878369,0.650297,0,1,0,-1\n0,0.879245,0.668124,0,1,0,-1\n0,0.881864,0.68578,0,1,0,-1\n0,0.886201,0.703094,0,1,0,-1\n0,0.892214,0.719899,0,1,0,-1\n0,0.899845,0.736034,0,1,0,-1\n0,0.909021,0.751344,0,1,0,-1\n0,0.919654,0.76568,0,1,0,-1\n0,0.93164,0.778905,0,1,0,-1\n0,0.944866,0.790892,0,1,0,-1\n0,0.959202,0.801524,0,1,0,-1\n0,0.974511,0.8107,0,1,0,-1\n0,0.990646,0.818332,0,1,0,-1\n0,0.947478,0.867615,0,1,0,-1\n0,0.939155,0.853198,0,1,0,-1\n0,0.928015,0.840826,0,1,0,-1\n0,0.914547,0.831041,0,1,0,-1\n0,0.899339,0.82427,0,1,0,-1\n0,0.883055,0.820809,0,1,0,-1\n0,0.866408,0.820809,0,1,0,-1\n0,0.850124,0.82427,0,1,0,-1\n0,0.801985,0.867615,0,1,0,-1\n0,0.99616,0.069339,0,1,0,-1\n0,0.979435,0.06515,0,1,0,-1\n0,0.96238,0.06262,0,1,0,-1\n0,0.945159,0.061774,0,1,0,-1\n0,0.927938,0.06262,0,1,0,-1\n0,0.910882,0.06515,0,1,0,-1\n0,0.894157,0.069339,0,1,0,-1\n0,0.877923,0.075148,0,1,0,-1\n0,0.862337,0.08252,0,1,0,-1\n0,0.862337,0.392418,0,1,0,-1\n0,0.877923,0.39979,0,1,0,-1\n0,0.894157,0.405599,0,1,0,-1\n0,0.910882,0.409788,0,1,0,-1\n0,0.927938,0.412318,0,1,0,-1\n0,0.945159,0.413164,0,1,0,-1\n0,0.96238,0.412318,0,1,0,-1\n0,0.979435,0.409788,0,1,0,-1\n0,0.99616,0.405599,0,1,0,-1\n0,0.757724,0.993319,0,1,0,-1\n0,0.749652,0.976251,0,1,0,-1\n0,0.739945,0.960058,0,1,0,-1\n0,0.728699,0.944893,0,1,0,-1\n0,0.71602,0.930904,0,1,0,-1\n0,0.702031,0.918225,0,1,0,-1\n0,0.686866,0.906978,0,1,0,-1\n0,0.670672,0.897272,0,1,0,-1\n0,0.653605,0.8892,0,1,0,-1\n0,0.635829,0.882839,0,1,0,-1\n0,0.617515,0.878252,0,1,0,-1\n0,0.598839,0.875482,0,1,0,-1\n0,0.579982,0.874555,0,1,0,-1\n0,0.561125,0.875482,0,1,0,-1\n0,0.542449,0.878252,0,1,0,-1\n0,0.524135,0.882839,0,1,0,-1\n0,0.506359,0.8892,0,1,0,-1\n0,0.489292,0.897272,0,1,0,-1\n0,0.473098,0.906978,0,1,0,-1\n0,0.457933,0.918225,0,1,0,-1\n0,0.443944,0.930904,0,1,0,-1\n0,0.431265,0.944893,0,1,0,-1\n0,0.420018,0.960058,0,1,0,-1\n0,0.410312,0.976251,0,1,0,-1\n0,0.40224,0.993319,0,1,0,-1\n0,0.796841,0.883448,0,1,0,-1\n0,0.795101,0.900004,0,1,0,-1\n0,0.796841,0.91656,0,1,0,-1\n0,0.801985,0.932393,0,1,0,-1\n0,0.810309,0.94681,0,1,0,-1\n0,0.821448,0.959181,0,1,0,-1\n0,0.834916,0.968966,0,1,0,-1\n0,0.338776,0.864547,0,1,0,-1\n0,0.355172,0.867283,0,1,0,-1\n0,0.371796,0.867283,0,1,0,-1\n0,0.388193,0.864547,0,1,0,-1\n0,0.313262,0.983261,0,1,0,-1\n0,0.309989,0.966807,0,1,0,-1\n0,0.304597,0.950922,0,1,0,-1\n0,0.297177,0.935877,0,1,0,-1\n0,0.287857,0.921929,0,1,0,-1\n0,0.276796,0.909316,0,1,0,-1\n0,0.264184,0.898255,0,1,0,-1\n0,0.250236,0.888935,0,1,0,-1\n0,0.23519,0.881516,0,1,0,-1\n0,0.219305,0.876124,0,1,0,-1\n0,0.202852,0.872851,0,1,0,-1\n0,0.186113,0.871754,0,1,0,-1\n0,0.169373,0.872851,0,1,0,-1\n0,0.15292,0.876124,0,1,0,-1\n0,0.137035,0.881516,0,1,0,-1\n0,0.12199,0.888935,0,1,0,-1\n0,0.108041,0.898255,0,1,0,-1\n0,0.095429,0.909316,0,1,0,-1\n0,0.084368,0.921929,0,1,0,-1\n0,0.075048,0.935877,0,1,0,-1\n0,0.067629,0.950922,0,1,0,-1\n0,0.062236,0.966807,0,1,0,-1\n0,0.058964,0.983261,0,1,0,-1\n0,0.057866,1,0,1,0,-1\n0,0.314359,1,0,1,0,-1\n0,0.952623,0.883448,0,1,0,-1\n0,0.850124,0.975738,0,1,0,-1\n0,0.866408,0.979199,0,1,0,-1\n0,0.883055,0.979199,0,1,0,-1\n0,0.899339,0.975738,0,1,0,-1\n0,0.914547,0.968966,0,1,0,-1\n0,0.928015,0.959181,0,1,0,-1\n0,0.939155,0.94681,0,1,0,-1\n0,0.947478,0.932393,0,1,0,-1\n0,0.952623,0.91656,0,1,0,-1\n0,0.954363,0.900004,0,1,0,-1\n"),!1),_f(wf.ParsePatFile("\n*BUBBLES-02,BUBBLES-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n0,0.01243,0.139689,0,1,0,-1\n0,0.004689,0.124495,0,1,0,-1\n0,0.004689,0.188567,0,1,0,-1\n0,0.01243,0.173373,0,1,0,-1\n0,0.015098,0.156531,0,1,0,-1\n0,0.039159,0.550628,0,1,0,-1\n0,0.03308,0.534599,0,1,0,-1\n0,0.023341,0.52049,0,1,0,-1\n0,0.010509,0.509122,0,1,0,-1\n0,0.010509,0.626172,0,1,0,-1\n0,0.023341,0.614804,0,1,0,-1\n0,0.03308,0.600695,0,1,0,-1\n0,0.039159,0.584666,0,1,0,-1\n0,0.041226,0.567647,0,1,0,-1\n0,0.012655,0.061217,0,1,0,-1\n0,0.029343,0.064052,0,1,0,-1\n0,0.046244,0.065001,0,1,0,-1\n0,0.063146,0.064052,0,1,0,-1\n0,0.079834,0.061217,0,1,0,-1\n0,0.0961,0.05653,0,1,0,-1\n0,0.11174,0.050052,0,1,0,-1\n0,0.126555,0.041864,0,1,0,-1\n0,0.140361,0.032069,0,1,0,-1\n0,0.152983,0.020789,0,1,0,-1\n0,0.164263,0.008167,0,1,0,-1\n0,0.211752,0.623376,0,1,0,-1\n0,0.203326,0.608782,0,1,0,-1\n0,0.190416,0.597949,0,1,0,-1\n0,0.17458,0.592185,0,1,0,-1\n0,0.157727,0.592185,0,1,0,-1\n0,0.141891,0.597949,0,1,0,-1\n0,0.128981,0.608782,0,1,0,-1\n0,0.120555,0.623376,0,1,0,-1\n0,0.117628,0.639973,0,1,0,-1\n0,0.120555,0.65657,0,1,0,-1\n0,0.128981,0.671164,0,1,0,-1\n0,0.141891,0.681997,0,1,0,-1\n0,0.157727,0.687761,0,1,0,-1\n0,0.17458,0.687761,0,1,0,-1\n0,0.190416,0.681997,0,1,0,-1\n0,0.203326,0.671164,0,1,0,-1\n0,0.211752,0.65657,0,1,0,-1\n0,0.214678,0.639973,0,1,0,-1\n0,0.063146,0.764048,0,1,0,-1\n0,0.046244,0.763099,0,1,0,-1\n0,0.029343,0.764048,0,1,0,-1\n0,0.3178,0.248563,0,1,0,-1\n0,0.314583,0.232388,0,1,0,-1\n0,0.309282,0.216771,0,1,0,-1\n0,0.301988,0.20198,0,1,0,-1\n0,0.292825,0.188268,0,1,0,-1\n0,0.281951,0.175868,0,1,0,-1\n0,0.269552,0.164994,0,1,0,-1\n0,0.255839,0.155832,0,1,0,-1\n0,0.241048,0.148538,0,1,0,-1\n0,0.225431,0.143237,0,1,0,-1\n0,0.209256,0.140019,0,1,0,-1\n0,0.1928,0.138941,0,1,0,-1\n0,0.176343,0.140019,0,1,0,-1\n0,0.160168,0.143237,0,1,0,-1\n0,0.144551,0.148538,0,1,0,-1\n0,0.12976,0.155832,0,1,0,-1\n0,0.116047,0.164994,0,1,0,-1\n0,0.103648,0.175868,0,1,0,-1\n0,0.092774,0.188268,0,1,0,-1\n0,0.083612,0.20198,0,1,0,-1\n0,0.076318,0.216771,0,1,0,-1\n0,0.071016,0.232388,0,1,0,-1\n0,0.067799,0.248563,0,1,0,-1\n0,0.06672,0.26502,0,1,0,-1\n0,0.067799,0.281477,0,1,0,-1\n0,0.071016,0.297652,0,1,0,-1\n0,0.076318,0.313268,0,1,0,-1\n0,0.083612,0.32806,0,1,0,-1\n0,0.092774,0.341772,0,1,0,-1\n0,0.103648,0.354171,0,1,0,-1\n0,0.116047,0.365045,0,1,0,-1\n0,0.12976,0.374208,0,1,0,-1\n0,0.144551,0.381502,0,1,0,-1\n0,0.160168,0.386803,0,1,0,-1\n0,0.176343,0.390021,0,1,0,-1\n0,0.1928,0.391099,0,1,0,-1\n0,0.209256,0.390021,0,1,0,-1\n0,0.225431,0.386803,0,1,0,-1\n0,0.241048,0.381502,0,1,0,-1\n0,0.255839,0.374208,0,1,0,-1\n0,0.269552,0.365045,0,1,0,-1\n0,0.281951,0.354171,0,1,0,-1\n0,0.292825,0.341772,0,1,0,-1\n0,0.301988,0.32806,0,1,0,-1\n0,0.309282,0.313268,0,1,0,-1\n0,0.314583,0.297652,0,1,0,-1\n0,0.3178,0.281477,0,1,0,-1\n0,0.318879,0.26502,0,1,0,-1\n0,0.710254,0.515012,0,1,0,-1\n0,0.707834,0.498698,0,1,0,-1\n0,0.703826,0.482701,0,1,0,-1\n0,0.69827,0.467173,0,1,0,-1\n0,0.691219,0.452264,0,1,0,-1\n0,0.682741,0.438119,0,1,0,-1\n0,0.672916,0.424872,0,1,0,-1\n0,0.661841,0.412653,0,1,0,-1\n0,0.649621,0.401577,0,1,0,-1\n0,0.636375,0.391753,0,1,0,-1\n0,0.622229,0.383274,0,1,0,-1\n0,0.607321,0.376223,0,1,0,-1\n0,0.591793,0.370667,0,1,0,-1\n0,0.575795,0.36666,0,1,0,-1\n0,0.559482,0.36424,0,1,0,-1\n0,0.54301,0.363431,0,1,0,-1\n0,0.526538,0.36424,0,1,0,-1\n0,0.510224,0.36666,0,1,0,-1\n0,0.494226,0.370667,0,1,0,-1\n0,0.478698,0.376223,0,1,0,-1\n0,0.46379,0.383274,0,1,0,-1\n0,0.449644,0.391753,0,1,0,-1\n0,0.436398,0.401577,0,1,0,-1\n0,0.424178,0.412653,0,1,0,-1\n0,0.413103,0.424872,0,1,0,-1\n0,0.403279,0.438119,0,1,0,-1\n0,0.3948,0.452264,0,1,0,-1\n0,0.387749,0.467173,0,1,0,-1\n0,0.382193,0.482701,0,1,0,-1\n0,0.378186,0.498698,0,1,0,-1\n0,0.375766,0.515012,0,1,0,-1\n0,0.374957,0.531484,0,1,0,-1\n0,0.375766,0.547956,0,1,0,-1\n0,0.378186,0.56427,0,1,0,-1\n0,0.382193,0.580267,0,1,0,-1\n0,0.387749,0.595795,0,1,0,-1\n0,0.3948,0.610704,0,1,0,-1\n0,0.403279,0.624849,0,1,0,-1\n0,0.413103,0.638096,0,1,0,-1\n0,0.424178,0.650315,0,1,0,-1\n0,0.436398,0.661391,0,1,0,-1\n0,0.449644,0.671215,0,1,0,-1\n0,0.46379,0.679694,0,1,0,-1\n0,0.478698,0.686745,0,1,0,-1\n0,0.494226,0.692301,0,1,0,-1\n0,0.510224,0.696308,0,1,0,-1\n0,0.526538,0.698728,0,1,0,-1\n0,0.54301,0.699537,0,1,0,-1\n0,0.559482,0.698728,0,1,0,-1\n0,0.575795,0.696308,0,1,0,-1\n0,0.591793,0.692301,0,1,0,-1\n0,0.607321,0.686745,0,1,0,-1\n0,0.622229,0.679694,0,1,0,-1\n0,0.636375,0.671215,0,1,0,-1\n0,0.649621,0.661391,0,1,0,-1\n0,0.661841,0.650315,0,1,0,-1\n0,0.672916,0.638096,0,1,0,-1\n0,0.682741,0.624849,0,1,0,-1\n0,0.691219,0.610704,0,1,0,-1\n0,0.69827,0.595795,0,1,0,-1\n0,0.703826,0.580267,0,1,0,-1\n0,0.707834,0.56427,0,1,0,-1\n0,0.710254,0.547956,0,1,0,-1\n0,0.711063,0.531484,0,1,0,-1\n0,0.353512,0.012986,0,1,0,-1\n0,0.351649,0.029516,0,1,0,-1\n0,0.351027,0.046139,0,1,0,-1\n0,0.351649,0.062761,0,1,0,-1\n0,0.353512,0.079291,0,1,0,-1\n0,0.356604,0.095635,0,1,0,-1\n0,0.360909,0.111703,0,1,0,-1\n0,0.366403,0.127404,0,1,0,-1\n0,0.373055,0.14265,0,1,0,-1\n0,0.380828,0.157356,0,1,0,-1\n0,0.389678,0.171441,0,1,0,-1\n0,0.399556,0.184825,0,1,0,-1\n0,0.410406,0.197433,0,1,0,-1\n0,0.422168,0.209196,0,1,0,-1\n0,0.434776,0.220046,0,1,0,-1\n0,0.44816,0.229924,0,1,0,-1\n0,0.462245,0.238774,0,1,0,-1\n0,0.476951,0.246546,0,1,0,-1\n0,0.492198,0.253198,0,1,0,-1\n0,0.507899,0.258692,0,1,0,-1\n0,0.523966,0.262997,0,1,0,-1\n0,0.54031,0.26609,0,1,0,-1\n0,0.55684,0.267952,0,1,0,-1\n0,0.573463,0.268574,0,1,0,-1\n0,0.590085,0.267952,0,1,0,-1\n0,0.606615,0.26609,0,1,0,-1\n0,0.622959,0.262997,0,1,0,-1\n0,0.639027,0.258692,0,1,0,-1\n0,0.654727,0.253198,0,1,0,-1\n0,0.669974,0.246546,0,1,0,-1\n0,0.68468,0.238774,0,1,0,-1\n0,0.698765,0.229924,0,1,0,-1\n0,0.712149,0.220046,0,1,0,-1\n0,0.724757,0.209196,0,1,0,-1\n0,0.736519,0.197433,0,1,0,-1\n0,0.74737,0.184825,0,1,0,-1\n0,0.757248,0.171441,0,1,0,-1\n0,0.766098,0.157356,0,1,0,-1\n0,0.77387,0.14265,0,1,0,-1\n0,0.780522,0.127404,0,1,0,-1\n0,0.928226,0.008167,0,1,0,-1\n0,0.939506,0.020789,0,1,0,-1\n0,0.952128,0.032069,0,1,0,-1\n0,0.965934,0.041864,0,1,0,-1\n0,0.980749,0.050052,0,1,0,-1\n0,0.996388,0.05653,0,1,0,-1\n0,0.992631,0.112437,0,1,0,-1\n0,0.977438,0.104696,0,1,0,-1\n0,0.960595,0.102028,0,1,0,-1\n0,0.943753,0.104696,0,1,0,-1\n0,0.928559,0.112437,0,1,0,-1\n0,0.916502,0.124495,0,1,0,-1\n0,0.90876,0.139689,0,1,0,-1\n0,0.906093,0.156531,0,1,0,-1\n0,0.90876,0.173373,0,1,0,-1\n0,0.916502,0.188567,0,1,0,-1\n0,0.928559,0.200625,0,1,0,-1\n0,0.943753,0.208366,0,1,0,-1\n0,0.960595,0.211034,0,1,0,-1\n0,0.977438,0.208366,0,1,0,-1\n0,0.992631,0.200625,0,1,0,-1\n0,0.995329,0.501155,0,1,0,-1\n0,0.978684,0.497052,0,1,0,-1\n0,0.96154,0.497052,0,1,0,-1\n0,0.944895,0.501155,0,1,0,-1\n0,0.929715,0.509122,0,1,0,-1\n0,0.916882,0.52049,0,1,0,-1\n0,0.907144,0.534599,0,1,0,-1\n0,0.901065,0.550628,0,1,0,-1\n0,0.898998,0.567647,0,1,0,-1\n0,0.901065,0.584666,0,1,0,-1\n0,0.907144,0.600695,0,1,0,-1\n0,0.916882,0.614804,0,1,0,-1\n0,0.929715,0.626172,0,1,0,-1\n0,0.944895,0.634139,0,1,0,-1\n0,0.96154,0.638242,0,1,0,-1\n0,0.978684,0.638242,0,1,0,-1\n0,0.995329,0.634139,0,1,0,-1\n0,0.795276,0.029516,0,1,0,-1\n0,0.793414,0.012986,0,1,0,-1\n0,0.786016,0.111703,0,1,0,-1\n0,0.790321,0.095635,0,1,0,-1\n0,0.793414,0.079291,0,1,0,-1\n0,0.795276,0.062761,0,1,0,-1\n0,0.795898,0.046139,0,1,0,-1\n0,0.790321,0.996642,0,1,0,-1\n0,0.786016,0.980575,0,1,0,-1\n0,0.780522,0.964874,0,1,0,-1\n0,0.77387,0.949628,0,1,0,-1\n0,0.766098,0.934921,0,1,0,-1\n0,0.757248,0.920836,0,1,0,-1\n0,0.74737,0.907452,0,1,0,-1\n0,0.736519,0.894844,0,1,0,-1\n0,0.724757,0.883082,0,1,0,-1\n0,0.712149,0.872232,0,1,0,-1\n0,0.698765,0.862354,0,1,0,-1\n0,0.68468,0.853504,0,1,0,-1\n0,0.669974,0.845731,0,1,0,-1\n0,0.654727,0.839079,0,1,0,-1\n0,0.639027,0.833585,0,1,0,-1\n0,0.622959,0.82928,0,1,0,-1\n0,0.606615,0.826188,0,1,0,-1\n0,0.590085,0.824325,0,1,0,-1\n0,0.573463,0.823703,0,1,0,-1\n0,0.55684,0.824325,0,1,0,-1\n0,0.54031,0.826188,0,1,0,-1\n0,0.523966,0.82928,0,1,0,-1\n0,0.507899,0.833585,0,1,0,-1\n0,0.492198,0.839079,0,1,0,-1\n0,0.476951,0.845731,0,1,0,-1\n0,0.462245,0.853504,0,1,0,-1\n0,0.44816,0.862354,0,1,0,-1\n0,0.434776,0.872232,0,1,0,-1\n0,0.422168,0.883082,0,1,0,-1\n0,0.410406,0.894844,0,1,0,-1\n0,0.399556,0.907452,0,1,0,-1\n0,0.389678,0.920836,0,1,0,-1\n0,0.380828,0.934921,0,1,0,-1\n0,0.373055,0.949628,0,1,0,-1\n0,0.366403,0.964874,0,1,0,-1\n0,0.360909,0.980575,0,1,0,-1\n0,0.356604,0.996642,0,1,0,-1\n0,0.196246,0.897149,0,1,0,-1\n0,0.193411,0.880461,0,1,0,-1\n0,0.188725,0.864194,0,1,0,-1\n0,0.182247,0.848555,0,1,0,-1\n0,0.174058,0.83374,0,1,0,-1\n0,0.164263,0.819934,0,1,0,-1\n0,0.152983,0.807312,0,1,0,-1\n0,0.140361,0.796032,0,1,0,-1\n0,0.126555,0.786236,0,1,0,-1\n0,0.11174,0.778048,0,1,0,-1\n0,0.0961,0.77157,0,1,0,-1\n0,0.079834,0.766884,0,1,0,-1\n0,0.012655,0.766884,0,1,0,-1\n0,0.174058,0.994361,0,1,0,-1\n0,0.182247,0.979545,0,1,0,-1\n0,0.188725,0.963906,0,1,0,-1\n0,0.193411,0.94764,0,1,0,-1\n0,0.196246,0.930951,0,1,0,-1\n0,0.197195,0.91405,0,1,0,-1\n0,0.996388,0.77157,0,1,0,-1\n0,0.980749,0.778048,0,1,0,-1\n0,0.965934,0.786236,0,1,0,-1\n0,0.952128,0.796032,0,1,0,-1\n0,0.939506,0.807312,0,1,0,-1\n0,0.928226,0.819934,0,1,0,-1\n0,0.918431,0.83374,0,1,0,-1\n0,0.910242,0.848555,0,1,0,-1\n0,0.903764,0.864194,0,1,0,-1\n0,0.899078,0.880461,0,1,0,-1\n0,0.896243,0.897149,0,1,0,-1\n0,0.895293,0.91405,0,1,0,-1\n0,0.896243,0.930951,0,1,0,-1\n0,0.899078,0.94764,0,1,0,-1\n0,0.903764,0.963906,0,1,0,-1\n0,0.910242,0.979545,0,1,0,-1\n0,0.918431,0.994361,0,1,0,-1\n"),!1),_f(wf.ParsePatFile("\n*BUBBLES-03,BUBBLES-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n0,0.401131,0.163621,0,1,0,-1\n0,0.397069,0.144076,0,1,0,-1\n0,0.390384,0.125265,0,1,0,-1\n0,0.3812,0.107541,0,1,0,-1\n0,0.369688,0.091232,0,1,0,-1\n0,0.356062,0.076642,0,1,0,-1\n0,0.340577,0.064044,0,1,0,-1\n0,0.32352,0.053672,0,1,0,-1\n0,0.30521,0.045718,0,1,0,-1\n0,0.285988,0.040333,0,1,0,-1\n0,0.266211,0.037614,0,1,0,-1\n0,0.246248,0.037614,0,1,0,-1\n0,0.226471,0.040333,0,1,0,-1\n0,0.207249,0.045718,0,1,0,-1\n0,0.188938,0.053672,0,1,0,-1\n0,0.171882,0.064044,0,1,0,-1\n0,0.156397,0.076642,0,1,0,-1\n0,0.142771,0.091232,0,1,0,-1\n0,0.131259,0.107541,0,1,0,-1\n0,0.122075,0.125265,0,1,0,-1\n0,0.115389,0.144076,0,1,0,-1\n0,0.111328,0.163621,0,1,0,-1\n0,0.109966,0.183537,0,1,0,-1\n0,0.111328,0.203453,0,1,0,-1\n0,0.115389,0.222999,0,1,0,-1\n0,0.122075,0.241809,0,1,0,-1\n0,0.131259,0.259533,0,1,0,-1\n0,0.142771,0.275842,0,1,0,-1\n0,0.156397,0.290432,0,1,0,-1\n0,0.171882,0.30303,0,1,0,-1\n0,0.188938,0.313403,0,1,0,-1\n0,0.207249,0.321356,0,1,0,-1\n0,0.226471,0.326742,0,1,0,-1\n0,0.246248,0.32946,0,1,0,-1\n0,0.266211,0.32946,0,1,0,-1\n0,0.285988,0.326742,0,1,0,-1\n0,0.30521,0.321356,0,1,0,-1\n0,0.32352,0.313403,0,1,0,-1\n0,0.340577,0.30303,0,1,0,-1\n0,0.356062,0.290432,0,1,0,-1\n0,0.369688,0.275842,0,1,0,-1\n0,0.3812,0.259533,0,1,0,-1\n0,0.390384,0.241809,0,1,0,-1\n0,0.397069,0.222999,0,1,0,-1\n0,0.401131,0.203453,0,1,0,-1\n0,0.402493,0.183537,0,1,0,-1\n0,0.717102,0.580347,0,1,0,-1\n0,0.69634,0.588567,0,1,0,-1\n0,0.676773,0.599325,0,1,0,-1\n0,0.658707,0.61245,0,1,0,-1\n0,0.64243,0.627736,0,1,0,-1\n0,0.628196,0.644941,0,1,0,-1\n0,0.616231,0.663795,0,1,0,-1\n0,0.606724,0.684,0,1,0,-1\n0,0.599823,0.705237,0,1,0,-1\n0,0.595639,0.727171,0,1,0,-1\n0,0.594237,0.749457,0,1,0,-1\n0,0.595639,0.771743,0,1,0,-1\n0,0.599823,0.793677,0,1,0,-1\n0,0.606724,0.814914,0,1,0,-1\n0,0.713243,0.02088,0,1,0,-1\n0,0.688246,0.022108,0,1,0,-1\n0,0.663491,0.02578,0,1,0,-1\n0,0.639215,0.031861,0,1,0,-1\n0,0.615651,0.040292,0,1,0,-1\n0,0.593028,0.050992,0,1,0,-1\n0,0.571562,0.063858,0,1,0,-1\n0,0.551461,0.078766,0,1,0,-1\n0,0.532918,0.095573,0,1,0,-1\n0,0.516111,0.114116,0,1,0,-1\n0,0.501203,0.134218,0,1,0,-1\n0,0.488337,0.155683,0,1,0,-1\n0,0.477637,0.178307,0,1,0,-1\n0,0.469206,0.20187,0,1,0,-1\n0,0.463125,0.226146,0,1,0,-1\n0,0.459453,0.250902,0,1,0,-1\n0,0.458225,0.275898,0,1,0,-1\n0,0.459453,0.300894,0,1,0,-1\n0,0.463125,0.325649,0,1,0,-1\n0,0.469206,0.349926,0,1,0,-1\n0,0.477637,0.373489,0,1,0,-1\n0,0.488337,0.396113,0,1,0,-1\n0,0.501203,0.417578,0,1,0,-1\n0,0.516111,0.43768,0,1,0,-1\n0,0.532918,0.456223,0,1,0,-1\n0,0.551461,0.473029,0,1,0,-1\n0,0.571562,0.487938,0,1,0,-1\n0,0.593028,0.500804,0,1,0,-1\n0,0.615651,0.511504,0,1,0,-1\n0,0.639215,0.519935,0,1,0,-1\n0,0.663491,0.526016,0,1,0,-1\n0,0.688246,0.529688,0,1,0,-1\n0,0.713243,0.530916,0,1,0,-1\n0,0.563094,0.659436,0,1,0,-1\n0,0.558843,0.630776,0,1,0,-1\n0,0.551803,0.602671,0,1,0,-1\n0,0.542042,0.575392,0,1,0,-1\n0,0.529655,0.5492,0,1,0,-1\n0,0.514759,0.524349,0,1,0,-1\n0,0.4975,0.501077,0,1,0,-1\n0,0.478043,0.479609,0,1,0,-1\n0,0.456575,0.460152,0,1,0,-1\n0,0.433303,0.442893,0,1,0,-1\n0,0.408452,0.427998,0,1,0,-1\n0,0.382261,0.41561,0,1,0,-1\n0,0.354981,0.405849,0,1,0,-1\n0,0.326876,0.398809,0,1,0,-1\n0,0.298216,0.394558,0,1,0,-1\n0,0.269278,0.393136,0,1,0,-1\n0,0.240339,0.394558,0,1,0,-1\n0,0.21168,0.398809,0,1,0,-1\n0,0.183575,0.405849,0,1,0,-1\n0,0.156295,0.41561,0,1,0,-1\n0,0.130104,0.427998,0,1,0,-1\n0,0.105252,0.442893,0,1,0,-1\n0,0.081981,0.460152,0,1,0,-1\n0,0.060513,0.479609,0,1,0,-1\n0,0.041056,0.501077,0,1,0,-1\n0,0.023796,0.524349,0,1,0,-1\n0,0.008901,0.5492,0,1,0,-1\n0,0.542042,0.801357,0,1,0,-1\n0,0.551803,0.774077,0,1,0,-1\n0,0.558843,0.745972,0,1,0,-1\n0,0.563094,0.717313,0,1,0,-1\n0,0.564516,0.688374,0,1,0,-1\n0,0.996513,0.575392,0,1,0,-1\n0,0.986753,0.602671,0,1,0,-1\n0,0.979713,0.630776,0,1,0,-1\n0,0.975461,0.659436,0,1,0,-1\n0,0.97404,0.688374,0,1,0,-1\n0,0.975461,0.717313,0,1,0,-1\n0,0.979713,0.745972,0,1,0,-1\n0,0.986753,0.774077,0,1,0,-1\n0,0.996513,0.801357,0,1,0,-1\n0,0.94846,0.727171,0,1,0,-1\n0,0.944275,0.705237,0,1,0,-1\n0,0.937375,0.684,0,1,0,-1\n0,0.927868,0.663795,0,1,0,-1\n0,0.915903,0.644941,0,1,0,-1\n0,0.901669,0.627736,0,1,0,-1\n0,0.885391,0.61245,0,1,0,-1\n0,0.867326,0.599325,0,1,0,-1\n0,0.847758,0.588567,0,1,0,-1\n0,0.826996,0.580347,0,1,0,-1\n0,0.805368,0.574794,0,1,0,-1\n0,0.783214,0.571995,0,1,0,-1\n0,0.760884,0.571995,0,1,0,-1\n0,0.738731,0.574794,0,1,0,-1\n0,0.616231,0.835119,0,1,0,-1\n0,0.628196,0.853972,0,1,0,-1\n0,0.64243,0.871178,0,1,0,-1\n0,0.658707,0.886464,0,1,0,-1\n0,0.676773,0.899589,0,1,0,-1\n0,0.69634,0.910346,0,1,0,-1\n0,0.717102,0.918566,0,1,0,-1\n0,0.738731,0.92412,0,1,0,-1\n0,0.760884,0.926918,0,1,0,-1\n0,0.783214,0.926918,0,1,0,-1\n0,0.805368,0.92412,0,1,0,-1\n0,0.826996,0.918566,0,1,0,-1\n0,0.847758,0.910346,0,1,0,-1\n0,0.867326,0.899589,0,1,0,-1\n0,0.885391,0.886464,0,1,0,-1\n0,0.901669,0.871178,0,1,0,-1\n0,0.915903,0.853972,0,1,0,-1\n0,0.927868,0.835119,0,1,0,-1\n0,0.937375,0.814914,0,1,0,-1\n0,0.944275,0.793677,0,1,0,-1\n0,0.94846,0.771743,0,1,0,-1\n0,0.949862,0.749457,0,1,0,-1\n0,0.967032,0.250902,0,1,0,-1\n0,0.96336,0.226146,0,1,0,-1\n0,0.957279,0.20187,0,1,0,-1\n0,0.948848,0.178307,0,1,0,-1\n0,0.938148,0.155683,0,1,0,-1\n0,0.925282,0.134218,0,1,0,-1\n0,0.910374,0.114116,0,1,0,-1\n0,0.893567,0.095573,0,1,0,-1\n0,0.875024,0.078766,0,1,0,-1\n0,0.854923,0.063858,0,1,0,-1\n0,0.833457,0.050992,0,1,0,-1\n0,0.810834,0.040292,0,1,0,-1\n0,0.78727,0.031861,0,1,0,-1\n0,0.762994,0.02578,0,1,0,-1\n0,0.738239,0.022108,0,1,0,-1\n0,0.738239,0.529688,0,1,0,-1\n0,0.762994,0.526016,0,1,0,-1\n0,0.78727,0.519935,0,1,0,-1\n0,0.810834,0.511504,0,1,0,-1\n0,0.833457,0.500804,0,1,0,-1\n0,0.854923,0.487938,0,1,0,-1\n0,0.875024,0.473029,0,1,0,-1\n0,0.893567,0.456223,0,1,0,-1\n0,0.910374,0.43768,0,1,0,-1\n0,0.925282,0.417578,0,1,0,-1\n0,0.938148,0.396113,0,1,0,-1\n0,0.948848,0.373489,0,1,0,-1\n0,0.957279,0.349926,0,1,0,-1\n0,0.96336,0.325649,0,1,0,-1\n0,0.967032,0.300894,0,1,0,-1\n0,0.96826,0.275898,0,1,0,-1\n0,0.4975,0.875671,0,1,0,-1\n0,0.514759,0.8524,0,1,0,-1\n0,0.529655,0.827549,0,1,0,-1\n0,0.008901,0.827549,0,1,0,-1\n0,0.023796,0.8524,0,1,0,-1\n0,0.041056,0.875671,0,1,0,-1\n0,0.060513,0.897139,0,1,0,-1\n0,0.081981,0.916597,0,1,0,-1\n0,0.105252,0.933856,0,1,0,-1\n0,0.130104,0.948751,0,1,0,-1\n0,0.156295,0.961139,0,1,0,-1\n0,0.183575,0.9709,0,1,0,-1\n0,0.21168,0.97794,0,1,0,-1\n0,0.240339,0.982191,0,1,0,-1\n0,0.269278,0.983612,0,1,0,-1\n0,0.298216,0.982191,0,1,0,-1\n0,0.326876,0.97794,0,1,0,-1\n0,0.354981,0.9709,0,1,0,-1\n0,0.382261,0.961139,0,1,0,-1\n0,0.408452,0.948751,0,1,0,-1\n0,0.433303,0.933856,0,1,0,-1\n0,0.456575,0.916597,0,1,0,-1\n0,0.478043,0.897139,0,1,0,-1\n"),!1),_f(wf.ParsePatFile("\n*CELTIC-01,CELTIC PATTERN 01\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n135,0.36,0.42222222,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.42222222,0.39111111,0.70710678,0.70710678,0.25848681,-1.15572675\n315,0.39111111,0.57777778,0.70710678,0.70710678,0.08799551,-1.32621805\n315,0.30166667,0.63611111,0.70710678,0.70710678,0.25848681,-1.15572675\n225,0.76055556,0.42611111,0.70710678,0.70710678,0.08799551,-1.32621805\n225,0.86555556,0.5,0.70710678,0.70710678,0.28048569,-1.13372787\n225,0.85388889,0.33277778,0.70710678,0.70710678,0.08799551,-1.32621805\n225,0.99,0.5,0.70710678,0.70710678,0.3684812,-1.04573236\n225,0.76055556,0.72944444,0.70710678,0.70710678,0.08799551,-1.32621805\n225,0.85388889,0.63611111,0.70710678,0.70710678,0.08799551,-1.32621805\n90,0.99,0.90200449,0,1,0.08799551,-0.91200449\n0,0.90200449,0.88000561,0,1,0.08799551,-0.91200449\n0,0.83978227,0.90200449,0,1,0.15021773,-0.84978227\n0,0.80333333,0.99,0,1,0.18666667,-0.81333333\n90,0.90200449,0.83978227,0,1,0.04022334,-0.95977666\n90,0.99,0.80333333,0,1,0.07667228,-0.92332772\n180,0.09799551,0.99,0,1,0.08799551,-0.91200449\n90,0.11999439,0.90200449,0,1,0.08799551,-0.91200449\n90,0.09799551,0.83978227,0,1,0.15021773,-0.84978227\n90,0.01,0.80333333,0,1,0.18666667,-0.81333333\n180,0.16021773,0.90200449,0,1,0.04022334,-0.95977666\n180,0.19666667,0.99,0,1,0.07667228,-0.92332772\n270,0.01,0.09799551,0,1,0.08799551,-0.91200449\n180,0.09799551,0.11999439,0,1,0.08799551,-0.91200449\n180,0.16021773,0.09799551,0,1,0.15021773,-0.84978227\n180,0.19666667,0.01,0,1,0.18666667,-0.81333333\n270,0.09799551,0.16021773,0,1,0.04022334,-0.95977666\n270,0.01,0.19666667,0,1,0.07667228,-0.92332772\n45,0.70222222,0.51555556,0.70710678,0.70710678,0.40697924,-1.00723433\n45,0.51555556,0.29777778,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.42611111,0.23944444,0.70710678,0.70710678,0.25848681,-1.15572675\n45,0.19666667,0.01,0.70710678,0.70710678,0.19249018,-1.22172338\n45,0.64,0.57777778,0.70710678,0.70710678,0.3705303,-1.04368326\n45,0.42222222,0.39111111,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.36388889,0.30166667,0.70710678,0.70710678,0.25848681,-1.15572675\n45,0.16021773,0.09799551,0.70710678,0.70710678,0.15604125,-1.25817232\n45,0.66722222,0.85388889,0.70710678,0.70710678,0.19249018,-1.22172338\n45,0.42222222,0.64,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.14611111,0.36388889,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.39111111,0.57777778,0.70710678,0.70710678,0.25848681,-1.15572675\n45,0.01,0.19666667,0.70710678,0.70710678,0.40697924,-1.00723433\n45,0.72944444,0.79166667,0.70710678,0.70710678,0.15604125,-1.25817232\n45,0.23944444,0.27055556,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.51555556,0.54666667,0.70710678,0.70710678,0.08799551,-1.32621805\n45,0.45333333,0.51555556,0.70710678,0.70710678,0.25848681,-1.15572675\n45,0.09799551,0.16021773,0.70710678,0.70710678,0.3705303,-1.04368326\n0,0.90200449,0.01,0,1,0.08799551,-0.91200449\n135,0.70222222,0.51555556,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.42611111,0.79166667,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.48444444,0.70222222,0.70710678,0.70710678,0.40697924,-1.00723433\n135,0.76055556,0.42611111,0.70710678,0.70710678,0.25848681,-1.15572675\n135,0.99,0.19666667,0.70710678,0.70710678,0.19249018,-1.22172338\n135,0.33277778,0.69833333,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.42222222,0.64,0.70710678,0.70710678,0.3705303,-1.04368326\n135,0.60888889,0.42222222,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.69833333,0.36388889,0.70710678,0.70710678,0.25848681,-1.15572675\n135,0.90200449,0.16021773,0.70710678,0.70710678,0.15604125,-1.25817232\n135,0.63611111,0.14611111,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.14611111,0.66722222,0.70710678,0.70710678,0.19249018,-1.22172338\n135,0.80333333,0.01,0.70710678,0.70710678,0.40697924,-1.00723433\n135,0.72944444,0.23944444,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.20833333,0.72944444,0.70710678,0.70710678,0.15604125,-1.25817232\n135,0.83978227,0.09799551,0.70710678,0.70710678,0.3705303,-1.04368326\n270,0.88000561,0.09799551,0,1,0.08799551,-0.91200449\n270,0.90200449,0.16021773,0,1,0.15021773,-0.84978227\n270,0.99,0.19666667,0,1,0.18666667,-0.81333333\n0,0.83978227,0.09799551,0,1,0.04022334,-0.95977666\n0,0.80333333,0.01,0,1,0.07667228,-0.92332772\n135,0.99,0.5,0.70710678,0.70710678,0.19249018,-1.22172338\n45,0.5,0.01,0.70710678,0.70710678,0.19249018,-1.22172338\n315,0.27055556,0.20833333,0.70710678,0.70710678,0.08799551,-1.32621805\n315,0.23944444,0.27055556,0.70710678,0.70710678,0.3684812,-1.04573236\n315,0.01,0.5,0.70710678,0.70710678,0.19249018,-1.22172338\n225,0.20833333,0.72944444,0.70710678,0.70710678,0.08799551,-1.32621805\n225,0.27055556,0.76055556,0.70710678,0.70710678,0.3684812,-1.04573236\n225,0.5,0.99,0.70710678,0.70710678,0.19249018,-1.22172338\n135,0.72944444,0.79166667,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.76055556,0.72944444,0.70710678,0.70710678,0.3684812,-1.04573236\n135,0.86555556,0.5,0.70710678,0.70710678,0.10449467,-1.30971889\n45,0.5,0.13444444,0.70710678,0.70710678,0.10449467,-1.30971889\n315,0.36388889,0.30166667,0.70710678,0.70710678,0.08799551,-1.32621805\n315,0.30166667,0.33277778,0.70710678,0.70710678,0.28048569,-1.13372787\n315,0.13444444,0.5,0.70710678,0.70710678,0.10449467,-1.30971889\n225,0.30166667,0.63611111,0.70710678,0.70710678,0.08799551,-1.32621805\n225,0.33277778,0.69833333,0.70710678,0.70710678,0.28048569,-1.13372787\n225,0.5,0.86555556,0.70710678,0.70710678,0.10449467,-1.30971889\n135,0.63611111,0.69833333,0.70710678,0.70710678,0.08799551,-1.32621805\n135,0.69833333,0.66722222,0.70710678,0.70710678,0.28048569,-1.13372787\n"),!1),_f(wf.ParsePatFile("\n*CELTIC-02,CELTIC PATTERN 02\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n180,0.438471,0.01545916,0,1,0.12305799,-0.87694201\n270,0.98454084,0.438471,0,1,0.12305799,-0.87694201\n270,0.01545916,0.68458699,0,1,0.12305799,-0.87694201\n180,0.68458699,0.98454084,0,1,0.12305799,-0.87694201\n90,0.98454084,0.4692355,0,1,0.51530534,-0.48469466\n270,0.98454084,0.28464852,0,1,0.26918936,-0.73081064\n180,0.438471,0.28464852,0,1,0.12305799,-0.87694201\n180,0.5307645,0.31541301,0,1,0.36148285,-0.63851715\n0,0.31541301,0.4692355,0,1,0.12305799,-0.87694201\n0,0.16928165,0.438471,0,1,0.36148285,-0.63851715\n270,0.83071835,0.68458699,0,1,0.12305799,-0.87694201\n270,0.86148285,0.86148285,0,1,0.39224735,-0.60775265\n270,0.5307645,0.98454084,0,1,0.12305799,-0.87694201\n270,0.71535148,0.98454084,0,1,0.12305799,-0.87694201\n90,0.68458699,0.71535148,0,1,0.26918936,-0.73081064\n90,0.71535148,0.31541301,0,1,0.12305799,-0.87694201\n90,0.68458699,0.16928165,0,1,0.36148285,-0.63851715\n90,0.561529,0.71535148,0,1,0.26918936,-0.73081064\n90,0.5307645,0.31541301,0,1,0.12305799,-0.87694201\n90,0.561529,0.16928165,0,1,0.36148285,-0.63851715\n90,0.28464852,0.561529,0,1,0.12305799,-0.87694201\n90,0.28464852,0.01545916,0,1,0.12305799,-0.87694201\n90,0.31541301,0.4692355,0,1,0.36148285,-0.63851715\n90,0.31541301,0.01545916,0,1,0.26918936,-0.73081064\n90,0.4692355,0.01545916,0,1,0.12305799,-0.87694201\n90,0.4692355,0.561529,0,1,0.12305799,-0.87694201\n90,0.438471,0.4692355,0,1,0.36148285,-0.63851715\n90,0.438471,0.01545916,0,1,0.26918936,-0.73081064\n180,0.68458699,0.71535148,0,1,0.12305799,-0.87694201\n180,0.13851715,0.71535148,0,1,0.12305799,-0.87694201\n180,0.28464852,0.68458699,0,1,0.26918936,-0.73081064\n180,0.83071835,0.68458699,0,1,0.36148285,-0.63851715\n180,0.13851715,0.5307645,0,1,0.12305799,-0.87694201\n180,0.28464852,0.561529,0,1,0.26918936,-0.73081064\n180,0.68458699,0.5307645,0,1,0.12305799,-0.87694201\n180,0.83071835,0.561529,0,1,0.36148285,-0.63851715\n180,0.98454084,0.28464852,0,1,0.12305799,-0.87694201\n180,0.98454084,0.31541301,0,1,0.26918936,-0.73081064\n180,0.98454084,0.4692355,0,1,0.12305799,-0.87694201\n180,0.98454084,0.438471,0,1,0.26918936,-0.73081064\n180,0.98454084,0.98454084,0,1,0.26918936,-0.73081064\n0,0.4692355,0.01545916,0,1,0.51530534,-0.48469466\n0,0.01545916,0.01545916,0,1,0.26918936,-0.73081064\n270,0.01545916,0.5307645,0,1,0.51530534,-0.48469466\n270,0.01545916,0.98454084,0,1,0.26918936,-0.73081064\n180,0.5307645,0.98454084,0,1,0.51530534,-0.48469466\n180,0.86148285,0.86148285,0,1,0.14613136,-0.85386864\n90,0.86148285,0.13851715,0,1,0.14613136,-0.85386864\n0,0.561529,0.16928165,0,1,0.12305799,-0.87694201\n0,0.4692355,0.13851715,0,1,0.39224735,-0.60775265\n0,0.13851715,0.13851715,0,1,0.14613136,-0.85386864\n270,0.16928165,0.438471,0,1,0.12305799,-0.87694201\n270,0.13851715,0.5307645,0,1,0.39224735,-0.60775265\n270,0.13851715,0.86148285,0,1,0.14613136,-0.85386864\n180,0.438471,0.83071835,0,1,0.12305799,-0.87694201\n180,0.5307645,0.86148285,0,1,0.39224735,-0.60775265\n"),!1),_f(wf.ParsePatFile("\n*CELTIC-03,CELTIC-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n90,6.35,13.97,0,25.4,5.08,-20.32\n90,19.05,6.35,0,25.4,5.08,-20.32\n0,6.35,6.35,0,25.4,12.7,-12.7\n270,6.35,11.43,0,25.4,5.08,-20.32\n90,3.81,3.81,0,25.4,7.62,-17.78\n180,21.59,3.81,0,25.4,17.78,-7.62\n270,21.59,11.43,0,25.4,7.62,-17.78\n270,21.59,21.59,0,25.4,7.62,-17.78\n0,3.81,21.59,0,25.4,17.78,-7.62\n90,3.81,13.97,0,25.4,7.62,-17.78\n270,19.05,19.05,0,25.4,5.08,-20.32\n0,6.35,19.05,0,25.4,12.7,-12.7\n90,13.97,6.35,0,25.4,12.7,-12.7\n90,11.43,6.35,0,25.4,12.7,-12.7\n270,13.97,3.81,0,25.4,7.62,-17.78\n90,11.43,-3.81,0,25.4,7.62,-17.78\n180,11.43,11.43,0,25.4,22.86,-2.54\n0,-11.43,13.97,0,25.4,22.86,-2.54\n"),!1),_f(wf.ParsePatFile("\n*CELTIC-04,CELTIC-04\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in mm as metric QCAD3 pattern\n45,3.81,13.97,17.960512212,17.960512212,12.57235865,-23.348666028\n135,21.59,13.97,17.960512212,17.960512212,12.57235865,-23.348666028\n45,12.7,2.54,17.960512212,17.960512212,12.57235865,-23.348666028\n315,3.81,11.43,17.960512212,17.960512212,12.57235865,-23.348666028\n135,12.7,5.08,17.960512212,17.960512212,8.980256106,-26.940768318\n225,19.05,11.43,17.960512212,17.960512212,8.980256106,-26.940768318\n315,12.7,20.32,17.960512212,17.960512212,8.980256106,-26.940768318\n45,6.35,13.97,17.960512212,17.960512212,8.980256106,-26.940768318\n90,13.97,6.35,0,25.4,12.7,-12.7\n90,11.43,6.35,0,25.4,12.7,-12.7\n270,13.97,3.81,0,25.4,7.62,-17.78\n90,11.43,-3.81,0,25.4,7.62,-17.78\n180,11.43,11.43,0,25.4,22.86,-2.54\n0,-11.43,13.97,0,25.4,22.86,-2.54\n"),!1),_f(wf.ParsePatFile("\n*CIRCLES-02,CIRCLES-02\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n0,0.959092,0.471116,0,1,0,-1\n0,0.956373,0.442347,0,1,0,-1\n0,0.951852,0.413805,0,1,0,-1\n0,0.945548,0.385603,0,1,0,-1\n0,0.937486,0.357852,0,1,0,-1\n0,0.927697,0.330663,0,1,0,-1\n0,0.91622,0.304142,0,1,0,-1\n0,0.903101,0.278393,0,1,0,-1\n0,0.888391,0.25352,0,1,0,-1\n0,0.872148,0.229619,0,1,0,-1\n0,0.854436,0.206785,0,1,0,-1\n0,0.835326,0.185108,0,1,0,-1\n0,0.814892,0.164674,0,1,0,-1\n0,0.793215,0.145564,0,1,0,-1\n0,0.770381,0.127852,0,1,0,-1\n0,0.74648,0.111609,0,1,0,-1\n0,0.721607,0.096899,0,1,0,-1\n0,0.695858,0.08378,0,1,0,-1\n0,0.669337,0.072303,0,1,0,-1\n0,0.642148,0.062514,0,1,0,-1\n0,0.614397,0.054452,0,1,0,-1\n0,0.586195,0.048148,0,1,0,-1\n0,0.557653,0.043627,0,1,0,-1\n0,0.528884,0.040908,0,1,0,-1\n0,0.5,0.04,0,1,0,-1\n0,0.471116,0.040908,0,1,0,-1\n0,0.442347,0.043627,0,1,0,-1\n0,0.413805,0.048148,0,1,0,-1\n0,0.385603,0.054452,0,1,0,-1\n0,0.357852,0.062514,0,1,0,-1\n0,0.330663,0.072303,0,1,0,-1\n0,0.304142,0.08378,0,1,0,-1\n0,0.278393,0.096899,0,1,0,-1\n0,0.25352,0.111609,0,1,0,-1\n0,0.229619,0.127852,0,1,0,-1\n0,0.206785,0.145564,0,1,0,-1\n0,0.185108,0.164674,0,1,0,-1\n0,0.164674,0.185108,0,1,0,-1\n0,0.145564,0.206785,0,1,0,-1\n0,0.127852,0.229619,0,1,0,-1\n0,0.111609,0.25352,0,1,0,-1\n0,0.096899,0.278393,0,1,0,-1\n0,0.08378,0.304142,0,1,0,-1\n0,0.072303,0.330663,0,1,0,-1\n0,0.062514,0.357852,0,1,0,-1\n0,0.054452,0.385603,0,1,0,-1\n0,0.048148,0.413805,0,1,0,-1\n0,0.043627,0.442347,0,1,0,-1\n0,0.040908,0.471116,0,1,0,-1\n0,0.04,0.5,0,1,0,-1\n0,0.040908,0.528884,0,1,0,-1\n0,0.043627,0.557653,0,1,0,-1\n0,0.048148,0.586195,0,1,0,-1\n0,0.054452,0.614397,0,1,0,-1\n0,0.062514,0.642148,0,1,0,-1\n0,0.072303,0.669337,0,1,0,-1\n0,0.08378,0.695858,0,1,0,-1\n0,0.096899,0.721607,0,1,0,-1\n0,0.111609,0.74648,0,1,0,-1\n0,0.127852,0.770381,0,1,0,-1\n0,0.145564,0.793215,0,1,0,-1\n0,0.164674,0.814892,0,1,0,-1\n0,0.185108,0.835326,0,1,0,-1\n0,0.206785,0.854436,0,1,0,-1\n0,0.229619,0.872148,0,1,0,-1\n0,0.25352,0.888391,0,1,0,-1\n0,0.278393,0.903101,0,1,0,-1\n0,0.304142,0.91622,0,1,0,-1\n0,0.330663,0.927697,0,1,0,-1\n0,0.357852,0.937486,0,1,0,-1\n0,0.385603,0.945548,0,1,0,-1\n0,0.413805,0.951852,0,1,0,-1\n0,0.442347,0.956373,0,1,0,-1\n0,0.471116,0.959092,0,1,0,-1\n0,0.5,0.96,0,1,0,-1\n0,0.528884,0.959092,0,1,0,-1\n0,0.557653,0.956373,0,1,0,-1\n0,0.586195,0.951852,0,1,0,-1\n0,0.614397,0.945548,0,1,0,-1\n0,0.642148,0.937486,0,1,0,-1\n0,0.669337,0.927697,0,1,0,-1\n0,0.695858,0.91622,0,1,0,-1\n0,0.721607,0.903101,0,1,0,-1\n0,0.74648,0.888391,0,1,0,-1\n0,0.770381,0.872148,0,1,0,-1\n0,0.793215,0.854436,0,1,0,-1\n0,0.814892,0.835326,0,1,0,-1\n0,0.835326,0.814892,0,1,0,-1\n0,0.854436,0.793215,0,1,0,-1\n0,0.872148,0.770381,0,1,0,-1\n0,0.888391,0.74648,0,1,0,-1\n0,0.903101,0.721607,0,1,0,-1\n0,0.91622,0.695858,0,1,0,-1\n0,0.927697,0.669337,0,1,0,-1\n0,0.937486,0.642148,0,1,0,-1\n0,0.945548,0.614397,0,1,0,-1\n0,0.951852,0.586195,0,1,0,-1\n0,0.956373,0.557653,0,1,0,-1\n0,0.959092,0.528884,0,1,0,-1\n0,0.96,0.5,0,1,0,-1\n"),!1),_f(wf.ParsePatFile("\n*CIRCLES,CIRCLES\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n0,0.934583,0.431169,0,1,0,-1\n0,0.918465,0.364033,0,1,0,-1\n0,0.892043,0.300244,0,1,0,-1\n0,0.855967,0.241374,0,1,0,-1\n0,0.811127,0.188873,0,1,0,-1\n0,0.758626,0.144033,0,1,0,-1\n0,0.699756,0.107957,0,1,0,-1\n0,0.635967,0.081535,0,1,0,-1\n0,0.568831,0.065417,0,1,0,-1\n0,0.5,0.06,0,1,0,-1\n0,0.431169,0.065417,0,1,0,-1\n0,0.364033,0.081535,0,1,0,-1\n0,0.300244,0.107957,0,1,0,-1\n0,0.241374,0.144033,0,1,0,-1\n0,0.188873,0.188873,0,1,0,-1\n0,0.144033,0.241374,0,1,0,-1\n0,0.107957,0.300244,0,1,0,-1\n0,0.081535,0.364033,0,1,0,-1\n0,0.065417,0.431169,0,1,0,-1\n0,0.06,0.5,0,1,0,-1\n0,0.065417,0.568831,0,1,0,-1\n0,0.081535,0.635967,0,1,0,-1\n0,0.107957,0.699756,0,1,0,-1\n0,0.144033,0.758626,0,1,0,-1\n0,0.188873,0.811127,0,1,0,-1\n0,0.241374,0.855967,0,1,0,-1\n0,0.300244,0.892043,0,1,0,-1\n0,0.364033,0.918465,0,1,0,-1\n0,0.431169,0.934583,0,1,0,-1\n0,0.5,0.94,0,1,0,-1\n0,0.568831,0.934583,0,1,0,-1\n0,0.635967,0.918465,0,1,0,-1\n0,0.699756,0.892043,0,1,0,-1\n0,0.758626,0.855967,0,1,0,-1\n0,0.811127,0.811127,0,1,0,-1\n0,0.855967,0.758626,0,1,0,-1\n0,0.892043,0.699756,0,1,0,-1\n0,0.918465,0.635967,0,1,0,-1\n0,0.934583,0.568831,0,1,0,-1\n0,0.94,0.5,0,1,0,-1\n"),!1),_f(wf.ParsePatFile("\n*CLAY,CLAY\n0, 0,0, 0,.1875\n0, 0,.03125, 0,.1875\n0, 0,.0625, 0,.1875\n0, 0,.125, 0,.1875, .1875,-.125\n"),!1),_f(wf.ParsePatFile("\n*CORK,CORK\n0, 0,0, 0,.125\n135, .0625,-.0625, 0,.35355339, .1767767,-.1767767\n135, .09375,-.0625, 0,.35355339, .1767767,-.1767767\n135, .125,-.0625, 0,.35355339, .1767767,-.1767767\n"),!1),_f(wf.ParsePatFile("\n*CROSS,CROSS\n0, 0,0, .25,.25, .125,-.375\n90, .0625,-.0625, .25,.25, .125,-.375\n"),!1),_f(wf.ParsePatFile("\n*DASH,DASH\n0, 0,0, .125,.125, .125,-.125\n"),!1),_f(wf.ParsePatFile("\n*DOLMIT,DOLMIT\n0, 0,0, 0,.25\n45, 0,0, 0,.70710678, .35355339,-.70710768\n"),!1),_f(wf.ParsePatFile("\n*DOTS,DOTS\n0, 0,0, .03125,.0625, 0,-.0625\n"),!1),_f(wf.ParsePatFile("\n*EARTH,EARTH\n0, 0,0, .25,.25, .25,-.25\n0, 0,.09375, .25,.25, .25,-.25\n0, 0,.1875, .25,.25, .25,-.25\n90, .03125,.21875, .25,.25, .25,-.25\n90, .125,.21875, .25,.25, .25,-.25\n90, .21875,.21875, .25,.25, .25,-.25\n"),!1),_f(wf.ParsePatFile("\n*ESCHER,ESCHER\n60, 0,0, -.6,1.03923048, 1.1,-.1\n180, 0,0, -.6,1.03923048, 1.1,-.1\n300, 0,0, .6,1.03923048, 1.1,-.1\n60, .1,0, -.6,1.03923048, .2,-1\n300, .1,0, .6,1.03923048, .2,-1\n60, -.05,.08660254, -.6,1.03923048, .2,-1\n180, -.05,.08660254, -.6,1.03923048, .2,-1\n300, -.05,-.08660254, .6,1.03923048, .2,-1\n180, -.05,-.08660254, -.6,1.03923048, .2,-1\n60, -.4,0, -.6,1.03923048, .2,-1\n300, -.4,0, .6,1.03923048, .2,-1\n60, .2,-.34641016, -.6,1.03923048, .2,-1\n180, .2,-.34641016, -.6,1.03923048, .2,-1\n300, .2,.34641016, .6,1.03923048, .2,-1\n180, .2,.34641016, -.6,1.03923048, .2,-1\n0, .2,.17320508, -.6,1.03923048, .7,-.5\n0, .2,-.17320508, -.6,1.03923048, .7,-.5\n120, .05,.25980762, .6,1.03923048, .7,-.5\n120, -.25,.08660254, .6,1.03923048, .7,-.5\n240, -.25,-.08660254, .6,1.03923048, .7,-.5\n240, .05,-.25980762, .6,1.03923048, .7,-.5\n"),!1),_f(wf.ParsePatFile("\n*EXPLOSION,EXPLOSION\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n270,0.45,0.11,0,1,0.11,-0.89\n143.130102,0.49,0.08,3.6,0.2,0.05,-4.95\n270,0.49,0.17,0,1,0.09,-0.91\n112.380135,0.56,0,12.99988621,0.05439283,0.18384776,-18.20092855\n75.256437,0.51,0.81,4.12279145,0.05089866,0.19646883,-19.45041388\n287.525568,0.45,1,3.16187936,0.05018856,0.19924859,-19.72561026\n135,0.06,0.49,0.70710678,0.70710678,0.08485281,-1.32936075\n26.565051,0,0.46,1.34164079,0.4472136,0.06708204,-2.16898594\n353.884496,0.72,0.49,19.10494017,0.03551104,0.28160256,-27.87865312\n192.094757,1,0.55,9.2192799,0.06984303,0.28635642,-14.03146464\n3.691386,0.69,0.38,15.03326191,0.03219114,0.31064449,-30.75380464\n136.080924,0.96,0.12,36.06936773,0.02667853,0.3748333,-37.10849633\n336.037511,0.87,0.16,7.61509624,0.10153462,0.09848858,-9.75036922\n123.690068,0.97,0.01,1.38675049,0.2773501,0.18027756,-3.42527371\n324.462322,0.62,0.26,3.6036768,0.11624764,0.43011626,-8.172209\n117.645975,0.73,0.05,21.47086912,0.04218245,0.23706539,-23.46947379\n326.309932,0.55,0.17,2.21880078,0.2773501,0.21633308,-3.3892182\n106.38954,0.6,0,10.44015399,0.05643326,0.17720045,-17.5428447\n153.434949,0.12,0.34,0.89442719,0.4472136,0.13416408,-2.1019039\n64.798876,0.04,0.17,16.55285979,0.05322463,0.18788294,-18.60041129\n202.619865,0.16,0.22,7.61538462,0.07692308,0.13,-12.87\n59.036243,0.1,0.12,2.22948161,0.17149859,0.11661904,-5.71433286\n211.75948,0.31,0.25,9.43389425,0.04048882,0.24698178,-24.45119629\n79.215702,0.27,0.04,16.27875339,0.04677803,0.21377558,-21.16378274\n212.471192,0.38,0.11,3.60473545,0.0766965,0.13038405,-12.90802076\n63.434949,0.35,0.05,0.89442719,0.4472136,0.06708204,-2.16898594\n135,0.4,0,0.70710678,0.70710678,0.07071068,-1.34350288\n74.357754,0.33,0.75,18.68150198,0.03851856,0.2596151,-25.70189487\n333.434949,0.03,0.9,0.89442719,0.4472136,0.3354102,-1.90065778\n110.556045,0.18,0.5,5.38389277,0.11704115,0.42720019,-8.11680356\n330.945396,0,0.6,2.23395748,0.09712859,0.2059126,-10.08971754\n99.462322,0.63,0.82,5.09636861,0.16439899,0.18248288,-5.90027965\n222.70939,0.76,0.94,1.41308355,0.05652334,0.17691806,-17.51488795\n74.744881,0.73,0.83,4.12217269,0.0877058,0.11401754,-11.28773671\n208.61046,0.95,0.95,10.29532081,0.07980869,0.25059928,-12.2793648\n62.744672,0.78,0.62,2.2359057,0.02693862,0.37121422,-36.75020816\n212.275644,0.97,0.74,13.03832887,0.04449942,0.22472205,-22.247483\n55.00798,0.9,0.64,3.60462045,0.08192319,0.12206556,-12.08449006\n158.198591,1,0.6,3.15682075,0.18569534,0.1077033,-5.27746151\n51.911227,0.59,0.51,29.20615599,0.02127178,0.47010637,-46.54053072\n153.434949,0.65,0.48,0.89442719,0.4472136,0.06708204,-2.16898594\n35.537678,0.58,0.43,4.99864847,0.11624764,0.08602325,-8.51630201\n129.289407,0.76,0.21,7.80993275,0.07035975,0.28425341,-13.928417\n322.30576,0.54,0.38,16.40118003,0.0359675,0.27802878,-27.52484877\n77.905243,0.51,0.24,5.09854116,0.06984303,0.14317821,-14.17464285\n282.994617,0.48,0.37,4.12242429,0.07495317,0.13341664,-13.20824742\n62.525568,0.35,0.12,2.23578634,0.03548867,0.28178006,-27.89622555\n267.137595,0.36,0.32,0.99875234,0.04993762,0.20024984,-19.82473455\n12.994617,0.1,0.26,4.12242429,0.07495317,0.26683328,-13.07483078\n211.75948,0.31,0.39,9.43389425,0.04048882,0.24698178,-24.45119629\n318.366461,0.22,0.47,10.62982142,0.08304548,0.12041595,-11.92117863\n189.462322,0.28,0.48,5.09636861,0.16439899,0.06082763,-6.0219349\n297.299572,0.12,0.79,32.64964285,0.02866518,0.34885527,-34.53667181\n132.273689,0.32,0.57,1.41261287,0.06726728,0.29732137,-14.56874737\n282.994617,0.29,0.7,4.12242429,0.07495317,0.13341664,-13.20824742\n140.194429,0.41,0.6,6.401844,0.12803688,0.15620499,-7.65404468\n268.363423,0.42,0.95,0.99959209,0.02855977,0.35014283,-34.66413997\n102.200469,0.5,0.58,23.53718977,0.0264166,0.37854986,-37.4764366\n250.016893,0.58,0.8,3.16112333,0.08543577,0.234094,-11.47060591\n84.559668,0.56,0.59,11.04525929,0.04740455,0.21095023,-20.88407288\n222.184443,0.88,0.88,14.86605071,0.02315584,0.43185646,-42.75378931\n"),!1),_f(wf.ParsePatFile("\n*FLEX,FLEX\n0, 0,0, 0,.25, .25,-.25\n45, .25,0, .1767767,.1767767, .0625,-.22855339,.0625,-.35355339\n"),!1),_f(wf.ParsePatFile("\n*GRASS,GRASS\n90, 0,0, .70710678,.70710678, .1875,-1.22671356\n45, 0,0, 0,1, .1875,-.8125\n135, 0,0, 0,1, .1875,-.8125\n"),!1),_f(wf.ParsePatFile("\n*GRATE,GRATE\n0, 0,0, 0,.03125\n90, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*GRAVEL-01,GRAVEL-01\n;Optimize to replace existing GRAVEL Pattern\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n159.443955,0.16,0.13,3.16011097,0.11704115,0.17088007,-8.37312367\n114.775141,0.22,0,2.23497695,0.06984303,0.14317821,-14.17464285\n249.443955,0.32,0.08,3.16011097,0.11704115,0.08544004,-8.45856371\n186.009006,0.51,0.1,9.05523386,0.05234239,0.19104973,-18.91392344\n165.963757,0.71,0.05,0.9701425,0.24253563,0.20615528,-3.91695034\n101.309932,0.72,0,4.11843884,0.19611614,0.0509902,-5.04802932\n243.434949,0.84,0.14,0.89442719,0.4472136,0.15652476,-2.07954322\n355.426079,0.49,0.13,13.03834384,0.03987261,0.25079872,-24.82907368\n300.256437,0.42,0.25,5.83050758,0.07198158,0.13892444,-13.75351955\n228.012788,0.6,0.45,12.04136517,0.07432941,0.26907248,-13.18455157\n180,0.86,0.45,0,1,0.26,-0.74\n303.690068,0.62,0.62,1.38675049,0.2773501,0.14422205,-3.46132922\n225,0.72,0.72,0.70710678,0.70710678,0.14142136,-1.27279221\n110.224859,0.08,0.23,8.54386101,0.04938648,0.20248457,-20.04597216\n177.273689,0.29,0.22,0.99886814,0.04756515,0.21023796,-20.81355808\n217.69424,0.51,0.39,11.40169752,0.0359675,0.27802878,-27.52484877\n252.255328,0.59,0.64,23.08676133,0.03809697,0.26248809,-25.9863214\n301.429566,0.48,0.82,15.26426391,0.04740455,0.21095023,-20.88407288\n355.236358,0.24,0.84,0.99654576,0.08304548,0.24083189,-11.80076269\n43.66778,0.02,0.63,1.41383129,0.0328798,0.30413813,-30.10967452\n87.273689,0.01,0.42,0.99886814,0.04756515,0.21023796,-20.81355808\n30.963757,0.62,0.71,3.60147029,0.17149859,0.17492856,-5.65602334\n291.801409,0.58,0.81,2.22834406,0.18569534,0.1077033,-5.27746151\n203.198591,0.65,0.84,2.23220936,0.13130643,0.07615773,-7.53961537\n161.565051,0.77,0.8,0.9486833,0.31622777,0.12649111,-3.03578655\n4.969741,0.4,0.88,11.04527609,0.04331481,0.23086793,-22.85592483\n16.38954,0,0.81,10.44015399,0.05643326,0.17720045,-17.5428447\n197.354025,1,0.19,3.16171493,0.059655,0.16763055,-16.59542407\n74.054604,0.95,0.22,4.12081692,0.13736056,0.1456022,-7.13450769\n27.645975,0.74,0.11,21.47086912,0.04218245,0.23706539,-23.46947379\n145.304846,0.99,0.36,3.60499653,0.06324555,0.15811388,-15.65327442\n353.157227,0.7,0.5,17.1171967,0.03971507,0.25179357,-24.92756306\n171.469234,0.92,0.69,7.07089492,0.04944682,0.20223748,-20.02151093\n138.814075,1,0.62,9.21906451,0.09407209,0.10630146,-10.52384435\n90,1,0.56,0,1,0.06,-0.94\n60.945396,0.95,0.47,2.23395748,0.09712859,0.1029563,-10.19267384\n343.61046,0.83,0.86,7.27989116,0.05643326,0.17720045,-17.5428447\n293.198591,0.77,1,2.23220936,0.13130643,0.15231546,-7.46345764\n48.012788,0.63,0.9,12.04136517,0.07432941,0.13453624,-13.31908781\n312.510447,0.29,1,1.41287877,0.06142951,0.16278821,-16.11603239\n70.346176,0.17,0.86,3.16156213,0.06726728,0.14866069,-14.71740806\n"),!1),_f(wf.ParsePatFile("\n*GRAVEL,GRAVEL\n228.0128, .72,1, 12.041365,.074329, .134536,-13.319088\n184.9697, .63,.9, -12.041517,.043315, .230868,-22.855925\n132.5104, .4,.88, -14.865942,.06143, .162788,-16.116032\n267.2737, .01,.63, -20.024928,.047565, .210238,-20.813558\n292.8337, 0,.42, -12.99991,.048507, .206155,-20.409373\n357.2737, .08,.23, -20.024928,.047565, .210238,-20.813558\n37.6942, .29,.22, -16.40118,.035968, .278029,-27.524849\n72.2553, .51,.39, 23.086761,.038097, .262488,-25.986321\n121.4296, .59,.64, 15.264264,.047405, .21095,-20.884073\n175.2364, .48,.82, -11.045049,.083045, .240832,-11.800763\n222.3974, .24,.84, 16.278789,.032108, .311448,-30.833375\n138.8141, 1,.62, 9.219065,.094072, .106301,-10.523844\n171.4692, .92,.69, -13.152853,.049447, .202237,-20.021511\n225, .72,.72, .707107,.707107, .141421,-1.272792\n203.1986, .65,.84, -5.383564,.131306, .076158,-7.539615\n291.8014, .58,.81, -3.156821,.185695, .107703,-5.277462\n30.9638, .62,.71, 3.60147,.171499, .174929,-5.656023\n161.5651, .77,.8, -2.213594,.316228, .126491,-3.035787\n16.3895, 0,.81, 10.440154,.056433, .1772,-17.542845\n70.3462, .17,.86, -11.704507,.067267, .148661,-14.717408\n293.1986, .77,1, -5.383564,.131306, .152315,-7.463458\n343.6105, .83,.86, -10.440154,.056433, .1772,-17.542845\n339.444, 0,.19, -5.383893,.117041, .17088,-8.373124\n294.7751, .16,.13, -12.082844,.069843, .143178,-14.174643\n66.8014, .78,0, 5.383564,.131306, .152315,-7.463458\n17.354, .84,.14, -13.60134,.059655, .167631,-16.595424\n69.444, .29,0, -5.383893,.117041, .08544,-8.458564\n101.3099, .72,0, 4.118439,.196116, .05099,-5.048029\n165.9638, .71,.05, -3.152963,.242536, .206155,-3.91695\n186.009, .51,.1, -10.049739,.052342, .19105,-18.913923\n303.6901, .62,.62, -2.218801,.27735, .144222,-3.461329\n353.1572, .7,.5, 17.117197,.039715, .251794,-24.927563\n60.9454, .95,.47, -8.061673,.097129, .102956,-10.192674\n90, 1,.56, 1,1, .06,-.94\n120.2564, .49,.13, -8.061936,.071982, .138924,-13.75352\n48.0128, .42,.25, 12.041365,.074329, .269072,-13.184552\n0, .6,.45, 1,1, .26,-.74\n325.3048, .86,.45, -12.206392,.063246, .158114,-15.653274\n254.0546, .99,.36, 4.120817,.137361, .145602,-7.134508\n207.646, .95,.22, 21.470869,.042182, .237065,-23.469474\n175.4261, .74,.11, 13.038344,.039873, .250799,-24.829074\n"),!1),_f(wf.ParsePatFile("\n*HATCH-DOTS,HATCH-DOTS verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n225,0.56554781,0.11554781,0.70710678,0.70710678,0.45245257,-0.96176099\n225,0.25036388,0.20036388,0.70710678,0.70710678,0.6374253,-0.77678826\n225,0.12918503,0.37918503,0.70710678,0.70710678,0.71894383,-0.69526973\n225,0.75438447,0.20438447,0.70710678,0.70710678,0.45245257,-0.96176099\n225,0.30962291,0.15962291,0.70710678,0.70710678,0.6636138,-0.75059977\n225,0.11186858,0.46186858,0.70710678,0.70710678,0.81138689,-0.60282667\n225,0.37918503,0.12918503,0.70710678,0.70710678,0.71894383,-0.69526973\n225,0.11554781,0.56554781,0.70710678,0.70710678,0.45245257,-0.96176099\n225,0.20036388,0.25036388,0.70710678,0.70710678,0.6374253,-0.77678826\n225,0.46186859,0.11186859,0.70710678,0.70710678,0.8113869,-0.60282666\n225,0.20438447,0.75438447,0.70710678,0.70710678,0.45245257,-0.96176099\n225,0.15962291,0.30962291,0.70710678,0.70710678,0.6636138,-0.75059977\n"),!1),_f(wf.ParsePatFile("\n*HATCH-SQRS,HATCH-SQRS verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n225,0.11,0.36,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.86,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.26,0.70710678,0.70710678,0.52325902,-0.89095454\n225,0.76,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.56,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.46,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.26,0.11,0.70710678,0.70710678,0.52325902,-0.89095454\n225,0.11,0.76,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.16,0.70710678,0.70710678,0.38183766,-1.0323759\n225,0.16,0.11,0.70710678,0.70710678,0.38183766,-1.0323759\n225,0.46,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.56,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.36,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.86,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.11,0.66,0.70710678,0.70710678,0.31112698,-1.10308658\n225,0.66,0.11,0.70710678,0.70710678,0.31112698,-1.10308658\n"),!1),_f(wf.ParsePatFile("\n*HEXAGONS,HEXAGONS verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n239.931417,0.21999999,0.99999998,8.06212908,0.04554875,0.21954496,-21.73495344\n239.931417,0.89,0.19,8.06212908,0.04554875,0.21954496,-21.73495344\n300.068583,0.78000001,0.99999998,13.89236932,0.04554875,0.21954496,-21.73495344\n60.068488,0.12,0.5,8.06221498,0.02626129,0.38078866,-37.69807687\n119.931512,0.31,0.17,30.01665055,0.02626129,0.38078865,-37.69807687\n300.068583,0.11,0.19,13.89236932,0.04554875,0.21954496,-21.73495344\n180,0.11,0.19,0,1,0.21999996,-0.78000004\n299.931512,0.69,0.83,30.01665055,0.02626129,0.38078865,-37.69807687\n0,0.31,0.83,0,1,0.38,-0.62\n180,0.69,0.17,0,1,0.38,-0.62\n240.068488,0.88,0.5,8.06221498,0.02626129,0.38078866,-37.69807687\n180,0.11,0.81,0,1,0.21999996,-0.78000004\n"),!1),_f(wf.ParsePatFile("\n*HEXJOIN-01,HEXJOIN-01 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n45,0.15,0.65,0.70710678,0.70710678,0.28284271,-1.13137085\n270,0.85,0.65,1,1,0.3,-0.7\n315,0.65,0.85,0.70710678,0.70710678,0.28284271,-1.13137085\n180,0.65,0.15,0,1,0.3,-0.7\n270,0.55,0.15,1,1,0.3,-0.7\n90,0.15,0.35,1,1,0.3,-0.7\n135,0.35,0.15,0.70710678,0.70710678,0.28284271,-1.13137085\n180,0.15,0.55,0,1,0.3,-0.7\n270,0.45,0.15,1,1,0.3,-0.7\n180,0.15,0.45,0,1,0.3,-0.7\n225,0.85,0.35,0.70710678,0.70710678,0.28284271,-1.13137085\n0,0.35,0.85,0,1,0.3,-0.7\n"),!1),_f(wf.ParsePatFile("\n*HEXJOIN-02,HEXJOIN-02 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n270,0.85,0.45,1,1,0.1,-0.9\n315,0.65,0.85,0.70710678,0.70710678,0.28284271,-1.13137085\n270,0.55,0.15,1,1,0.3,-0.7\n180,0.15,0.55,0,1,0.3,-0.7\n180,0.65,0.15,0,1,0.1,-0.9\n45,0.15,0.65,0.70710678,0.70710678,0.28284271,-1.13137085\n90,0.15,0.55,1,1,0.1,-0.9\n180,0.15,0.45,0,1,0.3,-0.7\n180,0.45,0.15,0,1,0.1,-0.9\n270,0.45,0.15,1,1,0.3,-0.7\n90,0.15,0.35,1,1,0.1,-0.9\n0,0.55,0.85,0,1,0.1,-0.9\n135,0.35,0.15,0.70710678,0.70710678,0.28284271,-1.13137085\n0,0.35,0.85,0,1,0.1,-0.9\n225,0.85,0.35,0.70710678,0.70710678,0.28284271,-1.13137085\n270,0.85,0.65,1,1,0.1,-0.9\n"),!1),_f(wf.ParsePatFile("\n*HEX,HEX\n0, 0,0, 0,.21650635, .125,-.25\n120, 0,0, 0,.21650635, .125,-.25\n60, .125,0, 0,.21650635, .125,-.25\n"),!1),_f(wf.ParsePatFile("\n*HOLLY,HOLLY\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n99.462322,0.8,0.11,5.09636861,0.16439899,0.06082763,-6.0219349\n74.744881,0.67,0.08,4.12217269,0.0877058,0.11401754,-11.28773671\n68.198591,0.53,0.15,3.15682075,0.18569534,0.1077033,-5.27746151\n270,0.58,0.37,0,1,0.07,-0.93\n248.198591,0.75,0.35,3.15682075,0.18569534,0.1077033,-5.27746151\n45,0.8,0.2,0.70710678,0.70710678,0.08485281,-1.32936075\n351.869898,0.9,0.13,0.98994949,0.14142136,0.07071068,-7.00035713\n0,0.86,0.13,0,1,0.04,-0.96\n26.565051,0.82,0.11,1.34164079,0.4472136,0.04472136,-2.19134662\n45,0.8,0.09,0.70710678,0.70710678,0.02828427,-1.38592929\n341.565051,0.77,0.1,0.9486833,0.31622777,0.03162278,-3.13065488\n0,0.73,0.1,0,1,0.04,-0.96\n26.565051,0.71,0.09,1.34164079,0.4472136,0.02236068,-2.2137073\n26.565051,0.69,0.08,1.34164079,0.4472136,0.02236068,-2.2137073\n53.130102,0.66,0.04,3.6,0.2,0.05,-4.95\n270,0.66,0.08,0,1,0.04,-0.96\n303.690068,0.64,0.11,1.38675049,0.2773501,0.03605551,-3.56949576\n315,0.62,0.13,0.70710678,0.70710678,0.02828427,-1.38592929\n345.963757,0.58,0.14,0.9701425,0.24253563,0.04123106,-4.08187457\n0,0.54,0.14,0,1,0.04,-0.96\n33.690068,0.51,0.12,1.38675049,0.2773501,0.03605551,-3.56949576\n255.963757,0.52,0.16,0.9701425,0.24253563,0.04123106,-4.08187457\n281.309932,0.51,0.21,4.11843884,0.19611614,0.0509902,-5.04802932\n284.036243,0.5,0.25,3.15296313,0.24253563,0.04123106,-4.08187457\n296.565051,0.48,0.29,1.34164079,0.4472136,0.04472136,-2.19134662\n303.690068,0.46,0.32,1.38675049,0.2773501,0.03605551,-3.56949576\n180,0.5,0.32,0,1,0.04,-0.96\n180,0.53,0.32,0,1,0.03,-0.97\n213.690068,0.56,0.34,1.38675049,0.2773501,0.03605551,-3.56949576\n243.434949,0.57,0.36,0.89442719,0.4472136,0.02236068,-2.2137073\n251.565051,0.58,0.39,0.9486833,0.31622777,0.03162278,-3.13065488\n108.434949,0.59,0.36,2.21359436,0.31622777,0.03162278,-3.13065488\n135,0.61,0.34,0.70710678,0.70710678,0.02828427,-1.38592929\n153.434949,0.63,0.33,0.89442719,0.4472136,0.02236068,-2.2137073\n161.565051,0.66,0.32,0.9486833,0.31622777,0.03162278,-3.13065488\n180,0.69,0.32,0,1,0.03,-0.97\n198.434949,0.72,0.33,2.21359436,0.31622777,0.03162278,-3.13065488\n225,0.74,0.35,0.70710678,0.70710678,0.02828427,-1.38592929\n251.565051,0.75,0.38,0.9486833,0.31622777,0.03162278,-3.13065488\n108.434949,0.76,0.35,2.21359436,0.31622777,0.03162278,-3.13065488\n116.565051,0.78,0.31,1.34164079,0.4472136,0.04472136,-2.19134662\n135,0.81,0.28,0.70710678,0.70710678,0.04242641,-1.37178716\n161.565051,0.84,0.27,0.9486833,0.31622777,0.03162278,-3.13065488\n180,0.87,0.27,0,1,0.03,-0.97\n90,0.87,0.24,0,1,0.03,-0.97\n111.801409,0.89,0.19,2.22834406,0.18569534,0.05385165,-5.33131316\n126.869898,0.92,0.15,1.4,0.2,0.05,-4.95\n149.036243,0.97,0.12,2.22948161,0.17149859,0.05830952,-5.77264238\n338.587031,0.46,0.32,24.69817132,0.01825438,0.54781384,-54.23356986\n338.198591,0.8,0.69,3.15682075,0.18569534,0.05385165,-5.33131316\n323.972627,0.71,0.62,8.60201108,0.07352146,0.13601471,-13.4654558\n315,0.6,0.53,0.70710678,0.70710678,0.11313708,-1.30107648\n135,0.58,0.55,0.70710678,0.70710678,0.07071068,-1.34350288\n126.869898,0.68,0.65,1.4,0.2,0.1,-4.9\n105.945396,0.77,0.72,3.15929297,0.13736056,0.0728011,-7.20730879\n30.963757,0.87,0.8,3.60147029,0.17149859,0.05830952,-5.77264238\n14.036243,0.83,0.79,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.8,0.79,0,1,0.03,-0.97\n341.565051,0.77,0.8,0.9486833,0.31622777,0.03162278,-3.13065488\n333.434949,0.75,0.81,0.89442719,0.4472136,0.02236068,-2.2137073\n63.434949,0.74,0.79,0.89442719,0.4472136,0.02236068,-2.2137073\n45,0.72,0.77,0.70710678,0.70710678,0.02828427,-1.38592929\n33.690068,0.69,0.75,1.38675049,0.2773501,0.03605551,-3.56949576\n18.434949,0.66,0.74,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.63,0.74,0,1,0.03,-0.97\n341.565051,0.6,0.75,0.9486833,0.31622777,0.03162278,-3.13065488\n108.434949,0.61,0.72,2.21359436,0.31622777,0.03162278,-3.13065488\n90,0.61,0.69,0,1,0.03,-0.97\n75.963757,0.6,0.65,0.9701425,0.24253563,0.04123106,-4.08187457\n45,0.57,0.62,0.70710678,0.70710678,0.04242641,-1.37178716\n14.036243,0.53,0.61,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.5,0.61,0,1,0.03,-0.97\n126.869898,0.53,0.57,1.4,0.2,0.05,-4.95\n90,0.53,0.54,0,1,0.03,-0.97\n75.963757,0.52,0.5,0.9701425,0.24253563,0.04123106,-4.08187457\n56.309932,0.5,0.47,2.21880078,0.2773501,0.03605551,-3.56949576\n191.309932,0.55,0.48,4.11843884,0.19611614,0.0509902,-5.04802932\n168.690068,0.6,0.47,0.98058068,0.19611614,0.0509902,-5.04802932\n161.565051,0.66,0.45,0.9486833,0.31622777,0.06324555,-3.09903211\n143.130102,0.7,0.42,3.6,0.2,0.05,-4.95\n270,0.7,0.43,0,1,0.01,-0.99\n270,0.7,0.46,0,1,0.03,-0.97\n243.434949,0.72,0.5,0.89442719,0.4472136,0.04472136,-2.19134662\n213.690068,0.75,0.52,1.38675049,0.2773501,0.03605551,-3.56949576\n198.434949,0.78,0.53,2.21359436,0.31622777,0.03162278,-3.13065488\n180,0.82,0.53,0,1,0.04,-0.96\n146.309932,0.85,0.51,2.21880078,0.2773501,0.03605551,-3.56949576\n303.690068,0.83,0.54,1.38675049,0.2773501,0.03605551,-3.56949576\n270,0.83,0.57,0,1,0.03,-0.97\n270,0.83,0.61,0,1,0.04,-0.96\n243.434949,0.85,0.65,0.89442719,0.4472136,0.04472136,-2.19134662\n225,0.87,0.67,0.70710678,0.70710678,0.02828427,-1.38592929\n296.565051,0.86,0.69,1.34164079,0.4472136,0.02236068,-2.2137073\n270,0.86,0.71,0,1,0.02,-0.98\n255.963757,0.87,0.75,0.9701425,0.24253563,0.04123106,-4.08187457\n243.434949,0.89,0.79,0.89442719,0.4472136,0.04472136,-2.19134662\n233.130102,0.92,0.83,3.6,0.2,0.05,-4.95\n40.601295,0.5,0.47,1.41004798,0.10846523,0.55317267,-8.66637179\n195.945396,0.26,0.54,3.15929297,0.13736056,0.0728011,-7.20730879\n5.194429,0.29,0.55,10.04946781,0.09053575,0.11045361,-10.93490741\n19.983107,0.28,0.68,8.54357658,0.08543577,0.117047,-11.58765291\n185.710593,0.23,0.68,9.05483843,0.09950372,0.10049876,-9.94937686\n164.054604,0.22,0.79,4.12081692,0.13736056,0.0728011,-7.20730879\n45,0.27,0.79,0.70710678,0.70710678,0.05656854,-1.35764502\n90,0.21,0.92,0,1,0.04,-0.96\n75.963757,0.2,0.88,0.9701425,0.24253563,0.04123106,-4.08187457\n243.434949,0.31,0.47,0.89442719,0.4472136,0.04472136,-2.19134662\n236.309932,0.33,0.5,2.21880078,0.2773501,0.03605551,-3.56949576\n225,0.36,0.53,0.70710678,0.70710678,0.04242641,-1.37178716\n213.690068,0.39,0.55,1.38675049,0.2773501,0.03605551,-3.56949576\n189.462322,0.45,0.56,5.09636861,0.16439899,0.06082763,-6.0219349\n333.434949,0.43,0.57,0.89442719,0.4472136,0.02236068,-2.2137073\n326.309932,0.4,0.59,2.21880078,0.2773501,0.03605551,-3.56949576\n303.690068,0.38,0.62,1.38675049,0.2773501,0.03605551,-3.56949576\n270,0.38,0.66,0,1,0.04,-0.96\n251.565051,0.39,0.69,0.9486833,0.31622777,0.03162278,-3.13065488\n236.309932,0.41,0.72,2.21880078,0.2773501,0.03605551,-3.56949576\n213.690068,0.44,0.74,1.38675049,0.2773501,0.03605551,-3.56949576\n0,0.4,0.74,0,1,0.04,-0.96\n333.434949,0.36,0.76,0.89442719,0.4472136,0.04472136,-2.19134662\n306.869898,0.33,0.8,1.4,0.2,0.05,-4.95\n284.036243,0.32,0.84,3.15296313,0.24253563,0.04123106,-4.08187457\n341.565051,0.29,0.85,0.9486833,0.31622777,0.03162278,-3.13065488\n326.309932,0.26,0.87,2.21880078,0.2773501,0.03605551,-3.56949576\n303.690068,0.24,0.9,1.38675049,0.2773501,0.03605551,-3.56949576\n296.565051,0.21,0.96,1.34164079,0.4472136,0.06708204,-2.16898594\n56.309932,0.18,0.85,2.21880078,0.2773501,0.03605551,-3.56949576\n45,0.16,0.83,0.70710678,0.70710678,0.02828427,-1.38592929\n33.690068,0.13,0.81,1.38675049,0.2773501,0.03605551,-3.56949576\n116.565051,0.14,0.79,1.34164079,0.4472136,0.02236068,-2.2137073\n108.434949,0.15,0.76,2.21359436,0.31622777,0.03162278,-3.13065488\n90,0.15,0.72,0,1,0.04,-0.96\n63.434949,0.13,0.68,0.89442719,0.4472136,0.04472136,-2.19134662\n33.690068,0.1,0.66,1.38675049,0.2773501,0.03605551,-3.56949576\n165.963757,0.14,0.65,0.9701425,0.24253563,0.04123106,-4.08187457\n143.130102,0.18,0.62,3.6,0.2,0.05,-4.95\n116.565051,0.2,0.58,1.34164079,0.4472136,0.04472136,-2.19134662\n75.963757,0.19,0.54,0.9701425,0.24253563,0.04123106,-4.08187457\n63.434949,0.17,0.5,0.89442719,0.4472136,0.04472136,-2.19134662\n180,0.21,0.5,0,1,0.04,-0.96\n165.963757,0.25,0.49,0.9701425,0.24253563,0.04123106,-4.08187457\n135,0.27,0.47,0.70710678,0.70710678,0.02828427,-1.38592929\n116.565051,0.29,0.43,1.34164079,0.4472136,0.04472136,-2.19134662\n278.583621,0.21,0.96,33.37663332,0.01865659,0.53600373,-53.0643694\n104.036243,0.3,0.2,3.15296313,0.24253563,0.04123106,-4.08187457\n123.690068,0.32,0.17,1.38675049,0.2773501,0.03605551,-3.56949576\n153.434949,0.36,0.15,0.89442719,0.4472136,0.04472136,-2.19134662\n180,0.39,0.15,0,1,0.03,-0.97\n206.565051,0.43,0.17,1.34164079,0.4472136,0.04472136,-2.19134662\n236.309932,0.45,0.2,2.21880078,0.2773501,0.03605551,-3.56949576\n255.963757,0.46,0.24,0.9701425,0.24253563,0.04123106,-4.08187457\n288.434949,0.45,0.27,2.21359436,0.31622777,0.03162278,-3.13065488\n303.690068,0.43,0.3,1.38675049,0.2773501,0.03605551,-3.56949576\n333.434949,0.39,0.32,0.89442719,0.4472136,0.04472136,-2.19134662\n0,0.36,0.32,0,1,0.03,-0.97\n26.565051,0.32,0.3,1.34164079,0.4472136,0.04472136,-2.19134662\n56.309932,0.3,0.27,2.21880078,0.2773501,0.03605551,-3.56949576\n71.565051,0.29,0.24,0.9486833,0.31622777,0.03162278,-3.13065488\n104.036243,0.16,0.31,3.15296313,0.24253563,0.04123106,-4.08187457\n123.690068,0.18,0.28,1.38675049,0.2773501,0.03605551,-3.56949576\n153.434949,0.22,0.26,0.89442719,0.4472136,0.04472136,-2.19134662\n180,0.25,0.26,0,1,0.03,-0.97\n206.565051,0.29,0.28,1.34164079,0.4472136,0.04472136,-2.19134662\n236.309932,0.31,0.31,2.21880078,0.2773501,0.03605551,-3.56949576\n255.963757,0.32,0.35,0.9701425,0.24253563,0.04123106,-4.08187457\n288.434949,0.31,0.38,2.21359436,0.31622777,0.03162278,-3.13065488\n303.690068,0.29,0.41,1.38675049,0.2773501,0.03605551,-3.56949576\n333.434949,0.25,0.43,0.89442719,0.4472136,0.04472136,-2.19134662\n0,0.22,0.43,0,1,0.03,-0.97\n26.565051,0.18,0.41,1.34164079,0.4472136,0.04472136,-2.19134662\n56.309932,0.16,0.38,2.21880078,0.2773501,0.03605551,-3.56949576\n71.565051,0.15,0.35,0.9486833,0.31622777,0.03162278,-3.13065488\n104.036243,0.34,0.38,3.15296313,0.24253563,0.04123106,-4.08187457\n123.690068,0.36,0.35,1.38675049,0.2773501,0.03605551,-3.56949576\n153.434949,0.4,0.33,0.89442719,0.4472136,0.04472136,-2.19134662\n180,0.43,0.33,0,1,0.03,-0.97\n206.565051,0.47,0.35,1.34164079,0.4472136,0.04472136,-2.19134662\n236.309932,0.49,0.38,2.21880078,0.2773501,0.03605551,-3.56949576\n255.963757,0.5,0.42,0.9701425,0.24253563,0.04123106,-4.08187457\n288.434949,0.49,0.45,2.21359436,0.31622777,0.03162278,-3.13065488\n303.690068,0.47,0.48,1.38675049,0.2773501,0.03605551,-3.56949576\n333.434949,0.43,0.5,0.89442719,0.4472136,0.04472136,-2.19134662\n0,0.4,0.5,0,1,0.03,-0.97\n26.565051,0.36,0.48,1.34164079,0.4472136,0.04472136,-2.19134662\n56.309932,0.34,0.45,2.21880078,0.2773501,0.03605551,-3.56949576\n71.565051,0.33,0.42,0.9486833,0.31622777,0.03162278,-3.13065488\n"),!1),_f(wf.ParsePatFile("\n*HONEY,HONEY\n0, 0,0, .1875,.10825317, .125,-.25\n120, 0,0, .1875,.10825317, .125,-.25\n60, 0,0, .1875,.10825317, -.25,.125\n"),!1),_f(wf.ParsePatFile("\n*HOUND,HOUND\n0, 0,0, .25,.0625, 1,-.5\n90, 0,0, -.25,.0625, 1,-.5\n"),!1),_f(wf.ParsePatFile("\n*INSUL,INSUL\n0, 0,0, 0,.375\n0, 0,.125, 0,.375, .125,-.125\n0, 0,.25, 0,.375, .125,-.125\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-01,LATTICE-01 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.08514719,0.4,0,1,0.17029438,-0.82970562\n270,0.6,0.08514719,1,1,0.17029438,-0.82970562\n270,0.4,0.08514719,1,1,0.17029438,-0.82970562\n135,0.5,0.2679899,0.70710678,0.70710678,0.32811183,-1.08610173\n225,0.7320101,0.5,0.70710678,0.70710678,0.32811183,-1.08610173\n45,0.08514719,0.6,0.70710678,0.70710678,0.44526911,-0.96894445\n180,0.08514719,0.6,0,1,0.17029438,-0.82970562\n315,0.5,0.7320101,0.70710678,0.70710678,0.32811183,-1.08610173\n45,0.2679899,0.5,0.70710678,0.70710678,0.32811183,-1.08610173\n315,0.6,0.91485281,0.70710678,0.70710678,0.44526911,-0.96894445\n45,0.6,0.08514719,0.70710678,0.70710678,0.44526911,-0.96894445\n315,0.08514719,0.4,0.70710678,0.70710678,0.44526911,-0.96894445\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-02,LATTICE-02 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.38333333,0.38333333,0,1,0.76666666,-0.23333334\n270,0.61666667,1,1,1,1;,0 Removed 0 IT RENDERS A POINT\n180,0.38333333,0.61666667,0,1,0.76666666,-0.23333334\n270,0.38333333,1,1,1,1,;0 Removed 0 IT RENDERS A POINT\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-03,LATTICE-03 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.38333333,0.38333333,0,1,0.76666666,-0.23333334\n180,0.38333333,0.61666667,0,1,0.76666666,-0.23333334\n270,0.61666667,0.38333333,1,1,0.76666666,-0.23333334\n270,0.38333333,0.38333333,1,1,0.76666666,-0.23333334\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-04,LATTICE-04 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n296.565051,0.15333333,0.46,1.34164079,0.4472136,1.13294111,-1.10312687\n296.565051,0.34000001,0.55333333,1.34164079,0.4472136,1.13294111,-1.10312687\n206.565051,0.46,0.84666667,1.34164079,0.4472136,1.13294111,-1.10312687\n206.565051,0.55333333,0.65999999,1.34164079,0.4472136,1.13294111,-1.10312687\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-05,LATTICE-05\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n0,0.775,0.075,0,1,0.15,-0.85\n180,0.225,0.925,0,1,0.15,-0.85\n180,0.625,0.225,0,1,0.4,-0.6\n180,0.625,0.075,0,1,0.55,-0.45\n270,0.625,0.225,0,1,0.15,-0.85\n270,0.775,0.775,0,1,0.7,-0.3\n270,0.925,0.925,0,1,0.85,-0.15\n0,0.375,0.775,0,1,0.4,-0.6\n0,0.375,0.925,0,1,0.55,-0.45\n90,0.375,0.775,0,1,0.15,-0.85\n90,0.225,0.225,0,1,0.7,-0.3\n90,0.075,0.075,0,1,0.85,-0.15\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-06,LATTICE-06\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n180,0.625,0.375,0,1,0.25,-0.75\n270,0.625,0.625,0,1,0.25,-0.75\n0,0.375,0.625,0,1,0.25,-0.75\n90,0.375,0.375,0,1,0.25,-0.75\n0,0.775,0.075,0,1,0.15,-0.85\n180,0.225,0.925,0,1,0.15,-0.85\n180,0.625,0.225,0,1,0.4,-0.6\n180,0.625,0.075,0,1,0.55,-0.45\n270,0.625,0.225,0,1,0.15,-0.85\n270,0.775,0.775,0,1,0.7,-0.3\n270,0.925,0.925,0,1,0.85,-0.15\n0,0.375,0.775,0,1,0.4,-0.6\n0,0.375,0.925,0,1,0.55,-0.45\n90,0.375,0.775,0,1,0.15,-0.85\n90,0.225,0.225,0,1,0.7,-0.3\n90,0.075,0.075,0,1,0.85,-0.15\n"),!1),_f(wf.ParsePatFile("\n*LATTICE-07, verbose comment\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n270,0.69166667,0.69166666,1,1,0.88333333,-0.11666667\n270,0.80833334,0.69166666,1,1,0.88333333,-0.11666667\n270,0.19166666,0.19166667,1,1,0.88333333,-0.11666667\n270,0.30833333,0.19166667,1,1,0.88333333,-0.11666667\n180,0.69166667,0.30833333,0,1,0.88333333,-0.11666667\n180,0.69166667,0.19166666,0,1,0.88333333,-0.11666667\n180,0.19166667,0.80833334,0,1,0.88333333,-0.11666667\n180,0.19166667,0.69166667,0,1,0.88333333,-0.11666667\n"),!1),_f(wf.ParsePatFile("\n*LEAF-01,LEAF-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n83.659808,0.9,0.2,0.99388373,0.11043153,0.09055385,-8.96483129\n26.565051,0.88,0.19,1.34164079,0.4472136,0.02236068,-2.2137073\n14.036243,0.84,0.18,3.15296313,0.24253563,0.04123106,-4.08187457\n315,0.84,0.18,0.70710678,0.70710678,0.05656854,-1.35764502\n83.659808,0.84,0.18,0.99388373,0.11043153,0.09055385,-8.96483129\n0,0.79,0.18,0,1,0.05,-0.95\n345.963757,0.82,0.12,0.9701425,0.24253563,0.04123106,-4.08187457\n326.309932,0.79,0.14,2.21880078,0.2773501,0.03605551,-3.56949576\n303.690068,0.77,0.17,1.38675049,0.2773501,0.03605551,-3.56949576\n18.434949,0.74,0.16,2.21359436,0.31622777,0.03162278,-3.13065488\n288.434949,0.73,0.19,2.21359436,0.31622777,0.03162278,-3.13065488\n180,0.77,0.19,0,1,0.04,-0.96\n258.690068,0.78,0.24,0.98058068,0.19611614,0.0509902,-5.04802932\n243.434949,0.79,0.26,0.89442719,0.4472136,0.02236068,-2.2137073\n225,0.82,0.29,0.70710678,0.70710678,0.04242641,-1.37178716\n213.690068,0.85,0.31,1.38675049,0.2773501,0.03605551,-3.56949576\n191.309932,0.9,0.32,4.11843884,0.19611614,0.0509902,-5.04802932\n128.659808,0.3,0.42,1.40556386,0.15617376,0.06403124,-6.339093\n143.130102,0.34,0.39,3.6,0.2,0.05,-4.95\n153.434949,0.38,0.37,0.89442719,0.4472136,0.04472136,-2.19134662\n192.528808,0.38,0.37,4.1216787,0.10846523,0.09219544,-9.12734901\n105.945396,0.38,0.37,3.15929297,0.13736056,0.0728011,-7.20730879\n153.434949,0.42,0.35,0.89442719,0.4472136,0.04472136,-2.19134662\n149.036243,0.47,0.32,2.22948161,0.17149859,0.05830952,-5.77264238\n95.710593,0.47,0.32,9.05483843,0.09950372,0.10049876,-9.94937686\n194.931417,0.47,0.32,11.40157229,0.06441566,0.15524175,-15.36893295\n135,0.51,0.28,0.70710678,0.70710678,0.05656854,-1.35764502\n123.690068,0.53,0.25,1.38675049,0.2773501,0.03605551,-3.56949576\n199.653824,0.53,0.25,11.70450662,0.06726728,0.14866069,-14.71740806\n71.565051,0.53,0.25,0.9486833,0.31622777,0.09486833,-3.06740933\n119.054604,0.58,0.16,8.06167266,0.09712859,0.1029563,-10.19267384\n288.434949,0.58,0.14,2.21359436,0.31622777,0.06324555,-3.09903211\n21.801409,0.53,0.12,2.22834406,0.18569534,0.05385165,-5.33131316\n11.309932,0.48,0.11,4.11843884,0.19611614,0.0509902,-5.04802932\n0,0.45,0.11,0,1,0.03,-0.97\n341.565051,0.39,0.13,0.9486833,0.31622777,0.06324555,-3.09903211\n326.309932,0.33,0.17,2.21880078,0.2773501,0.07211103,-3.53344025\n308.659808,0.29,0.22,1.40556386,0.15617376,0.06403124,-6.339093\n300.963757,0.26,0.27,3.60147029,0.17149859,0.05830952,-5.77264238\n285.945396,0.24,0.34,3.15929297,0.13736056,0.0728011,-7.20730879\n270,0.24,0.41,0,1,0.07,-0.93\n279.462322,0.23,0.47,5.09636861,0.16439899,0.06082763,-6.0219349\n285.945396,0.21,0.54,3.15929297,0.13736056,0.0728011,-7.20730879\n123.690068,0.23,0.51,1.38675049,0.2773501,0.03605551,-3.56949576\n161.565051,0.26,0.5,0.9486833,0.31622777,0.03162278,-3.13065488\n171.869898,0.33,0.49,0.98994949,0.14142136,0.07071068,-7.00035713\n171.869898,0.4,0.48,0.98994949,0.14142136,0.07071068,-7.00035713\n161.565051,0.46,0.46,0.9486833,0.31622777,0.06324555,-3.09903211\n161.565051,0.52,0.44,0.9486833,0.31622777,0.06324555,-3.09903211\n146.309932,0.58,0.4,2.21880078,0.2773501,0.07211103,-3.53344025\n119.744881,0.62,0.33,5.82963253,0.12403473,0.08062258,-7.98163517\n111.801409,0.64,0.28,2.22834406,0.18569534,0.05385165,-5.33131316\n90,0.64,0.24,0,1,0.04,-0.96\n75.963757,0.63,0.2,0.9701425,0.24253563,0.04123106,-4.08187457\n56.309932,0.61,0.17,2.21880078,0.2773501,0.03605551,-3.56949576\n63.434949,0.6,0.15,0.89442719,0.4472136,0.02236068,-2.2137073\n126.869898,0.63,0.11,1.4,0.2,0.05,-4.95\n45,0.6,0.08,0.70710678,0.70710678,0.04242641,-1.37178716\n233.130102,0.89,0.04,3.6,0.2,0.05,-4.95\n258.690068,0.07,0.05,0.98058068,0.19611614,0.0509902,-5.04802932\n258.690068,0.14,0.05,0.98058068,0.19611614,0.0509902,-5.04802932\n198.434949,0.26,0.02,2.21359436,0.31622777,0.06324555,-3.09903211\n225,0.31,0.02,0.70710678,0.70710678,0.02828427,-1.38592929\n198.434949,0.34,0.03,2.21359436,0.31622777,0.03162278,-3.13065488\n348.690068,0.29,0.04,0.98058068,0.19611614,0.0509902,-5.04802932\n345.963757,0.25,0.05,0.9701425,0.24253563,0.04123106,-4.08187457\n333.434949,0.21,0.07,0.89442719,0.4472136,0.04472136,-2.19134662\n333.434949,0.15,0.1,0.89442719,0.4472136,0.06708204,-2.16898594\n348.690068,0.1,0.11,0.98058068,0.19611614,0.0509902,-5.04802932\n0,0.07,0.11,0,1,0.03,-0.97\n8.130102,0,0.1,6.08111832,0.14142136,0.07071068,-7.00035713\n236.309932,0.02,0.23,2.21880078,0.2773501,0.03605551,-3.56949576\n236.309932,0.04,0.26,2.21880078,0.2773501,0.03605551,-3.56949576\n213.690068,0.07,0.28,1.38675049,0.2773501,0.03605551,-3.56949576\n0,0.03,0.28,0,1,0.04,-0.96\n326.309932,0,0.3,2.21880078,0.2773501,0.03605551,-3.56949576\n18.434949,0,0.26,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0,0.55,0,1,0.07,-0.93\n14.036243,0.1,0.61,3.15296313,0.24253563,0.04123106,-4.08187457\n21.801409,0.05,0.59,2.22834406,0.18569534,0.05385165,-5.33131316\n30.963757,0,0.56,3.60147029,0.17149859,0.05830952,-5.77264238\n254.054604,0.02,0.66,4.12081692,0.13736056,0.0728011,-7.20730879\n158.198591,0.05,0.69,3.15682075,0.18569534,0.05385165,-5.33131316\n153.434949,0.11,0.66,0.89442719,0.4472136,0.06708204,-2.16898594\n158.198591,0.16,0.64,3.15682075,0.18569534,0.05385165,-5.33131316\n180,0.21,0.64,0,1,0.05,-0.95\n33.690068,0.18,0.62,1.38675049,0.2773501,0.03605551,-3.56949576\n45,0.16,0.6,0.70710678,0.70710678,0.02828427,-1.38592929\n53.130102,0.13,0.56,3.6,0.2,0.05,-4.95\n56.309932,0.09,0.5,2.21880078,0.2773501,0.07211103,-3.53344025\n51.340192,0.05,0.45,4.99756038,0.15617376,0.06403124,-6.339093\n38.659808,0,0.41,1.40556386,0.15617376,0.06403124,-6.339093\n180,0.82,0.48,0,1,0.1,-0.9\n310.601295,0.82,0.48,1.41004798,0.10846523,0.09219544,-9.12734901\n82.405357,0.82,0.48,8.06198693,0.06608186,0.15132746,-14.98141849\n180,0.84,0.48,0,1,0.02,-0.98\n194.036243,0.88,0.49,3.15296313,0.24253563,0.04123106,-4.08187457\n198.434949,0.91,0.5,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.83,0.37,0,1,0.08,-0.92\n348.690068,0.78,0.38,0.98058068,0.19611614,0.0509902,-5.04802932\n321.340192,0.73,0.42,4.99756038,0.15617376,0.06403124,-6.339093\n300.963757,0.7,0.47,3.60147029,0.17149859,0.05830952,-5.77264238\n21.801409,0.65,0.45,2.22834406,0.18569534,0.05385165,-5.33131316\n284.036243,0.64,0.49,3.15296313,0.24253563,0.04123106,-4.08187457\n180,0.7,0.49,0,1,0.06,-0.94\n261.869898,0.71,0.56,0.98994949,0.14142136,0.07071068,-7.00035713\n248.198591,0.73,0.61,3.15682075,0.18569534,0.05385165,-5.33131316\n225,0.77,0.65,0.70710678,0.70710678,0.05656854,-1.35764502\n216.869898,0.81,0.68,1.4,0.2,0.05,-4.95\n198.434949,0.9,0.71,2.21359436,0.31622777,0.09486833,-3.06740933\n153.434949,0.36,0.65,0.89442719,0.4472136,0.06708204,-2.16898594\n170.537678,0.42,0.64,0.98639392,0.16439899,0.06082763,-6.0219349\n188.130102,0.49,0.65,6.08111832,0.14142136,0.07071068,-7.00035713\n201.801409,0.54,0.67,2.22834406,0.18569534,0.05385165,-5.33131316\n219.805571,0.6,0.72,1.40840568,0.12803688,0.0781025,-7.73214718\n18.434949,0.97,0.25,2.21359436,0.31622777,0.03162278,-3.13065488\n33.690068,0.94,0.23,1.38675049,0.2773501,0.03605551,-3.56949576\n0,0.94,0.23,0,1,0.04,-0.96\n80.537678,0.94,0.23,0.98639392,0.16439899,0.06082763,-6.0219349\n36.869898,0.9,0.2,1.4,0.2,0.05,-4.95\n341.565051,0.9,0.2,0.9486833,0.31622777,0.06324555,-3.09903211\n53.130102,0.97,0.16,3.6,0.2,0.05,-4.95\n38.659808,0.92,0.12,1.40556386,0.15617376,0.06403124,-6.339093\n9.462322,0.86,0.11,5.09636861,0.16439899,0.06082763,-6.0219349\n180,0.95,0.32,0,1,0.05,-0.95\n158.198591,1,0.3,3.15682075,0.18569534,0.05385165,-5.33131316\n216.869898,0.93,0.07,1.4,0.2,0.05,-4.95\n206.565051,0.97,0.09,1.34164079,0.4472136,0.04472136,-2.19134662\n198.434949,1,0.1,2.21359436,0.31622777,0.03162278,-3.13065488\n90,0.97,0,0,1,0.02,-0.98\n26.565051,0.96,0.53,1.34164079,0.4472136,0.04472136,-2.19134662\n56.309932,0.96,0.53,2.21880078,0.2773501,0.07211103,-3.53344025\n36.869898,0.96,0.53,1.4,0.2,0.05,-4.95\n30.963757,0.91,0.5,3.60147029,0.17149859,0.05830952,-5.77264238\n78.690068,0.91,0.5,0.98058068,0.19611614,0.15297059,-4.94604893\n156.037511,1,0.46,7.61509624,0.10153462,0.09848858,-9.75036922\n30.963757,0.95,0.38,3.60147029,0.17149859,0.05830952,-5.77264238\n14.036243,0.91,0.37,3.15296313,0.24253563,0.04123106,-4.08187457\n180,1,0.71,0,1,0.1,-0.9\n0,0.86,0.87,0,1,0.09,-0.91\n11.309932,0.95,0.87,4.11843884,0.19611614,0.0509902,-5.04802932\n135,1,0.82,0.70710678,0.70710678,0.07071068,-1.34350288\n0,0.96,0.76,0,1,0.04,-0.96\n345.963757,0.92,0.77,0.9701425,0.24253563,0.04123106,-4.08187457\n333.434949,0.88,0.79,0.89442719,0.4472136,0.04472136,-2.19134662\n315,0.86,0.81,0.70710678,0.70710678,0.02828427,-1.38592929\n306.869898,0.83,0.85,1.4,0.2,0.05,-4.95\n11.309932,0.78,0.84,4.11843884,0.19611614,0.0509902,-5.04802932\n284.036243,0.77,0.88,3.15296313,0.24253563,0.04123106,-4.08187457\n180,0.83,0.88,0,1,0.06,-0.94\n14.036243,0.65,0.89,3.15296313,0.24253563,0.04123106,-4.08187457\n18.434949,0.62,0.88,2.21359436,0.31622777,0.03162278,-3.13065488\n33.690068,0.59,0.86,1.38675049,0.2773501,0.03605551,-3.56949576\n230.194429,0.65,0.78,6.401844,0.12803688,0.0781025,-7.73214718\n239.036243,0.68,0.83,2.22948161,0.17149859,0.05830952,-5.77264238\n236.309932,0.72,0.89,2.21880078,0.2773501,0.07211103,-3.53344025\n213.690068,0.75,0.91,1.38675049,0.2773501,0.03605551,-3.56949576\n198.434949,0.78,0.92,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.74,0.92,0,1,0.04,-0.96\n345.963757,0.7,0.93,0.9701425,0.24253563,0.04123106,-4.08187457\n261.869898,0.84,0.95,0.98994949,0.14142136,0.07071068,-7.00035713\n248.198591,0.86,1,3.15682075,0.18569534,0.05385165,-5.33131316\n36.869898,0.55,0.83,1.4,0.2,0.05,-4.95\n0,0.55,0.83,0,1,0.08,-0.92\n78.690068,0.55,0.83,0.98058068,0.19611614,0.10198039,-4.99703912\n33.690068,0.52,0.81,1.38675049,0.2773501,0.03605551,-3.56949576\n30.963757,0.47,0.78,3.60147029,0.17149859,0.05830952,-5.77264238\n336.037511,0.47,0.78,7.61509624,0.10153462,0.09848858,-9.75036922\n79.380345,0.47,0.78,11.18017113,0.06142951,0.16278821,-16.11603239\n26.565051,0.43,0.76,1.34164079,0.4472136,0.04472136,-2.19134662\n9.462322,0.37,0.75,5.09636861,0.16439899,0.06082763,-6.0219349\n318.814075,0.37,0.75,9.21906451,0.09407209,0.10630146,-10.52384435\n82.405357,0.37,0.75,8.06198693,0.06608186,0.15132746,-14.98141849\n0,0.33,0.75,0,1,0.04,-0.96\n0,0.29,0.75,0,1,0.04,-0.96\n0,0.2,0.76,0,1,0.06,-0.94\n104.036243,0.21,0.72,3.15296313,0.24253563,0.04123106,-4.08187457\n201.801409,0.26,0.74,2.22834406,0.18569534,0.05385165,-5.33131316\n123.690068,0.3,0.68,1.38675049,0.2773501,0.07211103,-3.53344025\n338.198591,0.65,0.95,3.15682075,0.18569534,0.05385165,-5.33131316\n333.434949,0.59,0.98,0.89442719,0.4472136,0.06708204,-2.16898594\n348.690068,0.54,0.99,0.98058068,0.19611614,0.0509902,-5.04802932\n0,0.46,0.99,0,1,0.08,-0.92\n18.434949,0.4,0.97,2.21359436,0.31622777,0.06324555,-3.09903211\n26.565051,0.34,0.94,1.34164079,0.4472136,0.06708204,-2.16898594\n45,0.29,0.89,0.70710678,0.70710678,0.07071068,-1.34350288\n71.565051,0.27,0.83,0.9486833,0.31622777,0.06324555,-3.09903211\n81.869898,0.26,0.76,0.98994949,0.14142136,0.07071068,-7.00035713\n;0,0.2,0.76,0,1,0.06,-0.94\n315,0,0.82,0.70710678,0.70710678,0.02828427,-1.38592929\n198.434949,0.03,0.89,2.21359436,0.31622777,0.03162278,-3.13065488\n343.300756,0.03,0.89,7.27947977,0.09578263,0.10440307,-10.33590344\n74.744881,0.03,0.89,4.12217269,0.0877058,0.11401754,-11.28773671\n206.565051,0.05,0.9,1.34164079,0.4472136,0.02236068,-2.2137073\n213.690068,0.08,0.92,1.38675049,0.2773501,0.03605551,-3.56949576\n216.869898,0.12,0.95,1.4,0.2,0.05,-4.95\n352.874984,0.12,0.95,0.99227788,0.12403473,0.08062258,-7.98163517\n78.690068,0.12,0.95,0.98058068,0.19611614,0.0509902,-5.04802932\n213.690068,0.15,0.97,1.38675049,0.2773501,0.03605551,-3.56949576\n213.690068,0.18,0.99,1.38675049,0.2773501,0.03605551,-3.56949576\n206.565051,0.2,1,1.34164079,0.4472136,0.02236068,-2.2137073\n45,0.28,0.99,0.70710678,0.70710678,0.01414214,-1.40007143\n56.309932,0.26,0.96,2.21880078,0.2773501,0.03605551,-3.56949576\n56.309932,0.22,0.9,2.21880078,0.2773501,0.07211103,-3.53344025\n53.130102,0.19,0.86,3.6,0.2,0.05,-4.95\n45,0.14,0.81,0.70710678,0.70710678,0.07071068,-1.34350288\n36.869898,0.1,0.78,1.4,0.2,0.05,-4.95\n18.434949,0.04,0.76,2.21359436,0.31622777,0.06324555,-3.09903211\n0,0,0.76,0,1,0.04,-0.96\n81.253838,0.95,0.87,7.07065907,0.07602859,0.13152946,-13.02141697\n"),!1),_f(wf.ParsePatFile("\n*LEAF-02,LEAF-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n303.690068,0.77,0.17,1.38675049,0.2773501,0.03605551,-3.56949576\n18.434949,0.74,0.16,2.21359436,0.31622777,0.03162278,-3.13065488\n288.434949,0.73,0.19,2.21359436,0.31622777,0.03162278,-3.13065488\n180,0.77,0.19,0,1,0.04,-0.96\n258.690068,0.78,0.24,0.98058068,0.19611614,0.0509902,-5.04802932\n243.434949,0.79,0.26,0.89442719,0.4472136,0.02236068,-2.2137073\n288.434949,0.58,0.14,2.21359436,0.31622777,0.06324555,-3.09903211\n21.801409,0.53,0.12,2.22834406,0.18569534,0.05385165,-5.33131316\n11.309932,0.48,0.11,4.11843884,0.19611614,0.0509902,-5.04802932\n0,0.45,0.11,0,1,0.03,-0.97\n341.565051,0.39,0.13,0.9486833,0.31622777,0.06324555,-3.09903211\n326.309932,0.33,0.17,2.21880078,0.2773501,0.07211103,-3.53344025\n308.659808,0.29,0.22,1.40556386,0.15617376,0.06403124,-6.339093\n300.963757,0.26,0.27,3.60147029,0.17149859,0.05830952,-5.77264238\n285.945396,0.24,0.34,3.15929297,0.13736056,0.0728011,-7.20730879\n270,0.24,0.41,0,1,0.07,-0.93\n279.462322,0.23,0.47,5.09636861,0.16439899,0.06082763,-6.0219349\n285.945396,0.21,0.54,3.15929297,0.13736056,0.0728011,-7.20730879\n123.690068,0.23,0.51,1.38675049,0.2773501,0.03605551,-3.56949576\n161.565051,0.26,0.5,0.9486833,0.31622777,0.03162278,-3.13065488\n171.869898,0.33,0.49,0.98994949,0.14142136,0.07071068,-7.00035713\n171.869898,0.4,0.48,0.98994949,0.14142136,0.07071068,-7.00035713\n161.565051,0.46,0.46,0.9486833,0.31622777,0.06324555,-3.09903211\n161.565051,0.52,0.44,0.9486833,0.31622777,0.06324555,-3.09903211\n146.309932,0.58,0.4,2.21880078,0.2773501,0.07211103,-3.53344025\n119.744881,0.62,0.33,5.82963253,0.12403473,0.08062258,-7.98163517\n111.801409,0.64,0.28,2.22834406,0.18569534,0.05385165,-5.33131316\n90,0.64,0.24,0,1,0.04,-0.96\n75.963757,0.63,0.2,0.9701425,0.24253563,0.04123106,-4.08187457\n56.309932,0.61,0.17,2.21880078,0.2773501,0.03605551,-3.56949576\n63.434949,0.6,0.15,0.89442719,0.4472136,0.02236068,-2.2137073\n126.869898,0.63,0.11,1.4,0.2,0.05,-4.95\n45,0.6,0.08,0.70710678,0.70710678,0.04242641,-1.37178716\n225,0.31,0.02,0.70710678,0.70710678,0.02828427,-1.38592929\n198.434949,0.34,0.03,2.21359436,0.31622777,0.03162278,-3.13065488\n348.690068,0.29,0.04,0.98058068,0.19611614,0.0509902,-5.04802932\n345.963757,0.25,0.05,0.9701425,0.24253563,0.04123106,-4.08187457\n333.434949,0.21,0.07,0.89442719,0.4472136,0.04472136,-2.19134662\n333.434949,0.15,0.1,0.89442719,0.4472136,0.06708204,-2.16898594\n348.690068,0.1,0.11,0.98058068,0.19611614,0.0509902,-5.04802932\n0,0.07,0.11,0,1,0.03,-0.97\n8.130102,0,0.1,6.08111832,0.14142136,0.07071068,-7.00035713\n236.309932,0.02,0.23,2.21880078,0.2773501,0.03605551,-3.56949576\n236.309932,0.04,0.26,2.21880078,0.2773501,0.03605551,-3.56949576\n213.690068,0.07,0.28,1.38675049,0.2773501,0.03605551,-3.56949576\n0,0.03,0.28,0,1,0.04,-0.96\n326.309932,0,0.3,2.21880078,0.2773501,0.03605551,-3.56949576\n158.198591,0.05,0.69,3.15682075,0.18569534,0.05385165,-5.33131316\n153.434949,0.11,0.66,0.89442719,0.4472136,0.06708204,-2.16898594\n158.198591,0.16,0.64,3.15682075,0.18569534,0.05385165,-5.33131316\n180,0.21,0.64,0,1,0.05,-0.95\n33.690068,0.18,0.62,1.38675049,0.2773501,0.03605551,-3.56949576\n45,0.16,0.6,0.70710678,0.70710678,0.02828427,-1.38592929\n53.130102,0.13,0.56,3.6,0.2,0.05,-4.95\n56.309932,0.09,0.5,2.21880078,0.2773501,0.07211103,-3.53344025\n51.340192,0.05,0.45,4.99756038,0.15617376,0.06403124,-6.339093\n38.659808,0,0.41,1.40556386,0.15617376,0.06403124,-6.339093\n321.340192,0.73,0.42,4.99756038,0.15617376,0.06403124,-6.339093\n300.963757,0.7,0.47,3.60147029,0.17149859,0.05830952,-5.77264238\n21.801409,0.65,0.45,2.22834406,0.18569534,0.05385165,-5.33131316\n284.036243,0.64,0.49,3.15296313,0.24253563,0.04123106,-4.08187457\n180,0.7,0.49,0,1,0.06,-0.94\n261.869898,0.71,0.56,0.98994949,0.14142136,0.07071068,-7.00035713\n248.198591,0.73,0.61,3.15682075,0.18569534,0.05385165,-5.33131316\n225,0.77,0.65,0.70710678,0.70710678,0.05656854,-1.35764502\n284.036243,0.77,0.88,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.2,0.76,0,1,0.06,-0.94\n104.036243,0.21,0.72,3.15296313,0.24253563,0.04123106,-4.08187457\n201.801409,0.26,0.74,2.22834406,0.18569534,0.05385165,-5.33131316\n123.690068,0.3,0.68,1.38675049,0.2773501,0.07211103,-3.53344025\n153.434949,0.36,0.65,0.89442719,0.4472136,0.06708204,-2.16898594\n170.537678,0.42,0.64,0.98639392,0.16439899,0.06082763,-6.0219349\n188.130102,0.49,0.65,6.08111832,0.14142136,0.07071068,-7.00035713\n201.801409,0.54,0.67,2.22834406,0.18569534,0.05385165,-5.33131316\n219.805571,0.6,0.72,1.40840568,0.12803688,0.0781025,-7.73214718\n230.194429,0.65,0.78,6.401844,0.12803688,0.0781025,-7.73214718\n239.036243,0.68,0.83,2.22948161,0.17149859,0.05830952,-5.77264238\n236.309932,0.72,0.89,2.21880078,0.2773501,0.07211103,-3.53344025\n213.690068,0.75,0.91,1.38675049,0.2773501,0.03605551,-3.56949576\n198.434949,0.78,0.92,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.74,0.92,0,1,0.04,-0.96\n345.963757,0.7,0.93,0.9701425,0.24253563,0.04123106,-4.08187457\n338.198591,0.65,0.95,3.15682075,0.18569534,0.05385165,-5.33131316\n45,0.29,0.89,0.70710678,0.70710678,0.07071068,-1.34350288\n71.565051,0.27,0.83,0.9486833,0.31622777,0.06324555,-3.09903211\n81.869898,0.26,0.76,0.98994949,0.14142136,0.07071068,-7.00035713\n;0,0.2,0.76,0,1,0.06,-0.94\n53.130102,0.19,0.86,3.6,0.2,0.05,-4.95\n45,0.14,0.81,0.70710678,0.70710678,0.07071068,-1.34350288\n36.869898,0.1,0.78,1.4,0.2,0.05,-4.95\n18.434949,0.04,0.76,2.21359436,0.31622777,0.06324555,-3.09903211\n0,0,0.76,0,1,0.04,-0.96\n0,0.96,0.76,0,1,0.04,-0.96\n345.963757,0.92,0.77,0.9701425,0.24253563,0.04123106,-4.08187457\n333.434949,0.88,0.79,0.89442719,0.4472136,0.04472136,-2.19134662\n315,0.86,0.81,0.70710678,0.70710678,0.02828427,-1.38592929\n306.869898,0.83,0.85,1.4,0.2,0.05,-4.95\n11.309932,0.78,0.84,4.11843884,0.19611614,0.0509902,-5.04802932\n180,0.83,0.88,0,1,0.06,-0.94\n261.869898,0.84,0.95,0.98994949,0.14142136,0.07071068,-7.00035713\n248.198591,0.86,1,3.15682075,0.18569534,0.05385165,-5.33131316\n333.434949,0.59,0.98,0.89442719,0.4472136,0.06708204,-2.16898594\n348.690068,0.54,0.99,0.98058068,0.19611614,0.0509902,-5.04802932\n0,0.46,0.99,0,1,0.08,-0.92\n18.434949,0.4,0.97,2.21359436,0.31622777,0.06324555,-3.09903211\n26.565051,0.34,0.94,1.34164079,0.4472136,0.06708204,-2.16898594\n45,0.28,0.99,0.70710678,0.70710678,0.01414214,-1.40007143\n56.309932,0.26,0.96,2.21880078,0.2773501,0.03605551,-3.56949576\n56.309932,0.22,0.9,2.21880078,0.2773501,0.07211103,-3.53344025\n53.130102,0.97,0.16,3.6,0.2,0.05,-4.95\n38.659808,0.92,0.12,1.40556386,0.15617376,0.06403124,-6.339093\n9.462322,0.86,0.11,5.09636861,0.16439899,0.06082763,-6.0219349\n345.963757,0.82,0.12,0.9701425,0.24253563,0.04123106,-4.08187457\n326.309932,0.79,0.14,2.21880078,0.2773501,0.03605551,-3.56949576\n225,0.82,0.29,0.70710678,0.70710678,0.04242641,-1.37178716\n213.690068,0.85,0.31,1.38675049,0.2773501,0.03605551,-3.56949576\n191.309932,0.9,0.32,4.11843884,0.19611614,0.0509902,-5.04802932\n180,0.95,0.32,0,1,0.05,-0.95\n158.198591,1,0.3,3.15682075,0.18569534,0.05385165,-5.33131316\n233.130102,0.89,0.04,3.6,0.2,0.05,-4.95\n216.869898,0.93,0.07,1.4,0.2,0.05,-4.95\n206.565051,0.97,0.09,1.34164079,0.4472136,0.04472136,-2.19134662\n198.434949,1,0.1,2.21359436,0.31622777,0.03162278,-3.13065488\n30.963757,0.95,0.38,3.60147029,0.17149859,0.05830952,-5.77264238\n14.036243,0.91,0.37,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.83,0.37,0,1,0.08,-0.92\n348.690068,0.78,0.38,0.98058068,0.19611614,0.0509902,-5.04802932\n216.869898,0.81,0.68,1.4,0.2,0.05,-4.95\n198.434949,0.9,0.71,2.21359436,0.31622777,0.09486833,-3.06740933\n180,1,0.71,0,1,0.1,-0.9\n"),!1),_f(wf.ParsePatFile("\n*LEAF-03,LEAF-03\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n344.054604,0.86,0.38,4.12081692,0.13736056,0.0728011,-7.20730879\n338.198591,0.81,0.4,3.15682075,0.18569534,0.05385165,-5.33131316\n326.309932,0.75,0.44,2.21880078,0.2773501,0.07211103,-3.53344025\n320.194429,0.69,0.49,6.401844,0.12803688,0.0781025,-7.73214718\n308.659808,0.65,0.54,1.40556386,0.15617376,0.06403124,-6.339093\n300.963757,0.62,0.59,3.60147029,0.17149859,0.05830952,-5.77264238\n293.198591,0.59,0.66,2.23220936,0.13130643,0.07615773,-7.53961537\n281.309932,0.58,0.71,4.11843884,0.19611614,0.0509902,-5.04802932\n276.340192,0.57,0.8,8.0615014,0.11043153,0.09055385,-8.96483129\n270,0.57,0.85,0,1,0.05,-0.95\n257.471192,0.59,0.94,5.09786576,0.10846523,0.09219544,-9.12734901\n164.054604,0.66,0.92,4.12081692,0.13736056,0.0728011,-7.20730879\n158.198591,0.71,0.9,3.15682075,0.18569534,0.05385165,-5.33131316\n146.309932,0.77,0.86,2.21880078,0.2773501,0.07211103,-3.53344025\n140.194429,0.83,0.81,6.401844,0.12803688,0.0781025,-7.73214718\n125.537678,0.88,0.74,4.99864847,0.11624764,0.08602325,-8.51630201\n116.565051,0.92,0.66,1.34164079,0.4472136,0.08944272,-2.14662526\n105.945396,0.94,0.59,3.15929297,0.13736056,0.0728011,-7.20730879\n97.125016,0.95,0.51,7.06997987,0.12403473,0.08062258,-7.98163517\n90,0.95,0.45,0,1,0.06,-0.94\n77.471192,0.93,0.36,5.09786576,0.10846523,0.09219544,-9.12734901\n195.945396,0.14,0.38,3.15929297,0.13736056,0.0728011,-7.20730879\n201.801409,0.19,0.4,2.22834406,0.18569534,0.05385165,-5.33131316\n213.690068,0.25,0.44,1.38675049,0.2773501,0.07211103,-3.53344025\n219.805571,0.31,0.49,1.40840568,0.12803688,0.0781025,-7.73214718\n231.340192,0.35,0.54,4.99756038,0.15617376,0.06403124,-6.339093\n239.036243,0.38,0.59,2.22948161,0.17149859,0.05830952,-5.77264238\n246.801409,0.41,0.66,5.38356375,0.13130643,0.07615773,-7.53961537\n258.690068,0.42,0.71,0.98058068,0.19611614,0.0509902,-5.04802932\n263.659808,0.43,0.8,0.99388373,0.11043153,0.09055385,-8.96483129\n270,0.43,0.85,0,1,0.05,-0.95\n282.528808,0.41,0.94,4.1216787,0.10846523,0.09219544,-9.12734901\n15.945396,0.34,0.92,3.15929297,0.13736056,0.0728011,-7.20730879\n21.801409,0.29,0.9,2.22834406,0.18569534,0.05385165,-5.33131316\n33.690068,0.23,0.86,1.38675049,0.2773501,0.07211103,-3.53344025\n39.805571,0.17,0.81,1.40840568,0.12803688,0.0781025,-7.73214718\n54.462322,0.12,0.74,3.6036768,0.11624764,0.08602325,-8.51630201\n63.434949,0.08,0.66,0.89442719,0.4472136,0.08944272,-2.14662526\n74.054604,0.06,0.59,4.12081692,0.13736056,0.0728011,-7.20730879\n82.874984,0.05,0.51,0.99227788,0.12403473,0.08062258,-7.98163517\n90,0.05,0.45,0,1,0.06,-0.94\n102.528808,0.07,0.36,4.1216787,0.10846523,0.09219544,-9.12734901\n128.659808,0.21,0.15,1.40556386,0.15617376,0.06403124,-6.339093\n146.309932,0.27,0.11,2.21880078,0.2773501,0.07211103,-3.53344025\n153.434949,0.33,0.08,0.89442719,0.4472136,0.06708204,-2.16898594\n164.054604,0.4,0.06,4.12081692,0.13736056,0.0728011,-7.20730879\n171.869898,0.47,0.05,0.98994949,0.14142136,0.07071068,-7.00035713\n180,0.53,0.05,0,1,0.06,-0.94\n188.130102,0.6,0.06,6.08111832,0.14142136,0.07071068,-7.00035713\n195.945396,0.67,0.08,3.15929297,0.13736056,0.0728011,-7.20730879\n206.565051,0.73,0.11,1.34164079,0.4472136,0.06708204,-2.16898594\n218.659808,0.78,0.15,1.40556386,0.15617376,0.06403124,-6.339093\n225,0.83,0.2,0.70710678,0.70710678,0.07071068,-1.34350288\n315,0.78,0.25,0.70710678,0.70710678,0.07071068,-1.34350288\n321.340192,0.73,0.29,4.99756038,0.15617376,0.06403124,-6.339093\n336.801409,0.66,0.32,5.38356375,0.13130643,0.07615773,-7.53961537\n341.565051,0.6,0.34,0.9486833,0.31622777,0.06324555,-3.09903211\n351.869898,0.53,0.35,0.98994949,0.14142136,0.07071068,-7.00035713\n0,0.47,0.35,0,1,0.06,-0.94\n8.130102,0.4,0.34,6.08111832,0.14142136,0.07071068,-7.00035713\n18.434949,0.34,0.32,2.21359436,0.31622777,0.06324555,-3.09903211\n23.198591,0.27,0.29,2.23220936,0.13130643,0.07615773,-7.53961537\n38.659808,0.22,0.25,1.40556386,0.15617376,0.06403124,-6.339093\n45,0.17,0.2,0.70710678,0.70710678,0.07071068,-1.34350288\n"),!1),_f(wf.ParsePatFile("\n*LINE,LINE\n0, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*LOOPLINKS,LOOPLINKS\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n206.565051,0.53,0.67,1.34164079,0.4472136,0.02236068,-2.2137073\n243.434949,0.54,0.69,0.89442719,0.4472136,0.02236068,-2.2137073\n116.565051,0.47,0.67,1.34164079,0.4472136,0.02236068,-2.2137073\n153.434949,0.49,0.66,0.89442719,0.4472136,0.02236068,-2.2137073\n180,0.51,0.66,0,1,0.02,-0.98\n258.690068,0.19,0.59,0.98058068,0.19611614,0.0509902,-5.04802932\n251.565051,0.2,0.62,0.9486833,0.31622777,0.03162278,-3.13065488\n243.434949,0.22,0.66,0.89442719,0.4472136,0.04472136,-2.19134662\n230.194429,0.27,0.72,6.401844,0.12803688,0.0781025,-7.73214718\n225,0.31,0.76,0.70710678,0.70710678,0.05656854,-1.35764502\n209.744881,0.38,0.8,5.82963253,0.12403473,0.08062258,-7.98163517\n194.036243,0.46,0.82,3.15296313,0.24253563,0.08246211,-4.04064351\n251.565051,0.28,0.6,0.9486833,0.31622777,0.06324555,-3.09903211\n239.036243,0.31,0.65,2.22948161,0.17149859,0.05830952,-5.77264238\n225,0.35,0.69,0.70710678,0.70710678,0.05656854,-1.35764502\n210.963757,0.4,0.72,3.60147029,0.17149859,0.05830952,-5.77264238\n198.434949,0.46,0.74,2.21359436,0.31622777,0.06324555,-3.09903211\n116.565051,0.67,0.47,1.34164079,0.4472136,0.02236068,-2.2137073\n153.434949,0.69,0.46,0.89442719,0.4472136,0.02236068,-2.2137073\n26.565051,0.67,0.53,1.34164079,0.4472136,0.02236068,-2.2137073\n63.434949,0.66,0.51,0.89442719,0.4472136,0.02236068,-2.2137073\n90,0.66,0.49,0,1,0.02,-0.98\n168.690068,0.59,0.81,0.98058068,0.19611614,0.0509902,-5.04802932\n161.565051,0.62,0.8,0.9486833,0.31622777,0.03162278,-3.13065488\n153.434949,0.66,0.78,0.89442719,0.4472136,0.04472136,-2.19134662\n140.194429,0.72,0.73,6.401844,0.12803688,0.0781025,-7.73214718\n135,0.76,0.69,0.70710678,0.70710678,0.05656854,-1.35764502\n119.744881,0.8,0.62,5.82963253,0.12403473,0.08062258,-7.98163517\n104.036243,0.82,0.54,3.15296313,0.24253563,0.08246211,-4.04064351\n161.565051,0.6,0.72,0.9486833,0.31622777,0.06324555,-3.09903211\n149.036243,0.65,0.69,2.22948161,0.17149859,0.05830952,-5.77264238\n135,0.69,0.65,0.70710678,0.70710678,0.05656854,-1.35764502\n120.963757,0.72,0.6,3.60147029,0.17149859,0.05830952,-5.77264238\n108.434949,0.74,0.54,2.21359436,0.31622777,0.06324555,-3.09903211\n26.565051,0.47,0.33,1.34164079,0.4472136,0.02236068,-2.2137073\n63.434949,0.46,0.31,0.89442719,0.4472136,0.02236068,-2.2137073\n296.565051,0.53,0.33,1.34164079,0.4472136,0.02236068,-2.2137073\n333.434949,0.51,0.34,0.89442719,0.4472136,0.02236068,-2.2137073\n0,0.49,0.34,0,1,0.02,-0.98\n78.690068,0.81,0.41,0.98058068,0.19611614,0.0509902,-5.04802932\n71.565051,0.8,0.38,0.9486833,0.31622777,0.03162278,-3.13065488\n63.434949,0.78,0.34,0.89442719,0.4472136,0.04472136,-2.19134662\n50.194429,0.73,0.28,6.401844,0.12803688,0.0781025,-7.73214718\n45,0.69,0.24,0.70710678,0.70710678,0.05656854,-1.35764502\n29.744881,0.62,0.2,5.82963253,0.12403473,0.08062258,-7.98163517\n14.036243,0.54,0.18,3.15296313,0.24253563,0.08246211,-4.04064351\n71.565051,0.72,0.4,0.9486833,0.31622777,0.06324555,-3.09903211\n59.036243,0.69,0.35,2.22948161,0.17149859,0.05830952,-5.77264238\n45,0.65,0.31,0.70710678,0.70710678,0.05656854,-1.35764502\n30.963757,0.6,0.28,3.60147029,0.17149859,0.05830952,-5.77264238\n18.434949,0.54,0.26,2.21359436,0.31622777,0.06324555,-3.09903211\n296.565051,0.33,0.53,1.34164079,0.4472136,0.02236068,-2.2137073\n333.434949,0.31,0.54,0.89442719,0.4472136,0.02236068,-2.2137073\n206.565051,0.33,0.47,1.34164079,0.4472136,0.02236068,-2.2137073\n243.434949,0.34,0.49,0.89442719,0.4472136,0.02236068,-2.2137073\n270,0.34,0.51,0,1,0.02,-0.98\n348.690068,0.41,0.19,0.98058068,0.19611614,0.0509902,-5.04802932\n341.565051,0.38,0.2,0.9486833,0.31622777,0.03162278,-3.13065488\n333.434949,0.34,0.22,0.89442719,0.4472136,0.04472136,-2.19134662\n320.194429,0.28,0.27,6.401844,0.12803688,0.0781025,-7.73214718\n315,0.24,0.31,0.70710678,0.70710678,0.05656854,-1.35764502\n299.744881,0.2,0.38,5.82963253,0.12403473,0.08062258,-7.98163517\n284.036243,0.18,0.46,3.15296313,0.24253563,0.08246211,-4.04064351\n341.565051,0.4,0.28,0.9486833,0.31622777,0.06324555,-3.09903211\n329.036243,0.35,0.31,2.22948161,0.17149859,0.05830952,-5.77264238\n315,0.31,0.35,0.70710678,0.70710678,0.05656854,-1.35764502\n300.963757,0.28,0.4,3.60147029,0.17149859,0.05830952,-5.77264238\n288.434949,0.26,0.46,2.21359436,0.31622777,0.06324555,-3.09903211\n90,0.46,-0.31,0,1,0.62,-0.38\n270,0.54,0.31,0,1,0.62,-0.38\n180,0.31,0.46,0,1,0.62,-0.38\n0,-0.31,0.54,0,1,0.62,-0.38\n"),!1),_f(wf.ParsePatFile("\n*MAZE-01,MAZE-01 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n180,0.95,0.92,0,1,0.25,-0.75\n90,0.95,0.55,1,1,0.37,-0.63\n90,0.83,0.55,1,1,0.25,-0.75\n0,0.7,0.42,0,1,0.11,-0.89\n180,0.57,0.8,0,1,0.38,-0.62\n270,0.57,0.92,1,1,0.12,-0.88\n0,0.07,0.92,0,1,0.5,-0.5\n90,0.95,0.29,1,1,0.13,-0.87\n180,0.45,0.05,0,1,0.38,-0.62\n0,0.7,0.29,0,1,0.25,-0.75\n270,0.45,0.17,1,1,0.12,-0.88\n0,0.19,0.17,0,1,0.26,-0.74\n90,0.7,0.17,1,1,0.12,-0.88\n270,0.19,0.8,1,1,0.63,-0.37\n0,0.31,0.29,0,1,0.26,-0.74\n270,0.31,0.68,1,1,0.39,-0.61\n180,0.7,0.68,0,1,0.39,-0.61\n270,0.7,0.92,1,1,0.24,-0.76\n180,0.95,0.17,0,1,0.25,-0.75\n90,0.95,0.05,1,1,0.12,-0.88\n0,0.57,0.05,0,1,0.38,-0.62\n270,0.57,0.42,1,1,0.37,-0.63\n270,0.7,0.55,1,1,0.13,-0.87\n0,0.45,0.55,0,1,0.25,-0.75\n90,0.45,0.42,1,1,0.13,-0.87\n90,0.07,0.05,1,1,0.87,-0.13\n"),!1),_f(wf.ParsePatFile("\n*MAZE-02,MAZE-02 verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n270,0.89999999,0.1,1,1,0.1,-0.9\n0,0.69999999,0.1,0,1,0.2,-0.8\n90,0,0.3,1,1,0.5,-0.5\n270,0.89999999,0.9,1,1,0.5,-0.5\n270,0.29999999,0.9,1,1,0.1,-0.9\n180,0.29999999,0.9,0,1,0.4,-0.6\n0,0.19999999,0.2,0,1,0.15,-0.85\n90,0.19999999,0.3,1,1,0.2,-0.8\n180,0.49999999,0.3,0,1,0.3,-0.7\n90,0.49999999,0.1,1,1,0.2,-0.8\n270,0.69999999,0.2,1,1,0.1,-0.9\n0,0.59999999,0.2,0,1,0.1,-0.9\n270,0.59999999,0.3,1,1,0.1,-0.9\n180,0.69999999,0.3,0,1,0.1,-0.9\n270,0.59999999,0.6,1,1,0.1,-0.9\n0,0.29999999,0.6,0,1,0.3,-0.7\n90,0.29999999,0.4,1,1,0.2,-0.8\n180,0.69999999,0.4,0,1,0.4,-0.6\n180,0.59999999,0.5,0,1,0.2,-0.8\n270,0.79999999,0.8,1,1,0.5,-0.5\n0,0.09999999,0.1,0,1,0.4,-0.6\n0,0.09999999,0.8,0,1,0.7,-0.3\n270,0.09999999,0.2,1,1,0.1,-0.9\n90,0.09999999,0.3,1,1,0.5,-0.5\n180,0.09999999,0.2,0,1,0.3,-0.7\n180,0,0.3,0,1,0.20000001,-0.79999999\n180,0.29999999,0,0,1,0.3,-0.7\n270,0.69999999,0.7,1,1,0.2,-0.8\n0,0.39999999,0,0,1,0.4,-0.6\n0,0.19999999,0.7,0,1,0.5,-0.5\n90,0.19999999,0.6,1,1,0.1,-0.9\n270,0.59999999,0.1,1,1,0.1,-0.9\n0,0.39999999,0.9,0,1,0.4,-0.6\n270,0.39999999,1,1,1,0.1,-0.9\n"),!1),_f(wf.ParsePatFile("\n*MUDST,MUDST\n0, 0,0, .5,.25, .25,-.25,0,-.25,0,-.25\n"),!1),_f(wf.ParsePatFile("\n*NET3,NET3\n0, 0,0, 0,.125\n60, 0,0, 0,.125\n120, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*NET,NET\n0, 0,0, 0,.125\n90, 0,0, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*PLASTI,PLASTI\n0, 0,0, 0,.25\n0, 0,.03125, 0,.25\n0, 0,.0625, 0,.25\n0, 0,.15625, 0,.25\n"),!1),_f(wf.ParsePatFile("\n*PLAST,PLAST\n0, 0,0, 0,.25\n0, 0,.03125, 0,.25\n0, 0,.0625, 0,.25\n"),!1),_f(wf.ParsePatFile("\n*QCAD-LOGO,QCAD-LOGO\n;By John Hyslop, Line 101 modified by CVH to fix left side of pencil drift when hatching far from Origin\n;Developed in inch as imperial QCAD3 pattern\n243.434949,0.8,0.36,0.89442719,0.4472136,0.02236068,-2.2137073\n248.198591,0.82,0.41,3.15682075,0.18569534,0.05385165,-5.33131316\n263.659808,0.83,0.5,0.99388373,0.11043153,0.09055385,-8.96483129\n276.340192,0.82,0.59,8.0615014,0.11043153,0.09055385,-8.96483129\n290.556045,0.79,0.67,5.38389277,0.11704115,0.08544004,-8.45856371\n310.601295,0.73,0.74,1.41004798,0.10846523,0.09219544,-9.12734901\n324.462322,0.66,0.79,3.6036768,0.11624764,0.08602325,-8.51630201\n336.801409,0.59,0.82,5.38356375,0.13130643,0.07615773,-7.53961537\n351.869898,0.52,0.83,0.98994949,0.14142136,0.07071068,-7.00035713\n26.565051,0.61,0.18,1.34164079,0.4472136,0.06708204,-2.16898594\n7.125016,0.53,0.17,7.06997987,0.12403473,0.08062258,-7.98163517\n0,0.45,0.17,0,1,0.08,-0.92\n344.054604,0.38,0.19,4.12081692,0.13736056,0.0728011,-7.20730879\n336.801409,0.31,0.22,5.38356375,0.13130643,0.07615773,-7.53961537\n320.194429,0.25,0.27,6.401844,0.12803688,0.0781025,-7.73214718\n308.659808,0.21,0.32,1.40556386,0.15617376,0.06403124,-6.339093\n293.198591,0.18,0.39,2.23220936,0.13130643,0.07615773,-7.53961537\n285.945396,0.16,0.46,3.15929297,0.13736056,0.0728011,-7.20730879\n270,0.16,0.52,0,1,0.06,-0.94\n261.869898,0.17,0.59,0.98994949,0.14142136,0.07071068,-7.00035713\n246.801409,0.2,0.66,5.38356375,0.13130643,0.07615773,-7.53961537\n234.462322,0.25,0.73,3.6036768,0.11624764,0.08602325,-8.51630201\n219.805571,0.31,0.78,1.40840568,0.12803688,0.0781025,-7.73214718\n206.565051,0.37,0.81,1.34164079,0.4472136,0.06708204,-2.16898594\n195.945396,0.44,0.83,3.15929297,0.13736056,0.0728011,-7.20730879\n180,0.48,0.83,0,1,0.04,-0.96\n180,0.52,0.83,0,1,0.04,-0.96\n233.130102,0.92,0.27,3.6,0.2,0.05,-4.95\n248.198591,0.94,0.32,3.15682075,0.18569534,0.05385165,-5.33131316\n248.198591,0.96,0.37,3.15682075,0.18569534,0.05385165,-5.33131316\n260.537678,0.97,0.43,0.98639392,0.16439899,0.06082763,-6.0219349\n261.869898,0.98,0.5,0.98994949,0.14142136,0.07071068,-7.00035713\n278.130102,0.97,0.57,6.08111832,0.14142136,0.07071068,-7.00035713\n279.462322,0.96,0.63,5.09636861,0.16439899,0.06082763,-6.0219349\n288.434949,0.94,0.69,2.21359436,0.31622777,0.06324555,-3.09903211\n299.744881,0.9,0.76,5.82963253,0.12403473,0.08062258,-7.98163517\n308.659808,0.86,0.81,1.40556386,0.15617376,0.06403124,-6.339093\n315,0.81,0.86,0.70710678,0.70710678,0.07071068,-1.34350288\n321.340192,0.76,0.9,4.99756038,0.15617376,0.06403124,-6.339093\n329.036243,0.71,0.93,2.22948161,0.17149859,0.05830952,-5.77264238\n338.198591,0.66,0.95,3.15682075,0.18569534,0.05385165,-5.33131316\n338.198591,0.61,0.97,3.15682075,0.18569534,0.05385165,-5.33131316\n350.537678,0.55,0.98,0.98639392,0.16439899,0.06082763,-6.0219349\n0,0.5,0.98,0,1,0.05,-0.95\n0,0.45,0.98,0,1,0.05,-0.95\n11.309932,0.4,0.97,4.11843884,0.19611614,0.0509902,-5.04802932\n14.036243,0.36,0.96,3.15296313,0.24253563,0.04123106,-4.08187457\n21.801409,0.31,0.94,2.22834406,0.18569534,0.05385165,-5.33131316\n21.801409,0.26,0.92,2.22834406,0.18569534,0.05385165,-5.33131316\n36.869898,0.22,0.89,1.4,0.2,0.05,-4.95\n36.869898,0.18,0.86,1.4,0.2,0.05,-4.95\n33.690068,0.75,0.09,1.38675049,0.2773501,0.03605551,-3.56949576\n26.565051,0.69,0.06,1.34164079,0.4472136,0.06708204,-2.16898594\n21.801409,0.64,0.04,2.22834406,0.18569534,0.05385165,-5.33131316\n11.309932,0.59,0.03,4.11843884,0.19611614,0.0509902,-5.04802932\n8.130102,0.52,0.02,6.08111832,0.14142136,0.07071068,-7.00035713\n0,0.46,0.02,0,1,0.06,-0.94\n350.537678,0.4,0.03,0.98639392,0.16439899,0.06082763,-6.0219349\n348.690068,0.35,0.04,0.98058068,0.19611614,0.0509902,-5.04802932\n338.198591,0.3,0.06,3.15682075,0.18569534,0.05385165,-5.33131316\n333.434949,0.26,0.08,0.89442719,0.4472136,0.04472136,-2.19134662\n323.130102,0.22,0.11,3.6,0.2,0.05,-4.95\n323.130102,0.18,0.14,3.6,0.2,0.05,-4.95\n315,0.14,0.18,0.70710678,0.70710678,0.05656854,-1.35764502\n306.869898,0.11,0.22,1.4,0.2,0.05,-4.95\n306.869898,0.08,0.26,1.4,0.2,0.05,-4.95\n296.565051,0.06,0.3,1.34164079,0.4472136,0.04472136,-2.19134662\n291.801409,0.04,0.35,2.22834406,0.18569534,0.05385165,-5.33131316\n281.309932,0.03,0.4,4.11843884,0.19611614,0.0509902,-5.04802932\n281.309932,0.02,0.45,4.11843884,0.19611614,0.0509902,-5.04802932\n270,0.02,0.5,0,1,0.05,-0.95\n270,0.02,0.55,0,1,0.05,-0.95\n258.690068,0.03,0.6,0.98058068,0.19611614,0.0509902,-5.04802932\n258.690068,0.04,0.65,0.98058068,0.19611614,0.0509902,-5.04802932\n248.198591,0.06,0.7,3.15682075,0.18569534,0.05385165,-5.33131316\n243.434949,0.08,0.74,0.89442719,0.4472136,0.04472136,-2.19134662\n233.130102,0.11,0.78,3.6,0.2,0.05,-4.95\n233.130102,0.14,0.82,3.6,0.2,0.05,-4.95\n225,0.18,0.86,0.70710678,0.70710678,0.05656854,-1.35764502\n0,0.35,0.21,0,1,0.29,-0.71\n180,0.56,0.39,0,1,0.04,-0.96\n270,0.56,0.44,0,1,0.05,-0.95\n180,0.62,0.44,0,1,0.06,-0.94\n270,0.62,0.48,0,1,0.04,-0.96\n270,0.98,0.11,0,1,0.01,-0.99\n270,0.98,0.13,0,1,0.02,-0.98\n45,0.82,0.08,0.70710678,0.70710678,0.14142136,-1.27279221\n225,0.9,0.2,0.70710678,0.70710678,0.14142136,-1.27279221\n45,0.79,0.11,0.70710678,0.70710678,0.14142136,-1.27279221\n0,0.544133,0.559775,0,1,0,-1\n0,0.590298,0.634752,0,1,0,-1\n0,0.640323,0.720624,0,1,0,-1\n135,0.98,0.13,0.70710678,0.70710678,0.49497475,-0.91923882\n56.309932,0.96,0.07,2.21880078,0.2773501,0.03605551,-3.56949576\n45,0.94,0.05,0.70710678,0.70710678,0.02828427,-1.38592929\n33.690068,0.91,0.03,1.38675049,0.2773501,0.03605551,-3.56949576\n18.434949,0.88,0.02,2.21359436,0.31622777,0.03162278,-3.13065488\n135.806929,0.88,0.02,-1.41407331,0.01991653,0.50209561,-49.70746523\n289.983107,0.48,0.48,8.54357658,0.08543577,0.117047,-11.58765291\n338.198591,0.53,0.52,3.15682075,0.18569534,0.1077033,-5.27746151\n105.945396,0.48,0.48,3.15929297,0.13736056,0.0728011,-7.20730879\n218.659808,0.53,0.52,1.40556386,0.15617376,0.06403124,-6.339093\n336.801409,0.46,0.55,5.38356375,0.13130643,0.07615773,-7.53961537\n56.309932,0.66,0.755,2.21880078,0.2773501,0.01802776,-3.58752352\n239.036243,0.475,0.435,2.22948161,0.17149859,0.02915476,-5.80179714\n236.309932,0.57,0.6,2.21880078,0.2773501,0.01802776,-3.58752352\n236.309932,0.62,0.68,2.21880078,0.2773501,0.01802776,-3.58752352\n0,0.46,0.41,0,1,0,-1\n0,0.49,0.34,0,1,0.02,-0.98\n0,0.54,0.34,0,1,0,-1\n0,0.45,0.34,0,1,0,-1\n0,0.36,0.34,0,1,0,-1\n0,0.27,0.34,0,1,0,-1\n180,0.24,0.34,0,1,0.03,-0.97\n180,0.33,0.34,0,1,0.03,-0.97\n180,0.42,0.34,0,1,0.03,-0.97\n239.036243,0.45,0.39,2.22948161,0.17149859,0.05830952,-5.77264238\n0,0.44,0.44,0,1,0.05,-0.95\n341.565051,0.41,0.45,0.9486833,0.31622777,0.03162278,-3.13065488\n315,0.39,0.47,0.70710678,0.70710678,0.02828427,-1.38592929\n296.565051,0.38,0.49,1.34164079,0.4472136,0.02236068,-2.2137073\n180,0.38,0.49,0,1,0.21,-0.79\n240.068488,0.57,0.82,8.06221498,0.02626129,0.38078866,-37.69807687\n0,0.63,0.49,0,1,0.18,-0.82\n240.255119,0.75,0.7,2.23262522,0.12403473,0.24186773,-7.82039002\n"),!1),_f(wf.ParsePatFile("\n*REDBACK,REDBACK\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n63.434949,0.73,0.78,0.89442719,0.4472136,0.02236068,-2.2137073\n33.690068,0.7,0.76,1.38675049,0.2773501,0.03605551,-3.56949576\n75.963757,0.69,0.72,0.9701425,0.24253563,0.04123106,-4.08187457\n0,0.66,0.72,0,1,0.03,-0.97\n108.434949,0.67,0.69,2.21359436,0.31622777,0.03162278,-3.13065488\n90,0.67,0.68,0,1,0.01,-0.99\n0,0.54,0.57,0,1,0.01,-0.99\n270,0.54,0.58,0,1,0.01,-0.99\n225,0.55,0.59,0.70710678,0.70710678,0.01414214,-1.40007143\n180,0.56,0.59,0,1,0.01,-0.99\n315,0.55,0.6,0.70710678,0.70710678,0.01414214,-1.40007143\n15.524111,0.37,0.55,7.27991309,0.05352877,0.18681542,-18.49472628\n0,0.35,0.55,0,1,0.02,-0.98\n45,0.34,0.54,0.70710678,0.70710678,0.01414214,-1.40007143\n0,0.31,0.54,0,1,0.03,-0.97\n26.565051,0.19,0.48,1.34164079,0.4472136,0.13416408,-2.1019039\n0,0.18,0.48,0,1,0.01,-0.99\n33.690068,0.15,0.46,1.38675049,0.2773501,0.03605551,-3.56949576\n32.005383,0.07,0.41,3.60399279,0.10599979,0.09433981,-9.33964132\n45,0.06,0.4,0.70710678,0.70710678,0.01414214,-1.40007143\n270,0.06,0.41,0,1,0.01,-0.99\n225,0.07,0.42,0.70710678,0.70710678,0.01414214,-1.40007143\n213.690068,0.16,0.48,1.38675049,0.2773501,0.10816654,-3.49738474\n243.434949,0.17,0.5,0.89442719,0.4472136,0.02236068,-2.2137073\n205.016893,0.32,0.57,2.23525175,0.06041221,0.16552945,-16.3874159\n189.462322,0.38,0.58,5.09636861,0.16439899,0.06082763,-6.0219349\n194.036243,0.42,0.59,3.15296313,0.24253563,0.04123106,-4.08187457\n194.036243,0.5,0.61,3.15296313,0.24253563,0.08246211,-4.04064351\n198.434949,0.56,0.63,2.21359436,0.31622777,0.06324555,-3.09903211\n6.340192,0.47,0.62,8.0615014,0.11043153,0.09055385,-8.96483129\n315,0.46,0.63,0.70710678,0.70710678,0.01414214,-1.40007143\n45,0.45,0.62,0.70710678,0.70710678,0.01414214,-1.40007143\n23.198591,0.38,0.59,2.23220936,0.13130643,0.07615773,-7.53961537\n0,0.35,0.59,0,1,0.03,-0.97\n45,0.32,0.56,0.70710678,0.70710678,0.04242641,-1.37178716\n236.309932,0.34,0.59,2.21880078,0.2773501,0.03605551,-3.56949576\n206.565051,0.36,0.6,1.34164079,0.4472136,0.02236068,-2.2137073\n206.565051,0.42,0.63,1.34164079,0.4472136,0.06708204,-2.16898594\n206.565051,0.44,0.64,1.34164079,0.4472136,0.02236068,-2.2137073\n206.565051,0.46,0.65,1.34164079,0.4472136,0.02236068,-2.2137073\n180,0.57,0.65,0,1,0.11,-0.89\n225,0.58,0.66,0.70710678,0.70710678,0.01414214,-1.40007143\n321.340192,0.53,0.7,4.99756038,0.15617376,0.06403124,-6.339093\n296.565051,0.52,0.72,1.34164079,0.4472136,0.02236068,-2.2137073\n285.945396,0.5,0.79,3.15929297,0.13736056,0.0728011,-7.20730879\n254.054604,0.52,0.86,4.12081692,0.13736056,0.0728011,-7.20730879\n135,0.53,0.85,0.70710678,0.70710678,0.01414214,-1.40007143\n90,0.53,0.82,0,1,0.03,-0.97\n71.565051,0.52,0.79,0.9486833,0.31622777,0.03162278,-3.13065488\n105.945396,0.54,0.72,3.15929297,0.13736056,0.0728011,-7.20730879\n135,0.58,0.68,0.70710678,0.70710678,0.05656854,-1.35764502\n180,0.59,0.68,0,1,0.01,-0.99\n270,0.59,0.69,0,1,0.01,-0.99\n270,0.59,0.71,0,1,0.02,-0.98\n296.565051,0.58,0.73,1.34164079,0.4472136,0.02236068,-2.2137073\n278.130102,0.57,0.8,6.08111832,0.14142136,0.07071068,-7.00035713\n251.565051,0.58,0.83,0.9486833,0.31622777,0.03162278,-3.13065488\n225,0.59,0.84,0.70710678,0.70710678,0.01414214,-1.40007143\n225,0.6,0.85,0.70710678,0.70710678,0.01414214,-1.40007143\n243.434949,0.61,0.87,0.89442719,0.4472136,0.02236068,-2.2137073\n243.434949,0.63,0.91,0.89442719,0.4472136,0.04472136,-2.19134662\n243.434949,0.65,0.95,0.89442719,0.4472136,0.04472136,-2.19134662\n225,0.66,0.96,0.70710678,0.70710678,0.01414214,-1.40007143\n168.690068,0.81,0.93,0.98058068,0.19611614,0.15297059,-4.94604893\n355.601295,0.68,0.94,0.99705449,0.0766965,0.13038405,-12.90802076\n56.309932,0.66,0.91,2.21880078,0.2773501,0.03605551,-3.56949576\n56.309932,0.64,0.88,2.21880078,0.2773501,0.03605551,-3.56949576\n63.434949,0.63,0.86,0.89442719,0.4472136,0.02236068,-2.2137073\n56.309932,0.61,0.83,2.21880078,0.2773501,0.03605551,-3.56949576\n71.565051,0.6,0.8,0.9486833,0.31622777,0.03162278,-3.13065488\n90,0.6,0.79,0,1,0.01,-0.99\n90,0.6,0.77,0,1,0.02,-0.98\n90,0.6,0.74,0,1,0.03,-0.97\n225,0.61,0.75,0.70710678,0.70710678,0.01414214,-1.40007143\n243.434949,0.62,0.77,0.89442719,0.4472136,0.02236068,-2.2137073\n225,0.63,0.78,0.70710678,0.70710678,0.01414214,-1.40007143\n206.565051,0.65,0.79,1.34164079,0.4472136,0.02236068,-2.2137073\n206.565051,0.67,0.8,1.34164079,0.4472136,0.02236068,-2.2137073\n180,0.69,0.8,0,1,0.02,-0.98\n180,0.71,0.8,0,1,0.02,-0.98\n180,0.74,0.8,0,1,0.03,-0.97\n153.434949,0.76,0.79,0.89442719,0.4472136,0.02236068,-2.2137073\n135,0.77,0.78,0.70710678,0.70710678,0.01414214,-1.40007143\n135,0.56,0.56,0.70710678,0.70710678,0.01414214,-1.40007143\n26.565051,0.77,0.74,1.34164079,0.4472136,0.02236068,-2.2137073\n56.309932,0.75,0.71,2.21880078,0.2773501,0.03605551,-3.56949576\n14.036243,0.71,0.7,3.15296313,0.24253563,0.04123106,-4.08187457\n90,0.71,0.67,0,1,0.03,-0.97\n341.565051,0.68,0.68,0.9486833,0.31622777,0.03162278,-3.13065488\n0,0.67,0.68,0,1,0.01,-0.99\n90,0.56,0.55,0,1,0.01,-0.99\n180,0.57,0.55,0,1,0.01,-0.99\n225,0.58,0.56,0.70710678,0.70710678,0.01414214,-1.40007143\n270,0.58,0.57,0,1,0.01,-0.99\n135,0.59,0.56,0.70710678,0.70710678,0.01414214,-1.40007143\n74.475889,0.54,0.38,11.4016286,0.05352877,0.18681542,-18.49472628\n90,0.54,0.36,0,1,0.02,-0.98\n45,0.53,0.35,0.70710678,0.70710678,0.01414214,-1.40007143\n90,0.53,0.32,0,1,0.03,-0.97\n63.434949,0.47,0.2,0.89442719,0.4472136,0.13416408,-2.1019039\n90,0.47,0.19,0,1,0.01,-0.99\n56.309932,0.45,0.16,2.21880078,0.2773501,0.03605551,-3.56949576\n57.994617,0.4,0.08,5.82998834,0.10599979,0.09433981,-9.33964132\n45,0.39,0.07,0.70710678,0.70710678,0.01414214,-1.40007143\n180,0.4,0.07,0,1,0.01,-0.99\n225,0.41,0.08,0.70710678,0.70710678,0.01414214,-1.40007143\n236.309932,0.47,0.17,2.21880078,0.2773501,0.10816654,-3.49738474\n206.565051,0.49,0.18,1.34164079,0.4472136,0.02236068,-2.2137073\n244.983107,0.56,0.33,14.31769361,0.06041221,0.16552945,-16.3874159\n260.537678,0.57,0.39,0.98639392,0.16439899,0.06082763,-6.0219349\n255.963757,0.58,0.43,0.9701425,0.24253563,0.04123106,-4.08187457\n255.963757,0.6,0.51,0.9701425,0.24253563,0.08246211,-4.04064351\n251.565051,0.62,0.57,0.9486833,0.31622777,0.06324555,-3.09903211\n83.659808,0.61,0.48,0.99388373,0.11043153,0.09055385,-8.96483129\n135,0.62,0.47,0.70710678,0.70710678,0.01414214,-1.40007143\n45,0.61,0.46,0.70710678,0.70710678,0.01414214,-1.40007143\n66.801409,0.58,0.39,5.38356375,0.13130643,0.07615773,-7.53961537\n90,0.58,0.36,0,1,0.03,-0.97\n45,0.55,0.33,0.70710678,0.70710678,0.04242641,-1.37178716\n213.690068,0.58,0.35,1.38675049,0.2773501,0.03605551,-3.56949576\n243.434949,0.59,0.37,0.89442719,0.4472136,0.02236068,-2.2137073\n243.434949,0.62,0.43,0.89442719,0.4472136,0.06708204,-2.16898594\n243.434949,0.63,0.45,0.89442719,0.4472136,0.02236068,-2.2137073\n243.434949,0.64,0.47,0.89442719,0.4472136,0.02236068,-2.2137073\n270,0.64,0.58,0,1,0.11,-0.89\n225,0.65,0.59,0.70710678,0.70710678,0.01414214,-1.40007143\n128.659808,0.69,0.54,1.40556386,0.15617376,0.06403124,-6.339093\n153.434949,0.71,0.53,0.89442719,0.4472136,0.02236068,-2.2137073\n164.054604,0.78,0.51,4.12081692,0.13736056,0.0728011,-7.20730879\n195.945396,0.85,0.53,3.15929297,0.13736056,0.0728011,-7.20730879\n315,0.84,0.54,0.70710678,0.70710678,0.01414214,-1.40007143\n0,0.81,0.54,0,1,0.03,-0.97\n18.434949,0.78,0.53,2.21359436,0.31622777,0.03162278,-3.13065488\n344.054604,0.71,0.55,4.12081692,0.13736056,0.0728011,-7.20730879\n315,0.67,0.59,0.70710678,0.70710678,0.05656854,-1.35764502\n270,0.67,0.6,0,1,0.01,-0.99\n180,0.68,0.6,0,1,0.01,-0.99\n180,0.7,0.6,0,1,0.02,-0.98\n153.434949,0.72,0.59,0.89442719,0.4472136,0.02236068,-2.2137073\n171.869898,0.79,0.58,0.98994949,0.14142136,0.07071068,-7.00035713\n198.434949,0.82,0.59,2.21359436,0.31622777,0.03162278,-3.13065488\n225,0.83,0.6,0.70710678,0.70710678,0.01414214,-1.40007143\n225,0.84,0.61,0.70710678,0.70710678,0.01414214,-1.40007143\n206.565051,0.86,0.62,1.34164079,0.4472136,0.02236068,-2.2137073\n206.565051,0.9,0.64,1.34164079,0.4472136,0.04472136,-2.19134662\n206.565051,0.94,0.66,1.34164079,0.4472136,0.04472136,-2.19134662\n225,0.95,0.67,0.70710678,0.70710678,0.01414214,-1.40007143\n281.309932,0.92,0.82,4.11843884,0.19611614,0.15297059,-4.94604893\n94.398705,0.93,0.69,12.04135032,0.0766965,0.13038405,-12.90802076\n33.690068,0.9,0.67,1.38675049,0.2773501,0.03605551,-3.56949576\n33.690068,0.87,0.65,1.38675049,0.2773501,0.03605551,-3.56949576\n26.565051,0.85,0.64,1.34164079,0.4472136,0.02236068,-2.2137073\n33.690068,0.82,0.62,1.38675049,0.2773501,0.03605551,-3.56949576\n18.434949,0.79,0.61,2.21359436,0.31622777,0.03162278,-3.13065488\n0,0.78,0.61,0,1,0.01,-0.99\n0,0.76,0.61,0,1,0.02,-0.98\n0,0.73,0.61,0,1,0.03,-0.97\n225,0.74,0.62,0.70710678,0.70710678,0.01414214,-1.40007143\n206.565051,0.76,0.63,1.34164079,0.4472136,0.02236068,-2.2137073\n225,0.77,0.64,0.70710678,0.70710678,0.01414214,-1.40007143\n243.434949,0.78,0.66,0.89442719,0.4472136,0.02236068,-2.2137073\n243.434949,0.79,0.68,0.89442719,0.4472136,0.02236068,-2.2137073\n270,0.79,0.7,0,1,0.02,-0.98\n270,0.79,0.72,0,1,0.02,-0.98\n270,0.79,0.75,0,1,0.03,-0.97\n296.565051,0.78,0.77,1.34164079,0.4472136,0.02236068,-2.2137073\n315,0.77,0.78,0.70710678,0.70710678,0.01414214,-1.40007143\n"),!1),_f(wf.ParsePatFile("\n*SACNCR,SACNCR\n45, 0,0, 0,.09375\n45, .06629126,0, 0,.09375, 0,-.09375\n"),!1),_f(wf.ParsePatFile("\n*SCAFFOLD, verbose comment\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n270,0.76,0.84,1,1,0.02,-0.98\n326.3099325,0.26,0.16,2.21880078,0.2773501,0.57688819,-3.02866309\n90,0.24,0.49,1,1,0.02,-0.98\n270,0.25,0.16,1,1,0.32,-0.68\n146.3099325,0.24,0.84,2.21880078,0.2773501,0.5768882,-3.02866307\n180,0.76,0.49,0,1,0.02,-0.98\n270,0.74,0.18,1,1,0.02,-0.98\n0,0.74,0.84,0,1,0.02,-0.98\n90,0.25,0.51,1,1,0.31,-0.69\n270,0.76,0.51,1,1,0.02,-0.98\n0,0.26,0.17,0,1,0.48,-0.52\n0,0.24,0.51,0,1,0.02,-0.98\n180,0.76,0.18,0,1,0.02,-0.98\n90,0.74,0.82,1,1,0.02,-0.98\n212.855722,0.24,0.49,20.24844917,0.01750082,0.57140178,-56.56877673\n147.144278,0.24,0.18,36.89172934,0.01750082,0.57140178,-56.56877673\n213.6900675,0.24,0.16,1.38675049,0.2773501,0.57688818,-3.02866309\n180,0.24,0.17,0,1,0.48,-0.52\n0,0.26,0.83,0,1,0.48,-0.52\n90,0.26,0.16,1,1,0.02,-0.98\n180,0.76,0.82,0,1,0.02,-0.98\n90,0.74,0.49,1,1,0.02,-0.98\n147.144278,0.74,0.18,36.89172934,0.01750082,0.57140179,-56.56877672\n0,0.24,0.16,0,1,0.02,-0.98\n0,0.26,0.5,0,1,0.48,-0.52\n270,0.26,0.84,1,1,0.02,-0.98\n90,0.75,0.18,1,1,0.31,-0.69\n212.855722,0.74,0.82,20.24844917,0.01750082,0.57140179,-56.56877672\n180,0.26,0.49,0,1,0.02,-0.98\n270,0.24,0.18,1,1,0.02,-0.98\n0,0.24,0.84,0,1,0.02,-0.98\n270,0.26,0.51,1,1,0.02,-0.98\n270,0.75,0.82,1,1,0.31,-0.69\n32.855722,0.26,0.18,20.24844917,0.01750082,0.57140179,-56.56877672\n180,0.26,0.18,0,1,0.02,-0.98\n0,0.74,0.51,0,1,0.02,-0.98\n90,0.76,0.16,1,1,0.02,-0.98\n90,0.24,0.82,1,1,0.02,-0.98\n180,0.24,0.83,0,1,0.48,-0.52\n147.144278,0.24,0.51,36.89172934,0.01750082,0.57140178,-56.56877673\n180,0.24,0.5,0,1,0.48,-0.52\n270,0.25,0.49,1,1,0.31,-0.69\n212.855722,0.24,0.82,20.24844917,0.01750082,0.57140179,-56.56877672\n0,0.74,0.16,0,1,0.02,-0.98\n270,0.75,0.16,1,1,0.32,-0.68\n180,0.26,0.82,0,1,0.02,-0.98\n213.6900675,0.74,0.16,1.38675049,0.2773501,0.57688819,-3.02866309\n327.144278,0.26,0.82,36.89172934,0.01750082,0.57140179,-56.56877672\n"),!1),_f(wf.ParsePatFile("\n*SQUARE,SQUARE\n0, 0,0, 0,.125, .125,-.125\n90, 0,0, 0,.125, .125,-.125\n"),!1),_f(wf.ParsePatFile("\n*SQUIGGLE-01,SQUIGGLE-01\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n45,0.11,-0.39,0.70710678,0.70710678,1.11722871,-0.29698485\n56.309932,0.07,0.55,2.21880078,0.2773501,0.07211103,-3.53344025\n81.869898,0.06,0.48,0.98994949,0.14142136,0.07071068,-7.00035713\n99.462322,0.07,0.42,5.09636861,0.16439899,0.06082763,-6.0219349\n123.690068,0.11,0.36,1.38675049,0.2773501,0.07211103,-3.53344025\n146.309932,0.17,0.32,2.21880078,0.2773501,0.07211103,-3.53344025\n170.537678,0.23,0.31,0.98639392,0.16439899,0.06082763,-6.0219349\n188.130102,0.3,0.32,6.08111832,0.14142136,0.07071068,-7.00035713\n213.690068,0.36,0.36,1.38675049,0.2773501,0.07211103,-3.53344025\n225,0.65,0.65,0.70710678,0.70710678,0.41012193,-1.00409163\n213.690068,0.71,0.69,1.38675049,0.2773501,0.07211103,-3.53344025\n189.462322,0.77,0.7,5.09636861,0.16439899,0.06082763,-6.0219349\n171.869898,0.84,0.69,0.98994949,0.14142136,0.07071068,-7.00035713\n146.309932,0.9,0.65,2.21880078,0.2773501,0.07211103,-3.53344025\n123.690068,0.94,0.59,1.38675049,0.2773501,0.07211103,-3.53344025\n99.462322,0.95,0.53,5.09636861,0.16439899,0.06082763,-6.0219349\n81.869898,0.94,0.46,0.98994949,0.14142136,0.07071068,-7.00035713\n56.309932,0.9,0.4,2.21880078,0.2773501,0.07211103,-3.53344025\n"),!1),_f(wf.ParsePatFile("\n*SQUIGGLE-02,SQUIGGLE-02\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n75.963757,0.99,0.16,0.9701425,0.24253563,0.04123106,-4.08187457\n63.434949,0.97,0.12,0.89442719,0.4472136,0.04472136,-2.19134662\n45,0.94,0.09,0.70710678,0.70710678,0.04242641,-1.37178716\n14.036243,0.9,0.08,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.85,0.08,0,1,0.05,-0.95\n345.963757,0.81,0.09,0.9701425,0.24253563,0.04123106,-4.08187457\n315,0.78,0.12,0.70710678,0.70710678,0.04242641,-1.37178716\n296.565051,0.76,0.16,1.34164079,0.4472136,0.04472136,-2.19134662\n284.036243,0.75,0.2,3.15296313,0.24253563,0.04123106,-4.08187457\n281.309932,0.74,0.85,4.11843884,0.19611614,0.0509902,-5.04802932\n303.690068,0.72,0.88,1.38675049,0.2773501,0.03605551,-3.56949576\n315,0.69,0.91,0.70710678,0.70710678,0.04242641,-1.37178716\n345.963757,0.65,0.92,0.9701425,0.24253563,0.04123106,-4.08187457\n0,0.6,0.92,0,1,0.05,-0.95\n14.036243,0.56,0.91,3.15296313,0.24253563,0.04123106,-4.08187457\n45,0.53,0.88,0.70710678,0.70710678,0.04242641,-1.37178716\n56.309932,0.51,0.85,2.21880078,0.2773501,0.03605551,-3.56949576\n78.690068,0.5,0.8,0.98058068,0.19611614,0.0509902,-5.04802932\n75.963757,0.49,0.16,0.9701425,0.24253563,0.04123106,-4.08187457\n63.434949,0.47,0.12,0.89442719,0.4472136,0.04472136,-2.19134662\n45,0.44,0.09,0.70710678,0.70710678,0.04242641,-1.37178716\n14.036243,0.4,0.08,3.15296313,0.24253563,0.04123106,-4.08187457\n0,0.35,0.08,0,1,0.05,-0.95\n345.963757,0.31,0.09,0.9701425,0.24253563,0.04123106,-4.08187457\n315,0.28,0.12,0.70710678,0.70710678,0.04242641,-1.37178716\n296.565051,0.26,0.16,1.34164079,0.4472136,0.04472136,-2.19134662\n284.036243,0.25,0.2,3.15296313,0.24253563,0.04123106,-4.08187457\n281.309932,0.24,0.85,4.11843884,0.19611614,0.0509902,-5.04802932\n303.690068,0.22,0.88,1.38675049,0.2773501,0.03605551,-3.56949576\n315,0.19,0.91,0.70710678,0.70710678,0.04242641,-1.37178716\n345.963757,0.15,0.92,0.9701425,0.24253563,0.04123106,-4.08187457\n0,0.1,0.92,0,1,0.05,-0.95\n14.036243,0.06,0.91,3.15296313,0.24253563,0.04123106,-4.08187457\n45,0.03,0.88,0.70710678,0.70710678,0.04242641,-1.37178716\n56.309932,0.01,0.85,2.21880078,0.2773501,0.03605551,-3.56949576\n78.690068,0,0.8,0.98058068,0.19611614,0.0509902,-5.04802932\n270,0.75,0.8,0,1,0.6,-0.4\n270,0.5,0.8,0,1,0.6,-0.4\n270,0.25,0.8,0,1,0.6,-0.4\n270,0,0.8,0,1,0.6,-0.4\n"),!1),_f(wf.ParsePatFile("\n*STARS,STARS\n0, 0,0, 0,.21650635, .125,-.125\n60, 0,0, 0,.21650635, .125,-.125\n120, .0625,.10825318, 0,.21650635, .125,-.125\n"),!1),_f(wf.ParsePatFile("\n*STEEL,STEEL\n45, 0,0, 0,.125\n45, 0,.0625, 0,.125\n"),!1),_f(wf.ParsePatFile("\n*SWAMP,SWAMP\n0, 0,0, .5,.8660254, .125,-.875\n90, .0625,0, .8660254,.5, .0625,-1.66955081\n90, .078125,0, .8660254,.5, .05,-1.68205081\n90, .046875,0, .8660254,.5, .05,-1.68205081\n60, .09375,0, .5,.8660254, .04,-.96\n120, .03125,0, .5,.8660254, .04,-.96\n"),!1),_f(wf.ParsePatFile("\n*TRANS,TRANS\n0, 0,0, 0,.25\n0, 0,.125, 0,.25, .125,-.125\n"),!1),_f(wf.ParsePatFile("\n*TRIANG,TRIANG\n60, 0,0, .1875,.32475953, .1875,-.1875\n120, 0,0, .1875,.32475953, .1875,-.1875\n0, -.09375,.16237976, .1875,.32475953, .1875,-.1875\n"),!1),_f(wf.ParsePatFile("\n*TRI-OVERLAP,TRI-OVERLAP verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n59.641885,0.09000001,0.15,47.50789248,0.01232691,0.81123363,-80.31212922\n300.358115,0.5,0.85000001,33.61547037,0.01232691,0.81123363,-80.31212922\n180,0.35942857,0.61,0,1,0.71885753,-0.28114247\n59.036243,0.89518072,0.17530121,2.22948161,0.17149859,0.20373205,-5.62721984\n180,0.91,0.15,0,1,0.81999999,-0.18000001\n300.963757,0,0.35,3.60147029,0.17149859,0.20373206,-5.62721983\n300.784147,0.12,0.15,5.83092324,0.01827876,0.5470832,-54.16123426\n239.215853,0.88,0.15,48.87739422,0.01827876,0.5470832,-54.16123426\n"),!1),_f(wf.ParsePatFile("\n*WEATHERBOARD,WEATHERBOARD\n; By John Hyslop,    Manually Entered QCAD3 pattern\n; Developed in inch as imperial QCAD3 pattern\n; Imperial Hatch Scale 1 Makes 6inch horizontally placed boards\n; with a 0.5in offset line to simulate a rounded edge\n0,0,0,0,6\n0,0,0.5,0,6\n"),!1),_f(wf.ParsePatFile("\n*WEAVING,WEAVING\n;By John Hyslop,    Using AutoCAD Lisp Tool\n;Developed in inch as imperial QCAD3 pattern\n90,0.9,0.2,0,1,0.05,-0.95\n75.963757,0.88,0.12,0.9701425,0.24253563,0.08246211,-4.04064351\n66.801409,0.85,0.05,5.38356375,0.13130643,0.07615773,-7.53961537\n54.462322,0.8,-0.02,3.6036768,0.11624764,0.08602325,-8.51630201\n56.309932,0.76,-0.08,2.21880078,0.2773501,0.07211103,-3.53344025\n90,0.79,0.22,0,1,0.07,-0.93\n80.537678,0.78,0.16,0.98639392,0.16439899,0.06082763,-6.0219349\n63.434949,0.75,0.1,0.89442719,0.4472136,0.06708204,-2.16898594\n56.309932,0.71,0.04,2.21880078,0.2773501,0.07211103,-3.53344025\n56.309932,0.67,-0.02,2.21880078,0.2773501,0.07211103,-3.53344025\n333.434949,0.86,0.27,0.89442719,0.4472136,0.06708204,-2.16898594\n344.054604,0.79,0.29,4.12081692,0.13736056,0.0728011,-7.20730879\n0,0.71,0.29,0,1,0.08,-0.92\n9.462322,0.65,0.28,5.09636861,0.16439899,0.06082763,-6.0219349\n26.565051,0.59,0.25,1.34164079,0.4472136,0.06708204,-2.16898594\n38.659808,0.54,0.21,1.40556386,0.15617376,0.06403124,-6.339093\n36.869898,0.46,0.15,1.4,0.2,0.1,-4.9\n20.556045,0.38,0.12,5.38389277,0.11704115,0.08544004,-8.45856371\n330.255119,0.91,0.37,2.23262522,0.12403473,0.08062258,-7.98163517\n344.054604,0.84,0.39,4.12081692,0.13736056,0.0728011,-7.20730879\n352.874984,0.76,0.4,0.99227788,0.12403473,0.08062258,-7.98163517\n0,0.69,0.4,0,1,0.07,-0.93\n14.036243,0.61,0.38,3.15296313,0.24253563,0.08246211,-4.04064351\n26.565051,0.53,0.34,1.34164079,0.4472136,0.08944272,-2.14662526\n33.690068,0.47,0.3,1.38675049,0.2773501,0.07211103,-3.53344025\n35.537678,0.4,0.25,4.99864847,0.11624764,0.08602325,-8.51630201\n0,0.2,0.1,0,1,0.05,-0.95\n348.690068,0.15,0.11,0.98058068,0.19611614,0.0509902,-5.04802932\n341.565051,0.12,0.12,0.9486833,0.31622777,0.03162278,-3.13065488\n336.801409,0.05,0.15,5.38356375,0.13130643,0.07615773,-7.53961537\n326.309932,-0.01,0.19,2.21880078,0.2773501,0.07211103,-3.53344025\n324.462322,-0.08,0.24,3.6036768,0.11624764,0.08602325,-8.51630201\n0,0.22,0.21,0,1,0.07,-0.93\n350.537678,0.16,0.22,0.98639392,0.16439899,0.06082763,-6.0219349\n333.434949,0.1,0.25,0.89442719,0.4472136,0.06708204,-2.16898594\n326.309932,0.04,0.29,2.21880078,0.2773501,0.07211103,-3.53344025\n326.309932,-0.02,0.33,2.21880078,0.2773501,0.07211103,-3.53344025\n60.255119,0.63,0.91,2.23262522,0.12403473,0.08062258,-7.98163517\n180,0.79,0.79,0,1,0.08,-0.92\n164.054604,0.86,0.77,4.12081692,0.13736056,0.0728011,-7.20730879\n153.434949,0.92,0.74,0.89442719,0.4472136,0.06708204,-2.16898594\n330.255119,0.91,0.87,2.23262522,0.12403473,0.08062258,-7.98163517\n345.963757,0.83,0.89,0.9701425,0.24253563,0.08246211,-4.04064351\n352.874984,0.75,0.9,0.99227788,0.12403473,0.08062258,-7.98163517\n60.255119,0.72,0.85,2.23262522,0.12403473,0.08062258,-7.98163517\n80.537678,0.71,0.79,0.98639392,0.16439899,0.06082763,-6.0219349\n90,0.71,0.71,0,1,0.08,-0.92\n104.036243,0.73,0.63,3.15296313,0.24253563,0.08246211,-4.04064351\n116.565051,0.76,0.57,1.34164079,0.4472136,0.06708204,-2.16898594\n129.805571,0.81,0.51,1.40840568,0.12803688,0.0781025,-7.73214718\n123.690068,0.85,0.45,1.38675049,0.2773501,0.07211103,-3.53344025\n113.198591,0.88,0.38,2.23220936,0.13130643,0.07615773,-7.53961537\n309.805571,0.71,0.46,1.40840568,0.12803688,0.0781025,-7.73214718\n305.537678,0.66,0.53,4.99864847,0.11624764,0.08602325,-8.51630201\n299.744881,0.62,0.6,5.82963253,0.12403473,0.08062258,-7.98163517\n285.945396,0.6,0.67,3.15929297,0.13736056,0.0728011,-7.20730879\n270,0.6,0.76,0,1,0.09,-0.91\n74.054604,0.61,0.84,4.12081692,0.13736056,0.0728011,-7.20730879\n82.874984,0.6,0.76,0.99227788,0.12403473,0.08062258,-7.98163517\n39.805571,0.54,0.71,1.40840568,0.12803688,0.0781025,-7.73214718\n35.537678,0.47,0.66,4.99864847,0.11624764,0.08602325,-8.51630201\n33.690068,0.41,0.62,1.38675049,0.2773501,0.07211103,-3.53344025\n15.945396,0.34,0.6,3.15929297,0.13736056,0.0728011,-7.20730879\n6.340192,0.25,0.59,8.0615014,0.11043153,0.09055385,-8.96483129\n350.537678,0.19,0.6,0.98639392,0.16439899,0.06082763,-6.0219349\n344.054604,0.12,0.62,4.12081692,0.13736056,0.0728011,-7.20730879\n23.198591,0.55,0.85,2.23220936,0.13130643,0.07615773,-7.53961537\n29.744881,0.48,0.81,5.82963253,0.12403473,0.08062258,-7.98163517\n39.805571,0.42,0.76,1.40840568,0.12803688,0.0781025,-7.73214718\n29.744881,0.35,0.72,5.82963253,0.12403473,0.08062258,-7.98163517\n7.125016,0.27,0.71,7.06997987,0.12403473,0.08062258,-7.98163517\n0,0.21,0.71,0,1,0.06,-0.94\n344.054604,0.14,0.73,4.12081692,0.13736056,0.0728011,-7.20730879\n333.434949,0.1,0.75,0.89442719,0.4472136,0.04472136,-2.19134662\n234.462322,0.31,-0.01,3.6036768,0.11624764,0.08602325,-8.51630201\n240.255119,0.35,0.06,2.23262522,0.12403473,0.08062258,-7.98163517\n243.434949,0.39,0.14,0.89442719,0.4472136,0.08944272,-2.14662526\n262.874984,0.4,0.22,0.99227788,0.12403473,0.08062258,-7.98163517\n270,0.4,0.3,0,1,0.08,-0.92\n282.528808,0.38,0.39,4.1216787,0.10846523,0.09219544,-9.12734901\n293.198591,0.35,0.46,2.23220936,0.13130643,0.07615773,-7.53961537\n309.805571,0.3,0.52,1.40840568,0.12803688,0.0781025,-7.73214718\n305.537678,0.25,0.59,4.99864847,0.11624764,0.08602325,-8.51630201\n270,0.21,0.78,0,1,0.07,-0.93\n254.054604,0.23,0.85,4.12081692,0.13736056,0.0728011,-7.20730879\n246.801409,0.26,0.92,5.38356375,0.13130643,0.07615773,-7.53961537\n236.309932,0.21,0.04,2.21880078,0.2773501,0.07211103,-3.53344025\n234.462322,0.26,0.11,3.6036768,0.11624764,0.08602325,-8.51630201\n249.443955,0.29,0.19,3.16011097,0.11704115,0.08544004,-8.45856371\n270,0.29,0.27,0,1,0.08,-0.92\n278.130102,0.28,0.34,6.08111832,0.14142136,0.07071068,-7.00035713\n296.565051,0.24,0.42,1.34164079,0.4472136,0.08944272,-2.14662526\n309.805571,0.19,0.48,1.40840568,0.12803688,0.0781025,-7.73214718\n303.690068,0.15,0.54,1.38675049,0.2773501,0.07211103,-3.53344025\n290.556045,0.12,0.62,5.38389277,0.11704115,0.08544004,-8.45856371\n341.565051,0.06,0.64,0.9486833,0.31622777,0.06324555,-3.09903211\n324.462322,-0.01,0.69,3.6036768,0.11624764,0.08602325,-8.51630201\n324.462322,-0.08,0.74,3.6036768,0.11624764,0.08602325,-8.51630201\n146.309932,0.04,0.79,2.21880078,0.2773501,0.07211103,-3.53344025\n146.309932,0.1,0.75,2.21880078,0.2773501,0.07211103,-3.53344025\n262.874984,0.11,0.83,0.99227788,0.12403473,0.08062258,-7.98163517\n255.963757,0.13,0.91,0.9701425,0.24253563,0.08246211,-4.04064351\n240.255119,0.17,0.98,2.23262522,0.12403473,0.08062258,-7.98163517\n"),!1),_f(wf.ParsePatFile("\n*WIRE-FENCE,WIRE-FENCE verbose\n;By John Hyslop,    Tile2Hatch tool \xa9 CVH 2020\n;Developed in inch as imperial QCAD3 pattern\n315,0.46,0.5,0.70710678,0.70710678,0.04673053,-1.36748303\n315,0.52571429,0.56428571,0.70710678,0.70710678,0.04848732,-1.36572624\n3.731397,0.50267394,0.56278308,15.03328073,0.02169305,0.02308929,-46.074633\n183.17983,0.46361415,0.56023571,17.02929602,0.05547002,0.90614559,-17.12161079\n183.17983,0.46120401,0.52006684,17.02929602,0.05547002,0.90600202,-17.12175436\n153.434949,0.52,0.51,0.89442719,0.4472136,0.02236068,-2.2137073\n266.593556,0.52,0.51,17.02938222,0.01188373,1.01178655,-83.1368914\n266.593556,0.56,0.53,17.02938222,0.01188373,1.01178655,-83.1368914\n2.602562,0.49304348,0.46695652,21.02374701,0.04540766,0.02449081,-21.99822474\n"),!1),_f(wf.ParsePatFile("\n*XMASTREE-01,XMASTREE-01\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n180,0.04,0.95,0,1,0.04,-0.96\n90,0.04,0.82,0,1,0.13,-0.87\n180,0.33,0.82,0,1,0.29,-0.71\n49.763642,0.22,0.69,7.81002892,0.05872202,0.17029386,-16.8590925\n180,0.28,0.69,0,1,0.06,-0.94\n51.340192,0.16,0.54,4.99756038,0.15617376,0.19209373,-6.21103051\n180,0.22,0.54,0,1,0.06,-0.94\n52.431408,0.12,0.41,4.99962824,0.06097108,0.16401219,-16.23720727\n180,0.17,0.41,0,1,0.05,-0.95\n53.130102,0.08,0.29,3.6,0.2,0.15,-4.85\n180,0.13,0.29,0,1,0.05,-0.95\n53.972627,0.05,0.18,8.60201108,0.07352146,0.13601471,-13.4654558\n180,0.1,0.18,0,1,0.05,-0.95\n54.462322,0,0.04,3.6036768,0.11624764,0.17204651,-8.43027876\n0,0.96,0.95,0,1,0.04,-0.96\n90,0.96,0.82,0,1,0.13,-0.87\n0,0.67,0.82,0,1,0.29,-0.71\n130.236358,0.78,0.69,9.21935745,0.05872202,0.17029386,-16.8590925\n0,0.72,0.69,0,1,0.06,-0.94\n128.659808,0.84,0.54,1.40556386,0.15617376,0.19209373,-6.21103051\n0,0.78,0.54,0,1,0.06,-0.94\n127.568592,0.88,0.41,11.40159123,0.06097108,0.16401219,-16.23720727\n0,0.83,0.41,0,1,0.05,-0.95\n126.869898,0.92,0.29,1.4,0.2,0.15,-4.85\n0,0.87,0.29,0,1,0.05,-0.95\n126.027373,0.95,0.18,4.99945943,0.07352146,0.13601471,-13.4654558\n0,0.9,0.18,0,1,0.05,-0.95\n125.537678,1,0.04,4.99864847,0.11624764,0.17204651,-8.43027876\n0,0.46,0.04,0,1,0.04,-0.96\n270,0.46,0.17,0,1,0.13,-0.87\n0,0.17,0.17,0,1,0.29,-0.71\n229.763642,0.28,0.3,7.81002892,0.05872202,0.17029386,-16.8590925\n0,0.22,0.3,0,1,0.06,-0.94\n231.340192,0.34,0.45,4.99756038,0.15617376,0.19209373,-6.21103051\n0,0.28,0.45,0,1,0.06,-0.94\n232.431408,0.38,0.58,4.99962824,0.06097108,0.16401219,-16.23720727\n0,0.33,0.58,0,1,0.05,-0.95\n233.130102,0.42,0.7,3.6,0.2,0.15,-4.85\n0,0.37,0.7,0,1,0.05,-0.95\n233.972627,0.45,0.81,8.60201108,0.07352146,0.13601471,-13.4654558\n0,0.4,0.81,0,1,0.05,-0.95\n234.462322,0.5,0.95,3.6036768,0.11624764,0.17204651,-8.43027876\n180,0.54,0.04,0,1,0.04,-0.96\n270,0.54,0.17,0,1,0.13,-0.87\n180,0.83,0.17,0,1,0.29,-0.71\n310.236358,0.72,0.3,9.21935745,0.05872202,0.17029386,-16.8590925\n180,0.78,0.3,0,1,0.06,-0.94\n308.659808,0.66,0.45,1.40556386,0.15617376,0.19209373,-6.21103051\n180,0.72,0.45,0,1,0.06,-0.94\n307.568592,0.62,0.58,11.40159123,0.06097108,0.16401219,-16.23720727\n180,0.67,0.58,0,1,0.05,-0.95\n306.869898,0.58,0.7,1.4,0.2,0.15,-4.85\n180,0.63,0.7,0,1,0.05,-0.95\n306.027373,0.55,0.81,4.99945943,0.07352146,0.13601471,-13.4654558\n180,0.6,0.81,0,1,0.05,-0.95\n305.537678,0.5,0.95,4.99864847,0.11624764,0.17204651,-8.43027876\n"),!1),_f(wf.ParsePatFile("\n*XMASTREE-02,XMASTREE-02\n;By John Hyslop\n;Developed in inch as imperial QCAD3 pattern\n180,0.04,0.26,0,1,0.04,-0.96\n90,0.04,0.13,0,1,0.13,-0.87\n180,0.33,0.13,0,1,0.29,-0.71\n49.763642,0.22,0,7.81002892,0.05872202,0.17029386,-16.8590925\n180,0.28,1,0,1,0.06,-0.94\n51.340192,0.16,0.85,4.99756038,0.15617376,0.19209373,-6.21103051\n180,0.22,0.85,0,1,0.06,-0.94\n52.431408,0.12,0.72,4.99962824,0.06097108,0.16401219,-16.23720727\n180,0.17,0.72,0,1,0.05,-0.95\n53.130102,0.08,0.6,3.6,0.2,0.15,-4.85\n180,0.13,0.6,0,1,0.05,-0.95\n53.972627,0.05,0.49,8.60201108,0.07352146,0.13601471,-13.4654558\n180,0.1,0.49,0,1,0.05,-0.95\n54.462322,0,0.35,3.6036768,0.11624764,0.17204651,-8.43027876\n0,0.96,0.26,0,1,0.04,-0.96\n90,0.96,0.13,0,1,0.13,-0.87\n0,0.67,0.13,0,1,0.29,-0.71\n130.236358,0.78,0,9.21935745,0.05872202,0.17029386,-16.8590925\n0,0.72,1,0,1,0.06,-0.94\n128.659808,0.84,0.85,1.40556386,0.15617376,0.19209373,-6.21103051\n0,0.78,0.85,0,1,0.06,-0.94\n127.568592,0.88,0.72,11.40159123,0.06097108,0.16401219,-16.23720727\n0,0.83,0.72,0,1,0.05,-0.95\n126.869898,0.92,0.6,1.4,0.2,0.15,-4.85\n0,0.87,0.6,0,1,0.05,-0.95\n126.027373,0.95,0.49,4.99945943,0.07352146,0.13601471,-13.4654558\n0,0.9,0.49,0,1,0.05,-0.95\n125.537678,1,0.35,4.99864847,0.11624764,0.17204651,-8.43027876\n0,0.46,0.09,0,1,0.04,-0.96\n270,0.46,0.22,0,1,0.13,-0.87\n0,0.17,0.22,0,1,0.29,-0.71\n229.763642,0.28,0.35,7.81002892,0.05872202,0.17029386,-16.8590925\n0,0.22,0.35,0,1,0.06,-0.94\n231.340192,0.34,0.5,4.99756038,0.15617376,0.19209373,-6.21103051\n0,0.28,0.5,0,1,0.06,-0.94\n232.431408,0.38,0.63,4.99962824,0.06097108,0.16401219,-16.23720727\n0,0.33,0.63,0,1,0.05,-0.95\n233.130102,0.42,0.75,3.6,0.2,0.15,-4.85\n0,0.37,0.75,0,1,0.05,-0.95\n233.972627,0.45,0.86,8.60201108,0.07352146,0.13601471,-13.4654558\n0,0.4,0.86,0,1,0.05,-0.95\n234.462322,0.5,1,3.6036768,0.11624764,0.17204651,-8.43027876\n180,0.54,0.09,0,1,0.04,-0.96\n270,0.54,0.22,0,1,0.13,-0.87\n180,0.83,0.22,0,1,0.29,-0.71\n310.236358,0.72,0.35,9.21935745,0.05872202,0.17029386,-16.8590925\n180,0.78,0.35,0,1,0.06,-0.94\n308.659808,0.66,0.5,1.40556386,0.15617376,0.19209373,-6.21103051\n180,0.72,0.5,0,1,0.06,-0.94\n307.568592,0.62,0.63,11.40159123,0.06097108,0.16401219,-16.23720727\n180,0.67,0.63,0,1,0.05,-0.95\n306.869898,0.58,0.75,1.4,0.2,0.15,-4.85\n180,0.63,0.75,0,1,0.05,-0.95\n306.027373,0.55,0.86,4.99945943,0.07352146,0.13601471,-13.4654558\n180,0.6,0.86,0,1,0.05,-0.95\n305.537678,0.5,1,4.99864847,0.11624764,0.17204651,-8.43027876\n"),!1),_f(wf.ParsePatFile("\n*ZIGZAG,ZIGZAG\n0, 0,0, .125,.125, .125,-.125\n90, .125,0, .125,.125, .125,-.125\n"),!1);var Tf=u().mark(Bf),Af=65536,Cf=15*Math.PI/180,Pf="__point_shape",Rf={DIMTXT:function(){return 2.5},DIMASZ:2.5,DIMCLRD:0,DIMCLRE:0,DIMCLRT:0,DIMDEC:2,DIMDLE:0,DIMDSEP:".".charCodeAt(0),DIMEXE:1.25,DIMEXO:.625,DIMFXL:1,DIMFXLON:!1,DIMGAP:.625,DIMLFAC:1,DIMRND:0,DIMSAH:0,DIMSCALE:1,DIMSD1:0,DIMSD2:0,DIMSE1:0,DIMSE2:0,DIMSOXD:!1,DIMTSZ:0,DIMZIN:8},Nf=function(){return p((function e(t){v(this,e),this.options=Object.create(e.DefaultOptions),t&&Object.assign(this.options,t.sceneOptions),this.origin=null,this.batches=new df((function(e,t){return e.key.Compare(t.key)})),this.layers=new Map,this.blocks=new Map,this.dimStyles=new Map,this.vars=new Map,this.fontStyles=new Map,this.inserts=new Map,this.bounds=null,this.pointShapeBlock=null,this.numBlocksFlattened=0,this.numEntitiesFiltered=0}),[{key:"Build",value:function(){var e=c(u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R,N,O,L,I,F,U,B,z,G,H,j,V,W,X,Y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=t.header||{},l=0,c=Object.entries(s);l<c.length;l++)h=x(c[l],2),d=h[0],f=h[1],d.startsWith("$")&&this.vars.set(d.slice(1),f);if(this.angBase=null!==(r=this.vars.get("ANGBASE"))&&void 0!==r?r:0,this.angDir=null!==(i=this.vars.get("ANGDIR"))&&void 0!==i?i:0,this.pdSize=null!==(a=this.vars.get("PDSIZE"))&&void 0!==a?a:0,this.isMetric=1==(null!==(o=this.vars.get("MEASUREMENT"))&&void 0!==o?o:1),t.tables&&t.tables.layer)for(p=0,v=Object.entries(t.tables.layer.layers);p<v.length;p++)g=x(v[p],2),(m=g[1]).displayName=nf(m.name),this.layers.set(m.name,m);if(t.tables&&t.tables.dimstyle)for(y=0,b=Object.entries(t.tables.dimstyle.dimStyles);y<b.length;y++)E=x(b[y],2),w=E[1],this.dimStyles.set(w.name,w);if(t.tables&&t.tables.style)for(k=0,S=Object.entries(t.tables.style.styles);k<S.length;k++)_=x(S[k],2),M=_[1],this.fontStyles.set(M.styleName,M);if(t.blocks)for(T=0,A=Object.entries(t.blocks);T<A.length;T++)C=x(A[T],2),P=C[1],this.blocks.set(P.name,new Lf(P));return this.textRenderer=new rf(n,this.options.textOptions),this.hasMissingChars=!1,e.next=14,this._FetchFonts(t);case 14:R=D(t.entities),e.prev=15,R.s();case 17:if((N=R.n()).done){e.next=24;break}if(O=N.value,this._FilterEntity(O)){e.next=21;break}return e.abrupt("continue",22);case 21:"INSERT"===O.type?(this.inserts.set(O.handle,O),null===(L=this.blocks.get(O.name))||void 0===L||L.RegisterInsert(O)):"DIMENSION"==O.type&&null!==(null!==(I=O.block)&&void 0!==I?I:null)&&(null===(F=this.blocks.get(O.block))||void 0===F||F.RegisterInsert(O));case 22:e.next=17;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),R.e(e.t0);case 29:return e.prev=29,R.f(),e.finish(29);case 32:U=D(this.blocks.values()),e.prev=33,U.s();case 35:if((B=U.n()).done){e.next=60;break}if(!(z=B.value).data.hasOwnProperty("entities")){e.next=57;break}G=z.DefinitionContext(),H=D(z.data.entities),e.prev=40,H.s();case 42:if((j=H.n()).done){e.next=49;break}if(V=j.value,this._FilterEntity(V)){e.next=46;break}return e.abrupt("continue",47);case 46:this._ProcessDxfEntity(V,G);case 47:e.next=42;break;case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(40),H.e(e.t1);case 54:return e.prev=54,H.f(),e.finish(54);case 57:z.SetFlatten()&&this.numBlocksFlattened++;case 58:e.next=35;break;case 60:e.next=65;break;case 62:e.prev=62,e.t2=e.catch(33),U.e(e.t2);case 65:return e.prev=65,U.f(),e.finish(65);case 68:console.log("".concat(this.numBlocksFlattened," blocks flattened")),W=D(t.entities),e.prev=70,W.s();case 72:if((X=W.n()).done){e.next=80;break}if(Y=X.value,this._FilterEntity(Y)){e.next=77;break}return this.numEntitiesFiltered++,e.abrupt("continue",78);case 77:this._ProcessDxfEntity(Y);case 78:e.next=72;break;case 80:e.next=85;break;case 82:e.prev=82,e.t3=e.catch(70),W.e(e.t3);case 85:return e.prev=85,W.f(),e.finish(85);case 88:console.log("".concat(this.numEntitiesFiltered," entities filtered")),this.scene=this._BuildScene(),delete this.batches,delete this.layers,delete this.blocks,delete this.textRenderer;case 94:case"end":return e.stop()}}),e,this,[[15,26,29,32],[33,62,65,68],[40,51,54,57],[70,82,85,88]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_FilterEntity",value:function(e){return!this.options.suppressPaperSpace||!e.inPaperSpace}},{key:"_FetchFonts",value:function(){var e=c(u().mark((function e(t){var n,r,i,a,o,s,l,h,d,f,p,v=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){return"TEXT"===e.type||"MTEXT"===e.type||"DIMENSION"===e.type||"ATTDEF"===e.type||"ATTRIB"===e.type},r=function(){var e=c(u().mark((function e(t){var n,r,i,a,o,s,l,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v._FilterEntity(t)){e.next=2;break}return e.abrupt("return");case 2:if("TEXT"!==t.type&&"ATTRIB"!==t.type&&"ATTDEF"!==t.type){e.next=8;break}return e.next=5,v.textRenderer.FetchFonts(nf(t.text));case 5:n=e.sent,e.next=61;break;case 8:if("MTEXT"!==t.type){e.next=34;break}(r=new ef).Parse(t.text),n=!0,i=D(r.GetText()),e.prev=13,i.s();case 15:if((a=i.n()).done){e.next=24;break}return o=a.value,e.next=19,v.textRenderer.FetchFonts(nf(o));case 19:if(e.sent){e.next=22;break}return n=!1,e.abrupt("break",24);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),i.e(e.t0);case 29:return e.prev=29,i.f(),e.finish(29);case 32:e.next=61;break;case 34:if("DIMENSION"!==t.type){e.next=60;break}if(n=!0,!(s=v._CreateLinearDimension(t))){e.next=58;break}l=D(s.GetTexts()),e.prev=39,l.s();case 41:if((c=l.n()).done){e.next=50;break}return h=c.value,e.next=45,v.textRenderer.FetchFonts(h);case 45:if(e.sent){e.next=48;break}return n=!1,e.abrupt("break",50);case 48:e.next=41;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(39),l.e(e.t1);case 55:return e.prev=55,l.f(),e.finish(55);case 58:e.next=61;break;case 60:throw new Error("Bad entity type");case 61:return n||(v.hasMissingChars=!0),e.abrupt("return",n);case 63:case"end":return e.stop()}}),e,null,[[13,26,29,32],[39,52,55,58]])})));return function(t){return e.apply(this,arguments)}}(),i=D(t.entities),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=14;break}if(o=a.value,!n(o)){e.next=12;break}return e.next=10,r(o);case 10:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:s=D(this.blocks.values()),e.prev=23,s.s();case 25:if((l=s.n()).done){e.next=50;break}if(!(h=l.value).data.hasOwnProperty("entities")){e.next=48;break}d=D(h.data.entities),e.prev=29,d.s();case 31:if((f=d.n()).done){e.next=40;break}if(p=f.value,!n(p)){e.next=38;break}return e.next=36,r(p);case 36:if(e.sent){e.next=38;break}return e.abrupt("return");case 38:e.next=31;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(29),d.e(e.t1);case 45:return e.prev=45,d.f(),e.finish(45);case 48:e.next=25;break;case 50:e.next=55;break;case 52:e.prev=52,e.t2=e.catch(23),s.e(e.t2);case 55:return e.prev=55,s.f(),e.finish(55);case 58:case"end":return e.stop()}}),e,this,[[3,16,19,22],[23,52,55,58],[29,42,45,48]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_ProcessDxfEntity",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e.type){case"LINE":t=this._DecomposeLine(e,n);break;case"POLYLINE":case"LWPOLYLINE":t=this._DecomposePolyline(e,n);break;case"ARC":t=this._DecomposeArc(e,n);break;case"CIRCLE":t=this._DecomposeCircle(e,n);break;case"ELLIPSE":t=this._DecomposeEllipse(e,n);break;case"POINT":t=this._DecomposePoint(e,n);break;case"SPLINE":t=this._DecomposeSpline(e,n);break;case"INSERT":return void this._ProcessInsert(e,n);case"TEXT":t=this._DecomposeText(e,n);break;case"MTEXT":t=this._DecomposeMText(e,n);break;case"3DFACE":t=this._Decompose3DFace(e,n);break;case"SOLID":t=this._DecomposeSolid(e,n);break;case"DIMENSION":t=this._DecomposeDimension(e,n);break;case"ATTRIB":t=this._DecomposeAttribute(e,n);break;case"HATCH":t=this._DecomposeHatch(e,n);break;default:return void console.log("Unhandled entity type: "+e.type)}var r,i=D(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._ProcessEntity(a,n)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_ProcessEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e.type){case Uf.Type.POINTS:this._ProcessPoints(e,t);break;case Uf.Type.LINE_SEGMENTS:this._ProcessLineSegments(e,t);break;case Uf.Type.POLYLINE:this._ProcessPolyline(e,t);break;case Uf.Type.TRIANGLES:this._ProcessTriangles(e,t);break;default:throw new Error("Unhandled entity type: "+e.type)}}},{key:"_GetLineType",value:function(e){return 0}},{key:"_IsPlainLine",value:function(e){return!Boolean(e.startWidth||e.endWidth)}},{key:"_DecomposeLine",value:u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2===t.vertices.length){e.next=2;break}return e.abrupt("return");case 2:return r=this._GetEntityLayer(t,n),i=this._GetEntityColor(t,n),e.next=6,new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:t.vertices,layer:r,color:i,lineType:this._GetLineType(t,t.vertices[0])});case 6:case"end":return e.stop()}}),e,this)}))},{key:"_GenerateBulgeVertices",value:function(e,t,n,r){var i=4*Math.atan(r),a=Math.abs(i);if(a<this.options.arcTessellationAngle)e.push(new Mi(n.x,n.y));else{var o=i/2,s=Math.sin(o),u=Math.cos(o),l={x:n.x-t.x,y:n.y-t.y},c=l.x*l.x+l.y*l.y;if(!(c<2*Number.MIN_VALUE)){var h=Math.sqrt(c),d=h/2/s;l.x/=h,l.y/=h;var f=(l.x*s-l.y*u)*d+t.x,p=(l.x*u+l.y*s)*d+t.y,v=Math.floor(a/this.options.arcTessellationAngle);if(v<this.options.minArcTessellationSubdivisions&&(v=this.options.minArcTessellationSubdivisions),v>1){var g=Math.atan2(t.y-p,t.x-f),m=i/v;i<0&&(d=-d);for(var y=1;y<v;y++){var b=g+y*m,x=new Mi(f+d*Math.cos(b),p+d*Math.sin(b));e.push(x)}}e.push(new Mi(n.x,n.y))}}}},{key:"_GenerateArcVertices",value:function(e){var t=e.vertices,n=e.center,r=e.radius,i=e.startAngle,a=void 0===i?null:i,o=e.endAngle,s=void 0===o?null:o,u=e.tessellationAngle,l=void 0===u?null:u,c=e.yRadius,h=void 0===c?null:c,d=e.transform,f=void 0===d?null:d,p=e.rotation,v=void 0===p?null:p,g=e.ccwAngleDir,m=void 0===g||g;if(n&&r){l||(l=this.options.arcTessellationAngle),null===h&&(h=r),void 0===a||null===a?a=0:a+=this.angBase;var y=!1;if(void 0===s||null===s?(s=a+2*Math.PI,y=!0):s+=this.angBase,!m){var b=a;a=-s,s=-b}for(;s<=a;)s+=2*Math.PI;var x=s-a,E=Math.floor(x/l);0===E&&(E=1);var w=x/E,k=null;v&&(k=(new Ti).makeRotation(v));for(var S=0;S<=E&&(S!==E||!y);S++){var _=void 0;_=m?a+S*w:a+(E-S)*w;var M=new Mi(r*Math.cos(_),h*Math.sin(_));k&&M.applyMatrix3(k),M.add(n),f&&M.applyMatrix3(f),t.push(M)}}}},{key:"_DecomposeArc",value:u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._GetEntityColor(t,n),i=this._GetEntityLayer(t,n),a=this._GetLineType(t,null,n),o=[],this._GenerateArcVertices({vertices:o,center:t.center,radius:t.radius,startAngle:t.startAngle,endAngle:t.endAngle,transform:this._GetEntityExtrusionTransform(t)}),e.next=7,new Uf({type:Uf.Type.POLYLINE,vertices:o,layer:i,color:r,lineType:a,shape:void 0===t.endAngle});case 7:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeCircle",value:u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._GetEntityColor(t,n),i=this._GetEntityLayer(t,n),a=this._GetLineType(t,null,n),o=[],this._GenerateArcVertices({vertices:o,center:t.center,radius:t.radius,transform:this._GetEntityExtrusionTransform(t)}),e.next=7,new Uf({type:Uf.Type.POLYLINE,vertices:o,layer:i,color:r,lineType:a,shape:!0});case 7:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeEllipse",value:u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p,v,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this._GetEntityColor(t,n),s=this._GetEntityLayer(t,n),l=this._GetLineType(t,null,n),c=[],h=Math.sqrt(t.majorAxisEndPoint.x*t.majorAxisEndPoint.x+t.majorAxisEndPoint.y*t.majorAxisEndPoint.y),d=h*t.axisRatio,f=Math.atan2(t.majorAxisEndPoint.y,t.majorAxisEndPoint.x),p=null!==(r=t.startAngle)&&void 0!==r?r:0,v=null!==(i=t.endAngle)&&void 0!==i?i:p+2*Math.PI;v<=p;)v+=2*Math.PI;return g=null===(null!==(a=t.endAngle)&&void 0!==a?a:null)||Math.abs(v-p-2*Math.PI)<1e-6,this._GenerateArcVertices({vertices:c,center:t.center,radius:h,startAngle:t.startAngle,endAngle:g?null:t.endAngle,yRadius:d,rotation:f,ccwAngleDir:!this._GetEntityExtrusionTransform(t)}),e.next=14,new Uf({type:Uf.Type.POLYLINE,vertices:c,layer:s,color:o,lineType:l,shape:g});case 14:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposePoint",value:u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pdMode!==zf.NONE){e.next=2;break}return e.abrupt("return");case 2:if(!(this.pdMode!==zf.DOT&&this.pdSize<=0)){e.next=4;break}return e.abrupt("return");case 4:if(r=this._GetEntityColor(t,n),i=this._GetEntityLayer(t,n),a=this.pdMode&zf.MARK_MASK,!(0!==(this.pdMode&zf.SHAPE_MASK))){e.next=14;break}return o=new sh(i,Pf,sh.GeometryType.POINT_INSTANCE,r,0),this._GetBatch(o).PushVertex(this._TransformVertex(t.position)),this._CreatePointShapeBlock(),e.abrupt("return");case 14:if(a!==zf.DOT){e.next=18;break}return e.next=17,new Uf({type:Uf.Type.POINTS,vertices:[t.position],layer:i,color:r,lineType:null});case 17:return e.abrupt("return");case 18:return s=[],this._CreatePointMarker(s,a,t.position),e.next=22,new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:s,layer:i,color:r,lineType:null});case 22:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeAttribute",value:u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.textRenderer.canRender){e.next=2;break}return e.abrupt("return");case 2:return r=this.inserts.get(t.ownerHandle),i=this._GetEntityLayer(null!==r&&void 0!==r?r:t,n),a=this._GetEntityColor(null!==r&&void 0!==r?r:t,n),e.delegateYield(this.textRenderer.Render({text:nf(t.text),fontSize:t.textHeight*t.scale,startPos:t.startPoint,endPos:t.endPoint,rotation:t.rotation,hAlign:t.horizontalJustification,vAlign:t.verticalJustification,color:a,layer:i}),"t0",6);case 6:case"end":return e.stop()}}),e,this)}))},{key:"_CreatePointMarker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;function i(t,i){var a,o;e.push({x:(null!==(a=null===n||void 0===n?void 0:n.x)&&void 0!==a?a:0)+t*r.pdSize*.5,y:(null!==(o=null===n||void 0===n?void 0:n.y)&&void 0!==o?o:0)+i*r.pdSize*.5})}switch(t){case zf.PLUS:i(0,1.5),i(0,-1.5),i(-1.5,0),i(1.5,0);break;case zf.CROSS:i(-1,1),i(1,-1),i(1,1),i(-1,-1);break;case zf.TICK:i(0,1),i(0,0);break;default:console.warn("Unsupported point display type: "+t)}}},{key:"_CreatePointShapeBlock",value:function(){if(!this.pointShapeBlock){this.pointShapeBlock=new Lf({name:Pf,position:{x:0,y:0}}),this.pointShapeBlock.offset=new Mi(0,0);var e=this.pointShapeBlock.DefinitionContext(),t=this.pdMode&zf.MARK_MASK;if(t!==zf.DOT&&t!==zf.NONE){var n=[];this._CreatePointMarker(n,t);var r=new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:n,color:Gf.BY_BLOCK});this._ProcessEntity(r,e)}if(this.pdMode&zf.SQUARE){var i=.5*this.pdSize,a=[{x:-i,y:i},{x:i,y:i},{x:i,y:-i},{x:-i,y:-i}],o=new Uf({type:Uf.Type.POLYLINE,vertices:a,color:Gf.BY_BLOCK,shape:!0});this._ProcessEntity(o,e)}if(this.pdMode&zf.CIRCLE){var s=[];this._GenerateArcVertices({vertices:s,center:{x:0,y:0},radius:.5*this.pdSize,tessellationAngle:Cf});var u=new Uf({type:Uf.Type.POLYLINE,vertices:s,color:Gf.BY_BLOCK,shape:!0});this._ProcessEntity(u,e)}}}},{key:"_Decompose3DFace",value:u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._DecomposeFace(t,t.vertices,n,this.options.wireframeMesh),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeSolid",value:u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._DecomposeFace(t,t.points,n,!1,this._GetEntityExtrusionTransform(t)),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeFace",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return u().mark((function o(){var s,l,c,h,d,f,p,v,g,m,y,b;return u().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=function(e,t,n){var r=(new Mi).subVectors(t,e),i=(new Mi).subVectors(n,e);return Math.abs(r.cross(i))>Number.EPSILON},s=i._GetEntityLayer(e,n),l=i._GetEntityColor(e,n),h=new Mi(t[0].x,t[0].y),d=new Mi(t[1].x,t[1].y),f=new Mi(t[2].x,t[2].y),p=null,v=c(h,d,f),g=!1,t.length>3&&(p=new Mi(t[3].x,t[3].y),g=c(d,p,f),a&&p.applyMatrix3(a)),a&&(h.applyMatrix3(a),d.applyMatrix3(a),f.applyMatrix3(a)),v||g){o.next=13;break}return o.abrupt("return");case 13:if(!r){o.next=20;break}return m=[],v&&!g?m.push(h,d,f):!v&&g?m.push(d,p,f):m.push(h,d,p,f),o.next=18,new Uf({type:Uf.Type.POLYLINE,vertices:m,layer:s,color:l,shape:!0});case 18:o.next=26;break;case 20:return y=[],b=[],v&&(y.push(h,d,f),b.push(0,1,2)),g&&(v?b.push(1,2,3):(y.push(d,f),b.push(0,1,2)),y.push(p)),o.next=26,new Uf({type:Uf.Type.TRIANGLES,vertices:y,indices:b,layer:s,color:l});case 26:case"end":return o.stop()}}),o)}))()}},{key:"_DecomposeText",value:u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.textRenderer.canRender){e.next=2;break}return e.abrupt("return");case 2:return r=this._GetEntityLayer(t,n),i=this._GetEntityColor(t,n),e.delegateYield(this.textRenderer.Render({text:nf(t.text),fontSize:t.textHeight,startPos:t.startPoint,endPos:t.endPoint,rotation:t.rotation,hAlign:t.halign,vAlign:t.valign,widthFactor:t.xScale,color:i,layer:r}),"t0",5);case 5:case"end":return e.stop()}}),e,this)}))},{key:"_DecomposeMText",value:u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.textRenderer.canRender){e.next=2;break}return e.abrupt("return");case 2:return r=this._GetEntityLayer(t,n),i=this._GetEntityColor(t,n),(a=new ef).Parse(nf(t.text)),e.delegateYield(this.textRenderer.RenderMText({formattedText:a.GetContent(),fontSize:t.height,position:t.position,rotation:t.rotation,direction:t.direction,attachment:t.attachmentPoint,lineSpacing:t.lineSpacing,width:t.width,color:i,layer:r}),"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"_CreateLinearDimension",value:function(e){var t=this,n=15&(e.dimensionType||0);if(0!=n&&1!=n||!e.linearOrAngularPoint1||!e.linearOrAngularPoint2||!e.anchorPoint)return null;var r=null;e.hasOwnProperty("styleName")&&(r=this.dimStyles.get(e.styleName));var i=new vf({p1:(new Mi).copy(e.linearOrAngularPoint1),p2:(new Mi).copy(e.linearOrAngularPoint2),anchor:(new Mi).copy(e.anchorPoint),isAligned:1==n,angle:e.angle,text:e.text,textAnchor:e.middleOfText?(new Mi).copy(e.middleOfText):null,textRotation:e.textRotation},(function(n){return t._GetDimStyleValue(n,e,r)}),(function(e,n){return t.textRenderer.GetLineWidth(e,n)}));return i.IsValid?i:(console.warn("Invalid dimension geometry detected for "+e.handle),null)}},{key:"_DecomposeDimension",value:u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(null!==(r=t.block)&&void 0!==r?r:null)||!this.blocks.has(t.block)){e.next=4;break}return i={name:t.block,position:{x:0,y:0},layer:t.layer,color:t.color,colorIndex:t.colorIndex},this._ProcessInsert(i,n),e.abrupt("return");case 4:if(a=this._CreateLinearDimension(t)){e.next=7;break}return e.abrupt("return");case 7:o=this._GetEntityLayer(t,n),s=this._GetEntityColor(t,n),l=this._GetEntityExtrusionTransform(t),c=a.GenerateLayout(),h=D(c.lines),e.prev=12,h.s();case 14:if((d=h.n()).done){e.next=23;break}return p=d.value,v=[],l&&(p.start.applyMatrix3(l),p.end.applyMatrix3(l)),v.push(p.start,p.end),e.next=21,new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:v,layer:o,color:null!==(f=p.color)&&void 0!==f?f:s});case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),h.e(e.t0);case 28:return e.prev=28,h.f(),e.finish(28);case 31:g=D(c.triangles),e.prev=32,g.s();case 34:if((m=g.n()).done){e.next=41;break}if(b=m.value,l){x=D(b.vertices);try{for(x.s();!(E=x.n()).done;)E.value.applyMatrix3(l)}catch(u){x.e(u)}finally{x.f()}}return e.next=39,new Uf({type:Uf.Type.TRIANGLES,vertices:b.vertices,indices:b.indices,layer:o,color:null!==(y=b.color)&&void 0!==y?y:s});case 39:e.next=34;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(32),g.e(e.t1);case 46:return e.prev=46,g.f(),e.finish(46);case 49:if(!this.textRenderer.canRender){e.next=67;break}w=D(c.texts),e.prev=51,w.s();case 53:if((k=w.n()).done){e.next=59;break}return _=k.value,l&&_.position.applyMatrix3(l),e.delegateYield(this.textRenderer.Render({text:_.text,fontSize:_.size,startPos:_.position,rotation:_.angle,hAlign:sf.CENTER,vAlign:uf.MIDDLE,color:null!==(S=_.color)&&void 0!==S?S:s,layer:o}),"t2",57);case 57:e.next=53;break;case 59:e.next=64;break;case 61:e.prev=61,e.t3=e.catch(51),w.e(e.t3);case 64:return e.prev=64,w.f(),e.finish(64);case 67:case"end":return e.stop()}}),e,this,[[12,25,28,31],[32,43,46,49],[51,61,64,67]])}))},{key:"_DecomposeHatch",value:u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C,P,R,N,O,L,I,F,U,B;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSolid){e.next=2;break}return e.abrupt("return");case 2:if((i=null!==(r=t.hatchStyle)&&void 0!==r?r:0)==mf.ODD_PARITY||i==mf.THROUGH_ENTIRE_AREA){e.next=5;break}return e.abrupt("return");case 5:if(0!=(a=this._GetHatchBoundaryLoops(t)).length){e.next=9;break}return console.warn("HATCH entity with empty boundary loops array (perhaps some loop types are not implemented yet)"),e.abrupt("return");case 9:if(o=new Ef(a,i),s=this._GetEntityLayer(t,n),l=this._GetEntityColor(t,n),c=this._GetEntityExtrusionTransform(t),h=null,t.patternName&&((h=Mf(t.patternName,this.isMetric))||console.log("Hatch pattern with name ".concat(t.patternName," not found ")+"(metric: ".concat(this.isMetric,")"))),null==h&&t.definitionLines&&(h=new wf(t.definitionLines,null,!1)),null==h&&(h=Mf("ANSI31")),h){e.next=19;break}return e.abrupt("return");case 19:d=t.seedPoints?t.seedPoints:[{x:0,y:0}],f=D(d),e.prev=21,f.s();case 23:if((p=f.n()).done){e.next=67;break}v=p.value,g=o.GetPatternTransform({seedPoint:v,angle:t.patternAngle,scale:t.patternScale}),m=D(h.lines),e.prev=27,m.s();case 29:if((y=m.n()).done){e.next=57;break}if(x=y.value,E=void 0,w=void 0,h.offsetInLineSpace?(E=x.offset.x,w=x.offset.y):(_=Math.sin(-(null!==(k=x.angle)&&void 0!==k?k:0)),M=Math.cos(-(null!==(S=x.angle)&&void 0!==S?S:0)),E=x.offset.x*M-x.offset.y*_,w=x.offset.x*_+x.offset.y*M),w<0&&(w=-w,E=-E),T=o.GetLineTransform({patTransform:g,basePoint:x.base,angle:null!==(b=x.angle)&&void 0!==b?b:0}),A=o.GetBoundingBox(T),C=.05*(A.max.x-A.min.x),P=void 0,R=void 0,0==w?(P=0,R=0):(P=Math.ceil(A.min.y/w),R=Math.floor(A.max.y/w)),!(R-P>2e4)){e.next=43;break}return console.warn("Too many lines produced by hatching pattern"),e.abrupt("continue",55);case 43:if(N=void 0,x.dashes&&x.dashes.length>1){N=0,O=D(x.dashes);try{for(O.s();!(L=O.n()).done;)(I=L.value)<0?N-=I:N+=I}catch(z){O.e(z)}finally{O.f()}}else N=null;F=T.clone().invert(),U=u().mark((function e(){var t,n,r,i,a,h,d,f,p,v,g,m,y,b,k,S,_,M,T,P,R,O,L,I,U,z,G,H;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=function(e,n){var r,i,a,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=D(v),t.prev=1,r.s();case 3:if((i=r.n()).done){t.next=16;break}if(!((a=i.value)[0]>=n)){t.next=7;break}return t.abrupt("return");case 7:if(!(a[1]<=e)){t.next=9;break}return t.abrupt("continue",14);case 9:return o=Math.max(e,a[0]),s=Math.min(n,a[1]),t.next=13,[o,s];case 13:e=s;case 14:t.next=3;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,18,21,24]])},m=function(e){var t=p.clone().multiplyScalar(e[0]).add(d),n=p.clone().multiplyScalar(e[1]).add(d);return c&&(t.applyMatrix3(c),n.applyMatrix3(c)),e[1]-e[0]<=Number.EPSILON?new Uf({type:Uf.Type.POINTS,vertices:[t],layer:s,color:l}):new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:[t,n],layer:s,color:l})},g=function(e){return(e-i)/h},t=u().mark(y),n=B*w,r=B*E,i=A.min.x-C,a=A.max.x+C,h=a-i,d=new Mi(i,n).applyMatrix3(F),f=new Mi(a,n).applyMatrix3(F),p=f.clone().sub(d),v=o.ClipLine([d,f]),null===N){e.next=64;break}if(b=Math.floor((i-r)/N),!((k=Math.floor((a-r)/N))-b>=2e4)){e.next=19;break}return console.warn("Too many segments produced by hatching pattern line"),e.abrupt("return",1);case 19:S=b;case 20:if(!(S<=k)){e.next=62;break}_=g(r+S*N),M=D(x.dashes),e.prev=23,M.s();case 25:if((T=M.n()).done){e.next=51;break}if(P=T.value,(R=P<0)&&(P=-P),O=P/h,R){e.next=48;break}L=D(y(_,_+O)),e.prev=32,L.s();case 34:if((I=L.n()).done){e.next=40;break}return U=I.value,e.next=38,m(U);case 38:e.next=34;break;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(32),L.e(e.t0);case 45:return e.prev=45,L.f(),e.finish(45);case 48:_+=O;case 49:e.next=25;break;case 51:e.next=56;break;case 53:e.prev=53,e.t1=e.catch(23),M.e(e.t1);case 56:return e.prev=56,M.f(),e.finish(56);case 59:S++,e.next=20;break;case 62:e.next=81;break;case 64:z=D(v),e.prev=65,z.s();case 67:if((G=z.n()).done){e.next=73;break}return H=G.value,e.next=71,m(H);case 71:e.next=67;break;case 73:e.next=78;break;case 75:e.prev=75,e.t2=e.catch(65),z.e(e.t2);case 78:return e.prev=78,z.f(),e.finish(78);case 81:case"end":return e.stop()}}),e,null,[[23,53,56,59],[32,42,45,48],[65,75,78,81]])})),B=P;case 48:if(!(B<=R)){e.next=55;break}return e.delegateYield(U(),"t0",50);case 50:if(!e.t0){e.next=52;break}return e.abrupt("continue",52);case 52:B++,e.next=48;break;case 55:e.next=29;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(27),m.e(e.t1);case 62:return e.prev=62,m.f(),e.finish(62);case 65:e.next=23;break;case 67:e.next=72;break;case 69:e.prev=69,e.t2=e.catch(21),f.e(e.t2);case 72:return e.prev=72,f.f(),e.finish(72);case 75:case"end":return e.stop()}}),e,this,[[21,69,72,75],[27,59,62,65]])}))},{key:"_GetHatchBoundaryLoops",value:function(e){if(!e.boundaryLoops)return[];var t,n=[],r=function(e,t){var n=t.length;if(0!=n){if(0==e.length)e.push(t[0]);else{var r=e[e.length-1];r.x==t[0].x&&r.y==t[0].y||e.push(t[0])}for(var i=1;i<n;i++)e.push(t[i])}},i=D(e.boundaryLoops);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=[];if(2&a.type)for(var s=0;s<a.polyline.vertices.length;s++){var u,l=a.polyline.vertices[s];if(0==(null!==(u=l.bulge)&&void 0!==u?u:0))o.push(new Mi(l.x,l.y));else{var c;0==(null!==(c=a.polyline.vertices[0==s?a.polyline.vertices.length-1:s-1].bulge)&&void 0!==c?c:0)&&o.push(new Mi(l.x,l.y));var h=a.polyline.vertices[s==a.polyline.vertices.length-1?0:s+1];this._GenerateBulgeVertices(o,l,h,l.bulge)}}else if(a.edges&&a.edges.length>0){var d,f=D(a.edges);try{for(f.s();!(d=f.n()).done;){var p=d.value;switch(p.type){case 1:r(o,[new Mi(p.start.x,p.start.y),new Mi(p.end.x,p.end.y)]);break;case 2:var v=[];this._GenerateArcVertices({vertices:v,center:p.start,radius:p.radius,startAngle:p.startAngle,endAngle:p.endAngle,ccwAngleDir:p.isCcw}),r(o,v);break;case 3:var g=p.start,m=p.end,y=Math.sqrt(m.x*m.x+m.y*m.y),b=y*p.radius,x=Math.atan2(m.y,m.x),E=[];if(this._GenerateArcVertices({vertices:E,center:g,radius:y,startAngle:p.startAngle,endAngle:p.endAngle,yRadius:b,ccwAngleDir:p.isCcw}),0!==x){var w,k=Math.cos(x),S=Math.sin(x),_=D(E);try{for(_.s();!(w=_.n()).done;){var M=w.value,T=M.x-g.x,A=M.y-g.y;M.x=T*k-A*S+g.x,M.y=T*S+A*k+g.y}}catch(F){_.e(F)}finally{_.f()}}r(o,E);break;case 4:for(var C=p.controlPoints.map((function(e){return[e.x,e.y]})),P=4*C.length,R=1/P,N=0;N<=P;N++){var O=this._InterpolateSpline(N*R,p.degreeOfSplineCurve,C,p.knotValues);o.push(new Mi(O[0],O[1]))}break;default:console.warn("Unhandled hatch boundary loop edge type: "+p.type)}}}catch(F){f.e(F)}finally{f.f()}}if(o.length>2){var L=o[0],I=o[o.length-1];I.x==L.x&&I.y==L.y&&(o.length=o.length-1)}o.length>2&&n.push(o)}}catch(F){i.e(F)}finally{i.f()}return n}},{key:"_GetDimStyleValue",value:function(e,t,n){var r,i=null===t||void 0===t||null===(r=t.xdata)||void 0===r||null===(r=r.ACAD)||void 0===r||null===(r=r.DSTYLE)||void 0===r?void 0:r.values;if(i){var a,o=!0,s=!1,u=D(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(o){if(1070!=l.code)break;zn.get(l.value)==e&&(s=!0)}else if(s)return l.value;o=!o}}catch(h){u.e(h)}finally{u.f()}}if(n&&n.hasOwnProperty(e))return n[e];if(this.vars.has(e))return this.vars.get(e);if(Rf.hasOwnProperty(e)){var c=Rf[e];return c instanceof Function?c.call(this):c}return null}},{key:"_ProcessInsert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){if(t.name===e.name)return void console.warn("Recursive block reference: "+t.name);var n=this.blocks.get(e.name);if(!n)return void console.warn("Unresolved nested block reference: "+e.name);var r=t.NestedBlockContext(n,e);if(n.data.entities){var i,a=D(n.data.entities);try{for(a.s();!(i=a.n()).done;){var o=i.value;this._ProcessDxfEntity(o,r)}}catch(m){a.e(m)}finally{a.f()}}}else{var s=this.blocks.get(e.name);if(s){if(s.HasGeometry()){var u=this._GetEntityLayer(e,null),l=this._GetEntityColor(e,null),c=this._GetLineType(e,null,null),h=s.InstantiationContext().GetInsertionTransform(e),d=s.bounds;if(this._UpdateBounds(new Mi(d.minX,d.minY).applyMatrix3(h)),this._UpdateBounds(new Mi(d.maxX,d.maxY).applyMatrix3(h)),this._UpdateBounds(new Mi(d.minX,d.maxY).applyMatrix3(h)),this._UpdateBounds(new Mi(d.maxX,d.minY).applyMatrix3(h)),h.translate(-this.origin.x,-this.origin.y),s.flatten){var f,p=D(s.batches);try{for(p.s();!(f=p.n()).done;){var v=f.value;this._FlattenBatch(v,u,l,c,h)}}catch(m){p.e(m)}finally{p.f()}}else{var g=new sh(u,e.name,sh.GeometryType.BLOCK_INSTANCE,l,c);this._GetBatch(g).PushInstanceTransform(h)}}}else console.warn("Unresolved block reference in INSERT: "+e.name)}}},{key:"_FlattenBatch",value:function(e,t,n,r,i){var a,o=this.layers.get(t);if(e.key.color===Gf.BY_BLOCK)a=n;else if(e.key.color===Gf.BY_LAYER){var s;a=null!==(s=null===o||void 0===o?void 0:o.color)&&void 0!==s?s:0}else a=e.key.color;var u=new sh(t,null,e.key.geometryType,a,0);this._GetBatch(u).Merge(e,i)}},{key:"_GenerateShapedPolyline",value:u().mark((function e(t,n,r,i,a){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Uf({type:Uf.Type.POLYLINE,vertices:t,layer:n,color:r,lineType:i,shape:a});case 2:case"end":return e.stop()}}),e)}))},{key:"_MirrorEntityVertices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e.extrusionDirection||e.extrusionDirection.z>=0)return null!==t&&void 0!==t?t:e.vertices;t&&t!==e.vertices||(t=e.vertices.slice());for(var n=t.length,r=0;r<n;r++){var i=t[r],a={x:-i.x};for(var o in i)i.hasOwnProperty(o)&&"x"!==o&&(a[o]=i[o]);t[r]=a}return t}},{key:"_DecomposePolyline",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(v=function(t){var n,r;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t!==h){i.next=2;break}return i.abrupt("return");case 2:if(n=!1,r=p,t===o&&0===h?(n=!0,null===r&&(r=a)):t===o-1&&0===h?null===r&&(r=a):t===o?null===r&&(r=a.slice(h,t)).push(a[0]):null===r&&(r=a.slice(h,t+1)),!d){i.next=10;break}return i.next=8,new Uf({type:Uf.Type.POLYLINE,vertices:r,layer:l,color:s,lineType:f,shape:n});case 8:i.next=11;break;case 10:return i.delegateYield(c._GenerateShapedPolyline(r,l,s,f,n),"t0",11);case 11:h=t,t!==o&&(d=c._IsPlainLine(a[t]),f=c._GetLineType(e,a[t])),p=null;case 14:case"end":return i.stop()}}),i)},i=u().mark(v),!e.isPolyfaceMesh){r.next=5;break}return r.delegateYield(t._DecomposePolyfaceMesh(e,n),"t0",4);case 4:return r.abrupt("return");case 5:if(e.includesCurveFitVertices||e.includesSplineFitVertices?(a=e.vertices.filter((function(e){return e.splineVertex||e.curveFittingVertex})),o=a.length):(a=e.vertices,o=e.vertices.length),!(o<2)){r.next=8;break}return r.abrupt("return");case 8:a=t._MirrorEntityVertices(e,a),s=t._GetEntityColor(e,n),l=t._GetEntityLayer(e,n),c=t,h=0,d=t._IsPlainLine(a[0]),f=t._GetLineType(e,a[0],n),p=null,g=1;case 17:if(!(g<=o)){r.next=39;break}if(m=a[g-1],y=void 0,g!==o){r.next=27;break}if(e.shape){r.next=24;break}return r.delegateYield(v(g-1),"t1",23);case 23:return r.abrupt("break",39);case 24:y=a[0],r.next=28;break;case 27:y=a[g];case 28:if(Boolean(m.bulge)&&d?(null===p&&(p=a.slice(h,g)),t._GenerateBulgeVertices(p,m,y,m.bulge)):null!==p&&p.push(y),g!==o){r.next=32;break}return r.delegateYield(v(g),"t2",31);case 31:return r.abrupt("break",39);case 32:if(b=t._IsPlainLine(y),x=t._GetLineType(e,y),!(b!==d||d&&x!==f)){r.next=36;break}return r.delegateYield(v(g),"t3",36);case 36:g++,r.next=17;break;case 39:case"end":return r.stop()}}),r)}))()}},{key:"_DecomposePolyfaceMesh",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C,P;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=t._GetEntityLayer(e,n),a=t._GetEntityColor(e,n),o=[],s=[],l=D(e.vertices),r.prev=5,l.s();case 7:if((c=l.n()).done){r.next=36;break}if(!(h=c.value).faces){r.next=33;break}d={indices:[],hiddenEdges:[]},f=D(h.faces),r.prev=12,f.s();case 14:if((p=f.n()).done){r.next=22;break}if(0!=(v=p.value)){r.next=18;break}return r.abrupt("break",22);case 18:d.indices.push(v<0?-v-1:v-1),d.hiddenEdges.push(v<0);case 20:r.next=14;break;case 22:r.next=27;break;case 24:r.prev=24,r.t0=r.catch(12),f.e(r.t0);case 27:return r.prev=27,f.f(),r.finish(27);case 30:3!=d.indices.length&&4!=d.indices.length||s.push(d),r.next=34;break;case 33:o.push(new Mi(h.x,h.y));case 34:r.next=7;break;case 36:r.next=41;break;case 38:r.prev=38,r.t1=r.catch(5),l.e(r.t1);case 41:return r.prev=41,l.f(),r.finish(41);case 44:g=[],m=function(e,t){if(g.length>0){var n=g[g.length-1];if(n.indices[n.indices.length-1]==e)return void n.indices.push(t);n.indices[0]==n.indices[n.indices.length-1]&&(n.isClosed=!0)}g.push({indices:[e,t],isClosed:!1})},y=0,b=s;case 47:if(!(y<b.length)){r.next=68;break}if(x=b[y],!t.options.wireframeMesh){r.next=61;break}E=0;case 51:if(!(E<x.indices.length)){r.next=59;break}if(!x.hiddenEdges[E]){r.next=54;break}return r.abrupt("continue",56);case 54:w=E<x.indices.length-1?E+1:0,m(x.indices[E],x.indices[w]);case 56:E++,r.next=51;break;case 59:r.next=65;break;case 61:return k=void 0,k=3==x.indices.length?x.indices:[x.indices[0],x.indices[1],x.indices[2],x.indices[0],x.indices[2],x.indices[3]],r.next=65,new Uf({type:Uf.Type.TRIANGLES,vertices:o,indices:k,layer:i,color:a});case 65:y++,r.next=47;break;case 68:if(!t.options.wireframeMesh){r.next=94;break}S=D(g),r.prev=70,S.s();case 72:if((_=S.n()).done){r.next=86;break}if(2!=(M=_.value).length){r.next=79;break}return r.next=77,new Uf({type:Uf.Type.LINE_SEGMENTS,vertices:[o[M.indices[0]],o[M.indices[1]]],layer:i,color:a});case 77:r.next=84;break;case 79:T=[],A=D(M.indices);try{for(A.s();!(C=A.n()).done;)P=C.value,T.push(o[P])}catch(u){A.e(u)}finally{A.f()}return r.next=84,new Uf({type:Uf.Type.POLYLINE,vertices:T,layer:i,color:a,shape:M.isClosed});case 84:r.next=72;break;case 86:r.next=91;break;case 88:r.prev=88,r.t2=r.catch(70),S.e(r.t2);case 91:return r.prev=91,S.f(),r.finish(91);case 94:case"end":return r.stop()}}),r,null,[[5,38,41,44],[12,24,27,30],[70,88,91,94]])}))()}},{key:"_DecomposeSpline",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u().mark((function r(){var i,a,o,s,l,c,h,d,f;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t._GetEntityColor(e,n),a=t._GetEntityLayer(e,n),o=t._GetLineType(e,null,n),e.controlPoints){r.next=5;break}return r.abrupt("return");case 5:for(s=e.controlPoints.map((function(e){return[e.x,e.y]})),l=[],c=4*s.length,h=1/c,d=0;d<=c;d++)f=t._InterpolateSpline(d*h,e.degreeOfSplineCurve,s,e.knotValues),l.push({x:f[0],y:f[1]});return r.next=12,new Uf({type:Uf.Type.POLYLINE,vertices:l,layer:a,color:i,lineType:o});case 12:case"end":return r.stop()}}),r)}))()}},{key:"_InterpolateSpline",value:function(e,t,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=n.length,c=n[0].length;if(t<1)throw new Error("Degree must be at least 1 (linear)");if(t>l-1)throw new Error("Degree must be less than or equal to point count - 1");if(!u)for(u=[],r=0;r<l;r++)u[r]=1;if(s){if(s.length!==l+t+1)throw new Error("Bad knot vector length")}else for(s=[],r=0;r<l+t+1;r++)s[r]=r;var h=[t,s.length-1-t],d=s[h[0]],f=s[h[1]];for((e=e*(f-d)+d)<d?e=d:e>f&&(e=f),a=h[0];a<h[1]&&!(e>=s[a]&&e<=s[a+1]);a++);var p,v=[];for(r=0;r<l;r++){for(v[r]=[],i=0;i<c;i++)v[r][i]=n[r][i]*u[r];v[r][c]=u[r]}for(o=1;o<=t+1;o++)for(r=a;r>a-t-1+o;r--)for(p=(e-s[r])/(s[r+t+1-o]-s[r]),i=0;i<c+1;i++)v[r][i]=(1-p)*v[r-1][i]+p*v[r][i];var g=[];for(r=0;r<c;r++)g[r]=v[a][r]/v[a][c];return g}},{key:"_ProcessPoints",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new sh(e.layer,null===n||void 0===n?void 0:n.name,sh.GeometryType.POINTS,e.color,0),i=this._GetBatch(r),a=D(e.vertices);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.PushVertex(this._TransformVertex(o,n))}}catch(s){a.e(s)}finally{a.f()}}},{key:"_ProcessLineSegments",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.vertices.length%2!==0)throw Error("Even number of vertices expected");var n,r=new sh(e.layer,null===t||void 0===t?void 0:t.name,sh.GeometryType.LINES,e.color,e.lineType),i=this._GetBatch(r),a=D(e.vertices);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.PushVertex(this._TransformVertex(o,t))}}catch(s){a.e(s)}finally{a.f()}}},{key:"_ProcessPolyline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e.vertices.length<2)){var n=e.vertices.length;if(n<=3){var r,i=new sh(e.layer,null===t||void 0===t?void 0:t.name,sh.GeometryType.LINES,e.color,e.lineType),a=this._GetBatch(i),o=null,s=D(e.vertices);try{for(s.s();!(r=s.n()).done;){var u=r.value;null!==o&&(a.PushVertex(this._TransformVertex(o,t)),a.PushVertex(this._TransformVertex(u,t))),o=u}}catch(E){s.e(E)}finally{s.f()}e.shape&&n>2&&(a.PushVertex(this._TransformVertex(e.vertices[n-1],t)),a.PushVertex(this._TransformVertex(e.vertices[0],t)))}else{var l,c=new sh(e.layer,null===t||void 0===t?void 0:t.name,sh.GeometryType.INDEXED_LINES,e.color,e.lineType),h=this._GetBatch(c),d=D(e._IterateLineChunks());try{for(d.s();!(l=d.n()).done;){var f,p=l.value,v=h.PushChunk(p.verticesCount),g=D(p.vertices);try{for(g.s();!(f=g.n()).done;){var m=f.value;v.PushVertex(this._TransformVertex(m,t))}}catch(E){g.e(E)}finally{g.f()}var y,b=D(p.indices);try{for(b.s();!(y=b.n()).done;){var x=y.value;v.PushIndex(x)}}catch(E){b.e(E)}finally{b.f()}v.Finish()}}catch(E){d.e(E)}finally{d.f()}}}}},{key:"_ProcessTriangles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e.vertices.length<3))if(e.indices.length%3===0){var n,r=new sh(e.layer,null===t||void 0===t?void 0:t.name,sh.GeometryType.INDEXED_TRIANGLES,e.color,0),i=this._GetBatch(r).PushChunk(e.vertices.length),a=D(e.vertices);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.PushVertex(this._TransformVertex(o,t))}}catch(c){a.e(c)}finally{a.f()}var s,u=D(e.indices);try{for(u.s();!(s=u.n()).done;){var l=s.value;i.PushIndex(l)}}catch(c){u.e(c)}finally{u.f()}i.Finish()}else console.error("Unexpected size of indices array: "+e.indices.length)}},{key:"_GetEntityColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Gf.BY_LAYER;if(0===e.colorIndex?n=Gf.BY_BLOCK:256===e.colorIndex?n=Gf.BY_LAYER:e.hasOwnProperty("color")&&(n=e.color),t)return n;if(n!==Gf.BY_LAYER&&n!==Gf.BY_BLOCK)return n;if(e.hasOwnProperty("layer")){var r=this.layers.get(e.layer);if(r)return r.color}return 0}},{key:"_GetEntityLayer",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)?null:e.hasOwnProperty("layer")?e.layer:"0"}},{key:"_GetEntityExtrusionTransform",value:function(e){return e.hasOwnProperty("extrusionDirection")?e.extrusionDirection.z>0?null:(new Ti).scale(-1,1):null}},{key:"_GetBatch",value:function(e){var t=this.batches.find({key:e});if(null!==t)return t;if(t=new Of(e),this.batches.insert(t),null!==e.blockName&&!e.IsInstanced()){var n=this.blocks.get(e.blockName);n&&n.batches.push(t)}return t}},{key:"_TransformVertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t.TransformVertex(e):(this._UpdateBounds(e),{x:e.x-this.origin.x,y:e.y-this.origin.y})}},{key:"_UpdateBounds",value:function(e){null===this.bounds?this.bounds={minX:e.x,maxX:e.x,minY:e.y,maxY:e.y}:(e.x<this.bounds.minX?this.bounds.minX=e.x:e.x>this.bounds.maxX&&(this.bounds.maxX=e.x),e.y<this.bounds.minY?this.bounds.minY=e.y:e.y>this.bounds.maxY&&(this.bounds.maxY=e.y)),null===this.origin&&(this.origin={x:e.x,y:e.y})}},{key:"_BuildScene",value:function(){var e=0,t=0,n=0;this.batches.each((function(r){e+=r.GetVerticesBufferSize(),t+=r.GetIndicesBufferSize(),n+=r.GetTransformsSize()}));var r={vertices:new ArrayBuffer(e),indices:new ArrayBuffer(t),transforms:new ArrayBuffer(n),batches:[],layers:[],origin:this.origin,bounds:this.bounds,hasMissingChars:this.hasMissingChars},i={vertices:new Float32Array(r.vertices),verticesOffset:0,indices:new Uint16Array(r.indices),indicesOffset:0,transforms:new Float32Array(r.transforms),transformsOffset:0};this.batches.each((function(e){r.batches.push(e.Serialize(i))}));var a,o=D(this.layers.values());try{for(o.s();!(a=o.n()).done;){var s=a.value;r.layers.push({name:s.name,displayName:s.displayName,color:s.color})}}catch(u){o.e(u)}finally{o.f()}return r.pointShapeHasDot=(this.pdMode&zf.MARK_MASK)===zf.DOT,r}}])}(),Of=function(){return p((function e(t){v(this,e),this.key=t,t.IsIndexed()?this.chunks=[]:t.geometryType===sh.GeometryType.BLOCK_INSTANCE?this.transforms=new lh(ch.FLOAT32):this.vertices=new lh(ch.FLOAT32)}),[{key:"PushVertex",value:function(e){var t=this.vertices.Push(e.x);return this.vertices.Push(e.y),t}},{key:"PushInstanceTransform",value:function(e){for(var t=0;t<2;t++)for(var n=0;n<3;n++)this.transforms.Push(e.elements[3*n+t])}},{key:"PushChunk",value:function(e){if(e>Af)throw new Error("Vertices count exceeds chunk limit: "+e);var t,n=null,r=0,i=D(this.chunks);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=Af-a.vertices.GetSize()/2;o<e||(null===n||o<r)&&(n=a,r=o)}}catch(s){i.e(s)}finally{i.f()}return null===n&&(n=this._NewChunk(e)),new Ff(n,e)}},{key:"Merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.key.geometryType!==e.key.geometryType)throw new Error("Rendering batch merging geometry type mismatch: "+"".concat(this.key.geometryType," !== ").concat(e.key.geometryType));if(this.key.IsInstanced())throw new Error("Attempted to merge instanced batch");if(this.key.IsIndexed()){var n,r=D(e.chunks);try{for(r.s();!(n=r.n()).done;){for(var i=n.value,a=i.vertices.size,o=this.PushChunk(a/2),s=0;s<a;s+=2){var u=new Mi(i.vertices.Get(s),i.vertices.Get(s+1));t&&u.applyMatrix3(t),o.PushVertex(u)}for(var l=i.indices.size,c=0;c<l;c++)o.PushIndex(i.indices.Get(c));o.Finish()}}catch(p){r.e(p)}finally{r.f()}}else for(var h=e.vertices.size,d=0;d<h;d+=2){var f=new Mi(e.vertices.Get(d),e.vertices.Get(d+1));t&&f.applyMatrix3(t),this.PushVertex(f)}}},{key:"GetVerticesBufferSize",value:function(){if(this.key.IsIndexed()){var e,t=0,n=D(this.chunks);try{for(n.s();!(e=n.n()).done;){t+=e.value.vertices.GetSize()}}catch(r){n.e(r)}finally{n.f()}return t*Float32Array.BYTES_PER_ELEMENT}return this.key.geometryType===sh.GeometryType.BLOCK_INSTANCE?0:this.vertices.GetSize()*Float32Array.BYTES_PER_ELEMENT}},{key:"GetIndicesBufferSize",value:function(){if(this.key.IsIndexed()){var e,t=0,n=D(this.chunks);try{for(n.s();!(e=n.n()).done;){t+=e.value.indices.GetSize()}}catch(r){n.e(r)}finally{n.f()}return t*Uint16Array.BYTES_PER_ELEMENT}return 0}},{key:"GetTransformsSize",value:function(){return this.key.geometryType===sh.GeometryType.BLOCK_INSTANCE?this.transforms.GetSize()*Float32Array.BYTES_PER_ELEMENT:0}},{key:"Serialize",value:function(e){if(this.key.IsIndexed()){var t,n={key:this.key,chunks:[]},r=D(this.chunks);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.chunks.push(i.Serialize(e))}}catch(l){r.e(l)}finally{r.f()}return n}if(this.key.geometryType===sh.GeometryType.BLOCK_INSTANCE){var a=this.transforms.GetSize(),o={key:this.key,transformsOffset:e.transformsOffset,transformsSize:a};return this.transforms.CopyTo(e.transforms,e.transformsOffset),e.transformsOffset+=a,o}var s=this.vertices.GetSize(),u={key:this.key,verticesOffset:e.verticesOffset,verticesSize:s};return this.vertices.CopyTo(e.vertices,e.verticesOffset),e.verticesOffset+=s,u}},{key:"_NewChunk",value:function(e){var t=new If(e);return this.chunks.push(t),t}}])}(),Lf=function(){return p((function e(t){v(this,e),this.data=t,this.useCount=0,this.nestedUseCount=0,this.verticesCount=0,this.offset=null,this.batches=[],this.flatten=!1,this.bounds=null}),[{key:"SetFlatten",value:function(){return!!this.HasGeometry()&&(this.flatten=1===this.useCount||this.useCount*this.verticesCount<=1024,this.flatten)}},{key:"HasGeometry",value:function(){return null!==this.offset}},{key:"RegisterInsert",value:function(e){this.useCount++}},{key:"RegisterNestedUse",value:function(e){this.nestedUseCount++}},{key:"DefinitionContext",value:function(){return new Df(this,Df.Type.DEFINITION)}},{key:"InstantiationContext",value:function(){return new Df(this,Df.Type.INSTANTIATION)}},{key:"UpdateBounds",value:function(e){null===this.bounds?this.bounds={minX:e.x,maxX:e.x,minY:e.y,maxY:e.y}:(e.x<this.bounds.minX?this.bounds.minX=e.x:e.x>this.bounds.maxX&&(this.bounds.maxX=e.x),e.y<this.bounds.minY?this.bounds.minY=e.y:e.y>this.bounds.maxY&&(this.bounds.maxY=e.y))}}])}(),Df=function(){function e(t,n){v(this,e),this.block=t,this.type=n,this.origin=this.block.data.position,this.transform=new Ti}return p(e,[{key:"name",get:function(){return this.block.data.name}},{key:"TransformVertex",value:function(t){var n=new Mi(t.x,t.y).applyMatrix3(this.transform);if(this.type!==e.Type.DEFINITION&&this.type!==e.Type.NESTED_DEFINITION)throw new Error("Unexpected transform type");if(this.block.verticesCount++,null===this.block.offset){this.block.offset=n;var r=new Mi;return this.block.UpdateBounds(r),r}return n.sub(this.block.offset),this.block.UpdateBounds(n),n}},{key:"GetInsertionTransform",value:function(t){var n=(new Ti).translate(-this.origin.x,-this.origin.y),r=t.yScale||1,i=t.xScale||1,a=-(t.rotation||0)*Math.PI/180,o=t.position.x,s=t.position.y;if(n.scale(i,r),n.rotate(a),n.translate(o,s),t.extrusionDirection&&t.extrusionDirection.z<0&&n.scale(-1,1),this.type!==e.Type.INSTANTIATION)return n;var u=(new Ti).translate(this.block.offset.x,this.block.offset.y);return n.multiply(u)}},{key:"NestedBlockContext",value:function(t,n){t.RegisterNestedUse(this.block);var r=new e(t,e.Type.NESTED_DEFINITION).GetInsertionTransform(n),i=new e(this.block,e.Type.NESTED_DEFINITION);return i.transform=(new Ti).multiplyMatrices(this.transform,r),i}}])}();Df.Type=Object.freeze({DEFINITION:0,NESTED_DEFINITION:1,INSTANTIATION:2});var If=function(){return p((function e(t){v(this,e),t<16&&(t=16),this.indices=new lh(ch.UINT16,2*t),this.vertices=new lh(ch.FLOAT32,2*t)}),[{key:"Serialize",value:function(e){var t={},n=this.vertices.GetSize();t.verticesOffset=e.verticesOffset,t.verticesSize=n,this.vertices.CopyTo(e.vertices,e.verticesOffset),e.verticesOffset+=n;var r=this.indices.GetSize();return t.indicesOffset=e.indicesOffset,t.indicesSize=r,this.indices.CopyTo(e.indices,e.indicesOffset),e.indicesOffset+=r,t}}])}(),Ff=function(){return p((function e(t,n){v(this,e),this.chunk=t,this.verticesCount=n,this.verticesOffset=this.chunk.vertices.GetSize()/2,this.numVerticesPushed=0}),[{key:"PushVertex",value:function(e){if(this.numVerticesPushed===this.verticesCount)throw new Error;this.chunk.vertices.Push(e.x),this.chunk.vertices.Push(e.y),this.numVerticesPushed++}},{key:"PushIndex",value:function(e){if(e<0||e>=this.verticesCount)throw new Error("Index out of range: ".concat(e,"/").concat(this.verticesCount));this.chunk.indices.Push(e+this.verticesOffset)}},{key:"Finish",value:function(){if(this.numVerticesPushed!==this.verticesCount)throw new Error("Not all vertices pushed: ".concat(this.numVerticesPushed,"/").concat(this.verticesCount))}}])}(),Uf=function(){return p((function e(t){var n=t.type,r=t.vertices,i=t.indices,a=void 0===i?null:i,o=t.layer,s=void 0===o?null:o,u=t.color,l=t.lineType,c=void 0===l?0:l,h=t.shape,d=void 0!==h&&h;v(this,e),this.type=n,this.vertices=r,this.indices=a,this.layer=s,this.color=u,this.lineType=c,this.shape=d}),[{key:"_IterateVertices",value:u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;case 1:if(!(r<t+n)){e.next=7;break}return e.next=4,this.vertices[r];case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"_IterateLineChunks",value:u().mark((function e(){var t,n,r,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.vertices.length)<2)){e.next=3;break}return e.abrupt("return");case 3:n=this,r=u().mark((function e(r){var i,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t-r)>Af?(i=Af,o=!1):o=!0,o&&a.shape&&r>0&&i===Af&&(o=!1),r!==t||a.shape){e.next=5;break}return e.abrupt("return",1);case 5:return i<2?(s=1===i&&a.shape?u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vertices[r];case 2:return e.next=4,this.vertices[0];case 4:case"end":return e.stop()}}),e,this)}))():1===i?u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vertices[r-1];case 2:return e.next=4,this.vertices[r];case 4:case"end":return e.stop()}}),e,this)}))():u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vertices[t-1];case 2:return e.next=4,this.vertices[0];case 4:case"end":return e.stop()}}),e,this)}))(),l=Bf(2,!1),c=2):o&&a.shape&&r>0&&i<Af?(s=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(n._IterateVertices(r,i),"t0",1);case 1:return e.next=3,this.vertices[0];case 3:case"end":return e.stop()}}),e,this)}))(),l=Bf(i+1,!1),c=i+1):(s=a._IterateVertices(r,i),l=Bf(i,o&&0===r&&a.shape),c=i),e.next=8,{verticesCount:c,vertices:s,indices:l};case 8:case"end":return e.stop()}}),e)})),i=0;case 6:if(!(i<=t)){e.next=13;break}return e.delegateYield(r(i),"t0",8);case 8:if(!e.t0){e.next=10;break}return e.abrupt("break",13);case 10:i+=Af,e.next=6;break;case 13:case"end":return e.stop()}}),e,this)}))}])}();function Bf(e,t){var n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;case 1:if(!(n<e-1)){r.next=9;break}return r.next=4,n;case 4:return r.next=6,n+1;case 6:n++,r.next=1;break;case 9:if(!(t&&e>2)){r.next=14;break}return r.next=12,e-1;case 12:return r.next=14,0;case 14:case"end":return r.stop()}}),Tf)}Uf.Type=Object.freeze({POINTS:0,LINE_SEGMENTS:1,POLYLINE:2,TRIANGLES:3});var zf=Object.freeze({DOT:0,NONE:1,PLUS:2,CROSS:3,TICK:4,MARK_MASK:15,CIRCLE:32,SQUARE:64,SHAPE_MASK:240}),Gf=Object.freeze({BY_LAYER:-1,BY_BLOCK:-2});Nf.DefaultOptions={arcTessellationAngle:10/180*Math.PI,minArcTessellationSubdivisions:8,wireframeMesh:!1,suppressPaperSpace:!1,textOptions:rf.DefaultOptions},String.prototype.codePointAt||function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(r){}return n}(),t=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||r>=n)){var i,a=t.charCodeAt(r);return a>=55296&&a<=56319&&n>r+1&&(i=t.charCodeAt(r+1))>=56320&&i<=57343?1024*(a-55296)+i-56320+65536:a}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}();var Hf=0,jf=-3;function Vf(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Wf(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Vf,this.dtree=new Vf}var Xf=new Vf,Yf=new Vf,qf=new Uint8Array(30),Kf=new Uint16Array(30),Zf=new Uint8Array(30),Jf=new Uint16Array(30),Qf=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$f=new Vf,ep=new Uint8Array(320);function tp(e,t,n,r){var i,a;for(i=0;i<n;++i)e[i]=0;for(i=0;i<30-n;++i)e[i+n]=i/n|0;for(a=r,i=0;i<30;++i)t[i]=a,a+=1<<e[i]}var np=new Uint16Array(16);function rp(e,t,n,r){var i,a;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<r;++i)e.table[t[n+i]]++;for(e.table[0]=0,a=0,i=0;i<16;++i)np[i]=a,a+=e.table[i];for(i=0;i<r;++i)t[n+i]&&(e.trans[np[t[n+i]]++]=i)}function ip(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function ap(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function op(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,r=0,i=0,a=e.tag;do{r=2*r+(1&a),a>>>=1,++i,n+=t.table[i],r-=t.table[i]}while(r>=0);return e.tag=a,e.bitcount-=i,t.trans[n+r]}function sp(e,t,n){var r,i,a,o,s,u;for(r=ap(e,5,257),i=ap(e,5,1),a=ap(e,4,4),o=0;o<19;++o)ep[o]=0;for(o=0;o<a;++o){var l=ap(e,3,0);ep[Qf[o]]=l}for(rp($f,ep,0,19),s=0;s<r+i;){var c=op(e,$f);switch(c){case 16:var h=ep[s-1];for(u=ap(e,2,3);u;--u)ep[s++]=h;break;case 17:for(u=ap(e,3,3);u;--u)ep[s++]=0;break;case 18:for(u=ap(e,7,11);u;--u)ep[s++]=0;break;default:ep[s++]=c}}rp(t,ep,0,r),rp(n,ep,r,i)}function up(e,t,n){for(;;){var r,i,a,o,s=op(e,t);if(256===s)return Hf;if(s<256)e.dest[e.destLen++]=s;else for(r=ap(e,qf[s-=257],Kf[s]),i=op(e,n),o=a=e.destLen-ap(e,Zf[i],Jf[i]);o<a+r;++o)e.dest[e.destLen++]=e.dest[o]}}function lp(e){for(var t,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return jf;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,Hf}!function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(Xf,Yf),tp(qf,Kf,4,3),tp(Zf,Jf,2,1),qf[28]=0,Kf[28]=258;var cp=function(e,t){var n,r,i=new Wf(e,t);do{switch(n=ip(i),ap(i,2,0)){case 0:r=lp(i);break;case 1:r=up(i,Xf,Yf);break;case 2:sp(i,i.ltree,i.dtree),r=up(i,i.ltree,i.dtree);break;default:r=jf}if(r!==Hf)throw new Error("Data error")}while(!n);return i.destLen<i.dest.length?"function"===typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen):i.dest};function hp(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function dp(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function fp(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function pp(e){throw new Error(e)}function vp(e,t){e||pp(t)}dp.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},dp.prototype.addPoint=function(e,t){"number"===typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"===typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},dp.prototype.addX=function(e){this.addPoint(e,null)},dp.prototype.addY=function(e){this.addPoint(null,e)},dp.prototype.addBezier=function(e,t,n,r,i,a,o,s){var u=[e,t],l=[n,r],c=[i,a],h=[o,s];this.addPoint(e,t),this.addPoint(o,s);for(var d=0;d<=1;d++){var f=6*u[d]-12*l[d]+6*c[d],p=-3*u[d]+9*l[d]-9*c[d]+3*h[d],v=3*l[d]-3*u[d];if(0!==p){var g=Math.pow(f,2)-4*v*p;if(!(g<0)){var m=(-f+Math.sqrt(g))/(2*p);0<m&&m<1&&(0===d&&this.addX(hp(u[d],l[d],c[d],h[d],m)),1===d&&this.addY(hp(u[d],l[d],c[d],h[d],m)));var y=(-f-Math.sqrt(g))/(2*p);0<y&&y<1&&(0===d&&this.addX(hp(u[d],l[d],c[d],h[d],y)),1===d&&this.addY(hp(u[d],l[d],c[d],h[d],y)))}}else{if(0===f)continue;var b=-v/f;0<b&&b<1&&(0===d&&this.addX(hp(u[d],l[d],c[d],h[d],b)),1===d&&this.addY(hp(u[d],l[d],c[d],h[d],b)))}}},dp.prototype.addQuad=function(e,t,n,r,i,a){var o=e+2/3*(n-e),s=t+2/3*(r-t),u=o+1/3*(i-e),l=s+1/3*(a-t);this.addBezier(e,t,o,s,u,l,i,a)},fp.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},fp.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},fp.prototype.curveTo=fp.prototype.bezierCurveTo=function(e,t,n,r,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:a})},fp.prototype.quadTo=fp.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},fp.prototype.close=fp.prototype.closePath=function(){this.commands.push({type:"Z"})},fp.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof dp){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},fp.prototype.getBoundingBox=function(){for(var e=new dp,t=0,n=0,r=0,i=0,a=0;a<this.commands.length;a++){var o=this.commands[a];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,n=i=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,i=o.y;break;case"Q":e.addQuad(r,i,o.x1,o.y1,o.x,o.y),r=o.x,i=o.y;break;case"C":e.addBezier(r,i,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,i=o.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},fp.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},fp.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e=arguments,n="",r=0;r<arguments.length;r+=1){var i=e[r];i>=0&&r>0&&(n+=" "),n+=t(i)}return n}e=void 0!==e?e:2;for(var r="",i=0;i<this.commands.length;i+=1){var a=this.commands[i];"M"===a.type?r+="M"+n(a.x,a.y):"L"===a.type?r+="L"+n(a.x,a.y):"C"===a.type?r+="C"+n(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?r+="Q"+n(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(r+="Z")}return r},fp.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},fp.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var gp={fail:pp,argument:vp,assert:vp},mp=2147483648,yp={},bp={},xp={};function Ep(e){return function(){return e}}bp.BYTE=function(e){return gp.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},xp.BYTE=Ep(1),bp.CHAR=function(e){return[e.charCodeAt(0)]},xp.CHAR=Ep(1),bp.CHARARRAY=function(e){"undefined"===typeof e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},xp.CHARARRAY=function(e){return"undefined"===typeof e?0:e.length},bp.USHORT=function(e){return[e>>8&255,255&e]},xp.USHORT=Ep(2),bp.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},xp.SHORT=Ep(2),bp.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},xp.UINT24=Ep(3),bp.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},xp.ULONG=Ep(4),bp.LONG=function(e){return e>=mp&&(e=-(2*mp-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},xp.LONG=Ep(4),bp.FIXED=bp.ULONG,xp.FIXED=xp.ULONG,bp.FWORD=bp.SHORT,xp.FWORD=xp.SHORT,bp.UFWORD=bp.USHORT,xp.UFWORD=xp.USHORT,bp.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},xp.LONGDATETIME=Ep(8),bp.TAG=function(e){return gp.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},xp.TAG=Ep(4),bp.Card8=bp.BYTE,xp.Card8=xp.BYTE,bp.Card16=bp.USHORT,xp.Card16=xp.USHORT,bp.OffSize=bp.BYTE,xp.OffSize=xp.BYTE,bp.SID=bp.USHORT,xp.SID=xp.USHORT,bp.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?bp.NUMBER16(e):bp.NUMBER32(e)},xp.NUMBER=function(e){return bp.NUMBER(e).length},bp.NUMBER16=function(e){return[28,e>>8&255,255&e]},xp.NUMBER16=Ep(3),bp.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},xp.NUMBER32=Ep(5),bp.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var i="",a=0,o=t.length;a<o;a+=1){var s=t[a];i+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var u=[30],l=0,c=(i+=1&i.length?"f":"ff").length;l<c;l+=2)u.push(parseInt(i.substr(l,2),16));return u},xp.REAL=function(e){return bp.REAL(e).length},bp.NAME=bp.CHARARRAY,xp.NAME=xp.CHARARRAY,bp.STRING=bp.CHARARRAY,xp.STRING=xp.CHARARRAY,yp.UTF8=function(e,t,n){for(var r=[],i=n,a=0;a<i;a++,t+=1)r[a]=e.getUint8(t);return String.fromCharCode.apply(null,r)},yp.UTF16=function(e,t,n){for(var r=[],i=n/2,a=0;a<i;a++,t+=2)r[a]=e.getUint16(t);return String.fromCharCode.apply(null,r)},bp.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},xp.UTF16=function(e){return 2*e.length};var wp={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};yp.MACSTRING=function(e,t,n,r){var i=wp[r];if(void 0!==i){for(var a="",o=0;o<n;o++){var s=e.getUint8(t+o);a+=s<=127?String.fromCharCode(s):i[127&s]}return a}};var kp,Sp="function"===typeof WeakMap&&new WeakMap;function _p(e){return e>=-128&&e<=127}function Mp(e,t,n){for(var r=0,i=e.length;t<i&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}function Tp(e,t,n){for(var r=0,i=e.length,a=t;a<i&&r<64;){var o=e[a];if(!_p(o))break;if(0===o&&a+1<i&&0===e[a+1])break;++a,++r}n.push(r-1);for(var s=t;s<a;++s)n.push(e[s]+256&255);return a}function Ap(e,t,n){for(var r=0,i=e.length,a=t;a<i&&r<64;){var o=e[a];if(0===o)break;if(_p(o)&&a+1<i&&_p(e[a+1]))break;++a,++r}n.push(64|r-1);for(var s=t;s<a;++s){var u=e[s];n.push(u+65536>>8&255,u+256&255)}return a}bp.MACSTRING=function(e,t){var n=function(e){if(!kp)for(var t in kp={},wp)kp[t]=new String(t);var n=kp[e];if(void 0!==n){if(Sp){var r=Sp.get(n);if(void 0!==r)return r}var i=wp[e];if(void 0!==i){for(var a={},o=0;o<i.length;o++)a[i.charCodeAt(o)]=o+128;return Sp&&Sp.set(n,a),a}}}(t);if(void 0!==n){for(var r=[],i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=128&&void 0===(a=n[a]))return;r[i]=a}return r}},xp.MACSTRING=function(e,t){var n=bp.MACSTRING(e,t);return void 0!==n?n.length:0},bp.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=0===r?Mp(e,t,n):r>=-128&&r<=127?Tp(e,t,n):Ap(e,t,n)}return n},bp.INDEX=function(e){for(var t=1,n=[t],r=[],i=0;i<e.length;i+=1){var a=bp.OBJECT(e[i]);Array.prototype.push.apply(r,a),t+=a.length,n.push(t)}if(0===r.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,bp.BYTE,bp.USHORT,bp.UINT24,bp.ULONG][s],l=0;l<n.length;l+=1){var c=u(n[l]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(bp.Card16(e.length),bp.OffSize(s),o,r)},xp.INDEX=function(e){return bp.INDEX(e).length},bp.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var a=parseInt(n[i],0),o=e[a];t=(t=t.concat(bp.OPERAND(o.value,o.type))).concat(bp.OPERATOR(a))}return t},xp.DICT=function(e){return bp.DICT(e).length},bp.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},bp.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)gp.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(bp.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(bp.NUMBER(e));else if("offset"===t)n=n.concat(bp.NUMBER32(e));else if("number"===t)n=n.concat(bp.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(bp.REAL(e))}return n},bp.OP=bp.BYTE,xp.OP=xp.BYTE;var Cp="function"===typeof WeakMap&&new WeakMap;function Pp(e,t,n){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n)for(var a=Object.keys(n),o=0;o<a.length;o+=1){var s=a[o],u=n[s];void 0!==this[s]&&(this[s]=u)}}function Rp(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function Np(e,t,n){var r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<r;a++)i[a+1]={name:e+a,type:"TABLE",value:n(t[a],a)};return i}function Op(e,t,n){var r=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<r;a++)i=i.concat(n(t[a],a));return i}function Lp(e){1===e.format?Pp.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Rp("glyph",e.glyphs))):2===e.format?Pp.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Op("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):gp.assert(!1,"Coverage format must be 1 or 2.")}function Dp(e){Pp.call(this,"scriptListTable",Op("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return gp.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Pp("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Pp("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Rp("featureIndex",r.featureIndexes)))}].concat(Op("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Pp("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(Rp("featureIndex",n.featureIndexes)))}]}))))}]})))}function Ip(e){Pp.call(this,"featureListTable",Op("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Pp("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(Rp("lookupListIndex",n.lookupListIndexes)))}]})))}function Fp(e,t){Pp.call(this,"lookupListTable",Np("lookup",e,(function(e){var n=t[e.lookupType];return gp.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Pp("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(Np("subtable",e.subtables,n)))})))}bp.CHARSTRING=function(e){if(Cp){var t=Cp.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,i=0;i<r;i+=1){var a=e[i];n=n.concat(bp[a.type](a.value))}return Cp&&Cp.set(e,n),n},xp.CHARSTRING=function(e){return bp.CHARSTRING(e).length},bp.OBJECT=function(e){var t=bp[e.type];return gp.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},xp.OBJECT=function(e){var t=xp[e.type];return gp.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},bp.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],i=[],a=0;a<n;a+=1){var o=e.fields[a],s=bp[o.type];gp.argument(void 0!==s,"No encoding function for field type "+o.type+" ("+o.name+")");var u=e[o.name];void 0===u&&(u=o.value);var l=s(u);"TABLE"===o.type?(i.push(t.length),t=t.concat([0,0]),r.push(l)):t=t.concat(l)}for(var c=0;c<r.length;c+=1){var h=i[c],d=t.length;gp.argument(d<65536,"Table "+e.tableName+" too big."),t[h]=d>>8,t[h+1]=255&d,t=t.concat(r[c])}return t},xp.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var i=e.fields[r],a=xp[i.type];gp.argument(void 0!==a,"No sizeOf function for field type "+i.type+" ("+i.name+")");var o=e[i.name];void 0===o&&(o=i.value),t+=a(o),"TABLE"===i.type&&(t+=2)}return t},bp.RECORD=bp.TABLE,xp.RECORD=xp.TABLE,bp.LITERAL=function(e){return e},xp.LITERAL=function(e){return e.length},Pp.prototype.encode=function(){return bp.TABLE(this)},Pp.prototype.sizeOf=function(){return xp.TABLE(this)},Lp.prototype=Object.create(Pp.prototype),Lp.prototype.constructor=Lp,Dp.prototype=Object.create(Pp.prototype),Dp.prototype.constructor=Dp,Ip.prototype=Object.create(Pp.prototype),Ip.prototype.constructor=Ip,Fp.prototype=Object.create(Pp.prototype),Fp.prototype.constructor=Fp;var Up={Table:Pp,Record:Pp,Coverage:Lp,ScriptList:Dp,FeatureList:Ip,LookupList:Fp,ushortList:Rp,tableList:Np,recordList:Op};function Bp(e,t){return e.getUint8(t)}function zp(e,t){return e.getUint16(t,!1)}function Gp(e,t){return e.getUint32(t,!1)}function Hp(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var jp={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Vp(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Vp.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Vp.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Vp.prototype.parseCard8=Vp.prototype.parseByte,Vp.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Vp.prototype.parseCard16=Vp.prototype.parseUShort,Vp.prototype.parseSID=Vp.prototype.parseUShort,Vp.prototype.parseOffset16=Vp.prototype.parseUShort,Vp.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Vp.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},Vp.prototype.parseULong=function(){var e=Gp(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Vp.prototype.parseOffset32=Vp.prototype.parseULong,Vp.prototype.parseFixed=function(){var e=Hp(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Vp.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r},Vp.prototype.parseTag=function(){return this.parseString(4)},Vp.prototype.parseLongDateTime=function(){var e=Gp(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},Vp.prototype.parseVersion=function(e){var t=zp(this.data,this.offset+this.relativeOffset),n=zp(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},Vp.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=jp[e]*t},Vp.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},Vp.prototype.parseOffset16List=Vp.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},Vp.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},Vp.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t},Vp.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},Vp.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},Vp.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var a={},o=0;o<r.length;o++){var s=r[o],u=t[s];a[s]=u.call(this)}n[i]=a}return n},Vp.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var a={},o=0;o<r.length;o++){var s=r[o],u=t[s];a[s]=u.call(this)}n[i]=a}return n},Vp.prototype.parseStruct=function(e){if("function"===typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],a=e[i];n[i]=a.call(this)}return n},Vp.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},Vp.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},Vp.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new Vp(this.data,this.offset+t).parseStruct(e)},Vp.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new Vp(this.data,this.offset+t).parseStruct(e)},Vp.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n),a=0;a<n;a++){var o=t[a];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),u=new Array(s.length),l=0;l<s.length;l++)this.relativeOffset=o+s[l],u[l]=e.call(this);i[a]=u}else i[a]=this.parseUShortList();else i[a]=void 0}return this.relativeOffset=r,i},Vp.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2===t){for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},Vp.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Vp.uShort,end:Vp.uShort,classId:Vp.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},Vp.list=function(e,t){return function(){return this.parseList(e,t)}},Vp.list32=function(e,t){return function(){return this.parseList32(e,t)}},Vp.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},Vp.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},Vp.pointer=function(e){return function(){return this.parsePointer(e)}},Vp.pointer32=function(e){return function(){return this.parsePointer32(e)}},Vp.tag=Vp.prototype.parseTag,Vp.byte=Vp.prototype.parseByte,Vp.uShort=Vp.offset16=Vp.prototype.parseUShort,Vp.uShortList=Vp.prototype.parseUShortList,Vp.uLong=Vp.offset32=Vp.prototype.parseULong,Vp.uLongList=Vp.prototype.parseULongList,Vp.struct=Vp.prototype.parseStruct,Vp.coverage=Vp.prototype.parseCoverage,Vp.classDef=Vp.prototype.parseClassDef;var Wp={reserved:Vp.uShort,reqFeatureIndex:Vp.uShort,featureIndexes:Vp.uShortList};Vp.prototype.parseScriptList=function(){return this.parsePointer(Vp.recordList({tag:Vp.tag,script:Vp.pointer({defaultLangSys:Vp.pointer(Wp),langSysRecords:Vp.recordList({tag:Vp.tag,langSys:Vp.pointer(Wp)})})}))||[]},Vp.prototype.parseFeatureList=function(){return this.parsePointer(Vp.recordList({tag:Vp.tag,feature:Vp.pointer({featureParams:Vp.offset16,lookupListIndexes:Vp.uShortList})}))||[]},Vp.prototype.parseLookupList=function(e){return this.parsePointer(Vp.list(Vp.pointer((function(){var t=this.parseUShort();gp.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(Vp.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},Vp.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return gp.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Vp.offset32,featureTableSubstitutionOffset:Vp.offset32})}))||[]};var Xp={getByte:Bp,getCard8:Bp,getUShort:zp,getCard16:zp,getShort:function(e,t){return e.getInt16(t,!1)},getULong:Gp,getFixed:Hp,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r},getBytes:function(e,t,n){for(var r=[],i=t;i<n;i+=1)r.push(e.getUint8(i));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:Vp};function Yp(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0,glyphIndex:n})}var qp={parse:function(e,t){var n={};n.version=Xp.getUShort(e,t),gp.argument(0===n.version,"cmap table version should be 0."),n.numTables=Xp.getUShort(e,t+2);for(var r=-1,i=n.numTables-1;i>=0;i-=1){var a=Xp.getUShort(e,t+4+8*i),o=Xp.getUShort(e,t+4+8*i+2);if(3===a&&(0===o||1===o||10===o)||0===a&&(0===o||1===o||2===o||3===o||4===o)){r=Xp.getULong(e,t+4+8*i+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new Xp.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var i=t.parseULong(),a=t.parseULong(),o=t.parseULong(),s=i;s<=a;s+=1)e.glyphIndexMap[s]=o,o++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,r,i){var a;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=a=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new Xp.Parser(n,r+i+14),s=new Xp.Parser(n,r+i+16+2*a),u=new Xp.Parser(n,r+i+16+4*a),l=new Xp.Parser(n,r+i+16+6*a),c=r+i+16+8*a,h=0;h<a-1;h+=1)for(var d=void 0,f=o.parseUShort(),p=s.parseUShort(),v=u.parseShort(),g=l.parseUShort(),m=p;m<=f;m+=1)0!==g?(c=l.offset+l.relativeOffset-2,c+=g,c+=2*(m-p),0!==(d=Xp.getUShort(n,c))&&(d=d+v&65535)):d=m+v&65535,e.glyphIndexMap[m]=d}(n,s,e,t,r)}return n},make:function(e){var t,n=!0;for(t=e.length-1;t>0;t-=1){if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i=new Up.Table("cmap",r);for(i.segments=[],t=0;t<e.length;t+=1){for(var a=e.get(t),o=0;o<a.unicodes.length;o+=1)Yp(i,a.unicodes[o],t);i.segments=i.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(i);var s=i.segments.length,u=0,l=[],c=[],h=[],d=[],f=[],p=[];for(t=0;t<s;t+=1){var v=i.segments[t];v.end<=65535&&v.start<=65535?(l=l.concat({name:"end_"+t,type:"USHORT",value:v.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:v.start}),h=h.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(f=f.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):u+=1,n||void 0===v.glyphIndex||(p=(p=(p=p.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(i.segCountX2=2*(s-u),i.searchRange=2*Math.pow(2,Math.floor(Math.log(s-u)/Math.log(2))),i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(l),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(c),i.fields=i.fields.concat(h),i.fields=i.fields.concat(d),i.fields=i.fields.concat(f),i.cmap4Length=14+2*l.length+2+2*c.length+2*h.length+2*d.length+2*f.length,!n){var g=16+4*p.length;i.cmap12Offset=20+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:p.length/3}]),i.fields=i.fields.concat(p)}return i}},Kp=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Zp=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Jp=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Qp=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function $p(e){this.font=e}function ev(e){this.cmap=e}function tv(e,t){this.encoding=e,this.charset=t}function nv(e){switch(e.version){case 1:this.names=Qp.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<Qp.length?this.names[t]=Qp[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-Qp.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=Qp[n+e.glyphNameIndex[n]];break;default:this.names=[]}}function rv(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,n=Object.keys(t),r=0;r<n.length;r+=1){var i=n[r],a=t[i];void 0===e._IndexToUnicodeMap[a]?e._IndexToUnicodeMap[a]={unicodes:[parseInt(i)]}:e._IndexToUnicodeMap[a].unicodes.push(parseInt(i))}}(e):function(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),i=0;i<r.length;i+=1){var a=r[i],o=n[a];(t=e.glyphs.get(o)).addUnicode(parseInt(a))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(e)}$p.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var i=n.get(r),a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===t)return r;return null},ev.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},tv.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},nv.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},nv.prototype.glyphIndexToName=function(e){return this.names[e]};var iv={line:function(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}};function av(e){this.bindConstructorValues(e)}function ov(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function sv(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.path.unitsPerEm=e.unitsPerEm,this.glyphs[n]=r}this.length=t&&t.length||0}av.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",function(e,t){var n=t||new fp;return{configurable:!0,get:function(){return"function"===typeof n&&(n=n()),n},set:function(e){n=e}}}(0,e.path))},av.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},av.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},av.prototype.getPath=function(e,t,n,r,i){var a,o;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72,r||(r={});var s=r.xScale,u=r.yScale;if(r.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,n)),o)a=i.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),s=u=1;else{a=this.path.commands;var l=1/(this.path.unitsPerEm||1e3)*n;void 0===s&&(s=l),void 0===u&&(u=l)}for(var c=new fp,h=0;h<a.length;h+=1){var d=a[h];"M"===d.type?c.moveTo(e+d.x*s,t+-d.y*u):"L"===d.type?c.lineTo(e+d.x*s,t+-d.y*u):"Q"===d.type?c.quadraticCurveTo(e+d.x1*s,t+-d.y1*u,e+d.x*s,t+-d.y*u):"C"===d.type?c.curveTo(e+d.x1*s,t+-d.y1*u,e+d.x2*s,t+-d.y2*u,e+d.x*s,t+-d.y*u):"Z"===d.type&&c.closePath()}return c},av.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return gp.argument(0===t.length,"There are still points left in the current contour."),e},av.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];"Z"!==i.type&&(t.push(i.x),n.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),n.push(i.y1)),"C"===i.type&&(t.push(i.x2),n.push(i.y2))}var a={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},av.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)},av.prototype.drawPoints=function(e,t,n,r){function i(t,n,r,i){e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*i,r+t[a].y*i),e.arc(n+t[a].x*i,r+t[a].y*i,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var a=1/this.path.unitsPerEm*r,o=[],s=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,n,a),e.fillStyle="red",i(s,t,n,a)},av.prototype.drawMetrics=function(e,t,n,r){var i;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",iv.line(e,t,-1e4,t,1e4),iv.line(e,-1e4,n,1e4,n);var a=this.xMin||0,o=this.yMin||0,s=this.xMax||0,u=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",iv.line(e,t+a*i,-1e4,t+a*i,1e4),iv.line(e,t+s*i,-1e4,t+s*i,1e4),iv.line(e,-1e4,n+-o*i,1e4,n+-o*i),iv.line(e,-1e4,n+-u*i,1e4,n+-u*i),e.strokeStyle="green",iv.line(e,t+l*i,-1e4,t+l*i,1e4)},sv.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],n=this.font._IndexToUnicodeMap[e];if(n)for(var r=0;r<n.unicodes.length;r++)t.addUnicode(n.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},sv.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var uv={GlyphSet:sv,glyphLoader:function(e,t){return new av({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,i,a){return function(){var o=new av({index:t,font:e});return o.path=function(){n(o,r,i);var t=a(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},ov(o,"xMin","_xMin"),ov(o,"xMax","_xMax"),ov(o,"yMin","_yMin"),ov(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,n,r){return function(){var i=new av({index:t,font:e});return i.path=function(){var t=n(e,i,r);return t.unitsPerEm=e.unitsPerEm,t},i}}};function lv(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!lv(e[n],t[n]))return!1;return!0}return!1}function cv(e){return e.length<1240?107:e.length<33900?1131:32768}function hv(e,t,n){var r,i,a=[],o=[],s=Xp.getCard16(e,t);if(0!==s){var u=Xp.getByte(e,t+2);r=t+(s+1)*u+2;for(var l=t+3,c=0;c<s+1;c+=1)a.push(Xp.getOffset(e,l,u)),l+=u;i=r+a[s]}else i=t+2;for(var h=0;h<a.length-1;h+=1){var d=Xp.getBytes(e,r+a[h],r+a[h+1]);n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:i}}function dv(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),i=r>>4,a=15&r;if(15===i)break;if(t+=n[i],15===a)break;t+=n[a]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function fv(e,t,n){t=void 0!==t?t:0;var r=new Xp.Parser(e,t),i=[],a=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),i.push([o,a]),a=[]):a.push(dv(r,o))}return function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n][0],i=e[n][1],a=void 0;if(a=1===i.length?i[0]:i,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=a}return t}(i)}function pv(e,t){return t=t<=390?Kp[t]:e[t-391]}function vv(e,t,n){for(var r,i={},a=0;a<t.length;a+=1){var o=t[a];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var u=0;u<o.type.length;u++)void 0===(r=void 0!==e[o.op]?e[o.op][u]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[u]?o.value[u]:null),"SID"===o.type[u]&&(r=pv(n,r)),s[u]=r;i[o.name]=s}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=pv(n,r)),i[o.name]=r}return i}var gv=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],mv=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function yv(e,t){return vv(fv(e,0,e.byteLength),gv,t)}function bv(e,t,n,r){return vv(fv(e,t,n),mv,r)}function xv(e,t,n,r){for(var i=[],a=0;a<n.length;a+=1){var o=yv(new DataView(new Uint8Array(n[a]).buffer),r);o._subrs=[],o._subrsBias=0,o._defaultWidthX=0,o._nominalWidthX=0;var s=o.private[0],u=o.private[1];if(0!==s&&0!==u){var l=bv(e,u+t,s,r);if(o._defaultWidthX=l.defaultWidthX,o._nominalWidthX=l.nominalWidthX,0!==l.subrs){var c=hv(e,u+l.subrs+t);o._subrs=c.objects,o._subrsBias=cv(o._subrs)}o._privateDict=l}i.push(o)}return i}function Ev(e,t,n){var r,i,a,o,s,u,l,c,h=new fp,d=[],f=0,p=!1,v=!1,g=0,m=0;if(e.isCIDFont){var y=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[y];s=b._subrs,u=b._subrsBias,l=b._defaultWidthX,c=b._nominalWidthX}else s=e.tables.cff.topDict._subrs,u=e.tables.cff.topDict._subrsBias,l=e.tables.cff.topDict._defaultWidthX,c=e.tables.cff.topDict._nominalWidthX;var x=l;function E(e,t){v&&h.closePath(),h.moveTo(e,t),v=!0}function w(){d.length%2!==0&&!p&&(x=d.shift()+c),f+=d.length>>1,d.length=0,p=!0}return function n(l){for(var y,b,k,S,_,M,T,A,C,P,R,N,O=0;O<l.length;){var L=l[O];switch(O+=1,L){case 1:case 3:case 18:case 23:w();break;case 4:d.length>1&&!p&&(x=d.shift()+c,p=!0),m+=d.pop(),E(g,m);break;case 5:for(;d.length>0;)g+=d.shift(),m+=d.shift(),h.lineTo(g,m);break;case 6:for(;d.length>0&&(g+=d.shift(),h.lineTo(g,m),0!==d.length);)m+=d.shift(),h.lineTo(g,m);break;case 7:for(;d.length>0&&(m+=d.shift(),h.lineTo(g,m),0!==d.length);)g+=d.shift(),h.lineTo(g,m);break;case 8:for(;d.length>0;)r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o+d.shift(),h.curveTo(r,i,a,o,g,m);break;case 10:_=d.pop()+u,(M=s[_])&&n(M);break;case 11:return;case 12:switch(L=l[O],O+=1,L){case 35:r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),A=o+d.shift(),C=T+d.shift(),P=A+d.shift(),R=C+d.shift(),N=P+d.shift(),g=R+d.shift(),m=N+d.shift(),d.shift(),h.curveTo(r,i,a,o,T,A),h.curveTo(C,P,R,N,g,m);break;case 34:r=g+d.shift(),i=m,a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),A=o,C=T+d.shift(),P=o,R=C+d.shift(),N=m,g=R+d.shift(),h.curveTo(r,i,a,o,T,A),h.curveTo(C,P,R,N,g,m);break;case 36:r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),A=o,C=T+d.shift(),P=o,R=C+d.shift(),N=P+d.shift(),g=R+d.shift(),h.curveTo(r,i,a,o,T,A),h.curveTo(C,P,R,N,g,m);break;case 37:r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),A=o+d.shift(),C=T+d.shift(),P=A+d.shift(),R=C+d.shift(),N=P+d.shift(),Math.abs(R-g)>Math.abs(N-m)?g=R+d.shift():m=N+d.shift(),h.curveTo(r,i,a,o,T,A),h.curveTo(C,P,R,N,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+L),d.length=0}break;case 14:d.length>0&&!p&&(x=d.shift()+c,p=!0),v&&(h.closePath(),v=!1);break;case 19:case 20:w(),O+=f+7>>3;break;case 21:d.length>2&&!p&&(x=d.shift()+c,p=!0),m+=d.pop(),E(g+=d.pop(),m);break;case 22:d.length>1&&!p&&(x=d.shift()+c,p=!0),E(g+=d.pop(),m);break;case 24:for(;d.length>2;)r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o+d.shift(),h.curveTo(r,i,a,o,g,m);g+=d.shift(),m+=d.shift(),h.lineTo(g,m);break;case 25:for(;d.length>6;)g+=d.shift(),m+=d.shift(),h.lineTo(g,m);r=g+d.shift(),i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o+d.shift(),h.curveTo(r,i,a,o,g,m);break;case 26:for(d.length%2&&(g+=d.shift());d.length>0;)r=g,i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a,m=o+d.shift(),h.curveTo(r,i,a,o,g,m);break;case 27:for(d.length%2&&(m+=d.shift());d.length>0;)r=g+d.shift(),i=m,a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o,h.curveTo(r,i,a,o,g,m);break;case 28:y=l[O],b=l[O+1],d.push((y<<24|b<<16)>>16),O+=2;break;case 29:_=d.pop()+e.gsubrsBias,(M=e.gsubrs[_])&&n(M);break;case 30:for(;d.length>0&&(r=g,i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o+(1===d.length?d.shift():0),h.curveTo(r,i,a,o,g,m),0!==d.length);)r=g+d.shift(),i=m,a=r+d.shift(),o=i+d.shift(),m=o+d.shift(),g=a+(1===d.length?d.shift():0),h.curveTo(r,i,a,o,g,m);break;case 31:for(;d.length>0&&(r=g+d.shift(),i=m,a=r+d.shift(),o=i+d.shift(),m=o+d.shift(),g=a+(1===d.length?d.shift():0),h.curveTo(r,i,a,o,g,m),0!==d.length);)r=g,i=m+d.shift(),a=r+d.shift(),o=i+d.shift(),g=a+d.shift(),m=o+(1===d.length?d.shift():0),h.curveTo(r,i,a,o,g,m);break;default:L<32?console.log("Glyph "+t.index+": unknown operator "+L):L<247?d.push(L-139):L<251?(y=l[O],O+=1,d.push(256*(L-247)+y+108)):L<255?(y=l[O],O+=1,d.push(256*-(L-251)-y-108)):(y=l[O],b=l[O+1],k=l[O+2],S=l[O+3],O+=4,d.push((y<<24|b<<16|k<<8|S)/65536))}}}(n),t.advanceWidth=x,h}function wv(e,t){var n,r=Kp.indexOf(e);return r>=0&&(n=r),(r=t.indexOf(e))>=0?n=r+Kp.length:(n=Kp.length+t.length,t.push(e)),n}function kv(e,t,n){for(var r={},i=0;i<e.length;i+=1){var a=e[i],o=t[a.name];void 0===o||lv(o,a.value)||("SID"===a.type&&(o=wv(o,n)),r[a.op]={name:a.name,type:a.type,value:o})}return r}function Sv(e,t){var n=new Up.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=kv(gv,e,t),n}function _v(e){var t=new Up.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Mv(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,i=0,a=0;a<n.commands.length;a+=1){var o=void 0,s=void 0,u=n.commands[a];if("Q"===u.type){var l=1/3,c=2/3;u={type:"C",x:u.x,y:u.y,x1:Math.round(l*r+c*u.x1),y1:Math.round(l*i+c*u.y1),x2:Math.round(l*u.x+c*u.x1),y2:Math.round(l*u.y+c*u.y1)}}if("M"===u.type)o=Math.round(u.x-r),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(u.x),i=Math.round(u.y);else if("L"===u.type)o=Math.round(u.x-r),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(u.x),i=Math.round(u.y);else if("C"===u.type){var h=Math.round(u.x1-r),d=Math.round(u.y1-i),f=Math.round(u.x2-u.x1),p=Math.round(u.y2-u.y1);o=Math.round(u.x-u.x2),s=Math.round(u.y-u.y2),t.push({name:"dx1",type:"NUMBER",value:h}),t.push({name:"dy1",type:"NUMBER",value:d}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:p}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(u.x),i=Math.round(u.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Tv={parse:function(e,t,n,r){n.tables.cff={};var i=function(e,t){var n={};return n.formatMajor=Xp.getCard8(e,t),n.formatMinor=Xp.getCard8(e,t+1),n.size=Xp.getCard8(e,t+2),n.offsetSize=Xp.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}(e,t),a=hv(e,i.endOffset,Xp.bytesToString),o=hv(e,a.endOffset),s=hv(e,o.endOffset,Xp.bytesToString),u=hv(e,s.endOffset);n.gsubrs=u.objects,n.gsubrsBias=cv(n.gsubrs);var l=xv(e,t,o.objects,s.objects);if(1!==l.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+l.length);var c=l[0];if(n.tables.cff.topDict=c,c._privateDict&&(n.defaultWidthX=c._privateDict.defaultWidthX,n.nominalWidthX=c._privateDict.nominalWidthX),void 0!==c.ros[0]&&void 0!==c.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var h=c.fdArray,d=c.fdSelect;if(0===h||0===d)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var f=hv(e,h+=t),p=xv(e,t,f.objects,s.objects);c._fdArray=p,d+=t,c._fdSelect=function(e,t,n,r){var i,a=[],o=new Xp.Parser(e,t),s=o.parseCard8();if(0===s)for(var u=0;u<n;u++){if((i=o.parseCard8())>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");a.push(i)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var l,c=o.parseCard16(),h=o.parseCard16();if(0!==h)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var d=0;d<c;d++){if(i=o.parseCard8(),l=o.parseCard16(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(l>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;h<l;h++)a.push(i);h=l}if(l!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return a}(e,d,n.numGlyphs,p.length)}var v,g=t+c.private[1],m=bv(e,g,c.private[0],s.objects);if(n.defaultWidthX=m.defaultWidthX,n.nominalWidthX=m.nominalWidthX,0!==m.subrs){var y=g+m.subrs,b=hv(e,y);n.subrs=b.objects,n.subrsBias=cv(n.subrs)}else n.subrs=[],n.subrsBias=0;r.lowMemory?(v=function(e,t){var n,r,i=[],a=Xp.getCard16(e,t);if(0!==a){var o=Xp.getByte(e,t+2);n=t+(a+1)*o+2;for(var s=t+3,u=0;u<a+1;u+=1)i.push(Xp.getOffset(e,s,o)),s+=o;r=n+i[a]}else r=t+2;return{offsets:i,startOffset:t,endOffset:r}}(e,t+c.charStrings),n.nGlyphs=v.offsets.length):(v=hv(e,t+c.charStrings),n.nGlyphs=v.objects.length);var x=function(e,t,n,r){var i,a,o=new Xp.Parser(e,t);n-=1;var s=[".notdef"],u=o.parseCard8();if(0===u)for(var l=0;l<n;l+=1)i=o.parseSID(),s.push(pv(r,i));else if(1===u)for(;s.length<=n;){i=o.parseSID(),a=o.parseCard8();for(var c=0;c<=a;c+=1)s.push(pv(r,i)),i+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;s.length<=n;){i=o.parseSID(),a=o.parseCard16();for(var h=0;h<=a;h+=1)s.push(pv(r,i)),i+=1}}return s}(e,t+c.charset,n.nGlyphs,s.objects);if(0===c.encoding?n.cffEncoding=new tv(Zp,x):1===c.encoding?n.cffEncoding=new tv(Jp,x):n.cffEncoding=function(e,t,n){var r,i={},a=new Xp.Parser(e,t),o=a.parseCard8();if(0===o)for(var s=a.parseCard8(),u=0;u<s;u+=1)i[r=a.parseCard8()]=u;else{if(1!==o)throw new Error("Unknown encoding format "+o);var l=a.parseCard8();r=1;for(var c=0;c<l;c+=1)for(var h=a.parseCard8(),d=a.parseCard8(),f=h;f<=h+d;f+=1)i[f]=r,r+=1}return new tv(i,n)}(e,t+c.encoding,x),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new uv.GlyphSet(n),r.lowMemory)n._push=function(r){var i=function(e,t,n,r,i){var a=Xp.getCard16(n,r),o=0;0!==a&&(o=r+(a+1)*Xp.getByte(n,r+2)+2);var s=Xp.getBytes(n,o+t[e],o+t[e+1]);return i&&(s=i(s)),s}(r,v.offsets,e,t+c.charStrings);n.glyphs.push(r,uv.cffGlyphLoader(n,r,Ev,i))};else for(var E=0;E<n.nGlyphs;E+=1){var w=v.objects[E];n.glyphs.push(E,uv.cffGlyphLoader(n,E,Ev,w))}},make:function(e,t){for(var n,r=new Up.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,a={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],s=1;s<e.length;s+=1)n=e.get(s),o.push(n.name);var u=[];r.header=new Up.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new Up.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var l=Sv(a,u);r.topDictIndex=_v(l),r.globalSubrIndex=new Up.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new Up.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=wv(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:i})}return n}(o,u),r.charStringsIndex=function(e){for(var t=new Up.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=Mv(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}(e),r.privateDict=function(e,t){var n=new Up.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=kv(mv,e,t),n}({},u),r.stringIndex=function(e){var t=new Up.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(u);var c=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return a.charset=c,a.encoding=0,a.charStrings=a.charset+r.charsets.sizeOf(),a.private[1]=a.charStrings+r.charStringsIndex.sizeOf(),l=Sv(a,u),r.topDictIndex=_v(l),r}};var Av={parse:function(e,t){var n={},r=new Xp.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),gp.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new Up.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}};var Cv={parse:function(e,t){var n={},r=new Xp.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},make:function(e){return new Up.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}};var Pv={parse:function(e,t,n,r,i,a,o){o.lowMemory?function(e,t,n,r,i){var a,o;e._hmtxTableData={};for(var s=new Xp.Parser(t,n),u=0;u<i;u+=1)u<r&&(a=s.parseUShort(),o=s.parseShort()),e._hmtxTableData[u]={advanceWidth:a,leftSideBearing:o}}(e,t,n,r,i):function(e,t,n,r,i){for(var a,o,s=new Xp.Parser(e,t),u=0;u<r;u+=1){u<n&&(a=s.parseUShort(),o=s.parseShort());var l=i.get(u);l.advanceWidth=a,l.leftSideBearing=o}}(t,n,r,i,a)},make:function(e){for(var t=new Up.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),i=r.advanceWidth||0,a=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:a})}return t}};var Rv={make:function(e){for(var t=new Up.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,i=0;i<e.length;++i){var a=n.indexOf(e[i]);a<0&&(a=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+a}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){var n=new Xp.Parser(e,t),r=n.parseULong();gp.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),a=[],o=0;o<i;o++){for(var s="",u=t+n.parseUShort(),l=n.parseUShort(),c=u;c<u+l;++c)s+=String.fromCharCode(e.getInt8(c));a.push(s)}return a}};var Nv={parse:function(e,t){var n={},r=new Xp.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},make:function(e){return new Up.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Ov=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Lv={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Dv={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Iv={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Fv(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Lv[t];case 3:return Iv[t]}}var Uv="utf-16",Bv={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},zv={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Gv(e,t,n){switch(e){case 0:return Uv;case 1:return zv[n]||Bv[t];case 3:if(1===t||10===t)return Uv}}function Hv(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function jv(e,t,n,r,i,a){return new Up.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function Vv(e,t){var n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var a=0;a<n;a++)if(t[i+a]!==e[a])continue e;return i}return-1}(e,t);if(n<0){n=t.length;for(var r=0,i=e.length;r<i;++r)t.push(e[r])}return n}var Wv={parse:function(e,t,n){for(var r={},i=new Xp.Parser(e,t),a=i.parseUShort(),o=i.parseUShort(),s=i.offset+i.parseUShort(),u=0;u<o;u++){var l=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),d=i.parseUShort(),f=Ov[d]||d,p=i.parseUShort(),v=i.parseUShort(),g=Fv(l,h,n),m=Gv(l,c,h);if(void 0!==m&&void 0!==g){var y=void 0;if(y=m===Uv?yp.UTF16(e,s+v,p):yp.MACSTRING(e,s+v,p,m)){var b=r[f];void 0===b&&(b=r[f]={}),b[g]=y}}}return 1===a&&i.parseUShort(),r},make:function(e,t){var n,r=[],i={},a=Hv(Ov);for(var o in e){var s=a[o];if(void 0===s&&(s=o),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');i[n]=e[o],r.push(n)}for(var u=Hv(Lv),l=Hv(Iv),c=[],h=[],d=0;d<r.length;d++){var f=i[n=r[d]];for(var p in f){var v=f[p],g=1,m=u[p],y=Dv[m],b=Gv(g,y,m),x=bp.MACSTRING(v,b);void 0===x&&(g=0,(m=t.indexOf(p))<0&&(m=t.length,t.push(p)),y=4,x=bp.UTF16(v));var E=Vv(x,h);c.push(jv(g,y,m,n,x.length,E));var w=l[p];if(void 0!==w){var k=bp.UTF16(v),S=Vv(k,h);c.push(jv(3,1,w,n,k.length,S))}}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var _=new Up.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),M=0;M<c.length;M++)_.fields.push({name:"record_"+M,type:"RECORD",value:c[M]});return _.fields.push({name:"strings",type:"LITERAL",value:h}),_}},Xv=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var Yv={parse:function(e,t){var n={},r=new Xp.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},make:function(e){return new Up.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Xv,getUnicodeRange:function(e){for(var t=0;t<Xv.length;t+=1){var n=Xv[t];if(e>=n.begin&&e<n.end)return t}return-1}};var qv={parse:function(e,t){var n={},r=new Xp.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=Qp.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var a=0;a<n.numberOfGlyphs;a++)if(n.glyphNameIndex[a]>=Qp.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},make:function(){return new Up.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Kv=new Array(9);Kv[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Vp.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(Vp.coverage),substitute:this.parseOffset16List()}:void gp.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},Kv[2]=function(){var e=this.parseUShort();return gp.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Vp.coverage),sequences:this.parseListOfLists()}},Kv[3]=function(){var e=this.parseUShort();return gp.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Vp.coverage),alternateSets:this.parseListOfLists()}},Kv[4]=function(){var e=this.parseUShort();return gp.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Vp.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var Zv={sequenceIndex:Vp.uShort,lookupListIndex:Vp.uShort};Kv[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(Vp.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Zv)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(Vp.coverage),classDef:this.parsePointer(Vp.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Zv)}}))};if(3===t){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,Vp.pointer(Vp.coverage)),lookupRecords:this.parseRecordList(r,Zv)}}gp.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Kv[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Vp.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Zv)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(Vp.coverage),backtrackClassDef:this.parsePointer(Vp.classDef),inputClassDef:this.parsePointer(Vp.classDef),lookaheadClassDef:this.parsePointer(Vp.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Zv)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(Vp.pointer(Vp.coverage)),inputCoverage:this.parseList(Vp.pointer(Vp.coverage)),lookaheadCoverage:this.parseList(Vp.pointer(Vp.coverage)),lookupRecords:this.parseRecordList(Zv)}:void gp.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Kv[7]=function(){var e=this.parseUShort();gp.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new Vp(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:Kv[t].call(n)}},Kv[8]=function(){var e=this.parseUShort();return gp.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Vp.coverage),backtrackCoverage:this.parseList(Vp.pointer(Vp.coverage)),lookaheadCoverage:this.parseList(Vp.pointer(Vp.coverage)),substitutes:this.parseUShortList()}};var Jv=new Array(9);Jv[1]=function(e){return 1===e.substFormat?new Up.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Up.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)}].concat(Up.ushortList("substitute",e.substitute)))},Jv[2]=function(e){return gp.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new Up.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)}].concat(Up.tableList("seqSet",e.sequences,(function(e){return new Up.Table("sequenceSetTable",Up.ushortList("sequence",e))}))))},Jv[3]=function(e){return gp.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Up.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)}].concat(Up.tableList("altSet",e.alternateSets,(function(e){return new Up.Table("alternateSetTable",Up.ushortList("alternate",e))}))))},Jv[4]=function(e){return gp.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Up.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)}].concat(Up.tableList("ligSet",e.ligatureSets,(function(e){return new Up.Table("ligatureSetTable",Up.tableList("ligature",e,(function(e){return new Up.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Up.ushortList("component",e.components,e.components.length+1)))})))}))))},Jv[6]=function(e){if(1===e.substFormat){var t=new Up.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new Up.Coverage(e.coverage)}].concat(Up.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new Up.Table("chainRuleSetTable",Up.tableList("chainRule",e,(function(e){var t=Up.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(Up.ushortList("inputGlyph",e.input,e.input.length+1)).concat(Up.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(Up.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,n){t=t.concat({name:"sequenceIndex"+n,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+n,type:"USHORT",value:e.lookupListIndex})})),new Up.Table("chainRuleTable",t)})))}))));return t}if(2===e.substFormat)gp.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var n=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return n.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,t){n.push({name:"backtrackCoverage"+t,type:"TABLE",value:new Up.Coverage(e)})})),n.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,t){n.push({name:"inputCoverage"+t,type:"TABLE",value:new Up.Coverage(e)})})),n.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,t){n.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new Up.Coverage(e)})})),n.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,t){n=n.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})})),new Up.Table("chainContextTable",n)}gp.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var Qv={parse:function(e,t){var n=new Vp(e,t=t||0),r=n.parseVersion(1);return gp.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Kv)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Kv),variations:n.parseFeatureVariationsList()}},make:function(e){return new Up.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Up.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Up.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Up.LookupList(e.lookups,Jv)}])}};var $v={parse:function(e,t){var n=new Xp.Parser(e,t),r=n.parseULong();gp.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var i=n.parseULong(),a={},o=0;o<i;o++){var s=n.parseTag(),u=n.parseULong(),l=n.parseULong(),c=yp.UTF8(e,t+u,l);a[s]=c}return a},make:function(e){var t=Object.keys(e).length,n="",r=16+12*t,i=new Up.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var a in e){var o=n.length;n+=e[a],i.fields.push({name:"tag "+a,type:"TAG",value:a}),i.fields.push({name:"offset "+a,type:"ULONG",value:r+o}),i.fields.push({name:"length "+a,type:"ULONG",value:e[a].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}};function eg(e){return Math.log(e)/Math.log(2)|0}function tg(e){for(;e.length%4!==0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32)}function ng(e,t,n,r){return new Up.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function rg(e){var t=new Up.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,eg(t.numTables));t.searchRange=16*n,t.entrySelector=eg(n),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],i=[],a=t.sizeOf()+ng().sizeOf()*t.numTables;a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var s=e[o];gp.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var u=s.sizeOf(),l=ng(s.tableName,tg(s.encode()),a,u);for(r.push({name:l.tag+" Table Record",type:"RECORD",value:l}),i.push({name:s.tableName+" table",type:"RECORD",value:s}),a+=u,gp.argument(!isNaN(a),"Something went wrong calculating the offset.");a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function ig(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(i>0)return e.glyphs.get(i).getMetrics()}return n}function ag(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}var og={make:rg,fontToTable:function(e){for(var t,n=[],r=[],i=[],a=[],o=[],s=[],u=[],l=0,c=0,h=0,d=0,f=0,p=0;p<e.glyphs.length;p+=1){var v=e.glyphs.get(p),g=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+p+"): advanceWidth is not a number.");(t>g||void 0===t)&&g>0&&(t=g),l<g&&(l=g);var m=Yv.getUnicodeRange(g);if(m<32)c|=1<<m;else if(m<64)h|=1<<m-32;else if(m<96)d|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");f|=1<<m-96}if(".notdef"!==v.name){var y=v.getMetrics();n.push(y.xMin),r.push(y.yMin),i.push(y.xMax),a.push(y.yMax),s.push(y.leftSideBearing),u.push(y.rightSideBearing),o.push(v.advanceWidth)}}var b={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,a),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:ag(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,u)};b.ascender=e.ascender,b.descender=e.descender;var x=Av.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),E=Cv.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),w=Nv.make(e.glyphs.length),k=Yv.make(Object.assign({xAvgCharWidth:Math.round(b.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:l,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:d,ulUnicodeRange4:f,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:ig(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:ig(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),S=Pv.make(e.glyphs),_=qp.make(e.glyphs),M=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),A=M+" "+T,C=e.getEnglishName("postScriptName");C||(C=M.replace(/\s/g,"")+"-"+T);var P={};for(var R in e.names)P[R]=e.names[R];P.uniqueID||(P.uniqueID={en:e.getEnglishName("manufacturer")+":"+A}),P.postScriptName||(P.postScriptName={en:C}),P.preferredFamily||(P.preferredFamily=e.names.fontFamily),P.preferredSubfamily||(P.preferredSubfamily=e.names.fontSubfamily);var N=[],O=Wv.make(P,N),L=N.length>0?Rv.make(N):void 0,D=qv.make(),I=Tv.make(e.glyphs,{version:e.getEnglishName("version"),fullName:A,familyName:M,weightName:T,postScriptName:C,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),F=e.metas&&Object.keys(e.metas).length>0?$v.make(e.metas):void 0,U=[x,E,w,k,O,_,D,I,S];L&&U.push(L),e.tables.gsub&&U.push(Qv.make(e.tables.gsub)),F&&U.push(F);for(var B=rg(U),z=tg(B.encode()),G=B.fields,H=!1,j=0;j<G.length;j+=1)if("head table"===G[j].name){G[j].value.checkSumAdjustment=2981146554-z,H=!0;break}if(!H)throw new Error("Could not find head table with checkSum to adjust.");return B},computeCheckSum:tg};function sg(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,a=e[i].tag;if(a===t)return i;a<t?n=i+1:r=i-1}return-n-1}function ug(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,a=e[i];if(a===t)return i;a<t?n=i+1:r=i-1}return-n-1}function lg(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=r+i>>>1,o=(n=e[a]).start;if(o===t)return n;o<t?r=a+1:i=a-1}if(r>0)return t>(n=e[r-1]).end?0:n}function cg(e,t){this.font=e,this.tableName=t}function hg(e){cg.call(this,e,"gpos")}function dg(e){cg.call(this,e,"gsub")}function fg(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function pg(e,t,n){for(var r=e.subtables,i=0;i<r.length;i++){var a=r[i];if(a.substFormat===t)return a}if(n)return r.push(n),n}function vg(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function gg(e,t){if(!e)throw t}function mg(e,t,n,r,i){var a;return(t&r)>0?(a=e.parseByte(),0===(t&i)&&(a=-a),a=n+a):a=(t&i)>0?n:n+e.parseShort(),a}function yg(e,t,n){var r,i,a=new Xp.Parser(t,n);if(e.numberOfContours=a.parseShort(),e._xMin=a.parseShort(),e._yMin=a.parseShort(),e._xMax=a.parseShort(),e._yMax=a.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)o.push(a.parseUShort());e.instructionLength=a.parseUShort(),e.instructions=[];for(var u=0;u<e.instructionLength;u+=1)e.instructions.push(a.parseByte());var l=o[o.length-1]+1;r=[];for(var c=0;c<l;c+=1)if(i=a.parseByte(),r.push(i),(8&i)>0)for(var h=a.parseByte(),d=0;d<h;d+=1)r.push(i),c+=1;if(gp.argument(r.length===l,"Bad flags."),o.length>0){var f,p=[];if(l>0){for(var v=0;v<l;v+=1)i=r[v],(f={}).onCurve=!!(1&i),f.lastPointOfContour=o.indexOf(v)>=0,p.push(f);for(var g=0,m=0;m<l;m+=1)i=r[m],(f=p[m]).x=mg(a,i,g,2,16),g=f.x;for(var y=0,b=0;b<l;b+=1)i=r[b],(f=p[b]).y=mg(a,i,y,4,32),y=f.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){r=a.parseUShort();var E={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&r)>0?(2&r)>0?(E.dx=a.parseShort(),E.dy=a.parseShort()):E.matchedPoints=[a.parseUShort(),a.parseUShort()]:(2&r)>0?(E.dx=a.parseChar(),E.dy=a.parseChar()):E.matchedPoints=[a.parseByte(),a.parseByte()],(8&r)>0?E.xScale=E.yScale=a.parseF2Dot14():(64&r)>0?(E.xScale=a.parseF2Dot14(),E.yScale=a.parseF2Dot14()):(128&r)>0&&(E.xScale=a.parseF2Dot14(),E.scale01=a.parseF2Dot14(),E.scale10=a.parseF2Dot14(),E.yScale=a.parseF2Dot14()),e.components.push(E),x=!!(32&r)}if(256&r){e.instructionLength=a.parseUShort(),e.instructions=[];for(var w=0;w<e.instructionLength;w+=1)e.instructions.push(a.parseByte())}}}function bg(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(a)}return n}function xg(e){var t=new fp;if(!e)return t;for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return gp.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var i=n[r],a=null,o=i[i.length-1],s=i[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var u={x:.5*(o.x+s.x),y:.5*(o.y+s.y)};t.moveTo(u.x,u.y)}for(var l=0;l<i.length;++l)if(a=o,o=s,s=i[(l+1)%i.length],o.onCurve)t.lineTo(o.x,o.y);else{var c=s;a.onCurve||{x:.5*(o.x+a.x),y:.5*(o.y+a.y)},s.onCurve||(c={x:.5*(o.x+s.x),y:.5*(o.y+s.y)}),t.quadraticCurveTo(o.x,o.y,c.x,c.y)}t.closePath()}return t}function Eg(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var a=void 0;if(void 0===r.matchedPoints)a=bg(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],s=i.points[r.matchedPoints[1]],u={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};s=bg([s],u)[0],u.dx=o.x-s.x,u.dy=o.y-s.y,a=bg(i.points,u)}t.points=t.points.concat(a)}}return xg(t.points)}cg.prototype={searchTag:sg,binSearch:ug,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,i=sg(n.scripts,e);if(i>=0)return r[i].script;if(t){var a={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,a),a.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var i=sg(r.langSysRecords,t);if(i>=0)return r.langSysRecords[i].langSys;if(n){var a={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,a),a.langSys}}},getFeatureTable:function(e,t,n,r){var i=this.getLangSysTable(e,t,r);if(i){for(var a,o=i.featureIndexes,s=this.font.tables[this.tableName].features,u=0;u<o.length;u++)if((a=s[o[u]]).tag===n)return a.feature;if(r){var l=s.length;return gp.assert(0===l||n>=s[l-1].tag,"Features must be added in alphabetical order."),a={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(a),o.push(l),a.feature}}},getLookupTables:function(e,t,n,r,i){var a=this.getFeatureTable(e,t,n,i),o=[];if(a){for(var s,u=a.lookupListIndexes,l=this.font.tables[this.tableName].lookups,c=0;c<u.length;c++)(s=l[u[c]]).lookupType===r&&o.push(s);if(0===o.length&&i){s={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=l.length;return l.push(s),u.push(h),[s]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=lg(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=ug(e.glyphs,t);return n>=0?n:-1;case 2:var r=lg(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var i=n[r],a=i.start,o=i.end,s=a;s<=o;s++)t.push(s);return t}},hg.prototype=cg.prototype,hg.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},hg.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r].subtables,a=0;a<i.length;a++){var o=i[a],s=this.getCoverageIndex(o.coverage,t);if(!(s<0))switch(o.posFormat){case 1:for(var u=o.pairSets[s],l=0;l<u.length;l++){var c=u[l];if(c.secondGlyph===n)return c.value1&&c.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(o.classDef1,t),d=this.getGlyphClass(o.classDef2,n),f=o.classRecords[h][d];return f.value1&&f.value1.xAdvance||0}}return 0},hg.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},dg.prototype=cg.prototype,dg.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},dg.prototype.getSingle=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,1),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var u=o[s],l=this.expandCoverage(u.coverage),c=void 0;if(1===u.substFormat){var h=u.deltaGlyphId;for(c=0;c<l.length;c++){var d=l[c];r.push({sub:d,by:d+h})}}else{var f=u.substitute;for(c=0;c<l.length;c++)r.push({sub:l[c],by:f[c]})}}return r},dg.prototype.getMultiple=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,2),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var u=o[s],l=this.expandCoverage(u.coverage),c=void 0;for(c=0;c<l.length;c++){var h=l[c],d=u.sequences[c];r.push({sub:h,by:d})}}return r},dg.prototype.getAlternates=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,3),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.alternateSets,h=0;h<l.length;h++)r.push({sub:l[h],by:c[h]});return r},dg.prototype.getLigatures=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,4),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.ligatureSets,h=0;h<l.length;h++)for(var d=l[h],f=c[h],p=0;p<f.length;p++){var v=f[p];r.push({sub:[d].concat(v.components),by:v.ligGlyph})}return r},dg.prototype.addSingle=function(e,t,n,r){var i=pg(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});gp.assert(1===i.coverage.format,"Single: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.substitute.splice(o,0,0)),i.substitute[o]=t.by},dg.prototype.addMultiple=function(e,t,n,r){gp.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=pg(this.getLookupTables(n,r,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});gp.assert(1===i.coverage.format,"Multiple: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.sequences.splice(o,0,0)),i.sequences[o]=t.by},dg.prototype.addAlternate=function(e,t,n,r){var i=pg(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});gp.assert(1===i.coverage.format,"Alternate: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.alternateSets.splice(o,0,0)),i.alternateSets[o]=t.by},dg.prototype.addLigature=function(e,t,n,r){var i=this.getLookupTables(n,r,e,4,!0)[0],a=i.subtables[0];a||(a={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=a),gp.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub[0],s=t.sub.slice(1),u={ligGlyph:t.by,components:s},l=this.binSearch(a.coverage.glyphs,o);if(l>=0){for(var c=a.ligatureSets[l],h=0;h<c.length;h++)if(fg(c[h].components,s))return;c.push(u)}else l=-1-l,a.coverage.glyphs.splice(l,0,o),a.ligatureSets.splice(l,0,[u])},dg.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n);case"ccmp":return this.getMultiple(e,t,n).concat(this.getLigatures(e,t,n));case"stch":return this.getMultiple(e,t,n)}},dg.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"===typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,n,r):this.addLigature(e,t,n,r)}};var wg,kg,Sg,_g,Mg={getPath:xg,parse:function(e,t,n,r,i){return i.lowMemory?function(e,t,n,r){var i=new uv.GlyphSet(r);return r._push=function(a){var o=n[a];o!==n[a+1]?i.push(a,uv.ttfGlyphLoader(r,a,yg,e,t+o,Eg)):i.push(a,uv.glyphLoader(r,a))},i}(e,t,n,r):function(e,t,n,r){for(var i=new uv.GlyphSet(r),a=0;a<n.length-1;a+=1){var o=n[a];o!==n[a+1]?i.push(a,uv.ttfGlyphLoader(r,a,yg,e,t+o,Eg)):i.push(a,uv.glyphLoader(r,a))}return i}(e,t,n,r)}};function Tg(e){this.font=e,this.getCommands=function(e){return Mg.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ag(e){return e}function Cg(e){return Math.sign(e)*Math.round(Math.abs(e))}function Pg(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Rg(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ng(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Og(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Lg=function(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r},Dg={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var i,a,o,s,u,l,c;if(!r||r===this)return i=e.xo-t.xo,a=e.xo-n.xo,u=t.x-t.xo,l=n.x-n.xo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.x=e.xo+(u+l)/2):void(e.x=e.xo+(u*s+l*o)/c);i=r.distance(e,t,!0,!0),a=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),l=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?Dg.setRelative(e,e,(u*s+l*o)/c,r,!0):Dg.setRelative(e,e,(u+l)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(r&&r!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,u=o+n*r.y;e.x=s+(e.y-u)/r.normalSlope}else e.x=(i?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Ig={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var i,a,o,s,u,l,c;if(!r||r===this)return i=e.yo-t.yo,a=e.yo-n.yo,u=t.y-t.yo,l=n.y-n.yo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.y=e.yo+(u+l)/2):void(e.y=e.yo+(u*s+l*o)/c);i=r.distance(e,t,!0,!0),a=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),l=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?Ig.setRelative(e,e,(u*s+l*o)/c,r,!0):Ig.setRelative(e,e,(u+l)/2,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(r&&r!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,u=o+n*r.y;e.y=u+r.normalSlope*(e.x-s)}else e.y=(i?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Fg(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Ug(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1===(e/=n)&&0===t?Dg:0===e&&1===t?Ig:new Fg(e,t)}function Bg(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Dg),Object.freeze(Ig),Fg.prototype.distance=function(e,t,n,r){return this.x*Dg.distance(e,t,n,r)+this.y*Ig.distance(e,t,n,r)},Fg.prototype.interpolate=function(e,t,n,r){var i,a,o,s,u,l,c;o=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),a=r.distance(n,n,!1,!0),0!==(c=(u=Math.abs(o))+(l=Math.abs(s)))?this.setRelative(e,e,(i*l+a*u)/c,r,!0):this.setRelative(e,e,(i+a)/2,r,!0)},Fg.prototype.setRelative=function(e,t,n,r,i){r=r||this;var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,u=o+n*r.y,l=r.normalSlope,c=this.slope,h=e.x,d=e.y;e.x=(c*h-l*s+u-d)/(c-l),e.y=c*(e.x-h)+d},Fg.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Bg.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Bg.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var zg=Object.freeze(new Bg(0,0)),Gg={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Hg(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Dg,this.round=Cg}}function jg(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Bg(0,0)}function Vg(e,t){var n,r=e.prog,i=e.ip,a=1;do{if(88===(n=r[++i]))a++;else if(89===n)a--;else if(64===n)i+=r[i+1]+1;else if(65===n)i+=2*r[i+1]+1;else if(n>=176&&n<=183)i+=n-176+1;else if(n>=184&&n<=191)i+=2*(n-184+1);else if(t&&1===a&&27===n)break}while(a>0);e.ip=i}function Wg(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function Xg(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Yg(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function qg(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],u=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",a,o),e?(n=s.y-u.y,r=u.x-s.x):(n=u.x-s.x,r=u.y-s.y),t.pv=t.dpv=Ug(n,r)}function Kg(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],u=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",a,o),e?(n=s.y-u.y,r=u.x-s.x):(n=u.x-s.x,r=u.y-s.y),t.fv=Ug(n,r)}function Zg(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Jg(e,t){var n=t.stack.pop(),r=t.z0[n],i=t.fv,a=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",n);var o=a.distance(r,zg);e&&(o=t.round(o)),i.setRelative(r,zg,o,a),i.touch(r),t.rp0=t.rp1=n}function Qg(e,t){var n,r,i,a=t.z2,o=a.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var s=0;s<o;s++)n=a[s],e.touched(n)||(r=n.prevTouched(e))!==n&&(r===(i=n.nextTouched(e))&&e.setRelative(n,n,e.distance(r,r,!1,!0),e,!0),e.interpolate(n,r,i,e))}function $g(e,t){for(var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],a=t.fv,o=t.pv,s=t.loop,u=t.z2;s--;){var l=n.pop(),c=u[l],h=o.distance(i,i,!1,!0);a.setRelative(c,c,h,o),a.touch(c),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",l)}t.loop=1}function em(e,t){var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],a=t.fv,o=t.pv,s=n.pop(),u=t.z2[t.contours[s]],l=u;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",s);var c=o.distance(i,i,!1,!0);do{l!==i&&a.setRelative(l,l,c,o),l=l.nextPointOnContour}while(l!==u)}function tm(e,t){var n,r,i=t.stack,a=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[a],s=t.fv,u=t.pv,l=i.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",l),l){case 0:n=t.tZone;break;case 1:n=t.gZone;break;default:throw new Error("Invalid zone")}for(var c=u.distance(o,o,!1,!0),h=n.length-2,d=0;d<h;d++)r=n[d],s.setRelative(r,r,c,u)}function nm(e,t){var n=t.stack,r=n.pop()/64,i=n.pop(),a=t.z1[i],o=t.z0[t.rp0],s=t.fv,u=t.pv;s.setRelative(a,o,r,u),s.touch(a),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,i),t.rp1=t.rp0,t.rp2=i,e&&(t.rp0=i)}function rm(e,t){var n=t.stack,r=n.pop(),i=n.pop(),a=t.z0[i],o=t.fv,s=t.pv,u=t.cvt[r];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",u,")",i);var l=s.distance(a,zg);e&&(Math.abs(l-u)<t.cvCutIn&&(l=u),l=t.round(l)),o.setRelative(a,zg,l,s),0===t.zp0&&(a.xo=a.x,a.yo=a.y),o.touch(a),t.rp0=t.rp1=i}function im(e,t){var n=t.stack,r=n.pop(),i=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),n.push(64*t.dpv.distance(i,zg,e,!1))}function am(e,t){var n=t.stack,r=n.pop(),i=n.pop(),a=t.z1[r],o=t.z0[i],s=t.dpv.distance(o,a,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,i,"->",s),t.stack.push(Math.round(64*s))}function om(e,t){var n=t.stack,r=n.pop(),i=t.fv,a=t.pv,o=t.ppem,s=t.deltaBase+16*(e-1),u=t.deltaShift,l=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,n);for(var c=0;c<r;c++){var h=n.pop(),d=n.pop();if(s+((240&d)>>4)===o){var f=(15&d)-8;f>=0&&f++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",h,"by",f*u);var p=l[h];i.setRelative(p,p,f*u,a)}}}function sm(e,t){var n=t.stack,r=n.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),n.push(64*t.round(r/64))}function um(e,t){var n=t.stack,r=n.pop(),i=t.ppem,a=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,n);for(var s=0;s<r;s++){var u=n.pop(),l=n.pop();if(a+((240&l)>>4)===i){var c=(15&l)-8;c>=0&&c++;var h=c*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",u,"by",h),t.cvt[u]+=h}}}function lm(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],u=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",a,o),e?(n=s.y-u.y,r=u.x-s.x):(n=u.x-s.x,r=u.y-s.y),t.dpv=Ug(n,r)}function cm(e,t){var n=t.stack,r=t.prog,i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)n.push(r[++i]);t.ip=i}function hm(e,t){var n=t.ip,r=t.prog,i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var o=r[++n]<<8|r[++n];32768&o&&(o=-(1+(65535^o))),i.push(o)}t.ip=n}function dm(e,t,n,r,i,a){var o,s,u,l,c=a.stack,h=e&&c.pop(),d=c.pop(),f=a.rp0,p=a.z0[f],v=a.z1[d],g=a.minDis,m=a.fv,y=a.dpv;u=(s=o=y.distance(v,p,!0,!0))>=0?1:-1,s=Math.abs(s),e&&(l=a.cvt[h],r&&Math.abs(s-l)<a.cvCutIn&&(s=l)),n&&s<g&&(s=g),r&&(s=a.round(s)),m.setRelative(v,p,u*s,y),m.touch(v),exports.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(n?">":"_")+(r?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?h+"("+a.cvt[h]+","+l+")":"",d,"(d =",o,"->",u*s,")"),a.rp1=a.rp0,a.rp2=d,t&&(a.rp0=d)}function fm(e){this.char=e,this.state={},this.activeState=null}function pm(e,t,n){this.contextName=n,this.startIndex=e,this.endOffset=t}function vm(e,t,n){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=n}function gm(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function mm(e){this.eventId=e,this.subscribers=[]}function ym(e){var t=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach((function(e){Object.defineProperty(t.events,e,{value:new mm(e)})})),e&&n.forEach((function(n){var r=e[n];"function"===typeof r&&t.events[n].subscribe(r)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function bm(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],ym.call(this,e)}function xm(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Em(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function wm(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function km(e){return/[A-z]/.test(e)}function Sm(e){this.font=e,this.features={}}function _m(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function Mm(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var n=t.ranges,r=0;r<n.length;r++){var i=n[r];if(e>=i.start&&e<=i.end){var a=e-i.start;return i.index+a}}break;default:return-1}return-1}function Tm(e,t){return-1===Mm(e,t.coverage)?null:e+t.deltaGlyphId}function Am(e,t){var n=Mm(e,t.coverage);return-1===n?null:t.substitute[n]}function Cm(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=t.current,o=Mm(a=Array.isArray(a)?a[0]:a,i);-1!==o&&n.push(o)}return n.length!==e.length?-1:n}function Pm(e,t){var n=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<n)return[];var r=Cm(t.inputCoverage,e);if(-1===r)return[];var i=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var a=e.lookahead.slice(i);a.length&&wm(a[0].char);)a.shift();var o=new gm(a,0),s=Cm(t.lookaheadCoverage,o),u=[].concat(e.backtrack);for(u.reverse();u.length&&wm(u[0].char);)u.shift();if(u.length<t.backtrackCoverage.length)return[];var l=new gm(u,0),c=Cm(t.backtrackCoverage,l),h=[];if(r.length===t.inputCoverage.length&&s.length===t.lookaheadCoverage.length&&c.length===t.backtrackCoverage.length)for(var d=0;d<t.lookupRecords.length;d++)for(var f=t.lookupRecords[d].lookupListIndex,p=this.getLookupByIndex(f),v=0;v<p.subtables.length;v++){var g=p.subtables[v],m=this.getLookupMethod(p,g);if("12"===this.getSubstitutionType(p,g))for(var y=0;y<r.length;y++){var b=m(e.get(y));b&&h.push(b)}}return h}function Rm(e,t){var n,r=Mm(e.current,t.coverage);if(-1===r)return null;for(var i=t.ligatureSets[r],a=0;a<i.length;a++){n=i[a];for(var o=0;o<n.components.length;o++){if(e.lookahead[o]!==n.components[o])break;if(o===n.components.length-1)return n}}return null}function Nm(e,t){var n=Mm(e,t.coverage);return-1===n?null:t.sequences[n]}Tg.prototype.exec=function(e,t){if("number"!==typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,r=this._prepState;if(!r||r.ppem!==t){var i=this._fpgmState;if(!i){Hg.prototype=Gg,(i=this._fpgmState=new Hg("fpgm",n.tables.fpgm)).funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{kg(i)}catch(GK){return console.log("Hinting error in FPGM:"+GK),void(this._errorState=3)}}Hg.prototype=i,(r=this._prepState=new Hg("prep",n.tables.prep)).ppem=t;var a=n.tables.cvt;if(a)for(var o=r.cvt=new Array(a.length),s=t/n.unitsPerEm,u=0;u<a.length;u++)o[u]=a[u]*s;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{kg(r)}catch(GK){this._errorState<2&&console.log("Hinting error in PREP:"+GK),this._errorState=2}}if(!(this._errorState>1))try{return Sg(e,r)}catch(GK){return this._errorState<1&&(console.log("Hinting error:"+GK),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Sg=function(e,t){var n,r,i,a=t.ppem/t.font.unitsPerEm,o=a,s=e.components;if(Hg.prototype=t,s){var u=t.font;r=[],n=[];for(var l=0;l<s.length;l++){var c=s[l],h=u.glyphs.get(c.glyphIndex);i=new Hg("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+l+"---"),i.step=-1),_g(h,i,a,o);for(var d=Math.round(c.dx*a),f=Math.round(c.dy*o),p=i.gZone,v=i.contours,g=0;g<p.length;g++){var m=p[g];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+d,m.yo=m.y=m.y+f}var y=r.length;r.push.apply(r,p);for(var b=0;b<v.length;b++)n.push(v[b]+y)}e.instructions&&!i.inhibitGridFit&&((i=new Hg("glyf",e.instructions)).gZone=i.z0=i.z1=i.z2=r,i.contours=n,r.push(new Bg(0,0),new Bg(Math.round(e.advanceWidth*a),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),i.step=-1),kg(i),r.length-=2)}else i=new Hg("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),i.step=-1),_g(e,i,a,o),r=i.gZone;return r},_g=function(e,t,n,r){for(var i,a,o,s=e.points||[],u=s.length,l=t.gZone=t.z0=t.z1=t.z2=[],c=t.contours=[],h=0;h<u;h++)i=s[h],l[h]=new Bg(i.x*n,i.y*r,i.lastPointOfContour,i.onCurve);for(var d=0;d<u;d++)i=l[d],a||(a=i,c.push(d)),i.lastPointOfContour?(i.nextPointOnContour=a,a.prevPointOnContour=i,a=void 0):(o=l[d+1],i.nextPointOnContour=o,o.prevPointOnContour=i);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var f=0;f<u;f++)console.log(f,l[f].x,l[f].y)}if(l.push(new Bg(0,0),new Bg(Math.round(e.advanceWidth*n),0)),kg(t),l.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var p=0;p<u;p++)console.log(p,l[p].x,l[p].y)}}},kg=function(e){var t=e.prog;if(t){var n,r=t.length;for(e.ip=0;e.ip<r;e.ip++){if(exports.DEBUG&&e.step++,!(n=wg[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));n(e)}}},wg=[Wg.bind(void 0,Ig),Wg.bind(void 0,Dg),Xg.bind(void 0,Ig),Xg.bind(void 0,Dg),Yg.bind(void 0,Ig),Yg.bind(void 0,Dg),qg.bind(void 0,0),qg.bind(void 0,1),Kg.bind(void 0,0),Kg.bind(void 0,1),function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=Ug(r,n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=Ug(r,n)},function(e){var t=e.stack,n=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*n.x),t.push(16384*n.y)},function(e){var t=e.stack,n=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*n.x),t.push(16384*n.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),a=t.pop(),o=t.pop(),s=e.z0,u=e.z1,l=s[n],c=s[r],h=u[i],d=u[a],f=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",n,r,i,a,o);var p=l.x,v=l.y,g=c.x,m=c.y,y=h.x,b=h.y,x=d.x,E=d.y,w=(p-g)*(b-E)-(v-m)*(y-x),k=p*m-v*g,S=y*E-b*x;f.x=(k*(y-x)-S*(p-g))/w,f.y=(k*(b-E)-S*(v-m))/w},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||jg(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||jg(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||jg(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||jg(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=Cg},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Rg},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),Vg(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},Zg,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(n),t.push(r)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",n),t.push(t[t.length-n])},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",n),t.push(t.splice(t.length-n,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r);var i=e.ip,a=e.prog;e.prog=e.funcs[n];for(var o=0;o<r;o++)kg(e),exports.DEBUG&&console.log(++e.step,o+1<r?"next loopcall":"done loopcall",o);e.ip=i,e.prog=a},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var n=e.ip,r=e.prog;e.prog=e.funcs[t],kg(e),e.ip=n,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,n=e.prog,r=e.ip,i=t.pop(),a=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",i);45!==n[++r];);e.ip=r,e.funcs[i]=n.slice(a+1,r)},void 0,Jg.bind(void 0,0),Jg.bind(void 0,1),Qg.bind(void 0,Ig),Qg.bind(void 0,Dg),$g.bind(void 0,0),$g.bind(void 0,1),em.bind(void 0,0),em.bind(void 0,1),tm.bind(void 0,0),tm.bind(void 0,1),function(e){for(var t=e.stack,n=e.loop,r=e.fv,i=t.pop()/64,a=e.z2;n--;){var o=t.pop(),s=a[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",o,i),r.setRelative(s,s,i),r.touch(s)}e.loop=1},function(e){for(var t=e.stack,n=e.rp1,r=e.rp2,i=e.loop,a=e.z0[n],o=e.z1[r],s=e.fv,u=e.dpv,l=e.z2;i--;){var c=t.pop(),h=l[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",c,n,"<->",r),s.interpolate(h,a,o,u),s.touch(h)}e.loop=1},nm.bind(void 0,0),nm.bind(void 0,1),function(e){for(var t=e.stack,n=e.rp0,r=e.z0[n],i=e.loop,a=e.fv,o=e.pv,s=e.z1;i--;){var u=t.pop(),l=s[u];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",u),a.setRelative(l,r,0,o),a.touch(l)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Pg},rm.bind(void 0,0),rm.bind(void 0,1),function(e){var t=e.prog,n=e.ip,r=e.stack,i=t[++n];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var a=0;a<i;a++)r.push(t[++n]);e.ip=n},function(e){var t=e.ip,n=e.prog,r=e.stack,i=n[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var a=0;a<i;a++){var o=n[++t]<<8|n[++t];32768&o&&(o=-(1+(65535^o))),r.push(o)}e.ip=t},function(e){var t=e.stack,n=e.store;n||(n=e.store=[]);var r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,i),n[i]=r},function(e){var t=e.stack,n=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);var i=n&&n[r]||0;t.push(i)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",n),t.push(64*e.cvt[n])},im.bind(void 0,0),im.bind(void 0,1),void 0,am.bind(void 0,0),am.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",n,r),t.push(r<n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",n,r),t.push(r<=n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",n,r),t.push(r>n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",n,r),t.push(r>=n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",n,r),t.push(n===r?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",n,r),t.push(n!==r?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",n),t.push(Math.trunc(n)%2?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",n),t.push(Math.trunc(n)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(Vg(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",n,r),t.push(n&&r?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",n,r),t.push(n||r?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",n),t.push(n?0:1)},om.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",n,r),t.push(r+n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",n,r),t.push(r-n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",n,r),t.push(64*r/n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",n,r),t.push(r*n/64)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",n),t.push(Math.abs(n))},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",n),t.push(-n)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",n),t.push(64*Math.floor(n/64))},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",n),t.push(64*Math.ceil(n/64))},sm.bind(void 0,0),sm.bind(void 0,1),sm.bind(void 0,2),sm.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm},om.bind(void 0,2),om.bind(void 0,3),um.bind(void 0,1),um.bind(void 0,2),um.bind(void 0,3),function(e){var t,n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",n),e.round=Lg,192&n){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*t},function(e){var t,n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",n),e.round=Lg,192&n){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ag},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ng},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Og},Zg,Zg,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},lm.bind(void 0,0),lm.bind(void 0,1),function(e){var t=e.stack,n=t.pop(),r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",n),1&n&&(r=35),32&n&&(r|=4096),t.push(r)},void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(n),t.push(i)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",n,r),t.push(Math.max(r,n))},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",n,r),t.push(Math.min(r,n))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,n),t){case 1:return void(e.inhibitGridFit=!!n);case 2:return void(e.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,cm.bind(void 0,1),cm.bind(void 0,2),cm.bind(void 0,3),cm.bind(void 0,4),cm.bind(void 0,5),cm.bind(void 0,6),cm.bind(void 0,7),cm.bind(void 0,8),hm.bind(void 0,1),hm.bind(void 0,2),hm.bind(void 0,3),hm.bind(void 0,4),hm.bind(void 0,5),hm.bind(void 0,6),hm.bind(void 0,7),hm.bind(void 0,8),dm.bind(void 0,0,0,0,0,0),dm.bind(void 0,0,0,0,0,1),dm.bind(void 0,0,0,0,0,2),dm.bind(void 0,0,0,0,0,3),dm.bind(void 0,0,0,0,1,0),dm.bind(void 0,0,0,0,1,1),dm.bind(void 0,0,0,0,1,2),dm.bind(void 0,0,0,0,1,3),dm.bind(void 0,0,0,1,0,0),dm.bind(void 0,0,0,1,0,1),dm.bind(void 0,0,0,1,0,2),dm.bind(void 0,0,0,1,0,3),dm.bind(void 0,0,0,1,1,0),dm.bind(void 0,0,0,1,1,1),dm.bind(void 0,0,0,1,1,2),dm.bind(void 0,0,0,1,1,3),dm.bind(void 0,0,1,0,0,0),dm.bind(void 0,0,1,0,0,1),dm.bind(void 0,0,1,0,0,2),dm.bind(void 0,0,1,0,0,3),dm.bind(void 0,0,1,0,1,0),dm.bind(void 0,0,1,0,1,1),dm.bind(void 0,0,1,0,1,2),dm.bind(void 0,0,1,0,1,3),dm.bind(void 0,0,1,1,0,0),dm.bind(void 0,0,1,1,0,1),dm.bind(void 0,0,1,1,0,2),dm.bind(void 0,0,1,1,0,3),dm.bind(void 0,0,1,1,1,0),dm.bind(void 0,0,1,1,1,1),dm.bind(void 0,0,1,1,1,2),dm.bind(void 0,0,1,1,1,3),dm.bind(void 0,1,0,0,0,0),dm.bind(void 0,1,0,0,0,1),dm.bind(void 0,1,0,0,0,2),dm.bind(void 0,1,0,0,0,3),dm.bind(void 0,1,0,0,1,0),dm.bind(void 0,1,0,0,1,1),dm.bind(void 0,1,0,0,1,2),dm.bind(void 0,1,0,0,1,3),dm.bind(void 0,1,0,1,0,0),dm.bind(void 0,1,0,1,0,1),dm.bind(void 0,1,0,1,0,2),dm.bind(void 0,1,0,1,0,3),dm.bind(void 0,1,0,1,1,0),dm.bind(void 0,1,0,1,1,1),dm.bind(void 0,1,0,1,1,2),dm.bind(void 0,1,0,1,1,3),dm.bind(void 0,1,1,0,0,0),dm.bind(void 0,1,1,0,0,1),dm.bind(void 0,1,1,0,0,2),dm.bind(void 0,1,1,0,0,3),dm.bind(void 0,1,1,0,1,0),dm.bind(void 0,1,1,0,1,1),dm.bind(void 0,1,1,0,1,2),dm.bind(void 0,1,1,0,1,3),dm.bind(void 0,1,1,1,0,0),dm.bind(void 0,1,1,1,0,1),dm.bind(void 0,1,1,1,0,2),dm.bind(void 0,1,1,1,0,3),dm.bind(void 0,1,1,1,1,0),dm.bind(void 0,1,1,1,1,1),dm.bind(void 0,1,1,1,1,2),dm.bind(void 0,1,1,1,1,3)],fm.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},fm.prototype.getState=function(e){return this.state[e]||null},bm.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},bm.prototype.composeRUD=function(e){var t=this,n=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(true))})),r=function(e){return"object"===typeof e&&e.hasOwnProperty("FAIL")};if(n.every(r))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:n.filter(r)};this.dispatch("composeRUD",[n.filter((function(e){return!r(e)}))])},bm.prototype.replaceRange=function(e,t,n,r){t=null!==t?t:this.tokens.length;var i=n.every((function(e){return e instanceof fm}));if(!isNaN(e)&&this.inboundIndex(e)&&i){var a=this.tokens.splice.apply(this.tokens,[e,t].concat(n));return r||this.dispatch("replaceToken",[e,t,n]),[a,n]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},bm.prototype.replaceToken=function(e,t,n){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof fm){var r=this.tokens.splice(e,1,t);return n||this.dispatch("replaceToken",[e,t]),[r[0],t]}return{FAIL:"replaceToken: invalid token or index."}},bm.prototype.removeRange=function(e,t,n){t=isNaN(t)?this.tokens.length:t;var r=this.tokens.splice(e,t);return n||this.dispatch("removeRange",[r,e,t]),r},bm.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var n=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[n,e]),n}return{FAIL:"removeToken: invalid token index."}},bm.prototype.insertToken=function(e,t,n){return e.every((function(e){return e instanceof fm}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),n||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},bm.prototype.registerModifier=function(e,t,n){this.events.newToken.subscribe((function(r,i){var a=[r,i],o=[r,i];if(null===t||!0===t.apply(this,a)){var s=n.apply(this,o);r.setState(e,s)}})),this.registeredModifiers.push(e)},mm.prototype.subscribe=function(e){return"function"===typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},mm.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},gm.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},gm.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},bm.prototype.rangeToText=function(e){if(e instanceof pm)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},bm.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},bm.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},bm.prototype.on=function(e,t){var n=this.events[e];return n?n.subscribe(t):null},bm.prototype.dispatch=function(e,t){var n=this,r=this.events[e];r instanceof mm&&r.subscribers.forEach((function(e){e.apply(n,t||[])}))},bm.prototype.registerContextChecker=function(e,t,n){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!==typeof t)return{FAIL:"missing context start check."};if("function"!==typeof n)return{FAIL:"missing context end check."};var r=new vm(e,t,n);return this.registeredContexts[e]=r,this.contextCheckers.push(r),r},bm.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},bm.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},bm.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e){if(e.hasOwnProperty(t))e[t].ranges=[]}},bm.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var n=new gm(e,t);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])},bm.prototype.setEndOffset=function(e,t){var n=new pm(this.getContext(t).openRange.startIndex,e,t),r=this.getContext(t).ranges;return n.rangeId=t+"."+r.length,r.push(n),this.getContext(t).openRange=null,n},bm.prototype.runContextCheck=function(e){var t=this,n=e.index;this.contextCheckers.forEach((function(r){var i=r.contextName,a=t.getContext(i).openRange;if(!a&&r.checkStart(e)&&(a=new pm(n,null,i),t.getContext(i).openRange=a,t.dispatch("contextStart",[i,n])),a&&r.checkEnd(e)){var o=n-a.startIndex+1,s=t.setEndOffset(o,i);t.dispatch("contextEnd",[i,s])}}))},bm.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var n=0;n<t.length;n++){var r=t[n],i=new gm(t,n);this.dispatch("next",[i]),this.runContextCheck(i);var a=new fm(r);this.tokens.push(a),this.dispatch("newToken",[a,i])}return this.dispatch("end",[this.tokens]),this.tokens},Sm.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var n=e[t];if("DFLT"===n.tag)return n.script.defaultLangSys.featureIndexes}return[]},Sm.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,n=0;n<t.length;n++){var r=t[n];if(r.tag===e&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;var i=r.langSysRecords;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o.tag===e)return o.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Sm.prototype.mapTagsToFeatures=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r].tag,a=e[r].feature;n[i]=a}this.features[t].tags=n},Sm.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var n=this.getScriptFeaturesIndexes(e);if(!n)return null;var r=this.font.tables.gsub;return t=n.map((function(e){return r.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Sm.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Sm.prototype.getLookupMethod=function(e,t){var n=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return Tm.apply(n,[e,t])};case"12":return function(e){return Am.apply(n,[e,t])};case"63":return function(e){return Pm.apply(n,[e,t])};case"41":return function(e){return Rm.apply(n,[e,t])};case"21":return function(e){return Nm.apply(n,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Sm.prototype.lookupFeature=function(e){var t=e.contextParams,n=t.index,r=this.getFeature({tag:e.tag,script:e.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var i=this.getFeatureLookups(r),a=[].concat(t.context),o=0;o<i.length;o++)for(var s=i[o],u=this.getLookupSubtables(s),l=0;l<u.length;l++){var c=u[l],h=this.getSubstitutionType(s,c),d=this.getLookupMethod(s,c),f=void 0;switch(h){case"11":(f=d(t.current))&&a.splice(n,1,new _m({id:11,tag:e.tag,substitution:f}));break;case"12":(f=d(t.current))&&a.splice(n,1,new _m({id:12,tag:e.tag,substitution:f}));break;case"63":f=d(t),Array.isArray(f)&&f.length&&a.splice(n,1,new _m({id:63,tag:e.tag,substitution:f}));break;case"41":(f=d(t))&&a.splice(n,1,new _m({id:41,tag:e.tag,substitution:f}));break;case"21":(f=d(t.current))&&a.splice(n,1,new _m({id:21,tag:e.tag,substitution:f}))}t=new gm(a,n),Array.isArray(f)&&!f.length||(f=null)}return a.length?a:null},Sm.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var n=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&n},Sm.prototype.getLookupSubtables=function(e){return e.subtables||null},Sm.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Sm.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Sm.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var Om={startCheck:function(e){var t=e.current,n=e.get(-1);return null===n&&xm(t)||!xm(n)&&xm(t)},endCheck:function(e){var t=e.get(1);return null===t||!xm(t)}};var Lm={startCheck:function(e){var t=e.current,n=e.get(-1);return(xm(t)||wm(t))&&!xm(n)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!xm(t)&&!wm(t):var n=function(e){return/\s/.test(e)}(t);if(!n)return!0;if(n){var r;if(r=e.lookahead.some((function(e){return xm(e)||wm(e)})),!r)return!0}break;default:return!1}}};var Dm={11:function(e,t,n){t[n].setState(e.tag,e.substitution)},12:function(e,t,n){t[n].setState(e.tag,e.substitution)},63:function(e,t,n){e.substitution.forEach((function(r,i){t[n+i].setState(e.tag,r)}))},41:function(e,t,n){var r=t[n];r.setState(e.tag,e.substitution.ligGlyph);for(var i=e.substitution.components.length,a=0;a<i;a++)(r=t[n+a+1]).setState("deleted",!0)}};function Im(e,t,n){e instanceof _m&&Dm[e.id]&&Dm[e.id](e,t,n)}function Fm(e){var t=this,n="arab",r=this.featuresTags[n],i=this.tokenizer.getRangeTokens(e);if(1!==i.length){var a=new gm(i.map((function(e){return e.getState("glyphIndex")})),0),o=new gm(i.map((function(e){return e.char})),0);i.forEach((function(e,s){if(!wm(e.char)){a.setCurrentIndex(s),o.setCurrentIndex(s);var u,l=0;switch(function(e){for(var t=[].concat(e.backtrack),n=t.length-1;n>=0;n--){var r=t[n],i=Em(r),a=wm(r);if(!i&&!a)return!0;if(i)return!1}return!1}(o)&&(l|=1),function(e){if(Em(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!wm(e.lookahead[t]))return!0;return!1}(o)&&(l|=2),l){case 1:u="fina";break;case 2:u="init";break;case 3:u="medi"}if(-1!==r.indexOf(u)){var c=t.query.lookupFeature({tag:u,script:n,contextParams:a});if(c instanceof Error)return console.info(c.message);c.forEach((function(e,t){e instanceof _m&&(Im(e,i,t),a.context[t]=e.substitution)}))}}}))}}function Um(e,t){return new gm(e.map((function(e){return e.activeState.value})),t||0)}function Bm(e){var t=this,n=this.tokenizer.getRangeTokens(e),r=Um(n);r.context.forEach((function(e,i){r.setCurrentIndex(i);var a=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:r});a.length&&(a.forEach((function(e){return Im(e,n,i)})),r=Um(n))}))}var zm={startCheck:function(e){var t=e.current,n=e.get(-1);return null===n&&km(t)||!km(n)&&km(t)},endCheck:function(e){var t=e.get(1);return null===t||!km(t)}};function Gm(e,t){return new gm(e.map((function(e){return e.activeState.value})),t||0)}function Hm(e){var t=this,n=this.tokenizer.getRangeTokens(e),r=Gm(n);r.context.forEach((function(e,i){r.setCurrentIndex(i);var a=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:r});a.length&&(a.forEach((function(e){return Im(e,n,i)})),r=Gm(n))}))}function jm(e){this.baseDir=e||"ltr",this.tokenizer=new bm,this.featuresTags={}}function Vm(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function Wm(){return Vm.call(this,"latinWord"),Vm.call(this,"arabicWord"),Vm.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Xm(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var n=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,n.reverse())}))}function Ym(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function qm(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(Ym.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Fm.call(e,t)})))}function Km(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&(-1!==this.featuresTags[t].indexOf("rlig")&&(Ym.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Bm.call(e,t)}))))}function Zm(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&(-1!==this.featuresTags[t].indexOf("liga")&&(Ym.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){Hm.call(e,t)}))))}function Jm(e){(e=e||{}).tables=e.tables||{},e.empty||(gg(e.familyName,"When creating a new Font object, familyName is required."),gg(e.styleName,"When creating a new Font object, styleName is required."),gg(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),gg(e.ascender,"When creating a new Font object, ascender is required."),gg(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new uv.GlyphSet(this,e.glyphs||[]),this.encoding=new $p(this),this.position=new hg(this),this.substitution=new dg(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Tg(this):void 0}})}function Qm(e,t){var n=JSON.stringify(e),r=256;for(var i in t){var a=parseInt(i);if(a&&!(a<256)){if(JSON.stringify(t[i])===n)return a;r<=a&&(r=a+1)}}return t[r]=e,r}function $m(e,t,n){var r=Qm(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function ey(e,t,n){var r={},i=new Xp.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function ty(e,t,n,r){for(var i=[{name:"nameID_"+e,type:"USHORT",value:Qm(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],a=0;a<n.length;++a){var o=n[a].tag;i.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return i}function ny(e,t,n,r){var i={},a=new Xp.Parser(e,t);i.name=r[a.parseUShort()]||{},a.skip("uShort",1),i.coordinates={};for(var o=0;o<n.length;++o)i.coordinates[n[o].tag]=a.parseFixed();return i}jm.prototype.setText=function(e){this.text=e},jm.prototype.contextChecks={latinWordCheck:zm,arabicWordCheck:Om,arabicSentenceCheck:Lm},jm.prototype.registerFeatures=function(e,t){var n=this,r=t.filter((function(t){return n.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(r):this.featuresTags[e]=r},jm.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Sm(e));for(var n=0;n<t.length;n++){var r=t[n];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}},jm.prototype.registerModifier=function(e,t,n){this.tokenizer.registerModifier(e,t,n)},jm.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},jm.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(qm.call(this),Km.call(this)),this.checkContextReady("latinWord")&&Zm.call(this),this.checkContextReady("arabicSentence")&&Xm.call(this)},jm.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),Wm.call(this),this.applyFeaturesToContexts())},jm.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},jm.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],n=0;n<this.tokenizer.tokens.length;n++){var r=this.tokenizer.tokens[n];if(!r.state.deleted){var i=r.activeState.value;t.push(Array.isArray(i)?i[0]:i)}}return t},Jm.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Jm.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Jm.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},Jm.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},Jm.prototype.stringToGlyphs=function(e,t){var n=this,r=new jm;r.registerModifier("glyphIndex",null,(function(e){return n.charToGlyphIndex(e.char)}));var i=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;r.applyFeatures(this,i);for(var a=r.getTextGlyphs(e),o=a.length,s=new Array(o),u=this.glyphs.get(0),l=0;l<o;l+=1)s[l]=this.glyphs.get(a[l])||u;return s},Jm.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Jm.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},Jm.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Jm.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},Jm.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Jm.prototype.forEachGlyph=function(e,t,n,r,i,a){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,i=Object.assign({},this.defaultRenderOptions,i);var o,s=1/this.unitsPerEm*r,u=this.stringToGlyphs(e,i);if(i.kerning){var l=i.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(l,i.language)}for(var c=0;c<u.length;c+=1){var h=u[c];if(a.call(this,h,t,n,r,i),h.advanceWidth&&(t+=h.advanceWidth*s),i.kerning&&c<u.length-1)t+=(o?this.position.getKerningValue(o,h.index,u[c+1].index):this.getKerningValue(h,u[c+1]))*s;i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t},Jm.prototype.getPath=function(e,t,n,r,i){var a=new fp;return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var o=e.getPath(t,n,r,i,this);a.extend(o)})),a},Jm.prototype.getPaths=function(e,t,n,r,i){var a=[];return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var o=e.getPath(t,n,r,i,this);a.push(o)})),a},Jm.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},Jm.prototype.draw=function(e,t,n,r,i,a){this.getPath(t,n,r,i,a).draw(e)},Jm.prototype.drawPoints=function(e,t,n,r,i,a){this.forEachGlyph(t,n,r,i,a,(function(t,n,r,i){t.drawPoints(e,n,r,i)}))},Jm.prototype.drawMetrics=function(e,t,n,r,i,a){this.forEachGlyph(t,n,r,i,a,(function(t,n,r,i){t.drawMetrics(e,n,r,i)}))},Jm.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Jm.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Jm.prototype.toTables=function(){return og.fontToTable(this)},Jm.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Jm.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},Jm.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var i=this.toArrayBuffer();if("undefined"!==typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var a=new DataView(i),o=new Blob([a],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.download=e;var u=document.createEvent("MouseEvents");u.initEvent("click",!0,!1),s.dispatchEvent(u)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=n(7256),c=function(e){for(var t=new Buffer(e.byteLength),n=new Uint8Array(e),r=0;r<t.length;++r)t[r]=n[r];return t}(i);l.writeFileSync(e,c)}},Jm.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Jm.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Jm.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ry={make:function(e,t){var n=new Up.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var r=0;r<e.axes.length;r++)n.fields=n.fields.concat($m(r,e.axes[r],t));for(var i=0;i<e.instances.length;i++)n.fields=n.fields.concat(ty(i,e.instances[i],e.axes,t));return n},parse:function(e,t,n){var r=new Xp.Parser(e,t),i=r.parseULong();gp.argument(65536===i,"Unsupported fvar table version.");var a=r.parseOffset16();r.skip("uShort",1);for(var o=r.parseUShort(),s=r.parseUShort(),u=r.parseUShort(),l=r.parseUShort(),c=[],h=0;h<o;h++)c.push(ey(e,t+a+h*s,n));for(var d=[],f=t+a+o*s,p=0;p<u;p++)d.push(ny(e,f+p*l,c,n));return{axes:c,instances:d}}},iy=function(){return{coverage:this.parsePointer(Vp.coverage),attachPoints:this.parseList(Vp.pointer(Vp.uShortList))}},ay=function(){var e=this.parseUShort();return gp.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},oy=function(){return this.parseList(Vp.pointer(ay))},sy=function(){return{coverage:this.parsePointer(Vp.coverage),ligGlyphs:this.parseList(Vp.pointer(oy))}},uy=function(){return this.parseUShort(),this.parseList(Vp.pointer(Vp.coverage))};var ly={parse:function(e,t){var n=new Vp(e,t=t||0),r=n.parseVersion(1);gp.argument(1===r||1.2===r||1.3===r,"Unsupported GDEF table version.");var i={version:r,classDef:n.parsePointer(Vp.classDef),attachList:n.parsePointer(iy),ligCaretList:n.parsePointer(sy),markAttachClassDef:n.parsePointer(Vp.classDef)};return r>=1.2&&(i.markGlyphSets=n.parsePointer(uy)),i}},cy=new Array(10);cy[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(Vp.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(Vp.coverage),values:this.parseValueRecordList()}:void gp.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},cy[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();gp.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(Vp.coverage),r=this.parseUShort(),i=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,pairSets:this.parseList(Vp.pointer(Vp.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}}))))};if(2===t){var a=this.parsePointer(Vp.classDef),o=this.parsePointer(Vp.classDef),s=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,classDef1:a,classDef2:o,class1Count:s,class2Count:u,classRecords:this.parseList(s,Vp.list(u,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}})))}}},cy[3]=function(){return{error:"GPOS Lookup 3 not supported"}},cy[4]=function(){return{error:"GPOS Lookup 4 not supported"}},cy[5]=function(){return{error:"GPOS Lookup 5 not supported"}},cy[6]=function(){return{error:"GPOS Lookup 6 not supported"}},cy[7]=function(){return{error:"GPOS Lookup 7 not supported"}},cy[8]=function(){return{error:"GPOS Lookup 8 not supported"}},cy[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var hy=new Array(10);var dy={parse:function(e,t){var n=new Vp(e,t=t||0),r=n.parseVersion(1);return gp.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(cy)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(cy),variations:n.parseFeatureVariationsList()}},make:function(e){return new Up.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Up.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Up.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Up.LookupList(e.lookups,hy)}])}};var fy={parse:function(e,t){var n=new Xp.Parser(e,t),r=n.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();gp.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}return t}(n);if(1===r)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0===n){var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}}return t}(n);throw new Error("Unsupported kern table version ("+r+").")}};var py={parse:function(e,t,n,r){for(var i=new Xp.Parser(e,t),a=r?i.parseUShort:i.parseULong,o=[],s=0;s<n+1;s+=1){var u=a.call(i);r&&(u*=2),o.push(u)}return o}};function vy(e,t){n(7256).readFile(e,(function(e,n){if(e)return t(e.message);t(null,vg(n))}))}function gy(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function my(e,t){for(var n=[],r=12,i=0;i<t;i+=1){var a=Xp.getTag(e,r),o=Xp.getULong(e,r+4),s=Xp.getULong(e,r+8),u=Xp.getULong(e,r+12);n.push({tag:a,checksum:o,offset:s,length:u,compression:!1}),r+=16}return n}function yy(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(cp(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}return{data:e,offset:t.offset}}function by(e,t){var n,r;t=void 0===t||null===t?{}:t;var i,a,o,s,u,l,c,h,d,f,p,v,g,m=new Jm({empty:!0}),y=new DataView(e,0),b=[],x=Xp.getTag(y,0);if(x===String.fromCharCode(0,1,0,0)||"true"===x||"typ1"===x)m.outlinesFormat="truetype",b=my(y,i=Xp.getUShort(y,4));else if("OTTO"===x)m.outlinesFormat="cff",b=my(y,i=Xp.getUShort(y,4));else{if("wOFF"!==x)throw new Error("Unsupported OpenType signature "+x);var E=Xp.getTag(y,4);if(E===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==E)throw new Error("Unsupported OpenType flavor "+x);m.outlinesFormat="cff"}b=function(e,t){for(var n=[],r=44,i=0;i<t;i+=1){var a=Xp.getTag(e,r),o=Xp.getULong(e,r+4),s=Xp.getULong(e,r+8),u=Xp.getULong(e,r+12),l=void 0;l=s<u&&"WOFF",n.push({tag:a,offset:o,compression:l,compressedLength:s,length:u}),r+=20}return n}(y,i=Xp.getUShort(y,12))}for(var w=0;w<i;w+=1){var k=b[w],S=void 0;switch(k.tag){case"cmap":S=yy(y,k),m.tables.cmap=qp.parse(S.data,S.offset),m.encoding=new ev(m.tables.cmap);break;case"cvt ":S=yy(y,k),g=new Xp.Parser(S.data,S.offset),m.tables.cvt=g.parseShortList(k.length/2);break;case"fvar":o=k;break;case"fpgm":S=yy(y,k),g=new Xp.Parser(S.data,S.offset),m.tables.fpgm=g.parseByteList(k.length);break;case"head":S=yy(y,k),m.tables.head=Av.parse(S.data,S.offset),m.unitsPerEm=m.tables.head.unitsPerEm,n=m.tables.head.indexToLocFormat;break;case"hhea":S=yy(y,k),m.tables.hhea=Cv.parse(S.data,S.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":h=k;break;case"ltag":S=yy(y,k),r=Rv.parse(S.data,S.offset);break;case"maxp":S=yy(y,k),m.tables.maxp=Nv.parse(S.data,S.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":p=k;break;case"OS/2":S=yy(y,k),m.tables.os2=Yv.parse(S.data,S.offset);break;case"post":S=yy(y,k),m.tables.post=qv.parse(S.data,S.offset),m.glyphNames=new nv(m.tables.post);break;case"prep":S=yy(y,k),g=new Xp.Parser(S.data,S.offset),m.tables.prep=g.parseByteList(k.length);break;case"glyf":s=k;break;case"loca":f=k;break;case"CFF ":a=k;break;case"kern":d=k;break;case"GDEF":u=k;break;case"GPOS":l=k;break;case"GSUB":c=k;break;case"meta":v=k}}var _=yy(y,p);if(m.tables.name=Wv.parse(_.data,_.offset,r),m.names=m.tables.name,s&&f){var M=0===n,T=yy(y,f),A=py.parse(T.data,T.offset,m.numGlyphs,M),C=yy(y,s);m.glyphs=Mg.parse(C.data,C.offset,A,m,t)}else{if(!a)throw new Error("Font doesn't contain TrueType or CFF outlines.");var P=yy(y,a);Tv.parse(P.data,P.offset,m,t)}var R=yy(y,h);if(Pv.parse(m,R.data,R.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),rv(m,t),d){var N=yy(y,d);m.kerningPairs=fy.parse(N.data,N.offset)}else m.kerningPairs={};if(u){var O=yy(y,u);m.tables.gdef=ly.parse(O.data,O.offset)}if(l){var L=yy(y,l);m.tables.gpos=dy.parse(L.data,L.offset),m.position.init()}if(c){var D=yy(y,c);m.tables.gsub=Qv.parse(D.data,D.offset)}if(o){var I=yy(y,o);m.tables.fvar=ry.parse(I.data,I.offset,m.names)}if(v){var F=yy(y,v);m.tables.meta=$v.parse(F.data,F.offset),m.metas=m.tables.meta}return m}var xy=Object.freeze({__proto__:null,Font:Jm,Glyph:av,Path:fp,BoundingBox:dp,_parse:Xp,parse:by,load:function(e,t,n){n=void 0===n||null===n?{}:n;var r="undefined"===typeof window&&!n.isUrl?vy:gy;return new Promise((function(i,a){r(e,(function(e,r){if(e){if(t)return t(e);a(e)}var o;try{o=by(r,n)}catch(GK){if(t)return t(GK,null);a(GK)}if(t)return t(null,o);i(o)}))}))},loadSync:function(e,t){return by(vg(n(7256).readFileSync(e)),t)}}),Ey="DxfWorkerMsg",wy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(this,e),this.worker=t,n?t.onmessage=this._ProcessRequest.bind(this):t&&(t.addEventListener("message",this._ProcessResponse.bind(this),!1),t.addEventListener("error",this._OnError.bind(this),!1),this.reqSeq=1,this.requests=new Map,this.progressCbk=null)}return p(e,[{key:"Load",value:function(){var t=c(u().mark((function t(n,r,i,a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.worker){t.next=4;break}return t.abrupt("return",this._SendRequest(e.WorkerMsg.LOAD,{url:n,fonts:r,options:this._CloneOptions(i)},a));case 4:return t.abrupt("return",this._Load(n,r,i,a));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"Destroy",value:function(){var t=c(u().mark((function t(){var n,r=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]&&r[0],!this.worker){t.next=6;break}if(n){t.next=5;break}return t.next=5,this._SendRequest(e.WorkerMsg.DESTROY);case 5:this.worker.terminate();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_ProcessRequest",value:function(){var t=c(u().mark((function t(n){var r,i,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.data).signature===Ey){t.next=4;break}return console.log("Message with bad signature",r),t.abrupt("return");case 4:return i={seq:r.seq,type:r.type,signature:Ey},a=[],t.prev=6,t.next=9,this._ProcessRequestMessage(r.type,r.data,a,r.seq);case 9:i.data=t.sent,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0),i.error=String(t.t0);case 16:this.worker.postMessage(i,a),r.type===e.WorkerMsg.DESTROY&&(this.worker.onmessage=null,this.worker.close(),this.worker=null);case 18:case"end":return t.stop()}}),t,this,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_ProcessRequestMessage",value:function(){var t=c(u().mark((function t(n,r,i,a){var o,s,l,c=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next=t.t0===e.WorkerMsg.LOAD?3:t.t0===e.WorkerMsg.DESTROY?12:13;break;case 3:return t.next=5,this._Load(r.url,r.fonts,r.options,(function(e,t,n){return c._SendProgress(a,e,t,n)}));case 5:return o=t.sent,s=o.scene,l=o.dxf,i.push(s.vertices),i.push(s.indices),i.push(s.transforms),t.abrupt("return",{scene:s,dxf:l});case 12:return t.abrupt("return",null);case 13:throw"Unknown message type: "+n;case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"_ProcessResponse",value:function(){var t=c(u().mark((function t(n){var r,i,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.data).signature===Ey){t.next=4;break}return console.log("Message with bad signature",r),t.abrupt("return");case 4:if(i=r.seq,a=this.requests.get(i)){t.next=9;break}return console.error("Unmatched message sequence: ",i),t.abrupt("return");case 9:if(o=r.data,r.type!==e.WorkerMsg.PROGRESS||!a.progressCbk){t.next=13;break}return a.progressCbk(o.phase,o.size,o.totalSize),t.abrupt("return");case 13:this.requests.delete(i),r.hasOwnProperty("error")?a.SetError(r.error):a.SetResponse(o);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_OnError",value:function(){var e=c(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("DxfWorker worker error",t),n=Array.from(this.requests.values),this.requests.clear(),n.forEach((function(e){return e.SetError(t)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_SendRequest",value:function(){var t=c(u().mark((function t(n){var r,i,a,o,s=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:null,i=s.length>2&&void 0!==s[2]?s[2]:null,a=this.reqSeq++,o=new e.Request(a,i),this.requests.set(a,o),this.worker.postMessage({seq:a,type:n,data:r,signature:Ey}),t.next=8,o.GetResponse();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_SendProgress",value:function(t,n,r,i){this.worker.postMessage({seq:t,type:e.WorkerMsg.PROGRESS,data:{phase:n,size:r,totalSize:i},signature:Ey})}},{key:"_Load",value:function(){var e=c(u().mark((function e(t,n,r,i){var a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?this._CreateFontFetchers(n,i):[],e.next=3,new Wn(t,r.fileEncoding).Fetch(i);case 3:return o=e.sent,i&&i("prepare",0,null),s=new Nf(r),e.next=8,s.Build(o,a);case 8:return e.abrupt("return",{scene:s.scene,dxf:!0===r.retainParsedDxf?o:void 0});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_CreateFontFetchers",value:function(e,t){function n(e){return c(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&t("font",0,null),n.next=3,fetch(e).then((function(e){return e.arrayBuffer()}));case 3:return r=n.sent,t&&t("prepare",0,null),n.abrupt("return",xy.parse(r));case 6:case"end":return n.stop()}}),n)})))}var r,i=[],a=D(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(n(o))}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_CloneOptions",value:function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t._CloneOptions(e)}));if("object"===typeof e&&null!==e){var n={};for(var r in e)n[r]=this._CloneOptions(e[r]);return n}return e}}])}();wy.WorkerMsg={LOAD:"LOAD",PROGRESS:"PROGRESS",DESTROY:"DESTROY"},wy.Request=function(){return p((function e(t,n){var r=this;v(this,e),this.seq=t,this.progressCbk=n,this.promise=new Promise((function(e,t){r._Resolve=e,r._Reject=t}))}),[{key:"GetResponse",value:function(){var e=c(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.promise;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"SetResponse",value:function(e){this._Resolve(e)}},{key:"SetError",value:function(e){this._Reject(e)}}])}();var ky=function(){return p((function e(t,n,r,i){v(this,e),this.instanceType=t,this.geometryType=null!==n&&void 0!==n?n:null,this.color=r,this.lineType=null!==i&&void 0!==i?i:null}),[{key:"Compare",value:function(e){var t=uh(this.instanceType,e.instanceType);return 0!==t||0!==(t=uh(this.geometryType,e.geometryType))||0!==(t=uh(this.color,e.color))?t:uh(this.lineType,e.lineType)}}])}(),Sy=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new $i,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.mouseZoomSpeedFactor=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:qn,MIDDLE:Kn,RIGHT:Zn},this.touches={ONE:Jn,TWO:$n},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",W),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=function(){var t=new $i,i=(new Qi).setFromUnitVectors(e.up,new $i(0,1,0)),a=i.clone().invert(),p=new $i,v=new Qi,g=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),l.setFromVector3(t),n.autoRotate&&s===o.NONE&&_(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(l.theta+=c.theta*n.dampingFactor,l.phi+=c.phi*n.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);var m=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(m)&&isFinite(y)&&(m<-Math.PI?m+=g:m>Math.PI&&(m-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),l.theta=m<=y?Math.max(m,Math.min(y,l.theta)):l.theta>(m+y)/2?Math.max(m,l.theta):Math.min(y,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(l),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),h=1,!!(f||p.distanceToSquared(n.object.position)>u||8*(1-v.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),p.copy(n.object.position),v.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",K),n.domElement.removeEventListener("pointerdown",G),n.domElement.removeEventListener("wheel",V),n.domElement.removeEventListener("touchstart",X),n.domElement.removeEventListener("touchend",q),n.domElement.removeEventListener("touchmove",Y),n.domElement.ownerDocument.removeEventListener("pointermove",H),n.domElement.ownerDocument.removeEventListener("pointerup",j),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",W)};var n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,u=1e-6,l=new ih,c=new ih,h=1,d=new $i,f=!1,p=new Mi,v=new Mi,g=new Mi,m=new Mi,y=new Mi,b=new Mi,x=new Mi,E=new Mi,w=new Mi,k=new Mi;function S(e){return Math.pow(.95,n.zoomSpeed*(e?n.mouseZoomSpeedFactor:1))}function _(e){c.theta-=e}function M(e){c.phi-=e}var T=function(){var e=new $i;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),A=function(){var e=new $i;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),C=function(){var e=new $i;return function(t,r){var i=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*o/i.clientHeight,n.object.matrix),A(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth/window.devicePixelRatio,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight/window.devicePixelRatio,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(e,t){var r=(t.x-n.domElement.width/2)*(e-1)/e,i=(t.y-n.domElement.height/2)*(e-1)/e;C(-r,-i)}function R(e,t){if(n.object.isPerspectiveCamera)h/=e;else if(n.object.isOrthographicCamera){var r=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e));P(r/n.object.zoom,t),n.object.zoom=r,n.object.updateProjectionMatrix(),f=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1}function N(e,t){if(n.object.isPerspectiveCamera)h*=e;else if(n.object.isOrthographicCamera){var r=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e));P(r/n.object.zoom,t),n.object.zoom=r,n.object.updateProjectionMatrix(),f=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1}function O(e){p.set(e.clientX,e.clientY)}function L(e){m.set(e.clientX,e.clientY)}function D(e){if(1==e.touches.length)p.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);p.set(t,n)}}function I(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}}function F(e){var t=n.domElement.getBoundingClientRect();x.set((e.touches[0].clientX+e.touches[1].clientX)/2-t.left,(e.touches[0].clientY+e.touches[1].clientY)/2-t.top).multiplyScalar(window.devicePixelRatio);var r=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(r*r+i*i);E.set(0,a)}function U(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,r)}g.subVectors(v,p).multiplyScalar(n.rotateSpeed);var i=n.domElement;_(2*Math.PI*g.x/i.clientHeight),M(2*Math.PI*g.y/i.clientHeight),p.copy(v)}function B(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,r)}b.subVectors(y,m).multiplyScalar(n.panSpeed*window.devicePixelRatio),C(b.x,b.y),m.copy(y)}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);w.set(0,r),k.set(0,w.y/E.y),R(k.y,x),E.copy(w)}function G(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Kn:if(!1===n.enableZoom)return;!function(e){var t=n.domElement.getBoundingClientRect();x.set(e.clientX-t.left,e.clientY-t.top),E.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case qn:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;L(e),s=o.PAN}else{if(!1===n.enableRotate)return;O(e),s=o.ROTATE}break;case Zn:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),s=o.ROTATE}else{if(!1===n.enablePan)return;L(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",H),n.domElement.ownerDocument.addEventListener("pointerup",j),n.dispatchEvent(i))}(e)}}function H(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===n.enabled)return;switch(e.preventDefault(),s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),g.subVectors(v,p).multiplyScalar(n.rotateSpeed);var t=n.domElement;_(2*Math.PI*g.x/t.clientHeight),M(2*Math.PI*g.y/t.clientHeight),p.copy(v),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),k.subVectors(w,E),k.y>0?R(S(!0),x):k.y<0&&N(S(!0),x),E.copy(w),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,m).multiplyScalar(n.panSpeed*window.devicePixelRatio),C(b.x,b.y),m.copy(y),n.update()}(e)}}(e)}}function j(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(n.domElement.ownerDocument.removeEventListener("pointermove",H),n.domElement.ownerDocument.removeEventListener("pointerup",j),!1===n.enabled)return;n.dispatchEvent(a),s=o.NONE}()}}function V(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),function(e){var t=n.domElement.getBoundingClientRect(),r=new Mi((e.clientX-t.left)*window.devicePixelRatio,(e.clientY-t.top)*window.devicePixelRatio);e.deltaY<0?N(S(),r):e.deltaY>0&&R(S(),r),n.update()}(e),n.dispatchEvent(a))}function W(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case Jn:if(!1===n.enableRotate)return;D(e),s=o.TOUCH_ROTATE;break;case Qn:if(!1===n.enablePan)return;I(e),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case $n:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&F(e),n.enablePan&&I(e)}(e),s=o.TOUCH_DOLLY_PAN;break;case er:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&F(e),n.enableRotate&&D(e)}(e),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}}function Y(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;B(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&B(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&U(e)}(e),n.update();break;default:s=o.NONE}}function q(e){!1!==n.enabled&&(n.dispatchEvent(a),s=o.NONE)}function K(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",K),n.domElement.addEventListener("pointerdown",G),n.domElement.addEventListener("wheel",V),n.domElement.addEventListener("touchstart",X),n.domElement.addEventListener("touchend",q),n.domElement.addEventListener("touchmove",Y),this.update()};(Sy.prototype=Object.create(pi.prototype)).constructor=Sy;var _y=function(e,t){Sy.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Zn,this.mouseButtons.RIGHT=qn,this.touches.ONE=Qn,this.touches.TWO=er};(_y.prototype=Object.create(pi.prototype)).constructor=_y;var My=Object.freeze({INFO:"info",WARN:"warn",ERROR:"error"}),Ty=function(){return p((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(this,e),this.domContainer=t,this.options=Object.create(e.DefaultOptions),r&&Object.assign(this.options,r),r=this.options,this.clearColor=this.options.clearColor.getHex(),this.scene=new uc;try{this.renderer=new oc({alpha:r.canvasAlpha,premultipliedAlpha:r.canvasPremultipliedAlpha,antialias:r.antialias,depth:!1,preserveDrawingBuffer:r.preserveDrawingBuffer})}catch(GK){return console.log("Failed to create renderer: "+GK),void(this.renderer=null)}var i=this.renderer;i.sortObjects=!1,i.setPixelRatio(window.devicePixelRatio);var a=this.camera=new Is(-1,1,1,-1,.1,2);a.position.z=1,a.position.x=0,a.position.y=0,this.simpleColorMaterial=[],this.simplePointMaterial=[];for(var o=0;o<Ay.MAX;o++)this.simpleColorMaterial[o]=this._CreateSimpleColorMaterial(o),this.simplePointMaterial[o]=this._CreateSimplePointMaterial(o);i.setClearColor(r.clearColor,r.clearAlpha),r.autoResize?(this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,t.style.position="relative"):(this.canvasWidth=r.canvasWidth,this.canvasHeight=r.canvasHeight,this.resizeObserver=null),i.setSize(this.canvasWidth,this.canvasHeight),this.canvas=i.domElement,t.style.display="block",r.autoResize&&(this.canvas.style.position="absolute",this.resizeObserver=new ResizeObserver((function(e){return n._OnResize(e[0])})),this.resizeObserver.observe(t)),t.appendChild(this.canvas),this.canvas.addEventListener("pointerdown",this._OnPointerEvent.bind(this)),this.canvas.addEventListener("pointerup",this._OnPointerEvent.bind(this)),this.Render(),this.materials=new df((function(e,t){return e.key.Compare(t.key)})),this.layers=new Map,this.blocks=new Map,this.worker=null}),[{key:"HasRenderer",value:function(){return Boolean(this.renderer)}},{key:"GetRenderer",value:function(){return this.renderer}},{key:"GetCanvas",value:function(){return this.canvas}},{key:"GetDxf",value:function(){return this.parsedDxf}},{key:"SetSize",value:function(e,t){this._EnsureRenderer();var n=e/this.canvasWidth,r=t/this.canvasHeight,i=this.camera,a=(i.left+i.right)/2,o=(i.bottom+i.top)/2,s=i.right-i.left,u=i.top-i.bottom;i.left=a-n*s/2,i.right=a+n*s/2,i.bottom=o-r*u/2,i.top=o+r*u/2,i.updateProjectionMatrix(),this.canvasWidth=e,this.canvasHeight=t,this.renderer.setSize(e,t),this.controls&&this.controls.update(),this._Emit("resized",{width:e,height:t}),this._Emit("viewChanged"),this.Render()}},{key:"Load",value:function(){var e=c(u().mark((function e(t){var n,r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.fonts,i=void 0===r?null:r,a=t.progressCbk,o=void 0===a?null:a,s=t.workerFactory,l=void 0===s?null:s,null!==n&&void 0!==n){e.next=3;break}throw new Error("`url` parameter is not specified");case 3:return this._EnsureRenderer(),this.Clear(),this.worker=new wy(l?l():null),e.next=8,this.worker.Load(n,i,this.options,o);case 8:return c=e.sent,h=c.scene,d=c.dxf,e.next=13,this.worker.Destroy();case 13:this.worker=null,this.parsedDxf=d,this.origin=h.origin,this.bounds=h.bounds,this.hasMissingChars=h.hasMissingChars,f=D(h.layers);try{for(f.s();!(p=f.n()).done;)v=p.value,this.layers.set(v.name,new Py(v.name,v.displayName,v.color))}catch(u){f.e(u)}finally{f.f()}g=D(h.batches);try{for(g.s();!(m=g.n()).done;)null!==(y=m.value).key.blockName&&y.key.geometryType!==sh.GeometryType.BLOCK_INSTANCE&&y.key.geometryType!==sh.GeometryType.POINT_INSTANCE&&((b=this.blocks.get(y.key.blockName))||(b=new Ry,this.blocks.set(y.key.blockName,b)),b.PushBatch(new Cy(this,h,y)))}catch(u){g.e(u)}finally{g.f()}console.log("DXF scene:\n                     ".concat(h.batches.length," batches,\n                     ").concat(this.layers.size," layers,\n                     ").concat(this.blocks.size," blocks,\n                     vertices ").concat(h.vertices.byteLength," B,\n                     indices ").concat(h.indices.byteLength," B\n                     transforms ").concat(h.transforms.byteLength," B")),x=D(h.batches);try{for(x.s();!(E=x.n()).done;)w=E.value,this._LoadBatch(h,w)}catch(u){x.e(u)}finally{x.f()}this._Emit("loaded"),h.bounds?this.FitView(h.bounds.minX-h.origin.x,h.bounds.maxX-h.origin.x,h.bounds.minY-h.origin.y,h.bounds.maxY-h.origin.y):this._Message("Empty document",My.WARN),this.hasMissingChars&&this._Message("Some characters cannot be properly displayed due to missing fonts",My.WARN),this._CreateControls(),this.Render();case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Render",value:function(){this._EnsureRenderer(),this.renderer.render(this.scene,this.camera)}},{key:"GetLayers",value:function(){var e,t=[],n=D(this.layers.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push({name:r.name,displayName:r.displayName,color:this._TransformColor(r.color)})}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"ShowLayer",value:function(e,t){this._EnsureRenderer();var n=this.layers.get(e);if(n){var r,i=D(n.objects);try{for(i.s();!(r=i.n()).done;){r.value.visible=t}}catch(a){i.e(a)}finally{i.f()}this.Render()}}},{key:"Clear",value:function(){this._EnsureRenderer(),this.worker&&(this.worker.Destroy(!0),this.worker=null),this.controls&&(this.controls.dispose(),this.controls=null),this.scene.clear();var e,t=D(this.layers.values());try{for(t.s();!(e=t.n()).done;){e.value.Dispose()}}catch(n){t.e(n)}finally{t.f()}this.layers.clear(),this.blocks.clear(),this.materials.each((function(e){return e.material.dispose()})),this.materials.clear(),this.SetView({x:0,y:0},2),this._Emit("cleared"),this.Render()}},{key:"Destroy",value:function(){if(this.HasRenderer()){this.resizeObserver&&this.resizeObserver.disconnect(),this.Clear(),this._Emit("destroyed");var e,t=D(this.simplePointMaterial);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(i){t.e(i)}finally{t.f()}var n,r=D(this.simpleColorMaterial);try{for(r.s();!(n=r.n()).done;){n.value.dispose()}}catch(i){r.e(i)}finally{r.f()}this.simplePointMaterial=null,this.simpleColorMaterial=null,this.renderer.dispose(),this.renderer=null}}},{key:"SetView",value:function(e,t){var n=t/(this.canvasWidth/this.canvasHeight),r=this.camera;r.left=-t/2,r.right=t/2,r.top=n/2,r.bottom=-n/2,r.zoom=1,r.position.set(e.x,e.y,1),r.rotation.set(0,0,0),r.updateMatrix(),r.updateProjectionMatrix(),this._Emit("viewChanged")}},{key:"FitView",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=this.canvasWidth/this.canvasHeight,o=t-e,s=r-n,u={x:e+o/2,y:n+s/2};s*a>o&&(o=s*a),o<=2*Number.MIN_VALUE&&(o=1),this.SetView(u,o*(1+i))}},{key:"GetScene",value:function(){return this.scene}},{key:"GetCamera",value:function(){return this.camera}},{key:"GetOrigin",value:function(){return this.origin}},{key:"GetBounds",value:function(){return this.bounds}},{key:"Subscribe",value:function(e,t){this._EnsureRenderer(),this.canvas.addEventListener(Ny+e,t)}},{key:"Unsubscribe",value:function(e,t){this._EnsureRenderer(),this.canvas.removeEventListener(Ny+e,t)}},{key:"_EnsureRenderer",value:function(){if(!this.HasRenderer())throw new Error("WebGL renderer not available. Probable WebGL context loss, try refreshing the page.")}},{key:"_CreateControls",value:function(){var e=this,t=this.controls=new Sy(this.camera,this.canvas);t.enableRotate=!1,t.mouseButtons={LEFT:Zn,MIDDLE:Kn},t.touches={ONE:Qn,TWO:$n},t.zoomSpeed=3,t.mouseZoomSpeedFactor=.05,t.target=new $i(this.camera.position.x,this.camera.position.y,0),t.addEventListener("change",(function(){e._Emit("viewChanged"),e.Render()})),t.update()}},{key:"_Emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.canvas.dispatchEvent(new CustomEvent(Ny+e,{detail:t}))}},{key:"_Message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:My.INFO;this._Emit("message",{message:e,level:t})}},{key:"_OnPointerEvent",value:function(e){var t=e.target.getBoundingClientRect(),n={x:e.clientX-t.left,y:e.clientY-t.top};this._Emit(e.type,{domEvent:e,canvasCoord:n,position:this._CanvasToSceneCoord(n.x,n.y)})}},{key:"_CanvasToSceneCoord",value:function(e,t){var n=new $i(2*e/this.canvasWidth-1,2*-t/this.canvasHeight+1,1).unproject(this.camera);return{x:n.x,y:n.y}}},{key:"_OnResize",value:function(e){this.SetSize(Math.floor(e.contentRect.width),Math.floor(e.contentRect.height))}},{key:"_LoadBatch",value:function(e,t){if(null===t.key.blockName||t.key.geometryType===sh.GeometryType.BLOCK_INSTANCE||t.key.geometryType===sh.GeometryType.POINT_INSTANCE){var n,r=new Cy(this,e,t).CreateObjects(),i=this.layers.get(t.key.layerName),a=D(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;this.scene.add(o),i&&i.PushObject(o)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"_GetSimpleColorMaterial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ay.NONE,n=new ky(t,null,e,0),r=this.materials.find({key:n});return null!==r||(r={key:n,material:this._CreateSimpleColorMaterialInstance(e,t)},this.materials.insert(r)),r.material}},{key:"_CreateSimpleColorMaterial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ay.NONE,t=this._GenerateShaders(e,!1);return new Pc({uniforms:{color:{value:new mo(16711935)}},vertexShader:t.vertex,fragmentShader:t.fragment,depthTest:!1,depthWrite:!1,glslVersion:ci,side:2})}},{key:"_CreateSimpleColorMaterialInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ay.NONE,n=this.simpleColorMaterial[t].clone();return n.uniforms.color={value:new mo(e)},n}},{key:"_GetSimplePointMaterial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ay.NONE,n=new ky(t,sh.GeometryType.POINTS,e,0),r=this.materials.find({key:n});return null!==r||(r={key:n,material:this._CreateSimplePointMaterialInstance(e,this.options.pointSize,t)},this.materials.insert(r)),r.material}},{key:"_CreateSimplePointMaterial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ay.NONE,t=this._GenerateShaders(e,!0);return new Pc({uniforms:{color:{value:new mo(16711935)},pointSize:{value:2}},vertexShader:t.vertex,fragmentShader:t.fragment,depthTest:!1,depthWrite:!1,glslVersion:ci})}},{key:"_CreateSimplePointMaterialInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ay.NONE,r=this.simplePointMaterial[n].clone();return r.uniforms.color={value:new mo(e)},r.uniforms.size={value:t},r}},{key:"_GenerateShaders",value:function(e,t){var n=e===Ay.FULL?"\n            /* First row. */\n            in vec3 instanceTransform0;\n            /* Second row. */\n            in vec3 instanceTransform1;\n            ":"",r=e===Ay.FULL?"\n            pos.xy = mat2(instanceTransform0[0], instanceTransform1[0],\n                          instanceTransform0[1], instanceTransform1[1]) * pos.xy +\n                     vec2(instanceTransform0[2], instanceTransform1[2]);\n            ":"",i=e===Ay.POINT?"\n            in vec2 instanceTransform;\n            ":"",a=e===Ay.POINT?"\n            pos.xy += instanceTransform;\n            ":"",o=t?"uniform float pointSize;":"",s=t?"gl_PointSize = pointSize;":"";return{vertex:"\n\n            precision highp float;\n            precision highp int;\n            in vec2 position;\n            ".concat(n,"\n            ").concat(i,"\n            uniform mat4 modelViewMatrix;\n            uniform mat4 projectionMatrix;\n            ").concat(o,"\n\n            void main() {\n                vec4 pos = vec4(position, 0.0, 1.0);\n                ").concat(r,"\n                ").concat(a,"\n                gl_Position = projectionMatrix * modelViewMatrix * pos;\n                ").concat(s,"\n            }\n            "),fragment:"\n\n            precision highp float;\n            precision highp int;\n            uniform vec3 color;\n            out vec4 fragColor;\n\n            void main() {\n                fragColor = vec4(color, 1.0);\n            }\n            "}}},{key:"_TransformColor",value:function(e){if(!this.options.colorCorrection&&!this.options.blackWhiteInversion)return e;var t=Dy(this.clearColor);if(16777215===e&&t>=.8)return 0;if(0===e&&t<=.2)return 16777215;if(!this.options.colorCorrection)return e;var n,r,i,a=Dy(e),o=(n=e,r=this.clearColor,(Dy(n)+.05)/(Dy(r)+.05));(o>=1?o:1/o)<1.5&&(e=(i=t>.5?t/2:2*t)>a?function(e,t){var n=Fy(e);n.l*=t,n.l>1&&(n.l=1);return Iy(n)}(e,i/a):function(e,t){var n=Fy(e);return n.l/=t,Iy(n)}(e,a/i));return e}}])}();Ty.MessageLevel=My,Ty.DefaultOptions={canvasWidth:400,canvasHeight:300,autoResize:!1,clearColor:new mo("#000"),clearAlpha:1,canvasAlpha:!1,canvasPremultipliedAlpha:!0,antialias:!0,colorCorrection:!1,blackWhiteInversion:!0,pointSize:2,sceneOptions:Nf.DefaultOptions,retainParsedDxf:!1,preserveDrawingBuffer:!1,fileEncoding:"utf-8"},Ty.SetupWorker=function(){new wy(self,!0)};var Ay=Object.freeze({NONE:0,FULL:1,POINT:2,MAX:3}),Cy=function(){return p((function e(t,n,r){if(v(this,e),this.viewer=t,this.key=r.key,r.hasOwnProperty("verticesOffset")){var i=new Float32Array(n.vertices,r.verticesOffset*Float32Array.BYTES_PER_ELEMENT,r.verticesSize);(this.key.geometryType!==sh.GeometryType.POINT_INSTANCE||n.pointShapeHasDot)&&(this.vertices=new So(i,2)),this.key.geometryType===sh.GeometryType.POINT_INSTANCE&&(this.transforms=new dc(i,2))}if(r.hasOwnProperty("chunks")){this.chunks=[];var a,o=D(r.chunks);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=new Float32Array(n.vertices,s.verticesOffset*Float32Array.BYTES_PER_ELEMENT,s.verticesSize),l=new Uint16Array(n.indices,s.indicesOffset*Uint16Array.BYTES_PER_ELEMENT,s.indicesSize);this.chunks.push({vertices:new So(u,2),indices:new So(l,1)})}}catch(f){o.e(f)}finally{o.f()}}if(r.hasOwnProperty("transformsOffset")){var c=new Float32Array(n.transforms,r.transformsOffset*Float32Array.BYTES_PER_ELEMENT,r.transformsSize),h=new rh(c,6);this.transforms0=new hc(h,3,0),this.transforms1=new hc(h,3,3)}if(this.key.geometryType===sh.GeometryType.BLOCK_INSTANCE||this.key.geometryType===sh.GeometryType.POINT_INSTANCE){var d=this.viewer.layers.get(this.key.layerName);this.layerColor=d?d.color:0}}),[{key:"GetInstanceType",value:function(){switch(this.key.geometryType){case sh.GeometryType.BLOCK_INSTANCE:return Ay.FULL;case sh.GeometryType.POINT_INSTANCE:return Ay.POINT;default:return Ay.NONE}}},{key:"CreateObjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.key.geometryType!==sh.GeometryType.BLOCK_INSTANCE&&e.key.geometryType!==sh.GeometryType.POINT_INSTANCE){n.next=5;break}if(null===t){n.next=3;break}throw new Error("Unexpected instance batch specified for instance batch");case 3:return n.delegateYield(e._CreateBlockInstanceObjects(),"t0",4);case 4:return n.abrupt("return");case 5:return n.delegateYield(e._CreateObjects(t),"t1",6);case 6:case"end":return n.stop()}}),n)}))()}},{key:"_CreateObjects",value:u().mark((function e(t){var n,r,i,a,o,s,l,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(e,n){var r=t?new qc:new Do;r.setAttribute("position",e),null===t||void 0===t||t._SetInstanceTransformAttribute(r),n&&r.setIndex(n);var i=new o(r,a);return i.frustumCulled=!1,i.matrixAutoUpdate=!1,i},r=t?t._GetInstanceColor(this.key.color):this.key.color,i=this.key.geometryType===sh.GeometryType.POINTS||this.key.geometryType===sh.GeometryType.POINT_INSTANCE?this.viewer._GetSimplePointMaterial:this.viewer._GetSimpleColorMaterial,a=i.call(this.viewer,this.viewer._TransformColor(r),null!==(n=null===t||void 0===t?void 0:t.GetInstanceType())&&void 0!==n?n:Ay.NONE),e.t0=this.key.geometryType,e.next=e.t0===sh.GeometryType.POINTS||e.t0===sh.GeometryType.POINT_INSTANCE?7:e.t0===sh.GeometryType.LINES||e.t0===sh.GeometryType.INDEXED_LINES?9:e.t0===sh.GeometryType.TRIANGLES||e.t0===sh.GeometryType.INDEXED_TRIANGLES?11:13;break;case 7:return o=Ac,e.abrupt("break",14);case 9:return o=wc,e.abrupt("break",14);case 11:return o=$o,e.abrupt("break",14);case 13:throw new Error("Unexpected geometry type:"+this.key.geometryType);case 14:if(!this.chunks){e.next=34;break}l=D(this.chunks),e.prev=16,l.s();case 18:if((c=l.n()).done){e.next=24;break}return h=c.value,e.next=22,s(h.vertices,h.indices);case 22:e.next=18;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(16),l.e(e.t1);case 29:return e.prev=29,l.f(),e.finish(29);case 32:e.next=36;break;case 34:return e.next=36,s(this.vertices);case 36:case"end":return e.stop()}}),e,this,[[16,26,29,32]])}))},{key:"_SetInstanceTransformAttribute",value:function(e){if(!e.isInstancedBufferGeometry)throw new Error("InstancedBufferGeometry expected");this.key.geometryType===sh.GeometryType.POINT_INSTANCE?e.setAttribute("instanceTransform",this.transforms):(e.setAttribute("instanceTransform0",this.transforms0),e.setAttribute("instanceTransform1",this.transforms1))}},{key:"_CreateBlockInstanceObjects",value:u().mark((function e(){var t,n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.viewer.blocks.get(this.key.blockName)){e.next=3;break}return e.abrupt("return");case 3:n=D(t.batches),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=11;break}return i=r.value,e.delegateYield(i.CreateObjects(this),"t0",9);case 9:e.next=6;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:if(!this.hasOwnProperty("vertices")){e.next=21;break}return e.delegateYield(this._CreateObjects(),"t2",21);case 21:case"end":return e.stop()}}),e,this,[[4,13,16,19]])}))},{key:"_GetInstanceColor",value:function(e){return e===Gf.BY_BLOCK?this.key.color:e===Gf.BY_LAYER?this.layerColor:e}}])}(),Py=function(){return p((function e(t,n,r){v(this,e),this.name=t,this.displayName=n,this.color=r,this.objects=[]}),[{key:"PushObject",value:function(e){this.objects.push(e)}},{key:"Dispose",value:function(){var e,t=D(this.objects);try{for(t.s();!(e=t.n()).done;){e.value.geometry.dispose()}}catch(n){t.e(n)}finally{t.f()}this.objects=null}}])}(),Ry=function(){return p((function e(){v(this,e),this.batches=[]}),[{key:"PushBatch",value:function(e){this.batches.push(e)}}])}(),Ny="__dxf_";function Oy(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ly(e){return e<.003?12.92*e:1.055*Math.pow(e,1/2.4)-.055}function Dy(e){return.2126*Oy(((16711680&e)>>>16)/255)+.7152*Oy(((65280&e)>>>8)/255)+.0722*Oy((255&e)/255)}function Iy(e){var t,n,r,i=e.h,a=e.l,o=e.s;if(0===o)t=n=r=a;else{var s=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},u=a<.5?a*(1+o):a+o-a*o,l=2*a-u;t=s(l,u,i+1/3),n=s(l,u,i),r=s(l,u,i-1/3)}return Math.min(Math.floor(256*Ly(t)),255)<<16|Math.min(Math.floor(256*Ly(n)),255)<<8|Math.min(Math.floor(256*Ly(r)),255)}function Fy(e){var t,n,r=Oy(((16711680&e)>>>16)/255),i=Oy(((65280&e)>>>8)/255),a=Oy((255&e)/255),o=Math.max(r,i,a),s=Math.min(r,i,a),u=(o+s)/2;if(o===s)t=n=0;else{var l=o-s;switch(n=u>.5?l/(2-o-s):l/(o+s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return{h:t,l:u,s:n}}var Uy=n.p+"static/media/Roboto-LightItalic.2eeb30ebc5bee9ac3d42.ttf",By=n(5582),zy=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).dxfBox=void 0,n.DXFViewer=void 0,n.timer=void 0,n.dxfBox=(0,i.createRef)(),n.DXFViewer=null,n.state={url:""},n}return C(t,e),p(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.initFunc(),this.initDXFCanvas()}},{key:"initFunc",value:function(){var e=this;window.onDXFViewerLoadUrl=function(t){e.timer=setInterval((function(){e.DXFViewer&&(e.showDXFFile(t),clearInterval(e.timer))}),1e3)}}},{key:"initDXFCanvas",value:function(){this.DXFViewer=new Ty(this.dxfBox.current,{autoResize:!0,sceneOptions:{wireframeMesh:!0}}),this.dispatchInitEvent()}},{key:"dispatchInitEvent",value:function(){var e;null===(e=window.ReactNativeWebView)||void 0===e||e.postMessage(JSON.stringify({action:"DxfViewerStatus",body:"ok"}))}},{key:"showDXFFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.DXFViewer.Load(an(an({},t),{},{url:e,fonts:[Uy]}))}},{key:"render",value:function(){return(0,By.jsx)(By.Fragment,{children:(0,By.jsx)("div",{className:on,ref:this.dxfBox})})}}])}(i.Component),Gy=zy,Hy=n(8364),jy=1e-6,Vy="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Wy(){var e=new Vy(3);return Vy!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Xy(e){var t=new Vy(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yy(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function qy(e,t,n){var r=new Vy(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ky(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Zy(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Jy(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Qy(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function $y(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function eb(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function tb(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function nb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rb(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function ib(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function ab(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function ob(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=jy*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=jy*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=jy*Math.max(1,Math.abs(i),Math.abs(s))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var sb=Qy,ub=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)},lb=Yy;!function(){var e=Wy()}();function cb(){var e=new Vy(4);return Vy!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function hb(e,t,n,r){var i=new Vy(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function db(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}!function(){var e=cb()}();function fb(){var e=new Vy(16);return Vy!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function pb(e){var t=new Vy(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vb(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gb(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v){var g=new Vy(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=u,g[9]=l,g[10]=c,g[11]=h,g[12]=d,g[13]=f,g[14]=p,g[15]=v,g}function mb(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=v,e[15]=g,e}function yb(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bb(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function xb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=n*s-r*o,b=n*u-i*o,x=n*l-a*o,E=r*u-i*s,w=r*l-a*s,k=i*l-a*u,S=c*v-h*p,_=c*g-d*p,M=c*m-f*p,T=h*g-d*v,A=h*m-f*v,C=d*m-f*g,P=y*C-b*A+x*T+E*M-w*_+k*S;return P?(P=1/P,e[0]=(s*C-u*A+l*T)*P,e[1]=(i*A-r*C-a*T)*P,e[2]=(v*k-g*w+m*E)*P,e[3]=(d*w-h*k-f*E)*P,e[4]=(u*M-o*C-l*_)*P,e[5]=(n*C-i*M+a*_)*P,e[6]=(g*x-p*k-m*b)*P,e[7]=(c*k-d*x+f*b)*P,e[8]=(o*A-s*M+l*S)*P,e[9]=(r*M-n*A-a*S)*P,e[10]=(p*w-v*x+m*y)*P,e[11]=(h*x-c*w-f*y)*P,e[12]=(s*_-o*T-u*S)*P,e[13]=(n*T-r*_+i*S)*P,e[14]=(v*b-p*E-g*y)*P,e[15]=(c*E-h*b+d*y)*P,e):null}function Eb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];return e[0]=s*(d*m-f*g)-h*(u*m-l*g)+v*(u*f-l*d),e[1]=-(r*(d*m-f*g)-h*(i*m-a*g)+v*(i*f-a*d)),e[2]=r*(u*m-l*g)-s*(i*m-a*g)+v*(i*l-a*u),e[3]=-(r*(u*f-l*d)-s*(i*f-a*d)+h*(i*l-a*u)),e[4]=-(o*(d*m-f*g)-c*(u*m-l*g)+p*(u*f-l*d)),e[5]=n*(d*m-f*g)-c*(i*m-a*g)+p*(i*f-a*d),e[6]=-(n*(u*m-l*g)-o*(i*m-a*g)+p*(i*l-a*u)),e[7]=n*(u*f-l*d)-o*(i*f-a*d)+c*(i*l-a*u),e[8]=o*(h*m-f*v)-c*(s*m-l*v)+p*(s*f-l*h),e[9]=-(n*(h*m-f*v)-c*(r*m-a*v)+p*(r*f-a*h)),e[10]=n*(s*m-l*v)-o*(r*m-a*v)+p*(r*l-a*s),e[11]=-(n*(s*f-l*h)-o*(r*f-a*h)+c*(r*l-a*s)),e[12]=-(o*(h*g-d*v)-c*(s*g-u*v)+p*(s*d-u*h)),e[13]=n*(h*g-d*v)-c*(r*g-i*v)+p*(r*d-i*h),e[14]=-(n*(s*g-u*v)-o*(r*g-i*v)+p*(r*u-i*s)),e[15]=n*(s*d-u*h)-o*(r*d-i*h)+c*(r*u-i*s),e}function wb(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],g=e[15];return(t*o-n*a)*(h*g-d*v)-(t*s-r*a)*(c*g-d*p)+(t*u-i*a)*(c*v-h*p)+(n*s-r*o)*(l*g-d*f)-(n*u-i*o)*(l*v-h*f)+(r*u-i*s)*(l*p-c*f)}function kb(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],b=n[0],x=n[1],E=n[2],w=n[3];return e[0]=b*r+x*s+E*h+w*v,e[1]=b*i+x*u+E*d+w*g,e[2]=b*a+x*l+E*f+w*m,e[3]=b*o+x*c+E*p+w*y,b=n[4],x=n[5],E=n[6],w=n[7],e[4]=b*r+x*s+E*h+w*v,e[5]=b*i+x*u+E*d+w*g,e[6]=b*a+x*l+E*f+w*m,e[7]=b*o+x*c+E*p+w*y,b=n[8],x=n[9],E=n[10],w=n[11],e[8]=b*r+x*s+E*h+w*v,e[9]=b*i+x*u+E*d+w*g,e[10]=b*a+x*l+E*f+w*m,e[11]=b*o+x*c+E*p+w*y,b=n[12],x=n[13],E=n[14],w=n[15],e[12]=b*r+x*s+E*h+w*v,e[13]=b*i+x*u+E*d+w*g,e[14]=b*a+x*l+E*f+w*m,e[15]=b*o+x*c+E*p+w*y,e}function Sb(e,t,n){var r,i,a,o,s,u,l,c,h,d,f,p,v=n[0],g=n[1],m=n[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*m+t[12],e[13]=t[1]*v+t[5]*g+t[9]*m+t[13],e[14]=t[2]*v+t[6]*g+t[10]*m+t[14],e[15]=t[3]*v+t[7]*g+t[11]*m+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*v+s*g+h*m+t[12],e[13]=i*v+u*g+d*m+t[13],e[14]=a*v+l*g+f*m+t[14],e[15]=o*v+c*g+p*m+t[15]),e}function _b(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Mb(e,t,n,r){var i,a,o,s,u,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A=r[0],C=r[1],P=r[2],R=Math.hypot(A,C,P);return R<jy?null:(A*=R=1/R,C*=R,P*=R,i=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],l=t[2],c=t[3],h=t[4],d=t[5],f=t[6],p=t[7],v=t[8],g=t[9],m=t[10],y=t[11],b=A*A*o+a,x=C*A*o+P*i,E=P*A*o-C*i,w=A*C*o-P*i,k=C*C*o+a,S=P*C*o+A*i,_=A*P*o+C*i,M=C*P*o-A*i,T=P*P*o+a,e[0]=s*b+h*x+v*E,e[1]=u*b+d*x+g*E,e[2]=l*b+f*x+m*E,e[3]=c*b+p*x+y*E,e[4]=s*w+h*k+v*S,e[5]=u*w+d*k+g*S,e[6]=l*w+f*k+m*S,e[7]=c*w+p*k+y*S,e[8]=s*_+h*M+v*T,e[9]=u*_+d*M+g*T,e[10]=l*_+f*M+m*T,e[11]=c*_+p*M+y*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Tb(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=u*i+d*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=d*i-u*r,e}function Ab(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=u*i-d*r,e[8]=a*r+l*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=u*r+d*i,e}function Cb(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=u*i+d*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=d*i-u*r,e}function Pb(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Rb(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nb(e,t,n){var r,i,a,o=n[0],s=n[1],u=n[2],l=Math.hypot(o,s,u);return l<jy?null:(o*=l=1/l,s*=l,u*=l,r=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=s*o*a+u*r,e[2]=u*o*a-s*r,e[3]=0,e[4]=o*s*a-u*r,e[5]=s*s*a+i,e[6]=u*s*a+o*r,e[7]=0,e[8]=o*u*a+s*r,e[9]=s*u*a-o*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ob(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lb(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Db(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ib(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,l=a+a,c=r*s,h=r*u,d=r*l,f=i*u,p=i*l,v=a*l,g=o*s,m=o*u,y=o*l;return e[0]=1-(f+v),e[1]=h+y,e[2]=d-m,e[3]=0,e[4]=h-y,e[5]=1-(c+v),e[6]=p+g,e[7]=0,e[8]=d+m,e[9]=p-g,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Fb(e,t){var n=new Vy(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=r*r+i*i+a*a+o*o;return h>0?(n[0]=2*(s*o+c*r+u*a-l*i)/h,n[1]=2*(u*o+c*i+l*r-s*a)/h,n[2]=2*(l*o+c*a+s*i-u*r)/h):(n[0]=2*(s*o+c*r+u*a-l*i),n[1]=2*(u*o+c*i+l*r-s*a),n[2]=2*(l*o+c*a+s*i-u*r)),Ib(e,t,n),e}function Ub(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Bb(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(u,l,c),e}function zb(e,t){var n=new Vy(3);Bb(n,t);var r=1/n[0],i=1/n[1],a=1/n[2],o=t[0]*r,s=t[1]*i,u=t[2]*a,l=t[4]*r,c=t[5]*i,h=t[6]*a,d=t[8]*r,f=t[9]*i,p=t[10]*a,v=o+c+p,g=0;return v>0?(g=2*Math.sqrt(v+1),e[3]=.25*g,e[0]=(h-f)/g,e[1]=(d-u)/g,e[2]=(s-l)/g):o>c&&o>p?(g=2*Math.sqrt(1+o-c-p),e[3]=(h-f)/g,e[0]=.25*g,e[1]=(s+l)/g,e[2]=(d+u)/g):c>p?(g=2*Math.sqrt(1+c-o-p),e[3]=(d-u)/g,e[0]=(s+l)/g,e[1]=.25*g,e[2]=(h+f)/g):(g=2*Math.sqrt(1+p-o-c),e[3]=(s-l)/g,e[0]=(d+u)/g,e[1]=(h+f)/g,e[2]=.25*g),e}function Gb(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,l=a+a,c=o+o,h=i*u,d=i*l,f=i*c,p=a*l,v=a*c,g=o*c,m=s*u,y=s*l,b=s*c,x=r[0],E=r[1],w=r[2];return e[0]=(1-(p+g))*x,e[1]=(d+b)*x,e[2]=(f-y)*x,e[3]=0,e[4]=(d-b)*E,e[5]=(1-(h+g))*E,e[6]=(v+m)*E,e[7]=0,e[8]=(f+y)*w,e[9]=(v-m)*w,e[10]=(1-(h+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Hb(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],l=a+a,c=o+o,h=s+s,d=a*l,f=a*c,p=a*h,v=o*c,g=o*h,m=s*h,y=u*l,b=u*c,x=u*h,E=r[0],w=r[1],k=r[2],S=i[0],_=i[1],M=i[2],T=(1-(v+m))*E,A=(f+x)*E,C=(p-b)*E,P=(f-x)*w,R=(1-(d+m))*w,N=(g+y)*w,O=(p+b)*k,L=(g-y)*k,D=(1-(d+v))*k;return e[0]=T,e[1]=A,e[2]=C,e[3]=0,e[4]=P,e[5]=R,e[6]=N,e[7]=0,e[8]=O,e[9]=L,e[10]=D,e[11]=0,e[12]=n[0]+S-(T*S+P*_+O*M),e[13]=n[1]+_-(A*S+R*_+L*M),e[14]=n[2]+M-(C*S+N*_+D*M),e[15]=1,e}function jb(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,h=r*s,d=i*o,f=i*s,p=i*u,v=a*o,g=a*s,m=a*u;return e[0]=1-h-p,e[1]=c+m,e[2]=d-g,e[3]=0,e[4]=c-m,e[5]=1-l-p,e[6]=f+v,e[7]=0,e[8]=d+g,e[9]=f-v,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vb(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function Wb(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var Xb=Wb;function Yb(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function qb(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Kb(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e}var Zb=Kb;function Jb(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=a*l,e[15]=1,e}function Qb(e,t,n,r){var i,a,o,s,u,l,c,h,d,f,p=t[0],v=t[1],g=t[2],m=r[0],y=r[1],b=r[2],x=n[0],E=n[1],w=n[2];return Math.abs(p-x)<jy&&Math.abs(v-E)<jy&&Math.abs(g-w)<jy?yb(e):(c=p-x,h=v-E,d=g-w,i=y*(d*=f=1/Math.hypot(c,h,d))-b*(h*=f),a=b*(c*=f)-m*d,o=m*h-y*c,(f=Math.hypot(i,a,o))?(i*=f=1/f,a*=f,o*=f):(i=0,a=0,o=0),s=h*o-d*a,u=d*i-c*o,l=c*a-h*i,(f=Math.hypot(s,u,l))?(s*=f=1/f,u*=f,l*=f):(s=0,u=0,l=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=u,e[6]=h,e[7]=0,e[8]=o,e[9]=l,e[10]=d,e[11]=0,e[12]=-(i*p+a*v+o*g),e[13]=-(s*p+u*v+l*g),e[14]=-(c*p+h*v+d*g),e[15]=1,e)}function $b(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],l=r[2],c=i-n[0],h=a-n[1],d=o-n[2],f=c*c+h*h+d*d;f>0&&(c*=f=1/Math.sqrt(f),h*=f,d*=f);var p=u*d-l*h,v=l*c-s*d,g=s*h-u*c;return(f=p*p+v*v+g*g)>0&&(p*=f=1/Math.sqrt(f),v*=f,g*=f),e[0]=p,e[1]=v,e[2]=g,e[3]=0,e[4]=h*g-d*v,e[5]=d*p-c*g,e[6]=c*v-h*p,e[7]=0,e[8]=c,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function ex(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function tx(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function nx(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function rx(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function ix(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function ax(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function ox(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function sx(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=t[0],b=t[1],x=t[2],E=t[3],w=t[4],k=t[5],S=t[6],_=t[7],M=t[8],T=t[9],A=t[10],C=t[11],P=t[12],R=t[13],N=t[14],O=t[15];return Math.abs(n-y)<=jy*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=jy*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=jy*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-E)<=jy*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-w)<=jy*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-k)<=jy*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(u-S)<=jy*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-_)<=jy*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-M)<=jy*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(h-T)<=jy*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-A)<=jy*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-C)<=jy*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(p-P)<=jy*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-R)<=jy*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(g-N)<=jy*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(m-O)<=jy*Math.max(1,Math.abs(m),Math.abs(O))}var ux=kb,lx=rx;function cx(){var e=new Vy(9);return Vy!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hx(){var e=new Vy(4);return Vy!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function dx(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function fx(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-r*l,e[2]=a*c+o*l+r*u-i*s,e[3]=o*c-r*s-i*u-a*l,e}function px(e,t,n,r){var i,a,o,s,u,l=t[0],c=t[1],h=t[2],d=t[3],f=n[0],p=n[1],v=n[2],g=n[3];return l*f+c*p+h*v+d*g<0&&(-a,-f,-p,-v,-g),1-a>jy?(Math.acos(a),Math.sin(i),Math.sin((1-r)*i)/o,Math.sin(r*i)/o):(1-r,r),e[0]=s*l+u*f,e[1]=s*c+u*p,e[2]=s*h+u*v,e[3]=s*d+u*g,e}function vx(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function gx(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return e[0]=a*u*c-o*s*l,e[1]=o*s*c+a*u*l,e[2]=o*u*l-a*s*c,e[3]=o*u*c+a*s*l,e}var mx=hb,yx=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},bx=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},xx=fx,Ex=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e};(function(){var e=Wy(),t=qy(1,0,0),n=qy(0,1,0)})(),function(){var e=hx(),t=hx()}(),function(){var e=cx()}();function wx(){var e=new Vy(2);return Vy!=Float32Array&&(e[0]=0,e[1]=0),e}!function(){var e=wx()}();function kx(e){return"number"===typeof e}function Sx(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function _x(e){return null===e||void 0===e}function Mx(e){return"string"===typeof e}var Tx=function(e,t,n){return e<t?t:e>n?n:e},Ax=function(e,t){return Ax=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ax(e,t)};function Cx(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ax(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Px=function(){return Px=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Px.apply(this,arguments)};function Rx(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Nx(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}Object.create;function Ox(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lx(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Dx(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Ix(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;function Fx(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}"function"===typeof SuppressedError&&SuppressedError;var Ux={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Bx(e){return Array.isArray(e)&&e.every((function(e){var t=e[0].toLowerCase();return Ux[t]===e.length-1&&"achlmqstvz".includes(t)}))}function zx(e){return Bx(e)&&e.every((function(e){var t=e[0];return t===t.toUpperCase()}))}function Gx(e){return zx(e)&&e.every((function(e){var t=e[0];return"ACLMQZ".includes(t)}))}var Hx={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function jx(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=Ux[n]&&("m"===n&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t="m"===t?"l":"L"):e.segments.push([t].concat(r.splice(0,Ux[n]))),Ux[n]););}function Vx(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);return 48===r?(e.param=0,void(e.index+=1)):49===r?(e.param=1,void(e.index+=1)):void(e.err='[path-util]: invalid Arc flag "'.concat(n[t],'", expecting 0 or 1 at index ').concat(t))}function Wx(e){return e>=48&&e<=57||43===e||45===e||46===e}function Xx(e){return e>=48&&e<=57}function Yx(e){var t,n=e.max,r=e.pathValue,i=e.index,a=i,o=!1,s=!1,u=!1,l=!1;if(a>=n)e.err="[path-util]: Invalid path value at index ".concat(a,', "pathValue" is missing param');else if(43!==(t=r.charCodeAt(a))&&45!==t||(a+=1,t=r.charCodeAt(a)),Xx(t)||46===t){if(46!==t){if(o=48===t,a+=1,t=r.charCodeAt(a),o&&a<n&&t&&Xx(t))return void(e.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));for(;a<n&&Xx(r.charCodeAt(a));)a+=1,s=!0;t=r.charCodeAt(a)}if(46===t){for(l=!0,a+=1;Xx(r.charCodeAt(a));)a+=1,u=!0;t=r.charCodeAt(a)}if(101===t||69===t){if(l&&!s&&!u)return void(e.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid float exponent'));if(a+=1,43!==(t=r.charCodeAt(a))&&45!==t||(a+=1),!(a<n&&Xx(r.charCodeAt(a))))return void(e.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid integer exponent'));for(;a<n&&Xx(r.charCodeAt(a));)a+=1}e.index=a,e.param=+e.pathValue.slice(i,a)}else e.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" is not a number')}function qx(e){for(var t,n=e.pathValue,r=e.max;e.index<r&&(10===(t=n.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t));)e.index+=1}function Kx(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),a=Ux[n[r].toLowerCase()];if(e.segmentStart=r,function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(e.index+=1,qx(e),e.data=[],a){for(;;){for(var o=a;o>0;o-=1){if(97!==(32|i)||3!==o&&4!==o?Yx(e):Vx(e),e.err.length)return;e.data.push(e.param),qx(e),e.index<t&&44===n.charCodeAt(e.index)&&(e.index+=1,qx(e))}if(e.index>=e.max)break;if(!Wx(n.charCodeAt(e.index)))break}jx(e)}else jx(e);else e.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command')}var Zx=function(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function Jx(e){if(zx(e))return[].concat(e);var t=function(e){if(Bx(e))return[].concat(e);var t=new Zx(e);for(qx(t);t.index<t.max&&!t.err.length;)Kx(t);return t.err?t.err:t.segments}(e),n=0,r=0,i=0,a=0;return t.map((function(e){var t,o=e.slice(1).map(Number),s=e[0],u=s.toUpperCase();if("M"===s)return n=o[0],r=o[1],i=n,a=r,["M",n,r];if(s!==u)switch(u){case"A":t=[u,o[0],o[1],o[2],o[3],o[4],o[5]+n,o[6]+r];break;case"V":t=[u,o[0]+r];break;case"H":t=[u,o[0]+n];break;default:var l=o.map((function(e,t){return e+(t%2?r:n)}));t=[u].concat(l)}else t=[u].concat(o);var c=t.length;switch(u){case"Z":n=i,r=a;break;case"H":n=t[1];break;case"V":r=t[1];break;default:n=t[c-2],r=t[c-1],"M"===u&&(i=n,a=r)}return t}))}function Qx(e,t){var n=e[0],r=t.x1,i=t.y1,a=t.x2,o=t.y2,s=e.slice(1).map(Number),u=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),"H"===n)u=["L",e[1],i];else if("V"===n)u=["L",r,e[1]];else if("S"===n){var l=2*r-a,c=2*i-o;t.x1=l,t.y1=c,u=["C",l,c].concat(s)}else if("T"===n){var h=2*r-t.qx,d=2*i-t.qy;t.qx=h,t.qy=d,u=["Q",h,d].concat(s)}else if("Q"===n){var f=s[0],p=s[1];t.qx=f,t.qy=p}return u}function $x(e){if(Gx(e))return[].concat(e);for(var t=Jx(e),n=Px({},Hx),r=0;r<t.length;r+=1){t[r]=Qx(t[r],n);var i=t[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return t}function eE(e,t,n){var r=e[0],i=e[1];return[r+(t[0]-r)*n,i+(t[1]-i)*n]}function tE(e,t,n,r,i){var a=Sx([e,t],[n,r]),o={x:0,y:0};if("number"===typeof i)if(i<=0)o={x:e,y:t};else if(i>=a)o={x:n,y:r};else{var s=eE([e,t],[n,r],i/a);o={x:s[0],y:s[1]}}return{length:a,point:o,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function nE(e,t){var n=e.x,r=e.y,i=t.x,a=t.y,o=n*i+r*a,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2)));return(n*a-r*i<0?-1:1)*Math.acos(o/s)}function rE(e,t,n,r,i,a,o,s,u,l){var c=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,v=c(n),g=c(r),m=(i%360+360)%360*(p/180);if(e===s&&t===u)return{x:e,y:t};if(0===v||0===g)return tE(e,t,s,u,l).point;var y=(e-s)/2,b=(t-u)/2,x={x:d(m)*y+h(m)*b,y:-h(m)*y+d(m)*b},E=Math.pow(x.x,2)/Math.pow(v,2)+Math.pow(x.y,2)/Math.pow(g,2);E>1&&(v*=f(E),g*=f(E));var w=(Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2))/(Math.pow(v,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2)),k=(a!==o?1:-1)*f(w=w<0?0:w),S=k*(v*x.y/g),_=k*(-g*x.x/v),M=d(m)*S-h(m)*_+(e+s)/2,T=h(m)*S+d(m)*_+(t+u)/2,A={x:(x.x-S)/v,y:(x.y-_)/g},C=nE({x:1,y:0},A),P=nE(A,{x:(-x.x-S)/v,y:(-x.y-_)/g});!o&&P>0?P-=2*p:o&&P<0&&(P+=2*p);var R=C+(P%=2*p)*l,N=v*d(R),O=g*h(R);return{x:d(m)*N-h(m)*O+M,y:h(m)*N+d(m)*O+T}}function iE(e,t,n,r,i,a,o,s,u,l,c){var h,d=c.bbox,f=void 0===d||d,p=c.length,v=void 0===p||p,g=c.sampleSize,m=void 0===g?30:g,y="number"===typeof l,b=e,x=t,E=0,w=[b,x,E],k=[b,x],S={x:0,y:0},_=[{x:b,y:x}];y&&l<=0&&(S={x:b,y:x});for(var M=0;M<=m;M+=1){if(b=(h=rE(e,t,n,r,i,a,o,s,u,M/m)).x,x=h.y,f&&_.push({x:b,y:x}),v&&(E+=Sx(k,[b,x])),k=[b,x],y&&E>=l&&l>w[2]){var T=(E-l)/(E-w[2]);S={x:k[0]*(1-T)+w[0]*T,y:k[1]*(1-T)+w[1]*T}}w=[b,x,E]}return y&&l>=E&&(S={x:s,y:u}),{length:E,point:S,min:{x:Math.min.apply(null,_.map((function(e){return e.x}))),y:Math.min.apply(null,_.map((function(e){return e.y})))},max:{x:Math.max.apply(null,_.map((function(e){return e.x}))),y:Math.max.apply(null,_.map((function(e){return e.y})))}}}function aE(e,t,n,r,i,a,o,s,u){var l=1-u;return{x:Math.pow(l,3)*e+3*Math.pow(l,2)*u*n+3*l*Math.pow(u,2)*i+Math.pow(u,3)*o,y:Math.pow(l,3)*t+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*a+Math.pow(u,3)*s}}function oE(e,t,n,r,i,a,o,s,u,l){var c,h=l.bbox,d=void 0===h||h,f=l.length,p=void 0===f||f,v=l.sampleSize,g=void 0===v?10:v,m="number"===typeof u,y=e,b=t,x=0,E=[y,b,x],w=[y,b],k={x:0,y:0},S=[{x:y,y:b}];m&&u<=0&&(k={x:y,y:b});for(var _=0;_<=g;_+=1){if(y=(c=aE(e,t,n,r,i,a,o,s,_/g)).x,b=c.y,d&&S.push({x:y,y:b}),p&&(x+=Sx(w,[y,b])),w=[y,b],m&&x>=u&&u>E[2]){var M=(x-u)/(x-E[2]);k={x:w[0]*(1-M)+E[0]*M,y:w[1]*(1-M)+E[1]*M}}E=[y,b,x]}return m&&u>=x&&(k={x:o,y:s}),{length:x,point:k,min:{x:Math.min.apply(null,S.map((function(e){return e.x}))),y:Math.min.apply(null,S.map((function(e){return e.y})))},max:{x:Math.max.apply(null,S.map((function(e){return e.x}))),y:Math.max.apply(null,S.map((function(e){return e.y})))}}}function sE(e,t,n,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*e+2*s*o*n+Math.pow(o,2)*i,y:Math.pow(s,2)*t+2*s*o*r+Math.pow(o,2)*a}}function uE(e,t,n,r,i,a,o,s){var u,l=s.bbox,c=void 0===l||l,h=s.length,d=void 0===h||h,f=s.sampleSize,p=void 0===f?10:f,v="number"===typeof o,g=e,m=t,y=0,b=[g,m,y],x=[g,m],E={x:0,y:0},w=[{x:g,y:m}];v&&o<=0&&(E={x:g,y:m});for(var k=0;k<=p;k+=1){if(g=(u=sE(e,t,n,r,i,a,k/p)).x,m=u.y,c&&w.push({x:g,y:m}),d&&(y+=Sx(x,[g,m])),x=[g,m],v&&y>=o&&o>b[2]){var S=(y-o)/(y-b[2]);E={x:x[0]*(1-S)+b[0]*S,y:x[1]*(1-S)+b[1]*S}}b=[g,m,y]}return v&&o>=y&&(E={x:i,y:a}),{length:y,point:E,min:{x:Math.min.apply(null,w.map((function(e){return e.x}))),y:Math.min.apply(null,w.map((function(e){return e.y})))},max:{x:Math.max.apply(null,w.map((function(e){return e.x}))),y:Math.max.apply(null,w.map((function(e){return e.y})))}}}function lE(e,t,n){for(var r,i,a,o,s,u,l,c,h,d=$x(e),f="number"===typeof t,p=[],v=0,g=0,m=0,y=0,b=[],x=[],E=0,w={x:0,y:0},k=w,S=w,_=w,M=0,T=0,A=d.length;T<A;T+=1)p=(l="M"===(c=(h=d[T])[0]))?p:[v,g].concat(h.slice(1)),l?(k=w={x:m=h[1],y:y=h[2]},E=0,f&&t<.001&&(_=w)):"L"===c?(E=(r=tE(p[0],p[1],p[2],p[3],(t||0)-M)).length,w=r.min,k=r.max,S=r.point):"A"===c?(E=(i=iE(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(t||0)-M,n||{})).length,w=i.min,k=i.max,S=i.point):"C"===c?(E=(a=oE(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(t||0)-M,n||{})).length,w=a.min,k=a.max,S=a.point):"Q"===c?(E=(o=uE(p[0],p[1],p[2],p[3],p[4],p[5],(t||0)-M,n||{})).length,w=o.min,k=o.max,S=o.point):"Z"===c&&(E=(s=tE((p=[v,g,m,y])[0],p[1],p[2],p[3],(t||0)-M)).length,w=s.min,k=s.max,S=s.point),f&&M<t&&M+E>=t&&(_=S),x.push(k),b.push(w),M+=E,v=(u="Z"!==c?h.slice(-2):[m,y])[0],g=u[1];return f&&t>=M&&(_={x:v,y:g}),{length:M,point:_,min:{x:Math.min.apply(null,b.map((function(e){return e.x}))),y:Math.min.apply(null,b.map((function(e){return e.y})))},max:{x:Math.max.apply(null,x.map((function(e){return e.x}))),y:Math.max.apply(null,x.map((function(e){return e.y})))}}}function cE(e){return Array.isArray(e)}var hE=function(e){if(cE(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])};function dE(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],r=1;r<t;r++)n=Math.max(n,e[r]);return n}var fE=1e-5;function pE(e,t,n){return void 0===n&&(n=fE),e===t||Math.abs(e-t)<n}var vE=function(e,t){return(e%t+t)%t};function gE(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function mE(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function yE(e,t,n,r,i,a,o,s,u,l){var c,h,d,f,p,v=e,g=t,m=n,y=r,b=s,x=u,E=120*Math.PI/180,w=Math.PI/180*(+i||0),k=[];if(l)h=l[0],d=l[1],f=l[2],p=l[3];else{v=(c=mE(v,g,-w)).x,g=c.y;var S=(v-(b=(c=mE(b,x,-w)).x))/2,_=(g-(x=c.y))/2,M=S*S/(m*m)+_*_/(y*y);M>1&&(m*=M=Math.sqrt(M),y*=M);var T=m*m,A=y*y,C=(a===o?-1:1)*Math.sqrt(Math.abs((T*A-T*_*_-A*S*S)/(T*_*_+A*S*S)));f=C*m*_/y+(v+b)/2,p=C*-y*S/m+(g+x)/2,h=Math.asin(((g-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((x-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),h=v<f?Math.PI-h:h,d=b<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),o&&h>d&&(h-=2*Math.PI),!o&&d>h&&(d-=2*Math.PI)}var P=d-h;if(Math.abs(P)>E){var R=d,N=b,O=x;d=h+E*(o&&d>h?1:-1),k=yE(b=f+m*Math.cos(d),x=p+y*Math.sin(d),m,y,i,0,o,N,O,[d,R,f,p])}P=d-h;var L=Math.cos(h),D=Math.sin(h),I=Math.cos(d),F=Math.sin(d),U=Math.tan(P/4),B=4/3*m*U,z=4/3*y*U,G=[v,g],H=[v+B*D,g-z*L],j=[b+B*F,x-z*I],V=[b,x];if(H[0]=2*G[0]-H[0],H[1]=2*G[1]-H[1],l)return H.concat(j,V,k);for(var W=[],X=0,Y=(k=H.concat(j,V,k)).length;X<Y;X+=1)W[X]=X%2?mE(k[X-1],k[X],w).y:mE(k[X],k[X+1],w).x;return W}var bE=function(e,t,n,r){return Ix(Ix([],eE([e,t],[n,r],.5),!0),[n,r,n,r],!1)};function xE(e,t){var n,r=e[0],i=e.slice(1).map(Number),a=i[0],o=i[1],s=t.x1,u=t.y1,l=t.x,c=t.y;switch("TQ".includes(r)||(t.qx=null,t.qy=null),r){case"M":return t.x=a,t.y=o,e;case"A":return n=[s,u].concat(i),["C"].concat(yE(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return t.qx=a,t.qy=o,n=[s,u].concat(i),["C"].concat(function(e,t,n,r,i,a){var o=1/3,s=2/3;return[o*e+s*n,o*t+s*r,o*i+s*n,o*a+s*r,i,a]}(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat(bE(s,u,a,o));case"Z":return s===l&&u===c?["C",s,u,l,c,l,c]:["C"].concat(bE(s,u,l,c))}return e}function EE(e,t){if(void 0===t&&(t=!1),function(e){return Gx(e)&&e.every((function(e){var t=e[0];return"MC".includes(t)}))}(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r,i,a=$x(e),o=Px({},Hx),s=[],u="",l=a.length,c=[],h=0;h<l;h+=1){a[h]&&(u=a[h][0]),s[h]=u;var d=xE(a[h],o);a[h]=d,gE(a,s,h),l=a.length,"Z"===u&&c.push(h),i=(r=a[h]).length,o.x1=+r[i-2],o.y1=+r[i-1],o.x2=+r[i-4]||o.x1,o.y2=+r[i-3]||o.y1}return t?[a,c]:a}function wE(e){return e.map((function(e,t,n){var r=t&&n[t-1].slice(-2).concat(e.slice(1)),i=t?oE(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:e,ss:t?i?function(e,t){void 0===t&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),a=e.slice(6,8),o=eE(n,r,t),s=eE(r,i,t),u=eE(i,a,t),l=eE(o,s,t),c=eE(s,u,t),h=eE(l,c,t);return[["C"].concat(o,l,h),["C"].concat(c,u,a)]}(r):[e,e]:[e],l:i}}))}function kE(e,t,n){var r=wE(e),i=wE(t),a=r.length,o=i.length,s=r.filter((function(e){return e.l})).length,u=i.filter((function(e){return e.l})).length,l=r.filter((function(e){return e.l})).reduce((function(e,t){return e+t.l}),0)/s||0,c=i.filter((function(e){return e.l})).reduce((function(e,t){return e+t.l}),0)/u||0,h=n||Math.max(a,o),d=[l,c],f=[h-a,h-o],p=0,v=[r,i].map((function(e,t){return e.l===h?e.map((function(e){return e.s})):e.map((function(e,n){return p=n&&f[t]&&e.l>=d[t],f[t]-=p?1:0,p?e.ss:[e.s]})).flat()}));return v[0].length===v[1].length?v:kE(v[0],v[1],h)}function SE(e){return function(e){var t=0,n=0,r=0;return EE(e).map((function(e){var i;if("M"===e[0])return t=e[1],n=e[2],0;var a=e.slice(1),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],h=a[5];return r=function(e,t,n,r,i,a,o,s){return 3*((s-t)*(n+i)-(o-e)*(r+a)+r*(e-i)-n*(t-a)+s*(i+e/3)-o*(a+t/3))/20}(t,n,o,s,u,l,c,h),i=e.slice(-2),t=i[0],n=i[1],r})).reduce((function(e,t){return e+t}),0)}(e)>=0}function _E(e,t){var n=e.length-1,r=[],i=0,a=function(e){var t=e.length,n=t-1;return e.map((function(r,i){return e.map((function(r,a){var o,s=i+a;return 0===a||e[s]&&"M"===e[s][0]?(o=e[s],["M"].concat(o.slice(-2))):(s>=t&&(s-=n),e[s])}))}))}(e);return a.forEach((function(a,o){e.slice(1).forEach((function(r,a){i+=Sx(e[(o+a)%n].slice(-2),t[a%n].slice(-2))})),r[o]=i,i=0})),a[r.indexOf(Math.min.apply(null,r))]}var ME=function(e){return void 0===e},TE={}.toString,AE=function(e,t){return TE.call(e)==="[object "+t+"]"},CE=function(e){return AE(e,"Boolean")};function PE(e){return"function"===typeof e}var RE=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function NE(e,t,n,r){var i=Xn(S(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function OE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function LE(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function DE(){}var IE=.7,FE=1/IE,UE="\\s*([+-]?\\d+)\\s*",BE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GE=/^#([0-9a-f]{3,8})$/,HE=new RegExp("^rgb\\(".concat(UE,",").concat(UE,",").concat(UE,"\\)$")),jE=new RegExp("^rgb\\(".concat(zE,",").concat(zE,",").concat(zE,"\\)$")),VE=new RegExp("^rgba\\(".concat(UE,",").concat(UE,",").concat(UE,",").concat(BE,"\\)$")),WE=new RegExp("^rgba\\(".concat(zE,",").concat(zE,",").concat(zE,",").concat(BE,"\\)$")),XE=new RegExp("^hsl\\(".concat(BE,",").concat(zE,",").concat(zE,"\\)$")),YE=new RegExp("^hsla\\(".concat(BE,",").concat(zE,",").concat(zE,",").concat(BE,"\\)$")),qE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function KE(){return this.rgb().formatHex()}function ZE(){return this.rgb().formatRgb()}function JE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=GE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?QE(t):3===n?new ew(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?$E(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?$E(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=HE.exec(e))?new ew(t[1],t[2],t[3],1):(t=jE.exec(e))?new ew(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=VE.exec(e))?$E(t[1],t[2],t[3],t[4]):(t=WE.exec(e))?$E(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=XE.exec(e))?ow(t[1],t[2]/100,t[3]/100,1):(t=YE.exec(e))?ow(t[1],t[2]/100,t[3]/100,t[4]):qE.hasOwnProperty(e)?QE(qE[e]):"transparent"===e?new ew(NaN,NaN,NaN,0):null}function QE(e){return new ew(e>>16&255,e>>8&255,255&e,1)}function $E(e,t,n,r){return r<=0&&(e=t=n=NaN),new ew(e,t,n,r)}function ew(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tw(){return"#".concat(aw(this.r)).concat(aw(this.g)).concat(aw(this.b))}function nw(){var e=rw(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(iw(this.r),", ").concat(iw(this.g),", ").concat(iw(this.b)).concat(1===e?")":", ".concat(e,")"))}function rw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function iw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function aw(e){return((e=iw(e))<16?"0":"")+e.toString(16)}function ow(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new uw(e,t,n,r)}function sw(e){if(e instanceof uw)return new uw(e.h,e.s,e.l,e.opacity);if(e instanceof DE||(e=JE(e)),!e)return new uw;if(e instanceof uw)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new uw(o,s,u,e.opacity)}function uw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function lw(e){return(e=(e||0)%360)<0?e+360:e}function cw(e){return Math.max(0,Math.min(1,e||0))}function hw(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dw(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function fw(e,t){var n=Math.min.apply(Math,Ix([],Lx(e),!1)),r=Math.min.apply(Math,Ix([],Lx(t),!1));return{x:n,y:r,width:Math.max.apply(Math,Ix([],Lx(e),!1))-n,height:Math.max.apply(Math,Ix([],Lx(t),!1))-r}}function pw(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function vw(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}function gw(e,t,n,r,i,a,o){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),u=1/0,l=-1/0,c=[a,o],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;a<o?a<d&&d<o&&c.push(d):o<d&&d<a&&c.push(d)}for(h=0;h<c.length;h++){var f=pw(e,0,n,r,i,c[h]);f<u&&(u=f),f>l&&(l=f)}var p=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,m=[a,o];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(h=0;h<m.length;h++){var b=vw(0,t,n,r,i,m[h]);b<v&&(v=b),b>g&&(g=b)}return{x:u,y:v,width:l-u,height:g-v}}OE(DE,JE,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:KE,formatHex:KE,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return sw(this).formatHsl()},formatRgb:ZE,toString:ZE}),OE(ew,(function(e,t,n,r){return 1===arguments.length?((i=e)instanceof DE||(i=JE(i)),i?new ew((i=i.rgb()).r,i.g,i.b,i.opacity):new ew):new ew(e,t,n,null==r?1:r);var i}),LE(DE,{brighter:function(e){return e=null==e?FE:Math.pow(FE,e),new ew(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?IE:Math.pow(IE,e),new ew(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new ew(iw(this.r),iw(this.g),iw(this.b),rw(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tw,formatHex:tw,formatHex8:function(){return"#".concat(aw(this.r)).concat(aw(this.g)).concat(aw(this.b)).concat(aw(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:nw,toString:nw})),OE(uw,(function(e,t,n,r){return 1===arguments.length?sw(e):new uw(e,t,n,null==r?1:r)}),LE(DE,{brighter:function(e){return e=null==e?FE:Math.pow(FE,e),new uw(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?IE:Math.pow(IE,e),new uw(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ew(hw(e>=240?e-240:e+120,i,r),hw(e,i,r),hw(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new uw(lw(this.h),cw(this.s),cw(this.l),rw(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=rw(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(lw(this.h),", ").concat(100*cw(this.s),"%, ").concat(100*cw(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var mw=1e-4;function yw(e,t,n,r,i,a){var o=-1,s=1/0,u=[n,r],l=20;a&&a>200&&(l=a/10);for(var c=1/l,h=c/10,d=0;d<=l;d++){var f=d*c,p=[i.apply(void 0,Ix([],Lx(e.concat([f])),!1)),i.apply(void 0,Ix([],Lx(t.concat([f])),!1))];(y=dw(u[0],u[1],p[0],p[1]))<s&&(o=f,s=y)}if(0===o)return{x:e[0],y:t[0]};if(1===o){var v=e.length;return{x:e[v-1],y:t[v-1]}}s=1/0;for(d=0;d<32&&!(h<mw);d++){var g=o-h,m=o+h,y=(p=[i.apply(void 0,Ix([],Lx(e.concat([g])),!1)),i.apply(void 0,Ix([],Lx(t.concat([g])),!1))],dw(u[0],u[1],p[0],p[1]));if(g>=0&&y<s)o=g,s=y;else{var b=[i.apply(void 0,Ix([],Lx(e.concat([m])),!1)),i.apply(void 0,Ix([],Lx(t.concat([m])),!1))],x=dw(u[0],u[1],b[0],b[1]);m<=1&&x<s?(o=m,s=x):h*=.5}}return{x:i.apply(void 0,Ix([],Lx(e.concat([o])),!1)),y:i.apply(void 0,Ix([],Lx(t.concat([o])),!1))}}function bw(e,t,n,r){return dw(e,t,n,r)}function xw(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function Ew(e,t,n,r,i,a){var o=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(o,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var s=[-o[1],o[0]];!function(e,t){var n=t[0],r=t[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i}(s,s);var u=[i-e,a-t];return Math.abs(function(e,t){return e[0]*t[0]+e[1]*t[1]}(u,s))}function ww(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function kw(e,t,n,r){var i,a,o,s=-3*e+9*t-9*n+3*r,u=6*e-12*t+6*n,l=3*t-3*e,c=[];if(pE(s,0))pE(u,0)||(i=-l/u)>=0&&i<=1&&c.push(i);else{var h=u*u-4*s*l;pE(h,0)?c.push(-u/(2*s)):h>0&&(a=(-u-(o=Math.sqrt(h)))/(2*s),(i=(-u+o)/(2*s))>=0&&i<=1&&c.push(i),a>=0&&a<=1&&c.push(a))}return c}function Sw(e,t,n,r,i,a,o,s){for(var u=[e,o],l=[t,s],c=kw(e,n,i,o),h=kw(t,r,a,s),d=0;d<c.length;d++)u.push(ww(e,n,i,o,c[d]));for(d=0;d<h.length;d++)l.push(ww(t,r,a,s,h[d]));return fw(u,l)}function _w(e,t,n,r,i,a,o,s,u,l,c){var h=function(e,t,n,r,i,a,o,s,u,l,c){return yw([e,n,i,o],[t,r,a,s],u,l,ww,c)}(e,t,n,r,i,a,o,s,u,l,c);return dw(h.x,h.y,u,l)}function Mw(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=dw(r[0],r[1],i[0],i[1])}return t}function Tw(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Aw(e,t,n){var r=e+n-2*t;if(pE(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function Cw(e,t,n,r,i,a){var o=Aw(e,n,i)[0],s=Aw(t,r,a)[0],u=[e,i],l=[t,a];return void 0!==o&&u.push(Tw(e,n,i,o)),void 0!==s&&l.push(Tw(t,r,a,s)),fw(u,l)}function Pw(e,t,n,r,i,a,o,s){var u=function(e,t,n,r,i,a,o,s){return yw([e,n,i],[t,r,a],o,s,Tw)}(e,t,n,r,i,a,o,s);return dw(u.x,u.y,o,s)}function Rw(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;var Nw={exports:{}};Nw.exports=function(){function e(e,n,i,a,o){t(e,n,i||0,a||e.length-1,o||r)}function t(e,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(a,Math.floor(r+(s-u)*c/s+h)),o)}var d=e[r],f=i,p=a;for(n(e,i,r),o(e[a],d)>0&&n(e,i,a);f<p;){for(n(e,f,p),f++,p--;o(e[f],d)<0;)f++;for(;o(e[p],d)>0;)p--}0===o(e[i],d)?n(e,i,p):n(e,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t){return e<t?-1:e>t?1:0}var i=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function o(e,t){s(e,0,e.children.length,t,e)}function s(e,t,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=t;a<n;a++){var o=e.children[a];u(i,e.leaf?r(o):o)}return i}function u(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function p(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function v(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,a),o.push(n,s,s,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,n=[];if(!g(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;g(e,s)&&(t.leaf?n.push(o):v(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n},i.prototype.collides=function(e){var t=this.data;if(!g(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(g(e,a)){if(t.leaf||v(e,a))return!0;n.push(i)}}t=n.pop()}return!1},i.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=m([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var n,r,i,o=this.data,s=this.toBBox(e),u=[],l=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=l.pop(),i=!0),o.leaf){var c=a(e,o.children,t);if(-1!==c)return o.children.splice(c,1),u.push(o),this._condense(u),this}i||o.leaf||!v(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(u.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},i.prototype._build=function(e,t,n,r){var i,a=n-t+1,s=this._maxEntries;if(a<=s)return o(i=m(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=m([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));y(e,t,n,l,this.compareMinX);for(var c=t;c<=n;c+=l){var h=Math.min(c+l-1,n);y(e,c,h,u,this.compareMinY);for(var d=c;d<=h;d+=u){var f=Math.min(d+u-1,h);i.children.push(this._build(e,d,f,r-1))}}return o(i,this.toBBox),i},i.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var u=t.children[s],l=h(u),c=f(e,u)-l;c<a?(a=c,i=l<i?l:i,o=u):c===a&&l<i&&(i=l,o=u)}t=o||t.children[0]}return t},i.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),u(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},i.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,n){for(var r,i=1/0,a=1/0,o=t;o<=n-t;o++){var u=s(e,0,o,this.toBBox),l=s(e,o,n,this.toBBox),c=p(u,l),d=h(u)+h(l);c<i?(i=c,r=o,a=d<a?d:a):c===i&&d<a&&(a=d,r=o)}return r||n-t},i.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:l,i=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},i.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,a=s(e,0,t,i),o=s(e,n-t,n,i),l=d(a)+d(o),c=t;c<n-t;c++){var h=e.children[c];u(a,e.leaf?i(h):h),l+=d(a)}for(var f=n-t-1;f>=t;f--){var p=e.children[f];u(o,e.leaf?i(p):p),l+=d(o)}return l},i.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)u(t[r],e)},i.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},i}();var Ow=Nw.exports,Lw=function(e){return e.GROUP="g",e.FRAGMENT="fragment",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh",e}({}),Dw=function(e){return e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE",e}({}),Iw=function(){return p((function e(){v(this,e),this.plugins=[]}),[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach((function(t){var n=e.context.renderingPlugins.indexOf(t);n>=0&&e.context.renderingPlugins.splice(n,1)}))}}])}(),Fw=function(){return p((function e(t){v(this,e),this.clipSpaceNearZ=Dw.NEGATIVE_ONE,this.plugins=[],this.config=an({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},t)}),[{key:"registerPlugin",value:function(e){-1===this.plugins.findIndex((function(t){return t===e}))&&this.plugins.push(e)}},{key:"unregisterPlugin",value:function(e){var t=this.plugins.findIndex((function(t){return t===e}));t>-1&&this.plugins.splice(t,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(e){return this.plugins.find((function(t){return t.name===e}))}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(e){Object.assign(this.config,e)}}])}(),Uw=Jy,Bw=Ky,zw=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},Gw=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},Hw=eb,jw=sb,Vw=function(){function e(){v(this,e),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return p(e,[{key:"update",value:function(e,t){Bw(this.center,e),Bw(this.halfExtents,t),jw(this.min,this.center,this.halfExtents),Uw(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,t){Uw(this.center,t,e),Hw(this.center,this.center,.5),jw(this.halfExtents,t,e),Hw(this.halfExtents,this.halfExtents,.5),Bw(this.min,e),Bw(this.max,t)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){if(!e.isEmpty(t))if(e.isEmpty(this))this.setMinMax(t.getMin(),t.getMax());else{var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],u=o[1],l=o[2],c=r-s,h=r+s,d=i-u,f=i+u,p=a-l,v=a+l,g=t.center,m=g[0],y=g[1],b=g[2],x=t.halfExtents,E=x[0],w=x[1],k=x[2],S=m-E,_=m+E,M=y-w,T=y+w,A=b-k,C=b+k;S<c&&(c=S),_>h&&(h=_),M<d&&(d=M),T>f&&(f=T),A<p&&(p=A),C>v&&(v=C),n[0]=.5*(c+h),n[1]=.5*(d+f),n[2]=.5*(p+v),o[0]=.5*(h-c),o[1]=.5*(f-d),o[2]=.5*(v-p),this.min[0]=c,this.min[1]=d,this.min[2]=p,this.max[0]=h,this.max[1]=f,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(e,t){var n=this.center,r=this.halfExtents,i=e.center,a=e.halfExtents,o=t[0],s=t[4],u=t[8],l=t[1],c=t[5],h=t[9],d=t[2],f=t[6],p=t[10],v=Math.abs(o),g=Math.abs(s),m=Math.abs(u),y=Math.abs(l),b=Math.abs(c),x=Math.abs(h),E=Math.abs(d),w=Math.abs(f),k=Math.abs(p);n[0]=t[12]+o*i[0]+s*i[1]+u*i[2],n[1]=t[13]+l*i[0]+c*i[1]+h*i[2],n[2]=t[14]+d*i[0]+f*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+m*a[2],r[1]=y*a[0]+b*a[1]+x*a[2],r[2]=E*a[0]+w*a[1]+k*a[2],jw(this.min,n,r),Uw(this.max,n,r)}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2]}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new e,r=zw([0,0,0],this.getMin(),t.getMin()),i=Gw([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?Bw([0,0,0],this.min):272===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?Bw([0,0,0],this.max):272===e.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===e.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===e.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===e.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===e.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===e.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(e){return!e||0===e.halfExtents[0]&&0===e.halfExtents[1]&&0===e.halfExtents[2]}}])}(),Ww=function(){return p((function e(t,n){v(this,e),this.distance=t||0,this.normal=n||qy(0,1,0),this.updatePNVertexFlag()}),[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return nb(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/lb(this.normal);eb(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),a=i>=0&&i<=1;return a&&n&&ib(n,e,t,i),a}}])}(),Xw=function(e){return e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE",e}({}),Yw=function(){return p((function e(t){if(v(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new Ww)}),[{key:"extractFromVPMatrix",value:function(e){var t=x(e,16),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],v=t[13],g=t[14],m=t[15];Zy(this.planes[0].normal,a-n,l-o,f-c),this.planes[0].distance=m-p,Zy(this.planes[1].normal,a+n,l+o,f+c),this.planes[1].distance=m+p,Zy(this.planes[2].normal,a+r,l+s,f+h),this.planes[2].distance=m+v,Zy(this.planes[3].normal,a-r,l-s,f-h),this.planes[3].distance=m-v,Zy(this.planes[4].normal,a-i,l-u,f-d),this.planes[4].distance=m-g,Zy(this.planes[5].normal,a+i,l+u,f+d),this.planes[5].distance=m+g,this.planes.forEach((function(e){e.normalize(),e.updatePNVertexFlag()}))}}])}(),qw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.x=0,this.y=0,this.x=t,this.y=n}return p(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y}}])}(),Kw=function(){function e(t,n,r,i){v(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return p(e,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new e(t.x,t.y,t.width,t.height)}},{key:"applyTransform",value:function(t,n){var r=hb(t.x,t.y,0,1),i=hb(t.x+t.width,t.y,0,1),a=hb(t.x,t.y+t.height,0,1),o=hb(t.x+t.width,t.y+t.height,0,1),s=cb(),u=cb(),l=cb(),c=cb();db(s,r,n),db(u,i,n),db(l,a,n),db(c,o,n);var h=Math.min(s[0],u[0],l[0],c[0]),d=Math.min(s[1],u[1],l[1],c[1]),f=Math.max(s[0],u[0],l[0],c[0]),p=Math.max(s[1],u[1],l[1],c[1]);return e.fromRect({x:h,y:d,width:f-h,height:p-d})}}])}(),Zw="Method not implemented.",Jw="Use document.documentElement instead.";function Qw(e){return void 0===e?0:e>360||e<-360?e%360:e}var $w=Wy();function ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(e)&&3===e.length?r?Xy(e):Ky($w,e):kx(e)?r?qy(e,t,n):Zy($w,e,t,n):r?qy(e[0],e[1]||t,e[2]||n):Zy($w,e[0],e[1]||t,e[2]||n)}var tk=Math.PI/180;function nk(e){return e*tk}var rk=180/Math.PI;function ik(e){return e*rk}var ak=Math.PI/2;function ok(e,t){return 16===t.length?function(e,t){var n,r,i=x(Bb(Wy(),t),3),a=i[0],o=i[1],s=i[2],u=Math.asin(-t[2]/a);return u<ak?u>-ak?(n=Math.atan2(t[6]/o,t[10]/s),r=Math.atan2(t[1]/a,t[0]/a)):(r=0,n=-Math.atan2(t[4]/o,t[5]/o)):(r=0,n=Math.atan2(t[4]/o,t[5]/o)),e[0]=n,e[1]=u,e[2]=r,e}(e,t):function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=r*r,s=i*i,u=a*a,l=n*n+o+s+u,c=n*a-r*i;return c>.499995*l?(e[0]=ak,e[1]=2*Math.atan2(r,n),e[2]=0):c<-.499995*l?(e[0]=-ak,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-a*r)),e[1]=Math.atan2(2*(n*a+r*i),1-2*(s+u)),e[2]=Math.atan2(2*(n*r+i*a),1-2*(o+s))),e}(e,t)}function sk(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e);return function(e,t,n,r,i,a,o,s,u){var l=new Vy(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}(r*a,i*o,0,-r*o,i*a,0,t,n,1)}function uk(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i);if(t*i-n*r<0&&(t<i?a=-a:o=-o),a){var s=1/a;t*=s,n*=s}if(o){var u=1/o;r*=u,i*=u}var l=ik(Math.atan2(n,t));return[e[6],e[7],a,o,l]}var lk=fb(),ck=fb(),hk=cb(),dk=[Wy(),Wy(),Wy()],fk=Wy();function pk(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var vk=function(e){return e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING",e}({}),gk=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC",e}({}),mk=function(e){return e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE",e}({}),yk="updated",bk=2e-4,xk=function(){return p((function e(){v(this,e),this.clipSpaceNearZ=Dw.NEGATIVE_ONE,this.eventEmitter=new Hy,this.matrix=fb(),this.right=qy(1,0,0),this.up=qy(0,1,0),this.forward=qy(0,0,1),this.position=qy(0,0,1),this.focalPoint=qy(0,0,0),this.distanceVector=qy(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=fb(),this.projectionMatrixInverse=fb(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=vk.EXPLORING,this.trackingMode=gk.DEFAULT,this.projectionMode=mk.PERSPECTIVE,this.frustum=new Yw,this.orthoMatrix=fb()}),[{key:"isOrtho",value:function(){return this.projectionMode===mk.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e}},{key:"setType",value:function(e,t){return this.type=e,this.type===vk.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===vk.TRACKING&&void 0!==t&&this.setTrackingMode(t),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==vk.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this}},{key:"getViewTransform",value:function(){return xb(fb(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(e,t){var n=Pb(fb(),[e,t,0]);this.jitteredProjectionMatrix=kb(fb(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setNear",value:function(e){return this.projectionMode===mk.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this}},{key:"setFar",value:function(e){return this.projectionMode===mk.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===mk.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===mk.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===mk.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===mk.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(e,t){var n=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(e),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:t[0],y:t[1]}),s=qy(o.x-r,o.y-i,0),u=nb(s,this.right)/Yy(this.right),l=nb(s,this.up)/Yy(this.up),c=x(this.getPosition(),2),h=c[0],d=c[1],f=x(this.getFocalPoint(),2),p=f[0],v=f[1];return this.setPosition(h-u,d-l),this.setFocalPoint(p-u,v-l),this}},{key:"setPerspective",value:function(e,t,n,r){var i;this.projectionMode=mk.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r;var a=this.near*Math.tan(nk(.5*this.fov))/this.zoom,o=2*a,s=this.aspect*o,u=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var l=this.view.fullWidth,c=this.view.fullHeight;u+=this.view.offsetX*s/l,a-=this.view.offsetY*o/c,s*=this.view.width/l,o*=this.view.height/c}return function(e,t,n,r,i,a,o){var s,u,l=2*a,c=n-t,h=r-i,d=l/c,f=l/h,p=(n+t)/c,v=(r+i)/h,g=o-a,m=o*a;arguments.length>7&&void 0!==arguments[7]&&arguments[7]?(s=-o/g,u=-m/g):(s=-(o+a)/g,u=-2*m/g),e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=p,e[9]=v,e[10]=s,e[11]=-1,e[12]=0,e[13]=0,e[14]=u,e[15]=0}(this.projectionMatrix,u,u+s,a-o,a,e,this.far,this.clipSpaceNearZ===Dw.ZERO),xb(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(e,t,n,r,i,a){var o;this.projectionMode=mk.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=a;var s=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,h=l-s,d=l+s,f=c+u,p=c-u;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(h+=v*this.view.offsetX)+v*this.view.width,p=(f-=g*this.view.offsetY)-g*this.view.height}return this.clipSpaceNearZ===Dw.NEGATIVE_ONE?Zb(this.projectionMatrix,h,d,f,p,i,a):Jb(this.projectionMatrix,h,d,f,p,i,a),xb(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(e){var t=ek(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2]);return this._setPosition(t),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=qy(0,1,0);if(this.focalPoint=ek(e,t,n),this.trackingMode===gk.CINEMATIC){var i=Qy(Wy(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var a=Yy(i),o=ik(Math.asin(t/a)),s=90+ik(Math.atan2(n,e)),u=fb();Ab(u,u,nk(s)),Tb(u,u,nk(o)),r=ab(Wy(),[0,1,0],u)}return xb(this.matrix,Qb(fb(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<bk&&(this.distance=bk),this.dollyingStep=this.distance/100;var t=Wy();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"setAzimuth",value:function(e){return this.azimuth=Qw(e),this.computeMatrix(),this._getAxes(),this.type===vk.ORBITING||this.type===vk.EXPLORING?this._getPosition():this.type===vk.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Qw(e),this.computeMatrix(),this._getAxes(),this.type===vk.ORBITING||this.type===vk.EXPLORING?this._getPosition():this.type===vk.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(e){return this.roll=Qw(e),this.computeMatrix(),this._getAxes(),this.type===vk.ORBITING||this.type===vk.EXPLORING?this._getPosition():this.type===vk.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var e=dx(hx(),[0,0,1],nk(this.roll));yb(this.matrix);var t=dx(hx(),[1,0,0],nk((this.rotateWorld&&this.type!==vk.TRACKING||this.type===vk.TRACKING?1:-1)*this.elevation)),n=dx(hx(),[0,1,0],nk((this.rotateWorld&&this.type!==vk.TRACKING||this.type===vk.TRACKING?1:-1)*this.azimuth)),r=fx(hx(),n,t);r=fx(hx(),r,e);var i=jb(fb(),r);this.type===vk.ORBITING||this.type===vk.EXPLORING?(Sb(this.matrix,this.matrix,this.focalPoint),kb(this.matrix,this.matrix,i),Sb(this.matrix,this.matrix,[0,0,this.distance])):this.type===vk.TRACKING&&(Sb(this.matrix,this.matrix,this.position),kb(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(e,t,n){this.position=ek(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){Ky(this.right,ek(db(cb(),[1,0,0,0],this.matrix))),Ky(this.up,ek(db(cb(),[0,1,0,0],this.matrix))),Ky(this.forward,ek(db(cb(),[0,0,1,0],this.matrix))),tb(this.right,this.right),tb(this.up,this.up),tb(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=Yy(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===vk.TRACKING||this.rotateWorld?(this.elevation=ik(Math.asin(t/r)),this.azimuth=ik(Math.atan2(-e,-n))):(this.elevation=-ik(Math.asin(t/r)),this.azimuth=-ik(Math.atan2(-e,-n)))}},{key:"_getPosition",value:function(){Ky(this.position,ek(db(cb(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){!function(e,t,n){var r=t[0],i=t[1],a=t[2];e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8]}(this.distanceVector,[0,0,-this.distance],function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}(cx(),this.matrix)),Jy(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Qy(Wy(),this.focalPoint,this.position),this.distance=Yy(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===mk.ORTHOGRAPHIC){var e=this.position,t=dx(hx(),[0,0,1],-this.roll*Math.PI/180);Hb(this.orthoMatrix,t,qy((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),qy(this.zoom,this.zoom,1),e)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),t=kb(fb(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(yk)}}},{key:"rotate",value:function(e,t,n){throw new Error(Zw)}},{key:"pan",value:function(e,t){throw new Error(Zw)}},{key:"dolly",value:function(e){throw new Error(Zw)}},{key:"createLandmark",value:function(e,t){throw new Error(Zw)}},{key:"gotoLandmark",value:function(e,t){throw new Error(Zw)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(Zw)}}])}(),Ek=function(e){return e[e.Standard=0]="Standard",e}({}),wk=function(e){return e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",e}({}),kk={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Kw(0,0,0,0)},Sk=function(e){return e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>",e}({});function _k(e,t){if("function"!==typeof e||null!=t&&"function"!==typeof t)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var u=e.apply(this,i);return n.cache=s.set(o,u)||s,u};return n.cache=new(_k.Cache||Map),n}_k.Cache=Map;var Mk=function(e){return e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger",e}({}),Tk=function(e){return e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther",e}({}),Ak=function(e){return e[e.kYes=0]="kYes",e[e.kNo=1]="kNo",e}({}),Ck=function(e){return e[e.kYes=0]="kYes",e[e.kNo=1]="kNo",e}({}),Pk=[{name:"em",unit_type:Mk.kEms},{name:"px",unit_type:Mk.kPixels},{name:"deg",unit_type:Mk.kDegrees},{name:"rad",unit_type:Mk.kRadians},{name:"grad",unit_type:Mk.kGradians},{name:"ms",unit_type:Mk.kMilliseconds},{name:"s",unit_type:Mk.kSeconds},{name:"rem",unit_type:Mk.kRems},{name:"turn",unit_type:Mk.kTurns}],Rk=function(e){return e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType",e}({}),Nk=function(e){return e?"number"===e?Mk.kNumber:"percent"===e||"%"===e?Mk.kPercentage:function(e){return Pk.find((function(t){return t.name===e})).unit_type}(e):Mk.kUnknown},Ok=function(e){var t=1;switch(e){case Mk.kPixels:case Mk.kDegrees:case Mk.kSeconds:break;case Mk.kMilliseconds:t=.001;break;case Mk.kRadians:t=180/Math.PI;break;case Mk.kGradians:t=.9;break;case Mk.kTurns:t=360}return t},Lk=function(e){switch(e){case Mk.kNumber:case Mk.kInteger:return"";case Mk.kPercentage:return"%";case Mk.kEms:return"em";case Mk.kRems:return"rem";case Mk.kPixels:return"px";case Mk.kDegrees:return"deg";case Mk.kRadians:return"rad";case Mk.kGradians:return"grad";case Mk.kMilliseconds:return"ms";case Mk.kSeconds:return"s";case Mk.kTurns:return"turn"}return""},Dk=function(){return p((function e(){v(this,e)}),[{key:"toString",value:function(){return this.buildCSSText(Ak.kNo,Ck.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Rk.kUnitType&&this.getType()<=Rk.kClampType}}],[{key:"isAngle",value:function(e){return e===Mk.kDegrees||e===Mk.kRadians||e===Mk.kGradians||e===Mk.kTurns}},{key:"isLength",value:function(e){return e>=Mk.kEms&&e<Mk.kDegrees}},{key:"isRelativeUnit",value:function(e){return e===Mk.kPercentage||e===Mk.kEms||e===Mk.kRems}},{key:"isTime",value:function(e){return e===Mk.kSeconds||e===Mk.kMilliseconds}}])}(),Ik=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).colorSpace=e,n}return C(t,e),p(t,[{key:"getType",value:function(){return Rk.kColorType}},{key:"to",value:function(e){return this}}])}(Dk),Fk=function(e){return e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient",e}({}),Uk=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t)).type=e,r.value=n,r}return C(t,e),p(t,[{key:"clone",value:function(){return new t(this.type,this.value)}},{key:"buildCSSText",value:function(e,t,n){return n}},{key:"getType",value:function(){return Rk.kColorType}}])}(Dk),Bk=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).value=e,n}return C(t,e),p(t,[{key:"clone",value:function(){return new t(this.value)}},{key:"getType",value:function(){return Rk.kKeywordType}},{key:"buildCSSText",value:function(e,t,n){return n+this.value}}])}(Dk),zk=function(e){return function(e){switch(e){case Tk.kUNumber:return Mk.kNumber;case Tk.kULength:return Mk.kPixels;case Tk.kUPercent:return Mk.kPercentage;case Tk.kUTime:return Mk.kSeconds;case Tk.kUAngle:return Mk.kDegrees;default:return Mk.kUnknown}}(function(e){switch(e){case Mk.kNumber:case Mk.kInteger:return Tk.kUNumber;case Mk.kPercentage:return Tk.kUPercent;case Mk.kPixels:return Tk.kULength;case Mk.kMilliseconds:case Mk.kSeconds:return Tk.kUTime;case Mk.kDegrees:case Mk.kRadians:case Mk.kGradians:case Mk.kTurns:return Tk.kUAngle;default:return Tk.kUOther}}(e))},Gk=function(e){function t(e){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mk.kNumber;return v(this,t),n=T(this,t),r="string"===typeof i?Nk(i):i,n.unit=r,n.value=e,n}return C(t,e),p(t,[{key:"clone",value:function(){return new t(this.value,this.unit)}},{key:"equals",value:function(e){var t=e;return this.value===t.value&&this.unit===t.unit}},{key:"getType",value:function(){return Rk.kUnitType}},{key:"convertTo",value:function(e){if(this.unit===e)return new t(this.value,this.unit);var n=zk(this.unit);if(n!==zk(e)||n===Mk.kUnknown)return null;var r=Ok(this.unit)/Ok(e);return new t(this.value*r,e)}},{key:"buildCSSText",value:function(e,t,n){var r;switch(this.unit){case Mk.kUnknown:break;case Mk.kInteger:r=Number(this.value).toFixed(0);break;case Mk.kNumber:case Mk.kPercentage:case Mk.kEms:case Mk.kRems:case Mk.kPixels:case Mk.kDegrees:case Mk.kRadians:case Mk.kGradians:case Mk.kMilliseconds:case Mk.kSeconds:case Mk.kTurns:var i=this.value,a=Lk(this.unit);if(i<-999999||i>999999){var o=Lk(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(e)?"NaN":e>0?"infinity":"-infinity")+t}(i,o):i+(o||"")}else r="".concat(i).concat(a)}return n+=r}}])}(Dk),Hk=new Gk(0,"px");new Gk(1,"px");var jk=new Gk(0,"deg"),Vk=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return v(this,t),(i=T(this,t,["rgb"])).r=e,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i}return C(t,e),p(t,[{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(e,t,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(Ik),Wk=new Bk("unset"),Xk={"":Wk,unset:Wk,initial:new Bk("initial"),inherit:new Bk("inherit")},Yk=new Vk(0,0,0,0,!0),qk=new Vk(0,0,0,0),Kk=_k((function(e,t,n,r){return new Vk(e,t,n,r)}),(function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")})),Zk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mk.kNumber;return new Gk(e,t)};function Jk(e){var t=e.type,n=e.value;return"hex"===t?"#".concat(n):"literal"===t?n:"rgb"===t?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new Gk(50,"%");var Qk=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){throw new Error("".concat(t,": ").concat(e))}function r(){var e=f(i);return t.length>0&&n("Invalid input not EOF"),e}function i(){return a("linear-gradient",e.linearGradient,s)||a("repeating-linear-gradient",e.repeatingLinearGradient,s)||a("radial-gradient",e.radialGradient,u)||a("repeating-radial-gradient",e.repeatingRadialGradient,u)||a("conic-gradient",e.conicGradient,u)}function a(t,r,i){return o(r,(function(r){var a=i();return a&&(b(e.comma)||n("Missing comma before color stops")),{type:t,orientation:a,colorStops:f(p)}}))}function o(t,r){var i=b(t);if(i){b(e.startCall)||n("Missing (");var a=r(i);return b(e.endCall)||n("Missing )"),a}}function s(){return y("directional",e.sideOrCorner,1)||y("angular",e.angleValue,1)}function u(){var n,r,i=l();return i&&((n=[]).push(i),r=t,b(e.comma)&&((i=l())?n.push(i):t=r)),n}function l(){var e=function(){var e=y("shape",/^(circle)/i,0);e&&(e.style=m()||c());return e}()||function(){var e=y("shape",/^(ellipse)/i,0);e&&(e.style=g()||c());return e}();if(e)e.at=h();else{var t=c();if(t){e=t;var n=h();n&&(e.at=n)}else{var r=d();r&&(e={type:"default-radial",at:r})}}return e}function c(){return y("extent-keyword",e.extentKeywords,1)}function h(){if(y("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e}}function d(){var e={x:g(),y:g()};if(e.x||e.y)return{type:"position",value:e}}function f(t){var r=t(),i=[];if(r)for(i.push(r);b(e.comma);)(r=t())?i.push(r):n("One extra comma");return i}function p(){var t=y("hex",e.hexColor,1)||o(e.rgbaColor,(function(){return{type:"rgba",value:f(v)}}))||o(e.rgbColor,(function(){return{type:"rgb",value:f(v)}}))||y("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=g(),t}function v(){return b(e.number)[1]}function g(){return y("%",e.percentageValue,1)||y("position-keyword",e.positionKeywords,1)||m()}function m(){return y("px",e.pixelValue,1)||y("em",e.emValue,1)}function y(e,t,n){var r=b(t);if(r)return{type:e,value:r[n]}}function b(e){var n=/^[\n\r\t\s]+/.exec(t);n&&x(n[0].length);var r=e.exec(t);return r&&x(r[0].length),r}function x(e){t=t.substring(e)}return function(e){return t=e,r()}}();var $k=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,eS=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tS=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nS=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;var rS={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},iS=_k((function(e){var t;return t="angular"===e.type?Number(e.value):rS[e.value]||0,Zk(t,"deg")})),aS=_k((function(e){var t=50,n=50,r="%",i="%";if("position"===(null===e||void 0===e?void 0:e.type)){var a=e.value,o=a.x,s=a.y;"position-keyword"===(null===o||void 0===o?void 0:o.type)&&("left"===o.value?t=0:"center"===o.value?t=50:"right"===o.value?t=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),"position-keyword"===(null===s||void 0===s?void 0:s.type)&&("left"===s.value?t=0:"center"===s.value?n=50:"right"===s.value?t=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null===o||void 0===o?void 0:o.type)&&"%"!==(null===o||void 0===o?void 0:o.type)&&"em"!==(null===o||void 0===o?void 0:o.type)||(r=null===o||void 0===o?void 0:o.type,t=Number(o.value)),"px"!==(null===s||void 0===s?void 0:s.type)&&"%"!==(null===s||void 0===s?void 0:s.type)&&"em"!==(null===s||void 0===s?void 0:s.type)||(i=null===s||void 0===s?void 0:s.type,n=Number(s.value))}return{cx:Zk(t,r),cy:Zk(n,i)}})),oS=_k((function(e){if(e.indexOf("linear")>-1||e.indexOf("radial")>-1)return Qk(e).map((function(e){var t=e.type,n=e.orientation,r=e.colorStops;!function(e){var t,n,r=e.length;e[r-1].length=null!==(t=e[r-1].length)&&void 0!==t?t:{type:"%",value:"100"},r>1&&(e[0].length=null!==(n=e[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,a=Number(e[0].length.value),o=1;o<r;o++){var s,u=null===(s=e[o].length)||void 0===s?void 0:s.value;if(!_x(u)&&!_x(a)){for(var l=1;l<o-i;l++)e[i+l].length={type:"%",value:"".concat(a+(Number(u)-a)*l/(o-i))};i=o,a=Number(u)}}}(r);var i,a=r.map((function(e){return{offset:Zk(Number(e.length.value),"%"),color:Jk(e)}}));if("linear-gradient"===t)return new Uk(Fk.LinearGradient,{angle:n?iS(n):jk,steps:a});if("radial-gradient"===t&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o,s=aS(n[0].at),u=s.cx,l=s.cy;if(n[0].style){var c=n[0].style,h=c.type,d=c.value;"extent-keyword"===h?(Xk[i=d]||(Xk[i]=new Bk(i)),o=Xk[i]):o=Zk(d,h)}return new Uk(Fk.RadialGradient,{cx:u,cy:l,size:o,steps:a})}}));var t=e[0];if("("===e[1]||"("===e[2])if("l"===t){var n=$k.exec(e);if(n){var r,i=(null===(r=n[2].match(nS))||void 0===r?void 0:r.map((function(e){return e.split(":")})))||[];return[new Uk(Fk.LinearGradient,{angle:Zk(parseFloat(n[1]),"deg"),steps:i.map((function(e){var t=x(e,2),n=t[0],r=t[1];return{offset:Zk(100*Number(n),"%"),color:r}}))})]}}else if("r"===t){var a=function(e){var t=eS.exec(e);if(t){var n,r=(null===(n=t[4].match(nS))||void 0===n?void 0:n.map((function(e){return e.split(":")})))||[];return{cx:Zk(50,"%"),cy:Zk(50,"%"),steps:r.map((function(e){var t=x(e,2),n=t[0],r=t[1];return{offset:Zk(100*Number(n),"%"),color:r}}))}}return null}(e);if(a){if(!Mx(a))return[new Uk(Fk.RadialGradient,a)];e=a}}else if("p"===t)return function(e){var t=tS.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(e)}));function sS(e){return e&&!!e.image}function uS(e){return e&&!_x(e.r)&&!_x(e.g)&&!_x(e.b)}var lS=_k((function(e){if(sS(e))return an({repetition:"repeat"},e);if(_x(e)&&(e=""),"transparent"===e)return qk;if("currentColor"===e)e="black";else if("none"===e)return Yk;var t=oS(e);if(t)return t;var n=JE(e),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),Kk.apply(void 0,r)}));function cS(e,t){if(uS(e)&&uS(t))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var t=e.slice();if(t[3])for(var n=0;n<3;n++)t[n]=Math.round(Tx(t[n],0,255));return t[3]=Tx(t[3],0,1),"rgba(".concat(t.join(","),")")}]}function hS(e,t){if(_x(t))return Zk(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return Zk(Number(t),"px");if("deg".search(e)>=0)return Zk(Number(t),"deg")}var n=[];t=t.replace(e,(function(e){return n.push(e),"U".concat(e)}));var r="U(".concat(e.source,")");return n.map((function(e){return Zk(Number(t.replace(new RegExp("U".concat(e),"g"),"").replace(new RegExp(r,"g"),"*0")),e)}))[0]}var dS=function(e){return hS(new RegExp("px","g"),e)},fS=_k(dS);_k((function(e){return hS(new RegExp("%","g"),e)}));var pS=function(e){return kx(e)||isFinite(Number(e))?Zk(Number(e)||0,"px"):hS(new RegExp("px|%|em|rem","g"),e)},vS=_k(pS),gS=function(e){return hS(new RegExp("deg|rad|grad|turn","g"),e)},mS=_k(gS);function yS(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=e.value||0,s=t.value||0,u=zk(e.unit),l=e.convertTo(u),c=t.convertTo(u);return l&&c?(o=l.value,s=c.value,a=Lk(e.unit)):(Gk.isLength(e.unit)||Gk.isLength(t.unit))&&(o=ES(e,i,n),s=ES(t,i,n),a="px"),[o,s,function(e){return r&&(e=Math.max(e,0)),e+a}]}function bS(e){var t=0;return e.unit===Mk.kDegrees?t=e.value:e.unit===Mk.kRadians?t=ik(Number(e.value)):e.unit===Mk.kTurns?t=360*Number(e.value):e.value&&(t=e.value),t}function xS(e,t){var n;return Array.isArray(e)?n=e.map((function(e){return Number(e)})):Mx(e)?n=e.split(" ").map((function(e){return Number(e)})):kx(e)&&(n=[e]),2===t?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===t?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===t&&n.length%2===1?[].concat(I(n),I(n)):n}function ES(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.unit===Mk.kPixels)return Number(e.value);if(e.unit===Mk.kPercentage&&n){var i=n.nodeName===Lw.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var wS=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function kS(e){return e.toString()}var SS=function(e){return"number"===typeof e?Zk(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?Zk(Number(e)):Zk(0)},_S=_k(SS);function MS(e,t){return[e,t,kS]}function TS(e,t){return function(n,r){return[n,r,function(n){return kS(Tx(n,e,t))}]}}function AS(e,t){if(e.length===t.length)return[e,t,function(e){return e}]}function CS(e){var t;return 0===e.parsedStyle.d.totalLength&&(e.parsedStyle.d.totalLength=lE(e.parsedStyle.d.absolutePath,void 0,Px(Px({},t),{bbox:!1,length:!0})).length),e.parsedStyle.d.totalLength}function PS(e){return 0===e.parsedStyle.points.totalLength&&(e.parsedStyle.points.totalLength=Mw(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function RS(e,t){return e[0]===t[0]&&e[1]===t[1]}function NS(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||0===Math.sin(u)||pE(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(u/2-l)*(t/2*(1/Math.sin(u/2)))-t/2||0,yExtra:Math.cos(c-u/2)*(t/2*(1/Math.sin(u/2)))-t/2||0}}function OS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}_k((function(e){return Mx(e)?e.split(" ").map(_S):e.map(_S)}));var LS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r)},DS=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n);var u=nk(r=vE(r,360));if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var l=(e.x-o.x)/2,c=(e.y-o.y)/2,h={x:Math.cos(u)*l+Math.sin(u)*c,y:-Math.sin(u)*l+Math.cos(u)*c},d=Math.pow(h.x,2)/Math.pow(t,2)+Math.pow(h.y,2)/Math.pow(n,2);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var f=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2))/(Math.pow(t,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2));f=f<0?0:f;var p=(i!==a?1:-1)*Math.sqrt(f),v=p*(t*h.y/n),g=p*(-n*h.x/t),m={x:Math.cos(u)*v-Math.sin(u)*g+(e.x+o.x)/2,y:Math.sin(u)*v+Math.cos(u)*g+(e.y+o.y)/2},y={x:(h.x-v)/t,y:(h.y-g)/n},b=LS({x:1,y:0},y),x=LS(y,{x:(-h.x-v)/t,y:(-h.y-g)/n});!a&&x>0?x-=2*Math.PI:a&&x<0&&(x+=2*Math.PI);var E=b+(x%=2*Math.PI)*s,w=t*Math.cos(E),k=n*Math.sin(E);return{x:Math.cos(u)*w-Math.sin(u)*k+m.x,y:Math.sin(u)*w+Math.cos(u)*k+m.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+x,ellipticalArcAngle:E,ellipticalArcCenter:m,resultantRx:t,resultantRy:n}};function IS(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,u=r.xRotation,l=r.arcFlag,c=r.sweepFlag,h=DS({x:e.prePoint[0],y:e.prePoint[1]},a,s,u,!!l,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},t),d=DS({x:e.prePoint[0],y:e.prePoint[1]},a,s,u,!!l,!!c,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),f=d.x-h.x,p=d.y-h.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v}}function FS(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function US(e,t){return FS(e)*FS(t)?(e[0]*t[0]+e[1]*t[1])/(FS(e)*FS(t)):1}function BS(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(US(e,t))}function zS(e,t){var n=t[1],r=t[2],i=vE(nk(t[3]),2*Math.PI),a=t[4],o=t[5],s=e[0],u=e[1],l=t[6],c=t[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,m=n?v*-r*h/n:0,y=(s+l)/2+Math.cos(i)*g-Math.sin(i)*m,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(h-g)/n,(d-m)/r],E=[(-1*h-g)/n,(-1*d-m)/r],w=BS([1,0],x),k=BS(x,E);return US(x,E)<=-1&&(k=Math.PI),US(x,E)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),{cx:y,cy:b,rx:RS(e,[l,c])?0:n,ry:RS(e,[l,c])?0:r,startAngle:w,endAngle:w+k,xRotation:i,arcFlag:a,sweepFlag:o}}var GS=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=$x(e)}catch(d){t=$x(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}!function(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(o=[n[n.length-2],n[n.length-1]]),o&&RS(a,o)&&(e.splice(t,1),t--)}}}(t);var n=function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t}(t),r=function(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}(t),i=r.polygons,a=r.polylines,o=function(e){for(var t=[],n=null,r=null,i=null,a=0,o=e.length,s=0;s<o;s++){var u=e[s];r=e[s+1];var l=u[0],c={command:l,prePoint:n,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[u[1],u[2]],a=s;break;case"A":var h=zS(n,u);c.arcParams=h}if("Z"===l)n=i,r=e[a+1];else{var d=u.length;n=[u[d-2],u[d-1]]}r&&"Z"===r[0]&&(r=e[a],t[a]&&(t[a].prePoint=n)),c.currentPoint=n,t[a]&&RS(n,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===l){var v=[u[1],u[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===l){var g=t[s-1],m=OS(g.currentPoint,p);"Q"===g.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===l){var y=[u[1],u[2]],b=[u[3],u[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[b[0]-y[0],b[1]-y[1]])}else if("S"===l){var x=t[s-1],E=OS(x.currentPoint,p),w=[u[1],u[2]];"C"===x.command?(c.command="C",c.startTangent=[p[0]-E[0],p[1]-E[1]],c.endTangent=[n[0]-w[0],n[1]-w[1]]):(c.command="SQ",c.startTangent=[p[0]-w[0],p[1]-w[1]],c.endTangent=[n[0]-w[0],n[1]-w[1]])}else if("A"===l){var k=IS(c,0),S=k.x,_=k.y,M=IS(c,1,!1),T=M.x,A=M.y;c.startTangent=[S,_],c.endTangent=[T,A]}t.push(c)}return t}(t),s=function(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.currentPoint,u=o.params,l=o.prePoint,c=void 0;switch(o.command){case"Q":c=Cw(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=Sw(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=o.arcParams;c=gw(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:n.push(s[0]),r.push(s[1])}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===o.command||"M"===o.command)&&o.prePoint&&o.nextPoint&&i.push(o)}n=n.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0})),r=r.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}));var d=hE(n),f=hE(r),p=dE(n),v=dE(r);if(0===i.length)return{x:d,y:f,width:p-d,height:v-f};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint;y[0]===d?d-=NS(m,t).xExtra:y[0]===p&&(p+=NS(m,t).xExtra),y[1]===f?f-=NS(m,t).yExtra:y[1]===v&&(v+=NS(m,t).yExtra)}return{x:d,y:f,width:p-d,height:v-f}}(o,0),u=s.x,l=s.y,c=s.width,h=s.height;return{absolutePath:t,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(h)?h:0}}},HS=_k(GS);function jS(e){return Mx(e)?HS(e):GS(e)}function VS(e,t,n){var r=e.curve,i=t.curve;r&&0!==r.length||(r=EE(e.absolutePath,!1),e.curve=r),i&&0!==i.length||(i=EE(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=kE(r,i));var o=SE(a[0])!==SE(a[1])?function(e){var t=e.slice(1).map((function(t,n,r){return n?r[n-1].slice(-2).concat(t.slice(1)):e[0].slice(1).concat(t.slice(1))})).map((function(e){return e.map((function(t,n){return e[e.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map((function(e){return["C"].concat(e.slice(2))})))}(a[0]):a[0].map((function(e){return Array.isArray(e)?[].concat(e):e}));return[o,_E(a[1],o),function(e){return e}]}function WS(e,t){return[e.points,t.points,function(e){return e}]}var XS=null,YS=/\s*(\w+)\(([^)]*)\)/g;function qS(e){return function(t){var n=0;return e.map((function(e){return e===XS?t[n++]:e}))}}function KS(e){return e}var ZS={matrix:["NNNNNN",[XS,XS,0,0,XS,XS,0,0,0,0,1,0,XS,XS,0,1],KS],matrix3d:["NNNNNNNNNNNNNNNN",KS],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",qS([XS,XS,new Gk(1)]),KS],scaleX:["N",qS([XS,new Gk(1),new Gk(1)]),qS([XS,new Gk(1)])],scaleY:["N",qS([new Gk(1),XS,new Gk(1)]),qS([new Gk(1),XS])],scaleZ:["N",qS([new Gk(1),new Gk(1),XS])],scale3d:["NNN",KS],skew:["Aa",null,KS],skewX:["A",null,qS([XS,jk])],skewY:["A",null,qS([jk,XS])],translate:["Tt",qS([XS,XS,Hk]),KS],translateX:["T",qS([XS,Hk,Hk]),qS([XS,Hk])],translateY:["T",qS([Hk,XS,Hk]),qS([Hk,XS])],translateZ:["L",qS([Hk,Hk,XS])],translate3d:["TTL",KS]};function JS(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!ZS[a])return[];var s=o.map((function(e){return Zk(e)}));t.push({t:a,d:s})}return t}function QS(e){if(Array.isArray(e))return JS(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(YS.lastIndex=0;t=YS.exec(e);){if(t.index!==r)return[];r=t.index+t[0].length;var i=t[1],a=ZS[i];if(!a)return[];var o=t[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],l=0;l<s.length;l++){var c=o[l],h=s[l],d=void 0;if(void 0===(d=c?{A:function(e){return"0"===e.trim()?jk:mS(e)},N:_S,T:vS,L:fS}[h.toUpperCase()](c):{a:jk,n:u[0],t:Hk}[h]))return[];u.push(d)}if(n.push({t:i,d:u}),YS.lastIndex===e.length)return n}return[]}function $S(e){if(Array.isArray(e))return JS(e);if("none"===(e=(e||"none").trim()))return[];var t,n=[],r=0;for(YS.lastIndex=0;t=YS.exec(e);){if(t.index!==r)return[];r=t.index+t[0].length;var i=t[1],a=ZS[i];if(!a)return[];var o=t[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],l=0;l<s.length;l++){var c=o[l],h=s[l],d=void 0;if(void 0===(d=c?{A:function(e){return"0"===e.trim()?jk:gS(e)},N:SS,T:pS,L:dS}[h.toUpperCase()](c):{a:jk,n:u[0],t:Hk}[h]))return[];u.push(d)}if(n.push({t:i,d:u}),YS.lastIndex===e.length)return n}return[]}function e_(e){var t,n,r,i;switch(e.t){case"rotateX":return i=nk(bS(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=nk(bS(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=nk(bS(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=nk(bS(e.d[3]));var a=t*t+n*n+r*r;if(0===a)t=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);t/=o,n/=o,r/=o}var s=Math.sin(i/2),u=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(t*n*l+r*u),2*(t*r*l-n*u),0,2*(t*n*l-r*u),1-2*(t*t+r*r)*l,2*(n*r*l+t*u),0,2*(t*r*l+n*u),2*(n*r*l-t*u),1-2*(t*t+n*n)*l,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var c=nk(bS(e.d[0])),h=nk(bS(e.d[1]));return[1,Math.tan(h),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=nk(bS(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=nk(bS(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,t=ES(e.d[0],0,null)||0,n=ES(e.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,t=ES(e.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=ES(e.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=ES(e.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,t=ES(e.d[0],0,null)||0,n=ES(e.d[1],0,null)||0,r=ES(e.d[2],0,null)||0,1];case"perspective":var d=ES(e.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map((function(e){return e.value}))}}function t_(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function n_(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return function(e,t,n,r,i,a){if(!function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}(lk,e))return!1;if(vb(ck,lk),ck[3]=0,ck[7]=0,ck[11]=0,ck[15]=1,Math.abs(wb(ck))<1e-8)return!1;var o,s,u=lk[3],l=lk[7],c=lk[11],h=lk[12],d=lk[13],f=lk[14],p=lk[15];if(0!==u||0!==l||0!==c){if(hk[0]=u,hk[1]=l,hk[2]=c,hk[3]=p,!xb(ck,ck))return!1;bb(ck,ck),db(i,hk,ck)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=h,t[1]=d,t[2]=f,s=lk,(o=dk)[0][0]=s[0],o[0][1]=s[1],o[0][2]=s[2],o[1][0]=s[4],o[1][1]=s[5],o[1][2]=s[6],o[2][0]=s[8],o[2][1]=s[9],o[2][2]=s[10],n[0]=Yy(dk[0]),tb(dk[0],dk[0]),r[0]=nb(dk[0],dk[1]),pk(dk[1],dk[1],dk[0],1,-r[0]),n[1]=Yy(dk[1]),tb(dk[1],dk[1]),r[0]/=n[1],r[1]=nb(dk[0],dk[2]),pk(dk[2],dk[2],dk[0],1,-r[1]),r[2]=nb(dk[1],dk[2]),pk(dk[2],dk[2],dk[1],1,-r[2]),n[2]=Yy(dk[2]),tb(dk[2],dk[2]),r[1]/=n[2],r[2]/=n[2],rb(fk,dk[1],dk[2]),nb(dk[0],fk)<0)for(var v=0;v<3;v++)n[v]*=-1,dk[v][0]*=-1,dk[v][1]*=-1,dk[v][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+dk[0][0]-dk[1][1]-dk[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-dk[0][0]+dk[1][1]-dk[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-dk[0][0]-dk[1][1]+dk[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+dk[0][0]+dk[1][1]+dk[2][2],0)),dk[2][1]>dk[1][2]&&(a[0]=-a[0]),dk[0][2]>dk[2][0]&&(a[1]=-a[1]),dk[1][0]>dk[0][1]&&(a[2]=-a[2])}(function(e){return 0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(e_).reduce(t_)}(e),t,n,r,i,a),[[t,n,r,a,i]]}var r_=function(){function e(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=t[r][a]*e[a][i];return n}return function(t,n,r,i,a){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)o[s][3]=a[s];for(var u=0;u<3;u++)for(var l=0;l<3;l++)o[3][u]+=t[l]*o[l][u];var c=i[0],h=i[1],d=i[2],f=i[3],p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[0][0]=1-2*(h*h+d*d),p[0][1]=2*(c*h-d*f),p[0][2]=2*(c*d+h*f),p[1][0]=2*(c*h+d*f),p[1][1]=1-2*(c*c+d*d),p[1][2]=2*(h*d-c*f),p[2][0]=2*(c*d-h*f),p[2][1]=2*(h*d+c*f),p[2][2]=1-2*(c*c+h*h),o=e(o,p);var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],o=e(o,v)),r[1]&&(v[2][1]=0,v[2][0]=r[0],o=e(o,v)),r[0]&&(v[2][0]=0,v[1][0]=r[0],o=e(o,v));for(var g=0;g<3;g++)for(var m=0;m<3;m++)o[g][m]*=n[g];return function(e){return 0===e[0][2]&&0===e[0][3]&&0===e[1][2]&&0===e[1][3]&&0===e[2][0]&&0===e[2][1]&&1===e[2][2]&&0===e[2][3]&&0===e[3][2]&&1===e[3][3]}(o)?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])}}();function i_(e){return e.toFixed(6).replace(".000000","")}function a_(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=n_(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=n_(t)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(e){var t=function(e,t,n){var r=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}(e,t);r=Tx(r,-1,1);var i=[];if(1===r)i=e;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*a)-r*o)+t[s]*o);return i}(n[0][3],r[0][3],e[5]);return r_(e[0],e[1],e[2],t,e[4]).map(i_).join(",")}])}function o_(e){return e.replace(/[XY]/,"")}function s_(e){return e.replace(/(X|Y|Z|3d)?$/,"3d")}function u_(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(){var n=e[a],r=n.t,i=n.d,o="scale"===r.substring(0,5)?1:0;t.push({t:r,d:i.map((function(e){return"number"===typeof e?Zk(o):Zk(o,e.unit)}))})},a=0;a<e.length;a++)i()}var o,s,u=[],l=[],c=[];if(e.length!==t.length){var h=a_(e,t);u=[h[0]],l=[h[1]],c=[["matrix",[h[2]]]]}else for(var d=0;d<e.length;d++){var f=e[d].t,p=t[d].t,v=e[d].d,g=t[d].d,m=ZS[f],y=ZS[p],b=void 0;if(s=p,"perspective"===(o=f)&&"perspective"===s||!("matrix"!==o&&"matrix3d"!==o||"matrix"!==s&&"matrix3d"!==s)){var x=a_([e[d]],[t[d]]);u.push(x[0]),l.push(x[1]),c.push(["matrix",[x[2]]])}else{if(f===p)b=f;else if(m[2]&&y[2]&&o_(f)===o_(p))b=o_(f),v=m[2](v),g=y[2](g);else{if(!m[1]||!y[1]||s_(f)!==s_(p)){var E=a_(e,t);u=[E[0]],l=[E[1]],c=[["matrix",[E[2]]]];break}b=s_(f),v=m[1](v),g=y[1](g)}for(var w=[],k=[],S=[],_=0;_<v.length;_++){var M=yS(v[_],g[_],n,!1,_);w[_]=M[0],k[_]=M[1],S.push(M[2])}u.push(w),l.push(k),c.push([b,S])}}if(r){var T=u;u=l,l=T}return[u,l,function(e){return e.map((function(e,t){var n=e.map((function(e,n){return c[t][1][n](e)})).join(",");return"matrix"===c[t][0]&&16===n.split(",").length&&(c[t][0]="matrix3d"),"matrix3d"===c[t][0]&&6===n.split(",").length&&(c[t][0]="matrix"),"".concat(c[t][0],"(").concat(n,")")})).join(" ")}]}var l_=_k((function(e){if(Mx(e)){if("text-anchor"===e)return[Zk(0,"px"),Zk(0,"px")];var t=e.split(" ");return 1===t.length&&("top"===t[0]||"bottom"===t[0]?(t[1]=t[0],t[0]="center"):t[1]="center"),2!==t.length?null:[vS(c_(t[0])),vS(c_(t[1]))]}return[Zk(e[0]||0,"px"),Zk(e[1]||0,"px")]}));function c_(e){return"center"===e?"50%":"left"===e||"top"===e?"0%":"right"===e||"bottom"===e?"100%":e}var h_=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Sk.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Sk.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Sk.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Sk.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Sk.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Sk.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Sk.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Sk.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Sk.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Sk.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Sk.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Sk.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Sk.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Sk.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Sk.FILTER},{n:"clipPath",syntax:Sk.DEFINED_PATH},{n:"textPath",syntax:Sk.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Sk.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Sk.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Sk.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Sk.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Sk.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Sk.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Sk.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Sk.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Sk.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Sk.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Sk.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Sk.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Sk.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Sk.NUMBER,d:function(e){return e===Lw.PATH||e===Lw.POLYGON||e===Lw.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Sk.MARKER},{n:"markerEnd",syntax:Sk.MARKER},{n:"markerMid",syntax:Sk.MARKER},{n:"markerStartOffset",syntax:Sk.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Sk.LENGTH,l:!0,int:!0,d:"0"}],d_=new Set(h_.filter((function(e){return!!e.l})).map((function(e){return e.n}))),f_={},p_=function(){return p((function e(t){var n=this;v(this,e),this.runtime=t,h_.forEach((function(e){n.registerMetadata(e)}))}),[{key:"registerMetadata",value:function(e){[e.n].concat(I(e.a||[])).forEach((function(t){f_[t]=e}))}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e]}},{key:"processProperties",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(e.attributes,t);var r=e.parsedStyle.clipPath,i=e.parsedStyle.offsetPath;!function(e,t){var n=v_(e);for(var r in t)n.has(r)&&(e.parsedStyle[r]=t[r])}(e,t);var a=!!n.forceUpdateGeometry;if(!a)for(var o in t)if(d_.has(o)){a=!0;break}var s=v_(e);s.has("fill")&&t.fill&&(e.parsedStyle.fill=lS(t.fill)),s.has("stroke")&&t.stroke&&(e.parsedStyle.stroke=lS(t.stroke)),s.has("shadowColor")&&t.shadowColor&&(e.parsedStyle.shadowColor=lS(t.shadowColor)),s.has("filter")&&t.filter&&(e.parsedStyle.filter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(e=e.toLowerCase().trim()))return[];for(var t,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;t=n.exec(e);){if(t.index!==i)return[];if(i=t.index+t[0].length,wS.indexOf(t[1])>-1&&r.push({name:t[1],params:t[2].split(" ").map((function(e){return hS(/deg|rad|grad|turn|px|%/g,e)||lS(e)}))}),n.lastIndex===e.length)return r}return[]}(t.filter)),s.has("radius")&&!_x(t.radius)&&(e.parsedStyle.radius=xS(t.radius,4)),s.has("lineDash")&&!_x(t.lineDash)&&(e.parsedStyle.lineDash=xS(t.lineDash,"even")),s.has("points")&&t.points&&(e.parsedStyle.points=function(e,t){var n;return n=Mx(e)?e.split(" ").map((function(e){var t=x(e.split(","),2),n=t[0],r=t[1];return[Number(n),Number(r)]})):e,{points:n,totalLength:0,segments:[]}}(t.points)),s.has("d")&&""===t.d&&(e.parsedStyle.d=an({},kk)),s.has("d")&&t.d&&(e.parsedStyle.d=jS(t.d)),s.has("textTransform")&&t.textTransform&&this.runtime.CSSPropertySyntaxFactory[Sk.TEXT_TRANSFORM].calculator(null,null,{value:t.textTransform},e,null),s.has("clipPath")&&!ME(t.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Sk.DEFINED_PATH].calculator("clipPath",r,t.clipPath,e,this.runtime),s.has("offsetPath")&&t.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Sk.DEFINED_PATH].calculator("offsetPath",i,t.offsetPath,e,this.runtime),s.has("transform")&&t.transform&&(e.parsedStyle.transform=QS(t.transform)),s.has("transformOrigin")&&t.transformOrigin&&(e.parsedStyle.transformOrigin=l_(t.transformOrigin)),s.has("markerStart")&&t.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Sk.MARKER].calculator(null,t.markerStart,t.markerStart,null,null)),s.has("markerEnd")&&t.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Sk.MARKER].calculator(null,t.markerEnd,t.markerEnd,null,null)),s.has("markerMid")&&t.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Sk.MARKER].calculator("",t.markerMid,t.markerMid,null,null)),s.has("zIndex")&&!_x(t.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Sk.Z_INDEX].postProcessor(e),s.has("offsetDistance")&&!_x(t.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Sk.OFFSET_DISTANCE].postProcessor(e),s.has("transform")&&t.transform&&this.runtime.CSSPropertySyntaxFactory[Sk.TRANSFORM].postProcessor(e),s.has("transformOrigin")&&t.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Sk.TRANSFORM_ORIGIN].postProcessor(e),a&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},{key:"updateGeometry",value:function(e){var t=e.nodeName,n=this.runtime.geometryUpdaterFactory[t];if(n){var r=e.geometry;r.contentBounds||(r.contentBounds=new Vw),r.renderBounds||(r.renderBounds=new Vw);var i=e.parsedStyle,a=n.update(i,e),o=a.cx,s=void 0===o?0:o,u=a.cy,l=void 0===u?0:u,c=a.cz,h=void 0===c?0:c,d=a.hwidth,f=void 0===d?0:d,p=a.hheight,v=void 0===p?0:p,g=a.hdepth,m=void 0===g?0:g,y=[Math.abs(f),Math.abs(v),m],b=i.stroke,x=i.lineWidth,E=void 0===x?1:x,w=i.increasedLineWidthForHitTesting,k=void 0===w?0:w,S=i.shadowType,_=void 0===S?"outer":S,M=i.shadowColor,T=i.filter,A=void 0===T?[]:T,C=i.transformOrigin,P=[s,l,h];r.contentBounds.update(P,y);var R=t===Lw.POLYLINE||t===Lw.POLYGON||t===Lw.PATH?Math.SQRT2:.5;if(b&&!b.isNone){var N=((E||0)+(k||0))*R;y[0]+=N,y[1]+=N}if(r.renderBounds.update(P,y),M&&_&&"inner"!==_){var O=r.renderBounds,L=O.min,D=O.max,I=i.shadowBlur||0,F=i.shadowOffsetX||0,U=i.shadowOffsetY||0,B=L[0]-I+F,z=D[0]+I+F,G=L[1]-I+U,H=D[1]+I+U;L[0]=Math.min(L[0],B),D[0]=Math.max(D[0],z),L[1]=Math.min(L[1],G),D[1]=Math.max(D[1],H),r.renderBounds.setMinMax(L,D)}A.forEach((function(e){var t=e.name,n=e.params;if("blur"===t){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,Jy(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===t){var a=n[0].value,o=n[1].value,s=n[2].value,u=r.renderBounds,l=u.min,c=u.max,h=l[0]-s+a,d=c[0]+s+a,f=l[1]-s+o,p=c[1]+s+o;l[0]=Math.min(l[0],h),c[0]=Math.max(c[0],d),l[1]=Math.min(l[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(l,c)}})),e.geometry.dirty=!1;var j=v<0,V=(f<0?-1:1)*(C?ES(C[0],0,e,!0):0),W=(j?-1:1)*(C?ES(C[1],1,e,!0):0);(V||W)&&e.setOrigin(V,W)}}},{key:"updateSizeAttenuation",value:function(e,t){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/t,e.nodeName===Lw.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/t)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===Lw.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))}}])}();function v_(e){return e.constructor.PARSED_STYLE_LIST}var g_=function(){return p((function e(){v(this,e),this.mixer=MS}),[{key:"calculator",value:function(e,t,n,r){return bS(n)}}])}(),m_=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n,r,i){return n instanceof Bk&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(e,t,n,r),"clipPath"===e&&r.forEach((function(e){0===e.childNodes.length&&i.sceneGraphService.dirtifyToRoot(e)})),n}}])}(),y_=function(){return p((function e(){v(this,e),this.parser=lS,this.mixer=cS}),[{key:"calculator",value:function(e,t,n,r){return n instanceof Bk?"none"===n.value?Yk:qk:n}}])}(),b_=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n){return n instanceof Bk?[]:n}}])}();function x_(e){var t=e.parsedStyle.fontSize;return _x(t)?null:t}var E_=function(){return p((function e(){v(this,e),this.mixer=MS}),[{key:"calculator",value:function(e,t,n,r,i){if(kx(n))return n;if(!Gk.isRelativeUnit(n.unit))return n.value;if(n.unit===Mk.kPercentage)return 0;if(n.unit===Mk.kEms){if(r.parentNode){var a=x_(r.parentNode);if(a)return a*=n.value}return 0}if(n.unit===Mk.kRems){var o;if(null!==r&&void 0!==r&&null!==(o=r.ownerDocument)&&void 0!==o&&o.documentElement){var s=x_(r.ownerDocument.documentElement);if(s)return s*=n.value}return 0}}}])}(),w_=function(){return p((function e(){v(this,e),this.mixer=AS}),[{key:"calculator",value:function(e,t,n){return n.map((function(e){return e.value}))}}])}(),k_=function(){return p((function e(){v(this,e),this.mixer=AS}),[{key:"calculator",value:function(e,t,n){return n.map((function(e){return e.value}))}}])}(),S_=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n,r){var i;n instanceof Bk&&(n=null);var a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a}}])}(),__=function(){return p((function e(){v(this,e),this.mixer=MS}),[{key:"calculator",value:function(e,t,n){return n.value}}])}(),M_=function(){return p((function e(){v(this,e),this.mixer=TS(0,1)}),[{key:"calculator",value:function(e,t,n){return n.value}},{key:"postProcessor",value:function(e){var t=e.parsedStyle,n=t.offsetPath,r=t.offsetDistance;if(n){var i=n.nodeName;if(i===Lw.LINE||i===Lw.PATH||i===Lw.POLYLINE){var a=n.getPoint(r);a&&e.setLocalPosition(a.x,a.y)}}}}])}(),T_=function(){return p((function e(){v(this,e),this.mixer=TS(0,1)}),[{key:"calculator",value:function(e,t,n){return n.value}}])}(),A_=function(){return p((function e(){v(this,e),this.parser=jS,this.mixer=VS}),[{key:"calculator",value:function(e,t,n){return n instanceof Bk&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Kw(0,0,0,0)}:n}}])}(),C_=p((function e(){v(this,e),this.mixer=WS})),P_=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).mixer=TS(0,1/0),e}return C(t,e),p(t)}(E_),R_=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n,r){return n instanceof Bk?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||""}}])}(),N_=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a}return n.value}}])}(),O_=new WeakMap;var L_="undefined"!==typeof window&&"undefined"!==typeof window.document;function D_(e){return!!e.getAttribute}function I_(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t)}}return n-r}function F_(e){var t=e;do{var n;if(null===(n=t.parsedStyle)||void 0===n?void 0:n.clipPath)return t;t=t.parentElement}while(null!==t);return null}function U_(e,t){if(L_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}var B_={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},z_="object"===typeof performance&&performance.now?performance:Date;function G_(e){return e.nodeName===Lw.FRAGMENT||e.getRootNode().nodeName===Lw.FRAGMENT}function H_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!t&&!t.isNone,o=!!n&&!n.isNone;return"visiblepainted"===e||"painted"===e||"auto"===e?(r=a,i=o):"visiblefill"===e||"fill"===e?r=!0:"visiblestroke"===e||"stroke"===e?i=!0:"visible"!==e&&"all"!==e||(r=!0,i=!0),[r,i]}var j_=1,V_="object"===typeof self&&self.self===self?self:"object"===typeof n.g&&n.g.global===n.g?n.g:{},W_=Date.now(),X_={},Y_=Date.now(),q_=function(e){if("function"!==typeof e)throw new TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-Y_,r=n>16?0:16-n,i=j_++;return X_[i]=e,Object.keys(X_).length>1||setTimeout((function(){Y_=t;var e=X_;X_={},Object.keys(e).forEach((function(t){return e[t](V_.performance&&"function"===typeof V_.performance.now?V_.performance.now():Date.now()-W_)}))}),r),i},K_=function(e){delete X_[e]},Z_=function(e){return"string"!==typeof e?q_:""===e?V_.requestAnimationFrame:V_["".concat(e,"RequestAnimationFrame")]},J_=function(e,t){for(var n=0;void 0!==e[n];){if(t(e[n]))return e[n];n+=1}}(["","webkit","moz","ms","o"],(function(e){return!!Z_(e)})),Q_=Z_(J_),$_=function(e){return"string"!==typeof e?K_:""===e?V_.cancelAnimationFrame:V_["".concat(e,"CancelAnimationFrame")]||V_["".concat(e,"CancelRequestAnimationFrame")]}(J_);V_.requestAnimationFrame=Q_,V_.cancelAnimationFrame=$_;var eM=function(){return p((function e(){v(this,e),this.callbacks=[]}),[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(e,t){this.callbacks.push(t)}},{key:"promise",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map((function(e){return e.apply(void 0,t)})))}}])}(),tM=function(){return p((function e(){v(this,e),this.callbacks=[]}),[{key:"tapPromise",value:function(e,t){this.callbacks.push(t)}},{key:"promise",value:function(){var e=c(u().mark((function e(){var t,n,r,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callbacks.length){e.next=14;break}return e.next=3,(t=this.callbacks)[0].apply(t,a);case 3:n=e.sent,r=0;case 5:if(!(r<this.callbacks.length-1)){e.next=13;break}return i=this.callbacks[r],e.next=9,i(n);case 9:n=e.sent;case 10:r++,e.next=5;break;case 13:return e.abrupt("return",n);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}(),nM=function(){return p((function e(){v(this,e),this.callbacks=[]}),[{key:"tap",value:function(e,t){this.callbacks.push(t)}},{key:"call",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=arguments;this.callbacks.forEach((function(e){e.apply(void 0,r)}))}}])}(),rM=function(){return p((function e(){v(this,e),this.callbacks=[]}),[{key:"tap",value:function(e,t){this.callbacks.push(t)}},{key:"call",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=0;a<this.callbacks.length-1;a++){i=(0,this.callbacks[a])(i)}return i}return null}}])}(),iM=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],aM=/([\"\'])[^\'\"]+\1/;function oM(e,t,n){return yb(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var sM=fb(),uM=fb(),lM={scale:function(e){Rb(sM,[e[0].value,e[1].value,1])},scaleX:function(e){Rb(sM,[e[0].value,1,1])},scaleY:function(e){Rb(sM,[1,e[0].value,1])},scaleZ:function(e){Rb(sM,[1,1,e[0].value])},scale3d:function(e){Rb(sM,[e[0].value,e[1].value,e[2].value])},translate:function(e){Pb(sM,[e[0].value,e[1].value,0])},translateX:function(e){Pb(sM,[e[0].value,0,0])},translateY:function(e){Pb(sM,[0,e[0].value,0])},translateZ:function(e){Pb(sM,[0,0,e[0].value])},translate3d:function(e){Pb(sM,[e[0].value,e[1].value,e[2].value])},rotate:function(e){Db(sM,nk(bS(e[0])))},rotateX:function(e){Ob(sM,nk(bS(e[0])))},rotateY:function(e){Lb(sM,nk(bS(e[0])))},rotateZ:function(e){Db(sM,nk(bS(e[0])))},rotate3d:function(e){Nb(sM,nk(bS(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){oM(sM,nk(e[0].value),nk(e[1].value))},skewX:function(e){oM(sM,nk(e[0].value),0)},skewY:function(e){oM(sM,0,nk(e[0].value))},matrix:function(e){mb(sM,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){mb.apply(t,[sM].concat(I(e.map((function(e){return e.value})))))}},cM=qy(1,1,1),hM=Wy(),dM={translate:function(e,t){pT.sceneGraphService.setLocalScale(e,cM,!1),pT.sceneGraphService.setLocalEulerAngles(e,hM,void 0,void 0,!1),pT.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),pT.sceneGraphService.dirtifyLocal(e,e.transformable)}};function fM(e,t){if(e.length){if(1===e.length&&dM[e[0].t])return void dM[e[0].t](t,e[0].d);for(var n=yb(uM),r=0;r<e.length;r++){var i=e[r],a=i.t,o=i.d,s=lM[a];s&&(s(o),ux(n,n,sM))}t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var pM=function(){return p((function e(){v(this,e),this.parser=$S,this.mixer=u_}),[{key:"calculator",value:function(e,t,n,r){return n instanceof Bk?[]:n}},{key:"postProcessor",value:function(e){fM(e.parsedStyle.transform,e)}}])}(),vM=function(){return p((function e(){v(this,e)}),[{key:"postProcessor",value:function(e){var t=e.parsedStyle.transformOrigin;t[0].unit===Mk.kPixels&&t[1].unit===Mk.kPixels?e.setOrigin(t[0].value,t[1].value):e.getGeometryBounds()}}])}(),gM=function(){return p((function e(){v(this,e)}),[{key:"calculator",value:function(e,t,n,r){return n.value}},{key:"postProcessor",value:function(e){if(e.parentNode){var t=e.parentNode,n=t.renderable,r=t.sortable;n&&(n.dirty=!0),r&&(r.dirty=!0,r.dirtyReason=wk.Z_INDEX_CHANGED)}}}])}(),mM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e,t){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.r,s=void 0===o?0:o;return{cx:r,cy:a,hwidth:s,hheight:s}}}])}(),yM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e,t){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.rx,s=void 0===o?0:o,u=e.ry;return{cx:r,cy:a,hwidth:s,hheight:void 0===u?0:u}}}])}(),bM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2,a=Math.min(t,r),o=Math.max(t,r),s=Math.min(n,i),u=(o-a)/2,l=(Math.max(n,i)-s)/2;return{cx:a+u,cy:s+l,hwidth:u,hheight:l}}}])}(),xM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e){var t=e.d.rect,n=t.x,r=t.y,i=t.width/2,a=t.height/2;return{cx:n+i,cy:r+a,hwidth:i,hheight:a}}}])}(),EM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e){if(e.points&&cE(e.points.points)){var t=e.points.points,n=Math.min.apply(Math,I(t.map((function(e){return e[0]})))),r=Math.max.apply(Math,I(t.map((function(e){return e[0]})))),i=Math.min.apply(Math,I(t.map((function(e){return e[1]})))),a=Math.max.apply(Math,I(t.map((function(e){return e[1]})))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),wM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e,t){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.src,s=e.width,u=void 0===s?0:s,l=e.height,c=u,h=void 0===l?0:l;return o&&!Mx(o)&&(c||(c=o.width,e.width=c),h||(h=o.height,e.height=h)),{cx:r+c/2,cy:a+h/2,hwidth:c/2,hheight:h/2}}}])}(),kM=function(){return p((function e(t){v(this,e),this.globalRuntime=t}),[{key:"isReadyToMeasure",value:function(e,t){return e.text}},{key:"update",value:function(e,t){var n,r=e.text,i=e.textAlign,a=void 0===i?"start":i,o=e.lineWidth,s=void 0===o?1:o,u=e.textBaseline,l=void 0===u?"alphabetic":u,c=e.dx,h=void 0===c?0:c,d=e.dy,f=void 0===d?0:d,p=e.x,v=void 0===p?0:p,g=e.y,m=void 0===g?0:g;if(!this.isReadyToMeasure(e,t))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var y=((null===t||void 0===t||null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,b=this.globalRuntime.textService.measureText(r,e,y);e.metrics=b;var x=b.width/2,E=b.height/2,w=v+x;"center"===a||"middle"===a?w+=s/2-x:"right"!==a&&"end"!==a||(w+=s-2*x);var k=m-E;return"middle"===l?k+=E:"top"===l||"hanging"===l?k+=2*E:"alphabetic"===l||"bottom"!==l&&"ideographic"!==l||(k+=0),h&&(w+=h),f&&(k+=f),{cx:w,cy:k,hwidth:x,hheight:E}}}])}(),SM=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e,t){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),_M=function(){return p((function e(){v(this,e)}),[{key:"update",value:function(e,t){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.width,s=void 0===o?0:o,u=e.height,l=void 0===u?0:u;return{cx:r+s/2,cy:a+l/2,hwidth:s/2,hheight:l/2}}}])}();var MM=function(){return p((function e(t){v(this,e),this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new qw,this.page=new qw,this.canvas=new qw,this.viewport=new qw,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}),[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(Zw)}}])}(),TM=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).client=new qw,e.movement=new qw,e.offset=new qw,e.global=new qw,e.screen=new qw,e}return C(t,e),p(t,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}},{key:"initMouseEvent",value:function(){throw new Error(Zw)}}])}(MM),AM=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).width=0,e.height=0,e.isPrimary=!1,e}return C(t,e),p(t,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(TM),CM=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(TM),PM=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[null])).type=e,r.detail=n,Object.assign(r,n),r}return C(t,e),p(t)}(MM),RM=new WeakMap,NM=function(){return p((function e(){v(this,e),this.emitter=new Hy}),[{key:"on",value:function(e,t,n){return this.addEventListener(e,t,n),this}},{key:"addEventListener",value:function(e,t,n){var r=!1,i=!1;if(CE(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o}r&&(e+="capture"),t=PE(t)?t:t.handleEvent;var s=PE(t)?void 0:t;return i?this.emitter.once(e,t,s):this.emitter.on(e,t,s),this}},{key:"off",value:function(e,t,n){return e?this.removeEventListener(e,t,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var e;null===(e=this.emitter)||void 0===e||e.removeAllListeners()}},{key:"removeEventListener",value:function(e,t,n){var r;if(!this.emitter)return this;(CE(n)?n:null===n||void 0===n?void 0:n.capture)&&(e+="capture"),t=PE(t)?t:null===(r=t)||void 0===r?void 0:r.handleEvent;var i=PE(t)?void 0:t;return this.emitter.off(e,t,i),this}},{key:"emit",value:function(e,t){this.dispatchEvent(new PM(e,t))}},{key:"dispatchEvent",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=RM.get(this);r||(r=this.document?this:this.defaultView?this.defaultView:null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView)&&RM.set(this,r);if(r){if(e.manager=r.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],n||(e.target=this),e.manager.dispatchEvent(e,e.type,n)}else this.emitter.emit(e.type,e);return!e.defaultPrevented}}])}(),OM=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e}return C(t,e),p(t,[{key:"textContent",get:function(){var e="";this.nodeName===Lw.TEXT&&(e+=this.style.text);var t,n=D(this.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.nodeName===Lw.TEXT?e+=r.nodeValue:e+=r.textContent}}catch(i){n.e(i)}finally{n.f()}return e},set:function(e){var t=this;this.childNodes.slice().forEach((function(e){t.removeChild(e)})),this.nodeName===Lw.TEXT&&(this.style.text="".concat(e))}},{key:"getRootNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(e){throw new Error(Zw)}},{key:"lookupNamespaceURI",value:function(e){throw new Error(Zw)}},{key:"lookupPrefix",value:function(e){throw new Error(Zw)}},{key:"normalize",value:function(){throw new Error(Zw)}},{key:"isEqualNode",value:function(e){return this===e}},{key:"isSameNode",value:function(e){return this.isEqualNode(e)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(e){if(e===this)return 0;for(var n=e,r=this,i=[n],a=[r];null!==(o=n.parentNode)&&void 0!==o?o:r.parentNode;){var o;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(a.push(r.parentNode),r.parentNode):r}if(n!==r)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var s=i.length>a.length?i:a,u=s===i?a:i;if(s[s.length-u.length]===u[0])return s===i?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var l=s.length-u.length,c=u.length-1;c>=0;c--){var h=u[c],d=s[l+c];if(d!==h){var f=h.parentNode.childNodes;return f.indexOf(h)<f.indexOf(d)?u===i?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:s===i?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(e){return this.contains(e)}},{key:"contains",value:function(e){for(var t=e;t&&this!==t;)t=t.parentNode;return!!t}},{key:"getAncestor",value:function(e){for(var t=this;e>0&&t;)t=t.parentNode,e--;return t}},{key:"forEach",value:function(e){for(var t=[this];t.length>0;){var n=t.pop();if(!1===e(n))break;for(var r=n.childNodes.length-1;r>=0;r--)t.push(n.childNodes[r])}}}],[{key:"isNode",value:function(e){return!!e.childNodes}}])}(NM);OM.DOCUMENT_POSITION_DISCONNECTED=1,OM.DOCUMENT_POSITION_PRECEDING=2,OM.DOCUMENT_POSITION_FOLLOWING=4,OM.DOCUMENT_POSITION_CONTAINS=8,OM.DOCUMENT_POSITION_CONTAINED_BY=16,OM.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var LM=function(){return p((function e(t,n){var r=this;v(this,e),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=fb(),this.tmpVec3=Wy(),this.onPointerDown=function(e){var t=r.createPointerEvent(e);if(r.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)r.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;r.dispatchEvent(t,n?"rightdown":"mousedown")}r.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),r.freeEvent(t)},this.onPointerUp=function(e){var t=z_.now(),n=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var a=r.trackingData(e.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var u=o;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var l=2===n.button;r.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}OM.isNode(u)&&(u=u.parentNode)}delete a.pressTargetsByButton[e.button],s=u}if(s){var c,h=r.clonePointerEvent(n,"click");h.target=s,h.path=[],a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:h.target,timeStamp:t});var d=r.context.renderingContext.root.ownerDocument.defaultView,f=a.clicksByButton[e.button];f.target===h.target&&t-f.timeStamp<d.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=h.target,f.timeStamp=t,h.detail=f.clickCount,null!==(c=n.detail)&&void 0!==c&&c.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==h.pointerType&&"touch"!==h.pointerType||r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(n)},this.onPointerMove=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.trackingData(e.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==t.target){var o="mousemove"===e.type?"mouseout":"pointerout",s=r.createPointerEvent(e,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!t.composedPath().includes(a)){var u=r.createPointerEvent(e,"pointerleave",a||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!t.composedPath().includes(u.target);)u.currentTarget=u.target,r.notifyTarget(u),n&&r.notifyTarget(u,"mouseleave"),OM.isNode(u.target)&&(u.target=u.target.parentNode);r.freeEvent(u)}r.freeEvent(s)}if(a!==t.target){var l="mousemove"===e.type?"mouseover":"pointerover",c=r.clonePointerEvent(t,l);r.dispatchEvent(c,"pointerover"),n&&r.dispatchEvent(c,"mouseover");for(var h=a&&OM.isNode(a)&&a.parentNode;h&&h!==(OM.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&h!==t.target;)h=h.parentNode;if(!h||h===(OM.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var d=r.clonePointerEvent(t,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==(OM.isNode(r.rootTarget)&&r.rootTarget.parentNode);)d.currentTarget=d.target,r.notifyTarget(d),n&&r.notifyTarget(d,"mouseenter"),OM.isNode(d.target)&&(d.target=d.target.parentNode);r.freeEvent(d)}r.freeEvent(c)}r.dispatchEvent(t,"pointermove"),"touch"===t.pointerType&&r.dispatchEvent(t,"touchmove"),n&&(r.dispatchEvent(t,"mousemove"),r.cursor=r.getCursor(t.target)),i.overTargets=t.composedPath(),r.freeEvent(t)},this.onPointerOut=function(e){var t=r.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.findMountedTarget(t.overTargets),a=r.createPointerEvent(e,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(e,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(OM.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),OM.isNode(o.target)&&(o.target=o.target.parentNode);t.overTargets=null,r.freeEvent(a),r.freeEvent(o)}r.cursor=null},this.onPointerOver=function(e){var t=r.trackingData(e.pointerId),n=r.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(OM.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),OM.isNode(a.target)&&(a.target=a.target.parentNode);t.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a)},this.onPointerUpOutside=function(e){var t=r.trackingData(e.pointerId),n=r.findMountedTarget(t.pressTargetsByButton[e.button]),i=r.createPointerEvent(e);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),OM.isNode(a)&&(a=a.parentNode);delete t.pressTargetsByButton[e.button]}r.freeEvent(i)},this.onWheel=function(e){var t=r.createWheelEvent(e);r.dispatchEvent(t),r.freeEvent(t)},this.onClick=function(e){if(r.context.config.useNativeClickEvent){var t=r.createPointerEvent(e);r.dispatchEvent(t),r.freeEvent(t)}},this.onPointerCancel=function(e){var t=r.createPointerEvent(e,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(t),r.freeEvent(t)},this.globalRuntime=t,this.context=n}),[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),t=1,n=1,r=this.context.contextService.getDomElement();if(r&&e){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(t=e.width/i,n=e.height/a)}return{scaleX:t,scaleY:n,bbox:e}}},{key:"client2Viewport",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new qw((e.x-((null===i||void 0===i?void 0:i.left)||0))/n,(e.y-((null===i||void 0===i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(e){var t=this.getScale(),n=t.scaleX,r=t.scaleY,i=t.bbox;return new qw((e.x+((null===i||void 0===i?void 0:i.left)||0))*n,(e.y+((null===i||void 0===i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(e){var t=e.x,n=e.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),u=r.getWorldTransform(),l=kb(this.tmpMatrix,u,s),c=Zy(this.tmpVec3,t/a*2-1,2*(1-n/o)-1,0);return ab(c,c,l),new qw(c[0],c[1])}},{key:"canvas2Viewport",value:function(e){var t=this.rootTarget.defaultView.getCamera(),n=t.getPerspective(),r=t.getViewTransform(),i=kb(this.tmpMatrix,n,r),a=Zy(this.tmpVec3,e.x,e.y,0);ab(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,u=o.height;return new qw((a[0]+1)/2*s,(1-(a[1]+1)/2)*u)}},{key:"setPickHandler",value:function(e){this.pickHandler=e}},{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}}},{key:"dispatchEvent",value:function(e,t,n){if(n){e.eventPhase=e.AT_TARGET;var r=this.rootTarget.defaultView||null;e.currentTarget=r,this.notifyListeners(e,t)}else e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t)}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){var i=n.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(e){var t=[e],n=this.rootTarget.defaultView||null;if(n&&n===e)return t.unshift(n.document),t;for(var r=0;r<2048&&e!==this.rootTarget;r++)OM.isNode(e)&&e.parentNode&&(t.push(e.parentNode),e=e.parentNode);return n&&t.push(n),t}},{key:"hitTest",value:function(e){var t=e.viewportX,n=e.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return t<0||n<0||t>i||n>a?null:!o&&this.pickHandler(e)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(e,t){var n,r=null===t||void 0===t?void 0:t.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=t.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r)}return!(null===t||void 0===t||!t.composedPath)&&t.composedPath().indexOf(e)>-1}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var t=0,n=e.nativeEvent.composedPath();t<n.length;t++){var r=n[t],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})}},{key:"createPointerEvent",value:function(e,t,n,r){var i=this.allocateEvent(AM);this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!==n&&void 0!==n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"===typeof t&&(i.type=t),i}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(CM);this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e;var n=this.getExistedHTML(t),r=this.context.contextService.getDomElement();return t.target=n||this.isNativeEventFromCanvas(r,t.nativeEvent)&&this.pickTarget(t),t}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"cloneWheelEvent",value:function(e){var t=this.allocateEvent(CM);return t.nativeEvent=e.nativeEvent,t.originalEvent=e.originalEvent,this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.target=e.target,t.path=e.composedPath().slice(),t.type=e.type,t}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(AM);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!==t&&void 0!==t?t:n.type,n}},{key:"copyPointerData",value:function(e,t){t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist}},{key:"copyMouseData",value:function(e,t){t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.client.copyFrom(e.client),t.movement.copyFrom(e.movement),t.canvas.copyFrom(e.canvas),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global),t.offset.copyFrom(e.offset)}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.timeStamp=z_.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.page.copyFrom(e.page),t.viewport.copyFrom(e.viewport)}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:"notifyTarget",value:function(e,t){var n;t=null!==(n=t)&&void 0!==n?n:e.type;var r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget.emitter,r=n._events[t];if(r)if("fn"in r)r.once&&n.removeListener(t,r.fn,void 0,!0),r.fn.call(e.currentTarget||r.context,e);else for(var i=0;i<r.length&&!e.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(e.currentTarget||r[i].context,e)}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[e.length-1],n=e.length-2;n>=0;n--){var r=e[n];if(!(r===this.rootTarget||OM.isNode(r)&&r.parentNode===t))break;t=e[n]}return t}},{key:"getCursor",value:function(e){for(var t=e;t;){var n=D_(t)&&t.getAttribute("cursor");if(n)return n;t=OM.isNode(t)&&t.parentNode}}}])}(),DM=function(){return p((function e(){v(this,e)}),[{key:"getOrCreateCanvas",value:function(e,t){if(this.canvas)return this.canvas;if(e||pT.offscreenCanvas)this.canvas=e||pT.offscreenCanvas,this.context=this.canvas.getContext("2d",an({willReadFrequently:!0},t));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",an({willReadFrequently:!0},t)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",an({willReadFrequently:!0},t))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(e,t){return this.context||this.getOrCreateCanvas(e,t),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(e){}try{return document.createElement("canvas")}catch(t){}return null}}])}(),IM=function(e){return e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE",e}({}),FM=function(){return p((function e(t,n){v(this,e),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new nM,initAsync:new eM,dirtycheck:new rM,cull:new rM,beginFrame:new nM,beforeRender:new nM,render:new nM,afterRender:new nM,endFrame:new nM,destroy:new nM,pick:new tM,pickSync:new rM,pointerDown:new nM,pointerUp:new nM,pointerMove:new nM,pointerOut:new nM,pointerOver:new nM,pointerWheel:new nM,pointerCancel:new nM,click:new nM},this.globalRuntime=t,this.context=n}),[{key:"init",value:function(e){var t=this,n=an(an({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(e){e.apply(n,t.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,e()):this.hooks.initAsync.promise().then((function(){t.inited=!0,e()})).catch((function(e){}))}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(IM.CAMERA_CHANGED)}},{key:"render",value:function(e,t,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===i.renderReasons.size&&i.renderReasons.has(IM.CAMERA_CHANGED),o=!e.disableRenderHooks||!(e.disableRenderHooks&&a);o&&this.renderDisplayObject(i.root,e,i),this.hooks.beginFrame.call(t),o&&i.renderListCurrentFrame.forEach((function(e){r.hooks.beforeRender.call(e),r.hooks.render.call(e),r.hooks.afterRender.call(e)})),this.hooks.endFrame.call(t),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(e,t,n){var r=this,i=t.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling;function s(e){var t=e.renderable,i=e.sortable,s=a?t.dirty||n.dirtyRectangleRenderingDisabled?e:null:e;if(s){var u=o?r.hooks.cull.call(s,r.context.camera):s;u&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(u))}t.dirty=!1,i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(e,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var u=[e];u.length>0;){var l=u.pop();s(l);for(var c=l.sortable.sorted||l.childNodes,h=c.length-1;h>=0;h--)u.push(c[h])}}},{key:"sort",value:function(e,t){t.sorted&&t.dirtyReason!==wk.Z_INDEX_CHANGED?t.dirtyChildren.forEach((function(n){if(-1===e.childNodes.indexOf(n)){var r=t.sorted.indexOf(n);r>=0&&t.sorted.splice(r,1)}else if(0===t.sorted.length)t.sorted.push(n);else{var i=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;I_(e[i],t)<0?n=i+1:r=i}return n}(t.sorted,n);t.sorted.splice(i,0,n)}})):t.sorted=e.childNodes.slice().sort(I_)}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(IM.DISPLAY_OBJECT_CHANGED)}}])}(),UM=/\[\s*(.*)=(.*)\s*\]/,BM=function(){return p((function e(){v(this,e)}),[{key:"selectOne",value:function(e,t){var n=this;if(e.startsWith("."))return t.find((function(t){return((null===t||void 0===t?void 0:t.classList)||[]).indexOf(n.getIdOrClassname(e))>-1}));if(e.startsWith("#"))return t.find((function(t){return t.id===n.getIdOrClassname(e)}));if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.find((function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a)})):null}return t.find((function(n){return t!==n&&n.nodeName===e}))}},{key:"selectAll",value:function(e,t){var n=this;if(e.startsWith("."))return t.findAll((function(r){return t!==r&&((null===r||void 0===r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(e))>-1}));if(e.startsWith("#"))return t.findAll((function(r){return t!==r&&r.id===n.getIdOrClassname(e)}));if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,a=r.value;return i?t.findAll((function(e){return t!==e&&("name"===i?e.name===a:n.attributeToString(e,i)===a)})):[]}return t.findAll((function(n){return t!==n&&n.nodeName===e}))}},{key:"is",value:function(e,t){if(e.startsWith("."))return t.className===this.getIdOrClassname(e);if(e.startsWith("#"))return t.id===this.getIdOrClassname(e);if(e.startsWith("[")){var n=this.getAttribute(e),r=n.name,i=n.value;return"name"===r?t.name===i:this.attributeToString(t,r)===i}return t.nodeName===e}},{key:"getIdOrClassname",value:function(e){return e.substring(1)}},{key:"getAttribute",value:function(e){var t=e.match(UM),n="",r="";return t&&t.length>2&&(n=t[1].replace(/"/g,""),r=t[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(e,t){if(!e.getAttribute)return"";var n=e.getAttribute(t);return _x(n)?"":n.toString?n.toString():""}}])}(),zM=function(e){return e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.MOUNTED="DOMNodeInsertedIntoDocument",e.REMOVED="removed",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.REPARENT="reparent",e.DESTROY="destroy",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled",e}({}),GM=function(e){function t(e,n,r,i,a,o,s,u){var l;return v(this,t),(l=T(this,t,[null])).relatedNode=n,l.prevValue=r,l.newValue=i,l.attrName=a,l.attrChange=o,l.prevParsedValue=s,l.newParsedValue=u,l.type=e,l}return C(t,e),p(t)}(MM);function HM(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}GM.ADDITION=2,GM.MODIFICATION=1,GM.REMOVAL=3;var jM=new GM(zM.REPARENT,null,"","","",0,"",""),VM=wx(),WM=Wy(),XM=qy(1,1,1),YM=fb(),qM=wx(),KM=Wy(),ZM=fb(),JM=hx(),QM=Wy(),$M=hx(),eT=Wy(),tT=Wy(),nT=Wy(),rT=fb(),iT=hx(),aT=hx(),oT=hx(),sT={affectChildren:!0},uT=function(){return p((function e(t){v(this,e),this.pendingEvents=new Map,this.boundsChangedEvent=new PM(zM.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=t}),[{key:"matches",value:function(e,t){return this.runtime.sceneGraphSelector.is(e,t)}},{key:"querySelector",value:function(e,t){return this.runtime.sceneGraphSelector.selectOne(e,t)}},{key:"querySelectorAll",value:function(e,t){return this.runtime.sceneGraphSelector.selectAll(e,t)}},{key:"attach",value:function(e,t,n){var r,i=!1;e.parentNode&&(i=e.parentNode!==t,this.detach(e));var a=e.nodeName===Lw.FRAGMENT,o=G_(t);e.parentNode=t;var s=a?e.childNodes:[e];kx(n)?s.forEach((function(e){t.childNodes.splice(n,0,e),e.parentNode=t})):s.forEach((function(e){t.childNodes.push(e),e.parentNode=t}));var u=t.sortable;if((null!==u&&void 0!==u&&null!==(r=u.sorted)&&void 0!==r&&r.length||e.parsedStyle.zIndex)&&(-1===u.dirtyChildren.indexOf(e)&&u.dirtyChildren.push(e),u.dirty=!0,u.dirtyReason=wk.ADDED),!o){if(a)this.dirtifyFragment(e);else{var l=e.transformable;l&&this.dirtifyWorld(e,l)}i&&e.dispatchEvent(jM)}}},{key:"detach",value:function(e){if(e.parentNode){var t,n,r=e.transformable,i=e.parentNode.sortable;(null!==i&&void 0!==i&&null!==(t=i.sorted)&&void 0!==t&&t.length||null!==(n=e.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(e)&&i.dirtyChildren.push(e),i.dirty=!0,i.dirtyReason=wk.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),r&&this.dirtifyWorld(e,r),e.parentNode=null}}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin}},{key:"setOrigin",value:function(e,t){"number"===typeof t&&(t=[t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0]);var n=e.transformable;if(t[0]!==n.origin[0]||t[1]!==n.origin[1]||t[2]!==n.origin[2]){var r=n.origin;r[0]=t[0],r[1]=t[1],r[2]=t[2]||0,this.dirtifyLocal(e,n)}}},{key:"rotate",value:function(e,t){"number"===typeof t&&(t=qy(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){var r=JM;gx(r,t[0],t[1],t[2]);var i=this.getRotation(e),a=this.getRotation(e.parentNode);yx(oT,a),vx(oT,oT),fx(r,oT,r),fx(n.localRotation,r,i),Ex(n.localRotation,n.localRotation),this.dirtifyLocal(e,n)}else this.rotateLocal(e,t)}},{key:"rotateLocal",value:function(e,t){"number"===typeof t&&(t=qy(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=e.transformable;gx(aT,t[0],t[1],t[2]),xx(n.localRotation,n.localRotation,aT),this.dirtifyLocal(e,n)}},{key:"setEulerAngles",value:function(e,t){"number"===typeof t&&(t=qy(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=e.transformable;if(null!==e.parentNode&&e.parentNode.transformable){gx(n.localRotation,t[0],t[1],t[2]);var r=this.getRotation(e.parentNode);yx(iT,vx(JM,r)),xx(n.localRotation,n.localRotation,iT),this.dirtifyLocal(e,n)}else this.setLocalEulerAngles(e,t)}},{key:"setLocalEulerAngles",value:function(e,t){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"===typeof t&&(t=qy(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var r=e.transformable;gx(r.localRotation,t[0],t[1],t[2]),n&&this.dirtifyLocal(e,r)}},{key:"translateLocal",value:function(e,t){"number"===typeof t&&(t=qy(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=e.transformable;ob(t,WM)||(!function(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],l=t[2],c=i*l-a*u,h=a*s-r*l,d=r*u-i*s,f=i*d-a*h,p=a*c-r*d,v=r*h-i*c,g=2*o;c*=g,h*=g,d*=g,f*=2,p*=2,v*=2,e[0]=s+c+f,e[1]=u+h+p,e[2]=l+d+v}(t,t,n.localRotation),Jy(n.localPosition,n.localPosition,t),this.dirtifyLocal(e,n))}},{key:"setPosition",value:function(e,t){var n,r=e.transformable;if(nT[0]=t[0],nT[1]=t[1],nT[2]=null!==(n=t[2])&&void 0!==n?n:0,!ob(this.getPosition(e),nT)){if(Ky(r.position,nT),null!==e.parentNode&&e.parentNode.transformable){var i=e.parentNode.transformable;vb(rT,i.worldTransform),xb(rT,rT),ab(r.localPosition,nT,rT)}else Ky(r.localPosition,nT);this.dirtifyLocal(e,r)}}},{key:"setLocalPosition",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.transformable;tT[0]=t[0],tT[1]=t[1],tT[2]=null!==(n=t[2])&&void 0!==n?n:0,ob(i.localPosition,tT)||(Ky(i.localPosition,tT),r&&this.dirtifyLocal(e,i))}},{key:"scaleLocal",value:function(e,t){var n,r=e.transformable;$y(r.localScale,r.localScale,Zy(KM,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:1)),this.dirtifyLocal(e,r)}},{key:"setLocalScale",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.transformable;Zy(KM,t[0],t[1],null!==(n=t[2])&&void 0!==n?n:i.localScale[2]),ob(KM,i.localScale)||(Ky(i.localScale,KM),r&&this.dirtifyLocal(e,i))}},{key:"translate",value:function(e,t){"number"===typeof t&&(t=Zy(KM,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)),ob(t,WM)||(Jy(KM,this.getPosition(e),t),this.setPosition(e,KM))}},{key:"setRotation",value:function(e,t,n,r,i){var a=e.transformable;if("number"===typeof t&&(t=mx(t,n,r,i)),null!==e.parentNode&&e.parentNode.transformable){var o=this.getRotation(e.parentNode);yx(JM,o),vx(JM,JM),fx(a.localRotation,JM,t),Ex(a.localRotation,a.localRotation),this.dirtifyLocal(e,a)}else this.setLocalRotation(e,t)}},{key:"setLocalRotation",value:function(e,t,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"===typeof t&&(t=bx(JM,t,n,r,i));var o=e.transformable;yx(o.localRotation,t),a&&this.dirtifyLocal(e,o)}},{key:"setLocalSkew",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"===typeof t&&(t=function(e,t,n){return e[0]=t,e[1]=n,e}(qM,t,n));var i=e.transformable;!function(e,t){e[0]=t[0],e[1]=t[1]}(i.localSkew,t),r&&this.dirtifyLocal(e,i)}},{key:"dirtifyLocal",value:function(e,t){G_(e)||t.localDirtyFlag||(t.localDirtyFlag=!0,t.dirtyFlag||this.dirtifyWorld(e,t))}},{key:"dirtifyWorld",value:function(e,t){t.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,t),this.dirtifyToRoot(e,!0)}},{key:"dirtifyFragment",value:function(e){var t=e.transformable;t&&(t.frozen=!1,t.dirtyFlag=!0,t.localDirtyFlag=!0);var n=e.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0,n.dirty=!0);for(var r=e.childNodes.length,i=0;i<r;i++)this.dirtifyFragment(e.childNodes[i]);e.nodeName===Lw.FRAGMENT&&this.pendingEvents.set(e,!1)}},{key:"triggerPendingEvents",value:function(){var e=this,t=new Set,n=function(n,r){n.isConnected&&!t.has(n)&&n.nodeName!==Lw.FRAGMENT&&(e.boundsChangedEvent.detail=r,e.boundsChangedEvent.target=n,n.isMutationObserved?n.dispatchEvent(e.boundsChangedEvent):n.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),t.add(n))};this.pendingEvents.forEach((function(e,t){t.nodeName!==Lw.FRAGMENT&&(sT.affectChildren=e,e?t.forEach((function(e){n(e,sT)})):n(t,sT))})),t.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;for(n.renderable&&(n.renderable.dirty=!0);n;)HM(n),n=n.parentNode;t&&e.forEach((function(e){HM(e)})),this.informDependentDisplayObjects(e),this.pendingEvents.set(e,t)}},{key:"updateDisplayObjectDependency",value:function(e,t,n,r){if(t&&t!==n){var i=this.displayObjectDependencyMap.get(t);if(i&&i[e]){var a=i[e].indexOf(r);i[e].splice(a,1)}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[e]||(o[e]=[]),o[e].push(r)}}},{key:"informDependentDisplayObjects",value:function(e){var t=this,n=this.displayObjectDependencyMap.get(e);n&&Object.keys(n).forEach((function(e){n[e].forEach((function(n){t.dirtifyToRoot(n,!0),n.dispatchEvent(new GM(zM.ATTR_MODIFIED,n,t,t,e,GM.MODIFICATION,t,t)),n.isCustomElement&&n.isConnected&&n.attributeChangedCallback&&n.attributeChangedCallback(e,t,t)}))}))}},{key:"getPosition",value:function(e){var t=e.transformable;return Ub(t.position,this.getWorldTransform(e,t))}},{key:"getRotation",value:function(e){var t=e.transformable;return zb(t.rotation,this.getWorldTransform(e,t))}},{key:"getScale",value:function(e){var t=e.transformable;return Bb(t.scaling,this.getWorldTransform(e,t))}},{key:"getWorldTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transformable;return t.localDirtyFlag||t.dirtyFlag?(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,t),t.worldTransform):t.worldTransform}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation}},{key:"getLocalScale",value:function(e){return e.transformable.localScale}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew}},{key:"calcLocalTransform",value:function(e){if(0!==e.localSkew[0]||0!==e.localSkew[1]){Hb(e.localTransform,e.localRotation,e.localPosition,qy(1,1,1),e.origin),0===e.localSkew[0]&&0===e.localSkew[1]||(yb(ZM),ZM[4]=Math.tan(e.localSkew[0]),ZM[1]=Math.tan(e.localSkew[1]),kb(e.localTransform,e.localTransform,ZM));var t=Hb(ZM,bx(JM,0,0,0,1),Zy(KM,1,1,1),e.localScale,e.origin);kb(e.localTransform,e.localTransform,t)}else{var n=e.localTransform,r=e.localPosition,i=e.localRotation,a=e.localScale,o=e.origin,s=0!==r[0]||0!==r[1]||0!==r[2],u=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],l=1!==a[0]||1!==a[1]||1!==a[2],c=0!==o[0]||0!==o[1]||0!==o[2];u||l||c?Hb(n,i,r,a,o):s?Pb(n,r):yb(n)}}},{key:"getLocalTransform",value:function(e){var t=e.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform}},{key:"setLocalTransform",value:function(e,t){var n=Ub(QM,t),r=zb($M,t),i=Bb(eT,t);this.setLocalScale(e,i,!1),this.setLocalPosition(e,n,!1),this.setLocalRotation(e,r,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,XM,!1),this.setLocalPosition(e,WM,!1),this.setLocalEulerAngles(e,WM,void 0,void 0,!1),this.setLocalSkew(e,VM,void 0,!1),this.dirtifyLocal(e,e.transformable)}},{key:"getTransformedGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(e,t);if(!Vw.isEmpty(r)){var i=n||new Vw;return i.setFromTransformedAABB(r,this.getWorldTransform(e)),i}return null}},{key:"getGeometryBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.geometry;return n.dirty&&pT.styleValueRegistry.updateGeometry(e),(t?n.renderBounds:n.contentBounds||null)||new Vw}},{key:"getBounds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(e,n,i);if(e.childNodes.forEach((function(e){var r=t.getBounds(e,n);r&&(a?a.add(r):(a=i||new Vw).update(r.center,r.halfExtents))})),a||(a=new Vw),n){var o=F_(e);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents)}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var t=YM;e.parentNode.transformable&&(t=xb(ZM,this.getWorldTransform(e.parentNode)));var n=this.getBounds(e);if(!Vw.isEmpty(n)){var r=new Vw;return r.setFromTransformedAABB(n,t),r}}return this.getBounds(e)}},{key:"getBoundingClientRect",value:function(e){var t,n,r=this.getGeometryBounds(e);Vw.isEmpty(r)||(n=new Vw).setFromTransformedAABB(r,this.getWorldTransform(e));var i=null===(t=e.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.getContextService().getBoundingClientRect();if(n){var a=x(n.getMin(),2),o=a[0],s=a[1],u=x(n.getMax(),2),l=u[0],c=u[1];return new Kw(o+((null===i||void 0===i?void 0:i.left)||0),s+((null===i||void 0===i?void 0:i.top)||0),l-o,c-s)}return new Kw((null===i||void 0===i?void 0:i.left)||0,(null===i||void 0===i?void 0:i.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(e,t){var n=this;if(!t.dirtyFlag){t.dirtyFlag=!0,t.frozen=!1,e.childNodes.forEach((function(e){var t=e.transformable;t.dirtyFlag||n.dirtifyWorldInternal(e,t)}));var r=e.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0)}}},{key:"syncHierarchy",value:function(e){var t=e.transformable;if(!t.frozen){t.frozen=!0,(t.localDirtyFlag||t.dirtyFlag)&&this.sync(e,t);for(var n=e.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}}},{key:"sync",value:function(e,t){if(t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.dirtyFlag){var n=e.parentNode,r=n&&n.transformable;null!==n&&r?kb(t.worldTransform,r.worldTransform,t.localTransform):vb(t.worldTransform,t.localTransform),t.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(e){for(var t=e.parentNode;t;){var n=t.transformable;n&&(n.frozen=!1),t=t.parentNode}}}])}(),lT={MetricsString:"|\xc9q\xc5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},cT=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,hT=new RegExp("".concat(/[!%),.:;?\]}\xa2\xb0\xb7'""\u2020\u2021\u203a\u2103\u2236\u3001\u3002\u3003\u3006\u3015\u3017\u301e\ufe5a\ufe5c\uff01\uff02\uff05\uff07\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\uff01\uff3d\uff5d\uff5e]/.source,"|").concat(/[!),.:;?\]}\xa2\xb7\u2013\u2014'"\u2022"\u3001\u3002\u3006\u301e\u3015\u3009\u300b\u300d\ufe30\ufe31\ufe32\ufe33\ufe50\ufe51\ufe52\ufe53\ufe54\ufe55\ufe56\ufe58\ufe5a\ufe5c\uff01\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\ufe36\ufe38\ufe3a\ufe3c\ufe3e\ufe40\ufe42\ufe57\uff3d\uff5c\uff5d\uff64]/.source,"|").concat(/[)\]\uff5d\u3015\u3009\u300b\u300d\u300f\u3011\u3019\u3017\u301f'"\uff60\xbb\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b\u2010\u30a0\u2013\u301c?!\u203c\u2047\u2048\u2049\u30fb\u3001:;,\u3002.]/.source,"|").concat(/[!%),.:;?\]}\xa2\xb0'"\u2020\u2021\u2103\u3006\u3008\u300a\u300c\u300e\u3015\uff01\uff05\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\uff3d\uff5d]/.source)),dT=new RegExp("".concat(/[$(\xa3\xa5\xb7'"\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u301d\ufe59\ufe5b\uff04\uff08\uff0e\uff3b\uff5b\uffe1\uffe5]/.source,"|").concat(/[([{\xa3\xa5'"\u2035\u3008\u300a\u300c\u300e\u3014\u301d\ufe34\ufe59\ufe5b\uff08\uff5b\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41\ufe43\ufe4f]/.source,"|").concat(/[([\uff5b\u3014\u3008\u300a\u300c\u300e\u3010\u3018\u3016\u301d'"\uff5f\xab\u2014...\u2025\u3033\u3034\u3035]/.source,"|").concat(/[$([{\xa3\xa5'"\u3005\u3007\u3009\u300b\u300d\u3014\uff04\uff08\uff3b\uff5b\uff60\uffe5\uffe6#]/.source)),fT=function(){return p((function e(t){var n=this;v(this,e),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(e,t){return!n.isBreakingSpace(t)&&!(!e||!dT.exec(t)&&!hT.exec(e))},this.trimByKinsokuShorui=function(e){var t=I(e),n=t[t.length-2];if(!n)return e;var r=n[n.length-1];return t[t.length-2]=n.slice(0,-1),t[t.length-1]=r+t[t.length-1],t},this.runtime=t}),[{key:"measureFont",value:function(e,t){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(t),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(t,{willReadFrequently:!0});i.font=e;var a=lT.MetricsString+lT.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(lT.BaselineSymbol).width),u=lT.HeightMultiplier*s;s=s*lT.BaselineMultiplier|0,r.width=o,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var l=i.getImageData(0,0,o||1,u||1).data,c=l.length,h=4*o,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<h;v+=4)if(255!==l[f+v]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=u;d>s;--d){for(var g=0;g<h;g+=4)if(255!==l[f+g]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[e]=n,n}},{key:"measureText",value:function(e,t,n){var r=t.fontSize,i=void 0===r?16:r,a=t.wordWrap,o=void 0!==a&&a,s=t.lineHeight,u=t.lineWidth,l=void 0===u?1:u,c=t.textBaseline,h=void 0===c?"alphabetic":c,d=t.textAlign,f=void 0===d?"start":d,p=t.letterSpacing,v=void 0===p?0:p,g=t.textPath;t.textPathSide,t.textPathStartOffset;var m=t.leading,y=void 0===m?0:m,b=function(e){for(var t=e.fontSize,n=void 0===t?16:t,r=e.fontFamily,i=void 0===r?"sans-serif":r,a=e.fontStyle,o=void 0===a?"normal":a,s=e.fontVariant,u=void 0===s?"normal":s,l=e.fontWeight,c=void 0===l?"normal":l,h=kx(n)&&"".concat(n,"px")||"16px",d=i.split(","),f=d.length-1;f>=0;f--){var p=d[f].trim();!aM.test(p)&&iM.indexOf(p)<0&&(p='"'.concat(p,'"')),d[f]=p}return"".concat(o," ").concat(u," ").concat(c," ").concat(h," ").concat(d.join(","))}(t),x=this.measureFont(b,n);0===x.fontSize&&(x.fontSize=i,x.ascent=i);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);E.font=b,t.isOverflowing=!1;var w=(o?this.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),k=new Array(w.length),S=0;if(!g){for(var _=0;_<w.length;_++){var M=E.measureText(w[_]).width+(w[_].length-1)*v;k[_]=M,S=Math.max(S,M)}var T=S+l,A=s||x.fontSize+l,C=Math.max(A,x.fontSize+l)+(w.length-1)*(A+y),P=0;return"middle"===h?P=-C/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?P=-C:"top"!==h&&"hanging"!==h||(P=0),{font:b,width:T,height:C,lines:w,lineWidths:k,lineHeight:A+=y,maxLineWidth:S,fontProperties:x,lineMetrics:k.map((function(e,t){var n=0;return"center"===f||"middle"===f?n-=e/2:"right"!==f&&"end"!==f||(n-=e),new Kw(n-l/2,P+t*A,e+l,A)}))}}g.getTotalLength();for(var R=0;R<w.length;R++)E.measureText(w[R]).width,w[R].length}},{key:"wordWrap",value:function(e,t,n){var r=this,i=this,a=t.wordWrapWidth,o=void 0===a?0:a,s=t.letterSpacing,u=void 0===s?0:s,l=t.maxLines,c=void 0===l?1/0:l,h=t.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),f=o+u,p="";"ellipsis"===h?p="...":h&&"clip"!==h&&(p=h);var v=Array.from(e),g=[],m=0,y=0,b=0,x={},E=function(e){return r.getFromCache(e,u,x,d)},w=E(p);function k(e,t,n,r){for(;E(e)<r&&t<v.length-1&&!i.isNewline(v[t+1]);)e+=v[t+=1];for(;E(e)>r&&t>n;)t-=1,e=e.slice(0,-1);return{lineTxt:e,txtLastCharIndex:t}}function S(e,t){if(!(w<=0||w>f))if(g[e]){var n=k(g[e],t,b+1,f-w);g[e]=n.lineTxt+p}else g[e]=p}for(var _=0;_<v.length;_++){var M=v[_],T=v[_-1],A=v[_+1],C=E(M);if(this.isNewline(M)){if(m+1>=c){t.isOverflowing=!0,_<v.length-1&&S(m,_-1);break}b=_-1,y=0,g[m+=1]=""}else{if(y>0&&y+C>f){var P=k(g[m],_-1,b+1,f);if(P.txtLastCharIndex!==_-1){if(g[m]=P.lineTxt,P.txtLastCharIndex===v.length-1)break;_=P.txtLastCharIndex+1,M=v[_],T=v[_-1],A=v[_+1],C=E(M)}if(m+1>=c){t.isOverflowing=!0,S(m,_-1);break}if(b=_-1,y=0,g[m+=1]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(g=this.trimToBreakable(g),y=this.sumTextWidthByCache(g[m]||"",x)),this.shouldBreakByKinsokuShorui(M,A)&&(g=this.trimByKinsokuShorui(g),y+=E(T||""))}y+=C,g[m]=(g[m]||"")+M}}return g.join("\n")}},{key:"isBreakingSpace",value:function(e){return"string"===typeof e&&lT.BreakingSpaces.indexOf(e.charCodeAt(0))>=0}},{key:"isNewline",value:function(e){return"string"===typeof e&&lT.Newlines.indexOf(e.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(e){var t=I(e),n=t[t.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return t;var i=n.slice(r,r+1),a=r+1,o=r+(this.isBreakingSpace(i)?0:1);return t[t.length-1]+=n.slice(a,n.length),t[t.length-2]=n.slice(0,o),t}},{key:"canBreakInLastChar",value:function(e){return!e||!cT.test(e)}},{key:"sumTextWidthByCache",value:function(e,t){return e.split("").reduce((function(e,n){if(!t[n])throw Error("cannot count the word without cache");return e+t[n]}),0)}},{key:"findBreakableIndex",value:function(e){for(var t=e.length-1;t>=0;t--)if(!cT.test(e[t]))return t;return-1}},{key:"getFromCache",value:function(e,t,n,r){var i=n[e];if("number"!==typeof i){var a=e.length*t;i=r.measureText(e).width+a,n[e]=i}return i}}])}(),pT={},vT=function(e){var t=new wM,n=new EM;return P(P(P(P(P(P(P(P(P(P(e={},Lw.FRAGMENT,null),Lw.CIRCLE,new mM),Lw.ELLIPSE,new yM),Lw.RECT,t),Lw.IMAGE,t),Lw.GROUP,new SM),Lw.LINE,new bM),Lw.TEXT,new kM(pT)),Lw.POLYLINE,n),Lw.POLYGON,n),P(P(P(e,Lw.PATH,new xM),Lw.HTML,new _M),Lw.MESH,null)}(),gT=function(e){var t=new y_,n=new E_;return P(P(P(P(P(P(P(P(P(P(e={},Sk.PERCENTAGE,null),Sk.NUMBER,new __),Sk.ANGLE,new g_),Sk.DEFINED_PATH,new m_),Sk.PAINT,t),Sk.COLOR,t),Sk.FILTER,new b_),Sk.LENGTH,n),Sk.LENGTH_PERCENTAGE,n),Sk.LENGTH_PERCENTAGE_12,new w_),P(P(P(P(P(P(P(P(P(P(e,Sk.LENGTH_PERCENTAGE_14,new k_),Sk.COORDINATE,new E_),Sk.OFFSET_DISTANCE,new M_),Sk.OPACITY_VALUE,new T_),Sk.PATH,new A_),Sk.LIST_OF_POINTS,new C_),Sk.SHADOW_BLUR,new P_),Sk.TEXT,new R_),Sk.TEXT_TRANSFORM,new N_),Sk.TRANSFORM,new pM),P(P(P(e,Sk.TRANSFORM_ORIGIN,new vM),Sk.Z_INDEX,new gM),Sk.MARKER,new S_)}();pT.CameraContribution=xk,pT.AnimationTimeline=null,pT.EasingFunction=null,pT.offscreenCanvasCreator=new DM,pT.sceneGraphSelector=new BM,pT.sceneGraphService=new uT(pT),pT.textService=new fT(pT),pT.geometryUpdaterFactory=vT,pT.CSSPropertySyntaxFactory=gT,pT.styleValueRegistry=new p_(pT),pT.layoutRegistry=null,pT.globalThis="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{},pT.enableStyleSyntax=!0,pT.enableSizeAttenuation=!1;var mT=0;var yT=new GM(zM.INSERTED,null,"","","",0,"",""),bT=new GM(zM.REMOVED,null,"","","",0,"",""),xT=new PM(zM.DESTROY),ET=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).entity=mT++,e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.cullable={strategy:Ek.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.destroyed=!1,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e}return C(t,e),p(t,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(e){this.setAttribute("class",e)}},{key:"classList",get:function(){return this.className.split(" ").filter((function(e){return""!==e}))}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null}return null}},{key:"cloneNode",value:function(e){throw new Error(Zw)}},{key:"appendChild",value:function(e,t){var n;if(e.destroyed)throw new Error("Cannot append a destroyed element.");return pT.sceneGraphService.attach(e,this,t),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(G_(this)||e.nodeName!==Lw.FRAGMENT?this.ownerDocument.defaultView.mountChildren(e):this.ownerDocument.defaultView.mountFragment(e)),this.isMutationObserved&&(yT.relatedNode=this,e.dispatchEvent(yT)),e}},{key:"insertBefore",value:function(e,t){if(t){e.parentElement&&e.parentElement.removeChild(e);var n=this.childNodes.indexOf(t);-1===n?this.appendChild(e):this.appendChild(e,n)}else this.appendChild(e);return e}},{key:"replaceChild",value:function(e,t){var n=this.childNodes.indexOf(t);return this.removeChild(t),this.appendChild(e,n),t}},{key:"removeChild",value:function(e){var t;return bT.relatedNode=this,e.dispatchEvent(bT),null!==(t=e.ownerDocument)&&void 0!==t&&t.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),pT.sceneGraphService.detach(e),e}},{key:"removeChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];this.removeChild(t)}}},{key:"destroyChildren",value:function(){for(var e=this.childNodes.length-1;e>=0;e--){var t=this.childNodes[e];t.childNodes.length>0&&t.destroyChildren(),t.destroy()}}},{key:"matches",value:function(e){return pT.sceneGraphService.matches(e,this)}},{key:"getElementById",value:function(e){return pT.sceneGraphService.querySelector("#".concat(e),this)}},{key:"getElementsByName",value:function(e){return pT.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this)}},{key:"getElementsByClassName",value:function(e){return pT.sceneGraphService.querySelectorAll(".".concat(e),this)}},{key:"getElementsByTagName",value:function(e){return pT.sceneGraphService.querySelectorAll(e,this)}},{key:"querySelector",value:function(e){return pT.sceneGraphService.querySelector(e,this)}},{key:"querySelectorAll",value:function(e){return pT.sceneGraphService.querySelectorAll(e,this)}},{key:"closest",value:function(e){var t=this;do{if(pT.sceneGraphService.matches(e,t))return t;t=t.parentElement}while(null!==t);return null}},{key:"find",value:function(e){var t=this,n=null;return this.forEach((function(r){return r===t||!e(r)||(n=r,!1)})),n}},{key:"findAll",value:function(e){var t=this,n=[];return this.forEach((function(r){r!==t&&e(r)&&n.push(r)})),n}},{key:"after",value:function(){var e=this;if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n,r){var i;return null===(i=e.parentNode)||void 0===i?void 0:i.appendChild(n,t+r+1)}))}}},{key:"before",value:function(){if(this.parentNode){for(var e,t=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[0],o=r.slice(1);this.parentNode.appendChild(a,t),(e=a).after.apply(e,I(o))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e.appendChild(t)}))}},{key:"prepend",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t,n){return e.appendChild(t,n)}))}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(xT),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return pT.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return pT.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return pT.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return pT.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return pT.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(e){if("symbol"!==typeof e){var t=this.attributes[e];return t}}},{key:"hasAttribute",value:function(e){return this.getAttributeNames().includes(e)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(e){this.setAttribute(e,null),delete this.attributes[e]}},{key:"setAttribute",value:function(e,t,n,r){this.attributes[e]=t}},{key:"getAttributeNS",value:function(e,t){throw new Error(Zw)}},{key:"getAttributeNode",value:function(e){throw new Error(Zw)}},{key:"getAttributeNodeNS",value:function(e,t){throw new Error(Zw)}},{key:"hasAttributeNS",value:function(e,t){throw new Error(Zw)}},{key:"removeAttributeNS",value:function(e,t){throw new Error(Zw)}},{key:"removeAttributeNode",value:function(e){throw new Error(Zw)}},{key:"setAttributeNS",value:function(e,t,n){throw new Error(Zw)}},{key:"setAttributeNode",value:function(e){throw new Error(Zw)}},{key:"setAttributeNodeNS",value:function(e){throw new Error(Zw)}},{key:"toggleAttribute",value:function(e,t){throw new Error(Zw)}}])}(OM);function wT(e){return!(null===e||void 0===e||!e.nodeName)}var kT=pT.globalThis.Proxy?pT.globalThis.Proxy:function(){},ST=new GM(zM.ATTR_MODIFIED,null,null,null,null,GM.MODIFICATION,null,null),_T=Wy(),MT=hx(),TT=function(e){function t(e){var n;return v(this,t),(n=T(this,t)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||Lw.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),pT.enableStyleSyntax&&(n.style=new kT({setProperty:function(e,t){n.setAttribute(e,t)},getPropertyValue:function(e){return n.getAttribute(e)},removeProperty:function(e){n.removeAttribute(e)},item:function(){return""}},{get:function(e,t){return void 0!==e[t]?e[t]:n.getAttribute(t)},set:function(e,t,r){return n.setAttribute(t,r),!0}})),n}return C(t,e),p(t,[{key:"destroy",value:function(){NE(t,"destroy",this,3)([]),this.getAnimations().forEach((function(e){e.cancel()}))}},{key:"cloneNode",value:function(e,t){var n=an({},this.attributes);for(var r in n){var i=n[r];wT(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(e)),t&&(n[r]=t(r,i))}var a=new this.constructor(an(an({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach((function(t){if(!t.style.isMarker){var n=t.cloneNode(e);a.appendChild(n)}})),a}},{key:"initAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pT.styleValueRegistry.processProperties(this,e,{forceUpdateGeometry:!0}),this.renderable.dirty=!0}},{key:"setAttribute",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];ME(n)||(r||n!==this.attributes[e])&&(this.internalSetAttribute(e,n,{memoize:i}),NE(t,"setAttribute",this,3)([e,n]))}},{key:"internalSetAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.renderable,i=this.attributes[e],a=this.parsedStyle[e];pT.styleValueRegistry.processProperties(this,P({},e,t),n),r.dirty=!0;var o,s=this.parsedStyle[e];(this.isConnected&&(ST.relatedNode=this,ST.prevValue=i,ST.newValue=t,ST.attrName=e,ST.prevParsedValue=a,ST.newParsedValue=s,this.isMutationObserved?this.dispatchEvent(ST):(ST.target=this,this.ownerDocument.defaultView.dispatchEvent(ST,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=this.attributeChangedCallback)||void 0===o||o.call(this,e,i,t,a,s))}},{key:"getBBox",value:function(){var e=this.getBounds(),t=x(e.getMin(),2),n=t[0],r=t[1],i=x(e.getMax(),2),a=i[0],o=i[1];return new Kw(n,r,a-n,o-r)}},{key:"setOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pT.sceneGraphService.setOrigin(this,ek(e,t,n,!1)),this}},{key:"getOrigin",value:function(){return pT.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pT.sceneGraphService.setPosition(this,ek(e,t,n,!1)),this}},{key:"setLocalPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pT.sceneGraphService.setLocalPosition(this,ek(e,t,n,!1)),this}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pT.sceneGraphService.translate(this,ek(e,t,n,!1)),this}},{key:"translateLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pT.sceneGraphService.translateLocal(this,ek(e,t,n,!1)),this}},{key:"getPosition",value:function(){return pT.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return pT.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(e,t,n){return this.scaleLocal(e,t,n)}},{key:"scaleLocal",value:function(e,t,n){return"number"===typeof e&&(e=ek(e,t=t||e,n=n||e,!1)),pT.sceneGraphService.scaleLocal(this,e),this}},{key:"setLocalScale",value:function(e,t,n){return"number"===typeof e&&(e=ek(e,t=t||e,n=n||e,!1)),pT.sceneGraphService.setLocalScale(this,e),this}},{key:"getLocalScale",value:function(){return pT.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return pT.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){return ik(x(ok(_T,pT.sceneGraphService.getWorldTransform(this)),3)[2])}},{key:"getLocalEulerAngles",value:function(){return ik(x(ok(_T,pT.sceneGraphService.getLocalRotation(this)),3)[2])}},{key:"setEulerAngles",value:function(e){return pT.sceneGraphService.setEulerAngles(this,0,0,e),this}},{key:"setLocalEulerAngles",value:function(e){return pT.sceneGraphService.setLocalEulerAngles(this,0,0,e),this}},{key:"rotateLocal",value:function(e,t,n){return _x(t)&&_x(n)?pT.sceneGraphService.rotateLocal(this,0,0,e):pT.sceneGraphService.rotateLocal(this,e,t,n),this}},{key:"rotate",value:function(e,t,n){return _x(t)&&_x(n)?pT.sceneGraphService.rotate(this,0,0,e):pT.sceneGraphService.rotate(this,e,t,n),this}},{key:"setRotation",value:function(e,t,n,r){return pT.sceneGraphService.setRotation(this,e,t,n,r),this}},{key:"setLocalRotation",value:function(e,t,n,r){return pT.sceneGraphService.setLocalRotation(this,e,t,n,r),this}},{key:"setLocalSkew",value:function(e,t){return pT.sceneGraphService.setLocalSkew(this,e,t),this}},{key:"getRotation",value:function(){return pT.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return pT.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return pT.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return pT.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return pT.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(e){return pT.sceneGraphService.setLocalTransform(this,e),this}},{key:"resetLocalTransform",value:function(){pT.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(e,t){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,e,t):null}},{key:"isVisible",value:function(){var e;return"hidden"!==(null===(e=this.parsedStyle)||void 0===e?void 0:e.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(e){this.style.pointerEvents=e?"auto":"none"}},{key:"isInteractive",value:function(){var e;return"none"!==(null===(e=this.parsedStyle)||void 0===e?void 0:e.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,I(this.parentNode.children.map((function(e){return Number(e.style.zIndex)}))))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,I(this.parentNode.children.map((function(e){return Number(e.style.zIndex)}))))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?RE(i)?(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(e){var t=e||this.getWorldTransform(),n=x(Ub(_T,t),2),r=n[0],i=n[1],a=x(Bb(_T,t),2),o=a[0],s=a[1],u=zb(MT,t),l=x(ok(_T,u),3),c=l[0],h=l[2];return sk(c||h,r,i,o,s)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(e){var t=x(uk(e),5),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4];this.setEulerAngles(o).setPosition(n,r).setLocalScale(i,a)}},{key:"setLocalMatrix",value:function(e){var t=x(uk(e),5),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4];this.setLocalEulerAngles(o).setLocalPosition(n,r).setLocalScale(i,a)}},{key:"show",value:function(){this.forEach((function(e){e.style.visibility="visible"}))}},{key:"hide",value:function(){this.forEach((function(e){e.style.visibility="hidden"}))}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(e){return this.children[e]||null}},{key:"add",value:function(e,t){return this.appendChild(e,t)}},{key:"set",value:function(e,t){this.config[e]=t}},{key:"get",value:function(e){return this.config[e]}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(e,t,n),this}},{key:"setZIndex",value:function(e){return this.style.zIndex=e,this}}])}(ET);TT.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var AT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),T(this,t,[an({type:Lw.CIRCLE},e)])}return C(t,e),p(t)}(TT);AT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var CT=["style"],PT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Rw(n,CT);return v(this,t),(e=T(this,t,[an({style:r},i)])).isCustomElement=!0,e}return C(t,e),p(t)}(TT);PT.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var RT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),T(this,t,[an({type:Lw.ELLIPSE},e)])}return C(t,e),p(t)}(TT);RT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),(function(e){function t(){return v(this,t),T(this,t,[{type:Lw.FRAGMENT}])}return C(t,e),p(t)}(TT)).PARSED_STYLE_LIST=new Set(["class","className"]);var NT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),T(this,t,[an({type:Lw.GROUP},e)])}return C(t,e),p(t)}(TT);NT.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var OT=["style"],LT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Rw(n,OT);return v(this,t),(e=T(this,t,[an({type:Lw.HTML,style:r},i)])).cullable.enable=!1,e}return C(t,e),p(t,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var e=xb(fb(),this.parentNode.getWorldTransform()),t=this.getBounds();if(!Vw.isEmpty(t)){var n=new Vw;return n.setFromTransformedAABB(t,e),n}}return this.getBounds()}}])}(TT);LT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var DT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),T(this,t,[an({type:Lw.IMAGE},e)])}return C(t,e),p(t)}(TT);DT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var IT=["style"],FT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Rw(n,IT);v(this,t),(e=T(this,t,[an({type:Lw.LINE,style:an({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,e.markerEndAngle=0;var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&wT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),s&&wT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return C(t,e),p(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"x1"===e||"y1"===e||"x2"===e||"y2"===e||"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&wT(r)&&(this.markerStartAngle=0,r.remove()),i&&wT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e&&(r&&wT(r)&&(this.markerEndAngle=0,r.remove()),i&&wT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.x1,s=t.x2,u=t.y1,l=t.y2,c=e?n:r;if(c&&wT(c)){var h,d,f,p,v,g,m;e?(p=o,v=u,d=s-o,f=l-u,g=i||0,m=this.markerStartAngle):(p=s,v=l,d=o-s,f=u-l,g=a||0,m=this.markerEndAngle),h=Math.atan2(f,d),c.setLocalEulerAngles(180*h/Math.PI+m),c.setLocalPosition(p+Math.cos(h)*g,v+Math.sin(h)*g)}}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=xw(n.x1,n.y1,n.x2,n.y2,e),i=r.x,a=r.y,o=ab(Wy(),qy(i,a,0),t?this.getWorldTransform():this.getLocalTransform());return new qw(o[0],o[1])}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t)}},{key:"getTotalLength",value:function(){var e=this.parsedStyle;return bw(e.x1,e.y1,e.x2,e.y2)}}])}(TT);FT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var UT=["style"],BT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Rw(n,UT);v(this,t),(e=T(this,t,[an({type:Lw.PATH,style:r,initialParsedStyle:{miterLimit:4,d:an({},kk)}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&wT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),u&&wT(u)&&e.placeMarkerMid(u),s&&wT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return C(t,e),p(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"d"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&wT(r)&&(this.markerStartAngle=0,r.remove()),i&&wT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&wT(r)&&(this.markerEndAngle=0,r.remove()),i&&wT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=e?n:r;if(o&&wT(o)){var s,u,l,c,h,d,f;if(e){var p=x(this.getStartTangent(),2),v=p[0],g=p[1];c=g[0],h=g[1],u=v[0]-g[0],l=v[1]-g[1],d=i||0,f=this.markerStartAngle}else{var m=x(this.getEndTangent(),2),y=m[0],b=m[1];c=b[0],h=b[1],u=y[0]-b[0],l=y[1]-b[1],d=a||0,f=this.markerEndAngle}s=Math.atan2(l,u),o.setLocalEulerAngles(180*s/Math.PI+f),o.setLocalPosition(c+Math.cos(s)*d,h+Math.sin(s)*d)}}},{key:"placeMarkerMid",value:function(e){var t=this.parsedStyle.d.segments;if(this.markerMidList.forEach((function(e){e.remove()})),e&&wT(e))for(var n=1;n<t.length-1;n++){var r=x(t[n].currentPoint,2),i=r[0],a=r[1],o=1===n?e:e.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}},{key:"getTotalLength",value:function(){return CS(this)}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,t,n){return lE(e,t,Px(Px({},n),{bbox:!1,length:!0})).point}(this.parsedStyle.d.absolutePath,e),r=n.x,i=n.y,a=ab(Wy(),qy(r,i,0),t?this.getWorldTransform():this.getLocalTransform());return new qw(a[0],a[1])}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(e*CS(this),t)}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.d.segments,t=[];if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.d.segments,t=e.length,n=[];if(t>1){var r=e[t-2].currentPoint,i=e[t-1].currentPoint,a=e[t-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(TT);BT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var zT=["style"],GT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Rw(n,zT);v(this,t),(e=T(this,t,[an({type:Lw.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var a=e.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&wT(o)&&(e.markerStartAngle=o.getLocalEulerAngles(),e.appendChild(o)),u&&wT(u)&&e.placeMarkerMid(u),s&&wT(s)&&(e.markerEndAngle=s.getLocalEulerAngles(),e.appendChild(s)),e.transformMarker(!0),e.transformMarker(!1),e}return C(t,e),p(t,[{key:"attributeChangedCallback",value:function(e,t,n,r,i){"points"===e?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===e||"markerEndOffset"===e?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===e?(r&&wT(r)&&(this.markerStartAngle=0,r.remove()),i&&wT(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===e?(r&&wT(r)&&(this.markerEndAngle=0,r.remove()),i&&wT(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===e&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(e){var t=this.parsedStyle,n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=(t.points||{}).points,s=e?n:r;if(s&&wT(s)&&o){var u,l,c,h,d,f,p;if(h=o[0][0],d=o[0][1],e)l=o[1][0]-o[0][0],c=o[1][1]-o[0][1],f=i||0,p=this.markerStartAngle;else{var v=o.length;this.parsedStyle.isClosed?(l=o[v-1][0]-o[0][0],c=o[v-1][1]-o[0][1]):(h=o[v-1][0],d=o[v-1][1],l=o[v-2][0]-o[v-1][0],c=o[v-2][1]-o[v-1][1]),f=a||0,p=this.markerEndAngle}u=Math.atan2(c,l),s.setLocalEulerAngles(180*u/Math.PI+p),s.setLocalPosition(h+Math.cos(u)*f,d+Math.sin(u)*f)}}},{key:"placeMarkerMid",value:function(e){var t=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach((function(e){e.remove()})),this.markerMidList=[],e&&wT(e)&&t)for(var n=1;n<(this.parsedStyle.isClosed?t.length:t.length-1);n++){var r=t[n][0],i=t[n][1],a=1===n?e:e.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i)}}}])}(TT);GT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var HT=["style"],jT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=Rw(e,HT);return v(this,t),T(this,t,[an({type:Lw.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return C(t,e),p(t,[{key:"getTotalLength",value:function(){return PS(this)}},{key:"getPointAtLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(e/this.getTotalLength(),t)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach((function(e,t){n[t+1]&&((r=[0,0])[0]=o/s,i=bw(e[0],e[1],n[t+1][0],n[t+1][1]),o+=i,r[1]=o/s,a.push(r))})),this.parsedStyle.points.segments=a}var u=0,l=0;this.parsedStyle.points.segments.forEach((function(t,n){e>=t[0]&&e<=t[1]&&(u=(e-t[0])/(t[1]-t[0]),l=n)}));var c=xw(n[l][0],n[l][1],n[l+1][0],n[l+1][1],u),h=c.x,d=c.y,f=ab(Wy(),qy(h,d,0),t?this.getWorldTransform():this.getLocalTransform());return new qw(f[0],f[1])}},{key:"getStartTangent",value:function(){var e=this.parsedStyle.points.points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t}},{key:"getEndTangent",value:function(){var e=this.parsedStyle.points.points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n}}])}(GT);jT.PARSED_STYLE_LIST=new Set([].concat(I(GT.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var VT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),T(this,t,[an({type:Lw.RECT},e)])}return C(t,e),p(t)}(TT);VT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var WT=["style"],XT=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.style,r=Rw(e,WT);return v(this,t),T(this,t,[an({type:Lw.TEXT,style:an({fill:"black"},n)},r)])}return C(t,e),p(t,[{key:"getComputedTextLength",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var e;return this.getGeometryBounds(),(null===(e=this.parsedStyle.metrics)||void 0===e?void 0:e.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(TT);XT.PARSED_STYLE_LIST=new Set([].concat(I(TT.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var YT=function(){return p((function e(){v(this,e),this.registry={},this.define(Lw.CIRCLE,AT),this.define(Lw.ELLIPSE,RT),this.define(Lw.RECT,VT),this.define(Lw.IMAGE,DT),this.define(Lw.LINE,FT),this.define(Lw.GROUP,NT),this.define(Lw.PATH,BT),this.define(Lw.POLYGON,GT),this.define(Lw.POLYLINE,jT),this.define(Lw.TEXT,XT),this.define(Lw.HTML,LT)}),[{key:"define",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e){return this.registry[e]}}])}(),qT=function(e){function t(){var e;v(this,t),(e=T(this,t)).defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new pT.AnimationTimeline(e)}catch(r){}var n={};return h_.forEach((function(e){var t=e.n,r=e.inh,i=e.d;r&&i&&(n[t]=PE(i)?i(Lw.GROUP):i)})),e.documentElement=new NT({id:"g-root",style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return C(t,e),p(t,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(e,t){if("svg"===e)return this.documentElement;var n=this.defaultView.customElements.get(e);n||(console.warn("Unsupported tagName: ",e),n="tspan"===e?XT:NT);var r=new n(t);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(e,t,n){return this.createElement(t,n)}},{key:"cloneNode",value:function(e){throw new Error(Zw)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(e){}}},{key:"elementsFromBBox",value:function(e,t,n,r){var i=this.defaultView.context.rBushRoot.search({minX:e,minY:t,maxX:n,maxY:r}),a=[];return i.forEach((function(e){var t=e.displayObject,n=t.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===n?"auto":n);(!r||r&&t.isVisible())&&!t.isCulled()&&t.isInteractive()&&a.push(t)})),a.sort((function(e,t){return t.sortable.renderOrder-e.sortable.renderOrder})),a}},{key:"elementFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var u=this.defaultView.viewport2Client({x:r,y:i}),l=u.x,c=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:l,clientY:c},picked:[]}).picked;return h&&h[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var e=c(u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.defaultView.canvas2Viewport({x:t,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=4;break}return e.abrupt("return",null);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),h=c.x,d=c.y,e.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:h,clientY:d},picked:[]});case 7:return f=e.sent,p=f.picked,e.abrupt("return",p&&p[0]||this.documentElement);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"elementsFromPointSync",value:function(e,t){var n=this.defaultView.canvas2Viewport({x:e,y:t}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var u=this.defaultView.viewport2Client({x:r,y:i}),l=u.x,c=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:t,viewportX:r,viewportY:i,clientX:l,clientY:c},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h}},{key:"elementsFromPoint",value:function(){var e=c(u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.defaultView.canvas2Viewport({x:t,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,l=o.height,!(i<0||a<0||i>s||a>l)){e.next=4;break}return e.abrupt("return",[]);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),h=c.x,d=c.y,e.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:n,viewportX:i,viewportY:a,clientX:h,clientY:d},picked:[]});case 7:return f=e.sent,(p=f.picked)[p.length-1]!==this.documentElement&&p.push(this.documentElement),e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"appendChild",value:function(e,t){throw new Error(Jw)}},{key:"insertBefore",value:function(e,t){throw new Error(Jw)}},{key:"removeChild",value:function(e,t){throw new Error(Jw)}},{key:"replaceChild",value:function(e,t,n){throw new Error(Jw)}},{key:"append",value:function(){throw new Error(Jw)}},{key:"prepend",value:function(){throw new Error(Jw)}},{key:"getElementById",value:function(e){return this.documentElement.getElementById(e)}},{key:"getElementsByName",value:function(e){return this.documentElement.getElementsByName(e)}},{key:"getElementsByTagName",value:function(e){return this.documentElement.getElementsByTagName(e)}},{key:"getElementsByClassName",value:function(e){return this.documentElement.getElementsByClassName(e)}},{key:"querySelector",value:function(e){return this.documentElement.querySelector(e)}},{key:"querySelectorAll",value:function(e){return this.documentElement.querySelectorAll(e)}},{key:"find",value:function(e){return this.documentElement.find(e)}},{key:"findAll",value:function(e){return this.documentElement.findAll(e)}}])}(OM),KT=function(){function e(t){v(this,e),this.strategies=t}return p(e,[{key:"apply",value:function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,a=this.strategies;r.hooks.cull.tap(e.tag,(function(e){if(e){var t=e.cullable;return 0===a.length?t.visible=i.unculledEntities.indexOf(e.entity)>-1:t.visible=a.every((function(t){return t.isVisible(n,e)})),!e.isCulled()&&e.isVisible()?e:(e.dispatchEvent(new PM(zM.CULLED)),null)}return e})),r.hooks.afterRender.tap(e.tag,(function(e){e.cullable.visibilityPlaneMask=-1}))}}])}();KT.tag="Culling";var ZT=function(){function e(){var t=this;v(this,e),this.autoPreventDefault=!1,this.rootPointerEvent=new AM(null),this.rootWheelEvent=new CM(null),this.onPointerMove=function(e){var n,r=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==e.pointerType){var i,a=D(t.normalizeToPointerEvent(e,r));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t.bootstrapEvent(t.rootPointerEvent,o,r,e);t.context.eventService.mapEvent(s)}}catch(u){a.e(u)}finally{a.f()}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(e){var n,r,i=null===(n=t.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=D(t.normalizeToPointerEvent(e,i));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=t.bootstrapEvent(t.rootPointerEvent,o,i,e);t.context.eventService.mapEvent(s)}}catch(u){a.e(u)}finally{a.f()}t.setCursor(t.context.eventService.cursor)}}return p(e,[{key:"apply",value:function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(e){return n.context.renderingService.hooks.pickSync.call({position:e,picked:[],topmost:!0}).picked[0]||null})),r.hooks.pointerWheel.tap(e.tag,(function(e){var t=n.normalizeWheelEvent(e);n.context.eventService.mapEvent(t)})),r.hooks.pointerDown.tap(e.tag,(function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t=n.normalizeToPointerEvent(e,i);if(n.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();var r,a=D(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,e);n.context.eventService.mapEvent(s)}}catch(u){a.e(u)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(e.tag,(function(e){if(!i.supportsTouchEvents||"touch"!==e.pointerType){var t,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,e)?"":"outside",o=D(n.normalizeToPointerEvent(e,i));try{for(o.s();!(t=o.n()).done;){var s=t.value,u=n.bootstrapEvent(n.rootPointerEvent,s,i,e);u.type+=a,n.context.eventService.mapEvent(u)}}catch(l){o.e(l)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,(function(e){var t,r=D(n.normalizeToPointerEvent(e,i));try{for(r.s();!(t=r.n()).done;){var a=t.value,o=n.bootstrapEvent(n.rootPointerEvent,a,i,e);n.context.eventService.mapEvent(o)}}catch(s){r.e(s)}finally{r.f()}n.setCursor(n.context.eventService.cursor)}))}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=this.context.eventService.viewport2Canvas(e.viewport),u=s.x,l=s.y;return e.canvas.x=u,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=B_[e.type]||e.type),e}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;var n=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),r=n.x,i=n.y;t.viewport.x=r,t.viewport.y=i;var a=this.context.eventService.viewport2Canvas(t.viewport),o=a.x,s=a.y;return t.canvas.x=o,t.canvas.y=s,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.nativeEvent=e,t.type=e.type,t}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=z_.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];ME(i.button)&&(i.button=0),ME(i.buttons)&&(i.buttons=1),ME(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),ME(i.width)&&(i.width=i.radiusX||1),ME(i.height)&&(i.height=i.radiusY||1),ME(i.tiltX)&&(i.tiltX=0),ME(i.tiltY)&&(i.tiltY=0),ME(i.pointerType)&&(i.pointerType="touch"),ME(i.pointerId)&&(i.pointerId=i.identifier||0),ME(i.pressure)&&(i.pressure=i.force||.5),ME(i.twist)&&(i.twist=0),ME(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i)}else if(t.isMouseEvent(e)){var a=e;ME(a.isPrimary)&&(a.isPrimary=!0),ME(a.width)&&(a.width=1),ME(a.height)&&(a.height=1),ME(a.tiltX)&&(a.tiltX=0),ME(a.tiltY)&&(a.tiltY=0),ME(a.pointerType)&&(a.pointerType="mouse"),ME(a.pointerId)&&(a.pointerId=1),ME(a.pressure)&&(a.pressure=.5),ME(a.twist)&&(a.twist=0),ME(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(e);return n}}])}();ZT.tag="Event";var JT=[Lw.CIRCLE,Lw.ELLIPSE,Lw.IMAGE,Lw.RECT,Lw.LINE,Lw.POLYLINE,Lw.POLYGON,Lw.TEXT,Lw.PATH,Lw.HTML],QT=function(){return p((function e(){v(this,e)}),[{key:"isVisible",value:function(e,t){var n,r=t.cullable;if(!r.enable)return!0;var i=t.getRenderBounds();if(Vw.isEmpty(i))return!1;var a=e.getFrustum(),o=null===(n=t.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,i,o||Xw.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==Xw.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n,r){if(n===Xw.OUTSIDE||n===Xw.INSIDE)return n;for(var i=Xw.INSIDE,a=JT.indexOf(e.nodeName)>-1,o=0,s=r.length;o<s;++o){var u=1<<o;if(0!==(n&u)&&(!a||4!==o&&5!==o)){var l=r[o],c=l.normal,h=l.distance;if(nb(c,t.getPositiveFarPoint(r[o]))+h<0)return Xw.OUTSIDE;nb(c,t.getNegativeFarPoint(r[o]))+h<0&&(i|=u)}}return i}}])}(),$T=function(){function e(){v(this,e),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return p(e,[{key:"apply",value:function(t){var n,r=this,i=t.renderingService,a=t.renderingContext,o=t.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var u=function(e){e.target.renderable.dirty=!0,i.dirtify()},l=function(e){r.syncTasks.set(e.target,e.detail.affectChildren),i.dirtify()},c=function(e){var t=e.target;pT.enableSizeAttenuation&&pT.styleValueRegistry.updateSizeAttenuation(t,s.getCamera().getZoom())},h=function(e){var t=e.target,n=t.rBushNode;n.aabb&&r.rBush.remove(n.aabb),r.syncTasks.delete(t),pT.sceneGraphService.dirtifyToRoot(t),i.dirtify()};i.hooks.init.tap(e.tag,(function(){s.addEventListener(zM.MOUNTED,c),s.addEventListener(zM.UNMOUNTED,h),s.addEventListener(zM.ATTR_MODIFIED,u),s.addEventListener(zM.BOUNDS_CHANGED,l)})),i.hooks.destroy.tap(e.tag,(function(){s.removeEventListener(zM.MOUNTED,c),s.removeEventListener(zM.UNMOUNTED,h),s.removeEventListener(zM.ATTR_MODIFIED,u),s.removeEventListener(zM.BOUNDS_CHANGED,l),r.syncTasks.clear()}));var d=null!==(n=pT.globalThis.requestIdleCallback)&&void 0!==n?n:Q_.bind(pT.globalThis);i.hooks.endFrame.tap(e.tag,(function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,d((function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0}))):r.syncRTree()}))}},{key:"syncNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isConnected){var n=e.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=e.getRenderBounds();if(r){var i=e.renderable;t&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new Vw),i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=x(r.getMin(),2),o=a[0],s=a[1],u=x(r.getMax(),2),l=u[0],c=u[1];n.aabb||(n.aabb={}),n.aabb.displayObject=e,n.aabb.minX=o,n.aabb.minY=s,n.aabb.maxX=l,n.aabb.maxY=c}return!n.aabb||isNaN(n.aabb.maxX)||isNaN(n.aabb.maxX)||isNaN(n.aabb.minX)||isNaN(n.aabb.minY)?void 0:n.aabb}}},{key:"syncRTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=e.syncNode(i,t);a&&(n.push(a),r.add(i))}};this.syncTasks.forEach((function(e,t){e&&t.forEach(i);for(var n=t;n;)i(n),n=n.parentElement})),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();$T.tag="Prepare";var eA=function(e){return e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged",e}({}),tA=new PM(zM.MOUNTED),nA=new PM(zM.UNMOUNTED),rA=new PM(eA.BEFORE_RENDER),iA=new PM(eA.RERENDER),aA=new PM(eA.AFTER_RENDER),oA=function(e){function t(e){var n;v(this,t),(n=T(this,t)).Element=TT,n.inited=!1,n.context={};var r=e.container,i=e.canvas,a=e.renderer,o=e.width,s=e.height,u=e.background,l=e.cursor,c=e.supportsMutipleCanvasesInOneContainer,h=e.cleanUpOnDestroy,d=void 0===h||h,f=e.offscreenCanvas,p=e.devicePixelRatio,g=e.requestAnimationFrame,m=e.cancelAnimationFrame,y=e.createImage,b=e.supportsTouchEvents,x=e.supportsPointerEvents,E=e.isTouchEvent,w=e.isMouseEvent,k=e.dblClickSpeed,S=o,_=s,M=p||L_&&window.devicePixelRatio||1;return M=M>=1?Math.ceil(M):1,i&&(S=o||function(e){var t=U_(e,"width");return"auto"===t?e.offsetWidth:parseFloat(t)}(i)||i.width/M,_=s||function(e){var t=U_(e,"height");return"auto"===t?e.offsetHeight:parseFloat(t)}(i)||i.height/M),n.customElements=new YT,n.devicePixelRatio=M,n.requestAnimationFrame=null!==g&&void 0!==g?g:Q_.bind(pT.globalThis),n.cancelAnimationFrame=null!==m&&void 0!==m?m:$_.bind(pT.globalThis),n.supportsTouchEvents=null!==b&&void 0!==b?b:"ontouchstart"in pT.globalThis,n.supportsPointerEvents=null!==x&&void 0!==x?x:!!pT.globalThis.PointerEvent,n.isTouchEvent=null!==E&&void 0!==E?E:function(e){return n.supportsTouchEvents&&e instanceof pT.globalThis.TouchEvent},n.isMouseEvent=null!==w&&void 0!==w?w:function(e){return!pT.globalThis.MouseEvent||e instanceof pT.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(e instanceof pT.globalThis.PointerEvent))},f&&(pT.offscreenCanvas=f),n.document=new qT,n.document.defaultView=n,c||function(e,t,n){if(e){var r="string"===typeof e?document.getElementById(e):e;O_.has(r)&&O_.get(r).destroy(n),O_.set(r,t)}}(r,n,d),n.initRenderingContext(an(an({},e),{},{width:S,height:_,background:null!==u&&void 0!==u?u:"transparent",cursor:null!==l&&void 0!==l?l:"default",cleanUpOnDestroy:d,devicePixelRatio:M,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!==k&&void 0!==k?k:200,createImage:null!==y&&void 0!==y?y:function(){return new window.Image}})),n.initDefaultCamera(S,_,a.clipSpaceNearZ),n.initRenderer(a,!0),n}return C(t,e),p(t,[{key:"initRenderingContext",value:function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(e,t,n){var r=this,i=new pT.CameraContribution;i.clipSpaceNearZ=n,i.setType(vk.EXPLORING,gk.DEFAULT).setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0).setOrthographic(e/-2,e/2,t/2,t/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(yk,(function(){r.context.renderingContext.renderReasons.add(IM.CAMERA_CHANGED),pT.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var e=this.getCamera().getZoom();this.document.documentElement.forEach((function(t){pT.styleValueRegistry.updateSizeAttenuation(t,e)}))}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise((function(t){e.resolveReadyPromise=function(){t(e)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;t||this.dispatchEvent(new PM(eA.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var n=this.getRoot();e&&(this.unmountChildren(n),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),t||this.dispatchEvent(new PM(eA.AFTER_DESTROY));var r=function(e){e.currentTarget=null,e.manager=null,e.target=null,e.relatedNode=null};r(tA),r(nA),r(rA),r(iA),r(aA),r(ST),r(yT),r(bT),r(xT)}},{key:"changeSize",value:function(e,t){this.resize(e,t)}},{key:"resize",value:function(e,t){var n=this.context.config;n.width=e,n.height=t,this.getContextService().resize(e,t);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(e/2,t/2,500).setFocalPoint(e/2,t/2,0),i===mk.ORTHOGRAPHIC?r.setOrthographic(e/-2,e/2,t/2,t/-2,r.getNear(),r.getFar()):r.setAspect(e/t),this.dispatchEvent(new PM(eA.RESIZE,{width:e,height:t}))}},{key:"appendChild",value:function(e,t){return this.document.documentElement.appendChild(e,t)}},{key:"insertBefore",value:function(e,t){return this.document.documentElement.insertBefore(e,t)}},{key:"removeChild",value:function(e){return this.document.documentElement.removeChild(e)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(e){var t=this;e&&(rA.detail=e,aA.detail=e),this.dispatchEvent(rA),this.getRenderingService().render(this.getConfig(),e,(function(){t.dispatchEvent(iA)})),this.dispatchEvent(aA)}},{key:"run",value:function(){var e=this,t=function(n,r){e.render(r),e.frameId=e.requestAnimationFrame(t)};t()}},{key:"initRenderer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Ow,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new ZT,new $T,new KT([new QT])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService(an(an({},pT),this.context)),this.context.renderingService=new FM(pT,this.context),this.context.eventService=new LM(pT,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,n,!0)):this.context.contextService.initAsync().then((function(){t.initRenderingService(e,n)})).catch((function(e){console.error(e)}))}},{key:"initRenderingService",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init((function(){t.inited=!0,n?r?t.requestAnimationFrame((function(){t.dispatchEvent(new PM(eA.READY))})):t.dispatchEvent(new PM(eA.READY)):t.dispatchEvent(new PM(eA.RENDERER_CHANGED)),t.readyPromise&&t.resolveReadyPromise(),n||t.getRoot().forEach((function(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0,t.dirty=!0)})),t.mountChildren(t.getRoot()),e.getConfig().enableAutoRendering&&t.run()}))}},{key:"loadRendererContainerModule",value:function(e){var t=this;e.getPlugins().forEach((function(e){e.context=t.context,e.init(pT)}))}},{key:"setRenderer",value:function(e){var t=this.getConfig();if(t.renderer!==e){var n=t.renderer;t.renderer=e,this.destroy(!1,!0),I((null===n||void 0===n?void 0:n.getPlugins())||[]).reverse().forEach((function(e){e.destroy(pT)})),this.initRenderer(e)}}},{key:"setCursor",value:function(e){this.getConfig().cursor=e,this.getContextService().applyCursorStyle(e)}},{key:"unmountChildren",value:function(e){var t=this;e.childNodes.forEach((function(e){t.unmountChildren(e)})),this.inited&&(e.isMutationObserved?e.dispatchEvent(nA):(nA.target=e,this.dispatchEvent(nA,!0)),e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1),e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback()}},{key:"mountChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G_(e);this.inited?e.isConnected||(e.ownerDocument=this.document,e.isConnected=!0,n||(e.isMutationObserved?e.dispatchEvent(tA):(tA.target=e,this.dispatchEvent(tA,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",e.nodeName),e.childNodes.forEach((function(e){t.mountChildren(e,n)})),e.isCustomElement&&e.connectedCallback&&e.connectedCallback()}},{key:"mountFragment",value:function(e){this.mountChildren(e,!1)}},{key:"client2Viewport",value:function(e){return this.getEventService().client2Viewport(e)}},{key:"viewport2Client",value:function(e){return this.getEventService().viewport2Client(e)}},{key:"viewport2Canvas",value:function(e){return this.getEventService().viewport2Canvas(e)}},{key:"canvas2Viewport",value:function(e){return this.getEventService().canvas2Viewport(e)}},{key:"getPointByClient",value:function(e,t){return this.client2Viewport({x:e,y:t})}},{key:"getClientByPoint",value:function(e,t){return this.viewport2Client({x:e,y:t})}}])}(NM),sA=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).landmarks=[],e}return C(t,e),p(t,[{key:"rotate",value:function(e,t,n){if(this.relElevation=Qw(t),this.relAzimuth=Qw(e),this.relRoll=Qw(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===vk.EXPLORING){var r=dx(hx(),[1,0,0],nk((this.rotateWorld?1:-1)*this.relElevation)),i=dx(hx(),[0,1,0],nk((this.rotateWorld?1:-1)*this.relAzimuth)),a=dx(hx(),[0,0,1],nk(this.relRoll)),o=fx(hx(),i,r);o=fx(hx(),o,a);var s=jb(fb(),o);Sb(this.matrix,this.matrix,[0,0,-this.distance]),kb(this.matrix,this.matrix,s),Sb(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===vk.ORBITING||this.type===vk.EXPLORING?this._getPosition():this.type===vk.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(e,t){var n=ek(e,t,0),r=Xy(this.position);return Jy(r,r,eb(Wy(),this.right,n[0])),Jy(r,r,eb(Wy(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:"dolly",value:function(e){var t=this.forward,n=Xy(this.position),r=this.dollyingStep,i=this.distance+e*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*t[0],n[1]+=r*t[1],n[2]+=r*t[2],this._setPosition(n),this.type===vk.ORBITING||this.type===vk.EXPLORING?this._getDistance():this.type===vk.TRACKING&&Jy(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.position,s=void 0===o?this.position:o,u=a.focalPoint,l=void 0===u?this.focalPoint:u,c=a.roll,h=a.zoom,d=new pT.CameraContribution;d.setType(this.type,void 0),d.setPosition(s[0],null!==(t=s[1])&&void 0!==t?t:this.position[1],null!==(n=s[2])&&void 0!==n?n:this.position[2]),d.setFocalPoint(l[0],null!==(r=l[1])&&void 0!==r?r:this.focalPoint[1],null!==(i=l[2])&&void 0!==i?i:this.focalPoint[2]),d.setRoll(null!==c&&void 0!==c?c:this.roll),d.setZoom(null!==h&&void 0!==h?h:this.zoom);var f={name:e,matrix:pb(d.getWorldTransform()),right:Xy(d.right),up:Xy(d.up),forward:Xy(d.forward),position:Xy(d.getPosition()),focalPoint:Xy(d.getFocalPoint()),distanceVector:Xy(d.getDistanceVector()),distance:d.getDistance(),dollyingStep:d.getDollyingStep(),azimuth:d.getAzimuth(),elevation:d.getElevation(),roll:d.getRoll(),relAzimuth:d.relAzimuth,relElevation:d.relElevation,relRoll:d.relRoll,zoom:d.getZoom()};return this.landmarks.push(f),f}},{key:"gotoLandmark",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Mx(e)?this.landmarks.find((function(t){return t.name===e})):e;if(r){var i=kx(n)?{duration:n}:n,a=i.easing,o=void 0===a?"linear":a,s=i.duration,u=void 0===s?100:s,l=i.easingFunction,c=void 0===l?void 0:l,h=i.onfinish,d=void 0===h?void 0:h,f=i.onframe,p=void 0===f?void 0:f;this.cancelLandmarkAnimation();var v,g=r.position,m=r.focalPoint,y=r.zoom,b=r.roll,x=c||pT.EasingFunction(o),E=function(){t.setFocalPoint(m),t.setPosition(g),t.setRoll(b),t.setZoom(y),t.computeMatrix(),t.triggerUpdate(),null===d||void 0===d||d()};if(0===u)return E();var w=function(e){void 0===v&&(v=e);var n=e-v;if(n>=u)E();else{var r,i,a=x(n/u),o=Wy(),s=Wy();if(ib(o,t.focalPoint,m,a),ib(s,t.position,g,a),i=t.roll*(1-a)+b*a,r=t.zoom*(1-a)+y*a,t.setFocalPoint(o),t.setPosition(s),t.setRoll(i),t.setZoom(r),ub(o,m)+ub(s,g)<=.01&&void 0===y&&void 0===b)return E();t.computeMatrix(),t.triggerUpdate(),n<u&&(null===p||void 0===p||p(a),t.landmarkAnimationID=t.canvas.requestAnimationFrame(w))}};this.canvas.requestAnimationFrame(w)}}}])}(xk);pT.CameraContribution=sA;new WeakMap;var uA=function(e){function t(e,n,r,i){var a;return v(this,t),(a=T(this,t,[e])).currentTime=r,a.timelineTime=i,a.target=n,a.type="finish",a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=r,a.timelineTime=i,a}return C(t,e),p(t)}(MM),lA=0,cA=function(){return p((function e(t,n){var r;v(this,e),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(lA++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}),[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var e=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(t,n){e.resolveReadyPromise=function(){t(e)},e.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var e=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(t,n){e.resolveFinishedPromise=function(){t(e)},e.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){if(e=Number(e),!isNaN(e)){var t;if(this.timeline.restart(),!this._paused&&null!==this._startTime)this._startTime=Number(null===(t=this.timeline)||void 0===t?void 0:t.currentTime)-e/this.playbackRate;this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(e){if(null!==e){if(this.updatePromises(),e=Number(e),isNaN(e))return;if(this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var t=this.currentTime;this._playbackRate=e,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==t&&(this.currentTime=t),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var e=this.oldPlayState,t=this.pending?"pending":this.playState;return this.readyPromise&&t!==e&&("idle"===t?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===e?this.resolveReadyPromise():"pending"===t&&(this.readyPromise=void 0)),this.finishedPromise&&t!==e&&("idle"===t?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===t?this.resolveFinishedPromise():"finished"===e&&(this.finishedPromise=void 0)),this.oldPlayState=t,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var e=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var t=new uA(null,this,this.currentTime,null);setTimeout((function(){e.oncancel(t)}))}}},{key:"reverse",value:function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),null!==e&&(this.currentTime=e),this.updatePromises()}},{key:"updatePlaybackRate",value:function(e){this.playbackRate=e}},{key:"targetAnimations",value:function(){var e;return(null===(e=this.effect)||void 0===e?void 0:e.target).getAnimations()}},{key:"markTarget",value:function(){var e=this.targetAnimations();-1===e.indexOf(this)&&e.push(this)}},{key:"unmarkTarget",value:function(){var e=this.targetAnimations(),t=e.indexOf(this);-1!==t&&e.splice(t,1)}},{key:"tick",value:function(e,t){this._idle||this._paused||(null===this._startTime?t&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),t&&(this.currentTimePending=!1,this.fireEvents(e))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(Zw)}},{key:"addEventListener",value:function(e,t,n){throw new Error(Zw)}},{key:"removeEventListener",value:function(e,t,n){throw new Error(Zw)}},{key:"dispatchEvent",value:function(e){throw new Error(Zw)}},{key:"commitStyles",value:function(){throw new Error(Zw)}},{key:"ensureAlive",value:function(){var e,t;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(-1)):this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(this.currentTime));this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(e,t){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!t&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(e){var t=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new uA(null,this,this.currentTime,e);setTimeout((function(){t.onfinish&&t.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new uA(null,this,this.currentTime,e);this.onframe(r)}this._finishedFlag=!1}}}])}(),hA=.1,dA="function"===typeof Float32Array,fA=function(e,t){return 1-3*t+3*e},pA=function(e,t){return 3*t-6*e},vA=function(e){return 3*e},gA=function(e,t,n){return((fA(t,n)*e+pA(t,n))*e+vA(t))*e},mA=function(e,t,n){return 3*fA(t,n)*e*e+2*pA(t,n)*e+vA(t)},yA=function(e,t,n,r){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(e){return e};for(var i=dA?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=gA(a*hA,e,n);var o=function(t){for(var r=0,a=1;10!==a&&i[a]<=t;++a)r+=hA;--a;var o=r+(t-i[a])/(i[a+1]-i[a])*hA,s=mA(o,e,n);return s>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var a=mA(t,n,r);if(0===a)return t;t-=(gA(t,n,r)-e)/a}return t}(t,o,e,n):0===s?o:function(e,t,n,r,i){var a,o,s=0;do{(a=gA(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++s<10);return o}(t,r,r+hA,e,n)};return function(e){return 0===e||1===e?e:gA(o(e),t,r)}},bA=function(e){return Math.pow(e,2)},xA=function(e){return Math.pow(e,3)},EA=function(e){return Math.pow(e,4)},wA=function(e){return Math.pow(e,5)},kA=function(e){return Math.pow(e,6)},SA=function(e){return 1-Math.cos(e*Math.PI/2)},_A=function(e){return 1-Math.sqrt(1-e*e)},MA=function(e){return e*e*(3*e-2)},TA=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)},AA=function(e){var t=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=t[0],r=void 0===n?1:n,i=t[1],a=void 0===i?.5:i,o=Tx(Number(r),1,10),s=Tx(Number(a),.1,2);return 0===e||1===e?e:-o*Math.pow(2,10*(e-1))*Math.sin((e-1-s/(2*Math.PI)*Math.asin(1/o))*(2*Math.PI)/s)},CA=function(e){var t=arguments.length>2?arguments[2]:void 0,n=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),r=n[0],i=void 0===r?1:r,a=n[1],o=void 0===a?100:a,s=n[2],u=void 0===s?10:s,l=n[3],c=void 0===l?0:l;i=Tx(i,.1,1e3),o=Tx(o,.1,1e3),u=Tx(u,.1,1e3),c=Tx(c,.1,1e3);var h=Math.sqrt(o/i),d=u/(2*Math.sqrt(o*i)),f=d<1?h*Math.sqrt(1-d*d):0,p=d<1?(d*h-c)/f:-c+h,v=t?t*e/1e3:e;return v=d<1?Math.exp(-v*d*h)*(1*Math.cos(f*v)+p*Math.sin(f*v)):(1+p*v)*Math.exp(-v*h),0===e||1===e?e:1-v},PA=function(e){var t=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=t[0],r=void 0===n?10:n;return("start"===t[1]?Math.ceil:Math.floor)(Tx(e,0,1)*r)/r},RA=function(e){var t=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=t[0],r=t[1],i=t[2],a=t[3];return yA(n,r,i,a)(e)},NA=yA(.42,0,1,1),OA=function(e){return function(t){return 1-e(1-t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},LA=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return t<.5?e(2*t,n,r)/2:1-e(-2*t+2,n,r)/2}},DA=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return t<.5?(1-e(1-2*t,n,r))/2:(e(2*t-1,n,r)+1)/2}},IA={steps:PA,"step-start":function(e){return PA(e,[1,"start"])},"step-end":function(e){return PA(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":RA,ease:function(e){return RA(e,[.25,.1,.25,1])},in:NA,out:OA(NA),"in-out":LA(NA),"out-in":DA(NA),"in-quad":bA,"out-quad":OA(bA),"in-out-quad":LA(bA),"out-in-quad":DA(bA),"in-cubic":xA,"out-cubic":OA(xA),"in-out-cubic":LA(xA),"out-in-cubic":DA(xA),"in-quart":EA,"out-quart":OA(EA),"in-out-quart":LA(EA),"out-in-quart":DA(EA),"in-quint":wA,"out-quint":OA(wA),"in-out-quint":LA(wA),"out-in-quint":DA(wA),"in-expo":kA,"out-expo":OA(kA),"in-out-expo":LA(kA),"out-in-expo":DA(kA),"in-sine":SA,"out-sine":OA(SA),"in-out-sine":LA(SA),"out-in-sine":DA(SA),"in-circ":_A,"out-circ":OA(_A),"in-out-circ":LA(_A),"out-in-circ":DA(_A),"in-back":MA,"out-back":OA(MA),"in-out-back":LA(MA),"out-in-back":DA(MA),"in-bounce":TA,"out-bounce":OA(TA),"in-out-bounce":LA(TA),"out-in-bounce":DA(TA),"in-elastic":AA,"out-elastic":OA(AA),"in-out-elastic":LA(AA),"out-in-elastic":DA(AA),spring:CA,"spring-in":CA,"spring-out":OA(CA),"spring-in-out":LA(CA),"spring-out-in":DA(CA)},FA=function(e){return IA[function(e){return function(e){return"-"===(e=e.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())}))).charAt(0)?e.substring(1):e}(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()}(e)]||IA.linear},UA=function(e){return e},BA=1,zA=.5,GA=0;function HA(e,t){return function(n){if(n>=1)return 1;var r=1/e;return(n+=t*r)-n%r}}var jA="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",VA=new RegExp("cubic-bezier\\(".concat(jA,",").concat(jA,",").concat(jA,",").concat(jA,"\\)")),WA=/steps\(\s*(\d+)\s*\)/,XA=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function YA(e){var t=VA.exec(e);if(t)return yA.apply(void 0,I(t.slice(1).map(Number)));var n=WA.exec(e);if(n)return HA(Number(n[1]),GA);var r=XA.exec(e);return r?HA(Number(r[1]),{start:BA,middle:zA,end:GA}[r[2]]):FA(e)}function qA(e){return Math.abs(function(e){var t;if(0===e.duration||0===e.iterations)return 0;return("auto"===e.duration?0:Number(e.duration))*(null!==(t=e.iterations)&&void 0!==t?t:1)}(e)/(e.playbackRate||1))}var KA=0,ZA=1,JA=2,QA=3;function $A(e,t,n){var r=function(e,t,n){if(null===t)return KA;var r=n.endTime;return t<Math.min(n.delay,r)?ZA:t>=Math.min(n.delay+e+n.endDelay,r)?JA:QA}(e,t,n),i=function(e,t,n,r,i){switch(r){case ZA:return"backwards"===t||"both"===t?0:null;case QA:return n-i;case JA:return"forwards"===t||"both"===t?e:null;case KA:return null}}(e,n.fill,t,r,n.delay);if(null===i)return null;var a="auto"===n.duration?0:n.duration,o=function(e,t,n,r,i){var a=i;return 0===e?t!==ZA&&(a+=n):a+=r/e,a}(a,r,n.iterations,i,n.iterationStart),s=function(e,t,n,r,i,a){var o=e===1/0?t%1:e%1;return 0!==o||n!==JA||0===r||0===i&&0!==a||(o=1),o}(o,n.iterationStart,r,n.iterations,i,a),u=function(e,t,n,r){return e===JA&&t===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,o),l=function(e,t,n){var r=e;if("normal"!==e&&"reverse"!==e){var i=t;"alternate-reverse"===e&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=l,n.easingFunction(l)}function eC(e,t,n){var r=function(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(tC(i)){var a={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:YA(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}(e,t),i=function(e,t){var n=[];for(var r in e)for(var i=e[r],a=0;a<i.length-1;a++){var o=a,s=a+1,u=i[o].computedOffset,l=i[s].computedOffset,c=u,h=l;0===a&&(c=-1/0,0===l&&(s=o)),a===i.length-2&&(h=1/0,1===u&&(o=s)),n.push({applyFrom:c,applyTo:h,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:rC(r,i[o].value,i[s].value,t)})}return n.sort((function(e,t){return e.startOffset-t.startOffset})),n}(r,n);return function(e,t){if(null!==t)i.filter((function(e){return t>=e.applyFrom&&t<e.applyTo})).forEach((function(n){var r=t-n.startOffset,i=n.endOffset-n.startOffset,a=0===i?0:r/i;e.setAttribute(n.property,n.interpolation(a),!1,!1)}));else for(var n in r)tC(n)&&e.setAttribute(n,null)}}function tC(e){return"offset"!==e&&"easing"!==e&&"composite"!==e&&"computedOffset"!==e}var nC=function(e,t,n){return function(r){var i=iC(e,t,r);return kx(i)?i:n(i)}};function rC(e,t,n,r){var i=f_[e];if(i&&i.syntax&&i.int){var a=pT.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(t,r):t,u=o?o(n,r):n,l=a.mixer(s,u,r);if(l){var c=nC.apply(void 0,I(l));return function(e){return 0===e?t:1===e?n:c(e)}}}}return nC(!1,!0,(function(e){return e?n:t}))}function iC(e,t,n){if("number"===typeof e&&"number"===typeof t)return e*(1-n)+t*n;if("boolean"===typeof e&&"boolean"===typeof t||"string"===typeof e&&"string"===typeof t)return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(iC(e[s<r?s:r-1],t[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(e,":").concat(t))}var aC=function(){return p((function e(){v(this,e),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=UA,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}),[{key:"easing",get:function(){return this._easing},set:function(e){this.easingFunction=YA(e),this._easing=e}}])}();function oC(e,t){if(null===e)return[];Array.isArray(e)||(e=function(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!t[a]){var o={};"offset"in e&&(o.offset=Number(e.offset)),"easing"in e&&(o.easing=e.easing),"composite"in e&&(o.composite=e.composite),t[a]=o}void 0!==r[a]&&null!==r[a]&&(t[a][n]=r[a])}}return t.sort((function(e,t){return(e.computedOffset||0)-(t.computedOffset||0)})),t}(e));for(var n=e.map((function(e){var n={};for(var r in null!==t&&void 0!==t&&t.composite&&(n.composite="auto"),e){var i=e[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null===t||void 0===t?void 0:t.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(_x(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}return n=n.filter((function(e){return Number(e.offset)>=0&&Number(e.offset)<=1})),r||function(){var e,t,r=n.length;n[r-1].computedOffset=Number(null!==(e=n[r-1].offset)&&void 0!==e?e:1),r>1&&(n[0].computedOffset=Number(null!==(t=n[0].offset)&&void 0!==t?t:0));for(var i=0,a=Number(n[0].computedOffset),o=1;o<r;o++){var s=n[o].computedOffset;if(!_x(s)&&!_x(a)){for(var u=1;u<o-i;u++)n[i+u].computedOffset=a+(Number(s)-a)*u/(o-i);i=o,a=Number(s)}}}(),n}var sC="backwards|forwards|both|none".split("|"),uC="reverse|alternate|alternate-reverse".split("|");function lC(e,t){var n;return function(e,t){var n=new aC;return t&&(n.fill="both",n.duration="auto"),"number"!==typeof e||isNaN(e)?void 0!==e&&Object.keys(e).forEach((function(t){if(void 0!==e[t]&&null!==e[t]&&"auto"!==e[t]){if(("number"===typeof n[t]||"duration"===t)&&("number"!==typeof e[t]||isNaN(e[t])))return;if("fill"===t&&-1===sC.indexOf(e[t]))return;if("direction"===t&&-1===uC.indexOf(e[t]))return;n[t]=e[t]}})):n.duration=e,n}(e=function(e){"number"===typeof e&&(e=isNaN(e)?{duration:"auto"}:{duration:e});return e}(null!==(n=e)&&void 0!==n?n:{duration:"auto"}),t)}var cC=function(){return p((function e(t,n,r){var i=this;v(this,e),this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=lC(r,!1),this.timing.effect=this,this.timing.activeDuration=qA(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=oC(n,this.timing),this.interpolations=eC(this.normalizedKeyframes,this.timing,this.target);var a=pT.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(e,t){return"duration"===t?"auto"===e.duration?0:e.duration:"fill"===t?"auto"===e.fill?"none":e.fill:"localTime"===t?i.animation&&i.animation.currentTime||null:"currentIteration"===t?i.animation&&"running"===i.animation.playState?e.currentIteration||0:null:"progress"===t?i.animation&&"running"===i.animation.playState?e.progress||0:null:e[t]},set:function(){return!0}}):this.timing}),[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(e){return null!==e&&(this.timeFraction=$A(this.timing.activeDuration,e,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(e){this.normalizedKeyframes=oC(e)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(e){var t=this;Object.keys(e||{}).forEach((function(n){t.timing[n]=e[n]}))}}])}();function hC(e,t){return Number(e.id)-Number(t.id)}var dC=function(){return p((function e(t){var n=this;v(this,e),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(e){n.currentTime=e,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(e){var t=n.rafCallbacks;n.rafCallbacks=[],e<Number(n.currentTime)&&(e=Number(n.currentTime)),n.animations.sort(hC),n.animations=n.tick(e,!0,n.animations)[0],t.forEach((function(t){t[1](e)})),n.applyPendingEffects()},this.document=t}),[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(e,t,n){var r=new cC(e,t,n),i=new cA(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(e){var t=this;if(!this.inTick){e.markTarget();var n=e.targetAnimations();n.sort(hC),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(e){var n=t.animations.indexOf(e);-1!==n&&t.animations.splice(n,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(e){null===e||void 0===e||e.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(e){return e.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(e){return"finished"!==e.playState&&"idle"!==e.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(e){var t=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([t,e]),t}},{key:"requestAnimationFrame",value:function(e){var t=this;return this.rAF((function(n){t.updateAnimationsPromises(),e(n),t.updateAnimationsPromises()}))}},{key:"tick",value:function(e,t,n){var r,i,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var o=[],s=[],u=[],l=[];return n.forEach((function(n){n.tick(e,t),n._inEffect?(s.push(n.effect),n.markTarget()):(o.push(n.effect),n.unmarkTarget()),n._needsTick&&(a.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?u.push(n):l.push(n)})),(r=this.pendingEffects).push.apply(r,o),(i=this.pendingEffects).push.apply(i,s),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,l]}}])}();pT.EasingFunction=YA,pT.AnimationTimeline=dC;var fC,pC,vC,gC,mC,yC,bC,xC,EC,wC,kC=function(e){return _x(e)?"":e.toString()},SC=function(e){var t=kC(e);return t.charAt(0).toUpperCase()+t.substring(1)},_C=function(e){return"object"===typeof e&&null!==e},MC=function(e){return null!==e&&"function"!==typeof e&&isFinite(e.length)},TC=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Mx(e)||Mx(t))return!1;if(MC(e)||MC(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=TC(e[r],t[r]));r++);return n}if(_C(e)||_C(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=TC(e[i[r]],t[i[r]]));r++);return n}return!1},AC=TC,CC={duration:500},PC={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};!function(e){e.NodeAdded="NodeAdded",e.NodeUpdated="NodeUpdated",e.NodeRemoved="NodeRemoved",e.EdgeAdded="EdgeAdded",e.EdgeUpdated="EdgeUpdated",e.EdgeRemoved="EdgeRemoved",e.ComboAdded="ComboAdded",e.ComboUpdated="ComboUpdated",e.ComboRemoved="ComboRemoved"}(fC||(fC={})),function(e){e.DRAW="draw",e.COLLAPSE="collapse",e.EXPAND="expand",e.TRANSFORM="transform"}(pC||(pC={})),function(e){e.CLICK="canvas:click",e.DBLCLICK="canvas:dblclick",e.POINTER_OVER="canvas:pointerover",e.POINTER_LEAVE="canvas:pointerleave",e.POINTER_ENTER="canvas:pointerenter",e.POINTER_MOVE="canvas:pointermove",e.POINTER_OUT="canvas:pointerout",e.POINTER_DOWN="canvas:pointerdown",e.POINTER_UP="canvas:pointerup",e.CONTEXT_MENU="canvas:contextmenu",e.DRAG_START="canvas:dragstart",e.DRAG="canvas:drag",e.DRAG_END="canvas:dragend",e.DRAG_ENTER="canvas:dragenter",e.DRAG_OVER="canvas:dragover",e.DRAG_LEAVE="canvas:dragleave",e.DROP="canvas:drop",e.WHEEL="canvas:wheel"}(vC||(vC={})),function(e){e.CLICK="combo:click",e.DBLCLICK="combo:dblclick",e.POINTER_OVER="combo:pointerover",e.POINTER_LEAVE="combo:pointerleave",e.POINTER_ENTER="combo:pointerenter",e.POINTER_MOVE="combo:pointermove",e.POINTER_OUT="combo:pointerout",e.POINTER_DOWN="combo:pointerdown",e.POINTER_UP="combo:pointerup",e.CONTEXT_MENU="combo:contextmenu",e.DRAG_START="combo:dragstart",e.DRAG="combo:drag",e.DRAG_END="combo:dragend",e.DRAG_ENTER="combo:dragenter",e.DRAG_OVER="combo:dragover",e.DRAG_LEAVE="combo:dragleave",e.DROP="combo:drop"}(gC||(gC={})),function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.POINTER_OVER="pointerover",e.POINTER_LEAVE="pointerleave",e.POINTER_ENTER="pointerenter",e.POINTER_MOVE="pointermove",e.POINTER_OUT="pointerout",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.CONTEXT_MENU="contextmenu",e.DRAG_START="dragstart",e.DRAG="drag",e.DRAG_END="dragend",e.DRAG_ENTER="dragenter",e.DRAG_OVER="dragover",e.DRAG_LEAVE="dragleave",e.DROP="drop",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.WHEEL="wheel"}(mC||(mC={})),function(e){e.KEY_DOWN="keydown",e.KEY_UP="keyup"}(yC||(yC={})),function(e){e.CLICK="edge:click",e.DBLCLICK="edge:dblclick",e.POINTER_OVER="edge:pointerover",e.POINTER_LEAVE="edge:pointerleave",e.POINTER_ENTER="edge:pointerenter",e.POINTER_MOVE="edge:pointermove",e.POINTER_OUT="edge:pointerout",e.POINTER_DOWN="edge:pointerdown",e.POINTER_UP="edge:pointerup",e.CONTEXT_MENU="edge:contextmenu",e.DRAG_ENTER="edge:dragenter",e.DRAG_OVER="edge:dragover",e.DRAG_LEAVE="edge:dragleave",e.DROP="edge:drop"}(bC||(bC={})),function(e){e.BEFORE_CANVAS_INIT="beforecanvasinit",e.AFTER_CANVAS_INIT="aftercanvasinit",e.BEFORE_SIZE_CHANGE="beforesizechange",e.AFTER_SIZE_CHANGE="aftersizechange",e.BEFORE_ELEMENT_CREATE="beforeelementcreate",e.AFTER_ELEMENT_CREATE="afterelementcreate",e.BEFORE_ELEMENT_UPDATE="beforeelementupdate",e.AFTER_ELEMENT_UPDATE="afterelementupdate",e.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",e.AFTER_ELEMENT_DESTROY="afterelementdestroy",e.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",e.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",e.BEFORE_DRAW="beforedraw",e.AFTER_DRAW="afterdraw",e.BEFORE_RENDER="beforerender",e.AFTER_RENDER="afterrender",e.BEFORE_ANIMATE="beforeanimate",e.AFTER_ANIMATE="afteranimate",e.BEFORE_LAYOUT="beforelayout",e.AFTER_LAYOUT="afterlayout",e.BEFORE_STAGE_LAYOUT="beforestagelayout",e.AFTER_STAGE_LAYOUT="afterstagelayout",e.BEFORE_TRANSFORM="beforetransform",e.AFTER_TRANSFORM="aftertransform",e.BATCH_START="batchstart",e.BATCH_END="batchend",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.BEFORE_RENDERER_CHANGE="beforerendererchange",e.AFTER_RENDERER_CHANGE="afterrendererchange"}(xC||(xC={})),function(e){e.UNDO="undo",e.REDO="redo",e.CANCEL="cancel",e.ADD="add",e.CLEAR="clear",e.CHANGE="change"}(EC||(EC={})),function(e){e.CLICK="node:click",e.DBLCLICK="node:dblclick",e.POINTER_OVER="node:pointerover",e.POINTER_LEAVE="node:pointerleave",e.POINTER_ENTER="node:pointerenter",e.POINTER_MOVE="node:pointermove",e.POINTER_OUT="node:pointerout",e.POINTER_DOWN="node:pointerdown",e.POINTER_UP="node:pointerup",e.CONTEXT_MENU="node:contextmenu",e.DRAG_START="node:dragstart",e.DRAG="node:drag",e.DRAG_END="node:dragend",e.DRAG_ENTER="node:dragenter",e.DRAG_OVER="node:dragover",e.DRAG_LEAVE="node:dragleave",e.DROP="node:drop"}(wC||(wC={}));var RC,NC="combo",OC="tree";!function(e){e.NODE="node",e.EDGE="edge",e.COMBO="combo",e.THEME="theme",e.PALETTE="palette",e.LAYOUT="layout",e.BEHAVIOR="behavior",e.PLUGIN="plugin",e.ANIMATION="animation",e.TRANSFORM="transform",e.SHAPE="shape"}(RC||(RC={}));var LC={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function DC(e,t){var n,r=null===(n=LC[e])||void 0===n?void 0:n[t];if(r)return r}var IC="5.0.42",FC="G6";function UC(e){return"[".concat(FC," v").concat(IC,"] ").concat(e)}var BC={mute:!1,debug:function(e){!BC.mute&&console.debug(UC(e))},info:function(e){!BC.mute&&console.info(UC(e))},warn:function(e){!BC.mute&&console.warn(UC(e))},error:function(e){!BC.mute&&console.error(UC(e))}};function zC(e){var t=e.theme;if(!t)return{};var n=DC(RC.THEME,t);return n||(BC.warn("The theme of ".concat(t," is not registered.")),{})}function GC(e,t){if(Array.isArray(e)&&0===e.length)return null;var n=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e.slice(1):t||[];return new Proxy(n,{get:function(e,t){return"function"!==typeof e[t]||["onframe","onfinish"].includes(t)?"finished"===t?Promise.all([n.finished].concat(I(r.map((function(e){return e.finished}))))):Reflect.get(e,t):function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e[t].apply(e,i),r.forEach((function(e){var n,r;return null===(r=e[t])||void 0===r?void 0:(n=r).call.apply(n,[e].concat(i))}))}},set:function(e,t,n){return["onframe","onfinish"].includes(t)||r.forEach((function(e){e[t]=n})),Reflect.set(e,t,n)}})}function HC(e){var t=e.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=x(t,2),r=n[0],i=n[1];void 0===e[r]?e[r]=[i]:e[r].push(i)})),e}),{});Object.entries(t).forEach((function(n){var r=x(n,2),i=r[0],a=r[1];(a.length!==e.length||a.some((function(e){return _x(e)}))||a.every((function(e){return!["sourceNode","targetNode","childrenNode"].includes(i)&&AC(e,a[0])})))&&delete t[i]}));var n=Object.entries(t).reduce((function(e,t){var n=x(t,2),r=n[0];return n[1].forEach((function(t,n){e[n]?e[n][r]=t:e[n]=P({},r,t)})),e}),[]);return 0!==e.length&&0===n.length&&n.push.apply(n,[{_:0},{_:0}]),n}function jC(e){switch(e){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function VC(e,t){var n=e.animation;if(!1===n||!1===t)return!1;var r=Object.assign({},CC);return RE(n)&&Object.assign(r,n),RE(t)&&Object.assign(r,t),r}function WC(e,t,n,r){var i,a,o=e.animation;if(!1===o||!1===r)return[];var s=null===(i=null===e||void 0===e?void 0:e[t])||void 0===i?void 0:i.animation;if(!1===s)return[];var u=null===s||void 0===s?void 0:s[n];if(!1===u)return[];var l=null===(a=zC(e)[t])||void 0===a?void 0:a.animation,c=function(){return function(e){if("string"===typeof e){return DC(RC.ANIMATION,e)||(BC.warn("The animation of ".concat(e," is not registered.")),[])}return e}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},PC),RE(o)&&o),e),RE(r)&&r)}))};if(u)return c(u);if(!l)return[];var h=l[n];return!1===h?[]:c(h)}function XC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!r&&0===e&&0===t&&0===n)return null;if(Array.isArray(r)){for(var i=-1,a=[],o=0;o<r.length;o++){var s=r[o];if("translate"===s[0]){if(s[1]===e&&s[2]===t)return null;i=o,a.push(["translate",e,t])}else if("translate3d"===s[0]){if(s[1]===e&&s[2]===t&&s[3]===n)return null;i=o,a.push(["translate3d",e,t,null!==n&&void 0!==n?n:0])}else a.push(s)}return-1===i&&a.splice(0,0,kx(n)?["translate3d",e,t,null!==n&&void 0!==n?n:0]:["translate",e,t]),0===a.length?null:a}var u=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?"translate(".concat(e,", ").concat(t,")").concat(u):"translate3d(".concat(e,", ").concat(t,", ").concat(n,")").concat(u)}var YC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},qC=function(e,t,n){if(!n.length)return null;var r,i=x(t,2),a=i[0],o=i[1],s=n.map((function(t){var n=t.fields,i=t.shape,s=(t.states,YC(t,["fields","shape","states"])),u=function(t){var n;if(t){var r=e.getShape(t);if(!r)return null;var i="get".concat(SC(t),"Style"),s=(null===(n=null===e||void 0===e?void 0:e[i])||void 0===n?void 0:n.bind(e))||function(e){return e};return{shape:r,fromStyle:(null===s||void 0===s?void 0:s(a))||{},toStyle:(null===s||void 0===s?void 0:s(o))||{}}}return{shape:e,fromStyle:a,toStyle:o}}(i);if(!u)return null;var l=u.shape,c=u.fromStyle,h=u.toStyle,d=[{},{}];if(n.forEach((function(e){var t,n;Object.assign(d[0],P({},e,null!==(t=c[e])&&void 0!==t?t:jC(e))),Object.assign(d[1],P({},e,null!==(n=h[e])&&void 0!==n?n:jC(e)))})),d.some((function(e){return Object.keys(e).some((function(e){return["x","y","z"].includes(e)}))}))){var f=l.attributes||{},p=f.x,v=void 0===p?0:p,g=f.y,m=void 0===g?0:g,y=f.z,b=f.transform,x=void 0===b?"":b;d.forEach((function(e){var t,n,r;e.transform=XC(null!==(t=e.x)&&void 0!==t?t:v,null!==(n=e.y)&&void 0!==n?n:m,null!==(r=e.z)&&void 0!==r?r:y,x)}))}var E=l.animate(HC(d),s);return void 0===i&&(r=E),E})).filter(Boolean),u=r||(null===s||void 0===s?void 0:s[0]);return u?GC(u,s.filter((function(e){return e!==e}))):null},KC=[{fields:["x","y"]}],ZC=KC,JC=[{fields:["sourceNode","targetNode"]}],QC=JC,$C=[{fields:["childrenNode","x","y"]}],eP=$C,tP=Object.prototype.hasOwnProperty;var nP=function(e,t){if(!t||!cE(e))return{};for(var n,r={},i=PE(t)?t:function(e){return e[t]},a=0;a<e.length;a++){var o=e[a];n=i(o),tP.call(r,n)?r[n].push(o):r[n]=[o]}return r},rP=function(e,t,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,o=e.apply(i,a),r||(i=a=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return i=this,a=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=l,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l},iP=function(e){if("object"!==typeof e||null===e)return e;var t;if(cE(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"===typeof e[n]&&null!=e[n]?t[n]=iP(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"===typeof e[i]&&null!=e[i]?t[i]=iP(e[i]):t[i]=e[i];return t},aP=iP;function oP(e){return e instanceof Float32Array||!(!Array.isArray(e)||2!==e.length&&3!==e.length)&&e.every((function(e){return"number"===typeof e}))}function sP(e,t,n){return e>=t&&e<=n}function uP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Array.isArray(e)){var t=x(e,4),n=t[0],r=void 0===n?0:n,i=t[1],a=void 0===i?r:i,o=t[2],s=void 0===o?r:o,u=t[3];return[r,a,s,void 0===u?a:u]}return[e,e,e,e]}function lP(){var e=uP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return e[0]+e[2]}function cP(e){return e.max[0]-e.min[0]}function hP(e){return e.max[1]-e.min[1]}function dP(e){return[cP(e),hP(e)]}function fP(e,t){var n=oP(e)?pP(e):e.getShape("key").getBounds();return t?vP(n,t):n}function pP(e){var t=x(e,3),n=t[0],r=t[1],i=t[2],a=void 0===i?0:i,o=new Vw;return o.setMinMax([n,r,a],[n,r,a]),o}function vP(e,t){var n=x(uP(t),4),r=n[0],i=n[1],a=n[2],o=n[3],s=x(e.min,3),u=s[0],l=s[1],c=s[2],h=x(e.max,3),d=h[0],f=h[1],p=h[2],v=new Vw;return v.setMinMax([u-o,l-r,c],[d+i,f+a,p]),v}function gP(e){if(0===e.length)return new Vw;if(1===e.length)return e[0];var t=new Vw;t.setMinMax(e[0].min,e[0].max);for(var n=1;n<e.length;n++){var r=e[n];t.setMinMax([Math.min(t.min[0],r.min[0]),Math.min(t.min[1],r.min[1]),Math.min(t.min[2],r.min[2])],[Math.max(t.max[0],r.max[0]),Math.max(t.max[1],r.max[1]),Math.max(t.max[2],r.max[2])])}return t}function mP(e,t){return sP(e[0],t.min[0],t.max[0])&&sP(e[1],t.min[1],t.max[1])}function yP(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=x(t.min,2),i=r[0],a=r[1],o=x(t.max,2),s=o[0],u=o[1],l=(e[1]===a||e[1]===u)&&(n||sP(e[0],i,s)),c=(e[0]===i||e[0]===s)&&(n||sP(e[1],a,u));return l||c}function bP(e,t){var n=t.center;return e[0]===n[0]&&e[1]===n[1]}function xP(e,t){var n=x(e,2),r=n[0],i=n[1],a=x(t.min,2),o=a[0],s=a[1],u=x(t.max,2),l=r-o,c=u[0]-r,h=i-s,d=u[1]-i,f=Math.min(l,c,h,d);return f===l?"left":f===c?"right":f===h?"top":f===d?"bottom":"left"}function EP(e,t){var n=aP(e);if(mP(e,t)){switch(xP(e,t)){case"left":n[0]=t.min[0];break;case"right":n[0]=t.max[0];break;case"top":n[1]=t.min[1];break;case"bottom":n[1]=t.max[1]}}else{var r=x(e,2),i=r[0],a=r[1],o=x(t.min,2),s=o[0],u=o[1],l=x(t.max,2),c=l[0],h=l[1];n[0]=sP(i,s,c)?i:i<s?s:c,n[1]=sP(a,u,h)?a:a<u?u:h}return n}var wP=function(e,t){return e===t},kP=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}(),SP=function(){function e(e){void 0===e&&(e=wP),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new kP(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new kP(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var a=this.head;a;){if(i&&i(a.value))return a;if(void 0!==n&&this.compare(a.value,n))return a;a=a.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),_P=(function(){function e(){this.linkedList=new SP}e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)}}(),function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));if("target"===n){return r.filter((function(t){return t.source===e})).map((function(e){return e.target}))}if("source"===n){return r.filter((function(t){return t.target===e})).map((function(e){return e.source}))}return r.map((function(t){return t.source===e?t.target:t.source}))}),MP=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))};var TP=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),a.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t},AP=TP;var CP={}.toString,PP=function(e,t){return CP.call(e)==="[object "+t+"]"},RP=function(e){return PP(e,"Function")},NP=function(e){return Array.isArray?Array.isArray(e):PP(e,"Array")};var OP=function(e,t){if(e)if(NP(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t}(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break};Object.keys;var LP=Array.prototype,DP=(LP.splice,LP.indexOf,Array.prototype.splice,function(e){return PP(e,"String")});Object.prototype.hasOwnProperty;var IP=function(e){return PP(e,"Number")},FP=(Number.isInteger&&Number.isInteger,Math.PI,Math.PI,Object.values?function(e){return Object.values(e)}:function(e){var t=[];return OP(e,(function(n,r){RP(e)&&"prototype"===r||t.push(n)})),t});Object.prototype;var UP=function(e){if("object"!==typeof e||null===e)return e;var t;if(NP(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"===typeof e[n]&&null!=e[n]?t[n]=UP(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"===typeof e[i]&&null!=e[i]?t[i]=UP(e[i]):t[i]=e[i];return t},BP=UP;Object.prototype.hasOwnProperty;Object.prototype.hasOwnProperty,function(e,t){if(!RP(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s};n.cache=new Map}((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return zP||(zP=document.createElement("canvas").getContext("2d")),zP.font=[a,o,i,n+"px",r].join(" "),zP.measureText(DP(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Dx([e],FP(t)).join("")})),function(){function e(){this.map={}}e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length}}();var zP,GP=function(e,t,n,r){var i=e.nodes,a=void 0===i?[]:i,o=e.edges,s=void 0===o?[]:o,u=[],l={},c={},h={};a.forEach((function(e,n){var r=e.id;u.push(r),c[r]=1/0,r===t&&(c[r]=0)}));for(var d=a.length,f=function(e){var t=function(e,t,n){for(var r,i=1/0,a=0;a<t.length;a++){var o=t[a].id;!n[o]&&e[o]<=i&&(i=e[o],r=t[a])}return r}(c,a,l),i=t.id;if(l[i]=!0,c[i]===1/0)return"continue";var o=[];o=n?function(e,t){return t.filter((function(t){return t.source===e}))}(i,s):MP(i,s),o.forEach((function(e){var n=e.target,a=e.source,o=n===i?a:n,s=r&&e[r]?e[r]:1;c[o]>c[t.id]+s?(c[o]=c[t.id]+s,h[o]=[t.id]):c[o]===c[t.id]+s&&h[o].push(t.id)}))},p=0;p<d;p++)f();h[t]=[t];var v={};for(var g in c)c[g]!==1/0&&HP(t,g,h,v);var m={};for(var g in v)m[g]=v[g][0];return{length:c,path:m,allPath:v}};function HP(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var i=[],a=0,o=n[t];a<o.length;a++){var s=HP(e,o[a],n,r);if(!s)return;for(var u=0,l=s;u<l.length;u++){var c=l[u];NP(c)?i.push(Ix(Ix([],c,!0),[t],!1)):i.push([c,t])}}return r[t]=i,r[t]}var jP,VP=function(e,t,n,r,i){var a=GP(e,t,r,i),o=a.length,s=a.path,u=a.allPath;return{length:o[n],path:s[n],allPath:u[n]}};!function(){function e(e){this.arr=e}e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null===r||void 0===r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+r[a];return new e(i)}},e.prototype.subtract=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null===r||void 0===r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-r[a];return new e(i)}},e.prototype.avg=function(t){var n=[];if(0!==t)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return r}},e.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},e.prototype.normalize=function(){var t=[],n=BP(this.arr);n.sort((function(e,t){return e-t}));var r=n[n.length-1],i=n[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(r-i);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*e.arr[i];return r}console.error("The two vectors are unequal in length.")},e.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null===n||void 0===n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0}}();!function(e){e.EuclideanDistance="euclideanDistance"}(jP||(jP={}));!function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)}}();var WP=function(e,t){return e-t},XP=(function(){function e(e){void 0===e&&(e=WP),this.compareFn=e,this.list=[]}e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),a=this.list.length;null!==r&&r<a&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<a&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))}}(),function(e,t,n){"number"!==typeof t&&(t=1e-6),"number"!==typeof n&&(n=.85);for(var r,i=1,a=0,o=1e3,s=e.nodes,u=void 0===s?[]:s,l=e.edges,c=void 0===l?[]:l,h=u.length,d={},f={},p=0;p<h;++p){d[g=(E=u[p]).id]=1/h,f[g]=1/h}for(var v=AP(e);o>0&&i>t;){a=0;for(p=0;p<h;++p){var g=(E=u[p]).id;if(r=0,0===v[E.id].inDegree)d[g]=0;else{for(var m=_P(g,c,"source"),y=0;y<m.length;++y){var b=m[y],x=v[b].outDegree;x>0&&(r+=f[b]/x)}d[g]=n*r,a+=d[g]}}a=(1-a)/h,i=0;for(p=0;p<h;++p){var E;r=d[g=(E=u[p]).id]+a,i+=Math.abs(r-f[g]),f[g]=r}o-=1}return f}),YP="-1",qP=function(e,t,n,r){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e,this.from=t,this.to=n,this.label=r},KP=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=YP),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),ZP=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new KP(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new qP(e,t,n,r);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var a=new qP(e,n,t,r);this.nodeMap[n].addEdge(a),this.edgeLabelMap[r].push(a)}}},e}(),JP=function(){function e(e,t,n,r,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||YP,edgeLabel:r||"-1",nodeLabel2:i||YP}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),QP=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new JP(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var n=new ZP(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,i=e.nodeEdgeNodeLabel,a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;a!==YP&&n.addNode(t,a),s!==YP&&n.addNode(r,s),a!==YP&&s!==a&&n.addEdge(void 0,t,r,o)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(void 0===e||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),$P=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}();(function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,i=e.minNodeNum,a=void 0===i?1:i,o=e.maxNodeNum,s=void 0===o?4:o,u=e.top,l=void 0===u?10:u,c=e.directed,h=void 0!==c&&c,d=e.verbose,f=void 0!==d&&d;this.graphs=t,this.dfsCode=new QP,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=l,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=a,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,a=i[n.to].edges,o=a.length,s=0;s<o;s++){var u=a[s];if(!r.hasEdge(u)&&u.to===t.from)if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=u.label)return u}else if(t.label<u.label||t.label===u.label&&i[t.to].label<=i[n.to].label)return u}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],a=t.to,o=e.nodeMap[a].edges,s=o.length,u=0;u<s;u++){var l=o[u],c=e.nodeMap[l.to];n<=c.label&&!r.hasNode(c)&&i.push(l)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],a=e.nodeMap,o=a[t.to].label,s=a[t.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],h=a[c.to].label;t.to===c.to||n>h||r.hasNode(a[c.to])||(t.label<c.label||t.label===c.label&&o<=h)&&i.push(c)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],i=r.nodeLabel1,a=r.edgeLabel,o=r.nodeLabel2;t?(i<t.nodeLabel1||i===t.nodeLabel1&&a<t.edgeLabel||i===t.nodeLabel1&&a===t.edgeLabel&&o<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:a,nodeLabel2:o}):t={nodeLabel1:i,edgeLabel:a,nodeLabel2:o}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(-1,n),i=r.nodeMap,a=new QP,o={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=i[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(n.label);o[a]||(o[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};o[a].projected.push(s)}))}));var s=this.findMinLabel(o);if(s){a.dfsEdgeList.push(new JP(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function o(s){for(var u=a.buildRmpath(),l=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=a.dfsEdgeList[u[0]].toNode,h={},d=!1,f=0,p=n?-1:0,v=function(t){if(d)return"break";s.forEach((function(n){var i=new $P(n),o=e.findBackwardEdge(r,i.edges[u[t]],i.edges[u[0]],i);o&&(h[o.label]||(h[o.label]={projected:[],edgeLabel:o.label}),h[o.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=a.dfsEdgeList[u[t]].fromNode,d=!0)}))},g=u.length-1;g>p;g--){if("break"===v(g))break}if(d){var m=e.findMinLabel(h);a.dfsEdgeList.push(new JP(c,f,YP,m.edgeLabel,YP));var y=a.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===a.dfsEdgeList[y]&&o(h[m.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(t){var n=new $P(t),a=e.findForwardPureEdges(r,n.edges[u[0]],l,n);a.length>0&&(d=!0,x=c,a.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var E=u.length,w=function(t){if(d)return"break";var n=u[t];s.forEach((function(t){var o=new $P(t),s=e.findForwardRmpathEdges(r,o.edges[n],l,o);s.length>0&&(d=!0,x=a.dfsEdgeList[n].fromNode,s.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(g=0;g<E;g++){if("break"===w(g))break}if(!d)return!0;var k=e.findMinLabel(b);a.dfsEdgeList.push(new JP(x,c+1,YP,k.edgeLabel,k.nodeLabel2));var S=a.dfsEdgeList.length-1;return t.dfsEdgeList[S]===a.dfsEdgeList[S]&&o(b["".concat(k.edgeLabel,"-").concat(k.nodeLabel2)].projected)}(o[u].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(BP(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,o={},s={};e.forEach((function(e){for(var u=t.graphs[e.graphId],l=u.nodeMap,c=new $P(e),h=r.length-1;h>=0;h--){var d=t.findBackwardEdge(u,c.edges[r[h]],c.edges[r[0]],c);if(d){var f="".concat(t.dfsCode.dfsEdgeList[r[h]].fromNode,"-").concat(d.label);s[f]||(s[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[h]].fromNode,edgeLabel:d.label}),s[f].projected.push({graphId:e.graphId,edge:d,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(u,c.edges[r[0]],a,c).forEach((function(t){var n="".concat(i,"-").concat(t.label,"-").concat(l[t.to].label);o[n]||(o[n]={projected:[],fromNodeId:i,edgeLabel:t.label,nodeLabel2:l[t.to].label}),o[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(u,c.edges[r[n]],a,c).forEach((function(i){var a="".concat(t.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(l[i.to].label);o[a]||(o[a]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:l[i.to].label}),o[a].projected.push({graphId:e.graphId,edge:i,preNode:e})}))};for(h=0;h<r.length;h++)p(h)}})),Object.keys(s).forEach((function(e){var n=s[e],r=n.toNodeId,a=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new JP(i,r,"-1",a,"-1")),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(o).forEach((function(e){var n=o[e],r=n.fromNodeId,a=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new JP(r,i+1,YP,a,s)),t.subGraphMining(o[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},a={},o={},s={};return Object.keys(e).forEach((function(n){var r=e[n],u=r.nodeMap;r.nodes.forEach((function(e,r){var l=e.label,c="".concat(n,"-").concat(l);if(!o[c]){var h=i[l]||0;h++,i[l]=h}o[c]={graphKey:n,label:l},e.edges.forEach((function(e){var r=l,i=u[e.to].label;if(!t&&r>i){var o=i;i=r,r=o}var c=e.label,h="".concat(n,"-").concat(r,"-").concat(c,"-").concat(i),d="".concat(r,"-").concat(c,"-").concat(i);if(!a[d]){var f=a[d]||0;f++,a[d]=f}s[h]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,n=(this.directed,{});Object.keys(t).forEach((function(r){var i=t[r],a=i.nodeMap;i.nodes.forEach((function(t){e.findForwardRootEdges(i,t).forEach((function(e){var i=a[e.to],o="".concat(t.label,"-").concat(e.label,"-").concat(i.label);n[o]||(n[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[o].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],i=r.projected,a=r.nodeLabel1,o=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new JP(0,1,a,o,s)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()}))}}})(),function(){function e(e){void 0===e&&(e=10),this.linkedList=new SP,this.maxStep=e}Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()}}();function eR(e){if(void 0!==e.id)return e.id;if(void 0!==e.source&&void 0!==e.target)return"".concat(e.source,"-").concat(e.target);throw new Error(UC("The datum does not have available id."))}function tR(e){return e.combo}function nR(e,t){var n={nodes:(e.nodes||[]).map(eR),edges:(e.edges||[]).map(eR),combos:(e.combos||[]).map(eR)};return t?Object.values(n).flat():n}var rR=function(e,t,n){var r;switch(n.type){case"degree":var i=new Map;return null===(r=e.nodes)||void 0===r||r.forEach((function(e){var r=t(eR(e),n.direction).length;i.set(eR(e),r)})),i;case"betweenness":return aR(e,n.directed,n.weightPropertyName);case"closeness":return oR(e,n.directed,n.weightPropertyName);case"eigenvector":return uR(e,n.directed);case"pagerank":return sR(e,n.epsilon,n.linkProb);default:return iR(e)}},iR=function(e){var t,n=new Map;return null===(t=e.nodes)||void 0===t||t.forEach((function(e){n.set(eR(e),0)})),n},aR=function(e,t,n){var r=iR(e),i=e.nodes,a=void 0===i?[]:i;return a.forEach((function(i){a.forEach((function(a){if(i!==a){var o=VP(e,eR(i),eR(a),t,n).allPath,s=o.length;o.flat().forEach((function(e){e!==eR(i)&&e!==eR(a)&&r.set(e,r.get(e)+1/s)}))}}))})),r},oR=function(e,t,n){var r=new Map,i=e.nodes,a=void 0===i?[]:i;return a.forEach((function(i){var o=a.reduce((function(r,a){i!==a&&(r+=VP(e,eR(i),eR(a),t,n).length);return r}),0);r.set(eR(i),1/o)})),r},sR=function(e,t,n){var r,i=new Map,a=XP(e,t,n);return null===(r=e.nodes)||void 0===r||r.forEach((function(e){i.set(eR(e),a[eR(e)])})),i},uR=function(e,t){var n=e.nodes,r=void 0===n?[]:n,i=lR(e,t),a=cR(i,r.length),o=new Map;return r.forEach((function(e,t){o.set(eR(e),a[t])})),o},lR=function(e,t){var n=e.nodes,r=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,o=Array(r.length).fill(null).map((function(){return Array(r.length).fill(0)}));return a.forEach((function(e){var n=e.source,i=e.target,a=r.findIndex((function(e){return eR(e)===n})),s=r.findIndex((function(e){return eR(e)===i}));t?o[a][s]=1:(o[a][s]=1,o[s][a]=1)})),o},cR=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6,i=Array(t).fill(1),a=1/0,o=0;o<n&&a>r;o++){for(var s=Array(t).fill(0),u=0;u<t;u++)for(var l=0;l<t;l++)s[u]+=e[u][l]*i[l];for(var c=Math.sqrt(s.reduce((function(e,t){return e+t*t}),0)),h=0;h<t;h++)s[h]/=c;a=Math.sqrt(s.reduce((function(e,t,n){return e+(t-i[n])*t}),0)),i=s}return i};function hR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:AC,i=new Map(e.map((function(e){return[n(e),e]}))),a=new Map(t.map((function(e){return[n(e),e]}))),o=new Set(i.keys()),s=new Set(a.keys()),u=[],l=[],c=[],h=[];return s.forEach((function(e){o.has(e)?r(i.get(e),a.get(e))?h.push(a.get(e)):l.push(a.get(e)):u.push(a.get(e))})),o.forEach((function(e){s.has(e)||c.push(i.get(e))})),{enter:u,exit:c,keep:h,update:l}}function dR(e,t,n){e.forEach((function(e){!function(e){n&&!n(e)||(e.style.visibility=t)}(e)}))}var fR=function(){return p((function e(t){v(this,e),this.extensions=[],this.extensionMap={},this.context=t}),[{key:"setExtensions",value:function(e){var t=function(e,t,n){var r={},i=function(e){return e in r||(r[e]=0),"".concat(t,"-").concat(e,"-").concat(r[e]++)};return n.map((function(t){return"string"===typeof t?{type:t,key:i(t)}:"function"===typeof t?t.call(e):t.key?t:Object.assign(Object.assign({},t),{key:i(t.type)})}))}(this.context.graph,this.category,e),n=hR(this.extensions,t,(function(e){return e.key})),r=n.enter,i=n.update,a=n.exit,o=n.keep;this.createExtensions(r),this.updateExtensions([].concat(I(i),I(o))),this.destroyExtensions(a),this.extensions=t}},{key:"createExtension",value:function(e){var t=this.category,n=e.key,r=e.type,i=DC(t,r);if(!i)return BC.warn("The extension ".concat(r," of ").concat(t," is not registered."));var a=new i(this.context,e);this.extensionMap[n]=a}},{key:"createExtensions",value:function(e){var t=this;e.forEach((function(e){return t.createExtension(e)}))}},{key:"updateExtension",value:function(e){var t=e.key,n=this.extensionMap[t];n&&n.update(e)}},{key:"updateExtensions",value:function(e){var t=this;e.forEach((function(e){return t.updateExtension(e)}))}},{key:"destroyExtension",value:function(e){var t=this.extensionMap[e];t&&(t.destroy(),delete this.extensionMap[e])}},{key:"destroyExtensions",value:function(e){var t=this;e.forEach((function(e){var n=e.key;return t.destroyExtension(n)}))}},{key:"destroy",value:function(){Object.values(this.extensionMap).forEach((function(e){return e.destroy()})),this.context={},this.extensions=[],this.extensionMap={}}}])}(),pR=function(){return p((function e(t,n){v(this,e),this.events=[],this.destroyed=!1,this.context=t,this.options=n}),[{key:"update",value:function(e){this.options=Object.assign(this.options,e)}},{key:"destroy",value:function(){this.context={},this.options={},this.destroyed=!0}}])}(),vR=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(pR),gR=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).isOverlapping=function(e,t){return t.some((function(t){return e.intersects(t)}))},r.occupiedBounds=[],r.detectLabelCollision=function(e){var t=r.context.viewport,n={show:[],hide:[]};return r.occupiedBounds=[],e.forEach((function(e){var i=e.getShape("label").getRenderBounds();t.isInViewport(i,!0)&&!r.isOverlapping(i,r.occupiedBounds)?(n.show.push(e),r.occupiedBounds.push(vP(i,r.options.padding))):n.hide.push(e)})),n},r.hideLabelIfExceedViewport=function(e,t){var n=hR(e,t,(function(e){return e.id})).exit;null===n||void 0===n||n.forEach(r.hideLabel)},r.nodeCentralities=new Map,r.sortNodesByCentrality=function(e,t){var n=r.context.model,i=n.getData(),a=n.getRelatedEdgesData.bind(n);return e.map((function(e){return r.nodeCentralities.has(e.id)||(r.nodeCentralities=rR(i,a,t)),{node:e,centrality:r.nodeCentralities.get(e.id)}})).sort((function(e,t){return t.centrality-e.centrality})).map((function(e){return e.node}))},r.sortLabelElementsInView=function(e){var t=r.options,n=t.sort,i=t.sortNode,a=t.sortCombo,o=t.sortEdge,s=r.context.model;if(PE(n))return e.sort((function(e,t){return n(s.getElementDataById(e.id),s.getElementDataById(t.id))}));var u=nP(e,(function(e){return e.type})),l=u.node,c=void 0===l?[]:l,h=u.edge,d=void 0===h?[]:h,f=u.combo,p=void 0===f?[]:f,v=PE(a)?p.sort((function(e,t){return a.apply(void 0,I(s.getComboData([e.id,t.id])))})):p,g=PE(i)?c.sort((function(e,t){return i.apply(void 0,I(s.getNodeData([e.id,t.id])))})):r.sortNodesByCentrality(c,i),m=PE(o)?d.sort((function(e,t){return o.apply(void 0,I(s.getEdgeData([e.id,t.id])))})):d;return[].concat(I(v),I(g),I(m))},r.labelElementsInView=[],r.isFirstRender=!0,r.onToggleVisibility=function(e){var t;if("zIndex"!==(null===(t=e.data)||void 0===t?void 0:t.stage))if(r.validate(e)){var n=r.isFirstRender?r.getLabelElements():r.getLabelElementsInView();r.hideLabelIfExceedViewport(r.labelElementsInView,n),r.labelElementsInView=n;for(var i=r.sortLabelElementsInView(r.labelElementsInView),a=r.detectLabelCollision(i),o=a.show,s=a.hide,u=o.length-1;u>=0;u--)r.showLabel(o[u]);s.forEach(r.hideLabel)}else r.hiddenElements.size>0&&(r.hiddenElements.forEach(r.showLabel),r.hiddenElements.clear())},r.hiddenElements=new Map,r.hideLabel=function(e){var t=e.getShape("label");t&&dR(t,"hidden"),r.hiddenElements.set(e.id,e)},r.showLabel=function(e){var t=e.getShape("label");t&&dR(t,"visible"),e.toFront(),r.hiddenElements.delete(e.id)},r.onTransform=rP(r.onToggleVisibility,r.options.throttle,{leading:!0}),r.enableToggle=!0,r.toggle=function(e){r.enableToggle&&r.onToggleVisibility(e)},r.onBeforeRender=function(){r.enableToggle=!1},r.onAfterRender=function(e){r.onToggleVisibility(e),r.enableToggle=!0},r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents(),this.onToggleVisibility({})}},{key:"getLabelElements",value:function(){var e=this.context.element.elementMap,t=[];for(var n in e){var r=e[n];r.isVisible()&&r.getShape("label")&&t.push(r)}return t}},{key:"getLabelElementsInView",value:function(){var e=this.context.viewport;return this.getLabelElements().filter((function(t){return e.isInViewport(t.getShape("key").getRenderBounds())}))}},{key:"bindEvents",value:function(){var e=this.context.graph;e.on(xC.BEFORE_RENDER,this.onBeforeRender),e.on(xC.AFTER_RENDER,this.onAfterRender),e.on(xC.AFTER_DRAW,this.toggle),e.on(xC.AFTER_LAYOUT,this.toggle),e.on(xC.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(xC.BEFORE_RENDER,this.onBeforeRender),e.off(xC.AFTER_RENDER,this.onAfterRender),e.off(xC.AFTER_DRAW,this.toggle),e.off(xC.AFTER_LAYOUT,this.toggle),e.off(xC.AFTER_TRANSFORM,this.onTransform)}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);gR.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};var mR=function(e){if(!_C(e)||!AE(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function yR(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function bR(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(yR(t,i)){var a=t[i];null!==a&&mR(a)?(mR(e[i])||(e[i]={}),n<r?bR(e[i],a,n+1,r):e[i]=t[i]):cE(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}var xR=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)bR(e,t[r]);return e},ER=[0,0,0];function wR(e,t){return e.map((function(e,n){return e+t[n]}))}function kR(e,t){return e.map((function(e,n){return e-t[n]}))}function SR(e,t){return"number"===typeof t?e.map((function(e){return e*t})):e.map((function(e,n){return e*t[n]}))}function _R(e,t){return"number"===typeof t?e.map((function(e){return e/t})):e.map((function(e,n){return e/t[n]}))}function MR(e,t){return e.map((function(e){return e*t}))}function TR(e,t){return Math.sqrt(e.reduce((function(e,n,r){return e+Math.pow(n-t[r]||0,2)}),0))}function AR(e,t){return e.reduce((function(e,n,r){return e+Math.abs(n-t[r])}),0)}function CR(e){var t=e.reduce((function(e,t){return e+Math.pow(t,2)}),0);return e.map((function(e){return e/Math.sqrt(t)}))}function PR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e[0]*t[1]-e[1]*t[0],i=Math.acos(SR(e,t).reduce((function(e,t){return e+t}),0)/(TR(e,ER)*TR(t,ER)));return n&&r<0&&(i=2*Math.PI-i),i}function RR(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[-e[1],e[0]]:[e[1],-e[0]]}function NR(e){return[e[0],e[1]]}function OR(e){return function(e){return 2===e.length}(e)?[e[0],e[1],0]:e}function LR(e){var t=x(e,2),n=t[0],r=t[1];return n||r?Math.atan2(r,n):0}function DR(e,t){var n=x(e,2),r=n[0],i=n[1],a=x(t,2),o=a[0],s=a[1];return function(e,t){var n=OR(e),r=OR(t);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]}(kR(r,i),kR(o,s)).every((function(e){return 0===e}))}function IR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!DR(e,t)){var r=x(e,2),i=r[0],a=r[1],o=x(t,2),s=o[0],u=o[1],l=((i[0]-s[0])*(s[1]-u[1])-(i[1]-s[1])*(s[0]-u[0]))/((i[0]-a[0])*(s[1]-u[1])-(i[1]-a[1])*(s[0]-u[0])),c=u[0]-s[0]?(i[0]-s[0]+l*(a[0]-i[0]))/(u[0]-s[0]):(i[1]-s[1]+l*(a[1]-i[1]))/(u[1]-s[1]);if(n||sP(l,0,1)&&sP(c,0,1))return[i[0]+l*(a[0]-i[0]),i[1]+l*(a[1]-i[1])]}}function FR(e){if(Array.isArray(e))return sP(e[0],0,1)&&sP(e[1],0,1)?e:[.5,.5];var t=e.split("-");return[t.includes("left")?0:t.includes("right")?1:.5,t.includes("top")?0:t.includes("bottom")?1:.5]}function UR(e){var t=e.style||{},n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.z;return[+r,+a,+(void 0===o?0:o)]}function BR(e){var t=e.style||{},n=t.x,r=t.y,i=t.z;return void 0!==n||void 0!==r||void 0!==i}function zR(e,t){var n=x(t,2),r=n[0],i=n[1],a=e.min,o=e.max;return[a[0]+r*(o[0]-a[0]),a[1]+i*(o[1]-a[1])]}function GR(e){return zR(e,FR(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"))}function HR(e){var t;return[e.x,e.y,null!==(t=e.z)&&void 0!==t?t:0]}function jR(e){var t;return{x:e[0],y:e[1],z:null!==(t=e[2])&&void 0!==t?t:0}}function VR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){return parseFloat(e.toFixed(t))}))}function WR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(AC(e,t))return e;var i=CR(r?kR(e,t):kR(t,e)),a=[i[0]*n,i[1]*n];return wR(NR(e),a)}function XR(e,t){return e[1]===t[1]}function YR(e,t,n){return DR([e,t],[t,n])}function qR(e,t){return[2*t[0]-e[0],2*t[1]-e[1]]}function KR(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=0;a<n.length;a++){var o=n[a],s=n[(a+1)%n.length];r&&(o=wR(t,o),s=wR(t,s));var u=IR([t,i?qR(e,t):e],[o,s]);if(u)return{point:u,line:[o,s]}}return{point:t,line:void 0}}function ZR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.center,i=kR(n?qR(e,r):e,t.center),a=Math.atan2(i[1],i[0]);if(isNaN(a))return r;var o=cP(t)/2,s=hP(t)/2;return[r[0]+o*Math.cos(a),r[1]+s*Math.sin(a)]}function JR(e,t){var n=1/0,r=[[0,0],[0,0]];return t.forEach((function(t){var i=function(e,t){var n=QR(e,t);return TR(e,n)}(e,t);i<n&&(n=i,r=t)})),r}function QR(e,t){var n=x(t[0],2),r=n[0],i=n[1],a=x(t[1],2),o=a[0],s=a[1],u=x(e,2),l=u[0],c=u[1],h=o-r,d=s-i;if(0===h&&0===d)return[r,i];var f=((l-r)*h+(c-i)*d)/(h*h+d*d);return f>1?f=1:f<0&&(f=0),[r+f*h,i+f*d]}function $R(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(e){return _R(e.reduce((function(e,t){return wR(e,t)}),[0,0]),e.length)}(e);return e.sort((function(e,r){var i=x(e,2),a=i[0],o=i[1],s=x(r,2),u=s[0],l=s[1],c=Math.atan2(o-n[1],a-n[0]),h=Math.atan2(l-n[1],u-n[0]);return t?h-c:c-h}))}function eN(e,t){return[e,[e[0],t[1]],t,[t[0],e[1]]]}var tN=function(e){return e.map((function(e){return Mx(e)?e.toLocaleLowerCase():e}))},nN=function(){return p((function e(t){var n=this;v(this,e),this.map=new Map,this.recordKey=new Set,this.onKeyDown=function(e){(null===e||void 0===e?void 0:e.key)&&(n.recordKey.add(e.key),n.trigger(e))},this.onKeyUp=function(e){(null===e||void 0===e?void 0:e.key)&&n.recordKey.delete(e.key)},this.onWheel=function(e){n.triggerExtendKey(mC.WHEEL,e)},this.onDrag=function(e){n.triggerExtendKey(mC.DRAG,e)},this.onFocus=function(){n.recordKey.clear()},this.emitter=t,this.bindEvents()}),[{key:"bind",value:function(e,t){0!==e.length&&this.map.set(e,t)}},{key:"unbind",value:function(e,t){var n=this;this.map.forEach((function(r,i){AC(i,e)&&(t&&t!==r||n.map.delete(i))}))}},{key:"unbindAll",value:function(){this.map.clear()}},{key:"match",value:function(e){var t=tN(Array.from(this.recordKey)).sort(),n=tN(e).sort();return AC(t,n)}},{key:"bindEvents",value:function(){var e,t=this.emitter;t.on(mC.KEY_DOWN,this.onKeyDown),t.on(mC.KEY_UP,this.onKeyUp),t.on(mC.WHEEL,this.onWheel),t.on(mC.DRAG,this.onDrag),null===(e=globalThis.addEventListener)||void 0===e||e.call(globalThis,"focus",this.onFocus)}},{key:"trigger",value:function(e){var t=this;this.map.forEach((function(n,r){t.match(r)&&n(e)}))}},{key:"triggerExtendKey",value:function(e,t){var n=this;this.map.forEach((function(r,i){i.includes(e)&&AC(Array.from(n.recordKey),i.filter((function(t){return t!==e})))&&r(t)}))}},{key:"destroy",value:function(){var e;this.unbindAll(),this.emitter.off(mC.KEY_DOWN,this.onKeyDown),this.emitter.off(mC.KEY_UP,this.onKeyUp),this.emitter.off(mC.WHEEL,this.onWheel),this.emitter.off(mC.DRAG,this.onDrag),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"blur",this.onFocus)}}])}(),rN=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,xR({},t.defaultOptions,n)])).shortcut=new nN(e.graph),r.onPointerDown=r.onPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.onPointerUp=r.onPointerUp.bind(r),r.clearStates=r.clearStates.bind(r),r.bindEvents(),r}return C(t,e),p(t,[{key:"onPointerDown",value:function(e){if(this.validate(e)&&this.isKeydown()&&!this.startPoint){var t=this.context,n=t.canvas,r=t.graph,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new VT({id:"g6-brush-select",style:i}),n.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}}},{key:"onPointerMove",value:function(e){var t;if(this.startPoint){var n=this.options,r=n.immediately,i=n.mode;this.endPoint=iN(e),null===(t=this.rectShape)||void 0===t||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&"default"===i&&this.updateElementsStates(eN(this.startPoint,this.endPoint))}}},{key:"onPointerUp",value:function(e){this.startPoint&&(this.endPoint?(this.endPoint=iN(e),this.updateElementsStates(eN(this.startPoint,this.endPoint)),this.clearBrush()):this.clearBrush())}},{key:"clearStates",value:function(){this.endPoint||this.clearElementsStates()}},{key:"clearElementsStates",value:function(){var e=this.context.graph,t=Object.values(e.getData()).reduce((function(e,t){return Object.assign({},e,t.reduce((function(e,t){return e[eR(t)]=[],e}),{}))}),{});e.setElementState(t,this.options.animation)}},{key:"updateElementsStates",value:function(e){var t=this.context.graph,n=this.options,r=n.enableElements,i=n.state,a=n.mode,o=n.onSelect,s=this.selector(t,e,r),u={};switch(a){case"union":s.forEach((function(e){u[e]=[].concat(I(t.getElementState(e)),[i])}));break;case"diff":s.forEach((function(e){var n=t.getElementState(e);u[e]=n.includes(i)?n.filter((function(e){return e!==i})):[].concat(I(n),[i])}));break;case"intersect":s.forEach((function(e){var n=t.getElementState(e);u[e]=n.includes(i)?[i]:[]}));break;default:s.forEach((function(e){u[e]=[i]}))}PE(o)&&(u=o(u)),t.setElementState(u,this.options.animation)}},{key:"selector",value:function(e,t,n){if(!n||0===n.length)return[];var r=[],i=e.getData();if(n.forEach((function(n){i["".concat(n,"s")].forEach((function(n){var i=eR(n);"hidden"!==e.getElementVisibility(i)&&function(e,t,n,r){var i=e[0],a=e[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n,u=0,l=s-1;u<s;l=u++){var c=t[u+n][0],h=t[u+n][1],d=t[l+n][0],f=t[l+n][1];h>a!==f>a&&i<(d-c)*(a-h)/(f-h)+c&&(o=!o)}return o}(e.getElementPosition(i),t)&&r.push(i)}))})),n.includes("edge")){var a=i.edges;null===a||void 0===a||a.forEach((function(e){var t=e.source,n=e.target;r.includes(t)&&r.includes(n)&&r.push(eR(e))}))}return r}},{key:"clearBrush",value:function(){var e;null===(e=this.rectShape)||void 0===e||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}},{key:"isKeydown",value:function(){var e=this.options.trigger,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter((function(e){return"drag"!==e})))}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"bindEvents",value:function(){var e=this.context.graph;e.on(mC.POINTER_DOWN,this.onPointerDown),e.on(mC.POINTER_MOVE,this.onPointerMove),e.on(mC.POINTER_UP,this.onPointerUp),e.on(vC.CLICK,this.clearStates)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(mC.POINTER_DOWN,this.onPointerDown),e.off(mC.POINTER_MOVE,this.onPointerMove),e.off(mC.POINTER_UP,this.onPointerUp),e.off(vC.CLICK,this.clearStates)}},{key:"update",value:function(e){this.unbindEvents(),this.options=xR(this.options,e),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);rN.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};var iN=function(e){return[e.canvas.x,e.canvas.y]},aN=.8,oN=["node","edge","combo"];function sN(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;"TB"===r&&t(e,i);var a=n(e);if(a){var o,s=D(a);try{for(s.s();!(o=s.n()).done;){sN(o.value,t,n,r,i+1)}}catch(u){s.e(u)}finally{s.f()}}"BT"===r&&t(e,i)}function uN(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"both";if("combo"===t||"node"===t)return lN(e,n,r,i);var a=e.getEdgeData(n);if(!a)return[];var o=lN(e,a.source,r-1,i),s=lN(e,a.target,r-1,i);return Array.from(new Set([].concat(I(o),I(s),[n])))}function lN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"both",i=new Set,a=new Set,o=new Set;return function(e,t,n){for(var r=[[e,0]];r.length;){var i=x(r.shift(),2),a=i[0],o=i[1];t(a,o);var s=n(a);if(s){var u,l=D(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;r.push([c,o+1])}}catch(h){l.e(h)}finally{l.f()}}}}(t,(function(t,i){i>n||(o.add(t),e.getRelatedEdgesData(t,r).forEach((function(e){var t=eR(e);!a.has(t)&&i<n&&(o.add(t),a.add(t))})))}),(function(t){return e.getRelatedEdgesData(t,r).map((function(e){return e.source===t?e.target:e.source})).filter((function(e){return!i.has(e)&&(i.add(e),!0)}))})),Array.from(o)}function cN(e){return e.states||[]}var hN=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},dN=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).onClickSelect=function(e){return hN(r,void 0,void 0,u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.updateState(e);case 4:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,e);case 5:case"end":return t.stop()}}),t,this)})))},r.onClickCanvas=function(e){return hN(r,void 0,void 0,u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.clearState();case 4:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,e);case 5:case"end":return t.stop()}}),t,this)})))},r.shortcut=new nN(e.graph),r.bindEvents(),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){var e=this,t=this.context.graph;this.unbindEvents(),oN.forEach((function(n){t.on("".concat(n,":").concat(mC.CLICK),e.onClickSelect)})),t.on(vC.CLICK,this.onClickCanvas)}},{key:"isMultipleSelect",get:function(){var e=this.options,t=e.multiple,n=e.trigger;return t&&this.shortcut.match(n)}},{key:"getNeighborIds",value:function(e){var t=e.target,n=e.targetType,r=this.context.graph,i=this.options.degree;return uN(r,n,t.id,"function"===typeof i?i(e):i).filter((function(e){return e!==t.id}))}},{key:"updateState",value:function(e){return hN(this,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d,f,p,v,g,m,y;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.options,r=n.state,i=n.unselectedState,a=n.neighborState,o=n.animation,r||a||i){t.next=3;break}return t.abrupt("return");case 3:return s=e.target,l=this.context.graph,c=l.getElementData(s.id),h=cN(c).includes(r)?"unselect":"select",d={},f=this.isMultipleSelect,p=[s.id],v=this.getNeighborIds(e),f?(Object.assign(d,this.getDataStates()),"select"===h?(m=function(e,t){e.forEach((function(e){var n=new Set(l.getElementState(e));n.add(t),n.delete(i),d[e]=Array.from(n)}))},m(p,r),m(v,a),i&&Object.keys(d).forEach((function(e){var t=d[e];t.includes(r)||t.includes(a)||t.includes(i)||d[e].push(i)}))):(y=d[s.id],d[s.id]=y.filter((function(e){return e!==r&&e!==a})),y.includes(i)||d[s.id].push(i),v.forEach((function(e){d[e]=d[e].filter((function(e){return e!==a})),d[e].includes(r)||d[e].push(i)})))):"select"===h?(Object.assign(d,this.getClearStates(!!i)),g=function(e,t){e.forEach((function(e){d[e]||(d[e]=l.getElementState(e)),d[e].push(t)}))},g(p,r),g(v,a),i&&Object.keys(d).forEach((function(e){p.includes(e)||v.includes(e)||d[e].push(i)}))):Object.assign(d,this.getClearStates()),t.next=14,l.setElementState(d,o);case 14:case"end":return t.stop()}}),t,this)})))}},{key:"getDataStates",value:function(){var e=this.context.graph.getData(),t=e.nodes,n=e.edges,r=e.combos,i={};return[].concat(I(t),I(n),I(r)).forEach((function(e){i[eR(e)]=cN(e)})),i}},{key:"getClearStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.context.graph,n=this.options,r=n.state,i=n.unselectedState,a=n.neighborState,o=new Set([r,i,a]),s=t.getData(),u=s.nodes,l=s.edges,c=s.combos,h={};return[].concat(I(u),I(l),I(c)).forEach((function(t){var n=cN(t),r=n.filter((function(e){return!o.has(e)}));(e||r.length!==n.length)&&(h[eR(t)]=r)})),h}},{key:"clearState",value:function(){return hN(this,void 0,void 0,u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.graph,e.next=3,t.setElementState(this.getClearStates(),this.options.animation);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"unbindEvents",value:function(){var e=this,t=this.context.graph;oN.forEach((function(n){t.off("".concat(n,":").concat(mC.CLICK),e.onClickSelect)})),t.off(vC.CLICK,this.onClickCanvas)}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);function fN(e){var t;return!!(null===(t=e.style)||void 0===t?void 0:t.collapsed)}dN.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};var pN=function(e,t,n){for(var r=0,i=Mx(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},vN=function(e,t,n){var r=e,i=Mx(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(RE(r[e])||(r[e]=kx(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e},gN=function(e){var t=kC(e);return t.charAt(0).toLowerCase()+t.substring(1)};function mN(e,t){if(!e.startsWith(t))return!1;var n=e[t.length];return n>="A"&&n<="Z"}function yN(e,t){return"".concat(t).concat(SC(e))}function bN(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return e;if(!mN(e,t))return e;var r=e.slice(t.length);return n?gN(r):r}function xN(e,t){var n=Object.entries(e).reduce((function(e,n){var r=x(n,2),i=r[0],a=r[1];return"className"===i||"class"===i||mN(i,t)&&Object.assign(e,P({},bN(i,t),a)),e}),{});if("opacity"in e){var r=yN("opacity",t),i=e.opacity;if(r in e){var a=e[r];Object.assign(n,{opacity:i*a})}else Object.assign(n,{opacity:i})}return n}function EN(e,t){var n=t.length;return Object.keys(e).reduce((function(r,i){i.startsWith(t)&&(r[i.slice(n)]=e[i]);return r}),{})}function wN(e,t){var n="string"===typeof t?[t]:t,r={};return Object.keys(e).forEach((function(t){n.find((function(e){return t.startsWith(e)}))||(r[t]=e[t])})),r}function kN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof e)return[e,e,e];var t=x(e,3),n=t[0],r=t[1],i=void 0===r?n:r,a=t[2];return[n,i,void 0===a?n:a]}var SN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function _N(e,t){var n=t.datum,r=t.graph;return"function"===typeof e?e.call(r,n):Object.fromEntries(Object.entries(e).map((function(e){var t=x(e,2),i=t[0],a=t[1];return"function"===typeof a?[i,a.call(r,n)]:[i,a]})))}function MN(e,t){var n=(null===e||void 0===e?void 0:e.style)||{},r=(null===t||void 0===t?void 0:t.style)||{};for(var i in n)i in r||(r[i]=n[i]);return Object.assign({},e,t,{style:r})}function TN(e){if(e)return"string"===typeof e||"function"===typeof e||Array.isArray(e)?{type:"group",field:function(e){return e.id},color:e,invert:!1}:e}function AN(e){var t="string"===typeof e?DC("palette",e):e;if("function"!==typeof t)return t}function CN(e,t){var n=2*e;return"string"===typeof t?n=e*Number(t.replace("%",""))/100:"number"===typeof t&&(n=t),isNaN(n)&&(n=2*e),n}function PN(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?arguments.length>2&&void 0!==arguments[2]?arguments[2]:1:1;return CN((e.max[0]-e.min[0])*n,t)}var RN={}.toString,NN=function(e){return RN.call(e).replace(/^\[object /,"").replace(/]$/,"")},ON=Object.prototype,LN=function(e){var t=e&&e.constructor;return e===("function"===typeof t&&t.prototype||ON)},DN=Object.prototype.hasOwnProperty;var IN=function(e){if(_x(e))return!0;if(MC(e))return!e.length;var t=NN(e);if("Map"===t||"Set"===t)return!e.size;if(LN(e))return!Object.keys(e).length;for(var n in e)if(DN.call(e,n))return!1;return!0},FN=function(e){function t(e){var n;return v(this,t),BN(e.style),(n=T(this,t,[e])).shapeMap={},n.animateMap={},n.render(n.attributes,n),n.setVisibility(),n.bindEvents(),n}return C(t,e),p(t,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"upsert",value:function(e,t,n,r,i){var a,o,s,u,l,c,h,d,f=this.shapeMap[e];if(!1!==n){var p="string"===typeof t?DC(RC.SHAPE,t):t;if(!p)throw new Error(UC("Shape ".concat(t," not found")));if(!f||f.destroyed||!(f instanceof p)){f&&(null===(s=null===i||void 0===i?void 0:i.beforeDestroy)||void 0===s||s.call(i,f),null===f||void 0===f||f.destroy(),null===(u=null===i||void 0===i?void 0:i.afterDestroy)||void 0===u||u.call(i,f)),null===(l=null===i||void 0===i?void 0:i.beforeCreate)||void 0===l||l.call(i);var v=new p({className:e,style:n});return r.appendChild(v),this.shapeMap[e]=v,null===(c=null===i||void 0===i?void 0:i.afterCreate)||void 0===c||c.call(i,v),v}return null===(h=null===i||void 0===i?void 0:i.beforeUpdate)||void 0===h||h.call(i,f),$D(f,n),null===(d=null===i||void 0===i?void 0:i.afterUpdate)||void 0===d||d.call(i,f),f}f&&(null===(a=null===i||void 0===i?void 0:i.beforeDestroy)||void 0===a||a.call(i,f),r.removeChild(f),delete this.shapeMap[e],null===(o=null===i||void 0===i?void 0:i.afterDestroy)||void 0===o||o.call(i,f))}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},this.attributes,e);BN(t),function(e,t){var n=t.zIndex,r=t.transform,i=t.transformOrigin,a=t.visibility,o=t.cursor,s=t.clipPath,u=t.component,l=BD(t,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(e.attributes,l),r&&e.setAttribute("transform",r);kx(n)&&e.setAttribute("zIndex",n);i&&e.setAttribute("transformOrigin",i);a&&e.setAttribute("visibility",a);o&&e.setAttribute("cursor",o);s&&e.setAttribute("clipPath",s);u&&e.setAttribute("component",u)}(this,t),this.render(t,this),this.setVisibility()}},{key:"bindEvents",value:function(){}},{key:"getGraphicStyle",value:function(e){return function(e){return e.x,e.y,e.z,e.class,e.className,e.transform,e.transformOrigin,e.zIndex,e.visibility,SN(e,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}(e)}},{key:"compositeShapes",get:function(){return[["badges","badge-"],["ports","port-"]]}},{key:"animate",value:function(e,n){var r=this;if(0===e.length)return null;var i=[];if(void 0!==e[0].x||void 0!==e[0].y||void 0!==e[0].z){var a=this.attributes,o=a.x,s=void 0===o?0:o,u=a.y,l=void 0===u?0:u,c=a.z,h=void 0===c?0:c;e.forEach((function(e){var t=e.x,n=void 0===t?s:t,r=e.y,i=void 0===r?l:r,a=e.z,o=void 0===a?h:a;Object.assign(e,{transform:o?[["translate3d",n,i,o]]:[["translate",n,i]]})}))}var d=Xn(S(t.prototype),"animate",this).call(this,e,n);if(d&&(UN(this,d),i.push(d)),Array.isArray(e)&&e.length>0){var f=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some((function(e){return!f.includes(e)}))){Object.entries(this.shapeMap).forEach((function(t){var a=x(t,2),o=a[0],s=a[1],u="get".concat(SC(o),"Style"),l=r[u];if(PE(l)){var c=e.map((function(e){return l.call(r,Object.assign(Object.assign({},r.attributes),e))})),h=s.animate(HC(c),n);h&&(UN(s,h),i.push(h))}}));this.compositeShapes.forEach((function(t){var a=x(t,2),o=a[0],s=a[1];!function(t,a){if(!IN(t)){var o="get".concat(SC(a),"Style"),s=r[o];if(PE(s)){var u=e.map((function(e){return s.call(r,Object.assign(Object.assign({},r.attributes),e))}));Object.entries(u[0]).map((function(e){var r=x(e,1)[0],a=u.map((function(e){return e[r]})),o=t[r];if(o){var s=o.animate(HC(a),n);s&&(UN(o,s),i.push(s))}}))}}}(EN(r.shapeMap,s),o)}))}}return GC(i)}},{key:"getShape",value:function(e){return this.shapeMap[e]}},{key:"setVisibility",value:function(){dR(this,this.attributes.visibility)}},{key:"destroy",value:function(){this.shapeMap={},this.animateMap={},Xn(S(t.prototype),"destroy",this).call(this)}}])}(PT);function UN(e,t){null===t||void 0===t||t.finished.then((function(){var n=e.activeAnimations.findIndex((function(e){return e===t}));n>-1&&e.activeAnimations.splice(n,1)}))}function BN(e){if(!e)return{};if("x"in e||"y"in e||"z"in e){var t=e.x,n=void 0===t?0:t,r=e.y,i=XC(n,void 0===r?0:r,e.z,e.transform);i&&(e.transform=i)}return e}var zN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},GN=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"isTextStyle",value:function(e){return mN(e,"label")}},{key:"isBackgroundStyle",value:function(e){return mN(e,"background")}},{key:"getTextStyle",value:function(e){var t=this.getGraphicStyle(e);t.padding;return wN(zN(t,["padding"]),"background")}},{key:"getBackgroundStyle",value:function(e){if(!1===e.background)return!1;var t=this.getGraphicStyle(e),n=t.wordWrap,r=t.wordWrapWidth,i=t.padding,a=xN(t,"background"),o=this.shapeMap.text.getGeometryBounds(),s=x(o.min,2),u=s[0],l=s[1],c=x(o.center,2),h=c[0],d=c[1],f=x(o.halfExtents,2),p=f[0],v=f[1],g=x(uP(i),4),m=g[0],y=g[1],b=g[2],E=g[3],w=2*p+E+y,k=a.width,S=a.height;k&&S?Object.assign(a,{x:h-Number(k)/2,y:d-Number(S)/2}):Object.assign(a,{x:u-E,y:l-m,width:n?Math.min(w,r+E+y):w,height:2*v+m+b});var _=a.radius;if("string"===typeof _&&_.endsWith("%")){var M=Number(_.replace("%",""))/100;a.radius=Math.min(+a.width,+a.height)*M}return a}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("text",XT,this.getTextStyle(e),t),this.upsert("background",VT,this.getBackgroundStyle(e),t)}},{key:"getGeometryBounds",value:function(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}])}(FN);GN.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};var HN=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getBadgeStyle",value:function(e){return this.getGraphicStyle(e)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("label",GN,this.getBadgeStyle(e),t)}},{key:"getGeometryBounds",value:function(){var e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}])}(FN);HN.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};var jN={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function VN(e){var t=[],n="string"===typeof e?function(e){for(var t=e.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],r="",i={},a=function(){var e=t.shift();e in jN?r=e:t.unshift(e),i={type:r},jN[r].forEach((function(n){e=t.shift(),i[n]=e})),"M"===r?r="L":"m"===r&&(r="l");var a=L(Object.values(i)),o=a[0],s=a.slice(1);n.push([o].concat(I(s.map(Number))))};t.length>0;)a();return n}(e):e;return n.forEach((function(e){var n=e[0];if("Z"!==n)if("A"!==n)for(var r=1;r<e.length;r+=2)t.push([e[r],e[r+1],0]);else{var i=e.length;t.push([e[i-2],e[i-1],0])}else t.push(t[0])})),t}var WN=function(e){if(e.length<2)return[["M",0,0],["L",0,0]];var t=e[0],n=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(i,r),e.push(t,n);for(var a=[["M",r[0],r[1]]],o=1;o<e.length-2;o+=1){var s=x(e[o-1],2),u=s[0],l=s[1],c=x(e[o],2),h=c[0],d=c[1],f=x(e[o+1],2),p=f[0],v=f[1],g=x(o!==e.length-2?e[o+2]:[p,v],2),m=h+(p-u)/6,y=d+(v-l)/6,b=p-(g[0]-h)/6,E=v-(g[1]-d)/6;a.push(["C",m,y,b,E,p,v])}return a};var XN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},YN=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getLabelStyle",value:function(e){if(!e.label||!e.d||0===e.d.length)return!1;var t=xN(this.getGraphicStyle(e),"label"),n=t.maxWidth,r=t.offsetX,i=t.offsetY,a=t.autoRotate,o=t.placement,s=t.closeToPath,u=XN(t,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),l=this.shapeMap.key,c=null===l||void 0===l?void 0:l.getRenderBounds();return Object.assign(function(e,t,n,r,i,a,o){var s=x(GR(e,t),2),u=s[0],l=s[1],c={textAlign:"left"===t?"right":"right"===t?"left":"center",textBaseline:"top"===t?"bottom":"bottom"===t?"top":"middle",transform:[["translate",u+n,l+r]]};if("center"===t||!i)return c;var h=VN(a);if(!h||h.length<=3)return c;var d=h.map((function(e,t){var n=e,r=h[(t+1)%h.length];return AC(n,r)?null:[n,r]})).filter(Boolean),f=JR([u,l],d),p=QR([u,l],f);if(p&&f&&(c.transform=[["translate",p[0]+n,p[1]+r]],o)){var v=Math.atan((f[0][1]-f[1][1])/(f[0][0]-f[1][0]));c.transform.push(["rotate",v/Math.PI*180]),c.textAlign="center","right"!==t&&"left"!==t||(c.textBaseline=v>0?"right"===t?"bottom":"top":"right"===t?"top":"bottom")}return c}(c,o,r,i,s,e.d,a),{wordWrapWidth:PN(c,n)},u)}},{key:"getKeyStyle",value:function(e){return this.getGraphicStyle(e)}},{key:"render",value:function(e,t){this.upsert("key",BT,this.getKeyStyle(e),t),this.upsert("label",GN,this.getLabelStyle(e),t)}}])}(FN);YN.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};var qN=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).onMounted=function(){n.handleRadius()},n.onAttrModified=function(){n.handleRadius()},ZN=n,n.isMutationObserved=!0,n.addEventListener(zM.MOUNTED,n.onMounted),n.addEventListener(zM.ATTR_MODIFIED,n.onAttrModified),n}return C(t,e),p(t,[{key:"handleRadius",value:function(){var e=this.attributes,t=e.radius,n=e.clipPath,r=e.width,i=void 0===r?0:r,a=e.height,o=void 0===a?0:a;if(t&&i&&o){var s=x(this.getBounds().min,2),u={x:s[0],y:s[1],radius:t,width:i,height:o};if(n)Object.assign(this.parsedStyle.clipPath.style,u);else{var l=new VT({style:u});this.style.clipPath=l}}else n&&(this.style.clipPath=null)}}])}(DT),KN=new WeakMap,ZN=null,JN=function(e){if(ZN&&function(e){for(var t=[],n=e.parentNode;n;)t.push(n),n=n.parentNode;return t}(ZN).includes(e)){var t=KN.get(e);t?t.includes(ZN)||t.push(ZN):KN.set(e,[ZN])}},QN=function(e){var t=KN.get(e);t&&t.forEach((function(e){return e.handleRadius()}))},$N=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"isImage",value:function(){return!!this.attributes.src}},{key:"getIconStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,t=e.width,n=void 0===t?0:t,r=e.height,i=void 0===r?0:r,a=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-n/2,y:-i/2},a):Object.assign({textBaseline:"middle",textAlign:"center"},a)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("icon",this.isImage()?qN:XT,this.getIconStyle(e),t)}}])}(FN),eO=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"context",get:function(){return this.config.context}},{key:"parsedAttributes",get:function(){return this.attributes}},{key:"onframe",value:function(){}},{key:"animate",value:function(e,n){var r=this,i=Xn(S(t.prototype),"animate",this).call(this,e,n);return i&&(i.onframe=function(){return r.onframe()},i.finished.then((function(){return r.onframe()}))),i}}])}(FN),tO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},nO=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[MN({style:t.defaultStyleProps},e)])).type="node",n}return C(t,e),p(t,[{key:"getSize",value:function(){return kN((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes).size)}},{key:"getKeyStyle",value:function(e){var t=this.getGraphicStyle(e);return Object.assign(wN(t,["label","halo","icon","badge","port"]))}},{key:"getLabelStyle",value:function(e){if(!1===e.label||!e.labelText)return!1;var t=xN(this.getGraphicStyle(e),"label"),n=t.placement,r=t.maxWidth,i=t.offsetX,a=t.offsetY,o=tO(t,["placement","maxWidth","offsetX","offsetY"]),s=this.getShape("key").getLocalBounds();return Object.assign(QD(s,n,i,a),{wordWrapWidth:PN(s,r)},o)}},{key:"getHaloStyle",value:function(e){if(!1===e.halo)return!1;var t=this.getKeyStyle(e),n=t.fill,r=tO(t,["fill"]),i=xN(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i)}},{key:"getIconStyle",value:function(e){if(!1===e.icon||!e.iconText&&!e.iconSrc)return!1;var t=xN(this.getGraphicStyle(e),"icon");return Object.assign(function(e,t){var n=kN(e),r={};return t.text&&!t.fontSize&&(r={fontSize:.5*Math.min.apply(Math,I(n))}),!t.src||t.width&&t.height||(r={width:.5*n[0],height:.5*n[1]}),r}(e.size,t),t)}},{key:"getBadgesStyle",value:function(e){var t,n=this,r=EN(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach((function(e){i[e]=!1})),!1===e.badge||!(null===(t=e.badges)||void 0===t?void 0:t.length))return i;var a=e.badges,o=void 0===a?[]:a,s=e.badgePalette,u=e.opacity,l=void 0===u?1:u,c=tO(e,["badges","badgePalette","opacity"]),h=AN(s),d=xN(this.getGraphicStyle(c),"badge");return o.forEach((function(e,t){i[t]=Object.assign(Object.assign({backgroundFill:h?h[t%(null===h||void 0===h?void 0:h.length)]:void 0,opacity:l},d),n.getBadgeStyle(e))})),i}},{key:"getBadgeStyle",value:function(e){var t=this.getShape("key"),n=e.placement,r=void 0===n?"top":n,i=e.offsetX,a=e.offsetY,o=tO(e,["placement","offsetX","offsetY"]),s=QD(t.getLocalBounds(),r,i,a,!0);return Object.assign(Object.assign({},s),o)}},{key:"getPortsStyle",value:function(e){var t,n=this,r=this.getPorts(),i={};if(Object.keys(r).forEach((function(e){i[e]=!1})),!1===e.port||!(null===(t=e.ports)||void 0===t?void 0:t.length))return i;var a=xN(this.getGraphicStyle(e),"port"),o=e.ports;return(void 0===o?[]:o).forEach((function(t,r){var o=t.key||r,s=Object.assign(Object.assign({},a),t);if(XD(s))i[o]=!1;else{var u=x(n.getPortXY(e,t),2),l=u[0],c=u[1];i[o]=Object.assign({transform:[["translate",l,c]]},s)}})),i}},{key:"getPortXY",value:function(e,t){var n=t.placement,r=void 0===n?"left":n,i=this.getShape("key");return VD(function(e,t){if(!e)return t.getLocalBounds();var n=e.canvas.getLayer(),r=t.cloneNode();dR(r,"hidden"),n.appendChild(r);var i=r.getLocalBounds();return r.destroy(),i}(this.context,i),r)}},{key:"getPorts",value:function(){return EN(this.shapeMap,"port-")}},{key:"getCenter",value:function(){return this.getShape("key").getBounds().center}},{key:"getIntersectPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return KR(e,GR(t,"center"),[GR(t,"left-top"),GR(t,"right-top"),GR(t,"right-bottom"),GR(t,"left-bottom")],!1,n).point}(e,this.getShape("key").getBounds(),t)}},{key:"drawHaloShape",value:function(e,t){var n=this.getHaloStyle(e),r=this.getShape("key");this.upsert("halo",r.constructor,n,t)}},{key:"drawIconShape",value:function(e,t){var n=this.getIconStyle(e);this.upsert("icon",$N,n,t),JN(this)}},{key:"drawBadgeShapes",value:function(e,t){var n=this,r=this.getBadgesStyle(e);Object.keys(r).forEach((function(e){var i=r[e];n.upsert("badge-".concat(e),HN,i,t)}))}},{key:"drawPortShapes",value:function(e,t){var n=this,r=this.getPortsStyle(e);Object.keys(r).forEach((function(e){var i=r[e],a="port-".concat(e);n.upsert(a,AT,i,t)}))}},{key:"drawLabelShape",value:function(e,t){var n=this.getLabelStyle(e);this.upsert("label",GN,n,t)}},{key:"_drawKeyShape",value:function(e,t){return this.drawKeyShape(e,t)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this._drawKeyShape(e,t),this.getShape("key")&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t))}},{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),e&&("x"in e||"y"in e||"z"in e)&&QN(this)}},{key:"onframe",value:function(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}])}(eO);nO.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};var rO=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"drawKeyShape",value:function(e,t){return this.upsert("key",AT,this.getKeyStyle(e),t)}},{key:"getKeyStyle",value:function(e){var n=Xn(S(t.prototype),"getKeyStyle",this).call(this,e);return Object.assign(Object.assign({},n),{r:Math.min.apply(Math,I(this.getSize(e)))/2})}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=2*this.getShape("key").attributes.r*aN;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getIntersectPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ZR(e,this.getShape("key").getBounds(),t)}}])}(nO);rO.defaultStyleProps={size:32};var iO=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"drawKeyShape",value:function(e,t){return this.upsert("key",GT,this.getKeyStyle(e),t)}},{key:"getKeyStyle",value:function(e){var n=Xn(S(t.prototype),"getKeyStyle",this).call(this,e);return Object.assign(Object.assign({},n),{points:this.getPoints(e)})}},{key:"getIntersectPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getShape("key").attributes.points;return KR(e,[+((null===(t=this.attributes)||void 0===t?void 0:t.x)||0),+((null===(n=this.attributes)||void 0===n?void 0:n.y)||0)],i,!0,r).point}}])}(nO),aO=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getPoints",value:function(e){var t=x(this.getSize(e),2);return function(e,t){return[[0,-t/2],[e/2,0],[0,t/2],[-e/2,0]]}(t[0],t[1])}}])}(iO),oO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},sO=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"parseOuterR",value:function(){var e=this.parsedAttributes.size;return Math.min.apply(Math,I(kN(e)))/2}},{key:"parseInnerR",value:function(){var e=this.parsedAttributes.innerR;return Mx(e)?parseInt(e)/100*this.parseOuterR():e}},{key:"drawDonutShape",value:function(e,t){var n=this,r=e.donuts;if(null===r||void 0===r?void 0:r.length){var i=r.map((function(e){return kx(e)?{value:e}:e})),a=xN(this.getGraphicStyle(e),"donut"),o=AN(e.donutPalette);if(o){var s=i.reduce((function(e,t){var n;return e+(null!==(n=t.value)&&void 0!==n?n:0)}),0),u=this.parseOuterR(),l=this.parseInnerR(),c=0;i.forEach((function(e,r){var h=e.value,d=void 0===h?0:h,f=e.color,p=void 0===f?o[r%o.length]:f,v=oO(e,["value","color"]),g=360*(0===s?1/i.length:d/s);n.upsert("round".concat(r),BT,Object.assign(Object.assign(Object.assign({},a),{d:lO(u,l,c,c+g),fill:p}),v),t),c+=g}))}}}},{key:"render",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;Xn(S(t.prototype),"render",this).call(this,e,n),this.drawDonutShape(e,n)}}])}(rO);sO.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};var uO=function(e,t,n,r){return[e+Math.sin(r)*n,t-Math.cos(r)*n]},lO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Math.abs(n-r)%360<1e-6?function(e,t,n,r){return r<=0||n<=r?[["M",e-n,t],["A",n,n,0,1,1,e+n,t],["A",n,n,0,1,1,e-n,t],["Z"]]:[["M",e-n,t],["A",n,n,0,1,1,e+n,t],["A",n,n,0,1,1,e-n,t],["Z"],["M",e+r,t],["A",r,r,0,1,0,e-r,t],["A",r,r,0,1,0,e+r,t],["Z"]]}(0,0,e,t):function(e,t,n,r,i,a){var o=i/360*2*Math.PI,s=a/360*2*Math.PI,u=[uO(e,t,r,o),uO(e,t,n,o),uO(e,t,n,s),uO(e,t,r,s)],l=s-o>Math.PI?1:0;return[["M",u[0][0],u[0][1]],["L",u[1][0],u[1][1]],["A",n,n,0,l,1,u[2][0],u[2][1]],["L",u[3][0],u[3][1]],["A",r,r,0,l,0,u[0][0],u[0][1]],["Z"]]}(0,0,e,t,n,r)},cO=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"drawKeyShape",value:function(e,t){return this.upsert("key",RT,this.getKeyStyle(e),t)}},{key:"getKeyStyle",value:function(e){var n=Xn(S(t.prototype),"getKeyStyle",this).call(this,e),r=x(this.getSize(e),2),i=r[0],a=r[1];return Object.assign(Object.assign({},n),{rx:i/2,ry:a/2})}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=this.getShape("key").attributes,i=r.rx,a=r.ry,o=2*Math.min(+i,+a)*aN;return!!n&&Object.assign({width:o,height:o},n)}},{key:"getIntersectPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ZR(e,this.getShape("key").getBounds(),t)}}])}(nO);cO.defaultStyleProps={size:[45,35]};var hO=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getOuterR",value:function(e){return e.outerR||Math.min.apply(Math,I(this.getSize(e)))/2}},{key:"getPoints",value:function(e){return[[0,t=this.getOuterR(e)],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]];var t}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=this.getOuterR(e)*aN;return!!n&&Object.assign({width:r,height:r},n)}}])}(iO);function dO(e,t){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.r;e.arc(r,a,o,0,2*Math.PI,!1)}function fO(e,t){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.rx,s=t.ry;if(e.ellipse)e.ellipse(r,a,o,s,0,0,2*Math.PI,!1);else{var u=o>s?o:s,l=o>s?1:o/s,c=o>s?s/o:1;e.save(),e.scale(l,c),e.arc(r,a,u,0,2*Math.PI)}}function pO(e,t){var n,r,i=t.x1,a=t.y1,o=t.x2,s=t.y2,u=t.markerStart,l=t.markerEnd,c=t.markerStartOffset,h=t.markerEndOffset,d=0,f=0,p=0,v=0,g=0;u&&wT(u)&&c&&(n=o-i,r=s-a,g=Math.atan2(r,n),d=Math.cos(g)*(c||0),f=Math.sin(g)*(c||0)),l&&wT(l)&&h&&(n=i-o,r=a-s,g=Math.atan2(r,n),p=Math.cos(g)*(h||0),v=Math.sin(g)*(h||0)),e.moveTo(i+d,a+f),e.lineTo(o+p,s+v)}function vO(e,t){var n,r,i=t.markerStart,a=t.markerEnd,o=t.markerStartOffset,s=t.markerEndOffset,u=t.d,l=u.absolutePath,c=u.segments,h=0,d=0,f=0,p=0,v=0;if(i&&wT(i)&&o){var g=x(i.parentNode.getStartTangent(),2),m=g[0],y=g[1];n=m[0]-y[0],r=m[1]-y[1],v=Math.atan2(r,n),h=Math.cos(v)*(o||0),d=Math.sin(v)*(o||0)}if(a&&wT(a)&&s){var b=x(a.parentNode.getEndTangent(),2),E=b[0],w=b[1];n=E[0]-w[0],r=E[1]-w[1],v=Math.atan2(r,n),f=Math.cos(v)*(s||0),p=Math.sin(v)*(s||0)}for(var k=0;k<l.length;k++){var S=l[k],_=S[0],M=l[k+1],T=0===k&&(0!==h||0!==d),A=(k===l.length-1||M&&("M"===M[0]||"Z"===M[0]))&&0!==f&&0!==p,C=x(T?[h,d]:[0,0],2),P=C[0],R=C[1],N=x(A?[f,p]:[0,0],2),O=N[0],L=N[1];switch(_){case"M":e.moveTo(S[1]+P,S[2]+R);break;case"L":e.lineTo(S[1]+O,S[2]+L);break;case"Q":e.quadraticCurveTo(S[1],S[2],S[3]+O,S[4]+L);break;case"C":e.bezierCurveTo(S[1],S[2],S[3],S[4],S[5]+O,S[6]+L);break;case"A":var D=c[k].arcParams,I=D.cx,F=D.cy,U=D.rx,B=D.ry,z=D.startAngle,G=D.endAngle,H=D.xRotation,j=D.sweepFlag;if(e.ellipse)e.ellipse(I,F,U,B,H,z,G,!!(1-j));else{var V=U>B?U:B,W=U>B?1:U/B,X=U>B?B/U:1;e.translate(I,F),e.rotate(H),e.scale(W,X),e.arc(0,0,V,z,G,!!(1-j)),e.scale(1/W,1/X),e.rotate(-H),e.translate(-I,-F)}A&&e.lineTo(S[6]+f,S[7]+p);break;case"Z":e.closePath()}}}function gO(e,t){var n,r,i=t.markerStart,a=t.markerEnd,o=t.markerStartOffset,s=t.markerEndOffset,u=t.points.points,l=u.length,c=u[0][0],h=u[0][1],d=u[l-1][0],f=u[l-1][1],p=0,v=0,g=0,m=0,y=0;i&&wT(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],y=Math.atan2(r,n),p=Math.cos(y)*(o||0),v=Math.sin(y)*(o||0)),a&&wT(a)&&s&&(n=u[l-1][0]-u[0][0],r=u[l-1][1]-u[0][1],y=Math.atan2(r,n),g=Math.cos(y)*(s||0),m=Math.sin(y)*(s||0)),e.moveTo(c+(p||g),h+(v||m));for(var b=1;b<l-1;b++){var x=u[b];e.lineTo(x[0],x[1])}e.lineTo(d,f)}function mO(e,t){var n,r,i=t.markerStart,a=t.markerEnd,o=t.markerStartOffset,s=t.markerEndOffset,u=t.points.points,l=u.length,c=u[0][0],h=u[0][1],d=u[l-1][0],f=u[l-1][1],p=0,v=0,g=0,m=0,y=0;i&&wT(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],y=Math.atan2(r,n),p=Math.cos(y)*(o||0),v=Math.sin(y)*(o||0)),a&&wT(a)&&s&&(n=u[l-2][0]-u[l-1][0],r=u[l-2][1]-u[l-1][1],y=Math.atan2(r,n),g=Math.cos(y)*(s||0),m=Math.sin(y)*(s||0)),e.moveTo(c+p,h+v);for(var b=1;b<l-1;b++){var x=u[b];e.lineTo(x[0],x[1])}e.lineTo(d+g,f+m)}function yO(e,t){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.radius,s=t.width,u=t.height,l=s,c=u;if(o&&o.some((function(e){return 0!==e}))){var h=s>0?1:-1,d=u>0?1:-1,f=h+d===0,p=x(o.map((function(e){return Tx(e,0,Math.min(Math.abs(l)/2,Math.abs(c)/2))})),4),v=p[0],g=p[1],m=p[2],y=p[3];e.moveTo(h*v+r,a),e.lineTo(l-h*g+r,a),0!==g&&e.arc(l-h*g+r,d*g+a,g,-d*Math.PI/2,h>0?0:Math.PI,f),e.lineTo(l+r,c-d*m+a),0!==m&&e.arc(l-h*m+r,c-d*m+a,m,h>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,f),e.lineTo(h*y+r,c+a),0!==y&&e.arc(h*y+r,c-d*y+a,y,d>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,f),e.lineTo(r,d*v+a),0!==v&&e.arc(h*v+r,d*v+a,v,h>0?Math.PI:0,d>0?1.5*Math.PI:Math.PI/2,f)}else e.rect(r,a,l,c)}var bO=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="canvas-path-generator",e}return C(t,e),p(t,[{key:"init",value:function(){var e,t=(P(P(P(P(P(P(P(P(P(P(e={},Lw.CIRCLE,dO),Lw.ELLIPSE,fO),Lw.RECT,yO),Lw.LINE,pO),Lw.POLYLINE,mO),Lw.POLYGON,gO),Lw.PATH,vO),Lw.TEXT,void 0),Lw.GROUP,void 0),Lw.IMAGE,void 0),P(P(P(e,Lw.HTML,void 0),Lw.MESH,void 0),Lw.FRAGMENT,void 0));this.context.pathGeneratorFactory=t}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Iw),xO=Wy(),EO=Wy(),wO=Wy(),kO=fb(),SO=function(){function e(){var t=this;v(this,e),this.isHit=function(e,n,r,i){var a=t.context.pointInPathPickerFactory[e.nodeName];if(a){var o=xb(kO,r),s=ab(EO,Zy(wO,n[0],n[1],0),o);if(a(e,new qw(s[0],s[1]),i,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(e,n){var r=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),i=t.context.pathGeneratorFactory[e.nodeName];return i&&(r.beginPath(),i(r,e.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return p(e,[{key:"apply",value:function(t,n){var r,i=this,a=t.renderingService,o=t.renderingContext;this.context=t,this.runtime=n;var s=null===(r=o.root)||void 0===r?void 0:r.ownerDocument;a.hooks.pick.tapPromise(e.tag,function(){var e=c(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.pick(s,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.hooks.pickSync.tap(e.tag,(function(e){return i.pick(s,e)}))}},{key:"pick",value:function(e,t){var n,r=t.topmost,i=t.position,a=i.x,o=i.y,s=Zy(xO,a,o,0),u=[],l=D(e.elementsFromBBox(s[0],s[1],s[0],s[1]));try{for(l.s();!(n=l.n()).done;){var c=n.value,h=c.getWorldTransform();if(this.isHit(c,s,h,!1)){var d=F_(c);if(d){var f=d.parsedStyle.clipPath;if(this.isHit(f,s,f.getWorldTransform(),!0)){if(r)return t.picked=[c],t;u.push(c)}}else{if(r)return t.picked=[c],t;u.push(c)}}}}catch(p){l.e(p)}finally{l.f()}return t.picked=u,t}}])}();function _O(e,t,n){var r=e.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.r,l=r.fill,c=r.stroke,h=r.lineWidth,d=void 0===h?1:h,f=r.increasedLineWidthForHitTesting,p=void 0===f?0:f,v=r.pointerEvents,g=void 0===v?"auto":v,m=(d+p)/2,y=dw(a,s,t.x,t.y),b=x(H_(g,l,c),2),E=b[0],w=b[1];return E&&w||n?y<=u+m:E?y<=u:!!w&&(y>=u-m&&y<=u+m)}function MO(e,t,n,r){return e/(n*n)+t/(r*r)}function TO(e,t,n){var r=e.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.rx,l=r.ry,c=r.fill,h=r.stroke,d=r.lineWidth,f=void 0===d?1:d,p=r.increasedLineWidthForHitTesting,v=void 0===p?0:p,g=r.pointerEvents,m=void 0===g?"auto":g,y=t.x,b=t.y,E=x(H_(m,c,h),2),w=E[0],k=E[1],S=(f+v)/2,_=(y-a)*(y-a),M=(b-s)*(b-s);return w&&k||n?MO(_,M,u+S,l+S)<=1:w?MO(_,M,u,l)<=1:!!k&&(MO(_,M,u-S,l-S)>=1&&MO(_,M,u+S,l+S)<=1)}function AO(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function CO(e,t,n,r,i,a,o,s){var u=(Math.atan2(s-t,o-e)+2*Math.PI)%(2*Math.PI),l={x:e+n*Math.cos(u),y:t+n*Math.sin(u)};return dw(l.x,l.y,o,s)<=a/2}function PO(e,t,n,r,i,a,o){var s=Math.min(e,n),u=Math.max(e,n),l=Math.min(t,r),c=Math.max(t,r),h=i/2;return a>=s-h&&a<=u+h&&o>=l-h&&o<=c+h&&Ew(e,t,n,r,a,o)<=i/2}function RO(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(PO(e[o][0],e[o][1],e[o+1][0],e[o+1][1],t,n,r))return!0}if(i){var s=e[0],u=e[a-1];if(PO(s[0],s[1],u[0],u[1],t,n,r))return!0}return!1}SO.tag="CanvasPicker";var NO=1e-6;function OO(e){return Math.abs(e)<NO?0:e<0?-1:1}function LO(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function DO(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=e[a],s=e[(a+1)%i];if(LO(o,s,[t,n]))return!0;OO(o[1]-n)>0!==OO(s[1]-n)>0&&OO(t-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function IO(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=DO(e[i],t,n))break}return r}function FO(e,t,n){var r=e.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.lineWidth,l=void 0===u?1:u,c=r.increasedLineWidthForHitTesting,h=void 0===c?0:c,d=r.pointerEvents;return!(!x(H_(void 0===d?"auto":d,r.fill,r.stroke),2)[1]&&!n||!l)&&PO(i,a,o,s,l+h,t.x,t.y)}function UO(e,t,n,r,i,a){var o=e.parsedStyle,s=o.lineWidth,u=void 0===s?1:s,l=o.increasedLineWidthForHitTesting,c=void 0===l?0:l,h=o.stroke,d=o.fill,f=o.d,p=o.pointerEvents,v=void 0===p?"auto":p,g=f.segments,m=f.hasArc,y=f.polylines,b=f.polygons,E=x(H_(v,(null===b||void 0===b?void 0:b.length)&&d,h),2),w=E[0],k=E[1],S=CS(e),_=!1;return w||n?_=m?r(e,t):IO(b,t.x,t.y)||IO(y,t.x,t.y):((k||n)&&(_=function(e,t,n,r,i){for(var a=!1,o=t/2,s=0;s<e.length;s++){var u=e[s],l=u.currentPoint,c=u.params,h=u.prePoint,d=u.box;if(!d||AO(d.x-o,d.y-o,d.width+t,d.height+t,n,r))switch(u.command){case"L":case"Z":if(a=PO(h[0],h[1],l[0],l[1],t,n,r))return!0;break;case"Q":if(a=Pw(h[0],h[1],c[1],c[2],c[3],c[4],n,r)<=t/2)return!0;break;case"C":if(a=_w(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=t/2)return!0;break;case"A":u.cubicParams||(u.cubicParams=yE(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var f=u.cubicParams,p=h,v=0;v<f.length;v+=6){var g=_w(p[0],p[1],f[v],f[v+1],f[v+2],f[v+3],f[v+4],f[v+5],n,r,i);if(p=[f[v+4],f[v+5]],a=g<=t/2)return!0}}}return a}(g,u+c,t.x,t.y,S)),_)}function BO(e,t,n){var r=e.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=void 0===o?1:o,u=r.increasedLineWidthForHitTesting,l=void 0===u?0:u,c=r.points,h=r.pointerEvents,d=x(H_(void 0===h?"auto":h,a,i),2),f=d[0],p=!1;return(d[1]||n)&&(p=RO(c.points,s+l,t.x,t.y,!0)),p||!f&&!n||(p=DO(c.points,t.x,t.y)),p}function zO(e,t,n){var r=e.parsedStyle,i=r.lineWidth,a=void 0===i?1:i,o=r.increasedLineWidthForHitTesting,s=void 0===o?0:o,u=r.points,l=r.pointerEvents;return!(!x(H_(void 0===l?"auto":l,r.fill,r.stroke),2)[1]&&!n||!a)&&RO(u.points,a+s,t.x,t.y,!1)}function GO(e,t,n,r,i){var a=e.parsedStyle,o=a.radius,s=a.fill,u=a.stroke,l=a.lineWidth,c=void 0===l?1:l,h=a.increasedLineWidthForHitTesting,d=void 0===h?0:h,f=a.x,p=void 0===f?0:f,v=a.y,g=void 0===v?0:v,m=a.width,y=a.height,b=a.pointerEvents,E=x(H_(void 0===b?"auto":b,s,u),2),w=E[0],k=E[1],S=c+d;if(o&&o.some((function(e){return 0!==e}))){var _=!1;return(k||n)&&(_=function(e,t,n,r,i,a,o,s){var u=x(i,4),l=u[0],c=u[1],h=u[2],d=u[3];return PO(e+l,t,e+n-c,t,a,o,s)||PO(e+n,t+c,e+n,t+r-h,a,o,s)||PO(e+n-h,t+r,e+d,t+r,a,o,s)||PO(e,t+r-d,e,t+l,a,o,s)||CO(e+n-c,t+c,c,Math.PI,Math.PI,a,o,s)||CO(e+n-h,t+r-h,h,0,Math.PI,a,o,s)||CO(e+d,t+r-d,d,Math.PI,Math.PI,a,o,s)||CO(e+l,t+l,l,Math.PI,Math.PI,a,o,s)}(p,g,m,y,o.map((function(e){return Tx(e,0,Math.min(Math.abs(m)/2,Math.abs(y)/2))})),S,t.x,t.y)),_||!w&&!n||(_=r(e,t)),_}var M=S/2;return w&&k||n?AO(p-M,g-M,m+M,y+M,t.x,t.y):w?AO(p,g,m,y,t.x,t.y):!!k&&function(e,t,n,r,i,a,o){var s=i/2;return AO(e-s,t-s,n,i,a,o)||AO(e+n-s,t-s,i,r,a,o)||AO(e+s,t+r-s,n,i,a,o)||AO(e-s,t+s,i,r,a,o)}(p,g,m,y,S,t.x,t.y)}function HO(e,t,n,r,i,a){var o=e.parsedStyle,s=o.pointerEvents,u=void 0===s?"auto":s,l=o.x,c=void 0===l?0:l,h=o.y,d=void 0===h?0:h,f=o.width,p=o.height;if("non-transparent-pixel"===u){var v=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(v),m=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});return g.width=f,g.height=p,i.defaultStyleRendererFactory[Lw.IMAGE].render(m,an(an({},e.parsedStyle),{},{x:0,y:0}),e,void 0,void 0,void 0),m.getImageData(t.x-c,t.y-d,1,1).data.every((function(e){return 0!==e}))}return!0}function jO(e,t,n,r){var i=e.getGeometryBounds();return t.x>=i.min[0]&&t.y>=i.min[1]&&t.x<=i.max[0]&&t.y<=i.max[1]}var VO=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="canvas-picker",e}return C(t,e),p(t,[{key:"init",value:function(){var e,t=(P(P(P(P(P(P(P(P(P(P(e={},Lw.CIRCLE,_O),Lw.ELLIPSE,TO),Lw.RECT,GO),Lw.LINE,FO),Lw.POLYLINE,zO),Lw.POLYGON,BO),Lw.PATH,UO),Lw.TEXT,jO),Lw.GROUP,null),Lw.IMAGE,HO),P(P(e,Lw.HTML,null),Lw.MESH,null));this.context.pointInPathPickerFactory=t,this.addRenderingPlugin(new SO)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Iw);function WO(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var XO=0;function YO(e){return"__private_"+XO+++"_"+e}var qO=function(){return p((function e(){v(this,e),this.cacheStore=new Map}),[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e)}},{key:"put",value:function(e,t,n){return!this.cacheStore.has(e)&&(this.cacheStore.set(e,{value:t,counter:new Set([n])}),this.onRefAdded(n),!0)}},{key:"get",value:function(e,t){var n=this.cacheStore.get(e);return n?(n.counter.has(t)||(n.counter.add(t),this.onRefAdded(t)),n.value):null}},{key:"update",value:function(e,t,n){var r=this.cacheStore.get(e);return!!r&&(r.value=an(an({},r.value),t),r.counter.has(n)||(r.counter.add(n),this.onRefAdded(n)),!0)}},{key:"release",value:function(e,t){var n=this.cacheStore.get(e);return!!n&&(n.counter.delete(t),n.counter.size<=0&&this.cacheStore.delete(e),!0)}},{key:"releaseRef",value:function(e){var t=this;Array.from(this.cacheStore.keys()).forEach((function(n){t.release(n,e)}))}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),KO=[],ZO=[],JO=function(){function e(){v(this,e)}return p(e,null,[{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;e.rafId&&(t.cancelAnimationFrame(e.rafId),e.rafId=null)}},{key:"executeTask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.api;KO.length<=0&&ZO.length<=0||(ZO.forEach((function(e){return e()})),ZO=KO.splice(0,e.TASK_NUM_PER_FRAME),e.rafId=t.requestAnimationFrame((function(){e.executeTask(t)})))}},{key:"sliceImage",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.api,s=t.naturalWidth||t.width,u=t.naturalHeight||t.height,l=n-a,c=r-a,h=Math.ceil(s/l),d=Math.ceil(u/c),f={tileSize:[n,r],gridSize:[d,h],tiles:Array(d).fill(null).map((function(){return Array(h).fill(null)}))},p=function(e){for(var a=function(a){KO.push((function(){var h=a*l,d=e*c,p=[Math.min(n,s-h),Math.min(r,u-d)],v=p[0],g=p[1],m=o.createCanvas();m.width=n,m.height=r,m.getContext("2d").drawImage(t,h,d,v,g,0,0,v,g),f.tiles[e][a]={x:h,y:d,tileX:a,tileY:e,data:m},i()}))},d=0;d<h;d++)a(d)},v=0;v<d;v++)p(v);return e.stop(),e.executeTask(),f}}])}();JO.TASK_NUM_PER_FRAME=10;var QO=new qO;QO.onRefAdded=function(e){var t=this;e.addEventListener(zM.DESTROY,(function(){t.releaseRef(e)}),{once:!0})};var $O=function(){return p((function e(t,n){v(this,e),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=n}),[{key:"getImageSync",value:function(e,t,n){var r=Mx(e)?e:e.src;if(QO.has(r)){var i=QO.get(r,t);if(i.img.complete)return null===n||void 0===n||n(i),i}return this.getOrCreateImage(e,t).then((function(e){null===n||void 0===n||n(e)})).catch((function(){})),null}},{key:"getOrCreateImage",value:function(e,t){var n=this,r=Mx(e)?e:e.src;if(!Mx(e)&&!QO.has(r)){var i={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:eL(e)};QO.put(r,i,t)}if(QO.has(r)){var a=QO.get(r,t);return a.img.complete?Promise.resolve(a):new Promise((function(e,t){a.img.addEventListener("load",(function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=eL(a.img),e(a)})),a.img.addEventListener("error",(function(e){t(e)}))}))}return new Promise((function(e,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:eL(a)};QO.put(r,o,t),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=eL(o.img),e(o)},a.onerror=function(e){i(e)},a.crossOrigin="Anonymous",a.src=r}}))}},{key:"createDownSampledImage",value:function(){var e=c(u().mark((function e(t,n){var r,i,a,o,s,l,c,h,d,f,p,v,g,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrCreateImage(t,n);case 2:if("undefined"===typeof(r=e.sent).downSamplingRate){e.next=5;break}return e.abrupt("return",r);case 5:if(i=this.context.config.enableLargeImageOptimization,o=(a="boolean"===typeof i?{}:i).maxDownSampledImageSize,s=void 0===o?2048:o,l=a.downSamplingRateThreshold,c=void 0===l?.5:l,h=this.runtime.globalThis.createImageBitmap,d=x(r.size,2),f=d[0],p=d[1],v=r.img,g=Math.min((s+s)/(f+p),Math.max(.01,Math.min(c,.5))),m=an(an({},r),{},{downSamplingRate:g}),QO.update(r.img.src,m,n),!h){e.next=25;break}return e.prev=14,e.next=17,h(r.img,{resizeWidth:f*g,resizeHeight:p*g});case 17:v=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),g=1;case 23:e.next=26;break;case 25:g=1;case 26:return m=an(an({},this.getImageSync(t,n)),{},{downSampled:v,downSamplingRate:g}),QO.update(r.img.src,m,n),e.abrupt("return",m);case 29:case"end":return e.stop()}}),e,this,[[14,20]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createImageTiles",value:function(){var e=c(u().mark((function e(t,n,r,i){var a,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrCreateImage(t,i);case 2:return a=e.sent,o=i.ownerDocument.defaultView,s=o.requestAnimationFrame,l=o.cancelAnimationFrame,JO.api={requestAnimationFrame:s,cancelAnimationFrame:l,createCanvas:function(){return DM.createCanvas()}},c=an(an({},a),JO.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),QO.update(a.img.src,c,i),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"releaseImage",value:function(e,t){QO.release(Mx(e)?e:e.src,t)}},{key:"releaseImageRef",value:function(e){QO.releaseRef(e)}},{key:"getOrCreatePatternSync",value:function(e,t,n,r,i,a,o){var s=this.generatePatternKey(t);if(s&&this.patternCache[s])return this.patternCache[s];var u,l=t.image,c=t.repetition,h=t.transform,d=!1;if(Mx(l)){var f=this.getImageSync(l,e,o);u=null===f||void 0===f?void 0:f.img}else r?(u=r,d=!0):u=l;var p,v=u&&n.createPattern(u,c);v&&(p=h?fM(QS(h),new TT({})):yb(fb()),d&&_b(p,p,[1/i,1/i,1]),v.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+a[0],f:p[13]+a[1]}));return s&&v&&(this.patternCache[s]=v),v}},{key:"getOrCreateGradient",value:function(e,t){var n=this.generateGradientKey(e),r=e.type,i=e.steps,a=e.min,o=e.width,s=e.height,u=e.angle,l=e.cx,c=e.cy,h=e.size;if(this.gradientCache[n])return this.gradientCache[n];var d=null;if(r===Fk.LinearGradient){var f=function(e,t,n,r){var i=nk(r.value),a=0+t/2,o=0+n/2,s=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i));return{x1:e[0]+a-Math.cos(i)*s/2,y1:e[1]+o-Math.sin(i)*s/2,x2:e[0]+a+Math.cos(i)*s/2,y2:e[1]+o+Math.sin(i)*s/2}}(a,o,s,u),p=f.x1,v=f.y1,g=f.x2,m=f.y2;d=t.createLinearGradient(p,v,g,m)}else if(r===Fk.RadialGradient){var y=function(e,t,n,r,i,a){var o=r.value,s=i.value;r.unit===Mk.kPercentage&&(o=r.value/100*t),i.unit===Mk.kPercentage&&(s=i.value/100*n);var u=Math.max(Sx([0,0],[o,s]),Sx([0,n],[o,s]),Sx([t,n],[o,s]),Sx([t,0],[o,s]));return a&&(a instanceof Gk?u=a.value:a instanceof Bk&&("closest-side"===a.value?u=Math.min(o,t-o,s,n-s):"farthest-side"===a.value?u=Math.max(o,t-o,s,n-s):"closest-corner"===a.value&&(u=Math.min(Sx([0,0],[o,s]),Sx([0,n],[o,s]),Sx([t,n],[o,s]),Sx([t,0],[o,s]))))),{x:o+e[0],y:s+e[1],r:u}}(a,o,s,l,c,h),b=y.x,x=y.y,E=y.r;d=t.createRadialGradient(b,x,0,b,x,E)}return d&&(i.forEach((function(e){var t,n=e.offset,r=e.color;n.unit===Mk.kPercentage&&(null===(t=d)||void 0===t||t.addColorStop(n.value/100,r.toString()))})),this.gradientCache[n]=d),this.gradientCache[n]}},{key:"generateGradientKey",value:function(e){var t=e.type,n=e.min,r=e.width,i=e.height,a=e.steps,o=e.angle,s=e.cx,u=e.cy,l=e.size;return"gradient-".concat(t,"-").concat((null===o||void 0===o?void 0:o.toString())||0,"-").concat((null===s||void 0===s?void 0:s.toString())||0,"-").concat((null===u||void 0===u?void 0:u.toString())||0,"-").concat((null===l||void 0===l?void 0:l.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map((function(e){var t=e.offset,n=e.color;return"".concat(t).concat(n)})).join("-"))}},{key:"generatePatternKey",value:function(e){var t=e.image,n=e.repetition;return Mx(t)?"pattern-".concat(t,"-").concat(n):"rect"===t.nodeName?"pattern-".concat(t.entity,"-").concat(n):void 0}}])}();function eL(e){if(!e.complete)return[0,0];var t=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r=256;return[256,512].forEach((function(e){Math.ceil(n/e)*Math.ceil(t/e)<1e3&&(r=e)})),[r,r]}$O.isSupportTile=!!DM.createCanvas();var tL=function(){function e(){v(this,e)}return p(e,[{key:"apply",value:function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,o=function(e,t,n){var r=e.parsedStyle,i=r.width,a=r.height;i&&!a?e.setAttribute("height",n/t*i):!i&&a&&e.setAttribute("width",t/n*a)},s=function(e){var t=e.target,r=t.nodeName,a=t.attributes;if(r===Lw.IMAGE){var s=a.src,u=a.keepAspectRatio;i.getImageSync(s,t,(function(e){var r=e.img,i=r.width,a=r.height;u&&o(t,i,a),t.renderable.dirty=!0,n.dirtify()}))}},u=function(e){var t=e.target,r=e.attrName,a=e.prevValue,s=e.newValue;t.nodeName===Lw.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,t),Mx(s)&&i.getOrCreateImage(s,t).then((function(e){var r=e.img,i=r.width,a=r.height;t.attributes.keepAspectRatio&&o(t,i,a),t.renderable.dirty=!0,n.dirtify()})).catch((function(){})))};n.hooks.init.tap(e.tag,(function(){a.addEventListener(zM.MOUNTED,s),a.addEventListener(zM.ATTR_MODIFIED,u)})),n.hooks.destroy.tap(e.tag,(function(){a.removeEventListener(zM.MOUNTED,s),a.removeEventListener(zM.ATTR_MODIFIED,u)}))}}])}();tL.tag="LoadImage";var nL=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="image-loader",e}return C(t,e),p(t,[{key:"init",value:function(e){this.context.imagePool=new $O(this.context,e),this.addRenderingPlugin(new tL)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Iw),rL=YO("renderState"),iL=function(){function e(t){v(this,e),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,rL,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=fb(),this.dprMatrix=fb(),this.tmpMat4=fb(),this.vec3a=Wy(),this.vec3b=Wy(),this.vec3c=Wy(),this.vec3d=Wy(),this.canvasRendererPluginOptions=t}return p(e,[{key:"apply",value:function(t,n){var r=this;this.context=t;var i=this.context,a=i.config,o=i.camera,s=i.renderingService,u=i.renderingContext,l=i.rBushRoot,c=i.pathGeneratorFactory,h=a.renderer.getConfig().enableRenderingOptimization;a.renderer.getConfig().enableDirtyCheck=!1,a.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=l,this.pathGeneratorFactory=c;var d=t.contextService,f=u.root.ownerDocument.defaultView,p=function(e){var t=e.target.rBushNode;t.aabb&&r.removedRBushNodeAABBs.push(t.aabb)},v=function(e){var t=e.target.rBushNode;t.aabb&&r.removedRBushNodeAABBs.push(t.aabb)};s.hooks.init.tap(e.tag,(function(){f.addEventListener(zM.UNMOUNTED,p),f.addEventListener(zM.CULLED,v);var e=d.getDPR(),t=a.width,n=a.height,i=d.getContext();r.clearRect(i,0,0,t*e,n*e,a.background)})),s.hooks.destroy.tap(e.tag,(function(){f.removeEventListener(zM.UNMOUNTED,p),f.removeEventListener(zM.CULLED,v),r.renderQueue=[],r.removedRBushNodeAABBs=[],WO(r,rL)[rL]={restoreStack:[],prevObject:null,currentContext:null}})),s.hooks.beginFrame.tap(e.tag,(function(){var e,t=d.getContext(),n=d.getDPR(),i=a.width,o=a.height,u=r.canvasRendererPluginOptions,l=u.dirtyObjectNumThreshold,c=u.dirtyObjectRatioThreshold,h=s.getStats(),p=h.total,v=h.rendered,g=v/p;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(e=f.context.renderingPlugins[1])&&void 0!==e&&e.isFirstTimeRenderingFinished)||s.disableDirtyRectangleRendering()||v>l&&g>c,t&&("function"===typeof t.resetTransform?t.resetTransform():t.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(t,0,0,i*n,o*n,a.background))}));var g=function(e,t){for(var i=[e];i.length>0;){var a=i.pop();a.isVisible()&&!a.isCulled()&&(h?r.renderDisplayObjectOptimized(a,t,r.context,WO(r,rL)[rL],n):r.renderDisplayObject(a,t,r.context,WO(r,rL)[rL],n));for(var o=a.sortable.sorted||a.childNodes,s=o.length-1;s>=0;s--)i.push(o[s])}};s.hooks.endFrame.tap(e.tag,(function(){if(0!==u.root.childNodes.length){h=a.renderer.getConfig().enableRenderingOptimization,WO(r,rL)[rL]={restoreStack:[],prevObject:null,currentContext:WO(r,rL)[rL].currentContext},WO(r,rL)[rL].currentContext.clear(),r.clearFullScreenLastFrame=!1;var e=d.getContext(),t=d.getDPR();if(Rb(r.dprMatrix,[t,t,1]),kb(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)h?(e.save(),g(u.root,e),e.restore()):g(u.root,e),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(I(r.removedRBushNodeAABBs.map((function(e){var t=e.minX,n=e.minY,r=e.maxX,i=e.maxY,a=new Vw;return a.setMinMax([t,n,0],[r,i,0]),a})))));if(r.removedRBushNodeAABBs=[],Vw.isEmpty(i))return void(r.renderQueue=[]);var s=r.convertAABB2Rect(i),l=s.x,c=s.y,p=s.width,v=s.height,m=ab(r.vec3a,[l,c,0],r.vpMatrix),y=ab(r.vec3b,[l+p,c,0],r.vpMatrix),b=ab(r.vec3c,[l,c+v,0],r.vpMatrix),x=ab(r.vec3d,[l+p,c+v,0],r.vpMatrix),E=Math.min(m[0],y[0],x[0],b[0]),w=Math.min(m[1],y[1],x[1],b[1]),k=Math.max(m[0],y[0],x[0],b[0]),S=Math.max(m[1],y[1],x[1],b[1]),_=Math.floor(E),M=Math.floor(w),T=Math.ceil(k-E),A=Math.ceil(S-w);e.save(),r.clearRect(e,_,M,T,A,a.background),e.beginPath(),e.rect(_,M,T,A),e.clip(),e.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),a.renderer.getConfig().enableDirtyRectangleRenderingDebug&&f.dispatchEvent(new PM(eA.DIRTY_RECTANGLE,{dirtyRect:{x:_,y:M,width:T,height:A}})),r.searchDirtyObjects(i).sort((function(e,t){return e.sortable.renderOrder-t.sortable.renderOrder})).forEach((function(t){t&&t.isVisible()&&!t.isCulled()&&r.renderDisplayObject(t,e,r.context,WO(r,rL)[rL],n)})),e.restore(),r.renderQueue.forEach((function(e){r.saveDirtyAABB(e)})),r.renderQueue=[]}WO(r,rL)[rL].restoreStack.forEach((function(){e.restore()})),WO(r,rL)[rL].restoreStack=[]}else r.clearFullScreenLastFrame=!0})),s.hooks.render.tap(e.tag,(function(e){r.clearFullScreen||r.renderQueue.push(e)}))}},{key:"clearRect",value:function(e,t,n,r,i,a){e.clearRect(t,n,r,i),a&&(e.fillStyle=a,e.fillRect(t,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(e,t,n,r,i){var a=e.nodeName,o=!1,s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],l=e.parsedStyle.clipPath;if(l){(!r.prevObject||!ox(l.getWorldTransform(),r.prevObject.getWorldTransform()))&&(this.applyWorldTransform(t,l),r.prevObject=null);var c=this.pathGeneratorFactory[l.nodeName];c&&(t.save(),o=!0,t.beginPath(),c(t,l.parsedStyle),t.closePath(),t.clip())}if(s){(!r.prevObject||!ox(e.getWorldTransform(),r.prevObject.getWorldTransform()))&&this.applyWorldTransform(t,e);var h=!r.prevObject;if(!h){var d=r.prevObject.nodeName;h=a===Lw.TEXT?d!==Lw.TEXT:a===Lw.IMAGE?d!==Lw.IMAGE:d===Lw.TEXT||d===Lw.IMAGE}s.applyStyleToContext(t,e,h,r),r.prevObject=e}u&&(t.beginPath(),u(t,e.parsedStyle),a!==Lw.LINE&&a!==Lw.PATH&&a!==Lw.POLYLINE&&t.closePath()),s&&s.drawToContext(t,e,WO(this,rL)[rL],this,i),o&&t.restore(),e.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(e,t,n,r,i){var a=e.nodeName,o=r.restoreStack[r.restoreStack.length-1];!o||e.compareDocumentPosition(o)&OM.DOCUMENT_POSITION_CONTAINS||(t.restore(),r.restoreStack.pop());var s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],l=e.parsedStyle.clipPath;if(l){this.applyWorldTransform(t,l);var c=this.pathGeneratorFactory[l.nodeName];c&&(t.save(),r.restoreStack.push(e),t.beginPath(),c(t,l.parsedStyle),t.closePath(),t.clip())}s&&(this.applyWorldTransform(t,e),t.save(),this.applyAttributesToContext(t,e)),u&&(t.beginPath(),u(t,e.parsedStyle),a!==Lw.LINE&&a!==Lw.PATH&&a!==Lw.POLYLINE&&t.closePath()),s&&(s.render(t,e.parsedStyle,e,n,this,i),t.restore()),e.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(e,t){var n=t.parsedStyle,r=n.stroke,i=n.fill,a=n.opacity,o=n.lineDash,s=n.lineDashOffset;o&&e.setLineDash(o),_x(s)||(e.lineDashOffset=s),_x(a)||(e.globalAlpha*=a),_x(r)||Array.isArray(r)||r.isNone||(e.strokeStyle=t.attributes.stroke),_x(i)||Array.isArray(i)||i.isNone||(e.fillStyle=t.attributes.fill)}},{key:"convertAABB2Rect",value:function(e){var t=e.getMin(),n=e.getMax(),r=Math.floor(t[0]),i=Math.floor(t[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}}},{key:"mergeDirtyAABBs",value:function(e){var t=new Vw;return e.forEach((function(e){var n=e.getRenderBounds();t.add(n);var r=e.renderable.dirtyRenderBounds;r&&t.add(r)})),t}},{key:"searchDirtyObjects",value:function(e){var t=x(e.getMin(),2),n=t[0],r=t[1],i=x(e.getMax(),2),a=i[0],o=i[1];return this.rBush.search({minX:n,minY:r,maxX:a,maxY:o}).map((function(e){return e.displayObject}))}},{key:"saveDirtyAABB",value:function(e){var t=e.renderable;t.dirtyRenderBounds||(t.dirtyRenderBounds=new Vw);var n=e.getRenderBounds();n&&t.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(e,t,n){n?(vb(this.tmpMat4,t.getLocalTransform()),kb(this.tmpMat4,n,this.tmpMat4),kb(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(vb(this.tmpMat4,t.getWorldTransform()),kb(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var e=new Vw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.add(t)})),e}}])}();function aL(e,t,n,r,i,a,o){var s,u;if("rect"===e.image.nodeName){var l=e.image.parsedStyle,c=l.width,h=l.height;u=r.contextService.getDPR();var d=r.config.offscreenCanvas;(s=a.offscreenCanvasCreator.getOrCreateCanvas(d)).width=c*u,s.height=h*u;var f=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};e.image.forEach((function(e){i.renderDisplayObject(e,f,r,p,a)})),p.restoreStack.forEach((function(){f.restore()}))}return o.getOrCreatePatternSync(t,e,n,s,u,t.getGeometryBounds().min,(function(){t.renderable.dirty=!0,r.renderingService.dirtify()}))}function oL(e,t,n,r){var i;if(e.type===Fk.LinearGradient||e.type===Fk.RadialGradient){var a=t.getGeometryBounds(),o=a&&2*a.halfExtents[0]||1,s=a&&2*a.halfExtents[1]||1,u=a&&a.min||[0,0];i=r.getOrCreateGradient(an(an({type:e.type},e.value),{},{min:u,width:o,height:s}),n)}return i}iL.tag="CanvasRenderer";var sL=["shadowBlur","shadowOffsetX","shadowOffsetY"],uL=["lineCap","lineJoin","miterLimit"],lL={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},cL={};function hL(e,t,n,r){var i=r.has(t)?r.get(t):lL[t];return i!==n&&("lineDash"===t?e.setLineDash(n):e[t]=n,r.set(t,n)),i}var dL=function(){return p((function e(t){v(this,e),this.imagePool=t}),[{key:"applyAttributesToContext",value:function(e,t){}},{key:"render",value:function(e,t,n,r,i,a){}},{key:"applyCommonStyleToContext",value:function(e,t,n,r){var i=n?cL:r.prevObject.parsedStyle,a=t.parsedStyle;(n||a.opacity!==i.opacity)&&hL(e,"globalAlpha",_x(a.opacity)?lL.globalAlpha:a.opacity,r.currentContext),(n||a.blend!==i.blend)&&hL(e,"globalCompositeOperation",_x(a.blend)?lL.globalCompositeOperation:a.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(e,t,n,r){var i=n?cL:r.prevObject.parsedStyle,a=t.parsedStyle,o=a.lineWidth,s=void 0===o?lL.lineWidth:o,u=a.fill&&!a.fill.isNone;if(a.stroke&&!a.stroke.isNone&&s>0){if(n||t.attributes.stroke!==r.prevObject.attributes.stroke)hL(e,"strokeStyle",_x(a.stroke)||Array.isArray(a.stroke)||a.stroke.isNone?lL.strokeStyle:t.attributes.stroke,r.currentContext);(n||a.lineWidth!==i.lineWidth)&&hL(e,"lineWidth",_x(a.lineWidth)?lL.lineWidth:a.lineWidth,r.currentContext),(n||a.lineDash!==i.lineDash)&&hL(e,"lineDash",a.lineDash||lL.lineDash,r.currentContext),(n||a.lineDashOffset!==i.lineDashOffset)&&hL(e,"lineDashOffset",_x(a.lineDashOffset)?lL.lineDashOffset:a.lineDashOffset,r.currentContext);for(var l=0;l<uL.length;l++){var c=uL[l];(n||a[c]!==i[c])&&hL(e,c,_x(a[c])?lL[c]:a[c],r.currentContext)}}u&&(n||t.attributes.fill!==r.prevObject.attributes.fill)&&hL(e,"fillStyle",_x(a.fill)||Array.isArray(a.fill)||a.fill.isNone?lL.fillStyle:t.attributes.fill,r.currentContext)}},{key:"applyStyleToContext",value:function(e,t,n,r){var i=t.nodeName;this.applyCommonStyleToContext(e,t,n,r),i===Lw.IMAGE||this.applyStrokeFillStyleToContext(e,t,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(e,t,n,r){var i=t.parsedStyle;if(n){hL(e,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var a=0;a<sL.length;a++){var o=sL[a];hL(e,o,i[o]||lL[o],r.currentContext)}}i.filter&&i.filter.length&&hL(e,"filter",t.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t){hL(e,"shadowColor",lL.shadowColor,r.currentContext);for(var a=0;a<sL.length;a++){var o=sL[a];hL(e,o,lL[o],r.currentContext)}}if(n)if(t&&i){var s=e.filter;!_x(s)&&s.indexOf("drop-shadow")>-1&&hL(e,"filter",s.replace(/drop-shadow\([^)]*\)/,"").trim()||lL.filter,r.currentContext)}else hL(e,"filter",lL.filter,r.currentContext)}},{key:"fillToContext",value:function(e,t,n,r,i){var a=this,o=t.parsedStyle,s=o.fill,u=o.fillRule,l=null;if(Array.isArray(s)&&s.length>0)s.forEach((function(r){var i,o=hL(e,"fillStyle",oL(r,t,e,a.imagePool),n.currentContext);l=null!==(i=l)&&void 0!==i?i:o,u?e.fill(u):e.fill()}));else{if(sS(s)){var c=aL(s,t,e,t.ownerDocument.defaultView.context,r,i,this.imagePool);c&&(e.fillStyle=c,l=!0)}u?e.fill(u):e.fill()}null!==l&&hL(e,"fillStyle",l,n.currentContext)}},{key:"strokeToContext",value:function(e,t,n,r,i){var a=this,o=t.parsedStyle.stroke,s=null;if(Array.isArray(o)&&o.length>0)o.forEach((function(r){var i,o=hL(e,"strokeStyle",oL(r,t,e,a.imagePool),n.currentContext);s=null!==(i=s)&&void 0!==i?i:o,e.stroke()}));else{if(sS(o)){var u=aL(o,t,e,t.ownerDocument.defaultView.context,r,i,this.imagePool);if(u){var l,c=hL(e,"strokeStyle",u,n.currentContext);s=null!==(l=s)&&void 0!==l?l:c}}e.stroke()}null!==s&&hL(e,"strokeStyle",s,n.currentContext)}},{key:"drawToContext",value:function(e,t,n,r,i){var a,o=t.nodeName,s=t.parsedStyle,u=s.opacity,l=void 0===u?lL.globalAlpha:u,c=s.fillOpacity,h=void 0===c?lL.fillOpacity:c,d=s.strokeOpacity,f=void 0===d?lL.strokeOpacity:d,p=s.lineWidth,v=void 0===p?lL.lineWidth:p,g=s.fill&&!s.fill.isNone,m=s.stroke&&!s.stroke.isNone&&v>0;if(g||m){var y=!_x(s.shadowColor)&&s.shadowBlur>0,b="inner"===s.shadowType,x=0===(null===(a=s.fill)||void 0===a?void 0:a.alpha),E=!(!s.filter||!s.filter.length),w=y&&m&&(o===Lw.PATH||o===Lw.LINE||o===Lw.POLYLINE||x||b),k=null;if(g)w||this.applyShadowAndFilterStyleToContext(e,t,y,n),k=hL(e,"globalAlpha",l*h,n.currentContext),this.fillToContext(e,t,n,r,i),w||this.clearShadowAndFilterStyleForContext(e,y,E,n);if(m){var S=!1,_=hL(e,"globalAlpha",l*f,n.currentContext);if(k=g?k:_,w&&(this.applyShadowAndFilterStyleToContext(e,t,y,n),S=!0,b)){var M=e.globalCompositeOperation;e.globalCompositeOperation="source-atop",this.strokeToContext(e,t,n,r,i),e.globalCompositeOperation=M,this.clearShadowAndFilterStyleForContext(e,y,E,n,!0)}this.strokeToContext(e,t,n,r,i),S&&this.clearShadowAndFilterStyleForContext(e,y,E,n)}null!==k&&hL(e,"globalAlpha",k,n.currentContext)}}}])}(),fL=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"render",value:function(e,t,n,r,i,a){var o=t.fill,s=t.fillRule,u=t.opacity,l=void 0===u?1:u,c=t.fillOpacity,h=void 0===c?1:c,d=t.stroke,f=t.strokeOpacity,p=void 0===f?1:f,v=t.lineWidth,g=void 0===v?1:v,m=t.lineCap,y=t.lineJoin,b=t.shadowType,x=t.shadowColor,E=t.shadowBlur,w=t.filter,k=t.miterLimit,S=o&&!o.isNone,_=d&&!d.isNone&&g>0,M=0===(null===o||void 0===o?void 0:o.alpha),T=!(!w||!w.length),A=!_x(x)&&E>0,C=n.nodeName,P="inner"===b,R=_&&A&&(C===Lw.PATH||C===Lw.LINE||C===Lw.POLYLINE||M||P);S&&(e.globalAlpha=l*h,R||pL(n,e,A),vL(e,n,o,s,r,i,a,this.imagePool),R||this.clearShadowAndFilter(e,T,A)),_&&(e.globalAlpha=l*p,e.lineWidth=g,_x(k)||(e.miterLimit=k),_x(m)||(e.lineCap=m),_x(y)||(e.lineJoin=y),R&&(P&&(e.globalCompositeOperation="source-atop"),pL(n,e,!0),P&&(gL(e,n,d,r,i,a,this.imagePool),e.globalCompositeOperation=lL.globalCompositeOperation,this.clearShadowAndFilter(e,T,!0))),gL(e,n,d,r,i,a,this.imagePool))}},{key:"clearShadowAndFilter",value:function(e,t,n){if(n&&(e.shadowColor="transparent",e.shadowBlur=0),t){var r=e.filter;!_x(r)&&r.indexOf("drop-shadow")>-1&&(e.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(dL);function pL(e,t,n){var r=e.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=a.toString(),t.shadowBlur=o||0,t.shadowOffsetX=s||0,t.shadowOffsetY=u||0)}function vL(e,t,n,r,i,a,o,s){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach((function(n){e.fillStyle=oL(n,t,e,s),u||(r?e.fill(r):e.fill())})):(sS(n)&&(e.fillStyle=aL(n,t,e,i,a,o,s)),u||(r?e.fill(r):e.fill()))}function gL(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach((function(n){e.strokeStyle=oL(n,t,e,o),s||e.stroke()})):(sS(n)&&(e.strokeStyle=aL(n,t,e,r,i,a,o)),s||e.stroke())}var mL=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"renderDownSampled",value:function(e,t,n,r){var i=r.src,a=r.imageCache;a.downSampled?e.drawImage(a.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then((function(e){n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify()})).catch((function(){}))}},{key:"renderTile",value:function(e,t,n,r){var i=r.src,a=r.imageCache,o=r.imageRect,s=r.drawRect,u=a.size,l=e.getTransform(),c=l.a,h=l.b,d=l.c,f=l.d,p=l.e,v=l.f;if(e.resetTransform(),null!==a&&void 0!==a&&a.gridSize){for(var g=[u[0]/o[2],u[1]/o[3]],m=[a.tileSize[0]/g[0],a.tileSize[1]/g[1]],y=[Math.floor((s[0]-o[0])/m[0]),Math.ceil((s[0]+s[2]-o[0])/m[0])],b=y[0],x=y[1],E=[Math.floor((s[1]-o[1])/m[1]),Math.ceil((s[1]+s[3]-o[1])/m[1])],w=E[1],k=E[0];k<=w;k++)for(var S=b;S<=x;S++){var _=a.tiles[k][S];if(_){var M=[Math.floor(o[0]+_.tileX*m[0]),Math.floor(o[1]+_.tileY*m[1]),Math.ceil(m[0]),Math.ceil(m[1])];e.drawImage(_.data,M[0],M[1],M[2],M[3])}}e.setTransform(c,h,d,f,p,v)}else this.imagePool.createImageTiles(i,[],(function(){n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify()}),n).catch((function(){}))}},{key:"render",value:function(e,n,r){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,u=n.width,l=n.height,c=n.src,h=n.shadowColor,d=n.shadowBlur,f=this.imagePool.getImageSync(c,r),p=null===f||void 0===f?void 0:f.img,v=u,g=l;if(p){v||(v=p.width),g||(g=p.height),pL(r,e,!_x(h)&&d>0);try{var m=r.ownerDocument.defaultView.getContextService().getDomElement(),y=m.width,b=m.height,E=e.getTransform(),w=E.a,k=E.b,S=function(e,t){var n=ab(Wy(),[e[0],e[1],0],t),r=ab(Wy(),[e[0]+e[2],e[1],0],t),i=ab(Wy(),[e[0],e[1]+e[3],0],t),a=ab(Wy(),[e[0]+e[2],e[1]+e[3],0],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}([a,s,v,g],gb(w,E.c,0,0,k,E.d,0,0,0,0,1,0,E.e,E.f,0,1)),_=function(e,t){var n=x(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=x(t,4),u=s[0],l=s[1],c=s[2],h=s[3],d=Math.max(r,u),f=Math.max(i,l),p=Math.min(r+a,u+c),v=Math.min(i+o,l+h);return p<=d||v<=f?null:[d,f,p-d,v-f]}([0,0,y,b],S);if(!_)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void t.renderFull(e,n,r,{image:p,drawRect:[a,s,v,g]});if(S[2]/f.size[0]<(f.downSamplingRate||.5))return void this.renderDownSampled(e,n,r,{src:c,imageCache:f,drawRect:[a,s,v,g]});if(!$O.isSupportTile)return void t.renderFull(e,n,r,{image:p,drawRect:[a,s,v,g]});this.renderTile(e,n,r,{src:c,imageCache:f,imageRect:S,drawRect:_})}catch(M){}}}},{key:"drawToContext",value:function(e,t,n,r,i){this.render(e,t.parsedStyle,t)}}],[{key:"renderFull",value:function(e,t,n,r){e.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(fL),yL=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"render",value:function(e,t,n,r,i,a){n.getBounds();var o=t.lineWidth,s=void 0===o?1:o,u=t.textAlign,l=void 0===u?"start":u,c=t.textBaseline,h=void 0===c?"alphabetic":c,d=t.lineJoin,f=void 0===d?"miter":d,p=t.miterLimit,v=void 0===p?10:p,g=t.letterSpacing,m=void 0===g?0:g,y=t.stroke,b=t.fill,x=t.fillRule,E=t.fillOpacity,w=void 0===E?1:E,k=t.strokeOpacity,S=void 0===k?1:k,_=t.opacity,M=void 0===_?1:_,T=t.metrics,A=t.x,C=void 0===A?0:A,P=t.y,R=void 0===P?0:P,N=t.dx,O=t.dy,L=t.shadowColor,D=t.shadowBlur,I=T.font,F=T.lines,U=T.height,B=T.lineHeight,z=T.lineMetrics;e.font=I,e.lineWidth=s,e.textAlign="middle"===l?"center":l;var G=h;"alphabetic"===G&&(G="bottom"),e.lineJoin=f,_x(v)||(e.miterLimit=v);var H=R;"middle"===h?H+=-U/2-B/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?H+=-U:"top"!==h&&"hanging"!==h||(H+=-B);var j=C+(N||0);H+=O||0,1===F.length&&("bottom"===G?(G="middle",H-=.5*U):"top"===G&&(G="middle",H+=.5*U)),e.textBaseline=G,pL(n,e,!_x(L)&&D>0);for(var V=0;V<F.length;V++){var W=s/2+j;H+=B,_x(y)||y.isNone||!s||this.drawLetterSpacing(e,n,F[V],z[V],l,W,H,m,b,x,w,y,S,M,!0,r,i,a),_x(b)||this.drawLetterSpacing(e,n,F[V],z[V],l,W,H,m,b,x,w,y,S,M,!1,r,i,a)}}},{key:"drawLetterSpacing",value:function(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,v,g,m){if(0!==s){var y=e.textAlign;e.textAlign="left";var b=a;"center"===i||"middle"===i?b=a-r.width/2:"right"!==i&&"end"!==i||(b=a-r.width);for(var x=Array.from(n),E=e.measureText(n).width,w=0,k=0;k<x.length;++k){var S=x[k];p?this.strokeText(e,t,S,b,o,h,d,v,g,m):this.fillText(e,t,S,b,o,u,l,c,f,v,g,m),b+=E-(w=e.measureText(n.substring(k+1)).width)+s,E=w}e.textAlign=y}else p?this.strokeText(e,t,n,a,o,h,d,v,g,m):this.fillText(e,t,n,a,o,u,l,c,f,v,g,m)}},{key:"fillText",value:function(e,t,n,r,i,a,o,s,u,l,c,h){var d;vL(e,t,a,o,l,c,h,this.imagePool,!0);var f=!_x(s)&&1!==s;f&&(d=e.globalAlpha,e.globalAlpha=s*u),e.fillText(n,r,i),f&&(e.globalAlpha=d)}},{key:"strokeText",value:function(e,t,n,r,i,a,o,s,u,l){var c;gL(e,t,a,s,u,l,this.imagePool,!0);var h=!_x(o)&&1!==o;h&&(c=e.globalAlpha,e.globalAlpha=o),e.strokeText(n,r,i),h&&(e.globalAlpha=c)}},{key:"drawToContext",value:function(e,t,n,r,i){this.render(e,t.parsedStyle,t,t.ownerDocument.defaultView.context,r,i)}}])}(fL),bL=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),(e=T(this,t)).name="canvas-renderer",e.options=n,e}return C(t,e),p(t,[{key:"init",value:function(){var e,t=an({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new fL(n),i=(P(P(P(P(P(P(P(P(P(P(e={},Lw.CIRCLE,r),Lw.ELLIPSE,r),Lw.RECT,r),Lw.IMAGE,new mL(n)),Lw.TEXT,new yL(n)),Lw.LINE,r),Lw.POLYLINE,r),Lw.POLYGON,r),Lw.PATH,r),Lw.GROUP,void 0),P(P(P(e,Lw.HTML,void 0),Lw.MESH,void 0),Lw.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new iL(t))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Iw),xL=function(){function e(){v(this,e)}return p(e,[{key:"apply",value:function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,o=t.config;this.context=t;var s=a.root.ownerDocument.defaultView,u=function(e){i.hooks.pointerMove.call(e)},l=function(e){i.hooks.pointerUp.call(e)},c=function(e){i.hooks.pointerDown.call(e)},h=function(e){i.hooks.pointerOver.call(e)},d=function(e){i.hooks.pointerOut.call(e)},f=function(e){i.hooks.pointerCancel.call(e)},p=function(e){i.hooks.pointerWheel.call(e)},v=function(e){i.hooks.click.call(e)};i.hooks.init.tap(e.tag,(function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="none",e.style.msTouchAction="none"):s.supportsPointerEvents&&(e.style.touchAction="none"),s.supportsPointerEvents?function(e){n.globalThis.document.addEventListener("pointermove",u,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("pointerleave",d,!0),e.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",l,!0),n.globalThis.addEventListener("pointercancel",f,!0)}(e):function(e){n.globalThis.document.addEventListener("mousemove",u,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("mouseout",d,!0),e.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",l,!0)}(e),s.supportsTouchEvents&&function(e){e.addEventListener("touchstart",c,!0),e.addEventListener("touchend",l,!0),e.addEventListener("touchmove",u,!0),e.addEventListener("touchcancel",f,!0)}(e),o.useNativeClickEvent&&e.addEventListener("click",v,!0),e.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(e.tag,(function(){var e=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="",e.style.msTouchAction=""):s.supportsPointerEvents&&(e.style.touchAction=""),s.supportsPointerEvents?function(e){n.globalThis.document.removeEventListener("pointermove",u,!0),e.removeEventListener("pointerdown",c,!0),e.removeEventListener("pointerleave",d,!0),e.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",l,!0),n.globalThis.removeEventListener("pointercancel",f,!0)}(e):function(e){n.globalThis.document.removeEventListener("mousemove",u,!0),e.removeEventListener("mousedown",c,!0),e.removeEventListener("mouseout",d,!0),e.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",l,!0)}(e),s.supportsTouchEvents&&function(e){e.removeEventListener("touchstart",c,!0),e.removeEventListener("touchend",l,!0),e.removeEventListener("touchmove",u,!0),e.removeEventListener("touchcancel",f,!0)}(e),o.useNativeClickEvent&&e.removeEventListener("click",v,!0),e.removeEventListener("wheel",p,!0)}))}}])}();xL.tag="DOMInteraction";var EL=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="dom-interaction",e}return C(t,e),p(t,[{key:"init",value:function(){this.addRenderingPlugin(new xL)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Iw),wL=function(){function e(){v(this,e),this.displayObjectHTMLElementMap=new WeakMap}return p(e,[{key:"joinTransformMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+t[0],e[13]+t[1]].join(","),")")}},{key:"apply",value:function(t,n){var r=this,i=t.camera,a=t.renderingContext,o=t.renderingService;this.context=t;var s=a.root.ownerDocument.defaultView,u=s.context.eventService.nativeHTMLMap,l=function(e,t){t.style.transform=r.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())},c=function(e){var t=e.target;if(t.nodeName===Lw.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(t);r.$camera.appendChild(n),Object.keys(t.attributes).forEach((function(e){r.updateAttribute(e,t)})),l(t,n),u.set(n,t)}},h=function(e){var t=e.target;if(t.nodeName===Lw.HTML&&r.$camera){var n=r.getOrCreateEl(t);n&&(n.remove(),u.delete(n))}},d=function(e){var t=e.target;if(t.nodeName===Lw.HTML){var n=e.attrName;r.updateAttribute(n,t)}},f=function(e){var t=e.target;(t.nodeName===Lw.FRAGMENT?t.childNodes:[t]).forEach((function(e){if(e.nodeName===Lw.HTML){var t=r.getOrCreateEl(e);l(e,t)}}))},p=function(){if(r.$camera){var e=r.context.config,t=e.width,n=e.height;r.$camera.parentElement.style.width="".concat(t||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};o.hooks.init.tap(e.tag,(function(){s.addEventListener(eA.RESIZE,p),s.addEventListener(zM.MOUNTED,c),s.addEventListener(zM.UNMOUNTED,h),s.addEventListener(zM.ATTR_MODIFIED,d),s.addEventListener(zM.BOUNDS_CHANGED,f)})),o.hooks.endFrame.tap(e.tag,(function(){r.$camera&&a.renderReasons.has(IM.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),o.hooks.destroy.tap(e.tag,(function(){r.$camera&&r.$camera.remove(),s.removeEventListener(eA.RESIZE,p),s.removeEventListener(zM.MOUNTED,c),s.removeEventListener(zM.UNMOUNTED,h),s.removeEventListener(zM.ATTR_MODIFIED,d),s.removeEventListener(zM.BOUNDS_CHANGED,f)}))}},{key:"createCamera",value:function(e){var t=this.context.config,n=t.document,r=t.width,i=t.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",u=o.querySelector("#".concat(s));if(!u){var l=(n||document).createElement("div");l.style.overflow="hidden",l.style.pointerEvents="none",l.style.position="absolute",l.style.left="0px",l.style.top="0px",l.style.width="".concat(r||0,"px"),l.style.height="".concat(i||0,"px");var c=(n||document).createElement("div");u=c,c.id=s,c.style.position="absolute",c.style.left="".concat(a.offsetLeft||0,"px"),c.style.top="".concat(a.offsetTop||0,"px"),c.style.transformOrigin="left top",c.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),c.style.pointerEvents="none",c.style.width="100%",c.style.height="100%",l.appendChild(c),o.appendChild(l)}return u}return null}},{key:"getOrCreateEl",value:function(e){var t=this.context.config.document,n=this.displayObjectHTMLElementMap.get(e);return n||(n=(t||document).createElement("div"),e.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(e,n),e.id&&(n.id=e.id),e.name&&n.setAttribute("name",e.name),e.className&&(n.className=e.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),n}},{key:"updateAttribute",value:function(e,t){var n=this.getOrCreateEl(t);switch(e){case"innerHTML":var r=t.parsedStyle.innerHTML;Mx(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(t.parsedStyle.x,"px");break;case"y":n.style.top="".concat(t.parsedStyle.y,"px");break;case"transformOrigin":var i=t.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=t.parsedStyle.width;n.style.width=kx(a)?"".concat(a,"px"):a.toString();break;case"height":var o=t.parsedStyle.height;n.style.height=kx(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=t.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var u=t.parsedStyle.visibility;n.style.visibility=u;break;case"pointerEvents":var l=t.parsedStyle.pointerEvents,c=void 0===l?"auto":l;n.style.pointerEvents=c;break;case"opacity":var h=t.parsedStyle.opacity;n.style.opacity="".concat(h);break;case"fill":var d=t.parsedStyle.fill,f="";uS(d)?f=d.isNone?"transparent":t.getAttribute("fill"):Array.isArray(d)?f=t.getAttribute("fill"):sS(d),n.style.background=f;break;case"stroke":var p=t.parsedStyle.stroke,v="";uS(p)?v=p.isNone?"transparent":t.getAttribute("stroke"):Array.isArray(p)?v=t.getAttribute("stroke"):sS(p),n.style["border-color"]=v,n.style["border-style"]="solid";break;case"lineWidth":var g=t.parsedStyle.lineWidth;n.style["border-width"]="".concat(g||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var m=t.style.filter;n.style.filter=m;break;default:_x(t.style[e])||""===t.style[e]||(n.style[e]=t.style[e])}}}])}();wL.tag="HTMLRendering";var kL=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="html-renderer",e}return C(t,e),p(t,[{key:"init",value:function(){this.addRenderingPlugin(new wL)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Iw),SL=function(){return p((function e(t){v(this,e),this.renderingContext=t.renderingContext,this.canvasConfig=t.config}),[{key:"init",value:function(){var e=this.canvasConfig,t=e.container,n=e.canvas;if(n)this.$canvas=n,t&&n.parentElement!==t&&t.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(t&&(this.$container=Mx(t)?document.getElementById(t):t,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(e,t){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*t,function(e,t,n){L_&&e.style&&(e.style.width=t+"px",e.style.height=n+"px")}(this.$canvas,e,t)),this.renderingContext.renderReasons.add(IM.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)}},{key:"toDataURL",value:function(){var e=c(u().mark((function e(){var t,n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=i.length>0&&void 0!==i[0]?i[0]:{}).type,r=t.encoderOptions,e.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}(),_L=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=T(this,t,[].concat(r))).name="canvas-context-register",e}return C(t,e),p(t,[{key:"init",value:function(){this.context.ContextService=SL}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Iw),ML=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).registerPlugin(new _L),n.registerPlugin(new nL),n.registerPlugin(new bO),n.registerPlugin(new bL),n.registerPlugin(new EL),n.registerPlugin(new VO),n.registerPlugin(new kL),n}return C(t,e),p(t)}(Fw);var TL=function(e,t){if(e)if(cE(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(RE(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break},AL=Object.prototype.hasOwnProperty,CL=function(e,t){if(null===e||!mR(e))return{};var n={};return TL(t,(function(t){AL.call(e,t)&&(n[t]=e[t])})),n},PL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},RL=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[Object.assign(Object.assign({},e),{style:Object.assign({},t.defaultStyleProps,e.style)})])).rootPointerEvent=new AM(null),n.forwardEvents=function(e){var t=n.context.canvas,r=t.context.renderingContext.root.ownerDocument.defaultView;n.normalizeToPointerEvent(e,r).forEach((function(i){var a=n.bootstrapEvent(n.rootPointerEvent,i,r,e);vN(t.context.eventService,"mappingTable.pointerupoutside",[]),t.context.eventService.mapEvent(a)}))},n}return C(t,e),p(t,[{key:"eventService",get:function(){return this.context.canvas.context.eventService}},{key:"events",get:function(){return[mC.CLICK,mC.POINTER_DOWN,mC.POINTER_MOVE,mC.POINTER_UP,mC.POINTER_OVER,mC.POINTER_LEAVE]}},{key:"getDomElement",value:function(){return this.getShape("key").getDomElement()}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(e,t),this.drawPortShapes(e,t)}},{key:"getKeyStyle",value:function(e){var t=CL(e,["dx","dy","innerHTML","pointerEvents","cursor"]),n=t.dx,r=void 0===n?0:n,i=t.dy,a=void 0===i?0:i,o=PL(t,["dx","dy"]),s=x(this.getSize(e),2),u=s[0],l=s[1];return Object.assign(Object.assign({x:r,y:a},o),{width:u,height:l})}},{key:"drawKeyShape",value:function(e,t){var n=this.getKeyStyle(e),r=n.x,i=n.y,a=n.width,o=void 0===a?0:a,s=n.height,u=void 0===s?0:s,l=this.upsert("key-container",VT,{x:r,y:i,width:o,height:u,opacity:0},t);return this.upsert("key",LT,n,l)}},{key:"connectedCallback",value:function(){var e=this;if(this.context.canvas.getRenderer("main")instanceof ML){var t=this.getDomElement();this.events.forEach((function(n){t.addEventListener(n,e.forwardEvents)}))}}},{key:"attributeChangedCallback",value:function(e,t,n){"zIndex"===e&&t!==n&&(this.getDomElement().style.zIndex=n)}},{key:"destroy",value:function(){var e=this,n=this.getDomElement();this.events.forEach((function(t){n.removeEventListener(t,e.forwardEvents)})),Xn(S(t.prototype),"destroy",this).call(this)}},{key:"normalizeToPointerEvent",value:function(e,t){var n=[];if(t.isTouchEvent(e))for(var r=0;r<e.changedTouches.length;r++){var i=e.changedTouches[r];ME(i.button)&&(i.button=0),ME(i.buttons)&&(i.buttons=1),ME(i.isPrimary)&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),ME(i.width)&&(i.width=i.radiusX||1),ME(i.height)&&(i.height=i.radiusY||1),ME(i.tiltX)&&(i.tiltX=0),ME(i.tiltY)&&(i.tiltY=0),ME(i.pointerType)&&(i.pointerType="touch"),ME(i.pointerId)&&(i.pointerId=i.identifier||0),ME(i.pressure)&&(i.pressure=i.force||.5),ME(i.twist)&&(i.twist=0),ME(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=e.type,n.push(i)}else if(t.isMouseEvent(e)){var a=e;ME(a.isPrimary)&&(a.isPrimary=!0),ME(a.width)&&(a.width=1),ME(a.height)&&(a.height=1),ME(a.tiltX)&&(a.tiltX=0),ME(a.tiltY)&&(a.tiltY=0),ME(a.pointerType)&&(a.pointerType="mouse"),ME(a.pointerId)&&(a.pointerId=1),ME(a.pressure)&&(a.pressure=.5),ME(a.twist)&&(a.twist=0),ME(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(e);return n}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}},{key:"bootstrapEvent",value:function(e,t,n,r){e.view=n,e.originalEvent=null,e.nativeEvent=r,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var i=this.getViewportXY(t),a=i.x,o=i.y;e.viewport.x=a,e.viewport.y=o;var s=x(this.context.canvas.getCanvasByViewport([a,o]),2),u=s[0],l=s[1];return e.canvas.x=u,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e}},{key:"getViewportXY",value:function(e){var t,n,r=e.offsetX,i=e.offsetY,a=e.clientX,o=e.clientY;if(_x(r)||_x(i)){var s=this.eventService.client2Viewport({x:a,y:o});t=s.x,n=s.y}else t=r,n=i;return{x:t,y:n}}},{key:"onframe",value:function(){Xn(S(t.prototype),"onframe",this).call(this);var e=this.attributes.opacity;this.getDomElement().style.opacity="".concat(e)}}])}(nO);RL.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var NL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},OL=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getKeyStyle",value:function(e){var n=x(this.getSize(e),2),r=n[0],i=n[1],a=Xn(S(t.prototype),"getKeyStyle",this).call(this,e),o=a.fillOpacity,s=a.opacity,u=void 0===s?o:s,l=NL(a,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:u},l),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getHaloStyle",value:function(e){if(!1===e.halo)return!1;var t=this.getShape("key").attributes,n=(t.fill,t.stroke,NL(t,["fill","stroke"]),xN(this.getGraphicStyle(e),"halo")),r=Number(n.lineWidth),i=x(wR(this.getSize(e),[r,r]),2),a=i[0],o=i[1];return Object.assign(Object.assign({},n),{width:a,height:o,fill:"transparent",x:-a/2,y:-o/2})}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=x(this.getSize(e),2),i=r[0],a=r[1];return!!n&&Object.assign({width:i*aN,height:a*aN},n)}},{key:"drawKeyShape",value:function(e,t){var n=this.upsert("key",qN,this.getKeyStyle(e),t);return JN(this),n}},{key:"drawHaloShape",value:function(e,t){this.upsert("halo",VT,this.getHaloStyle(e),t)}},{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),e&&("x"in e||"y"in e||"z"in e)&&QN(this)}}])}(nO);OL.defaultStyleProps={size:32};var LL=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getKeyStyle",value:function(e){var n=x(this.getSize(e),2),r=n[0],i=n[1];return Object.assign(Object.assign({},Xn(S(t.prototype),"getKeyStyle",this).call(this,e)),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=this.getShape("key").attributes,i=r.width,a=r.height;return!!n&&Object.assign({width:i*aN,height:a*aN},n)}},{key:"drawKeyShape",value:function(e,t){return this.upsert("key",VT,this.getKeyStyle(e),t)}}])}(nO),DL=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getInnerR",value:function(e){return e.innerR||3*this.getOuterR(e)/8}},{key:"getOuterR",value:function(e){return Math.min.apply(Math,I(this.getSize(e)))/2}},{key:"getPoints",value:function(e){return t=this.getOuterR(e),n=this.getInnerR(e),[[0,-t],[n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,n],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)]];var t,n}},{key:"getIconStyle",value:function(e){var n=Xn(S(t.prototype),"getIconStyle",this).call(this,e),r=2*this.getInnerR(e)*aN;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getPortXY",value:function(e,t){var n=t.placement,r=void 0===n?"top":n;return VD(this.getShape("key").getLocalBounds(),r,function(e,t){var n={};return n.top=[0,-e],n.left=[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n["left-bottom"]=[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.bottom=[0,t],n["right-bottom"]=[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],n.right=n.default=[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],n}(this.getOuterR(e),this.getInnerR(e)),!1)}}])}(iO),IL=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getPoints",value:function(e){var t=e.direction,n=x(this.getSize(e),2);return function(e,t,n){var r=t/2,i=e/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up}(n[0],n[1],t)}},{key:"getPortXY",value:function(e,t){var n=e.direction,r=t.placement,i=void 0===r?"top":r,a=this.getShape("key").getLocalBounds(),o=x(this.getSize(e),2),s=function(e,t,n){var r=t/2,i=e/2,a={};"down"===n?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):"left"===n?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):"right"===n?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]);return a}(o[0],o[1],n);return VD(a,i,s,!1)}},{key:"getIconStyle",value:function(e){var t=e.icon,n=e.iconText,r=e.iconSrc,i=e.direction;if(!1===t||IN(n||r))return!1;var a=xN(this.getGraphicStyle(e),"icon"),o=this.getShape("key").getLocalBounds(),s=function(e,t){var n=e.center,r=x(dP(e),2),i=r[0],a=r[1];return["up"===t||"down"===t?n[0]:"right"===t?n[0]-i/6:n[0]+i/6,"left"===t||"right"===t?n[1]:"down"===t?n[1]-a/6:n[1]+a/6]}(o,i),u=x(s,2),l=u[0],c=u[1],h=2*function(e,t){var n=x(dP(e),2),r=n[0],i=n[1],a=x("up"===t||"down"===t?[r,i]:[i,r],2);return r=a[0],i=a[1],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(r/2,2)+Math.pow(i,2))-r/2,2))/(2*i)}(o,i)*aN;return Object.assign({x:l,y:c,width:h,height:h},a)}}])}(iO);IL.defaultStyleProps={size:40,direction:"up"};var FL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},UL=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[MN({style:t.defaultStyleProps},e)])).type="combo",n.updateComboPosition(n.parsedAttributes),n}return C(t,e),p(t,[{key:"getKeySize",value:function(e){var t=e.collapsed,n=e.childrenNode;return 0===(void 0===n?[]:n).length?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}},{key:"getEmptyKeySize",value:function(e){var t=e.padding,n=e.collapsedSize,r=x(uP(t),4),i=r[0],a=r[1],o=r[2],s=r[3];return wR(kN(n),[s+a,i+o,0])}},{key:"getCollapsedKeySize",value:function(e){return kN(e.collapsedSize)}},{key:"getExpandedKeySize",value:function(e){var t=this.getContentBBox(e);return[cP(t),hP(t),0]}},{key:"getContentBBox",value:function(e){var t=this,n=e.childrenNode,r=void 0===n?[]:n,i=e.padding,a=r.map((function(e){return t.context.element.getElement(e)})).filter(Boolean);if(0===a.length){var o=new Vw,s=e.x,u=void 0===s?0:s,l=e.y,c=void 0===l?0:l,h=x(kN(e.size),2),d=h[0],f=h[1];return o.setMinMax([u-d/2,c-f/2,0],[u+d/2,c+f/2,0]),o}var p=gP(a.map((function(e){return e.getBounds()})));return i?vP(p,i):p}},{key:"drawCollapsedMarkerShape",value:function(e,t){var n=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",$N,n,t),JN(this)}},{key:"getCollapsedMarkerStyle",value:function(e){if(!e.collapsed||!e.collapsedMarker)return!1;var t=xN(this.getGraphicStyle(e),"collapsedMarker"),n=t.type,r=FL(t,["type"]),i=x(GR(this.getShape("key").getLocalBounds(),"center"),2),a=i[0],o=i[1],s=Object.assign(Object.assign({},r),{x:a,y:o});if(n){var u=this.getCollapsedMarkerText(n,e);Object.assign(s,{text:u})}return s}},{key:"getCollapsedMarkerText",value:function(e,t){var n=t.childrenData,r=void 0===n?[]:n,i=this.context.model;return"descendant-count"===e?i.getDescendantsData(this.id).length.toString():"child-count"===e?r.length.toString():"node-count"===e?i.getDescendantsData(this.id).filter((function(e){return"node"===i.getElementType(eR(e))})).length.toString():PE(e)?e(r):""}},{key:"getComboPosition",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.collapsed,o=e.childrenData;if(0===(void 0===o?[]:o).length)return[+n,+i,0];if(a){var s=this.context.model,u=s.getDescendantsData(this.id).filter((function(e){return!s.isCombo(eR(e))}));return u.length>0&&u.some(BR)?_R(u.reduce((function(e,t){return wR(e,UR(t))}),[0,0,0]),u.length):[+n,+i,0]}return this.getContentBBox(e).center}},{key:"getComboStyle",value:function(e){var t=x(this.getComboPosition(e),2),n=t[0],r=t[1];return{x:n,y:r,transform:[["translate",n,r]]}}},{key:"updateComboPosition",value:function(e){var t=this.getComboStyle(e);Object.assign(this.style,t);var n=t.x,r=t.y;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),QN(this)}},{key:"render",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;Xn(S(t.prototype),"render",this).call(this,e,n),this.drawCollapsedMarkerShape(e,n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Xn(S(t.prototype),"update",this).call(this,e),this.updateComboPosition(this.parsedAttributes)}},{key:"onframe",value:function(){Xn(S(t.prototype),"onframe",this).call(this),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}},{key:"animate",value:function(e,n){var r=this,i=Xn(S(t.prototype),"animate",this).call(this,this.attributes.collapsed?e:e.map((function(e){e.x,e.y,e.z,e.transform;return FL(e,["x","y","z","transform"])})),n);return i?new Proxy(i,{set:function(e,t,n){return"currentTime"===t&&Promise.resolve().then((function(){return r.onframe()})),Reflect.set(e,t,n)}}):i}}])}(nO);UL.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};var BL=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"drawKeyShape",value:function(e,t){return this.upsert("key",AT,this.getKeyStyle(e),t)}},{key:"getKeyStyle",value:function(e){var n=e.collapsed,r=Xn(S(t.prototype),"getKeyStyle",this).call(this,e),i=x(this.getKeySize(e),1)[0];return Object.assign(Object.assign(Object.assign({},r),n&&xN(r,"collapsed")),{r:i/2})}},{key:"getCollapsedKeySize",value:function(e){var t=x(kN(e.collapsedSize),2),n=t[0],r=t[1],i=Math.max(n,r)/2;return[2*i,2*i,0]}},{key:"getExpandedKeySize",value:function(e){var t=x(dP(this.getContentBBox(e)),2),n=t[0],r=t[1],i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/2;return[2*i,2*i,0]}},{key:"getIntersectPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ZR(e,this.getShape("key").getBounds(),t)}}])}(UL),zL=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"drawKeyShape",value:function(e,t){return this.upsert("key",VT,this.getKeyStyle(e),t)}},{key:"getKeyStyle",value:function(e){var n=Xn(S(t.prototype),"getKeyStyle",this).call(this,e),r=x(this.getKeySize(e),2),i=r[0],a=r[1];return Object.assign(Object.assign(Object.assign({},n),e.collapsed&&xN(n,"collapsed")),{width:i,height:a,x:-i/2,y:-a/2})}}])}(UL),GL=function(e,t){if(!MC(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},HL=function(e,t){return!!MC(e)&&e.indexOf(t)>-1},jL=function(e,t){return void 0===t&&(t=[]),GL(e,(function(e){return!HL(t,e)}))},VL={padding:10};function WL(e,t,n,r,i,a){for(var o,s,u=Object.assign(VL,a).padding,l=fP(n,u),c=fP(r,u),h=[e].concat(I(i),[t]),d=null,f=[],p=0,v=h.length;p<v-1;p++){var g=p+1,m=h[p],y=h[g],b=XR(o=m,s=y)||function(e,t){return e[0]===t[0]}(o,s),x=null;if(0===p)if(g===v-1)if(l.intersects(c))x=eD(m,y,l,c);else if(bP(m,l)||bP(y,c))b||(x=$L(m,y,l,c));else{var E=EP(m,l),w=EP(y,c);(x=ZL(E,w,qL(E,w))).points.unshift(E),x.points.push(w)}else mP(y,l)?x=eD(m,y,l,fP(y,u),d):b||(x=JL(m,y,l));else g===v-1?mP(m,c)?x=eD(m,y,fP(m,u),c,d):b||(x=QL(m,y,c,d)):b||(x=ZL(m,y,d));x?(f.push.apply(f,I(x.points)),d=x.direction):d=qL(m,y),g<v-1&&f.push(y)}return f.map(NR)}var XL={N:"S",S:"N",W:"E",E:"W"},YL={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function qL(e,t){var n=x(e,2),r=n[0],i=n[1],a=x(t,2),o=a[0],s=a[1];return r===o?i>s?"N":"S":i===s?r>o?"W":"E":null}function KL(e,t){return"N"===t||"S"===t?hP(e):cP(e)}function ZL(e,t,n){var r=[e[0],t[1]],i=[t[0],e[1]],a=qL(e,r),o=qL(e,i),s=n?XL[n]:null,u=a===n||a!==s&&o!==n?r:i;return{points:[u],direction:qL(u,t)}}function JL(e,t,n){if(bP(e,n)){var r=tD(e,t,n);return{points:[r],direction:qL(r,t)}}var i=EP(e,n),a=["left","right"].includes(xP(e,n))?[t[0],i[1]]:[i[0],t[1]];return{points:[a],direction:qL(a,t)}}function QL(e,t,n,r){var i=bP(t,n)?t:EP(t,n),a=[[i[0],e[1]],[e[0],i[1]]],o=a.filter((function(e){return function(e,t){return!mP(e,t)}(e,n)&&!yP(e,n,!0)})),s=o.filter((function(t){return qL(t,e)!==r}));if(s.length>0){var u=s.find((function(t){return qL(e,t)===r}))||s[0];return{points:[u],direction:qL(u,t)}}var l=WR(t,jL(a,o)[0],KL(n,r)/2);return{points:[tD(l,e,n),l],direction:qL(l,t)}}function $L(e,t,n,r){var i=JL(e,t,n),a=OR(i.points[0]);if(mP(a,r)){var o=OR((i=JL(t,e,r)).points[0]);if(mP(o,n)){var s=WR(e,a,KL(n,qL(e,a))/2),u=WR(t,o,KL(r,qL(t,o))/2),l=[(s[0]+u[0])/2,(s[1]+u[1])/2],c=JL(e,l,n),h=QL(l,t,r,c.direction);i.points=[c.points[0],h.points[0]],i.direction=h.direction}}return i}function eD(e,t,n,r,i){var a,o=.01,s=gP([n,r]),u=TR(t,s.center)>TR(e,s.center),l=x(u?[t,e]:[e,t],2),c=l[0],h=l[1],d=hP(s)+cP(s);if(i){var f=[c[0]+d*Math.cos(YL[i]),c[1]+d*Math.sin(YL[i])];a=WR(EP(f,s),f,o)}else a=WR(EP(c,s),c,-.01);var p=tD(a,h,s),v=[VR(a,2),VR(p,2)];if(AC(VR(a),VR(p))){var g=PR(kR(a,c),[1,0,0])+Math.PI/2;v=[a,tD(a,p=VR(WR(EP(p=[h[0]+d*Math.cos(g),h[1]+d*Math.sin(g),0],s),h,-.01),2),s),p]}return{points:u?v.reverse():v,direction:qL(u?a:p,t)}}function tD(e,t,n){var r=[e[0],t[1]];return mP(r,n)&&(r=[t[0],e[1]]),r}function nD(e,t,n,r,i){var a="number"===typeof t?t:.5;"start"===t&&(a=0),"end"===t&&(a=.99);var o=HR(e.getPoint(a)),s=HR(e.getPoint(a+.01)),u="start"===t?"left":"end"===t?"right":"center";if(XR(o,s)||!n){var l=x(rD(e,a,r,i),2);return{transform:[["translate",l[0],l[1]]],textAlign:u}}var c=Math.atan2(s[1]-o[1],s[0]-o[0]);s[0]<o[0]&&(u="center"===u?u:"left"===u?"right":"left",r*=-1,c+=Math.PI);var h=x(rD(e,a,r,i,c),2);return{textAlign:u,transform:[["translate",h[0],h[1]],["rotate",c/Math.PI*180]]}}function rD(e,t,n,r,i){var a=x(HR(e.getPoint(t)),2),o=a[0],s=a[1],u=n,l=r;return i&&(u=n*Math.cos(i)-r*Math.sin(i),l=n*Math.sin(i)+r*Math.cos(i)),[o+u,s+l]}function iD(e,t,n,r){if(AC(e,t))return e;var i=kR(t,e),a=[e[0]+n*i[0],e[1]+n*i[1]],o=CR(RR(i,!1));return a[0]+=r*o[0],a[1]+=r*o[1],a}function aD(e,t,n){return[["M",e[0],e[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],t[0],t[1]]]}function oD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e[0],i=e[e.length-1],a=e.slice(1,e.length-1),o=[["M",r[0],r[1]]];return a.forEach((function(e,n){var s=a[n-1]||r,u=a[n+1]||i;if(!YR(s,e,u)&&t){var l=function(e,t,n,r){var i=AR(e,t),a=AR(n,t),o=Math.min(r,Math.min(i,a)/2),s=[t[0]-o/i*(t[0]-e[0]),t[1]-o/i*(t[1]-e[1])],u=[t[0]-o/a*(t[0]-n[0]),t[1]-o/a*(t[1]-n[1])];return[s,u]}(s,e,u,t),c=x(l,2),h=c[0],d=c[1];o.push(["L",h[0],h[1]],["Q",e[0],e[1],d[0],d[1]],["L",d[0],d[1]])}else o.push(["L",e[0],e[1]])})),o.push(["L",i[0],i[1]]),n&&o.push(["Z"]),o}var sD=function(e){var t=Math.PI/2,n=hP(e)/2,r=cP(e)/2,i=Math.atan2(n,r)/2,a=Math.atan2(r,n)/2;return{top:[-t-a,-t+a],"top-right":[-t+a,-i],"right-top":[-t+a,-i],right:[-i,i],"bottom-right":[i,t-a],"right-bottom":[i,t-a],bottom:[t-a,t+a],"bottom-left":[t+a,Math.PI-i],"left-bottom":[t+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-t-a],"left-top":[Math.PI+i,-t-a]}};function uD(e,t,n,r,i){var a=fP(e),o=e.getCenter(),s=r&&YD(r),u=i&&YD(i);if(!s||!u){var l=sD(a),c=l[t][0],h=l[t][1],d=x(dP(a),2),f=d[0],p=d[1],v=Math.max(f,p),g=wR(o,[v*Math.cos(c),v*Math.sin(c),0]),m=wR(o,[v*Math.cos(h),v*Math.sin(h),0]);if(s=JD(e,g),u=JD(e,m),!n){var y=[u,s];s=y[0],u=y[1]}}return[s,u]}function lD(e,t,n,r,i,a){var o=e.getPorts()[i||a],s=e.getPorts()[a||i],u=x(uD(e,t,n,o,s),2),l=u[0],c=u[1],h=function(e,t,n,r){var i=e.getCenter();if(AC(t,n)){var a=kR(t,i),o=[r*Math.sign(a[0])||r/2,r*Math.sign(a[1])||-r/2,0];return[wR(t,o),wR(n,SR(o,[1,-1,1]))]}return[WR(i,t,TR(i,t)+r),WR(i,n,TR(i,n)+r)]}(e,l,c,r);return o&&(l=ZD(o,h[0])),s&&(c=ZD(s,h[h.length-1])),aD(l,c,h)}function cD(e,t,n,r,i,a,o){var s=WD(e),u=s[a||o],l=s[o||a],c=x(uD(e,n,r,u,l),2),h=c[0],d=c[1],f=function(e,t,n,r){var i=[],a=fP(e);if(AC(t,n)){switch(xP(t,a)){case"left":i.push([t[0]-r,t[1]]),i.push([t[0]-r,t[1]+r]),i.push([t[0],t[1]+r]);break;case"right":i.push([t[0]+r,t[1]]),i.push([t[0]+r,t[1]+r]),i.push([t[0],t[1]+r]);break;case"top":i.push([t[0],t[1]-r]),i.push([t[0]+r,t[1]-r]),i.push([t[0]+r,t[1]]);break;case"bottom":i.push([t[0],t[1]+r]),i.push([t[0]+r,t[1]+r]),i.push([t[0]+r,t[1]])}}else{var o=xP(t,a),s=xP(n,a);if(o===s){var u,l;switch(o){case"left":u=Math.min(t[0],n[0])-r,i.push([u,t[1]]),i.push([u,n[1]]);break;case"right":u=Math.max(t[0],n[0])+r,i.push([u,t[1]]),i.push([u,n[1]]);break;case"top":l=Math.min(t[1],n[1])-r,i.push([t[0],l]),i.push([n[0],l]);break;case"bottom":l=Math.max(t[1],n[1])+r,i.push([t[0],l]),i.push([n[0],l])}}else{var c=function(e,t){return{left:[t[0]-r,t[1]],right:[t[0]+r,t[1]],top:[t[0],t[1]-r],bottom:[t[0],t[1]+r]}[e]},h=c(o,t),d=c(s,n),f=tD(h,d,a);i.push(h,f,d)}}return i}(e,h,d,i);return u&&(h=ZD(u,f[0])),l&&(d=ZD(l,f[f.length-1])),oD([h].concat(I(f),[d]),t)}function hD(e,t){var n=new Set,r=new Set,i=new Set;return e.forEach((function(a){t(a).forEach((function(t){n.add(t),e.includes(t.source)&&e.includes(t.target)?r.add(t):i.add(t)}))})),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function dD(e,t){for(var n=[],r=e;r;){n.push(r);var i=t(eR(r));if(!i)break;r=i}if(n.some((function(e){var t;return null===(t=e.style)||void 0===t?void 0:t.collapsed}))){var a=n.reverse().findIndex(fN);return n[a]||n.at(-1)}return e}var fD=function(e,t){var n=Math.max(e,t)/2;return[["M",-e/2,0],["A",n,n,0,1,0,2*n-e/2,0],["A",n,n,0,1,0,-e/2,0],["Z"]]},pD=function(e,t){return[["M",-e/2,0],["L",e/2,-t/2],["L",e/2,t/2],["Z"]]},vD=function(e,t){return[["M",-e/2,0],["L",0,-t/2],["L",e/2,0],["L",0,t/2],["Z"]]},gD=function(e,t){return[["M",-e/2,0],["L",e/2,-t/2],["L",4*e/5-e/2,0],["L",e/2,t/2],["Z"]]},mD=function(e,t){return[["M",-e/2,-t/2],["L",e/2,-t/2],["L",e/2,t/2],["L",-e/2,t/2],["Z"]]},yD=function(e,t){var n=e/2,r=e/7,i=e-r;return[["M",-n,0],["L",0,-t/2],["L",0,t/2],["Z"],["M",i-n,-t/2],["L",i+r-n,-t/2],["L",i+r-n,t/2],["L",i-n,t/2],["Z"]]},bD=function(e,t){return[["M",e/2,-t/2],["L",-e/2,0],["L",e/2,0],["L",-e/2,0],["L",e/2,t/2]]},xD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ED=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[MN({style:t.defaultStyleProps},e)])).type="edge",n}return C(t,e),p(t,[{key:"sourceNode",get:function(){var e=this.parsedAttributes.sourceNode;return this.context.element.getElement(e)}},{key:"targetNode",get:function(){var e=this.parsedAttributes.targetNode;return this.context.element.getElement(e)}},{key:"getKeyStyle",value:function(e){var t,n,r=this.getGraphicStyle(e),i=r.loop,a=xD(r,["loop"]),o=this.sourceNode,s=this.targetNode,u={d:i&&(n=s,(t=o)&&n&&t===n)?this.getLoopPath(e):this.getKeyPath(e)};return BT.PARSED_STYLE_LIST.forEach((function(e){e in a&&(u[e]=a[e])})),u}},{key:"getLoopPath",value:function(e){var t=e.sourcePort,n=e.targetPort,r=this.sourceNode,i=fP(r),a=Math.max(cP(i),hP(i)),o=xN(this.getGraphicStyle(e),"loop"),s=o.placement,u=o.clockwise,l=o.dist;return lD(r,s,u,void 0===l?a:l,t,n)}},{key:"getEndpoints",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.sourcePort,i=e.targetPort,a=this.sourceNode,o=this.targetNode,s=function(e,t,n,r){var i=qD(e,t,n,r),a=qD(t,e,r,n);return[i,a]}(a,o,r,i),u=x(s,2),l=u[0],c=u[1];if(!t)return[l?YD(l):a.getCenter(),c?YD(c):o.getCenter()];var h="function"===typeof n?n():n;return[KD(l||a,h[0]||c||o),KD(c||o,h[h.length-1]||l||a)]}},{key:"getHaloStyle",value:function(e){if(!1===e.halo)return!1;var t=this.getKeyStyle(e),n=xN(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},t),n)}},{key:"getLabelStyle",value:function(e){if(!1===e.label||!e.labelText)return!1;var t=xN(this.getGraphicStyle(e),"label"),n=t.placement,r=t.offsetX,i=t.offsetY,a=t.autoRotate,o=t.maxWidth,s=xD(t,["placement","offsetX","offsetY","autoRotate","maxWidth"]),u=nD(this.shapeMap.key,n,a,r,i),l=this.shapeMap.key.getLocalBounds(),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return CN(TR(e[0],e[1])*n,t)}([l.min,l.max],o);return Object.assign({wordWrapWidth:c},u,s)}},{key:"getBadgeStyle",value:function(e){if(!1===e.badge||!e.badgeText)return!1;var t=xN(e,"badge"),n=t.offsetX,r=t.offsetY,i=t.placement,a=xD(t,["offsetX","offsetY","placement"]);return Object.assign(a,function(e,t,n,r,i){var a,o,s=2*(null===(a=e.badge)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])||0,u=2*(null===(o=e.label)||void 0===o?void 0:o.getGeometryBounds().halfExtents[0])||0;return nD(e.key,n,!0,(u?(u/2+s/2)*("suffix"===t?1:-1):0)+r,i)}(this.shapeMap,i,e.labelPlacement,n,r))}},{key:"drawArrow",value:function(e,t){var n,r="start"===t,i=e["start"===t?"startArrow":"endArrow"],a=this.shapeMap.key;if(i){var o=this.getArrowStyle(e,r),s=x(r?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],3),u=s[0],l=s[1],c=s[2],h=a.parsedStyle[u];if(h)h.attr(o);else{var d=new(o.src?DT:BT)({style:o});a.style[u]=d}a.style[l]=e[c]||o.width/2+ +o.lineWidth}else{var f=r?"markerStart":"markerEnd";null===(n=a.style[f])||void 0===n||n.destroy(),a.style[f]=null}}},{key:"getArrowStyle",value:function(e,t){var n=this.getShape("key").attributes,i=t?"startArrow":"endArrow",a=xN(this.getGraphicStyle(e),i),o=a.size,s=a.type,u=xD(a,["size","type"]),l=kN(function(e,t){return t||(e<4?10:4===e?12:2.5*e)}(n.lineWidth,o)),c=x(l,2),h=c[0],d=c[1],f=(PE(s)?s:r[s]||pD)(h,d);return Object.assign(CL(n,["stroke","strokeOpacity","fillOpacity"]),{width:h,height:d},Object.assign({},f&&{d:f,fill:"simple"===s?"":n.stroke}),u)}},{key:"drawLabelShape",value:function(e,t){var n=this.getLabelStyle(e);this.upsert("label",GN,n,t)}},{key:"drawHaloShape",value:function(e,t){var n=this.getHaloStyle(e);this.upsert("halo",BT,n,t)}},{key:"drawBadgeShape",value:function(e,t){var n=this.getBadgeStyle(e);this.upsert("badge",HN,n,t)}},{key:"drawSourceArrow",value:function(e){this.drawArrow(e,"start")}},{key:"drawTargetArrow",value:function(e){this.drawArrow(e,"end")}},{key:"drawKeyShape",value:function(e,t){var n=this.getKeyStyle(e);return this.upsert("key",BT,n,t)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(e,t),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t))}},{key:"onframe",value:function(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}},{key:"animate",value:function(e,n){var r=this,i=Xn(S(t.prototype),"animate",this).call(this,e,n);return i?new Proxy(i,{set:function(e,t,n){return"currentTime"===t&&Promise.resolve().then((function(){return r.onframe()})),Reflect.set(e,t,n)}}):i}}])}(eO);ED.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};var wD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getKeyPath",value:function(e){var t=x(this.getEndpoints(e),2),n=t[0],r=t[1],i=e.controlPoints,a=e.curvePosition,o=e.curveOffset,s=this.getControlPoints(n,r,function(e){return kx(e)?[e,1-e]:e}(a),function(e){return kx(e)?[e,-e]:e}(o),i);return aD(n,r,s)}},{key:"getControlPoints",value:function(e,t,n,r,i){return 2===(null===i||void 0===i?void 0:i.length)?i:[iD(e,t,n[0],r[0]),iD(e,t,n[1],r[1])]}}])}(ED);wD.defaultStyleProps={curvePosition:.5,curveOffset:20};var kD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getControlPoints",value:function(e,t,n,r){var i=t[0]-e[0];return[[e[0]+i*n[0]+r[0],e[1]],[t[0]-i*n[1]+r[1],t[1]]]}}])}(wD);kD.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var SD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"getEndpoints",value:function(e){if(this.sourceNode.id===this.ref.id)return Xn(S(t.prototype),"getEndpoints",this).call(this,e);var n=UR(this.ref);return[this.sourceNode.getIntersectPoint(n,!0),this.targetNode.getIntersectPoint(n)]}},{key:"toRadialCoordinate",value:function(e){var t=UR(this.ref);return[TR(e,t),LR(kR(e,t))]}},{key:"getControlPoints",value:function(e,t,n,r){var i=x(this.toRadialCoordinate(e),2),a=i[0],o=i[1],s=x(this.toRadialCoordinate(t),1)[0]-a;return[[e[0]+(s*n[0]+r[0])*Math.cos(o),e[1]+(s*n[0]+r[0])*Math.sin(o)],[t[0]-(s*n[1]-r[0])*Math.cos(o),t[1]-(s*n[1]-r[0])*Math.sin(o)]]}}])}(wD);SD.defaultStyleProps={curvePosition:.5,curveOffset:20};var _D=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getControlPoints",value:function(e,t,n,r){var i=t[1]-e[1];return[[e[0],e[1]+i*n[0]+r[0]],[t[0],t[1]-i*n[1]+r[1]]]}}])}(wD);_D.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var MD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getKeyPath",value:function(e){var t=x(this.getEndpoints(e),2),n=t[0],r=t[1];return[["M",n[0],n[1]],["L",r[0],r[1]]]}}])}(ED);MD.defaultStyleProps={};var TD={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:AR},AD=function(e){return"".concat(Math.round(e[0]),"|||").concat(Math.round(e[1]))};function CD(e,t){var n=function(e){return Math.round(e/t)};return kx(e)?n(e):e.map(n)}function PD(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n||r?Math.atan2(r,n):0}function RD(e,t,n,r){var i=PD(e,t),a=n[AD(e)];return function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n}(PD(a||r,e),i)}function ND(e,t,n){return Math.min.apply(Math,I(t.map((function(t){return n(e,t)}))))}var OD=function(e,t,n,r){if(!t)return[e];var i=r.directionMap,a=r.offset,o=vP(t.getRenderBounds(),a),s=Object.keys(i).reduce((function(t,r){if(n.includes(r))for(var a=i[r],s=x(dP(o),2),u=s[0],l=s[1],c=[e[0]+a.stepX*u,e[1]+a.stepY*l],h=function(e){var t=x(e.min,2),n=t[0],r=t[1],i=x(e.max,2),a=i[0],o=i[1],s=[n,o],u=[a,o],l=[a,r],c=[n,r];return[[s,u],[u,l],[l,c],[c,s]]}(o),d=0;d<h.length;d++){var f=IR([e,c],h[d]);f&&yP(f,o)&&t.push(f)}return t}),[]);return mP(e,o)||s.push(e),s.map((function(e){return CD(e,r.gridSize)}))},LD=function(e,t,n,r,i,a,o){var s=[],u=[a[0]===r[0]?r[0]:e[0]*o,a[1]===r[1]?r[1]:e[1]*o];s.unshift(u);for(var l=e,c=t[AD(l)];c;){var h=c,d=l;RD(h,d,t,n)&&(u=[h[0]===d[0]?u[0]:h[0]*o,h[1]===d[1]?u[1]:h[1]*o],s.unshift(u)),c=t[AD(h)],l=h}var f=i.map((function(e){return[e[0]*o,e[1]*o]})),p=function(e,t,n){for(var r=e[0],i=n(e[0],t),a=0;a<e.length;a++){var o=e[a],s=n(o,t);s<i&&(r=o,i=s)}return r}(f,u,AR);return s.unshift(p),s};function DD(e,t,n,r){var i=NR(e.getCenter()),a=NR(t.getCenter()),o=Object.assign(TD,r),s=o.gridSize,u=function(e,t){var n=t.offset,r=t.gridSize,i={};return e.forEach((function(e){if(e&&!e.destroyed&&e.isVisible())for(var t=vP(e.getRenderBounds(),n),a=CD(t.min[0],r);a<=CD(t.max[0],r);a+=1)for(var o=CD(t.min[1],r);o<=CD(t.max[1],r);o+=1)i["".concat(a,"|||").concat(o)]=!0})),i}(o.enableObstacleAvoidance?n:[e,t],o),l=CD(i,s),c=CD(a,s),h=OD(i,e,o.startDirections,o),d=OD(a,t,o.endDirections,o);h.forEach((function(e){return delete u[AD(e)]})),d.forEach((function(e){return delete u[AD(e)]}));for(var f={},p={},v={},g={},m={},y=new ID,b=0;b<h.length;b++){var E=h[b],w=AD(E);f[w]=E,g[w]=0,m[w]=ND(E,d,o.distFunc),y.add({id:w,value:m[w]})}for(var k,S=d.map((function(e){return AD(e)})),_=o.maximumLoops,M=1/0,T=0,A=Object.entries(f);T<A.length;T++){var C=x(A[T],2),P=C[0],R=C[1];m[P]<=M&&(M=m[P],k=R)}for(;Object.keys(f).length>0&&_>0;){var N=y.minId(!1);if(!N)break;k=f[N];var O=AD(k);if(S.includes(O))return LD(k,v,l,a,h,c,s);delete f[O],y.remove(O),p[O]=!0;for(var L=0,D=Object.values(o.directionMap);L<D.length;L++){var I=D[L],F=wR(k,[I.stepX,I.stepY]),U=AD(F);if(!p[U]){var B=RD(k,F,v,l);if(!(B>o.maxAllowedDirectionChange)&&!u[U]){f[U]||(f[U]=F);var z=o.penalties[B],G=o.distFunc(k,F)+(isNaN(z)?s:z),H=g[O]+G,j=g[U];j&&H>=j||(v[U]=k,g[U]=H,m[U]=H+ND(F,d,o.distFunc),y.add({id:U,value:m[U]}))}}}_-=1}return[]}var ID=function(){return p((function e(){v(this,e),this.arr=[],this.map={},this.arr=[],this.map={}}),[{key:"_innerAdd",value:function(e,t){for(var n=0,r=t-1;r-n>1;){var i=Math.floor((n+r)/2);if(this.arr[i].value>e.value)r=i;else{if(!(this.arr[i].value<e.value))return this.arr.splice(i,0,e),void(this.map[e.id]=!0);n=i}}this.arr.splice(r,0,e),this.map[e.id]=!0}},{key:"add",value:function(e){delete this.map[e.id];var t=this.arr.length;if(!t||this.arr[t-1].value<e.value)return this.arr.push(e),void(this.map[e.id]=!0);this._innerAdd(e,t)}},{key:"remove",value:function(e){this.map[e]&&delete this.map[e]}},{key:"_clearAndGetMinId",value:function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e}},{key:"_findFirstId",value:function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}}},{key:"minId",value:function(e){return e?this._clearAndGetMinId():this._findFirstId()}}])}(),FD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getControlPoints",value:function(e){var t=e.router,n=this.sourceNode,r=this.targetNode,i=x(this.getEndpoints(e,!1),2),a=i[0],o=i[1],s=[];t?"shortest-path"===t.type?(s=DD(n,r,this.context.element.getNodes(),t)).length||(s=WL(a,o,n,r,e.controlPoints,{padding:t.offset})):"orth"===t.type&&(s=WL(a,o,n,r,e.controlPoints,t)):s=e.controlPoints;return s}},{key:"getPoints",value:function(e){var t=this.getControlPoints(e),n=x(this.getEndpoints(e,!0,t),2),r=n[0],i=n[1];return[r].concat(I(t),[i])}},{key:"getKeyPath",value:function(e){return oD(this.getPoints(e),e.radius)}},{key:"getLoopPath",value:function(e){var t=e.sourcePort,n=e.targetPort,r=e.radius,i=this.sourceNode,a=fP(i),o=Math.max(cP(a),hP(a))/4,s=xN(this.getGraphicStyle(e),"loop"),u=s.placement,l=s.clockwise,c=s.dist;return cD(i,r,u,l,void 0===c?o:c,t,n)}}])}(ED);FD.defaultStyleProps={radius:0,controlPoints:[],router:!1};var UD=function(e){function t(e){return v(this,t),T(this,t,[MN({style:t.defaultStyleProps},e)])}return C(t,e),p(t,[{key:"getKeyPath",value:function(e){var t=e.curvePosition,n=e.curveOffset,r=x(this.getEndpoints(e),2),i=r[0],a=r[1];return function(e,t,n){return[["M",e[0],e[1]],["Q",n[0],n[1],t[0],t[1]]]}(i,a,e.controlPoint||iD(i,a,t,n))}}])}(ED);UD.defaultStyleProps={curvePosition:.5,curveOffset:30};var BD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function zD(e){return e instanceof nO&&"node"===e.type}function GD(e){return e instanceof ED}function HD(e){return e instanceof UL}var jD={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],default:[.5,.5]};function VD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jD,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[.5,.5],a=Mx(t)?pN(n,t.toLocaleLowerCase(),i):t;if(!r&&Mx(t))return a;var o=x(a||i,2),s=o[0],u=o[1];return[e.min[0]+cP(e)*s,e.min[1]+hP(e)*u]}function WD(e){if(!e)return{};var t=e.getPorts();return(e.attributes.ports||[]).forEach((function(n,r){var i,a=n.key,o=n.placement;XD(n)&&(t[i=a||r]||(t[i]=GR(e.getShape("key").getBounds(),o)))})),t}function XD(e){var t=e.r;return!t||0===Number(t)}function YD(e){return oP(e)?e:e.getPosition()}function qD(e,t,n,r){var i=WD(e);if(n)return i[n];var a=Object.values(i);if(0!==a.length){var o=a.map((function(e){return YD(e)})),s=function(e,t){var n=WD(e);if(t)return[YD(n[t])];var r=Object.values(n);return r.length>0?r.map((function(e){return YD(e)})):[e.getCenter()]}(t,r),u=function(e,t){var n=1/0,r=[e[0],t[0]];return e.forEach((function(e){t.forEach((function(t){var i=TR(e,t);i<n&&(n=i,r=[e,t])}))})),r}(o,s),l=x(u,1)[0];return a.find((function(e){return YD(e)===l}))}}function KD(e,t){return HD(e)||zD(e)?JD(e,t):ZD(e,t)}function ZD(e,t){return e&&t?oP(e)?e:e.attributes.linkToCenter?e.getPosition():ZR(oP(t)?t:zD(t)?t.getCenter():t.getPosition(),e.getBounds()):[0,0,0]}function JD(e,t){if(!e||!t)return[0,0,0];var n=oP(t)?t:zD(t)?t.getCenter():t.getPosition();return e.getIntersectPoint(n)||e.getCenter()}function QD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.split("-"),o=x(GR(e,t),2),s=o[0],u=o[1],l=a.includes("left")?"right":a.includes("right")?"left":"center",c=a.includes("top")?"bottom":a.includes("bottom")?"top":"middle";return i&&(c="top"===c?"bottom":"bottom"===c?"top":c),{transform:[["translate",s+n,u+r]],textBaseline:c,textAlign:l}}function $D(e,t){"update"in e?e.update(t):e.attr(t)}function eI(e){return pN(e,"__to_be_destroyed__",!1)}var tI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},nI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).onCollapseExpand=function(e){return tI(r,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:if(n=e.target,zD(u=n)||GD(u)||HD(u)){t.next=5;break}return t.abrupt("return");case 5:if(r=n.id,i=this.context,a=i.model,o=i.graph,s=a.getElementDataById(r)){t.next=10;break}return t.abrupt("return",!1);case 10:if(l=this.options,c=l.onCollapse,h=l.onExpand,d=l.animation,f=l.align,!fN(s)){t.next=17;break}return t.next=14,o.expandElement(r,{animation:d,align:f});case 14:null===h||void 0===h||h(r),t.next=20;break;case 17:return t.next=19,o.collapseElement(r,{animation:d,align:f});case 19:null===c||void 0===c||c(r);case 20:case"end":return t.stop()}var u}),t,this)})))},r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this.context.graph,t=this.options.trigger;e.on("node:".concat(t),this.onCollapseExpand),e.on("combo:".concat(t),this.onCollapseExpand)}},{key:"unbindEvents",value:function(){var e=this.context.graph,t=this.options.trigger;e.off("node:".concat(t),this.onCollapseExpand),e.off("combo:".concat(t),this.onCollapseExpand)}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);nI.defaultOptions={enable:!0,animation:!0,trigger:mC.DBLCLICK,align:!0};var rI={},iI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},aI="g6-create-edge-assist-node-id",oI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).drop=function(e){return iI(r,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.targetType,!["combo","node"].includes(n)||!this.source){t.next=6;break}return t.next=4,this.handleCreateEdge(e);case 4:t.next=8;break;case 6:return t.next=8,this.cancelEdge();case 8:case"end":return t.stop()}}),t,this)})))},r.handleCreateEdge=function(e){return iI(r,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:if(a=this.context,o=a.graph,s=a.canvas,l=a.batch,c=a.element,h=this.options.style,!this.source){t.next=9;break}return this.createEdge(e),t.next=8,this.cancelEdge();case 8:return t.abrupt("return");case 9:return l.startBatch(),s.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([e.target.id])[0],d=o.getElementData(this.source),o.addNodeData([{id:aI,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(n=d.style)||void 0===n?void 0:n.x,y:null===(r=d.style)||void 0===r?void 0:r.y}}]),o.addEdgeData([{id:"g6-create-edge-assist-edge-id",source:this.source,target:aI,style:Object.assign({pointerEvents:"none"},h)}]),t.next=17,null===(i=c.draw({animation:!1}))||void 0===i?void 0:i.finished;case 17:case"end":return t.stop()}}),t,this)})))},r.updateAssistEdge=function(e){return iI(r,void 0,void 0,u().mark((function t(){var n,r,i,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.source){t.next=2;break}return t.abrupt("return");case 2:return r=this.context,i=r.model,a=r.element,i.translateNodeTo(aI,[e.canvas.x,e.canvas.y]),t.next=6,null===(n=a.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 6:case"end":return t.stop()}}),t,this)})))},r.createEdge=function(e){var t,n,i=r.context.graph,a=r.options,o=a.style,s=a.onFinish,u=a.onCreate;if(void 0!==(null===(t=e.target)||void 0===t?void 0:t.id)&&void 0!==r.source){var l,c=null===(n=r.getSelectedNodeIDs([e.target.id]))||void 0===n?void 0:n[0],h=u({id:"".concat(r.source,"-").concat(c,"-").concat((rI[l=l||"g"]?rI[l]+=1:rI[l]=1,l+rI[l])),source:r.source,target:c,style:o});i.addEdgeData([h]),s(h)}},r.cancelEdge=function(){return iI(r,void 0,void 0,u().mark((function e(){var t,n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.source){e.next=2;break}return e.abrupt("return");case 2:return n=this.context,r=n.graph,i=n.element,a=n.batch,r.removeNodeData([aI]),this.source=void 0,e.next=7,null===(t=i.draw({animation:!1}))||void 0===t?void 0:t.finished;case 7:a.endBatch();case 8:case"end":return e.stop()}}),e,this)})))},r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this.context.graph,t=this.options.trigger;this.unbindEvents(),"click"===t?(e.on(wC.CLICK,this.handleCreateEdge),e.on(gC.CLICK,this.handleCreateEdge),e.on(vC.CLICK,this.cancelEdge),e.on(bC.CLICK,this.cancelEdge)):(e.on(wC.DRAG_START,this.handleCreateEdge),e.on(gC.DRAG_START,this.handleCreateEdge),e.on(mC.POINTER_UP,this.drop)),e.on(mC.POINTER_MOVE,this.updateAssistEdge)}},{key:"getSelectedNodeIDs",value:function(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((function(e){return e.id})).concat(e)))}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(wC.CLICK,this.handleCreateEdge),e.off(gC.CLICK,this.handleCreateEdge),e.off(vC.CLICK,this.cancelEdge),e.off(bC.CLICK,this.cancelEdge),e.off(wC.DRAG_START,this.handleCreateEdge),e.off(gC.DRAG_START,this.handleCreateEdge),e.off(mC.POINTER_UP,this.drop),e.off(mC.POINTER_MOVE,this.updateAssistEdge)}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);oI.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:function(e){return e},onFinish:function(){}};var sI=function(e,t,n){var r;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,a)}),t),o&&e.apply(i,a)}},uI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},lI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).isDragging=!1,r.onDragStart=function(e){r.validate(e)&&(r.isDragging=!0,r.context.canvas.setCursor("grabbing"))},r.onDrag=function(e){if(r.isDragging){var t=e.movement,n=t.x,i=t.y;0!==(n|i)&&r.translate([n,i],!1)}},r.onDragEnd=function(){var e,t;r.isDragging=!1,r.context.canvas.setCursor(r.defaultCursor),null===(t=(e=r.options).onFinish)||void 0===t||t.call(e)},r.invokeOnFinish=sI((function(){var e,t;null===(t=(e=r.options).onFinish)||void 0===t||t.call(e)}),300),r.shortcut=new nN(e.graph),r.bindEvents(),r.defaultCursor=r.context.canvas.getConfig().cursor||"default",r}return C(t,e),p(t,[{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=this.options.trigger;if(RE(t)){var n=t.up,r=void 0===n?[]:n,i=t.down,a=void 0===i?[]:i,o=t.left,s=void 0===o?[]:o,u=t.right,l=void 0===u?[]:u;this.shortcut.bind(r,(function(t){return e.onTranslate([0,1],t)})),this.shortcut.bind(a,(function(t){return e.onTranslate([0,-1],t)})),this.shortcut.bind(s,(function(t){return e.onTranslate([1,0],t)})),this.shortcut.bind(l,(function(t){return e.onTranslate([-1,0],t)}))}else{var c=this.context.graph;c.on(mC.DRAG_START,this.onDragStart),c.on(mC.DRAG,this.onDrag),c.on(mC.DRAG_END,this.onDragEnd)}}},{key:"onTranslate",value:function(e,t){return uI(this,void 0,void 0,u().mark((function n(){var r,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validate(t)){n.next=2;break}return n.abrupt("return");case 2:return r=this.options.sensitivity,i=-1*r,n.next=6,this.translate(SR(e,i),this.options.animation);case 6:this.invokeOnFinish();case 7:case"end":return n.stop()}}),n,this)})))}},{key:"translate",value:function(e,t){return uI(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.clampByDirection(e),e=this.clampByRange(e),n.next=4,this.context.graph.translateBy(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"clampByDirection",value:function(e){var t=x(e,2),n=t[0],r=t[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(e){var t=x(e,2),n=t[0],r=t[1],i=this.context,a=i.viewport,o=x(i.canvas.getSize(),2),s=o[0],u=o[1],l=x(uP(this.options.range),4),c=[u*l[0],s*l[1],u*l[2],s*l[3]],h=vP(pP(a.getCanvasCenter()),c),d=kR(a.getViewportCenter(),[n,r,0]);if(!mP(d,h)){var f=x(h.min,2),p=f[0],v=f[1],g=x(h.max,2),m=g[0],y=g[1];(d[0]<p&&n>0||d[0]>m&&n<0)&&(n=0),(d[1]<v&&r>0||d[1]>y&&r<0)&&(r=0)}return[n,r]}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return"function"===typeof t?t(e):!!t}},{key:"unbindEvents",value:function(){this.shortcut.unbindAll();var e=this.context.graph;e.off(mC.DRAG_START,this.onDragStart),e.off(mC.DRAG,this.onDrag),e.off(mC.DRAG_END,this.onDragEnd)}},{key:"destroy",value:function(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);lI.defaultOptions={enable:function(e){return!("targetType"in e)||"canvas"===e.targetType},sensitivity:10,direction:"both",range:1/0};var cI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},hI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).enable=!1,r.enableElements=["node","combo"],r.target=[],r.shadowOrigin=[0,0],r.hiddenEdges=[],r.isDragging=!1,r.onDrop=function(e){return cI(r,void 0,void 0,u().mark((function t(){var n,r,i,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("link"===this.options.dropEffect){t.next=2;break}return t.abrupt("return");case 2:return r=this.context,i=r.model,a=r.element,o=e.target.id,this.target.forEach((function(e){var t=i.getParentData(e,NC);t&&eR(t)===o&&i.refreshComboData(o),i.setParent(e,o,NC)})),t.next=7,null===(n=null===a||void 0===a?void 0:a.draw({animation:!0}))||void 0===n?void 0:n.finished;case 7:case"end":return t.stop()}}),t,this)})))},r.setCursor=function(e){if(!r.isDragging){var t=e.type,n=r.context.canvas,i=r.options.cursor;t===mC.POINTER_ENTER?n.setCursor((null===i||void 0===i?void 0:i.grab)||"grab"):n.setCursor((null===i||void 0===i?void 0:i.default)||"default")}},r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragEnd=r.onDragEnd.bind(r),r.onDrop=r.onDrop.bind(r),r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=this.context,n=t.graph,r=t.canvas.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((function(t){n.on("".concat(t,":").concat(mC.DRAG_START),e.onDragStart),n.on("".concat(t,":").concat(mC.DRAG),e.onDrag),n.on("".concat(t,":").concat(mC.DRAG_END),e.onDragEnd),n.on("".concat(t,":").concat(mC.POINTER_ENTER),e.setCursor),n.on("".concat(t,":").concat(mC.POINTER_LEAVE),e.setCursor)})),["link"].includes(this.options.dropEffect)&&(n.on(gC.DROP,this.onDrop),n.on(vC.DROP,this.onDrop))}},{key:"getSelectedNodeIDs",value:function(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((function(e){return e.id})).concat(e)))}},{key:"getDelta",value:function(e){var t=this.context.graph.getZoom();return _R([e.dx,e.dy],t)}},{key:"onDragStart",value:function(e){var t;if(this.enable=this.validate(e),this.enable){var n=this.context,r=n.batch,i=n.canvas,a=n.graph;i.setCursor((null===(t=this.options.cursor)||void 0===t?void 0:t.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();var o=e.target.id;a.getElementState(o).includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}}},{key:"onDrag",value:function(e){if(this.enable){var t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t)}}},{key:"onDragEnd",value:function(){var e,t,n;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";var r=this.shadow.attributes,i=r.x,a=void 0===i?0:i,o=r.y,s=x(kR([+a,+(void 0===o?0:o)],this.shadowOrigin),2),u=s[0],l=s[1];this.moveElement(this.target,[u,l])}this.showEdges(),null===(t=(e=this.options).onFinish)||void 0===t||t.call(e,this.target);var c=this.context,h=c.batch,d=c.canvas;h.endBatch(),d.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"moveElement",value:function(e,t){return cI(this,void 0,void 0,u().mark((function n(){var r,i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.context,i=r.graph,a=r.model,"move"===this.options.dropEffect&&e.forEach((function(e){return a.refreshComboData(e)})),i.translateElementBy(Object.fromEntries(e.map((function(e){return[e,t]}))),!1);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"moveShadow",value:function(e){if(this.shadow){var t=this.shadow.attributes,n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=x(e,2),s=o[0],u=o[1];this.shadow.attr({x:+r+s,y:+a+u})}}},{key:"createShadow",value:function(e){var t=this,n=xN(this.options,"shadow"),r=gP(e.map((function(e){return t.context.element.getElement(e).getBounds()}))),i=x(r.min,2),a=i[0],o=i[1];this.shadowOrigin=[a,o];var s=x(dP(r),2),u={width:s[0],height:s[1],x:a,y:o};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},n),u),{visibility:"visible"})):(this.shadow=new VT({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},n),u),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}},{key:"showEdges",value:function(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}},{key:"hideEdge",value:function(){var e=this.options,t=e.hideEdge,n=e.shadow;if("none"!==t&&!n){var r=this.context.graph;this.hiddenEdges="all"===t?r.getEdgeData().map(eR):Array.from(new Set(this.target.map((function(e){return r.getRelatedEdgesData(e,t).map(eR)})).flat())),r.hideElement(this.hiddenEdges)}}},{key:"unbindEvents",value:function(){var e=this,t=this.context,n=t.graph,r=t.canvas.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((function(t){n.off("".concat(t,":").concat(mC.DRAG_START),e.onDragStart),n.off("".concat(t,":").concat(mC.DRAG),e.onDrag),n.off("".concat(t,":").concat(mC.DRAG_END),e.onDragEnd),n.off("".concat(t,":").concat(mC.POINTER_ENTER),e.setCursor),n.off("".concat(t,":").concat(mC.POINTER_LEAVE),e.setCursor)})),n.off("combo:".concat(mC.DROP),this.onDrop),n.off("canvas:".concat(mC.DROP),this.onDrop)}},{key:"destroy",value:function(){var e;this.unbindEvents(),null===(e=this.shadow)||void 0===e||e.destroy(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);hI.defaultOptions={animation:!0,enable:function(e){return["node","combo"].includes(e.targetType)},dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var dI=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete t._events[e],i--,a--),s.apply(t,n)}};o(i),o(a)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),fI=dI;function pI(e,t,n,r){for(;e.length;){var i=e.shift();if(n(i))return!0;t.add(i.id),r(i.id).forEach((function(n){t.has(n.id)||(t.add(n.id),e.push(n))}))}return!1}function vI(e,t,n,r){if(n(e))return!0;t.add(e.id);var i,a=D(r(e.id));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!t.has(o.id)&&vI(o,t,n,r))return!0}}catch(s){a.e(s)}finally{a.f()}return!1}var gI=function(){return!0},mI=function(){return p((function e(t){var n=this;v(this,e),P(this,"graph",void 0),P(this,"nodeFilter",void 0),P(this,"edgeFilter",void 0),P(this,"cacheEnabled",void 0),P(this,"inEdgesMap",new Map),P(this,"outEdgesMap",new Map),P(this,"bothEdgesMap",new Map),P(this,"allNodesMap",new Map),P(this,"allEdgesMap",new Map),P(this,"clearCache",(function(){n.inEdgesMap.clear(),n.outEdgesMap.clear(),n.bothEdgesMap.clear(),n.allNodesMap.clear(),n.allEdgesMap.clear()})),P(this,"refreshCache",(function(){n.clearCache(),n.updateCache(n.graph.getAllNodes().map((function(e){return e.id})))})),P(this,"updateCache",(function(e){var t=new Set;e.forEach((function(e){var r=n.bothEdgesMap.get(e);if(r&&r.forEach((function(e){return t.add(e.id)})),n.hasNode(e)){var i=n.graph.getRelatedEdges(e,"in").filter(n.edgeFilter),a=n.graph.getRelatedEdges(e,"out").filter(n.edgeFilter),o=Array.from(new Set([].concat(I(i),I(a))));o.forEach((function(e){return t.add(e.id)})),n.inEdgesMap.set(e,i),n.outEdgesMap.set(e,a),n.bothEdgesMap.set(e,o),n.allNodesMap.set(e,n.graph.getNode(e))}else n.inEdgesMap.delete(e),n.outEdgesMap.delete(e),n.bothEdgesMap.delete(e),n.allNodesMap.delete(e)})),t.forEach((function(e){n.hasEdge(e)?n.allEdgesMap.set(e,n.graph.getEdge(e)):n.allEdgesMap.delete(e)}))})),P(this,"handleGraphChanged",(function(e){var t=new Set;e.changes.forEach((function(n){switch(n.type){case"NodeAdded":case"NodeRemoved":t.add(n.value.id);break;case"NodeDataUpdated":t.add(n.id);break;case"EdgeAdded":case"EdgeRemoved":t.add(n.value.source),t.add(n.value.target);break;case"EdgeUpdated":"source"!==n.propertyName&&"target"!==n.propertyName||(t.add(n.oldValue),t.add(n.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(n.id)){var r=e.graph.getEdge(n.id);t.add(r.source),t.add(r.target)}}})),n.updateCache(t)})),this.graph=t.graph;var r=t.nodeFilter||gI,i=t.edgeFilter||gI;this.nodeFilter=r,this.edgeFilter=function(e){var t=n.graph.getEdgeDetail(e.id),a=t.source,o=t.target;return!(!r(a)||!r(o))&&i(e,a,o)},"auto"===t.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===t.cache?this.cacheEnabled=!0:this.cacheEnabled=!1}),[{key:"startAutoCache",value:function(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}},{key:"stopAutoCache",value:function(){this.graph.off("changed",this.handleGraphChanged)}},{key:"checkNodeExistence",value:function(e){this.getNode(e)}},{key:"hasNode",value:function(e){if(!this.graph.hasNode(e))return!1;var t=this.graph.getNode(e);return this.nodeFilter(t)}},{key:"areNeighbors",value:function(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some((function(t){return t.id===e}))}},{key:"getNode",value:function(e){var t=this.graph.getNode(e);if(!this.nodeFilter(t))throw new Error("Node not found for id: "+e);return t}},{key:"getRelatedEdges",value:function(e,t){return this.checkNodeExistence(e),this.cacheEnabled?"in"===t?this.inEdgesMap.get(e):"out"===t?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}},{key:"getDegree",value:function(e,t){return this.getRelatedEdges(e,t).length}},{key:"getSuccessors",value:function(e){var t=this,n=this.getRelatedEdges(e,"out").map((function(e){return t.getNode(e.target)}));return Array.from(new Set(n))}},{key:"getPredecessors",value:function(e){var t=this,n=this.getRelatedEdges(e,"in").map((function(e){return t.getNode(e.source)}));return Array.from(new Set(n))}},{key:"getNeighbors",value:function(e){var t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([].concat(I(t),I(n))))}},{key:"hasEdge",value:function(e){if(!this.graph.hasEdge(e))return!1;var t=this.graph.getEdge(e);return this.edgeFilter(t)}},{key:"getEdge",value:function(e){var t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw new Error("Edge not found for id: "+e);return t}},{key:"getEdgeDetail",value:function(e){var t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}},{key:"hasTreeStructure",value:function(e){return this.graph.hasTreeStructure(e)}},{key:"getRoots",value:function(e){return this.graph.getRoots(e).filter(this.nodeFilter)}},{key:"getChildren",value:function(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}},{key:"getParent",value:function(e,t){this.checkNodeExistence(e);var n=this.graph.getParent(e,t);return n&&this.nodeFilter(n)?n:null}},{key:"getAllNodes",value:function(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}},{key:"getAllEdges",value:function(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}},{key:"bfs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];pI([this.getNode(e)],new Set,t,r)}},{key:"dfs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];vI(this.getNode(e),new Set,t,r)}}])}(),yI=function(e){function t(e){var n;return v(this,t),P(n=T(this,t),"nodeMap",new Map),P(n,"edgeMap",new Map),P(n,"inEdgesMap",new Map),P(n,"outEdgesMap",new Map),P(n,"bothEdgesMap",new Map),P(n,"treeIndices",new Map),P(n,"changes",[]),P(n,"batchCount",0),P(n,"onChanged",(function(){})),P(n,"batch",(function(e){n.batchCount+=1,e(),n.batchCount-=1,n.batchCount||n.commit()})),e?(e.nodes&&n.addNodes(e.nodes),e.edges&&n.addEdges(e.edges),e.tree&&n.addTree(e.tree),e.onChanged&&(n.onChanged=e.onChanged),n):M(n)}return C(t,e),p(t,[{key:"commit",value:function(){var e=this.changes;this.changes=[];var t={graph:this,changes:e};this.emit("changed",t),this.onChanged(t)}},{key:"reduceChanges",value:function(e){var t=[];return e.forEach((function(e){switch(e.type){case"NodeRemoved":var n=!1;t=t.filter((function(t){if("NodeAdded"===t.type){var r=t.value.id===e.value.id;return r&&(n=!0),!r}return"NodeDataUpdated"===t.type?t.id!==e.value.id:"TreeStructureChanged"!==t.type||t.nodeId!==e.value.id})),n||t.push(e);break;case"EdgeRemoved":var r=!1;t=t.filter((function(t){if("EdgeAdded"===t.type){var n=t.value.id===e.value.id;return n&&(r=!0),!n}return"EdgeDataUpdated"!==t.type&&"EdgeUpdated"!==t.type||t.id!==e.value.id})),r||t.push(e);break;case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":var i=t.findIndex((function(t){return t.type===e.type&&t.id===e.id&&(void 0===e.propertyName||t.propertyName===e.propertyName)})),a=t[i];a?void 0!==e.propertyName?a.newValue=e.newValue:(t.splice(i,1),t.push(e)):t.push(e);break;case"TreeStructureDetached":(t=t.filter((function(t){return"TreeStructureAttached"===t.type?t.treeKey!==e.treeKey:"TreeStructureChanged"!==t.type||t.treeKey!==e.treeKey}))).push(e);break;case"TreeStructureChanged":var o=t.find((function(t){return"TreeStructureChanged"===t.type&&t.treeKey===e.treeKey&&t.nodeId===e.nodeId}));o?o.newParentId=e.newParentId:t.push(e);break;default:t.push(e)}})),t}},{key:"checkNodeExistence",value:function(e){this.getNode(e)}},{key:"hasNode",value:function(e){return this.nodeMap.has(e)}},{key:"areNeighbors",value:function(e,t){return this.getNeighbors(t).some((function(t){return t.id===e}))}},{key:"getNode",value:function(e){var t=this.nodeMap.get(e);if(!t)throw new Error("Node not found for id: "+e);return t}},{key:"getRelatedEdges",value:function(e,t){if(this.checkNodeExistence(e),"in"===t){var n=this.inEdgesMap.get(e);return Array.from(n)}if("out"===t){var r=this.outEdgesMap.get(e);return Array.from(r)}var i=this.bothEdgesMap.get(e);return Array.from(i)}},{key:"getDegree",value:function(e,t){return this.getRelatedEdges(e,t).length}},{key:"getSuccessors",value:function(e){var t=this,n=this.getRelatedEdges(e,"out").map((function(e){return t.getNode(e.target)}));return Array.from(new Set(n))}},{key:"getPredecessors",value:function(e){var t=this,n=this.getRelatedEdges(e,"in").map((function(e){return t.getNode(e.source)}));return Array.from(new Set(n))}},{key:"getNeighbors",value:function(e){var t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([].concat(I(t),I(n))))}},{key:"doAddNode",value:function(e){if(this.hasNode(e.id))throw new Error("Node already exists: "+e.id);this.nodeMap.set(e.id,e),this.inEdgesMap.set(e.id,new Set),this.outEdgesMap.set(e.id,new Set),this.bothEdgesMap.set(e.id,new Set),this.treeIndices.forEach((function(t){t.childrenMap.set(e.id,new Set)})),this.changes.push({type:"NodeAdded",value:e})}},{key:"addNodes",value:function(e){var t=this;this.batch((function(){var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.doAddNode(i)}}catch(a){r.e(a)}finally{r.f()}}))}},{key:"addNode",value:function(e){this.addNodes([e])}},{key:"doRemoveNode",value:function(e){var t=this,n=this.getNode(e),r=this.bothEdgesMap.get(e);null===r||void 0===r||r.forEach((function(e){return t.doRemoveEdge(e.id)})),this.nodeMap.delete(e),this.treeIndices.forEach((function(t){var r,i;null===(r=t.childrenMap.get(e))||void 0===r||r.forEach((function(e){t.parentMap.delete(e.id)}));var a=t.parentMap.get(e);a&&(null===(i=t.childrenMap.get(a.id))||void 0===i||i.delete(n)),t.parentMap.delete(e),t.childrenMap.delete(e)})),this.bothEdgesMap.delete(e),this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.changes.push({type:"NodeRemoved",value:n})}},{key:"removeNodes",value:function(e){var t=this;this.batch((function(){e.forEach((function(e){return t.doRemoveNode(e)}))}))}},{key:"removeNode",value:function(e){this.removeNodes([e])}},{key:"updateNodeDataProperty",value:function(e,t,n){var r=this,i=this.getNode(e);this.batch((function(){var a=i.data[t],o=n;i.data[t]=o,r.changes.push({type:"NodeDataUpdated",id:e,propertyName:t,oldValue:a,newValue:o})}))}},{key:"mergeNodeData",value:function(e,t){var n=this;this.batch((function(){Object.entries(t).forEach((function(t){var r=x(t,2),i=r[0],a=r[1];n.updateNodeDataProperty(e,i,a)}))}))}},{key:"updateNodeData",value:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],n=this.getNode(t);if("string"!==typeof(arguments.length<=1?void 0:arguments[1])){var r;if("function"===typeof(arguments.length<=1?void 0:arguments[1]))r=(arguments.length<=1?void 0:arguments[1])(n.data);else"object"===typeof(arguments.length<=1?void 0:arguments[1])&&(r=arguments.length<=1?void 0:arguments[1]);this.batch((function(){var i=n.data,a=r;n.data=r,e.changes.push({type:"NodeDataUpdated",id:t,oldValue:i,newValue:a})}))}else this.updateNodeDataProperty(t,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"checkEdgeExistence",value:function(e){if(!this.hasEdge(e))throw new Error("Edge not found for id: "+e)}},{key:"hasEdge",value:function(e){return this.edgeMap.has(e)}},{key:"getEdge",value:function(e){return this.checkEdgeExistence(e),this.edgeMap.get(e)}},{key:"getEdgeDetail",value:function(e){var t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}},{key:"doAddEdge",value:function(e){if(this.hasEdge(e.id))throw new Error("Edge already exists: "+e.id);this.checkNodeExistence(e.source),this.checkNodeExistence(e.target),this.edgeMap.set(e.id,e);var t=this.inEdgesMap.get(e.target),n=this.outEdgesMap.get(e.source),r=this.bothEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.target);t.add(e),n.add(e),r.add(e),i.add(e),this.changes.push({type:"EdgeAdded",value:e})}},{key:"addEdges",value:function(e){var t=this;this.batch((function(){var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.doAddEdge(i)}}catch(a){r.e(a)}finally{r.f()}}))}},{key:"addEdge",value:function(e){this.addEdges([e])}},{key:"doRemoveEdge",value:function(e){var t=this.getEdge(e),n=this.outEdgesMap.get(t.source),r=this.inEdgesMap.get(t.target),i=this.bothEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.target);n.delete(t),r.delete(t),i.delete(t),a.delete(t),this.edgeMap.delete(e),this.changes.push({type:"EdgeRemoved",value:t})}},{key:"removeEdges",value:function(e){var t=this;this.batch((function(){e.forEach((function(e){return t.doRemoveEdge(e)}))}))}},{key:"removeEdge",value:function(e){this.removeEdges([e])}},{key:"updateEdgeSource",value:function(e,t){var n=this,r=this.getEdge(e);this.checkNodeExistence(t);var i=r.source,a=t;this.outEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.outEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.source=t,this.batch((function(){n.changes.push({type:"EdgeUpdated",id:e,propertyName:"source",oldValue:i,newValue:a})}))}},{key:"updateEdgeTarget",value:function(e,t){var n=this,r=this.getEdge(e);this.checkNodeExistence(t);var i=r.target,a=t;this.inEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.inEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.target=t,this.batch((function(){n.changes.push({type:"EdgeUpdated",id:e,propertyName:"target",oldValue:i,newValue:a})}))}},{key:"updateEdgeDataProperty",value:function(e,t,n){var r=this,i=this.getEdge(e);this.batch((function(){var a=i.data[t],o=n;i.data[t]=o,r.changes.push({type:"EdgeDataUpdated",id:e,propertyName:t,oldValue:a,newValue:o})}))}},{key:"updateEdgeData",value:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],n=this.getEdge(t);if("string"!==typeof(arguments.length<=1?void 0:arguments[1])){var r;if("function"===typeof(arguments.length<=1?void 0:arguments[1]))r=(arguments.length<=1?void 0:arguments[1])(n.data);else"object"===typeof(arguments.length<=1?void 0:arguments[1])&&(r=arguments.length<=1?void 0:arguments[1]);this.batch((function(){var i=n.data,a=r;n.data=r,e.changes.push({type:"EdgeDataUpdated",id:t,oldValue:i,newValue:a})}))}else this.updateEdgeDataProperty(t,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"mergeEdgeData",value:function(e,t){var n=this;this.batch((function(){Object.entries(t).forEach((function(t){var r=x(t,2),i=r[0],a=r[1];n.updateEdgeDataProperty(e,i,a)}))}))}},{key:"checkTreeExistence",value:function(e){if(!this.hasTreeStructure(e))throw new Error("Tree structure not found for treeKey: "+e)}},{key:"hasTreeStructure",value:function(e){return this.treeIndices.has(e)}},{key:"attachTreeStructure",value:function(e){var t=this;this.treeIndices.has(e)||(this.treeIndices.set(e,{parentMap:new Map,childrenMap:new Map}),this.batch((function(){t.changes.push({type:"TreeStructureAttached",treeKey:e})})))}},{key:"detachTreeStructure",value:function(e){var t=this;this.checkTreeExistence(e),this.treeIndices.delete(e),this.batch((function(){t.changes.push({type:"TreeStructureDetached",treeKey:e})}))}},{key:"addTree",value:function(e,t){var n=this;this.batch((function(){n.attachTreeStructure(t);for(var r=[],i=Array.isArray(e)?e:[e];i.length;){var a=i.shift();r.push(a),a.children&&i.push.apply(i,I(a.children))}n.addNodes(r),r.forEach((function(e){var r;null===(r=e.children)||void 0===r||r.forEach((function(r){n.setParent(r.id,e.id,t)}))}))}))}},{key:"getRoots",value:function(e){var t=this;return this.checkTreeExistence(e),this.getAllNodes().filter((function(n){return!t.getParent(n.id,e)}))}},{key:"getChildren",value:function(e,t){this.checkNodeExistence(e),this.checkTreeExistence(t);var n=this.treeIndices.get(t).childrenMap.get(e);return Array.from(n||[])}},{key:"getParent",value:function(e,t){return this.checkNodeExistence(e),this.checkTreeExistence(t),this.treeIndices.get(t).parentMap.get(e)||null}},{key:"getAncestors",value:function(e,t){for(var n,r=[],i=this.getNode(e);n=this.getParent(i.id,t);)r.push(n),i=n;return r}},{key:"setParent",value:function(e,t,n){var r=this;this.checkTreeExistence(n);var i=this.treeIndices.get(n);if(i){var a=this.getNode(e),o=i.parentMap.get(e);if((null===o||void 0===o?void 0:o.id)!==t)if(void 0!==t&&null!==t){var s,u=this.getNode(t);if(i.parentMap.set(e,u),o)null===(s=i.childrenMap.get(o.id))||void 0===s||s.delete(a);var l=i.childrenMap.get(u.id);l||(l=new Set,i.childrenMap.set(u.id,l)),l.add(a),this.batch((function(){r.changes.push({type:"TreeStructureChanged",treeKey:n,nodeId:e,oldParentId:null===o||void 0===o?void 0:o.id,newParentId:u.id})}))}else{var c;o&&(null===(c=i.childrenMap.get(o.id))||void 0===c||c.delete(a)),i.parentMap.delete(e)}}}},{key:"dfsTree",value:function(e,t,n){var r=this;return vI(this.getNode(e),new Set,t,(function(e){return r.getChildren(e,n)}))}},{key:"bfsTree",value:function(e,t,n){var r=this;return pI([this.getNode(e)],new Set,t,(function(e){return r.getChildren(e,n)}))}},{key:"getAllNodes",value:function(){return Array.from(this.nodeMap.values())}},{key:"getAllEdges",value:function(){return Array.from(this.edgeMap.values())}},{key:"bfs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return pI([this.getNode(e)],new Set,t,r)}},{key:"dfs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return vI(this.getNode(e),new Set,t,r)}},{key:"clone",value:function(){var e=new t({nodes:this.getAllNodes().map((function(e){return an(an({},e),{},{data:an({},e.data)})})),edges:this.getAllEdges().map((function(e){return an(an({},e),{},{data:an({},e.data)})}))});return this.treeIndices.forEach((function(t,n){var r=t.parentMap,i=t.childrenMap,a=new Map;r.forEach((function(t,n){a.set(n,e.getNode(t.id))}));var o=new Map;i.forEach((function(t,n){o.set(n,new Set(Array.from(t).map((function(t){return e.getNode(t.id)}))))})),e.treeIndices.set(n,{parentMap:a,childrenMap:o})})),e}},{key:"toJSON",value:function(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}},{key:"createView",value:function(e){return new mI(an({graph:this},e))}}])}(fI),bI=p((function e(t,n){v(this,e),this.context=t,this.options=n||{}})),xI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},EI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function wI(e){var t=e.type;return["compact-box","mindmap","dendrogram","indented"].includes(t)}function kI(e){var t=e.nodes,n=e.edges,r={nodes:[],edges:[],combos:[]};return t.forEach((function(e){var t=e.data._isCombo?r.combos:r.nodes,n=e.data,i=n.x,a=n.y,o=n.z,s=void 0===o?0:o;null===t||void 0===t||t.push({id:e.id,style:{x:i,y:a,z:s}})})),n.forEach((function(e){var t=e.id,n=e.source,i=e.target,a=e.data,o=a.points,s=void 0===o?[]:o,u=a.controlPoints,l=void 0===u?s.slice(1,s.length-1):u;r.edges.push({id:t,source:n,target:i,style:Object.assign({},(null===l||void 0===l?void 0:l.length)?{controlPoints:l.map(HR)}:{})})})),r}function SI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t in e)return e[t].apply(e,r);if("instance"in e){var a=e.instance;if(t in a)return a[t].apply(a,r)}return null}function _I(e,t){if(t in e)return e[t];if("instance"in e){var n=e.instance;if(t in n)return n[t]}return null}var MI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},TI=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"forceLayoutInstance",get:function(){return this.context.layout.getLayoutInstance().find((function(e){return["d3-force","d3-force-3d"].includes(null===e||void 0===e?void 0:e.id)}))}},{key:"validate",value:function(e){return!!this.context.layout&&(this.forceLayoutInstance?Xn(S(t.prototype),"validate",this).call(this,e):(BC.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1))}},{key:"moveElement",value:function(e,t){return MI(this,void 0,void 0,u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.forceLayoutInstance,this.context.graph.getNodeData(e).forEach((function(n,i){var a=n.style||{},o=a.x,s=void 0===o?0:o,u=a.y,l=void 0===u?0:u;r&&SI(r,"setFixedPosition",e[i],I(wR([+s,+l],t)))}));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"onDragStart",value:function(e){if(this.enable=this.validate(e),this.enable){this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);var t=this.forceLayoutInstance;t&&_I(t,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach((function(e){var n=e.style||{},r=n.x,i=void 0===r?0:r,a=n.y,o=void 0===a?0:a;t&&SI(t,"setFixedPosition",eR(e),[+i,+o])}))}}},{key:"onDrag",value:function(e){if(this.enable){var t=this.getDelta(e);this.moveElement(this.target,t)}}},{key:"onDragEnd",value:function(){var e=this.forceLayoutInstance;e&&_I(e,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach((function(t){e&&SI(e,"setFixedPosition",eR(t),[null,null,null])}))}}])}(hI),AI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},CI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).isZoomEvent=function(e){return Boolean(e.data&&"scale"in e.data)},r.relatedEdgeToUpdate=new Set,r.zoom=r.context.graph.getZoom(),r.fixElementSize=function(e){return AI(r,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d,f,p=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:n=this.context.graph,r=this.options,i=r.state,a=r.nodeFilter,o=r.edgeFilter,s=r.comboFilter,l=(i?n.getElementDataByState("node",i):n.getNodeData()).filter(a),c=(i?n.getElementDataByState("edge",i):n.getEdgeData()).filter(o),h=(i?n.getElementDataByState("combo",i):n.getComboData()).filter(s),d=this.isZoomEvent(e)?this.zoom=Math.max(.01,Math.min(e.data.scale,10)):this.zoom,(f=[].concat(I(l),I(h))).length>0&&f.forEach((function(e){return p.fixNodeLike(e,d)})),this.updateRelatedEdges(),c.length>0&&c.forEach((function(e){return p.fixEdge(e,d)}));case 12:case"end":return t.stop()}}),t,this)})))},r.cachedStyles=new Map,r.getOriginalFieldValue=function(e,t,n){var i,a=r.cachedStyles.get(e)||[],o=(null===(i=a.find((function(e){return e.shape===t})))||void 0===i?void 0:i.style)||{};return n in o||(o[n]=t.attributes[n],r.cachedStyles.set(e,[].concat(I(a.filter((function(e){return e.shape!==t}))),[{shape:t,style:o}]))),o[n]},r.scaleEntireElement=function(e,t,n){t.setLocalScale(1/n);var i=r.cachedStyles.get(e)||[];i.push({shape:t}),r.cachedStyles.set(e,i)},r.scaleSpecificShapes=function(e,t,n){var i=function(e){var t=[],n=function(e){(null===e||void 0===e?void 0:e.children.length)&&e.children.forEach((function(e){t.push(e),n(e)}))};return n(e),t}(e);(Array.isArray(n)?n:[n]).forEach((function(n){var a=n.shape,o=n.fields,s="function"===typeof a?a(i):e.getShape(a);s&&(o?o.forEach((function(n){var i=r.getOriginalFieldValue(e.id,s,n);kx(i)&&(s.style[n]=i/t)})):r.scaleEntireElement(e.id,s,t))}))},r.skipIfExceedViewport=function(e){var t=r.context.viewport;return!(null===t||void 0===t?void 0:t.isInViewport(e.getRenderBounds(),!1,30))},r.fixNodeLike=function(e,t){var n=eR(e),i=r.context,a=i.element,o=i.model,s=a.getElement(n);if(s&&!r.skipIfExceedViewport(s)){o.getRelatedEdgesData(n).forEach((function(e){return r.relatedEdgeToUpdate.add(eR(e))}));var u=r.options[s.type];u?r.scaleSpecificShapes(s,t,u):r.scaleEntireElement(n,s,t)}},r.fixEdge=function(e,t){var n=eR(e),i=r.context.element.getElement(n);if(i&&!r.skipIfExceedViewport(i)){var a=r.options.edge;if(!a)return i.style.transformOrigin="center",void r.scaleEntireElement(n,i,t);r.scaleSpecificShapes(i,t,a)}},r.updateRelatedEdges=function(){var e=r.context.element;r.relatedEdgeToUpdate.size>0&&r.relatedEdgeToUpdate.forEach((function(t){var n=e.getElement(t);null===n||void 0===n||n.update({})})),r.relatedEdgeToUpdate.clear()},r.resetTransform=function(e){return AI(r,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(n=e.data)||void 0===n?void 0:n.firstRender)){t.next=2;break}return t.abrupt("return");case 2:this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}});case 3:case"end":return t.stop()}}),t,this)})))},r.bindEvents(),r}return C(t,e),p(t,[{key:"restoreCachedStyles",value:function(){var e=this;if(this.cachedStyles.size>0){this.cachedStyles.forEach((function(t){t.forEach((function(t){var n=t.shape,r=t.style;if(IN(r))n.setLocalScale(1);else{if(e.options.state)return;Object.entries(r).forEach((function(e){var t=x(e,2),r=t[0],i=t[1];return n.style[r]=i}))}}))}));var t=this.context,n=t.graph,r=t.element,i=Object.keys(Object.fromEntries(this.cachedStyles)).filter((function(e){return e&&"node"===n.getElementType(e)}));if(i.length>0){var a=new Set;i.forEach((function(e){n.getRelatedEdgesData(e).forEach((function(e){return a.add(eR(e))}))})),a.forEach((function(e){var t=null===r||void 0===r?void 0:r.getElement(e);null===t||void 0===t||t.update({})}))}}}},{key:"bindEvents",value:function(){var e=this.context.graph;e.on(xC.AFTER_DRAW,this.resetTransform),e.on(xC.AFTER_TRANSFORM,this.fixElementSize)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(xC.AFTER_DRAW,this.resetTransform),e.off(xC.AFTER_TRANSFORM,this.fixElementSize)}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);CI.defaultOptions={enable:function(e){return e.data.scale<1},nodeFilter:function(){return!0},edgeFilter:function(){return!0},comboFilter:function(){return!0},edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var PI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},RI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).focus=function(e){return PI(r,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validate(e)){t.next=2;break}return t.abrupt("return");case 2:return n=this.context.graph,t.next=5,n.focusElement(e.target.id,this.options.animation);case 5:case"end":return t.stop()}}),t,this)})))},r.bindEvents(),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){var e=this,t=this.context.graph;this.unbindEvents(),oN.forEach((function(n){t.on("".concat(n,":").concat(mC.CLICK),e.focus)}))}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"unbindEvents",value:function(){var e=this,t=this.context.graph;oN.forEach((function(n){t.off("".concat(n,":").concat(mC.CLICK),e.focus)}))}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);RI.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};var NI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).isFrozen=!1,r.toggleFrozen=function(e){r.isFrozen="dragstart"===e.type},r.hoverElement=function(e){if(r.validate(e)){var t=e.type===mC.POINTER_ENTER;r.updateElementsState(e,t);var n=r.options,i=n.onHover,a=n.onHoverEnd;t?null===i||void 0===i||i(e):null===a||void 0===a||a(e)}},r.updateElementsState=function(e,t){if(r.options.state||r.options.inactiveState){var n=r.context.graph,i=r.options,a=i.state,o=i.animation,s=i.inactiveState,u=r.getActiveIds(e),l={};if(a&&Object.assign(l,r.getElementsState(u,a,t)),s){var c=nR(n.getData(),!0).filter((function(e){return!u.includes(e)}));Object.assign(l,r.getElementsState(c,s,t))}n.setElementState(l,o)}},r.getElementsState=function(e,t,n){var i=r.context.graph,a={};return e.forEach((function(e){var r=i.getElementState(e);a[e]=n?r.includes(t)?r:[].concat(I(r),[t]):r.filter((function(e){return e!==t}))})),a},r.bindEvents(),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){var e=this,t=this.context.graph;this.unbindEvents(),oN.forEach((function(n){t.on("".concat(n,":").concat(mC.POINTER_ENTER),e.hoverElement),t.on("".concat(n,":").concat(mC.POINTER_LEAVE),e.hoverElement)}));var n=this.context.canvas.document;n.addEventListener("".concat(mC.DRAG_START),this.toggleFrozen),n.addEventListener("".concat(mC.DRAG_END),this.toggleFrozen)}},{key:"getActiveIds",value:function(e){var t=this.context.graph,n=this.options,r=n.degree,i=n.direction,a=e.target.id;return r?uN(t,e.targetType,a,"function"===typeof r?r(e):r,i):[a]}},{key:"validate",value:function(e){if(this.destroyed||this.isFrozen||eI(e.target)||this.context.graph.isCollapsingExpanding)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"unbindEvents",value:function(){var e=this,t=this.context.graph;oN.forEach((function(n){t.off("".concat(n,":").concat(mC.POINTER_ENTER),e.hoverElement),t.off("".concat(n,":").concat(mC.POINTER_LEAVE),e.hoverElement)}));var n=this.context.canvas.document;n.removeEventListener("".concat(mC.DRAG_START),this.toggleFrozen),n.removeEventListener("".concat(mC.DRAG_END),this.toggleFrozen)}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);NI.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};var OI=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"onPointerDown",value:function(e){if(Xn(S(t.prototype),"validate",this).call(this,e)&&Xn(S(t.prototype),"isKeydown",this).call(this)&&!this.points){var n=this.context.canvas;this.pathShape=new BT({id:"g6-lasso-select",style:this.options.style}),n.appendChild(this.pathShape),this.points=[iN(e)]}}},{key:"onPointerMove",value:function(e){var n;if(this.points){var r=this.options,i=r.immediately,a=r.mode;this.points.push(iN(e)),null===(n=this.pathShape)||void 0===n||n.setAttribute("d",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return e.forEach((function(e,t){n.push([0===t?"M":"L"].concat(I(e)))})),t&&n.push(["Z"]),n}(this.points)),i&&"default"===a&&this.points.length>2&&Xn(S(t.prototype),"updateElementsStates",this).call(this,this.points)}}},{key:"onPointerUp",value:function(){this.points&&(this.points.length<2||Xn(S(t.prototype),"updateElementsStates",this).call(this,this.points),this.clearLasso())}},{key:"clearLasso",value:function(){var e;null===(e=this.pathShape)||void 0===e||e.remove(),this.pathShape=void 0,this.points=void 0}}])}(rN),LI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).hiddenShapes=[],r.isVisible=!0,r.setElementsVisibility=function(e,t,n){e.filter(Boolean).forEach((function(e){"hidden"!==t||e.isVisible()?"visible"===t&&r.hiddenShapes.includes(e)?r.hiddenShapes.splice(r.hiddenShapes.indexOf(e),1):dR(e,t,n):r.hiddenShapes.push(e)}))},r.filterShapes=function(e,t){if(PE(t))return function(n){return!t(e,n)};var n=null===t||void 0===t?void 0:t[e];return function(e){return!e.className||!(null===n||void 0===n?void 0:n.includes(e.className))}},r.hideShapes=function(e){if(r.validate(e)&&r.isVisible){var t=r.context.element,n=r.options.shapes,i=void 0===n?{}:n;r.setElementsVisibility(t.getNodes(),"hidden",r.filterShapes("node",i)),r.setElementsVisibility(t.getEdges(),"hidden",r.filterShapes("edge",i)),r.setElementsVisibility(t.getCombos(),"hidden",r.filterShapes("combo",i)),r.isVisible=!1}},r.showShapes=sI((function(e){if(r.validate(e)&&!r.isVisible){var t=r.context.element;r.setElementsVisibility(t.getNodes(),"visible"),r.setElementsVisibility(t.getEdges(),"visible"),r.setElementsVisibility(t.getCombos(),"visible"),r.isVisible=!0}}),r.options.debounce),r.bindEvents(),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){var e=this.context.graph;e.on(xC.BEFORE_TRANSFORM,this.hideShapes),e.on(xC.AFTER_TRANSFORM,this.showShapes)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(xC.BEFORE_TRANSFORM,this.hideShapes),e.off(xC.AFTER_TRANSFORM,this.showShapes)}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);LI.defaultOptions={enable:!0,debounce:200,shapes:function(e){return"node"===e}};var DI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},II=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).onWheel=function(e){return DI(r,void 0,void 0,u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.options.preventDefault&&e.preventDefault(),n=e.deltaX,r=e.deltaY,t.next=5,this.scroll([-n,-r],e);case 5:case"end":return t.stop()}}),t,this)})))},r.shortcut=new nN(e.graph),r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e,t,n=this,r=this.options.trigger;if(this.shortcut.unbindAll(),RE(r)){null===(e=this.graphDom)||void 0===e||e.removeEventListener(mC.WHEEL,this.onWheel);var i=r.up,a=void 0===i?[]:i,o=r.down,s=void 0===o?[]:o,u=r.left,l=void 0===u?[]:u,c=r.right,h=void 0===c?[]:c;this.shortcut.bind(a,(function(e){return n.scroll([0,-10],e)})),this.shortcut.bind(s,(function(e){return n.scroll([0,10],e)})),this.shortcut.bind(l,(function(e){return n.scroll([-10,0],e)})),this.shortcut.bind(h,(function(e){return n.scroll([10,0],e)}))}else null===(t=this.graphDom)||void 0===t||t.addEventListener(mC.WHEEL,this.onWheel,{passive:!1})}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"formatDisplacement",value:function(e){return e=SR(e,this.options.sensitivity),e=this.clampByDirection(e),e=this.clampByRange(e)}},{key:"clampByDirection",value:function(e){var t=x(e,2),n=t[0],r=t[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(e){var t=x(e,2),n=t[0],r=t[1],i=this.context,a=i.viewport,o=x(i.canvas.getSize(),2),s=o[0],u=o[1],l=x(uP(this.options.range),4),c=[u*l[0],s*l[1],u*l[2],s*l[3]],h=vP(pP(a.getCanvasCenter()),c),d=kR(a.getViewportCenter(),[n,r,0]);if(!mP(d,h)){var f=x(h.min,2),p=f[0],v=f[1],g=x(h.max,2),m=g[0],y=g[1];(d[0]<p&&n>0||d[0]>m&&n<0)&&(n=0),(d[1]<v&&r>0||d[1]>y&&r<0)&&(r=0)}return[n,r]}},{key:"scroll",value:function(e,t){return DI(this,void 0,void 0,u().mark((function n(){var r,i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validate(t)){n.next=2;break}return n.abrupt("return");case 2:return r=this.options.onFinish,i=this.context.graph,a=this.formatDisplacement(e),n.next=7,i.translateBy(a,!1);case 7:null===r||void 0===r||r();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"destroy",value:function(){var e;this.shortcut.destroy(),null===(e=this.graphDom)||void 0===e||e.removeEventListener(mC.WHEEL,this.onWheel),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);II.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var FI=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},UI=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).zoom=function(e,t,n){return FI(r,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.validate(t)){r.next=2;break}return r.abrupt("return");case 2:return i=this.context.graph,"viewport"in t&&(a=HR(t.viewport)),o=this.options,s=o.sensitivity,l=o.onFinish,c=1+Tx(e,-50,50)*s/100,h=i.getZoom(),r.next=9,i.zoomTo(h*c,n,a);case 9:null===l||void 0===l||l();case 10:case"end":return r.stop()}}),r,this)})))},r.onReset=function(){return FI(r,void 0,void 0,u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.graph.zoomTo(1,this.options.animation);case 2:case"end":return e.stop()}}),e,this)})))},r.preventDefault=function(e){r.options.preventDefault&&e.preventDefault()},r.shortcut=new nN(e.graph),r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e,t=this,n=this.options.trigger;if(this.shortcut.unbindAll(),Array.isArray(n)&&(null===(e=this.context.canvas.getContainer())||void 0===e||e.addEventListener(mC.WHEEL,this.preventDefault),this.shortcut.bind([].concat(I(n),[mC.WHEEL]),(function(e){var n=e.deltaX,r=e.deltaY;t.zoom(-(null!==r&&void 0!==r?r:n),e,!1)}))),"object"===typeof n){var r=n.zoomIn,i=void 0===r?[]:r,a=n.zoomOut,o=void 0===a?[]:a,s=n.reset,u=void 0===s?[]:s;this.shortcut.bind(i,(function(e){return t.zoom(10,e,t.options.animation)})),this.shortcut.bind(o,(function(e){return t.zoom(-10,e,t.options.animation)})),this.shortcut.bind(u,this.onReset)}}},{key:"validate",value:function(e){if(this.destroyed)return!1;var t=this.options.enable;return PE(t)?t(e):!!t}},{key:"destroy",value:function(){var e;this.shortcut.destroy(),null===(e=this.context.canvas.getContainer())||void 0===e||e.removeEventListener(mC.WHEEL,this.preventDefault),Xn(S(t.prototype),"destroy",this).call(this)}}])}(vR);UI.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var BI=n(8108),zI=function(e,t){if("next"!==e&&"prev"!==e)return t},GI=function(e){e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev},HI=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(function(){return p((function e(){v(this,e);var t={};t.prev=t,t.next=t.prev,this.shortcut=t}),[{key:"dequeue",value:function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return GI(t),t}},{key:"enqueue",value:function(e){var t=this.shortcut;e.prev&&e.next&&GI(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}},{key:"toString",value:function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,zI)),n=null===n||void 0===n?void 0:n.prev;return"[".concat(e.join(", "),"]")}}])}()),jI=function(){return 1},VI=function(e,t,n){for(var r,i=[],a=t[t.length-1],o=t[0];e.getAllNodes().length;){for(;r=o.dequeue();)WI(e,t,n,r);for(;r=a.dequeue();)WI(e,t,n,r);if(e.getAllNodes().length)for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){i=i.concat(WI(e,t,n,r,!0));break}}return i},WI=function(e,t,n,r,i){var a,o,s=[];return e.hasNode(r.v)&&(null===(a=e.getRelatedEdges(r.v,"in"))||void 0===a||a.forEach((function(r){var a=r.data.weight,o=e.getNode(r.source);i&&s.push({v:r.source,w:r.target,in:0,out:0}),void 0===o.data.out&&(o.data.out=0),o.data.out-=a,YI(t,n,Object.assign({v:o.id},o.data))})),null===(o=e.getRelatedEdges(r.v,"out"))||void 0===o||o.forEach((function(r){var i=r.data.weight,a=r.target,o=e.getNode(a);void 0===o.data.in&&(o.data.in=0),o.data.in-=i,YI(t,n,Object.assign({v:o.id},o.data))})),e.removeNode(r.v)),i?s:void 0},XI=function(e,t){var n=new yI,r=0,i=0;e.getAllNodes().forEach((function(e){n.addNode({id:e.id,data:{v:e.id,in:0,out:0}})})),e.getAllEdges().forEach((function(e){var a=n.getRelatedEdges(e.source,"out").find((function(t){return t.target===e.target})),o=(null===t||void 0===t?void 0:t(e))||1;a?n.updateEdgeData(null===a||void 0===a?void 0:a.id,Object.assign(Object.assign({},a.data),{weight:a.data.weight+o})):n.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:o}}),i=Math.max(i,n.getNode(e.source).data.out+=o),r=Math.max(r,n.getNode(e.target).data.in+=o)}));for(var a=[],o=i+r+3,s=0;s<o;s++)a.push(new HI);var u=r+1;return n.getAllNodes().forEach((function(e){YI(a,u,Object.assign({v:e.id},n.getNode(e.id).data))})),{buckets:a,zeroIdx:u,graph:n}},YI=function(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},qI=function(e,t){var n="greedy"===t?function(e,t){var n;if(e.getAllNodes().length<=1)return[];var r=XI(e,t||jI);return null===(n=VI(r.graph,r.buckets,r.zeroIdx).map((function(t){return e.getRelatedEdges(t.v,"out").filter((function(e){return e.target===t.w}))})))||void 0===n?void 0:n.flat()}(e,(function(e){return e.data.weight||1})):KI(e);null===n||void 0===n||n.forEach((function(t){var n=t.data;e.removeEdge(t.id),n.forwardName=t.data.name,n.reversed=!0,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign({},n)})}))},KI=function(e){var t=[],n={},r={},i=function(a){r[a]||(r[a]=!0,n[a]=!0,e.getRelatedEdges(a,"out").forEach((function(e){n[e.target]?t.push(e):i(e.target)})),delete n[a])};return e.getAllNodes().forEach((function(e){return i(e.id)})),t},ZI=function(e,t,n,r){var i;do{i="".concat(r).concat(Math.random())}while(e.hasNode(i));return n.dummy=t,e.addNode({id:i,data:n}),i},JI=function(e){var t=new yI;return e.getAllNodes().forEach((function(n){e.getChildren(n.id).length||t.addNode(Object.assign({},n))})),e.getAllEdges().forEach((function(e){t.addEdge(e)})),t},QI=function(e,t){return null===e||void 0===e?void 0:e.reduce((function(e,n,r){return e[n]=t[r],e}),{})},$I=function(e,t){var n,r,i=Number(e.x),a=Number(e.y),o=Number(t.x)-i,s=Number(t.y)-a,u=Number(e.width)/2,l=Number(e.height)/2;return o||s?(Math.abs(s)*u>Math.abs(o)*l?(s<0&&(l=-l),n=l*o/s,r=l):(o<0&&(u=-u),n=u,r=u*s/o),{x:i+n,y:a+r}):{x:0,y:0}},eF=function(e){for(var t=[],n=nF(e)+1,r=0;r<n;r++)t.push([]);e.getAllNodes().forEach((function(e){var n=e.data.rank;void 0!==n&&t[n]&&t[n].push(e.id)}));for(var i=0;i<n;i++)t[i]=t[i].sort((function(t,n){return r=e.getNode(t).data.order,i=e.getNode(n).data.order,Number(r)-Number(i);var r,i}));return t},tF=function(e,t,n,r){var i={width:0,height:0};return kx(n)&&kx(r)&&(i.rank=n,i.order=r),ZI(e,"border",i,t)},nF=function(e){var t;return e.getAllNodes().forEach((function(e){var n=e.data.rank;void 0!==n&&(void 0===t||n>t)&&(t=n)})),t||(t=0),t},rF=function(e,t){return e.reduce((function(e,n){return t(e)>t(n)?n:e}))},iF=function(e,t,n,r,i,a){r.includes(t.id)||(r.push(t.id),n||a.push(t.id),i(t.id).forEach((function(t){return iF(e,t,n,r,i,a)})),n&&a.push(t.id))},aF=function(e,t,n,r){var i=Array.isArray(t)?t:[t],a=function(t){return r?e.getSuccessors(t):e.getNeighbors(t)},o=[],s=[];return i.forEach((function(t){if(!e.hasNode(t.id))throw new Error("Graph does not have node: ".concat(t));iF(e,t,"post"===n,s,a,o)})),o},oF=function(e,t,n,r,i,a){var o={rank:a,borderType:t,width:0,height:0},s=i.data[t][a-1],u=ZI(e,"border",o,n);i.data[t][a]=u,e.setParent(u,r),s&&e.addEdge({id:"e".concat(Math.random()),source:s,target:u,data:{weight:1}})},sF=function(e){e.getAllNodes().forEach((function(e){uF(e)})),e.getAllEdges().forEach((function(e){uF(e)}))},uF=function(e){var t=e.data.width;e.data.width=e.data.height,e.data.height=t},lF=function(e){e.getAllNodes().forEach((function(e){cF(e.data)})),e.getAllEdges().forEach((function(e){var t;null===(t=e.data.points)||void 0===t||t.forEach((function(e){return cF(e)})),e.data.hasOwnProperty("y")&&cF(e.data)}))},cF=function(e){(null===e||void 0===e?void 0:e.y)&&(e.y=-e.y)},hF=function(e){e.getAllNodes().forEach((function(e){dF(e.data)})),e.getAllEdges().forEach((function(e){var t;null===(t=e.data.points)||void 0===t||t.forEach((function(e){return dF(e)})),e.data.hasOwnProperty("x")&&dF(e.data)}))},dF=function(e){var t=e.x;e.x=e.y,e.y=t},fF=function(e,t,n,r,i,a,o){var s=e.getChildren(o);if(null===s||void 0===s?void 0:s.length){var u=tF(e,"_bt"),l=tF(e,"_bb"),c=e.getNode(o);e.setParent(u,o),c.data.borderTop=u,e.setParent(l,o),c.data.borderBottom=l,null===s||void 0===s||s.forEach((function(s){fF(e,t,n,r,i,a,s.id);var c=s.data.borderTop?s.data.borderTop:s.id,h=s.data.borderBottom?s.data.borderBottom:s.id,d=s.data.borderTop?r:2*r,f=c!==h?1:i-a[o]+1;e.addEdge({id:"e".concat(Math.random()),source:u,target:c,data:{minlen:f,weight:d,nestingEdge:!0}}),e.addEdge({id:"e".concat(Math.random()),source:h,target:l,data:{minlen:f,weight:d,nestingEdge:!0}})})),e.getParent(o)||e.addEdge({id:"e".concat(Math.random()),source:t,target:u,data:{weight:0,minlen:i+a[o]}})}else o!==t&&e.addEdge({id:"e".concat(Math.random()),source:t,target:o,data:{weight:0,minlen:n}})},pF=function(e){var t={},n=function(r,i){var a=e.getChildren(r);null===a||void 0===a||a.forEach((function(e){return n(e.id,i+1)})),t[r]=i};return e.getRoots().forEach((function(e){return n(e.id,1)})),t},vF=function(e){var t=0;return e.getAllEdges().forEach((function(e){t+=e.data.weight})),t},gF="edge-label",mF=function(e,t,n){var r=t.source,i=e.getNode(r).data.rank,a=t.target,o=e.getNode(a).data.rank,s=t.data.labelRank;if(o!==i+1){var u,l,c;for(e.removeEdge(t.id),c=0,++i;i<o;++c,++i)t.data.points=[],u=ZI(e,"edge",l={originalEdge:t,width:0,height:0,rank:i},"_d"),i===s&&(l.width=t.data.width,l.height=t.data.height,l.dummy=gF,l.labelpos=t.data.labelpos),e.addEdge({id:"e".concat(Math.random()),source:r,target:u,data:{weight:t.data.weight}}),0===c&&n.push(u),r=u;e.addEdge({id:"e".concat(Math.random()),source:r,target:a,data:{weight:t.data.weight}})}},yF=function(e){for(var t;e.hasNode(t="_root".concat(Math.random())););return t},bF=function(e,t,n){for(var r=QI(n,n.map((function(e,t){return t}))),i=t.map((function(t){var n=e.getRelatedEdges(t,"out").map((function(e){return{pos:r[e.target]||0,weight:e.data.weight}}));return null===n||void 0===n?void 0:n.sort((function(e,t){return e.pos-t.pos}))})),a=i.flat().filter((function(e){return void 0!==e})),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var u=Array(s).fill(0,0,s),l=0;return null===a||void 0===a||a.forEach((function(e){if(e){var t=e.pos+o;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*n}})),l},xF=function(e,t){for(var n=0,r=1;r<(null===t||void 0===t?void 0:t.length);r+=1)n+=bF(e,t[r-1],t[r]);return n},EF=function(e){for(var t={},n=e.getAllNodes(),r=n.map((function(e){var t;return null!==(t=e.data.rank)&&void 0!==t?t:-1/0})),i=Math.max.apply(Math,I(r)),a=[],o=0;o<i+1;o++)a.push([]);var s=n.sort((function(t,n){return e.getNode(t.id).data.rank-e.getNode(n.id).data.rank})),u=s.filter((function(t){return void 0!==e.getNode(t.id).data.fixorder})).sort((function(t,n){return e.getNode(t.id).data.fixorder-e.getNode(n.id).data.fixorder}));return null===u||void 0===u||u.forEach((function(n){isNaN(e.getNode(n.id).data.rank)||a[e.getNode(n.id).data.rank].push(n.id),t[n.id]=!0})),null===s||void 0===s||s.forEach((function(n){return e.dfsTree(n.id,(function(e){if(t.hasOwnProperty(e.id))return!0;t[e.id]=!0,isNaN(e.data.rank)||a[e.data.rank].push(e.id)}))})),a},wF=function(e){for(var t,n,r=[],i=function(){var i=e.pop();r.push(i),null===(t=i.in.reverse())||void 0===t||t.forEach((function(e){return(t=i,function(e){e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&kF(t,e)})(e);var t})),null===(n=i.out)||void 0===n||n.forEach((function(t){return(n=i,function(t){t.in.push(n),0===--t.indegree&&e.push(t)})(t);var n}))};null===e||void 0===e?void 0:e.length;)i();var a=r.filter((function(e){return!e.merged})),o=["vs","i","barycenter","weight"];return a.map((function(e){var t={};return null===o||void 0===o||o.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}))},kF=function(e,t){var n,r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.vs=null===(n=t.vs)||void 0===n?void 0:n.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0},SF=function(e,t){var n,r,i,a={};null===e||void 0===e||e.forEach((function(e,t){a[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};var n=a[e.v];void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),null===(n=t.getAllEdges())||void 0===n||n.forEach((function(e){var t=a[e.source],n=a[e.target];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(a[e.target]))}));var o=null===(i=(r=Object.values(a)).filter)||void 0===i?void 0:i.call(r,(function(e){return!e.indegree}));return wF(o)},_F=function(e,t,n){for(var r,i=n;t.length&&(r=t[t.length-1]).i<=i;)t.pop(),null===e||void 0===e||e.push(r.vs),i++;return i},MF=function(e,t){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i}},TF=function(e,t,n,r,i,a){var o,s,u,l,c=e.getChildren(t).map((function(e){return e.id})),h=e.getNode(t),d=h?h.data.borderLeft:void 0,f=h?h.data.borderRight:void 0,p={};d&&(c=null===c||void 0===c?void 0:c.filter((function(e){return e!==d&&e!==f})));var v=function(e,t){return t.map((function(t){var n=e.getRelatedEdges(t,"in");if(!(null===n||void 0===n?void 0:n.length))return{v:t};var r={sum:0,weight:0};return null===n||void 0===n||n.forEach((function(t){var n=e.getNode(t.source);r.sum+=t.data.weight*n.data.order,r.weight+=t.data.weight})),{v:t,barycenter:r.sum/r.weight,weight:r.weight}}))}(e,c||[]);null===v||void 0===v||v.forEach((function(t){var i;if(null===(i=e.getChildren(t.v))||void 0===i?void 0:i.length){var o=TF(e,t.v,n,r,a);p[t.v]=o,o.hasOwnProperty("barycenter")&&CF(t,o)}}));var g=SF(v,n);AF(g,p),null===(o=g.filter((function(e){return e.vs.length>0})))||void 0===o||o.forEach((function(t){var n=e.getNode(t.vs[0]);n&&(t.fixorder=n.data.fixorder,t.order=n.data.order)}));var m=function(e,t,n,r){var i=function(e,t){var n={lhs:[],rhs:[]};return null===e||void 0===e||e.forEach((function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n}(e,(function(e){var t=e.hasOwnProperty("fixorder")&&!isNaN(e.fixorder);return r?!t&&e.hasOwnProperty("barycenter"):t||e.hasOwnProperty("barycenter")})),a=i.lhs,o=i.rhs.sort((function(e,t){return-e.i- -t.i})),s=[],u=0,l=0,c=0;null===a||void 0===a||a.sort(MF(!!t,!!n)),c=_F(s,o,c),null===a||void 0===a||a.forEach((function(e){var t;c+=null===(t=e.vs)||void 0===t?void 0:t.length,s.push(e.vs),u+=e.barycenter*e.weight,l+=e.weight,c=_F(s,o,c)}));var h={vs:s.flat()};return l&&(h.barycenter=u/l,h.weight=l),h}(g,r,i,a);if(d&&(m.vs=[d,m.vs,f].flat(),null===(s=e.getPredecessors(d))||void 0===s?void 0:s.length)){var y=e.getNode((null===(u=e.getPredecessors(d))||void 0===u?void 0:u[0].id)||""),b=e.getNode((null===(l=e.getPredecessors(f))||void 0===l?void 0:l[0].id)||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.data.order+b.data.order)/(m.weight+2),m.weight+=2}return m},AF=function(e,t){null===e||void 0===e||e.forEach((function(e){var n,r=null===(n=e.vs)||void 0===n?void 0:n.map((function(e){return t[e]?t[e].vs:e}));e.vs=r.flat()}))},CF=function(e,t){void 0!==e.barycenter?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},PF=function(e,t,n){return t.map((function(t){return function(e,t,n){var r=yF(e),i=new yI({tree:[{id:r,children:[],data:{}}]});return e.getAllNodes().forEach((function(a){var o=e.getParent(a.id);(a.data.rank===t||a.data.minRank<=t&&t<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),(null===o||void 0===o?void 0:o.id)&&!i.hasNode(null===o||void 0===o?void 0:o.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,(null===o||void 0===o?void 0:o.id)||r),e.getRelatedEdges(a.id,n).forEach((function(t){var n=t.source===a.id?t.target:t.source;i.hasNode(n)||i.addNode(Object.assign({},e.getNode(n)));var r=i.getRelatedEdges(n,"out").find((function(e){return e.target===a.id})),o=void 0!==r?r.data.weight:0;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:t.data.weight+o})):i.addEdge({id:t.id,source:n,target:a.id,data:{weight:t.data.weight+o}})})),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[t],borderRight:a.data.borderRight[t]})))})),i}(e,t,n)}))},RF=function(e,t,n,r){var i=new yI;null===e||void 0===e||e.forEach((function(e){for(var a,o=e.getRoots()[0].id,s=TF(e,o,i,t,n,r),u=0;u<(null===(a=s.vs)||void 0===a?void 0:a.length);u++){var l=e.getNode(s.vs[u]);l&&(l.data.order=u)}!function(e,t,n){var r,i={};null===n||void 0===n||n.forEach((function(n){for(var a,o,s=e.getParent(n);s;){if((a=e.getParent(s.id))?(o=i[a.id],i[a.id]=s.id):(o=r,r=s.id),o&&o!==s.id)return t.hasNode(o)||t.addNode({id:o,data:{}}),t.hasNode(s.id)||t.addNode({id:s.id,data:{}}),void(t.hasEdge("e".concat(o,"-").concat(s.id))||t.addEdge({id:"e".concat(o,"-").concat(s.id),source:o,target:s.id,data:{}}));s=a}}))}(e,i,s.vs)}))},NF=function(e,t){null===t||void 0===t||t.forEach((function(t){null===t||void 0===t||t.forEach((function(t,n){e.getNode(t).data.order=n}))}))},OF=function(e,t){var n=function(e){var t={},n=0,r=function(i){var a=n;e.getChildren(i).forEach((function(e){return r(e.id)})),t[i]={low:a,lim:n++}};return e.getRoots().forEach((function(e){return r(e.id)})),t}(e);t.forEach((function(t){var r,i,a=t,o=e.getNode(a),s=o.data.originalEdge;if(s)for(var u=function(e,t,n,r){var i,a,o,s,u=[],l=[],c=Math.min(t[n].low,t[r].low),h=Math.max(t[n].lim,t[r].lim);o=n;do{o=null===(i=e.getParent(o))||void 0===i?void 0:i.id,u.push(o)}while(o&&(t[o].low>c||h>t[o].lim));for(s=o,o=r;o&&o!==s;)l.push(o),o=null===(a=e.getParent(o))||void 0===a?void 0:a.id;return{lca:s,path:u.concat(l.reverse())}}(e,n,s.source,s.target),l=u.path,c=u.lca,h=0,d=l[h],f=!0;a!==s.target;){if(o=e.getNode(a),f){for(;d!==c&&(null===(r=e.getNode(d))||void 0===r?void 0:r.data.maxRank)<o.data.rank;)d=l[++h];d===c&&(f=!1)}if(!f){for(;h<l.length-1&&(null===(i=e.getNode(l[h+1]))||void 0===i?void 0:i.data.minRank)<=o.data.rank;)h++;d=l[h]}e.hasNode(d)&&e.setParent(a,d),a=e.getSuccessors(a)[0].id}}))},LF=function(e,t){var n={};return(null===t||void 0===t?void 0:t.length)&&t.reduce((function(t,r){var i=0,a=0,o=t.length,s=null===r||void 0===r?void 0:r[(null===r||void 0===r?void 0:r.length)-1];return null===r||void 0===r||r.forEach((function(t,u){var l,c=IF(e,t),h=c?e.getNode(c.id).data.order:o;(c||t===s)&&(null===(l=r.slice(a,u+1))||void 0===l||l.forEach((function(t){var r;null===(r=e.getPredecessors(t))||void 0===r||r.forEach((function(r){var a,o=e.getNode(r.id),s=o.data.order;!(s<i||h<s)||o.data.dummy&&(null===(a=e.getNode(t))||void 0===a?void 0:a.data.dummy)||FF(n,r.id,t)}))})),a=u+1,i=h)})),r})),n},DF=function(e,t){var n={};function r(t,r,i,a,o){for(var s,u,l,c=r;c<i;c++)l=t[c],(null===(s=e.getNode(l))||void 0===s?void 0:s.data.dummy)&&(null===(u=e.getPredecessors(l))||void 0===u||u.forEach((function(t){var r=e.getNode(t.id);r.data.dummy&&(r.data.order<a||r.data.order>o)&&FF(n,t.id,l)})))}function i(e,t){var n=function(e){return JSON.stringify(e.slice(1))}(e);t.get(n)||(r.apply(void 0,I(e)),t.set(n,!0))}return(null===t||void 0===t?void 0:t.length)&&t.reduce((function(t,n){var r,a=-1,o=0,s=new Map;return null===n||void 0===n||n.forEach((function(u,l){var c;if("border"===(null===(c=e.getNode(u))||void 0===c?void 0:c.data.dummy)){var h=e.getPredecessors(u)||[];h.length&&(r=e.getNode(h[0].id).data.order,i([n,o,l,a,r],s),o=l,a=r)}i([n,o,n.length,r,t.length],s)})),n})),n},IF=function(e,t){var n,r;if(null===(n=e.getNode(t))||void 0===n?void 0:n.data.dummy)return null===(r=e.getPredecessors(t))||void 0===r?void 0:r.find((function(t){return e.getNode(t.id).data.dummy}))},FF=function(e,t,n){var r=t,i=n;if(r>i){var a=r;r=i,i=a}var o=e[r];o||(e[r]=o={}),o[i]=!0},UF=function(e,t,n){var r=t;r>n&&(r=n);return!!e[r]},BF=function(e,t,n,r){var i={},a={},o={};return null===t||void 0===t||t.forEach((function(e){null===e||void 0===e||e.forEach((function(e,t){i[e]=e,a[e]=e,o[e]=t}))})),null===t||void 0===t||t.forEach((function(e){var t=-1;null===e||void 0===e||e.forEach((function(e){var s=r(e).map((function(e){return e.id}));if(s.length){s=s.sort((function(e,t){return o[e]-o[t]}));for(var u=(s.length-1)/2,l=Math.floor(u),c=Math.ceil(u);l<=c;++l){var h=s[l];a[e]===e&&t<o[h]&&!UF(n,e,h)&&(a[h]=e,a[e]=i[e]=i[h],t=o[h])}}}))})),{root:i,align:a}},zF=function(e,t,n,r,i,a,o){var s,u={},l=GF(e,t,n,i,a,o),c=o?"borderLeft":"borderRight",h=function(e,t){for(var n=l.getAllNodes(),r=n.pop(),i={};r;)i[r.id]?e(r.id):(i[r.id]=!0,n.push(r),n=n.concat(t(r.id))),r=n.pop()};return h((function(e){u[e]=(l.getRelatedEdges(e,"in")||[]).reduce((function(e,t){return Math.max(e,(u[t.source]||0)+t.data.weight)}),0)}),l.getPredecessors.bind(l)),h((function(t){var n=(l.getRelatedEdges(t,"out")||[]).reduce((function(e,t){return Math.min(e,(u[t.target]||0)-t.data.weight)}),Number.POSITIVE_INFINITY),r=e.getNode(t);n!==Number.POSITIVE_INFINITY&&r.data.borderType!==c&&(u[t]=Math.max(u[t],n))}),l.getSuccessors.bind(l)),null===(s=Object.values(r))||void 0===s||s.forEach((function(e){u[e]=u[n[e]]})),u},GF=function(e,t,n,r,i,a){var o=new yI,s=WF(r,i,a);return null===t||void 0===t||t.forEach((function(t){var r;null===t||void 0===t||t.forEach((function(t){var i=n[t];if(o.hasNode(i)||o.addNode({id:i,data:{}}),r){var a=n[r],u=o.getRelatedEdges(a,"out").find((function(e){return e.target===i}));u?o.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:Math.max(s(e,t,r),u.data.weight||0)})):o.addEdge({id:"e".concat(Math.random()),source:a,target:i,data:{weight:Math.max(s(e,t,r),0)}})}r=t}))})),o},HF=function(e,t){return rF(Object.values(t),(function(t){var n,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(t))||void 0===n||n.forEach((function(n){var a=t[n],o=XF(e,n)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)})),r-i}))};function jF(e,t){var n=Object.values(t),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach((function(n){["l","r"].forEach((function(a){var o,s=n+a,u=e[s];if(u!==t){var l=Object.values(u);(o="l"===a?r-Math.min.apply(Math,l):i-Math.max.apply(Math,l))&&(e[s]={},Object.keys(u).forEach((function(t){e[s][t]=u[t]+o})))}}))}))}var VF=function(e,t){var n={};return Object.keys(e.ul).forEach((function(r){if(t)n[r]=e[t.toLowerCase()][r];else{var i=Object.values(e).map((function(e){return e[r]}));n[r]=(i[0]+i[1])/2}})),n},WF=function(e,t,n){return function(r,i,a){var o=r.getNode(i),s=r.getNode(a),u=0,l=0;if(u+=o.data.width/2,o.data.hasOwnProperty("labelpos"))switch((o.data.labelpos||"").toLowerCase()){case"l":l=-o.data.width/2;break;case"r":l=o.data.width/2}if(l&&(u+=n?l:-l),l=0,u+=(o.data.dummy?t:e)/2,u+=(s.data.dummy?t:e)/2,u+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||"").toLowerCase()){case"l":l=s.data.width/2;break;case"r":l=-s.data.width/2}return l&&(u+=n?l:-l),l=0,u}},XF=function(e,t){return e.getNode(t).data.width||0},YF=function(e,t){var n,r=JI(e);!function(e,t){var n=(t||{}).ranksep,r=void 0===n?0:n,i=eF(e),a=0;null===i||void 0===i||i.forEach((function(t){var n=t.map((function(t){return e.getNode(t).data.height})),i=Math.max.apply(Math,I(n).concat([0]));null===t||void 0===t||t.forEach((function(t){e.getNode(t).data.y=a+i/2})),a+=i+r}))}(r,t);var i=function(e,t){var n=t||{},r=n.align,i=n.nodesep,a=void 0===i?0:i,o=n.edgesep,s=void 0===o?0:o,u=eF(e),l=Object.assign(LF(e,u),DF(e,u)),c={},h=[];["u","d"].forEach((function(t){h="u"===t?u:Object.values(u).reverse(),["l","r"].forEach((function(n){"r"===n&&(h=h.map((function(e){return Object.values(e).reverse()})));var r=("u"===t?e.getPredecessors:e.getSuccessors).bind(e),i=BF(0,h,l,r),o=zF(e,h,i.root,i.align,a,s,"r"===n);"r"===n&&Object.keys(o).forEach((function(e){return o[e]=-o[e]})),c[t+n]=o}))}));var d=HF(e,c);return d&&jF(c,d),VF(c,r)}(r,t);null===(n=Object.keys(i))||void 0===n||n.forEach((function(e){r.getNode(e).data.x=i[e]}))},qF=function(e){var t={},n=function(r){var i,a,o=e.getNode(r);return o?t[r]?o.data.rank:(t[r]=!0,null===(i=e.getRelatedEdges(r,"out"))||void 0===i||i.forEach((function(e){var t=n(e.target)-e.data.minlen;t&&(void 0===a||t<a)&&(a=t)})),a||(a=0),o.data.rank=a,a):0};e.getAllNodes().filter((function(t){return 0===e.getRelatedEdges(t.id,"in").length})).forEach((function(e){return n(e.id)}))},KF=function(e,t){return e.getNode(t.target).data.rank-e.getNode(t.source).data.rank-t.data.minlen},ZF=function(e,t){var n=function(r){t.getRelatedEdges(r,"both").forEach((function(i){var a=i.source,o=r===a?i.target:a;e.hasNode(o)||KF(t,i)||(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))}))};return e.getAllNodes().forEach((function(e){return n(e.id)})),e.getAllNodes().length},JF=function(e,t){var n=function(r){var i;null===(i=t.getRelatedEdges(r,"both"))||void 0===i||i.forEach((function(i){var a=i.source,o=r===a?i.target:a;e.hasNode(o)||void 0===t.getNode(o).data.layer&&KF(t,i)||(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))}))};return e.getAllNodes().forEach((function(e){return n(e.id)})),e.getAllNodes().length},QF=function(e,t){return rF(t.getAllEdges(),(function(n){return e.hasNode(n.source)!==e.hasNode(n.target)?KF(t,n):1/0}))},$F=function(e,t,n){e.getAllNodes().forEach((function(e){var r=t.getNode(e.id);r.data.rank||(r.data.rank=0),r.data.rank+=n}))},eU=function(e){var t=function(e){var t=new yI;return e.getAllNodes().forEach((function(e){t.addNode(Object.assign({},e))})),e.getAllEdges().forEach((function(e){var n=t.getRelatedEdges(e.source,"out").find((function(t){return t.target===e.target}));n?t.updateEdgeData(null===n||void 0===n?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+e.data.weight||0,minlen:Math.max(n.data.minlen,e.data.minlen||1)})):t.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||0,minlen:e.data.minlen||1}})})),t}(e);qF(t);var n,r,i=function(e){var t,n,r=new yI({tree:[]}),i=e.getAllNodes()[0],a=e.getAllNodes().length;for(r.addNode(i);ZF(r,e)<a;)t=QF(r,e),n=r.hasNode(t.source)?KF(e,t):-KF(e,t),$F(r,e,n);return r}(t);for(iU(i),tU(i,t);n=oU(i);)r=sU(i,t,n),uU(i,t,n,r)},tU=function(e,t){var n=aF(e,e.getAllNodes(),"post",!1);(n=n.slice(0,(null===n||void 0===n?void 0:n.length)-1)).forEach((function(n){nU(e,t,n)}))},nU=function(e,t,n){var r=e.getNode(n).data.parent;e.getRelatedEdges(n,"both").find((function(e){return e.target===r||e.source===r})).data.cutvalue=rU(e,t,n)},rU=function(e,t,n){var r=e.getNode(n).data.parent,i=!0,a=t.getRelatedEdges(n,"out").find((function(e){return e.target===r})),o=0;return a||(i=!1,a=t.getRelatedEdges(r,"out").find((function(e){return e.target===n}))),o=a.data.weight,t.getRelatedEdges(n,"both").forEach((function(t){var a=t.source===n,s=a?t.target:t.source;if(s!==r){var u=a===i,l=t.data.weight;if(o+=u?l:-l,cU(e,n,s)){var c=e.getRelatedEdges(n,"both").find((function(e){return e.source===s||e.target===s})).data.cutvalue;o+=u?-c:c}}})),o},iU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getAllNodes()[0].id;aU(e,{},1,t)},aU=function(e,t,n,r,i){var a,o=n,s=n,u=e.getNode(r);return t[r]=!0,null===(a=e.getNeighbors(r))||void 0===a||a.forEach((function(n){t[n.id]||(s=aU(e,t,s,n.id,r))})),u.data.low=o,u.data.lim=s++,i?u.data.parent=i:delete u.data.parent,s},oU=function(e){return e.getAllEdges().find((function(e){return e.data.cutvalue<0}))},sU=function(e,t,n){var r=n.source,i=n.target;t.getRelatedEdges(r,"out").find((function(e){return e.target===i}))||(r=n.target,i=n.source);var a=e.getNode(r),o=e.getNode(i),s=a,u=!1;a.data.lim>o.data.lim&&(s=o,u=!0);var l=t.getAllEdges().filter((function(t){return u===hU(e.getNode(t.source),s)&&u!==hU(e.getNode(t.target),s)}));return rF(l,(function(e){return KF(t,e)}))},uU=function(e,t,n,r){var i=e.getRelatedEdges(n.source,"both").find((function(e){return e.source===n.target||e.target===n.target}));i&&e.removeEdge(i.id),e.addEdge({id:"e".concat(Math.random()),source:r.source,target:r.target,data:{}}),iU(e),tU(e,t),lU(e,t)},lU=function(e,t){var n=e.getAllNodes().find((function(e){return!e.data.parent})),r=aF(e,n,"pre",!1);(r=r.slice(1)).forEach((function(n){var r=e.getNode(n).data.parent,i=t.getRelatedEdges(n,"out").find((function(e){return e.target===r})),a=!1;!i&&t.hasNode(r)&&(i=t.getRelatedEdges(r,"out").find((function(e){return e.target===n})),a=!0),t.getNode(n).data.rank=(t.hasNode(r)&&t.getNode(r).data.rank||0)+(a?null===i||void 0===i?void 0:i.data.minlen:-(null===i||void 0===i?void 0:i.data.minlen))}))},cU=function(e,t,n){return e.getRelatedEdges(t,"both").find((function(e){return e.source===n||e.target===n}))},hU=function(e,t){return t.data.low<=e.data.lim&&e.data.lim<=t.data.lim},dU=qF,fU=function(e){!function(e){var t,n={},r=function(i){var a,o,s=e.getNode(i);return s?n[i]?s.data.rank:(n[i]=!0,null===(a=e.getRelatedEdges(i,"out"))||void 0===a||a.forEach((function(e){var t=r(e.target)-e.data.minlen;t&&(void 0===o||t<o)&&(o=t)})),o||(o=0),(void 0===t||o<t)&&(t=o),s.data.rank=o,o):0};e.getAllNodes().filter((function(t){return 0===e.getRelatedEdges(t.id,"in").length})).forEach((function(e){e&&r(e.id)})),void 0===t&&(t=0);var i={},a=function(t,n){var r,o=e.getNode(t),s=isNaN(o.data.layer)?n:o.data.layer;(void 0===o.data.rank||o.data.rank<s)&&(o.data.rank=s),i[t]||(i[t]=!0,null===(r=e.getRelatedEdges(t,"out"))||void 0===r||r.forEach((function(e){a(e.target,s+e.data.minlen)})))};e.getAllNodes().forEach((function(e){var n=e.data;n&&(isNaN(n.layer)?n.rank-=t:a(e.id,n.layer))}))}(e),function(e){var t,n,r=new yI({tree:[]}),i=e.getAllNodes()[0],a=e.getAllNodes().length;for(r.addNode(i);JF(r,e)<a;)t=QF(r,e),n=r.hasNode(t.source)?KF(e,t):-KF(e,t),$F(r,e,n)}(e)},pU=function(e){eU(e)},vU=function(e,t){var n=t.edgeLabelSpace,r=t.keepNodeOrder,i=t.prevGraph,a=t.rankdir,o=t.ranksep;!r&&i&&mU(e,i);var s,u=SU(e);n&&(t.ranksep=_U(u,{rankdir:a,ranksep:o}));try{s=gU(u,t)}catch(GK){if("Not possible to find intersection inside of the rectangle"===GK.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",GK);throw GK}return yU(e,u),s},gU=function(e,t){var n=t.acyclicer,r=t.ranker,i=t.rankdir,a=void 0===i?"tb":i,o=t.nodeOrder,s=t.keepNodeOrder,u=t.align,l=t.nodesep,c=void 0===l?50:l,h=t.edgesep,d=void 0===h?20:h,f=t.ranksep,p=void 0===f?50:f;LU(e),qI(e,n);var v=function(e){var t=ZI(e,"root",{},"_root"),n=pF(e),r=Math.max.apply(Math,I(Object.values(n)));Math.abs(r)===1/0&&(r=1);var i=r-1,a=2*i+1;e.getAllEdges().forEach((function(e){e.data.minlen*=a}));var o=vF(e)+1;return e.getRoots().forEach((function(r){fF(e,t,a,o,i,n,r.id)})),{nestingRoot:t,nodeRankFactor:a}}(e),g=v.nestingRoot,m=v.nodeRankFactor;!function(e,t){switch(t){case"network-simplex":pU(e);break;case"tight-tree":default:fU(e);break;case"longest-path":dU(e)}}(JI(e),r),MU(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getAllNodes(),r=n.filter((function(e){return void 0!==e.data.rank})).map((function(e){return e.data.rank})),i=Math.min.apply(Math,I(r)),a=[];n.forEach((function(e){var t=(e.data.rank||0)-i;a[t]||(a[t]=[]),a[t].push(e.id)}));for(var o=0,s=0;s<a.length;s++){var u=a[s];void 0===u?s%t!==0&&(o-=1):o&&(null===u||void 0===u||u.forEach((function(t){var n=e.getNode(t);n&&(n.data.rank=n.data.rank||0,n.data.rank+=o)})))}}(e,m),function(e,t){t&&e.removeNode(t),e.getAllEdges().forEach((function(t){t.data.nestingEdge&&e.removeEdge(t.id)}))}(e,g),function(e){var t=e.getAllNodes().filter((function(e){return void 0!==e.data.rank})).map((function(e){return e.data.rank})),n=Math.min.apply(Math,I(t));e.getAllNodes().forEach((function(e){e.data.hasOwnProperty("rank")&&n!==1/0&&(e.data.rank-=n)}))}(e),TU(e),AU(e);var y=[];!function(e,t){e.getAllEdges().forEach((function(n){return mF(e,n,t)}))}(e,y),OF(e,y),function(e){var t=function(n){var r=e.getChildren(n),i=e.getNode(n);if((null===r||void 0===r?void 0:r.length)&&r.forEach((function(e){return t(e.id)})),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(var a=i.data.minRank,o=i.data.maxRank+1;a<o;a+=1)oF(e,"borderLeft","_bl",n,i,a),oF(e,"borderRight","_br",n,i,a)}};e.getRoots().forEach((function(e){return t(e.id)}))}(e),s&&function(e,t){for(var n=e.getAllNodes().filter((function(t){var n;return!(null===(n=e.getChildren(t.id))||void 0===n?void 0:n.length)})).map((function(e){return e.data.rank})),r=Math.max.apply(Math,I(n)),i=[],a=0;a<r+1;a++)i[a]=[];null===t||void 0===t||t.forEach((function(t){var n=e.getNode(t);n&&!n.data.dummy&&(isNaN(n.data.rank)||(n.data.fixorder=i[n.data.rank].length,i[n.data.rank].push(t)))}))}(e,o),function(e,t){for(var n=nF(e),r=[],i=[],a=1;a<n+1;a++)r.push(a);for(var o=n-1;o>-1;o--)i.push(o);var s=PF(e,r,"in"),u=PF(e,i,"out"),l=EF(e);NF(e,l);for(var c,h=Number.POSITIVE_INFINITY,d=0,f=0;f<4;++d,++f){RF(d%2?s:u,d%4>=2,!1,t),l=eF(e);var p=xF(e,l);p<h&&(f=0,c=aP(l),h=p)}l=EF(e),NF(e,l);for(var v=0,g=0;g<4;++v,++g){RF(v%2?s:u,v%4>=2,!0,t),l=eF(e);var m=xF(e,l);m<h&&(g=0,c=aP(l),h=m)}NF(e,c)}(e,s),DU(e),function(e,t){var n=t.toLowerCase();"lr"!==n&&"rl"!==n||sF(e)}(e,a),YF(e,{align:u,nodesep:c,edgesep:d,ranksep:p}),IU(e),OU(e),function(e,t){t.forEach((function(t){var n,r=e.getNode(t),i=r.data.originalEdge;i&&e.addEdge(i);for(var a=t;r.data.dummy;)n=e.getSuccessors(a)[0],e.removeNode(a),i.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===gF&&(i.data.x=r.data.x,i.data.y=r.data.y,i.data.width=r.data.width,i.data.height=r.data.height),a=n.id,r=e.getNode(a)}))}(e,y),RU(e),function(e,t){var n=t.toLowerCase();"bt"!==n&&"rl"!==n||lF(e),"lr"!==n&&"rl"!==n||(hF(e),sF(e))}(e,a);var b=CU(e),x=b.width,E=b.height;return PU(e),NU(e),function(e){e.getAllEdges().forEach((function(t){var n=t.data;if(n.reversed){e.removeEdge(t.id);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.addEdge({id:t.id,source:t.target,target:t.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}}))}(e),{width:x,height:E}},mU=function(e,t){e.getAllNodes().forEach((function(n){var r=e.getNode(n.id);if(t.hasNode(n.id)){var i=t.getNode(n.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder}))},yU=function(e,t){e.getAllNodes().forEach((function(n){var r,i=e.getNode(n.id);if(i){var a=t.getNode(n.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,(null===(r=t.getChildren(n.id))||void 0===r?void 0:r.length)&&(i.data.width=a.data.width,i.data.height=a.data.height)}})),e.getAllEdges().forEach((function(n){var r=e.getEdge(n.id),i=t.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)}))},bU=["width","height","layer","fixorder"],xU={width:0,height:0},EU=["minlen","weight","width","height","labeloffset"],wU={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},kU=["labelpos"],SU=function(e){var t=new yI({tree:[]});return e.getAllNodes().forEach((function(n){var r=UU(e.getNode(n.id).data),i=Object.assign(Object.assign({},xU),r),a=FU(i,bU);t.hasNode(n.id)||t.addNode({id:n.id,data:Object.assign({},a)});var o=e.hasTreeStructure("combo")?e.getParent(n.id,"combo"):e.getParent(n.id);_x(o)||(t.hasNode(o.id)||t.addNode(Object.assign({},o)),t.setParent(n.id,o.id))})),e.getAllEdges().forEach((function(n){var r=UU(e.getEdge(n.id).data),i={};null===kU||void 0===kU||kU.forEach((function(e){void 0!==r[e]&&(i[e]=r[e])})),t.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},wU,FU(r,EU),i)})})),t},_U=function(e,t){var n=t.ranksep,r=void 0===n?0:n,i=t.rankdir;return e.getAllNodes().forEach((function(e){isNaN(e.data.layer)||e.data.layer||(e.data.layer=0)})),e.getAllEdges().forEach((function(e){var t;e.data.minlen*=2,"c"!==(null===(t=e.data.labelpos)||void 0===t?void 0:t.toLowerCase())&&("TB"===i||"BT"===i?e.data.width+=e.data.labeloffset:e.data.height+=e.data.labeloffset)})),r/2},MU=function(e){e.getAllEdges().forEach((function(t){if(t.data.width&&t.data.height){var n=e.getNode(t.source),r={e:t,rank:(e.getNode(t.target).data.rank-n.data.rank)/2+n.data.rank};ZI(e,"edge-proxy",r,"_ep")}}))},TU=function(e){var t=0;return e.getAllNodes().forEach((function(n){var r,i;n.data.borderTop&&(n.data.minRank=null===(r=e.getNode(n.data.borderTop))||void 0===r?void 0:r.data.rank,n.data.maxRank=null===(i=e.getNode(n.data.borderBottom))||void 0===i?void 0:i.data.rank,t=Math.max(t,n.data.maxRank||-1/0))})),t},AU=function(e){e.getAllNodes().forEach((function(t){"edge-proxy"===t.data.dummy&&(e.getEdge(t.data.e.id).data.labelRank=t.data.rank,e.removeNode(t.id))}))},CU=function(e,t){var n,r,i=0,a=0,o=t||{},s=o.marginx,u=void 0===s?0:s,l=o.marginy,c=void 0===l?0:l,h=function(e){if(e.data){var t=e.data.x,o=e.data.y,s=e.data.width,u=e.data.height;isNaN(t)||isNaN(s)||(void 0===n&&(n=t-s/2),n=Math.min(n,t-s/2),i=Math.max(i,t+s/2)),isNaN(o)||isNaN(u)||(void 0===r&&(r=o-u/2),r=Math.min(r,o-u/2),a=Math.max(a,o+u/2))}};return e.getAllNodes().forEach((function(e){h(e)})),e.getAllEdges().forEach((function(e){(null===e||void 0===e?void 0:e.data.hasOwnProperty("x"))&&h(e)})),n-=u,r-=c,e.getAllNodes().forEach((function(e){e.data.x-=n,e.data.y-=r})),e.getAllEdges().forEach((function(e){var t;null===(t=e.data.points)||void 0===t||t.forEach((function(e){e.x-=n,e.y-=r})),e.data.hasOwnProperty("x")&&(e.data.x-=n),e.data.hasOwnProperty("y")&&(e.data.y-=r)})),{width:i-n+u,height:a-r+c}},PU=function(e){e.getAllEdges().forEach((function(t){var n,r,i=e.getNode(t.source),a=e.getNode(t.target);t.data.points?(n=t.data.points[0],r=t.data.points[t.data.points.length-1]):(t.data.points=[],n={x:a.data.x,y:a.data.y},r={x:i.data.x,y:i.data.y}),t.data.points.unshift($I(i.data,n)),t.data.points.push($I(a.data,r))}))},RU=function(e){e.getAllEdges().forEach((function(e){if(e.data.hasOwnProperty("x"))switch("l"!==e.data.labelpos&&"r"!==e.data.labelpos||(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset}}))},NU=function(e){e.getAllEdges().forEach((function(e){var t;e.data.reversed&&(null===(t=e.data.points)||void 0===t||t.reverse())}))},OU=function(e){e.getAllNodes().forEach((function(t){var n,r,i;if(null===(n=e.getChildren(t.id))||void 0===n?void 0:n.length){var a=e.getNode(t.id),o=e.getNode(a.data.borderTop),s=e.getNode(a.data.borderBottom),u=e.getNode(a.data.borderLeft[(null===(r=a.data.borderLeft)||void 0===r?void 0:r.length)-1]),l=e.getNode(a.data.borderRight[(null===(i=a.data.borderRight)||void 0===i?void 0:i.length)-1]);a.data.width=Math.abs((null===l||void 0===l?void 0:l.data.x)-(null===u||void 0===u?void 0:u.data.x))||10,a.data.height=Math.abs((null===s||void 0===s?void 0:s.data.y)-(null===o||void 0===o?void 0:o.data.y))||10,a.data.x=((null===u||void 0===u?void 0:u.data.x)||0)+a.data.width/2,a.data.y=((null===o||void 0===o?void 0:o.data.y)||0)+a.data.height/2}})),e.getAllNodes().forEach((function(t){"border"===t.data.dummy&&e.removeNode(t.id)}))},LU=function(e){e.getAllEdges().forEach((function(t){if(t.source===t.target){var n=e.getNode(t.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(t),e.removeEdge(t.id)}}))},DU=function(e){var t=eF(e);null===t||void 0===t||t.forEach((function(t){var n=0;null===t||void 0===t||t.forEach((function(t,r){var i,a=e.getNode(t);a.data.order=r+n,null===(i=a.data.selfEdges)||void 0===i||i.forEach((function(t){ZI(e,"selfedge",{width:t.data.width,height:t.data.height,rank:a.data.rank,order:r+ ++n,e:t},"_se")})),delete a.data.selfEdges}))}))},IU=function(e){e.getAllNodes().forEach((function(t){var n=e.getNode(t.id);if("selfedge"===n.data.dummy){var r=e.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;e.hasEdge(n.data.e.id)?e.updateEdgeData(n.data.e.id,n.data.e.data):e.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),e.removeNode(t.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}}))},FU=function(e,t){var n={};return null===t||void 0===t||t.forEach((function(t){void 0!==e[t]&&(n[t]=+e[t])})),n},UU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((function(n){t[n.toLowerCase()]=e[n]})),t};function BU(e){if(!e)return[0,0,0];if(kx(e))return[e,e,e];if(0===e.length)return[0,0,0];var t=x(e,3),n=t[0],r=t[1],i=void 0===r?n:r,a=t[2];return[n,i,void 0===a?n:a]}function zU(e,t){return PE(t)?t:kx(t)?function(){return t}:function(){return e}}function GU(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t||0===t?PE(t)?t:kx(t)?function(){return t}:Array.isArray(t)?function(){return n?Math.max.apply(Math,I(t))||e:t}:RE(t)&&t.width&&t.height?function(){return n?Math.max(t.width,t.height)||e:[t.width,t.height]}:function(){return e}:function(t){var r=(t.data||{}).size;return r?Array.isArray(r)?n?Math.max.apply(Math,I(r))||e:r:RE(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||e:[r.width,r.height]:r:e}}var HU=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="function"===typeof t?t:function(){return t||0};n=e?Array.isArray(e)?function(t){return e}:PE(e)?e:function(t){return e}:function(e){var t,n,i;if(null===(t=e.data)||void 0===t?void 0:t.bboxSize)return null===(n=e.data)||void 0===n?void 0:n.bboxSize;if(null===(i=e.data)||void 0===i?void 0:i.size){var a=e.data.size;return Array.isArray(a)?a:RE(a)?[a.width,a.height]:a}return r};return function(e){var t=n(e),r=i(e);return Math.max.apply(Math,I(BU(t)))+r}},jU=function(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var t=[];return e.forEach((function(e){t.push(e)})),t.map((function(e){return jU(e)}))}if("object"===typeof e){var n={};return Object.keys(e).forEach((function(t){n[t]=jU(e[t])})),n}return e},VU=function(e,t){var n=jU(e);return n.data=n.data||{},t&&(kx(n.data.x)||(n.data.x=Math.random()*t[0]),kx(n.data.y)||(n.data.y=Math.random()*t[1])),n},WU={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null},XU=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="antv-dagre",this.options=Object.assign(Object.assign({},WU),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericDagreLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericDagreLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericDagreLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,I,F,U,B,z,G,H;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign(Object.assign({},this.options),n),a=i.nodeSize,o=i.align,s=i.rankdir,l=void 0===s?"TB":s,c=i.ranksep,h=i.nodesep,d=i.ranksepFunc,f=i.nodesepFunc,p=i.edgeLabelSpace,v=i.ranker,g=i.nodeOrder,m=i.begin,y=i.controlPoints,b=i.radial,x=i.sortByCombo,E=i.preset,w=new yI({tree:[]}),k=zU(c||50,d),S=zU(h||50,f),_=S,M=k,"LR"!==l&&"RL"!==l||(_=k,M=S),T=GU(10,a,!1),A=t.getAllNodes(),C=t.getAllEdges(),A.forEach((function(e){var t=BU(T(e)),n=M(e),r=_(e),i=t[0]+2*r,a=t[1]+2*n,o=e.data.layer;kx(o)?w.addNode({id:e.id,data:{width:i,height:a,layer:o}}):w.addNode({id:e.id,data:{width:i,height:a}})})),x&&(w.attachTreeStructure("combo"),A.forEach((function(e){var t=e.data.parentId;void 0!==t&&w.hasNode(t)&&w.setParent(e.id,t,"combo")}))),C.forEach((function(e){w.addEdge({id:e.id,source:e.source,target:e.target,data:{weight:e.data.weight||1}})})),P=void 0,(null===E||void 0===E?void 0:E.length)&&(P=new yI({nodes:E})),vU(w,{prevGraph:P,edgeLabelSpace:p,keepNodeOrder:!!g,nodeOrder:g||[],acyclicer:"greedy",ranker:v,rankdir:l,nodesep:h,align:o}),R=[0,0],m&&(N=1/0,O=1/0,w.getAllNodes().forEach((function(e){N>e.data.x&&(N=e.data.x),O>e.data.y&&(O=e.data.y)})),w.getAllEdges().forEach((function(e){var t;null===(t=e.data.points)||void 0===t||t.forEach((function(e){N>e.x&&(N=e.x),O>e.y&&(O=e.y)}))})),R[0]=m[0]-N,R[1]=m[1]-O),L="LR"===l||"RL"===l,b||(D=new Set,I="BT"===l||"RL"===l?function(e,t){return t-e}:function(e,t){return e-t},w.getAllNodes().forEach((function(e){e.data.x=e.data.x+R[0],e.data.y=e.data.y+R[1],D.add(L?e.data.x:e.data.y)})),F=Array.from(D).sort(I),U=L?function(e,t){return e.x!==t.x}:function(e,t){return e.y!==t.y},B=L?function(e,t,n){var r=Math.max(t.y,n.y),i=Math.min(t.y,n.y);return e.filter((function(e){return e.y<=r&&e.y>=i}))}:function(e,t,n){var r=Math.max(t.x,n.x),i=Math.min(t.x,n.x);return e.filter((function(e){return e.x<=r&&e.x>=i}))},w.getAllEdges().forEach((function(e,t){var n;p&&y&&"loop"!==e.data.type&&(e.data.controlPoints=YU(null===(n=e.data.points)||void 0===n?void 0:n.map((function(e){var t=e.x,n=e.y;return{x:t+R[0],y:n+R[1]}})),w.getNode(e.source),w.getNode(e.target),F,L,U,B))}))),z=[],z=w.getAllNodes().map((function(e){return VU(e)})),G=w.getAllEdges(),e&&(z.forEach((function(e){t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),G.forEach((function(e){t.mergeEdgeData(e.id,{controlPoints:e.data.controlPoints})}))),H={nodes:z,edges:G},r.abrupt("return",H);case 27:case"end":return r.stop()}}),r,this)})))}}])}(),YU=function(e,t,n,r,i,a,o){var s=(null===e||void 0===e?void 0:e.slice(1,e.length-1))||[];if(t&&n){var u=t.data,l=u.x,c=u.y,h=n.data,d=h.x,f=h.y;if(i&&(l=t.data.y,c=t.data.x,d=n.data.y,f=n.data.x),f!==c&&l!==d){var p=r.indexOf(c),v=r[p+1];if(v){var g=s[0],m=i?{x:(c+v)/2,y:(null===g||void 0===g?void 0:g.y)||d}:{x:(null===g||void 0===g?void 0:g.x)||d,y:(c+v)/2};g&&!a(g,m)||s.unshift(m)}var y=r.indexOf(f),b=Math.abs(y-p);if(1===b)(s=o(s,t.data,n.data)).length||s.push(i?{x:(c+f)/2,y:l}:{x:l,y:(c+f)/2});else if(b>1){var x=r[y-1];if(x){var E=s[s.length-1],w=i?{x:(f+x)/2,y:(null===E||void 0===E?void 0:E.y)||d}:{x:(null===E||void 0===E?void 0:E.x)||l,y:(f+x)/2};E&&!a(E,w)||s.push(w)}}}}return s},qU=function(e,t,n){var r=e.getAllNodes(),i=e.getAllEdges();return(null===r||void 0===r?void 0:r.length)?1===r.length?(t&&e.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}):void 0:{nodes:[],edges:i}},KU={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},ZU=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="circular",this.options=Object.assign(Object.assign({},KU),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericCircularLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericCircularLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericCircularLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,I,F,U,B,z,G,H;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.width,o=i.height,s=i.center,l=i.divisions,c=i.startAngle,h=void 0===c?0:c,d=i.endAngle,f=void 0===d?2*Math.PI:d,p=i.angleRatio,v=i.ordering,g=i.clockwise,m=i.nodeSpacing,y=i.nodeSize,b=t.getAllNodes(),E=t.getAllEdges(),w=$U(a,o,s),k=x(w,3),S=k[0],_=k[1],M=k[2],(T=null===b||void 0===b?void 0:b.length)&&1!==T){r.next=8;break}return r.abrupt("return",qU(t,e,M));case 8:for(A=(f-h)/T,C=i.radius,P=i.startRadius,R=i.endRadius,m?(N=zU(10,m),O=GU(10,y),L=-1/0,b.forEach((function(e){var t=O(e);L<t&&(L=t)})),D=0,b.forEach((function(e,t){D+=0===t?L||10:(N(e)||0)+(L||10)})),C=D/(2*Math.PI)):C||P||R?!P&&R?P=R:P&&!R&&(R=P):C=Math.min(_,S)/2,I=A*p,F=[],F="topology"===v?JU(t,b):"topology-directed"===v?JU(t,b,!0):"degree"===v?QU(t,b):b.map((function(e){return VU(e)})),U=Math.ceil(T/l),B=0;B<T;++B)(z=C)||null===P||null===R||(z=P+B*(R-P)/(T-1)),z||(z=10+100*B/(T-1)),G=h+B%U*I+2*Math.PI/l*Math.floor(B/U),g||(G=f-B%U*I-2*Math.PI/l*Math.floor(B/U)),F[B].data.x=M[0]+Math.cos(G)*z,F[B].data.y=M[1]+Math.sin(G)*z;return e&&F.forEach((function(e){t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),H={nodes:F,edges:E},r.abrupt("return",H);case 19:case"end":return r.stop()}}),r,this)})))}}])}(),JU=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[VU(t[0])],i={},a=t.length;i[t[0].id]=!0;var o=0;return t.forEach((function(s,u){if(0!==u)if(u!==a-1&&e.getDegree(s.id,"both")===e.getDegree(t[u+1].id,"both")&&!e.areNeighbors(r[o].id,s.id)||i[s.id]){for(var l=n?e.getSuccessors(r[o].id):e.getNeighbors(r[o].id),c=!1,h=0;h<l.length;h++){var d=l[h];if(e.getDegree(d.id)===e.getDegree(s.id)&&!i[d.id]){r.push(VU(d)),i[d.id]=!0,c=!0;break}}for(var f=0;!c&&(i[t[f].id]||(r.push(VU(t[f])),i[t[f].id]=!0,c=!0),++f!==a););}else r.push(VU(s)),i[s.id]=!0,o++})),r};function QU(e,t){var n=[];return t.forEach((function(e,t){n.push(VU(e))})),n.sort((function(t,n){return e.getDegree(t.id,"both")-e.getDegree(n.id,"both")})),n}var $U=function(e,t,n){var r=e,i=t,a=n;return r||"undefined"===typeof window||(r=window.innerWidth),i||"undefined"===typeof window||(i=window.innerHeight),a||(a=[r/2,i/2]),[r,i,a]},eB=Array.isArray,tB={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"},nB=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="concentric",this.options=Object.assign(Object.assign({},tB),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericConcentricLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericConcentricLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericConcentricLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,F,U,B,z,G,H,j,V;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.center,o=i.width,s=i.height,l=i.sortBy,c=i.maxLevelDiff,h=i.sweep,d=i.clockwise,f=i.equidistant,p=i.preventOverlap,v=i.startAngle,g=void 0===v?1.5*Math.PI:v,m=i.nodeSize,y=i.nodeSpacing,b=t.getAllNodes(),x=t.getAllEdges(),E=o||"undefined"===typeof window?o:window.innerWidth,w=s||"undefined"===typeof window?s:window.innerHeight,k=a||[E/2,w/2],(null===b||void 0===b?void 0:b.length)&&1!==b.length){r.next=9;break}return r.abrupt("return",qU(t,e,k));case 9:if(S=[],M=0,eB(m)?_=Math.max(m[0],m[1]):PE(m)?(_=-1/0,b.forEach((function(e){var t=Math.max.apply(Math,I(BU(m(e))));t>_&&(_=t)}))):_=m,eB(y)?M=Math.max(y[0],y[1]):kx(y)&&(M=y),b.forEach((function(e){var t=VU(e);S.push(t);var n=_,r=t.data;eB(r.size)?n=Math.max(r.size[0],r.size[1]):kx(r.size)?n=r.size:RE(r.size)&&(n=Math.max(r.size.width,r.size.height)),_=Math.max(_,n),PE(y)&&(M=Math.max(y(e),M))})),T={},S.forEach((function(e,t){T[e.id]=t})),Mx(A=l)&&void 0!==S[0].data[A]||(A="degree"),"degree"===A?S.sort((function(e,n){return t.getDegree(n.id,"both")-t.getDegree(e.id,"both")})):S.sort((function(e,t){return t.data[A]-e.data[A]})),C=S[0],P=(c||("degree"===A?t.getDegree(C.id,"both"):C.data[A]))/4,N=(R=[{nodes:[]}])[0],S.forEach((function(e){if(N.nodes.length>0){var n="degree"===A?Math.abs(t.getDegree(N.nodes[0].id,"both")-t.getDegree(e.id,"both")):Math.abs(N.nodes[0].data[A]-e.data[A]);P&&n>=P&&(N={nodes:[]},R.push(N))}N.nodes.push(e)})),O=_+M,p||(L=R.length>0&&R[0].nodes.length>1,D=Math.min(E,w)/2-O,F=D/(R.length+(L?1:0)),O=Math.min(O,F)),U=0,R.forEach((function(e){var t=void 0===h?2*Math.PI-2*Math.PI/e.nodes.length:h;if(e.dTheta=t/Math.max(1,e.nodes.length-1),e.nodes.length>1&&p){var n=Math.cos(e.dTheta)-Math.cos(0),r=Math.sin(e.dTheta)-Math.sin(0),i=Math.sqrt(O*O/(n*n+r*r));U=Math.max(i,U)}e.r=U,U+=O})),f){for(B=0,z=0,G=0;G<R.length;G++)H=R[G],j=(H.r||0)-z,B=Math.max(B,j);z=0,R.forEach((function(e,t){0===t&&(z=e.r||0),e.r=z,z+=B}))}return R.forEach((function(e){var t=e.dTheta||0,n=e.r||0;e.nodes.forEach((function(e,r){var i=g+(d?1:-1)*t*r;e.data.x=k[0]+n*Math.cos(i),e.data.y=k[1]+n*Math.sin(i)}))})),e&&S.forEach((function(e){return t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),V={nodes:S,edges:x},r.abrupt("return",V);case 33:case"end":return r.stop()}}),r,this)})))}}])}();function rB(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,u,l,c,h,d,f=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((l=t>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o,i=f,!(f=f[h=c<<1|l]))return i[h]=p,e;if(s=+e._x.call(null,f.data),u=+e._y.call(null,f.data),t===s&&n===u)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(l=t>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((h=c<<1|l)===(d=(u>=o)<<1|s>=a));return i[d]=f,i[h]=p,e}function iB(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function aB(e){return e[0]}function oB(e){return e[1]}function sB(e,t,n){var r=new uB(null==t?aB:t,null==n?oB:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function uB(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function lB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var cB=sB.prototype=uB.prototype;function hB(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var a,o,s,u,l,c,h,d,f,p,v,g,m=e._root,y={data:i},b=e._x0,x=e._y0,E=e._z0,w=e._x1,k=e._y1,S=e._z1;if(!m)return e._root=y,e;for(;m.length;)if((d=t>=(o=(b+w)/2))?b=o:w=o,(f=n>=(s=(x+k)/2))?x=s:k=s,(p=r>=(u=(E+S)/2))?E=u:S=u,a=m,!(m=m[v=p<<2|f<<1|d]))return a[v]=y,e;if(l=+e._x.call(null,m.data),c=+e._y.call(null,m.data),h=+e._z.call(null,m.data),t===l&&n===c&&r===h)return y.next=m,a?a[v]=y:e._root=y,e;do{a=a?a[v]=new Array(8):e._root=new Array(8),(d=t>=(o=(b+w)/2))?b=o:w=o,(f=n>=(s=(x+k)/2))?x=s:k=s,(p=r>=(u=(E+S)/2))?E=u:S=u}while((v=p<<2|f<<1|d)===(g=(h>=u)<<2|(c>=s)<<1|l>=o));return a[g]=m,a[v]=y,e}function dB(e,t,n,r,i,a,o){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}cB.copy=function(){var e,t,n=new uB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=lB(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=lB(t));return n},cB.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return rB(this.cover(t,n),t,n,e)},cB.addAll=function(e){var t,n,r,i,a=e.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>h&&(h=i));if(u>c||l>h)return this;for(this.cover(u,l).cover(c,h),n=0;n<a;++n)rB(this,o[n],s[n],e[n]);return this},cB.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},cB.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},cB.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},cB.find=function(e,t,n){var r,i,a,o,s,u,l,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],v=this._root;for(v&&p.push(new iB(v,c,h,d,f)),null==n?n=1/0:(c=e-n,h=t-n,d=e+n,f=t+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>d||(a=u.y0)>f||(o=u.x1)<c||(s=u.y1)<h))if(v.length){var g=(i+o)/2,m=(a+s)/2;p.push(new iB(v[3],g,m,o,s),new iB(v[2],i,m,g,s),new iB(v[1],g,a,o,m),new iB(v[0],i,a,g,m)),(l=(t>=m)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=e-+this._x.call(null,v.data),b=t-+this._y.call(null,v.data),x=y*y+b*b;if(x<n){var E=Math.sqrt(n=x);c=e-E,h=t-E,d=e+E,f=t+E,r=v.data}}return r},cB.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,u,l,c,h,d,f=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((l=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(u=(v+m)/2))?v=u:m=u,t=f,!(f=f[h=c<<1|l]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},cB.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},cB.root=function(){return this._root},cB.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},cB.visit=function(e){var t,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new iB(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new iB(n,l,c,a,o)),(n=u[2])&&s.push(new iB(n,r,c,l,o)),(n=u[1])&&s.push(new iB(n,l,i,a,c)),(n=u[0])&&s.push(new iB(n,r,i,l,c))}return this},cB.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new iB(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(o+u)/2,h=(s+l)/2;(a=i[0])&&n.push(new iB(a,o,s,c,h)),(a=i[1])&&n.push(new iB(a,c,s,u,h)),(a=i[2])&&n.push(new iB(a,o,h,c,l)),(a=i[3])&&n.push(new iB(a,c,h,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},cB.x=function(e){return arguments.length?(this._x=e,this):this._x},cB.y=function(e){return arguments.length?(this._y=e,this):this._y};var fB=function(e,t,n,r,i,a){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-i,2)+Math.pow(n-a,2))};function pB(e){return e[0]}function vB(e){return e[1]}function gB(e){return e[2]}function mB(e,t,n,r){var i=new yB(null==t?pB:t,null==n?vB:n,null==r?gB:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function yB(e,t,n,r,i,a,o,s,u){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=u,this._root=void 0}function bB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xB=mB.prototype=yB.prototype;xB.copy=function(){var e,t,n=new yB(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=bB(r),n;for(e=[{source:r,target:n._root=new Array(8)}];r=e.pop();)for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=bB(t));return n},xB.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return hB(this.cover(t,n,r),t,n,r,e)},xB.addAll=function(e){Array.isArray(e)||(e=Array.from(e));for(var t,n,r,i,a=e.length,o=new Float64Array(a),s=new Float64Array(a),u=new Float64Array(a),l=1/0,c=1/0,h=1/0,d=-1/0,f=-1/0,p=-1/0,v=0;v<a;++v)isNaN(n=+this._x.call(null,t=e[v]))||isNaN(r=+this._y.call(null,t))||isNaN(i=+this._z.call(null,t))||(o[v]=n,s[v]=r,u[v]=i,n<l&&(l=n),n>d&&(d=n),r<c&&(c=r),r>f&&(f=r),i<h&&(h=i),i>p&&(p=i));if(l>d||c>f||h>p)return this;this.cover(l,c,h).cover(d,f,p);for(var g=0;g<a;++g)hB(this,o[g],s[g],u[g],e[g]);return this},xB.cover=function(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,u=this._z1;if(isNaN(r))o=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,u=(a=Math.floor(n))+1;else{for(var l,c,h=o-r||1,d=this._root;r>e||e>=o||i>t||t>=s||a>n||n>=u;)switch(c=(n<a)<<2|(t<i)<<1|e<r,(l=new Array(8))[c]=d,d=l,h*=2,c){case 0:o=r+h,s=i+h,u=a+h;break;case 1:r=o-h,s=i+h,u=a+h;break;case 2:o=r+h,i=s-h,u=a+h;break;case 3:r=o-h,i=s-h,u=a+h;break;case 4:o=r+h,s=i+h,a=u-h;break;case 5:r=o-h,s=i+h,a=u-h;break;case 6:o=r+h,i=s-h,a=u-h;break;case 7:r=o-h,i=s-h,a=u-h}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=u,this},xB.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},xB.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},xB.find=function(e,t,n,r){var i,a,o,s,u,l,c,h,d,f=this._x0,p=this._y0,v=this._z0,g=this._x1,m=this._y1,y=this._z1,b=[],x=this._root;for(x&&b.push(new dB(x,f,p,v,g,m,y)),null==r?r=1/0:(f=e-r,p=t-r,v=n-r,g=e+r,m=t+r,y=n+r,r*=r);h=b.pop();)if(!(!(x=h.node)||(a=h.x0)>g||(o=h.y0)>m||(s=h.z0)>y||(u=h.x1)<f||(l=h.y1)<p||(c=h.z1)<v))if(x.length){var E=(a+u)/2,w=(o+l)/2,k=(s+c)/2;b.push(new dB(x[7],E,w,k,u,l,c),new dB(x[6],a,w,k,E,l,c),new dB(x[5],E,o,k,u,w,c),new dB(x[4],a,o,k,E,w,c),new dB(x[3],E,w,s,u,l,k),new dB(x[2],a,w,s,E,l,k),new dB(x[1],E,o,s,u,w,k),new dB(x[0],a,o,s,E,w,k)),(d=(n>=k)<<2|(t>=w)<<1|e>=E)&&(h=b[b.length-1],b[b.length-1]=b[b.length-1-d],b[b.length-1-d]=h)}else{var S=e-+this._x.call(null,x.data),_=t-+this._y.call(null,x.data),M=n-+this._z.call(null,x.data),T=S*S+_*_+M*M;if(T<r){var A=Math.sqrt(r=T);f=e-A,p=t-A,v=n-A,g=e+A,m=t+A,y=n+A,i=x.data}}return i},xB.findAllWithinRadius=function(e,t,n,r){var i=this,a=[],o=e-r,s=t-r,u=n-r,l=e+r,c=t+r,h=n+r;return this.visit((function(d,f,p,v,g,m,y){if(!d.length)do{var b=d.data;fB(e,t,n,i._x(b),i._y(b),i._z(b))<=r&&a.push(b)}while(d=d.next);return f>l||p>c||v>h||g<o||m<s||y<u})),a},xB.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e))||isNaN(s=+this._z.call(null,e)))return this;var t,n,r,i,a,o,s,u,l,c,h,d,f,p,v,g=this._root,m=this._x0,y=this._y0,b=this._z0,x=this._x1,E=this._y1,w=this._z1;if(!g)return this;if(g.length)for(;;){if((h=a>=(u=(m+x)/2))?m=u:x=u,(d=o>=(l=(y+E)/2))?y=l:E=l,(f=s>=(c=(b+w)/2))?b=c:w=c,t=g,!(g=g[p=f<<2|d<<1|h]))return this;if(!g.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(n=t,v=p)}for(;g.data!==e;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[p]=i:delete t[p],(g=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&g===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[v]=g:this._root=g),this):(this._root=i,this)},xB.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},xB.root=function(){return this._root},xB.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},xB.visit=function(e){var t,n,r,i,a,o,s,u,l=[],c=this._root;for(c&&l.push(new dB(c,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=l.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,a=t.z0,o=t.x1,s=t.y1,u=t.z1)&&c.length){var h=(r+o)/2,d=(i+s)/2,f=(a+u)/2;(n=c[7])&&l.push(new dB(n,h,d,f,o,s,u)),(n=c[6])&&l.push(new dB(n,r,d,f,h,s,u)),(n=c[5])&&l.push(new dB(n,h,i,f,o,d,u)),(n=c[4])&&l.push(new dB(n,r,i,f,h,d,u)),(n=c[3])&&l.push(new dB(n,h,d,a,o,s,f)),(n=c[2])&&l.push(new dB(n,r,d,a,h,s,f)),(n=c[1])&&l.push(new dB(n,h,i,a,o,d,f)),(n=c[0])&&l.push(new dB(n,r,i,a,h,d,f))}return this},xB.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new dB(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,s=t.y0,u=t.z0,l=t.x1,c=t.y1,h=t.z1,d=(o+l)/2,f=(s+c)/2,p=(u+h)/2;(a=i[0])&&n.push(new dB(a,o,s,u,d,f,p)),(a=i[1])&&n.push(new dB(a,d,s,u,l,f,p)),(a=i[2])&&n.push(new dB(a,o,f,u,d,c,p)),(a=i[3])&&n.push(new dB(a,d,f,u,l,c,p)),(a=i[4])&&n.push(new dB(a,o,s,p,d,f,h)),(a=i[5])&&n.push(new dB(a,d,s,p,l,f,h)),(a=i[6])&&n.push(new dB(a,o,f,p,d,c,h)),(a=i[7])&&n.push(new dB(a,d,f,p,l,c,h))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},xB.x=function(e){return arguments.length?(this._x=e,this):this._x},xB.y=function(e){return arguments.length?(this._y=e,this):this._y},xB.z=function(e){return arguments.length?(this._z=e,this):this._z};function EB(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=t/n,o=e.getAllNodes(),s=o.map((function(e,t){var n=e.data,r=n.nodeStrength;return{x:n.x,y:n.y,z:n.z,size:n.size,index:t,id:e.id,vx:0,vy:0,vz:0,weight:a*r}})),u=(2===i?sB(s,(function(e){return e.x}),(function(e){return e.y})):mB(s,(function(e){return e.x}),(function(e){return e.y}),(function(e){return e.z}))).visitAfter(wB),l=new Map;return s.forEach((function(e){l.set(e.id,e),function(e,t,n){t.visit((function(t,r,i,a,o){return kB(t,r,i,a,o,e,n)}))}(e,u,i)})),s.map((function(e,t){var n=o[t],i=n.id,a=n.data.mass,s=void 0===a?1:a;r[i]={x:e.vx/s,y:e.vy/s,z:e.vz/s}})),r}function wB(e){var t=0,n=0,r=0,i=0,a=0,o=e.length;if(o){for(var s=0;s<o;s++){var u=e[s];u&&u.weight&&(t+=u.weight,n+=u.x*u.weight,r+=u.y*u.weight,i+=u.z*u.weight,a+=u.size*u.weight)}e.x=n/t,e.y=r/t,e.z=i/t,e.size=a/t,e.weight=t}else{var l=e;e.x=l.data.x,e.y=l.data.y,e.z=l.data.z,e.size=l.data.size,e.weight=l.data.weight}}var kB=function(e,t,n,r,i,a,o){var s;if((null===(s=e.data)||void 0===s?void 0:s.id)!==a.id){for(var u=[n,r,i][o-1],l=a.x-e.x||.1,c=a.y-e.y||.1,h=a.z-e.z||.1,d=[l,c,h],f=u-t,p=0,v=0;v<o;v++)p+=d[v]*d[v];var g=Math.sqrt(p)*p;if(f*f*.81<p){var m=e.weight/g;return a.vx+=l*m,a.vy+=c*m,a.vz+=h*m,!0}if(e.length)return!1;if(e.data!==a){var y=e.data.weight/g;a.vx+=l*y,a.vy+=c*y,a.vz+=h*y}}};var SB={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"},_B=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},SB),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericForceLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericForceLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<t;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach((function(t){return e.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===e.options.dimensions?t.data.z:void 0})})),r}},{key:"genericForceLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_=this;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=t.getAllNodes(),o=t.getAllEdges(),s=this.formatOptions(i,t),l=s.dimensions,c=s.width,h=s.height,d=s.nodeSize,f=s.getMass,p=s.nodeStrength,v=s.edgeStrength,g=s.linkDistance,m=a.map((function(e,t){return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{x:kx(e.data.x)?e.data.x:Math.random()*c,y:kx(e.data.y)?e.data.y:Math.random()*h,z:kx(e.data.z)?e.data.z:Math.random()*Math.sqrt(c*h),size:d(e)||30,mass:f(e),nodeStrength:p(e)})})})),y=o.map((function(e){return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{edgeStrength:v(e),linkDistance:g(e,t.getNode(e.source),t.getNode(e.target))})})})),null===a||void 0===a?void 0:a.length){r.next=10;break}return this.lastResult={nodes:[],edges:o},r.abrupt("return",{nodes:[],edges:o});case 10:if(b={},a.forEach((function(e,t){b[e.id]={x:0,y:0,z:0}})),x=new yI({nodes:m,edges:y}),this.formatCentripetal(s,x),E=s.maxIteration,w=s.minMovement,k=s.onTick,this.lastLayoutNodes=m,this.lastLayoutEdges=y,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=x,this.lastOptions=s,this.lastVelMap=b,"undefined"!==typeof window){r.next=24;break}return r.abrupt("return");case 24:return S=0,r.abrupt("return",new Promise((function(n){_.timeInterval=window.setInterval((function(){a&&_.running||n({nodes:PB(t,m),edges:o}),_.runOneStep(x,t,S,b,s),_.updatePosition(t,x,b,s),e&&m.forEach((function(e){return t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:3===l?e.data.z:void 0})})),null===k||void 0===k||k({nodes:PB(t,m),edges:o}),(++S>=E||_.judgingDistance<w)&&(window.clearInterval(_.timeInterval),n({nodes:PB(t,m),edges:o}))}),0),_.running=!0})));case 26:case"end":return r.stop()}}),r,this)})))}},{key:"formatOptions",value:function(e,t){var n=Object.assign({},e),r=e.width,i=e.height,a=e.getMass;n.width=r||"undefined"===typeof window?r:window.innerWidth,n.height=i||"undefined"===typeof window?i:window.innerHeight,e.center||(n.center=[n.width/2,n.height/2]),a||(n.getMass=function(e){var n=1;kx(null===e||void 0===e?void 0:e.data.mass)&&(n=null===e||void 0===e?void 0:e.data.mass);var r=t.getDegree(e.id,"both");return!r||r<5?n:5*r*n}),n.nodeSize=HU(e.nodeSize,e.nodeSpacing);var o=e.linkDistance?zU(1,e.linkDistance):function(e){return 1+n.nodeSize(t.getNode(e.source))+n.nodeSize(t.getNode(e.target))};return n.linkDistance=o,n.nodeStrength=zU(1,e.nodeStrength),n.edgeStrength=zU(1,e.edgeStrength),n}},{key:"formatCentripetal",value:function(e,t){var n,r,i=e.dimensions,a=e.centripetalOptions,o=e.center,s=e.clusterNodeStrength,u=e.leafCluster,l=e.clustering,c=e.nodeClusterBy,h=t.getAllNodes(),d=a||{leaf:2,single:2,others:1,center:function(e){return{x:o[0],y:o[1],z:3===i?o[2]:void 0}}};if("function"!==typeof s&&(e.clusterNodeStrength=function(e){return s}),u&&c&&(n=MB(t,c),r=Array.from(new Set(null===h||void 0===h?void 0:h.map((function(e){return e.data[c]}))))||[],e.centripetalOptions=Object.assign(d,{single:100,leaf:function(t){var i=n[t.id]||{},a=i.siblingLeaves,o=i.sameTypeLeaves;return(null===o||void 0===o?void 0:o.length)===(null===a||void 0===a?void 0:a.length)||1===(null===r||void 0===r?void 0:r.length)?1:e.clusterNodeStrength(t)},others:1,center:function(e){var r,i=t.getDegree(e.id,"both");if(!i)return{x:100,y:100,z:0};if(1===i){var a=(n[e.id]||{}).sameTypeLeaves,o=void 0===a?[]:a;1===o.length?r=void 0:o.length>1&&(r=CB(o))}else r=void 0;return{x:null===r||void 0===r?void 0:r.x,y:null===r||void 0===r?void 0:r.y,z:null===r||void 0===r?void 0:r.z}}})),l&&c){n||(n=MB(t,c)),r||(r=Array.from(new Set(h.map((function(e){return e.data[c]}))))),r=r.filter((function(e){return void 0!==e}));var f={};r.forEach((function(e){var n=h.filter((function(t){return t.data[c]===e})).map((function(e){return t.getNode(e.id)}));f[e]=CB(n)})),e.centripetalOptions=Object.assign(d,{single:function(t){return e.clusterNodeStrength(t)},leaf:function(t){return e.clusterNodeStrength(t)},others:function(t){return e.clusterNodeStrength(t)},center:function(e){var t=f[e.data[c]];return{x:null===t||void 0===t?void 0:t.x,y:null===t||void 0===t?void 0:t.y,z:null===t||void 0===t?void 0:t.z}}})}var p=e.centripetalOptions||{},v=p.leaf,g=p.single,m=p.others;v&&"function"!==typeof v&&(e.centripetalOptions.leaf=function(){return v}),g&&"function"!==typeof g&&(e.centripetalOptions.single=function(){return g}),m&&"function"!==typeof m&&(e.centripetalOptions.others=function(){return m})}},{key:"runOneStep",value:function(e,t,n,r,i){var a={},o=e.getAllNodes(),s=e.getAllEdges();if(null===o||void 0===o?void 0:o.length){var u=i.monitor;if(this.calRepulsive(e,a,i),s&&this.calAttractive(e,a,i),this.calGravity(e,t,a,i),this.updateVelocity(e,a,r,i),u)u({energy:this.calTotalEnergy(a,o),nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:n})}}},{key:"calTotalEnergy",value:function(e,t){var n=this;if(!(null===t||void 0===t?void 0:t.length))return 0;var r=0;return t.forEach((function(t,i){var a=e[t.id].x,o=e[t.id].y,s=3===n.options.dimensions?e[t.id].z:0,u=a*a+o*o+s*s,l=t.data.mass;r+=(void 0===l?1:l)*u*.5})),r}},{key:"calRepulsive",value:function(e,t,n){var r=n.dimensions,i=n.factor,a=n.coulombDisScale;EB(e,i,a*a,t,r)}},{key:"calAttractive",value:function(e,t,n){var r=n.dimensions,i=n.nodeSize;e.getAllEdges().forEach((function(n,a){var o=n.source,s=n.target,u=e.getNode(o),l=e.getNode(s);if(u&&l){var c=l.data.x-u.data.x,h=l.data.y-u.data.y,d=3===r?l.data.z-u.data.z:0;c||h||(c=.01*Math.random(),h=.01*Math.random(),3!==r||d||(d=.01*Math.random()));var f=Math.sqrt(c*c+h*h+d*d);if(!(f<i(u)+i(l))){var p=c/f,v=h/f,g=d/f,m=n.data||{},y=m.linkDistance,b=void 0===y?200:y,x=m.edgeStrength,E=(b-f)*(void 0===x?200:x),w=1/(u.data.mass||1),k=1/(l.data.mass||1),S=p*E,_=v*E,M=g*E;t[o].x-=S*w,t[o].y-=_*w,t[o].z-=M*w,t[s].x+=S*k,t[s].y+=_*k,t[s].z+=M*k}}}))}},{key:"calGravity",value:function(e,t,n,r){var i=r.getCenter,a=e.getAllNodes(),o=t.getAllNodes(),s=t.getAllEdges(),u=r.width,l=r.height,c=r.center,h=r.gravity,d=r.centripetalOptions;a&&a.forEach((function(r){var a=r.id,f=r.data,p=f.mass,v=f.x,g=f.y,m=f.z,y=t.getNode(a),b=0,E=0,w=0,k=h,S=e.getDegree(a,"in"),_=e.getDegree(a,"out"),M=e.getDegree(a,"both"),T=null===i||void 0===i?void 0:i(y,M);if(T){var A=x(T,3);b=v-A[0],E=g-A[1],k=A[2]}else b=v-c[0],E=g-c[1],w=m-c[2];if(k&&(n[a].x-=k*b/p,n[a].y-=k*E/p,n[a].z-=k*w/p),d){var C=d.leaf,P=d.single,R=d.others,N=d.center,O=(null===N||void 0===N?void 0:N(y,o,s,u,l))||{x:0,y:0,z:0,centerStrength:0},L=O.x,D=O.y,I=O.z,F=O.centerStrength;if(!kx(L)||!kx(D))return;var U=(v-L)/p,B=(g-D)/p,z=(m-I)/p;if(F&&(n[a].x-=F*U,n[a].y-=F*B,n[a].z-=F*z),0===M){var G=P(y);if(!G)return;return n[a].x-=G*U,n[a].y-=G*B,void(n[a].z-=G*z)}if(0===S||0===_){var H=C(y,o,s);if(!H)return;return n[a].x-=H*U,n[a].y-=H*B,void(n[a].z-=H*z)}var j=R(y);if(!j)return;n[a].x-=j*U,n[a].y-=j*B,n[a].z-=j*z}}))}},{key:"updateVelocity",value:function(e,t,n,r){var i=r.damping,a=r.maxSpeed,o=r.interval,s=r.dimensions,u=e.getAllNodes();(null===u||void 0===u?void 0:u.length)&&u.forEach((function(e){var r=e.id,u=(n[r].x+t[r].x*o)*i||.01,l=(n[r].y+t[r].y*o)*i||.01,c=3===s?(n[r].z+t[r].z*o)*i||.01:0,h=Math.sqrt(u*u+l*l+c*c);if(h>a){var d=a/h;u*=d,l*=d,c*=d}n[r]={x:u,y:l,z:c}}))}},{key:"updatePosition",value:function(e,t,n,r){var i=this,a=r.distanceThresholdMode,o=r.interval,s=r.dimensions,u=t.getAllNodes();if(null===u||void 0===u?void 0:u.length){var l=0;"max"===a?this.judgingDistance=-1/0:"min"===a&&(this.judgingDistance=1/0),u.forEach((function(r){var u=r.id,c=e.getNode(u);if(kx(c.data.fx)&&kx(c.data.fy))t.mergeNodeData(u,{x:c.data.fx,y:c.data.fy,z:3===s?c.data.fz:void 0});else{var h=n[u].x*o,d=n[u].y*o,f=3===s?n[u].z*o:0;t.mergeNodeData(u,{x:r.data.x+h,y:r.data.y+d,z:r.data.z+f});var p=Math.sqrt(h*h+d*d+f*f);switch(a){case"max":i.judgingDistance<p&&(i.judgingDistance=p);break;case"min":i.judgingDistance>p&&(i.judgingDistance=p);break;default:l+=p}}})),a&&"mean"!==a||(this.judgingDistance=l/u.length)}else this.judgingDistance=0}}])}(),MB=function(e,t){var n=e.getAllNodes();if(!(null===n||void 0===n?void 0:n.length))return{};var r={};return n.forEach((function(n,i){1===e.getDegree(n.id,"both")&&(r[n.id]=TB(e,"leaf",n,t))})),r},TB=function(e,t,n,r){var i=e.getDegree(n.id,"in"),a=e.getDegree(n.id,"out"),o=n,s=[];return 0===i?(o=e.getSuccessors(n.id)[0],s=e.getNeighbors(o.id)):0===a&&(o=e.getPredecessors(n.id)[0],s=e.getNeighbors(o.id)),s=s.filter((function(t){return 0===e.getDegree(t.id,"in")||0===e.getDegree(t.id,"out")})),{coreNode:o,siblingLeaves:s,sameTypeLeaves:AB(e,t,r,n,s)}},AB=function(e,t,n,r,i){var a=r.data[n]||"",o=(null===i||void 0===i?void 0:i.filter((function(e){return e.data[n]===a})))||[];return"leaf"===t&&(o=o.filter((function(t){return 0===e.getDegree(t.id,"in")||0===e.getDegree(t.id,"out")}))),o},CB=function(e){var t={x:0,y:0};e.forEach((function(e){var n=e.data,r=n.x,i=n.y;t.x+=r||0,t.y+=i||0}));var n=e.length||1;return{x:t.x/n,y:t.y/n}},PB=function(e,t){return t.map((function(t){var n=t.id,r=t.data,i=e.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})}))},RB=n(9395),NB=(RB.y3,RB.jy,RB.oN,RB.Hc,RB.cg,RB.hj,RB.LU,RB.Tb,RB.uq),OB=(RB.Zm,RB.Dq,RB.__,RB.q0,RB.lh,RB.pI,RB.zC,RB.zg,RB.g6,RB.OL,RB.ks,RB.QR,RB.jp,RB.mk,RB.W2),LB=(RB.l,RB.KY,RB.dv,RB.BR,RB.Wu,RB.uq,RB.uq,RB.a4,RB.DI,RB.Jo,RB.Zi,RB.kH,RB.LV,function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var i=0;i<n;i+=1)r===i?t[r][i]=0:0!==e[r][i]&&e[r][i]?t[r][i]=e[r][i]:t[r][i]=1/0}for(var a=0;a<n;a+=1)for(var o=0;o<n;o+=1)for(var s=0;s<n;s+=1)t[o][s]>t[o][a]+t[a][s]&&(t[o][s]=t[o][a]+t[a][s]);return t}),DB=function(e,t){var n=e.nodes,r=e.edges,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){a[e.id]=t;i.push([])})),null===r||void 0===r||r.forEach((function(e){var n=e.source,r=e.target,o=a[n],s=a[r];void 0!==o&&void 0!==s&&(i[o][s]=1,t||(i[s][o]=1))})),i},IB=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.forEach((function(e){r.push(e*t)})),n.push(r)})),n},FB=function(e){var t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach((function(e){var a=e.data.size;eB(a)?1===a.length&&(a=[a[0],a[0]]):kx(a)?a=[a,a]:(void 0===a||isNaN(a))&&(a=[30,30]);var o=[a[0]/2,a[1]/2],s=e.data.x-o[0],u=e.data.x+o[0],l=e.data.y-o[1],c=e.data.y+o[1];t>s&&(t=s),n>l&&(n=l),r<u&&(r=u),i<c&&(i=c)})),{minX:t,minY:n,maxX:r,maxY:i}},UB=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},BB=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"TB",i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(null===t||void 0===t?void 0:t.length)for(var o=a.stopBranchFn,s=a.stopAllFn,u=0;u<t.length;u++){var l=t[u];if(e.hasNode(l.id)&&!(null===o||void 0===o?void 0:o(l))){if(null===s||void 0===s?void 0:s(l))return;"TB"===r&&n(l),BB(e,e.getChildren(l.id,i),n,r,i,a),"TB"!==r&&n(l)}}},zB={center:[0,0],linkDistance:50},GB=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="mds",this.options=Object.assign(Object.assign({},zB),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericMDSLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericMDSLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericMDSLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.center,o=void 0===a?[0,0]:a,s=i.linkDistance,l=void 0===s?50:s,c=t.getAllNodes(),h=t.getAllEdges(),(null===c||void 0===c?void 0:c.length)&&1!==c.length){r.next=6;break}return r.abrupt("return",qU(t,e,o));case 6:return d=DB({nodes:c,edges:h},!1),f=LB(d),HB(f),p=IB(f,l),v=jB(p),g=[],v.forEach((function(e,t){var n=VU(c[t]);n.data.x=e[0]+o[0],n.data.y=e[1]+o[1],g.push(n)})),e&&g.forEach((function(e){return t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),m={nodes:g,edges:h},r.abrupt("return",m);case 16:case"end":return r.stop()}}),r,this)})))}}])}(),HB=function(e){var t=-999999;e.forEach((function(e){e.forEach((function(e){e!==1/0&&t<e&&(t=e)}))})),e.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(e[r][i]=t)}))}))},jB=function(e){var t=NB.mul(NB.pow(e,2),-.5),n=t.mean("row"),r=t.mean("column"),i=t.mean();t.add(i).subRowVector(n).subColumnVector(r);var a=new OB(t),o=NB.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((function(e){return NB.mul([e],[o]).toJSON()[0].splice(0,2)}))};function VB(e){return!!e.tick&&!!e.stop}var WB={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},XB={center:[0,0],comboPadding:10,treeKey:"combo"},YB=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="comboCombined",this.options=Object.assign(Object.assign({},XB),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericComboCombinedLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericComboCombinedLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericComboCombinedLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M,T,A;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.initVals(Object.assign(Object.assign({},this.options),n)),a=i.center,o=i.treeKey,s=i.outerLayout,l=t.getAllNodes().filter((function(e){return!e.data._isCombo})),c=t.getAllNodes().filter((function(e){return e.data._isCombo})),h=t.getAllEdges(),(d=null===l||void 0===l?void 0:l.length)&&1!==d){r.next=8;break}return r.abrupt("return",qU(t,e,a));case 8:return f=[],p=new Map,l.forEach((function(e){p.set(e.id,e)})),v=new Map,c.forEach((function(e){v.set(e.id,e)})),g=new Map,m=this.getInnerGraphs(t,o,p,v,h,i,g),r.next=17,Promise.all(m);case 17:if(y=new Map,b=[],x=new Map,E=!0,t.getRoots(o).forEach((function(e){var n=g.get(e.id),r=v.get(e.id)||p.get(e.id),i={id:e.id,data:Object.assign(Object.assign({},e.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};b.push(i),y.set(e.id,!0),isNaN(i.data.x)||0===i.data.x||isNaN(i.data.y)||0===i.data.y?(i.data.x=100*Math.random(),i.data.y=100*Math.random()):E=!1,BB(t,[e],(function(t){t.id!==e.id&&x.set(t.id,e.id)}),"TB",o)})),w=[],h.forEach((function(e){var t=x.get(e.source)||e.source,n=x.get(e.target)||e.target;t!==n&&y.has(t)&&y.has(n)&&w.push({id:e.id,source:t,target:n,data:{}})})),!(null===b||void 0===b?void 0:b.length)){r.next=42;break}if(1!==b.length){r.next=30;break}b[0].data.x=a[0],b[0].data.y=a[1],r.next=40;break;case 30:if(S=new yI({nodes:b,edges:w}),_=s||new _B,!E||!WB[_.id]){r.next=36;break}return M=b.length<100?new GB:new nB,r.next=36,M.assign(S);case 36:return T=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},"force"===_.id?{gravity:1,factor:4,linkDistance:function(e,t,n){return(Math.max.apply(Math,I(t.data.size))||32)/2+(Math.max.apply(Math,I(n.data.size))||32)/2+200}}:{}),r.next=39,qB(_,S,T);case 39:k=r.sent;case 40:g.forEach((function(e){var t,n=k.nodes.find((function(t){return t.id===e.id}));if(n){var r=n.data,i=r.x,a=r.y;e.data.visited=!0,e.data.x=i,e.data.y=a,f.push({id:e.id,data:{x:i,y:a}})}var o=e.data,s=o.x,u=o.y;null===(t=e.data.nodes)||void 0===t||t.forEach((function(e){f.push({id:e.id,data:{x:e.data.x+s,y:e.data.y+u}})}))})),g.forEach((function(e){var t=e.data,n=t.x,r=t.y,i=t.visited,a=t.nodes;null===a||void 0===a||a.forEach((function(e){if(!i){var t=f.find((function(t){return t.id===e.id}));t.data.x+=n||0,t.data.y+=r||0}}))}));case 42:return e&&f.forEach((function(e){t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),A={nodes:f,edges:h},r.abrupt("return",A);case 45:case"end":return r.stop()}}),r,this)})))}},{key:"initVals",value:function(e){var t,n,r,i=Object.assign({},e),a=e.nodeSize,o=e.spacing,s=e.comboPadding;if(n=kx(o)?function(){return o}:PE(o)?o:function(){return 0},i.spacing=n,a)if(PE(a))t=function(e){var t=a(e),r=n(e);return eB(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+r)/2:((t||32)+r)/2};else if(eB(a)){var u=(a[0]>a[1]?a[0]:a[1])/2;t=function(e){return u+n(e)/2}}else{var l=a/2;t=function(e){return l+n(e)/2}}else t=function(e){var t=n(e);return e.size?eB(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+t)/2:RE(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+t)/2:(e.size+t)/2:32+t/2};return i.nodeSize=t,r=kx(s)?function(){return s}:eB(s)?function(){return Math.max.apply(null,s)}:PE(s)?s:function(){return 0},i.comboPadding=r,i}},{key:"getInnerGraphs",value:function(e,t,n,r,i,a,o){var s=this,l=a.nodeSize,c=a.comboPadding,h=a.spacing,d=a.innerLayout||new nB({}),f={center:[0,0],preventOverlap:!0,nodeSpacing:h},p=[],v=function(e){var t=(null===c||void 0===c?void 0:c(e))||10;return eB(t)&&(t=Math.max.apply(Math,I(t))),{size:t?[2*t,2*t]:[30,30],padding:t}};return e.getRoots(t).forEach((function(a){o.set(a.id,{id:a.id,data:{nodes:[],size:v(a).size}});var c=Promise.resolve();BB(e,[a],(function(a){var h;if(a.data._isCombo){var p=v(a),g=p.size,m=p.padding;if(null===(h=e.getChildren(a.id,t))||void 0===h?void 0:h.length){var y=o.get(a.id);o.set(a.id,{id:a.id,data:Object.assign({nodes:[]},null===y||void 0===y?void 0:y.data)});var b=new Map,E=e.getChildren(a.id,t).map((function(e){if(e.data._isCombo)return o.has(e.id)||o.set(e.id,{id:e.id,data:Object.assign({},e.data)}),b.set(e.id,!0),o.get(e.id);var t=n.get(e.id)||r.get(e.id);return b.set(e.id,!0),{id:e.id,data:Object.assign(Object.assign({},t.data),e.data)}})),w={nodes:E,edges:i.filter((function(e){return b.has(e.source)&&b.has(e.target)}))},k=1/0;E.forEach((function(e){var t,n=e.data.size;n||(n=(null===(t=o.get(e.id))||void 0===t?void 0:t.data.size)||(null===l||void 0===l?void 0:l(e))||[30,30]),kx(n)&&(n=[n,n]);var r=x(n,2),i=r[0],a=r[1];k>i&&(k=i),k>a&&(k=a),e.data.size=n})),c=c.then((function(){return Nx(s,void 0,void 0,u().mark((function e(){var t,n,r,i,s,l,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new yI(w),e.next=3,qB(d,t,f,!0);case 3:n=FB(E),r=n.minX,i=n.minY,s=n.maxX,l=n.maxY,c={x:(s+r)/2,y:(l+i)/2},w.nodes.forEach((function(e){e.data.x-=c.x,e.data.y-=c.y})),h=[Math.max(s-r,k)+2*m,Math.max(l-i,k)+2*m],o.get(a.id).data.size=h,o.get(a.id).data.nodes=E;case 9:case"end":return e.stop()}}),e)})))}))}else o.set(a.id,{id:a.id,data:Object.assign(Object.assign({},a.data),{size:g})});return!0}}),"BT",t),p.push(c)})),p}}])}();function qB(e,t,n,r){var i;return Nx(this,void 0,void 0,u().mark((function a(){return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!VB(e)){a.next=4;break}return e.execute(t,n),e.stop(),a.abrupt("return",e.tick(null!==(i=n.iterations)&&void 0!==i?i:300));case 4:if(!r){a.next=8;break}return a.next=7,e.assign(t,n);case 7:case 10:return a.abrupt("return",a.sent);case 8:return a.next=10,e.execute(t,n);case 11:case"end":return a.stop()}}),a)})))}function KB(e){return function(){return e}}function ZB(e){return 1e-6*(e()-.5)}function JB(e){return e.index}function QB(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function $B(e){var t,n,r,i,a,o,s=JB,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=KB(30),c=1;function h(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,h,d,f,p,v,g=0;g<s;++g)l=(u=e[g]).source,d=(h=u.target).x+h.vx-l.x-l.vx||ZB(o),f=h.y+h.vy-l.y-l.vy||ZB(o),d*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*r*t[g],f*=p,h.vx-=d*(v=a[g]),h.vy-=f*v,l.vx+=d*(v=1-v),l.vy+=f*v}function d(){if(r){var o,u,l=r.length,c=e.length,h=new Map(r.map((function(e,t){return[s(e,t,r),e]})));for(o=0,i=new Array(l);o<c;++o)(u=e[o]).index=o,"object"!==typeof u.source&&(u.source=QB(h,u.source)),"object"!==typeof u.target&&(u.target=QB(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(o=0,a=new Array(c);o<c;++o)u=e[o],a[o]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),f(),n=new Array(c),p()}}function f(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),h.initialize=function(e,t){r=e,o=t,d()},h.links=function(t){return arguments.length?(e=t,d(),h):e},h.id=function(e){return arguments.length?(s=e,h):s},h.iterations=function(e){return arguments.length?(c=+e,h):c},h.strength=function(e){return arguments.length?(u="function"===typeof e?e:KB(+e),f(),h):u},h.distance=function(e){return arguments.length?(l="function"===typeof e?e:KB(+e),p(),h):l},h}var ez={value:function(){}};function tz(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new nz(r)}function nz(e){this._=e}function rz(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function iz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ez,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}nz.prototype=tz.prototype={constructor:nz,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=iz(i[n],e.name,t);else if(null==t)for(n in i)i[n]=iz(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=a[o]).type)&&(n=rz(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nz(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var az,oz,sz=tz,uz=0,lz=0,cz=0,hz=1e3,dz=0,fz=0,pz=0,vz="object"===typeof performance&&performance.now?performance:Date,gz="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mz(){return fz||(gz(yz),fz=vz.now()+pz)}function yz(){fz=0}function bz(){this._call=this._time=this._next=null}function xz(e,t,n){var r=new bz;return r.restart(e,t,n),r}function Ez(){fz=(dz=vz.now())+pz,uz=lz=0;try{!function(){mz(),++uz;for(var e,t=az;t;)(e=fz-t._time)>=0&&t._call.call(void 0,e),t=t._next;--uz}()}finally{uz=0,function(){var e,t,n=az,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:az=t);oz=e,kz(r)}(),fz=0}}function wz(){var e=vz.now(),t=e-dz;t>hz&&(pz-=t,dz=e)}function kz(e){uz||(lz&&(lz=clearTimeout(lz)),e-fz>24?(e<1/0&&(lz=setTimeout(Ez,e-vz.now()-pz)),cz&&(cz=clearInterval(cz))):(cz||(dz=vz.now(),cz=setInterval(wz,hz)),uz=1,gz(Ez)))}bz.prototype=xz.prototype={constructor:bz,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?mz():+n)+(null==t?0:+t),this._next||oz===this||(oz?oz._next=this:az=this,oz=this),this._call=e,this._time=n,kz()},stop:function(){this._call&&(this._call=null,this._time=1/0,kz())}};var Sz=1664525,_z=1013904223,Mz=4294967296;function Tz(e){return e.x}function Az(e){return e.y}var Cz=Math.PI*(3-Math.sqrt(5));function Pz(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=xz(h),l=sz("tick","end"),c=function(){var e=1;return function(){return(e=(Sz*e+_z)%Mz)/Mz}}();function h(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(a-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return t}function f(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),a=n*Cz;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),f(),t={tick:d,restart:function(){return u.restart(h),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,f(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,a,o,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=t-(s=e[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}}function Rz(){var e,t,n,r,i,a=KB(-30),o=1,s=1/0,u=.81;function l(n){var i,a=e.length,o=sB(e,Tz,Az).visitAfter(h);for(r=n,i=0;i<a;++i)t=e[i],o.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+a(n,t,e)}}function h(e){var t,n,r,a,o,s=0,u=0;if(e.length){for(r=a=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,a+=n*t.y);e.x=r/u,e.y=a/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,a,l,c){if(!e.value)return!0;var h=e.x-t.x,d=e.y-t.y,f=c-a,p=h*h+d*d;if(f*f/u<p)return p<s&&(0===h&&(p+=(h=ZB(n))*h),0===d&&(p+=(d=ZB(n))*d),p<o&&(p=Math.sqrt(o*p)),t.vx+=h*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===h&&(p+=(h=ZB(n))*h),0===d&&(p+=(d=ZB(n))*d),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(f=i[e.data.index]*r/p,t.vx+=h*f,t.vy+=d*f)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(a="function"===typeof e?e:KB(+e),c(),l):a},l.distanceMin=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l}function Nz(e,t){var n,r=1;function i(){var i,a,o=n.length,s=0,u=0;for(i=0;i<o;++i)s+=(a=n[i]).x,u+=a.y;for(s=(s/o-e)*r,u=(u/o-t)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function Oz(e){return e.x+e.vx}function Lz(e){return e.y+e.vy}function Dz(e){var t,n,r,i=1,a=1;function o(){for(var e,o,u,l,c,h,d,f=t.length,p=0;p<a;++p)for(o=sB(t,Oz,Lz).visitAfter(s),e=0;e<f;++e)u=t[e],h=n[u.index],d=h*h,l=u.x+u.vx,c=u.y+u.vy,o.visit(v);function v(e,t,n,a,o){var s=e.data,f=e.r,p=h+f;if(!s)return t>l+p||a<l-p||n>c+p||o<c-p;if(s.index>u.index){var v=l-s.x-s.vx,g=c-s.y-s.vy,m=v*v+g*g;m<p*p&&(0===v&&(m+=(v=ZB(r))*v),0===g&&(m+=(g=ZB(r))*g),m=(p-(m=Math.sqrt(m)))/m*i,u.vx+=(v*=m)*(p=(f*=f)/(d+f)),u.vy+=(g*=m)*p,s.vx-=v*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,a=t.length;for(n=new Array(a),r=0;r<a;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!==typeof e&&(e=KB(null==e?1:+e)),o.initialize=function(e,n){t=e,r=n,u()},o.iterations=function(e){return arguments.length?(a=+e,o):a},o.strength=function(e){return arguments.length?(i=+e,o):i},o.radius=function(t){return arguments.length?(e="function"===typeof t?t:KB(+t),u(),o):e},o}function Iz(e,t,n){var r,i,a,o=KB(.1);function s(e){for(var o=0,s=r.length;o<s;++o){var u=r[o],l=u.x-t||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),d=(a[o]-h)*i[o]*e/h;u.vx+=l*d,u.vy+=c*d}}function u(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)a[t]=+e(r[t],t,r),i[t]=isNaN(a[t])?0:+o(r[t],t,r)}}return"function"!==typeof e&&(e=KB(+e)),null==t&&(t=0),null==n&&(n=0),s.initialize=function(e){r=e,u()},s.strength=function(e){return arguments.length?(o="function"===typeof e?e:KB(+e),u(),s):o},s.radius=function(t){return arguments.length?(e="function"===typeof t?t:KB(+t),u(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s}function Fz(e){var t,n,r,i=KB(.1);function a(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vx+=(r[a]-i.x)*n[a]*e}function o(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=KB(null==e?0:+e)),a.initialize=function(e){t=e,o()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:KB(+e),o(),a):i},a.x=function(t){return arguments.length?(e="function"===typeof t?t:KB(+t),o(),a):e},a}function Uz(e){var t,n,r,i=KB(.1);function a(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vy+=(r[a]-i.y)*n[a]*e}function o(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=KB(null==e?0:+e)),a.initialize=function(e){t=e,o()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:KB(+e),o(),a):i},a.y=function(t){return arguments.length?(e="function"===typeof t?t:KB(+t),o(),a):e},a}var Bz=function(){return p((function e(t){v(this,e),this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:$B,manyBody:Rz,center:Nz,collide:Dz,radial:Iz,x:Fz,y:Uz},this.options={link:{id:function(e){return e.id}},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},xR(this.options,t),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.simulation.stop()}},{key:"tick",value:function(e){return this.simulation.tick(e),this.getResult()}},{key:"restart",value:function(){this.simulation.restart()}},{key:"setFixedPosition",value:function(e,t){var n=this.context.nodes.find((function(t){return t.id===e}));n&&t.forEach((function(e,t){"number"!==typeof e&&null!==e||(n[["fx","fy","fz"][t]]=e)}))}},{key:"getOptions",value:function(e){var t,n,r=xR({},this.options,e);return r.collide&&void 0===(null===(t=r.collide)||void 0===t?void 0:t.radius)&&(r.collide=r.collide||{},r.collide.radius=null!==(n=r.nodeSize)&&void 0!==n?n:10),void 0===r.iterations&&(r.link&&void 0===r.link.iterations&&(r.iterations=r.link.iterations),r.collide&&void 0===r.collide.iterations&&(r.iterations=r.collide.iterations)),this.context.options=r,r}},{key:"genericLayout",value:function(e,t,n){var r;return Nx(this,void 0,void 0,u().mark((function i(){var a,o,s,l,c,h=this;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=this.getOptions(n),o=t.getAllNodes().map((function(e){var t=e.id,n=e.data;return Object.assign(Object.assign({id:t},n),CL(n.data,h.config.inputNodeAttrs))})),s=t.getAllEdges().map((function(e){return Object.assign({},e)})),Object.assign(this.context,{assign:e,nodes:o,edges:s,graph:t}),l=new Promise((function(e){h.resolver=e})),(c=this.setSimulation(a)).nodes(o),null===(r=c.force("link"))||void 0===r||r.links(s),i.abrupt("return",l);case 9:case"end":return i.stop()}}),i,this)})))}},{key:"getResult",value:function(){var e=this,t=this.context,n=t.assign,r=t.nodes,i=t.edges,a=t.graph,o=r.map((function(t){return{id:t.id,data:Object.assign(Object.assign({},t.data),CL(t,e.config.outputNodeAttrs))}})),s=i.map((function(e){var t=e.id,n=e.source,r=e.target,i=e.data;return{id:t,source:"object"===typeof n?n.id:n,target:"object"===typeof r?r.id:r,data:i}}));return n&&o.forEach((function(e){return a.mergeNodeData(e.id,e.data)})),{nodes:o,edges:s}}},{key:"initSimulation",value:function(){return Pz()}},{key:"setSimulation",value:function(e){var t=this,n=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=n.on("tick",(function(){var n;return null===(n=e.onTick)||void 0===n?void 0:n.call(e,t.getResult())})).on("end",(function(){var e;return null===(e=t.resolver)||void 0===e?void 0:e.call(t,t.getResult())}))),zz(n,this.config.simulationAttrs.map((function(t){return[t,e[t]]}))),Object.entries(this.forceMap).forEach((function(t){var r=x(t,2),i=r[0],a=r[1],o=i;if(e[i]){var s=n.force(o);s||(s=a(),n.force(o,s)),zz(s,Object.entries(e[o]))}else n.force(o,null)})),n}}])}(),zz=function(e,t){return t.reduce((function(t,n){var r=x(n,2),i=r[0],a=r[1];return t[i]&&void 0!==a?t[i].call(e,a):t}),e)},Gz=n(4640),Hz=n.n(Gz),jz=function(){return p((function e(t){v(this,e),this.id="dagre",this.options={},Object.assign(this.options,e.defaultOptions,t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t)));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericDagreLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.nodeSize,(a=new Gz.graphlib.Graph).setGraph(n),a.setDefaultEdgeLabel((function(){return{}})),o=t.getAllNodes(),s=t.getAllEdges(),[].concat(I(o),I(s)).some((function(e){return kx(e.id)}))&&console.error("Dagre layout only support string id, it will convert number to string."),t.getAllNodes().forEach((function(e){var t=e.id,n=Object.assign({},e.data);if(void 0!==i){var r=x(BU(PE(i)?i(e):i),2),o=r[0],s=r[1];Object.assign(n,{width:o,height:s})}a.setNode(t.toString(),n)})),t.getAllEdges().forEach((function(e){var t=e.id,n=e.source,r=e.target;a.setEdge(n.toString(),r.toString(),{id:t})})),Hz().layout(a),l={nodes:[],edges:[]},a.nodes().forEach((function(n){var r=a.node(n);l.nodes.push({id:n,data:r}),e&&t.mergeNodeData(n,r)})),a.edges().forEach((function(n){var r=a.edge(n),i=r.id,o=Rx(r,["id"]),s=n.v,u=n.w;l.edges.push({id:i,source:s,target:u,data:o}),e&&t.mergeEdgeData(i,o)})),r.abrupt("return",l);case 14:case"end":return r.stop()}}),r)})))}}])}();jz.defaultOptions={};var Vz=function(){function e(t){v(this,e),this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}return p(e,[{key:"distanceTo",value:function(e){var t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}},{key:"setPos",value:function(e,t){this.rx=e,this.ry=t}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(e){var t=e.rx-this.rx,n=e.ry-this.ry,r=Math.hypot(t,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(e.degree+1)/r;this.fx+=i*t/r,this.fy+=i*n/r}},{key:"in",value:function(e){return e.contains(this.rx,this.ry)}},{key:"add",value:function(t){var n=this.mass+t.mass;return new e({rx:(this.rx*this.mass+t.rx*t.mass)/n,ry:(this.ry*this.mass+t.ry*t.mass)/n,mass:n,degree:this.degree+t.degree})}}])}(),Wz=function(){function e(t){v(this,e),this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}return p(e,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}},{key:"NW",value:function(){var t=new e({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return t}},{key:"NE",value:function(){var t=new e({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return t}},{key:"SW",value:function(){var t=new e({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return t}},{key:"SE",value:function(){var t=new e({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return t}}])}(),Xz=function(){function e(t){v(this,e),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}return p(e,[{key:"insert",value:function(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t}},{key:"_putBody",value:function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}},{key:"_isExternal",value:function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}},{key:"updateForce",value:function(e){null!=this.body&&e!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(e)<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e)))}}])}(),Yz={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},qz=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Yz),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericForceAtlas2Layout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericForceAtlas2Layout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericForceAtlas2Layout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w,k,S,_,M;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.getAllEdges(),a=t.getAllNodes(),o=this.formatOptions(n,a.length),s=o.width,l=o.height,c=o.prune,h=o.maxIteration,d=o.nodeSize,f=o.center,(null===a||void 0===a?void 0:a.length)&&1!==a.length){r.next=6;break}return r.abrupt("return",qU(t,e,f));case 6:if(p=a.map((function(e){return VU(e,[s,l])})),v=i.filter((function(e){return e.source!==e.target})),g=new yI({nodes:p,edges:v}),m=this.getSizes(g,d),this.run(g,t,h,m,e,o),c){for(y=0;y<v.length;y+=1)b=v[y],x=b.source,E=b.target,w=g.getDegree(x),k=g.getDegree(x),w<=1?(S=g.getNode(E),g.mergeNodeData(x,{x:S.data.x,y:S.data.y})):k<=1&&(_=g.getNode(x),g.mergeNodeData(E,{x:_.data.x,y:_.data.y}));M=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1}),this.run(g,t,100,m,e,M)}return r.abrupt("return",{nodes:p,edges:i});case 13:case"end":return r.stop()}}),r,this)})))}},{key:"getSizes",value:function(e,t){for(var n=e.getAllNodes(),r={},i=0;i<n.length;i+=1){var a=n[i];r[a.id]=HU(t,void 0)(a)}return r}},{key:"formatOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object.assign(Object.assign({},this.options),e),r=n.center,i=n.width,a=n.height,o=n.barnesHut,s=n.prune,u=n.maxIteration,l=n.kr,c=n.kg;return n.width=i||"undefined"===typeof window?i:window.innerWidth,n.height=a||"undefined"===typeof window?a:window.innerHeight,n.center=r||[n.width/2,n.height/2],void 0===o&&t>250&&(n.barnesHut=!0),void 0===s&&t>100&&(n.prune=!0),0!==u||s?0===u&&s&&(n.maxIteration=100,t<=200&&t>100?n.maxIteration=500:t>200&&(n.maxIteration=950)):(n.maxIteration=250,t<=200&&t>100?n.maxIteration=1e3:t>200&&(n.maxIteration=1200)),l||(n.kr=50,t>100&&t<=500?n.kr=20:t>500&&(n.kr=1)),c||(n.kg=20,t>100&&t<=500?n.kg=10:t>500&&(n.kg=1)),n}},{key:"run",value:function(e,t,n,r,i,a){for(var o=a.kr,s=a.barnesHut,u=a.onTick,l=e.getAllNodes(),c=0,h=n,d={},f={},p={},v=0;v<l.length;v+=1){var g=l[v],m=g.data,y=g.id;if(d[y]=[0,0],s){var b={id:v,rx:m.x,ry:m.y,mass:1,g:o,degree:e.getDegree(y)};p[y]=new Vz(b)}}for(;h>0;)c=this.oneStep(e,{iter:h,preventOverlapIters:50,krPrime:100,sg:c,forces:d,preForces:f,bodies:p,sizes:r},a),h--,null===u||void 0===u||u({nodes:l,edges:t.getAllEdges()});return e}},{key:"oneStep",value:function(e,t,n){for(var r=t.iter,i=t.preventOverlapIters,a=t.krPrime,o=t.sg,s=t.preForces,u=t.bodies,l=t.sizes,c=t.forces,h=n.preventOverlap,d=n.barnesHut,f=e.getAllNodes(),p=0;p<f.length;p+=1){var v=f[p].id;s[v]=I(c[v]),c[v]=[0,0]}return c=this.getAttrForces(e,r,i,l,c,n),c=d&&(h&&r>i||!h)?this.getOptRepGraForces(e,c,u,n):this.getRepGraForces(e,r,i,c,a,l,n),this.updatePos(e,c,s,o,n)}},{key:"getAttrForces",value:function(e,t,n,r,i,a){for(var o=a.preventOverlap,s=a.dissuadeHubs,u=a.mode,l=a.prune,c=e.getAllEdges(),h=0;h<c.length;h+=1){var d=c[h],f=d.source,p=d.target,v=e.getNode(f),g=e.getNode(p),m=e.getDegree(f),y=e.getDegree(p);if(!l||!(m<=1||y<=1)){var b=[g.data.x-v.data.x,g.data.y-v.data.y],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,o&&t<n&&(x=x-r[f]-r[p]);var E=x,w=E;"linlog"===u&&(w=E=Math.log(1+x)),s&&(E=x/m,w=x/y),o&&t<n&&x<=0?(E=0,w=0):o&&t<n&&x>0&&(E=x,w=x),i[f][0]+=E*b[0],i[p][0]-=w*b[0],i[f][1]+=E*b[1],i[p][1]-=w*b[1]}}return i}},{key:"getOptRepGraForces",value:function(e,t,n,r){for(var i=r.kg,a=r.center,o=r.prune,s=e.getAllNodes(),u=s.length,l=9e10,c=-9e10,h=9e10,d=-9e10,f=0;f<u;f+=1){var p=s[f],v=p.id,g=p.data;o&&e.getDegree(v)<=1||(n[v].setPos(g.x,g.y),g.x>=c&&(c=g.x),g.x<=l&&(l=g.x),g.y>=d&&(d=g.y),g.y<=h&&(h=g.y))}for(var m=Math.max(c-l,d-h),y=new Wz({xmid:(c+l)/2,ymid:(d+h)/2,length:m,massCenter:a,mass:u}),b=new Xz(y),x=0;x<u;x+=1){var E=s[x].id;o&&e.getDegree(E)<=1||n[E].in(y)&&b.insert(n[E])}for(var w=0;w<u;w+=1){var k=s[w],S=k.id,_=k.data,M=e.getDegree(S);if(!(o&&M<=1)){n[S].resetForce(),b.updateForce(n[S]),t[S][0]-=n[S].fx,t[S][1]-=n[S].fy;var T=[_.x-a[0],_.y-a[1]],A=Math.hypot(T[0],T[1]);A=A<1e-4?1e-4:A,T[0]=T[0]/A,T[1]=T[1]/A;var C=i*(M+1);t[S][0]-=C*T[0],t[S][1]-=C*T[1]}}return t}},{key:"getRepGraForces",value:function(e,t,n,r,i,a,o){for(var s=o.preventOverlap,u=o.kr,l=o.kg,c=o.center,h=o.prune,d=e.getAllNodes(),f=d.length,p=0;p<f;p+=1){for(var v=d[p],g=e.getDegree(v.id),m=p+1;m<f;m+=1){var y=d[m],b=e.getDegree(y.id);if(!h||!(g<=1||b<=1)){var x=[y.data.x-v.data.x,y.data.y-v.data.y],E=Math.hypot(x[0],x[1]);E=E<1e-4?1e-4:E,x[0]=x[0]/E,x[1]=x[1]/E,s&&t<n&&(E=E-a[v.id]-a[y.id]);var w=u*(g+1)*(b+1)/E;s&&t<n&&E<0?w=i*(g+1)*(b+1):s&&t<n&&0===E?w=0:s&&t<n&&E>0&&(w=u*(g+1)*(b+1)/E),r[v.id][0]-=w*x[0],r[y.id][0]+=w*x[0],r[v.id][1]-=w*x[1],r[y.id][1]+=w*x[1]}}var k=[v.data.x-c[0],v.data.y-c[1]],S=Math.hypot(k[0],k[1]);k[0]=k[0]/S,k[1]=k[1]/S;var _=l*(g+1);r[v.id][0]-=_*k[0],r[v.id][1]-=_*k[1]}return r}},{key:"updatePos",value:function(e,t,n,r,i){for(var a=i.ks,o=i.tao,s=i.prune,u=i.ksmax,l=e.getAllNodes(),c=l.length,h=[],d=[],f=0,p=0,v=r,g=0;g<c;g+=1){var m=l[g].id,y=e.getDegree(m);if(!(s&&y<=1)){var b=[t[m][0]-n[m][0],t[m][1]-n[m][1]],x=Math.hypot(b[0],b[1]),E=[t[m][0]+n[m][0],t[m][1]+n[m][1]],w=Math.hypot(E[0],E[1]);h[g]=x,d[g]=w/2,f+=(y+1)*h[g],p+=(y+1)*d[g]}}var k=v;v=o*p/f,0!==k&&(v=v>1.5*k?1.5*k:v);for(var S=0;S<c;S+=1){var _=l[S],M=_.id,T=_.data,A=e.getDegree(M);if(!(s&&A<=1)&&(!kx(T.fx)||!kx(T.fy))){var C=a*v/(1+v*Math.sqrt(h[S])),P=Math.hypot(t[M][0],t[M][1]),R=u/(P=P<1e-4?1e-4:P),N=(C=C>R?R:C)*t[M][0],O=C*t[M][1];e.mergeNodeData(M,{x:T.x+N,y:T.y+O})}}return v}}])}(),Kz={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Zz=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},Kz),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericFruchtermanLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericFruchtermanLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;n<t;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach((function(t){return e.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===e.options.dimensions?t.data.z:void 0})})),r}},{key:"genericFruchtermanLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,x,E,w=this;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.running){r.next=2;break}return r.abrupt("return");case 2:if(i=this.formatOptions(n),a=i.dimensions,o=i.width,s=i.height,l=i.center,c=i.clustering,h=i.nodeClusterBy,d=i.maxIteration,f=i.onTick,p=t.getAllNodes(),v=t.getAllEdges(),null===p||void 0===p?void 0:p.length){r.next=10;break}return g={nodes:[],edges:v},this.lastResult=g,r.abrupt("return",g);case 10:if(1!==p.length){r.next=15;break}return e&&t.mergeNodeData(p[0].id,{x:l[0],y:l[1],z:3===a?l[2]:void 0}),m={nodes:[Object.assign(Object.assign({},p[0]),{data:Object.assign(Object.assign({},p[0].data),{x:l[0],y:l[1],z:3===a?l[2]:void 0})})],edges:v},this.lastResult=m,r.abrupt("return",m);case 15:if(y=p.map((function(e){return VU(e,[o,s])})),b=new yI({nodes:y,edges:v}),x={},c&&y.forEach((function(e){var t=e.data[h];x[t]||(x[t]={name:t,cx:0,cy:0,count:0})})),this.lastLayoutNodes=y,this.lastLayoutEdges=v,this.lastAssign=e,this.lastGraph=b,this.lastOptions=i,this.lastClusterMap=x,"undefined"!==typeof window){r.next=27;break}return r.abrupt("return");case 27:return E=0,r.abrupt("return",new Promise((function(n){w.timeInterval=window.setInterval((function(){w.running?(w.runOneStep(b,x,i),e&&y.forEach((function(e){var n=e.id,r=e.data;return t.mergeNodeData(n,{x:r.x,y:r.y,z:3===a?r.z:void 0})})),null===f||void 0===f||f({nodes:y,edges:v}),++E>=d&&(window.clearInterval(w.timeInterval),n({nodes:y,edges:v}))):n({nodes:y,edges:v})}),0),w.running=!0})));case 29:case"end":return r.stop()}}),r,this)})))}},{key:"formatOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},this.options),e),n=t.clustering,r=t.nodeClusterBy,i=t.center,a=t.width,o=t.height;return t.width=a||"undefined"===typeof window?a:window.innerWidth,t.height=o||"undefined"===typeof window?o:window.innerHeight,t.center=i||[t.width/2,t.height/2],t.clustering=n&&!!r,t}},{key:"runOneStep",value:function(e,t,n){var r=n.dimensions,i=n.height,a=n.width,o=n.gravity,s=n.center,u=n.speed,l=n.clustering,c=n.nodeClusterBy,h=n.clusterGravity,d=i*a,f=Math.sqrt(d)/10,p=e.getAllNodes(),v=d/(p.length+1),g=Math.sqrt(v),m={};if(this.applyCalculate(e,m,g,v),l){for(var y in t)t[y].cx=0,t[y].cy=0,t[y].count=0;for(var b in p.forEach((function(e){var n=e.data,r=t[n[c]];kx(n.x)&&(r.cx+=n.x),kx(n.y)&&(r.cy+=n.y),r.count++})),t)t[b].cx/=t[b].count,t[b].cy/=t[b].count;var x=h||o;p.forEach((function(e,n){var r=e.id,i=e.data;if(kx(i.x)&&kx(i.y)){var a=t[i[c]],o=Math.sqrt((i.x-a.cx)*(i.x-a.cx)+(i.y-a.cy)*(i.y-a.cy)),s=g*x;m[r].x-=s*(i.x-a.cx)/o,m[r].y-=s*(i.y-a.cy)/o}}))}p.forEach((function(e,t){var n=e.id,i=e.data;if(kx(i.x)&&kx(i.y)){var a=.01*g*o;m[n].x-=a*(i.x-s[0]),m[n].y-=a*(i.y-s[1]),3===r&&(m[n].z-=a*(i.z-s[2]))}})),p.forEach((function(t,n){var i=t.id,a=t.data;if(kx(a.fx)&&kx(a.fy))return a.x=a.fx,a.y=a.fy,void(3===r&&(a.z=a.fz));if(kx(a.x)&&kx(a.y)){var o=Math.sqrt(m[i].x*m[i].x+m[i].y*m[i].y+(3===r?m[i].z*m[i].z:0));if(o>0){var s=Math.min(f*(u/800),o);e.mergeNodeData(i,{x:a.x+m[i].x/o*s,y:a.y+m[i].y/o*s,z:3===r?a.z+m[i].z/o*s:void 0})}}}))}},{key:"applyCalculate",value:function(e,t,n,r){this.calRepulsive(e,t,r),this.calAttractive(e,t,n)}},{key:"calRepulsive",value:function(e,t,n){var r=this,i=e.getAllNodes();i.forEach((function(e,a){var o=e.data,s=e.id;t[s]={x:0,y:0,z:0},i.forEach((function(e,i){var u=e.data,l=e.id;if(!(a<=i)&&kx(o.x)&&kx(u.x)&&kx(o.y)&&kx(u.y)){var c=o.x-u.x,h=o.y-u.y,d=3===r.options.dimensions?o.z-u.z:0,f=c*c+h*h+d*d;0===f&&(f=1,c=.01,h=.01,d=.01);var p=n/f,v=c*p,g=h*p,m=d*p;t[s].x+=v,t[s].y+=g,t[l].x-=v,t[l].y-=g,3===r.options.dimensions&&(t[s].z+=m,t[l].z-=m)}}))}))}},{key:"calAttractive",value:function(e,t,n){var r=this;e.getAllEdges().forEach((function(i){var a=i.source,o=i.target;if(a&&o&&a!==o){var s=e.getNode(a).data,u=e.getNode(o).data;if(kx(u.x)&&kx(s.x)&&kx(u.y)&&kx(s.y)){var l=u.x-s.x,c=u.y-s.y,h=3===r.options.dimensions?u.z-s.z:0,d=Math.sqrt(l*l+c*c+h*h)/n,f=l*d,p=c*d,v=h*d;t[a].x+=f,t[a].y+=p,t[o].x-=f,t[o].y-=p,3===r.options.dimensions&&(t[a].z+=v,t[o].z-=v)}}}))}}])}(),Jz={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300},Qz=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="grid",this.options=Object.assign(Object.assign({},Jz),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericGridLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericGridLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericGridLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,I,F,U,B,z,G,H,j,V;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.begin,o=void 0===a?[0,0]:a,s=i.condense,l=i.preventOverlapPadding,c=i.preventOverlap,h=i.rows,d=i.cols,f=i.nodeSpacing,p=i.nodeSize,v=i.width,g=i.height,m=i.position,y=i.sortBy,b=t.getAllNodes(),E=t.getAllEdges(),(w=null===b||void 0===b?void 0:b.length)&&1!==w){r.next=8;break}return r.abrupt("return",qU(t,e,o));case 8:if(k=b.map((function(e){return VU(e)})),"id"===y||Mx(y)&&void 0!==k[0].data[y]||(y="degree"),"degree"===y?k.sort((function(e,n){return t.getDegree(n.id,"both")-t.getDegree(e.id,"both")})):"id"===y?k.sort((function(e,t){return kx(t.id)&&kx(e.id)?t.id-e.id:"".concat(e.id).localeCompare("".concat(t.id))})):k.sort((function(e,t){return t.data[y]-e.data[y]})),S=v||"undefined"===typeof window?v:window.innerWidth,_=g||"undefined"===typeof window?g:window.innerHeight,M=w,T={rows:h,cols:d},null!=h&&null!=d?(T.rows=h,T.cols=d):null!=h&&null==d?(T.rows=h,T.cols=Math.ceil(M/T.rows)):null==h&&null!=d?(T.cols=d,T.rows=Math.ceil(M/T.cols)):(A=Math.sqrt(M*_/S),T.rows=Math.round(A),T.cols=Math.round(S/_*A)),T.rows=Math.max(T.rows,1),T.cols=Math.max(T.cols,1),T.cols*T.rows>M)C=$z(T),P=eG(T),(C-1)*P>=M?$z(T,C-1):(P-1)*C>=M&&eG(T,P-1);else for(;T.cols*T.rows<M;)R=$z(T),((N=eG(T))+1)*R>=M?eG(T,N+1):$z(T,R+1);for(O=s?0:S/T.cols,L=s?0:_/T.rows,(c||f)&&(D=zU(10,f),I=GU(30,p,!1),k.forEach((function(e){e.data.x&&e.data.y||(e.data.x=0,e.data.y=0);var n=t.getNode(e.id),r=x(BU(I(n)||30),2),i=r[0],a=r[1],o=void 0!==D?D(e):l,s=i+o,u=a+o;O=Math.max(O,s),L=Math.max(L,u)}))),F={},U={row:0,col:0},B={},z=0;z<k.length;z++){if(G=k[z],H=void 0,m&&(H=m(t.getNode(G.id))),H&&(void 0!==H.row||void 0!==H.col)){if(void 0===(j={row:H.row,col:H.col}).col)for(j.col=0;tG(F,j);)j.col++;else if(void 0===j.row)for(j.row=0;tG(F,j);)j.row++;B[G.id]=j,nG(F,j)}iG(G,o,O,L,B,T,U,F)}return V={nodes:k,edges:E},e&&k.forEach((function(e){t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),r.abrupt("return",V);case 29:case"end":return r.stop()}}),r,this)})))}}])}(),$z=function(e,t){var n,r=e.rows||5,i=e.cols||5;null==t?n=Math.min(r,i):Math.min(r,i)===e.rows?e.rows=t:e.cols=t;return n},eG=function(e,t){var n,r=e.rows||5,i=e.cols||5;null==t?n=Math.max(r,i):Math.max(r,i)===e.rows?e.rows=t:e.cols=t;return n},tG=function(e,t){return e["c-".concat(t.row,"-").concat(t.col)]||!1},nG=function(e,t){return e["c-".concat(t.row,"-").concat(t.col)]=!0},rG=function(e,t){var n=e.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},iG=function(e,t,n,r,i,a,o,s){var u,l,c=i[e.id];if(c)u=c.col*n+n/2+t[0],l=c.row*r+r/2+t[1];else{for(;tG(s,o);)rG(a,o);u=o.col*n+n/2+t[0],l=o.row*r+r/2+t[1],nG(s,o),rG(a,o)}e.data.x=u,e.data.y=l},aG=function(e,t,n){try{var r=NB.mul(NB.pow(t,2),-.5),i=r.mean("row"),a=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(a);var s=new OB(r),u=NB.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((function(t){return NB.mul([t],[u]).toJSON()[0].splice(0,e)}))}catch(f){for(var l=[],c=0;c<t.length;c++){var h=Math.random()*n,d=Math.random()*n;l.push([h,d])}return l}},oG={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},sG=function(e,t){for(var n=Object.assign(Object.assign({},oG),t),r=n.positions,i=n.iterations,a=n.width,o=n.k,s=n.speed,u=void 0===s?100:s,l=n.strictRadial,c=n.focusIdx,h=n.radii,d=void 0===h?[]:h,f=n.nodeSizeFunc,p=e.getAllNodes(),v=[],g=a/10,m=0;m<i;m++)r.forEach((function(e,t){v[t]={x:0,y:0}})),uG(p,r,v,o,d,f),lG(r,v,u,l,c,g,a,d);return r},uG=function(e,t,n,r,i,a){t.forEach((function(o,s){n[s]={x:0,y:0},t.forEach((function(t,u){if(s!==u&&i[s]===i[u]){var l=o.x-t.x,c=o.y-t.y,h=Math.sqrt(l*l+c*c);if(0===h){h=1;var d=s>u?1:-1;l=.01*d,c=.01*d}if(h<a(e[s])/2+a(e[u])/2){var f=r*r/h;n[s].x+=l/h*f,n[s].y+=c/h*f}}}))}))},lG=function(e,t,n,r,i,a,o,s){var u=a||o/10;return r&&t.forEach((function(t,n){var r=e[n].x-e[i].x,a=e[n].y-e[i].y,o=Math.sqrt(r*r+a*a),s=a/o,u=-r/o,l=Math.sqrt(t.x*t.x+t.y*t.y),c=Math.acos((s*t.x+u*t.y)/l);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,u*=-1);var h=Math.cos(c)*l;t.x=s*h,t.y=u*h})),e.forEach((function(a,o){if(o!==i){var l=Math.sqrt(t[o].x*t[o].x+t[o].y*t[o].y);if(l>0&&o!==i){var c=Math.min(u*(n/800),l);if(a.x+=t[o].x/l*c,a.y+=t[o].y/l*c,r){var h=a.x-e[i].x,d=a.y-e[i].y,f=Math.sqrt(h*h+d*d);h=h/f*s[o],d=d/f*s[o],a.x=e[i].x+h,a.y=e[i].y+d}}}})),e},cG={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},hG=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="radial",this.options=Object.assign(Object.assign({},cG),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericRadialLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericRadialLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericRadialLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,F,U,B,z,G,H,j,V,W,X,Y,q,K,Z;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.width,o=i.height,s=i.center,l=i.focusNode,c=i.unitRadius,h=i.nodeSize,d=i.nodeSpacing,f=i.strictRadial,p=i.preventOverlap,v=i.maxPreventOverlapIteration,g=i.sortBy,m=i.linkDistance,y=void 0===m?50:m,b=i.sortStrength,E=void 0===b?10:b,w=i.maxIteration,k=void 0===w?1e3:w,S=t.getAllNodes(),_=t.getAllEdges(),M=a||"undefined"===typeof window?a:window.innerWidth,T=o||"undefined"===typeof window?o:window.innerHeight,A=s||[M/2,T/2],(null===S||void 0===S?void 0:S.length)&&1!==S.length){r.next=9;break}return r.abrupt("return",qU(t,e,A));case 9:if(C=S[0],!Mx(l)){r.next=21;break}P=0;case 12:if(!(P<S.length)){r.next=19;break}if(S[P].id!==l){r.next=16;break}return C=S[P],r.abrupt("break",19);case 16:P++,r.next=12;break;case 19:r.next=22;break;case 21:C=l||S[0];case 22:return R=pG(S,C.id),N=DB({nodes:S,edges:_},!1),O=LB(N),L=gG(O,R),vG(O,R,L+1),D=O[R],F=M-A[0]>A[0]?A[0]:M-A[0],U=T-A[1]>A[1]?A[1]:T-A[1],0===F&&(F=M/2),0===U&&(U=T/2),B=Math.min(F,U),z=Math.max.apply(Math,I(D)),G=[],H=c||B/z,D.forEach((function(e,t){G[t]=e*H})),j=dG(S,O,y,G,H,g,E),V=fG(j),W=aG(y,j,y),X=W.map((function(e){var t=x(e,2),n=t[0],r=t[1];return{x:(isNaN(n)?Math.random()*y:n)-W[R][0],y:(isNaN(r)?Math.random()*y:r)-W[R][1]}})),this.run(k,X,V,j,G,R),p&&(Y=HU(h,d),q={nodes:S,nodeSizeFunc:Y,positions:X,radii:G,height:T,width:M,strictRadial:Boolean(f),focusIdx:R,iterations:v||200,k:X.length/4.5},X=sG(t,q)),K=[],X.forEach((function(e,t){var n=VU(S[t]);n.data.x=e.x+A[0],n.data.y=e.y+A[1],K.push(n)})),e&&K.forEach((function(e){return t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),Z={nodes:K,edges:_},r.abrupt("return",Z);case 48:case"end":return r.stop()}}),r,this)})))}},{key:"run",value:function(e,t,n,r,i,a){for(var o=0;o<=e;o++){var s=o/e;this.oneIteration(s,t,i,r,n,a)}}},{key:"oneIteration",value:function(e,t,n,r,i,a){var o=1-e;t.forEach((function(s,u){var l=UB(s,{x:0,y:0}),c=0===l?0:1/l;if(u!==a){var h=0,d=0,f=0;t.forEach((function(e,t){if(u!==t){var n=UB(s,e),a=0===n?0:1/n,o=r[t][u];f+=i[u][t],h+=i[u][t]*(e.x+o*(s.x-e.x)*a),d+=i[u][t]*(e.y+o*(s.y-e.y)*a)}}));var p=0===n[u]?0:1/n[u];f*=o,f+=e*p*p,h*=o,h+=e*p*s.x*c,s.x=h/f,d*=o,d+=e*p*s.y*c,s.y=d/f}}))}}])}(),dG=function(e,t,n,r,i,a,o){if(!e)return[];var s=[];if(t){var u={};t.forEach((function(t,l){var c=[];t.forEach((function(t,s){var h,d;if(l===s)c.push(0);else if(r[l]===r[s])if("data"===a)c.push(t*(Math.abs(l-s)*o)/(r[l]/i));else if(a){var f,p;if(u[e[l].id])f=u[e[l].id];else{var v=("id"===a?e[l].id:null===(h=e[l].data)||void 0===h?void 0:h[a])||0;f=Mx(v)?v.charCodeAt(0):v,u[e[l].id]=f}if(u[e[s].id])p=u[e[s].id];else{var g=("id"===a?e[s].id:null===(d=e[s].data)||void 0===d?void 0:d[a])||0;p=Mx(g)?g.charCodeAt(0):g,u[e[s].id]=p}c.push(t*(Math.abs(f-p)*o)/(r[l]/i))}else c.push(t*n/(r[l]/i));else{var m=(n+i)/2;c.push(t*m)}})),s.push(c)}))}return s},fG=function(e){for(var t=e.length,n=e[0].length,r=[],i=0;i<t;i++){for(var a=[],o=0;o<n;o++)0!==e[i][o]?a.push(1/(e[i][o]*e[i][o])):a.push(0);r.push(a)}return r},pG=function(e,t){var n=-1;return e.forEach((function(e,r){e.id===t&&(n=r)})),Math.max(n,0)},vG=function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(var a=0;a<r;a++)e[i][a]!==1/0&&e[t][a]===1/0&&(e[t][a]=n+e[i][a],e[a][t]=n+e[i][a])}for(var o=0;o<r;o++)if(o!==t)for(var s=0;s<r;s++)if(e[o][s]===1/0){var u=Math.abs(e[t][o]-e[t][s]);u=0===u?1:u,e[o][s]=u}},gG=function(e,t){for(var n=0,r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n},mG={center:[0,0],width:300,height:300},yG=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.options=t,this.id="random",this.options=Object.assign(Object.assign({},mG),t)}),[{key:"execute",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericRandomLayout(!1,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(e,t){return Nx(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericRandomLayout(!0,e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericRandomLayout",value:function(e,t,n){return Nx(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign(Object.assign({},this.options),n),a=i.center,o=i.width,s=i.height,l=t.getAllNodes(),.9,c=o||"undefined"===typeof window?o:window.innerWidth,h=s||"undefined"===typeof window?s:window.innerHeight,d=a||[c/2,h/2],f=[],l&&l.forEach((function(e){f.push({id:e.id,data:{x:.9*(Math.random()-.5)*c+d[0],y:.9*(Math.random()-.5)*h+d[1]}})})),e&&f.forEach((function(e){return t.mergeNodeData(e.id,{x:e.data.x,y:e.data.y})})),p={nodes:f,edges:t.getAllEdges()},r.abrupt("return",p);case 12:case"end":return r.stop()}}),r,this)})))}}])}();var bG=new Map;function xG(e,t,n){void 0===n&&(n=128);return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0];bG.has(e)||bG.set(e,function(e){var t,n,r,i=e||1;function a(e,a){++t>i&&(r=n,o(1),++t),n[e]=a}function o(e){t=0,n=Object.create(null),e||(r=Object.create(null))}return o(),{clear:o,has:function(e){return void 0!==n[e]||void 0!==r[e]},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(a(e,t),t):void 0},set:function(e,t){void 0!==n[e]?n[e]=t:a(e,t)}}}(n));var o=bG.get(e);if(o.has(a))return o.get(a);var s=e.apply(this,r);return o.set(a,s),s}}var EG=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},wG=function(e){function t(){var e;return v(this,t),(e=T(this,t,arguments)).id="fishbone",e}return C(t,e),p(t,[{key:"getRoot",value:function(){var e=this.context.model.getRootsData();if(!(IN(e)||e.length>2))return e[0]}},{key:"formatSize",value:function(e){var t="function"===typeof e?e:function(){return e};return function(e){return kN(t(e))}}},{key:"doLayout",value:function(e,t){var n=t.hGap,r=t.getRibSep,i=t.vGap,a=t.nodeSize,o=t.height,s=this.context.model,u=this.formatSize(a),l=u(e)[0]+r(e),c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r+=n*((e.children||[]).length+1),null===(t=e.children)||void 0===t||t.forEach((function(e){var t;null===(t=s.getNodeLikeDatum(e).children)||void 0===t||t.forEach((function(e){var t=s.getNodeLikeDatum(e);r=c(t,r)}))})),r},h=function(e){if(1===e.depth)return l;var t=s.getParentData(e.id,"tree");if(_G(e)){var r=s.getParentData(t.id,"tree"),a=p(e)-p(r);return h(t)+a*n/i}var o=(t.children||[]).indexOf(e.id),f=s.getNodeData((t.children||[]).slice(o));return d(t)-f.reduce((function(e,t){return e+c(t)}),0)-u(t)[0]/2},d=xG((function(e){if(SG(e))return u(e)[0]/2;var t=s.getParentData(e.id,"tree");if(_G(e))return h(e)+c(e)+u(e)[0]/2;var r=p(e)-p(t),a=n/i;return h(e)+r*a}),(function(e){return e.id})),f=function(e){return p(s.getParentData(e,"tree"))},p=xG((function(e){if(SG(e))return o/2;if(_G(e)){var t=s.getParentData(e.id,"tree"),n=t.children.indexOf(e.id);if(0===n)return f(t.id)+i;var r=s.getNodeLikeDatum(t.children[n-1]);if(IN(r.children))return p(r)+i;var a=s.getDescendantsData(r.id);return Math.max.apply(Math,I(a.map((function(e){return _G(e)?f(e.id):p(e)}))))+i}if(IN(e.children))return f(e.id)+i;var u=s.getNodeLikeDatum(e.children.slice(-1)[0]);if(IN(u.children))return p(u)+i;var l=s.getDescendantsData(e.id).slice(-1)[0];return(_G(l)?f(l.id):p(l))+i}),(function(e){return e.id})),v=0,g={nodes:[],edges:[]},m=function(e){var t;null===(t=e.children)||void 0===t||t.forEach((function(e){return m(s.getNodeLikeDatum(e))}));var n=p(e),i=d(e);if(g.nodes.push({id:e.id,x:i,y:n}),!SG(e)){var a=s.getRelatedEdgesData(e.id,"in")[0],o=[h(e),_G(e)?n:f(e.id)];g.edges.push({id:eR(a),controlPoints:[o],relatedNodeId:e.id}),v=Math.max(v,i+r(e)),1===e.depth&&(l=v)}};return m(e),g}},{key:"placeAlterative",value:function(e,t){var n=(t.children||[]).filter((function(e,t){return t%2!==0}));if(0===n.length)return e;var r=this.context.model,i=e.nodes.find((function(e){return e.id===t.id})).y,a=function(e){var t=r.getAncestorsData(e,"tree");if(IN(t))return!1;var i=1===t.length?e:t[t.length-2].id;return n.includes(i)};e.nodes.forEach((function(e){a(e.id)&&(e.y=2*i-e.y)})),e.edges.forEach((function(e){a(e.relatedNodeId)&&(e.controlPoints=e.controlPoints.map((function(e){return[e[0],2*i-e[1]]})))}))}},{key:"rightToLeft",value:function(e,t){return e.nodes.forEach((function(e){return e.x=t.width-e.x})),e.edges.forEach((function(e){e.controlPoints=e.controlPoints.map((function(e){return[t.width-e[0],e[1]]}))})),e}},{key:"execute",value:function(e,n){return EG(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign(Object.assign({},t.defaultOptions),this.options),n),a=i.direction,o=i.nodeSize,s=this.getRoot()){r.next=5;break}return r.abrupt("return",e);case 5:return l=this.formatSize(o),i.vGap||(i.vGap=Math.max.apply(Math,I((e.nodes||[]).map((function(e){return l(e)[1]}))))),i.hGap||(i.hGap=Math.max.apply(Math,I((e.nodes||[]).map((function(e){return l(e)[0]}))))),c=this.doLayout(s,i),this.placeAlterative(c,s),"RL"===a&&(c=this.rightToLeft(c,i)),h=this.context.model,d=[],f=[],c.nodes.forEach((function(e){var t=e.id,n=e.x,r=e.y,i=h.getNodeLikeDatum(t);d.push(kG(i,{x:n,y:r}))})),c.edges.forEach((function(e){var t=e.id,n=e.controlPoints,r=h.getEdgeDatum(t);f.push(kG(r,{controlPoints:n}))})),r.abrupt("return",{nodes:d,edges:f});case 17:case"end":return r.stop()}}),r,this)})))}}])}(bI);wG.defaultOptions={direction:"RL",getRibSep:function(){return 60}};var kG=function(e,t){return Object.assign(Object.assign({},e),{style:Object.assign(Object.assign({},e.style||{}),t)})},SG=function(e){return 0===e.depth},_G=function(e){return(e.depth||(e.depth=0))%2===0},MG=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},TG=function(e){function t(){var e;return v(this,t),(e=T(this,t,arguments)).id="snake",e}return C(t,e),p(t,[{key:"formatSize",value:function(e,t){var n="function"===typeof t?t:function(){return t};return e.reduce((function(e,t){var r=x(kN(n(t))||[0,0],2),i=r[0],a=r[1];return[Math.max(e[0],i),Math.max(e[1],a)]}),[0,0])}},{key:"validate",value:function(e){var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,a={},o={},s={};n.forEach((function(e){a[e.id]=0,o[e.id]=0,s[e.id]=[]})),i.forEach((function(e){a[e.target]++,o[e.source]++,s[e.source].push(e.target)}));var u=new Set,l=function(e){u.has(e)||(u.add(e),s[e].forEach(l))};if(l(n[0].id),u.size!==n.length)return!1;var c=n.filter((function(e){return 0===a[e.id]})),h=n.filter((function(e){return 0===o[e.id]}));return 1===c.length&&1===h.length&&n.filter((function(e){return 1===a[e.id]&&1===o[e.id]})).length===n.length-2}},{key:"execute",value:function(e,n){return MG(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.validate(e)){r.next=2;break}return r.abrupt("return",e);case 2:return a=Object.assign({},t.defaultOptions,this.options,n),o=a.nodeSize,s=a.padding,l=a.sortBy,c=a.cols,h=a.colGap,d=a.rowGap,f=a.clockwise,p=a.width,v=a.height,g=uP(s),m=x(g,4),y=m[0],b=m[1],E=m[2],w=m[3],k=this.formatSize(e.nodes||[],o),S=Math.ceil((e.nodes||[]).length/c),_=h||(p-w-b-c*k[0])/(c-1),((M=d||(v-y-E-S*k[1])/(S-1))===1/0||M<0)&&(M=0),(_===1/0||_<0)&&(_=0),T=l?null===(i=e.nodes)||void 0===i?void 0:i.sort(l):AG(e),A=(T||[]).map((function(e,t){var n=Math.floor(t/c),r=t%c,i=w+(f?n%2===0?r:c-1-r:n%2===0?c-1-r:r)*(k[0]+_)+k[0]/2,a=y+n*(k[1]+M)+k[1]/2;return{id:e.id,style:{x:i,y:a}}})),r.abrupt("return",{nodes:A});case 13:case"end":return r.stop()}}),r,this)})))}}])}(bI);function AG(e){var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,a={},o={};n.forEach((function(e){a[e.id]=0,o[e.id]=[]})),i.forEach((function(e){a[e.target]++,o[e.source].push(e.target)}));var s=[],u=[];n.forEach((function(e){0===a[e.id]&&s.push(e.id)}));for(var l=function(){var e=s.shift(),t=n.find((function(t){return t.id===e}));u.push(t),o[e].forEach((function(e){a[e]--,0===a[e]&&s.push(e)}))};s.length>0;)l();return u}TG.defaultOptions={padding:0,cols:5,clockwise:!0};var CG=function(e,t,n){if(!cE(e)&&!mR(e))return e;var r=n;return TL(e,(function(e,n){r=t(r,e,n)})),r},PG=function(e,t){return CG(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},RG=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t)}(pR);function NG(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=document.createElement("div");return r.setAttribute("class","g6-".concat(e)),Object.assign(r.style,{position:"absolute",display:"block"}),t&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function OG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document.body,a=document.getElementById(e);a&&a.remove();var o=document.createElement(t);return o.innerHTML=r,o.id=e,Object.assign(o.style,n),i.appendChild(o),o}var LG=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},DG=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).$element=NG("background"),r.context.canvas.getContainer().prepend(r.$element),r.update(n),r}return C(t,e),p(t,[{key:"update",value:function(e){var n=this,r=Object.create(null,{update:{get:function(){return Xn(S(t.prototype),"update",n)}}});return LG(this,void 0,void 0,u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.update.call(this,e),Object.assign(this.$element.style,PG(this.options,["key","type"]));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"destroy",value:function(){Xn(S(t.prototype),"destroy",this).call(this),this.$element.remove()}}])}(RG);function IG(e,t,n,r,i,a){var o=n-e,s=r-t,u=i-e,l=a-t,c=u*o+l*s,h=0;h=c<=0||(c=(u=o-u)*o+(l=s-l)*s)<=0?0:c*c/(o*o+s*s);var d=u*u+l*l-h;return d<0?0:d}function FG(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)}function UG(e,t,n,r,i){return FG(e,t,n,r)<i*i}function BG(e){var t=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),r=Math.min(e.y1,e.y2),i=Math.max(e.y1,e.y2);return{x:t,y:r,x2:n,y2:i,width:n-t,height:i-r}}DG.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};var zG,GG=function(){function e(t,n,r,i){v(this,e),this.x1=t,this.y1=n,this.x2=r,this.y2=i}return p(e,[{key:"equals",value:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}},{key:"draw",value:function(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}},{key:"toString",value:function(){return"Line(from=(".concat(this.x1,",").concat(this.y1,"),to=(").concat(this.x2,",").concat(this.y2,"))")}},{key:"cuts",value:function(e,t){return this.y1!==this.y2&&(!(t<this.y1&&t<=this.y2||t>this.y1&&t>=this.y2)&&(!(e>this.x1&&e>=this.x2)&&(e<this.x1&&e<=this.x2||e<=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1))))}},{key:"distSquare",value:function(e,t){return IG(this.x1,this.y1,this.x2,this.y2,e,t)}},{key:"ptClose",value:function(e,t,n){if(this.x1<this.x2){if(e<this.x1-n||e>this.x2+n)return!1}else if(e<this.x2-n||e>this.x1+n)return!1;if(this.y1<this.y2){if(t<this.y1-n||t>this.y2+n)return!1}else if(t<this.y2-n||t>this.y1+n)return!1;return!0}}],[{key:"from",value:function(t){return new e(t.x1,t.y1,t.x2,t.y2)}}])}();!function(e){e[e.POINT=1]="POINT",e[e.PARALLEL=2]="PARALLEL",e[e.COINCIDENT=3]="COINCIDENT",e[e.NONE=4]="NONE"}(zG||(zG={}));var HG,jG=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),this.state=t,this.x=n,this.y=r}));function VG(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var a=n/i,o=r/i;return 0<=a&&a<=1&&0<=o&&o<=1?new jG(zG.POINT,e.x1+a*(e.x2-e.x1),e.y1+a*(e.y2-e.y1)):new jG(zG.NONE)}return new jG(0===n||0===r?zG.COINCIDENT:zG.PARALLEL)}function WG(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var a=n/i,o=r/i;if(0<=a&&a<=1&&0<=o&&o<=1)return a}return Number.POSITIVE_INFINITY}function XG(e,t,n){var r=new Set;return e.width<=0?(r.add(HG.LEFT),r.add(HG.RIGHT)):t<e.x?r.add(HG.LEFT):t>e.x+e.width&&r.add(HG.RIGHT),e.height<=0?(r.add(HG.TOP),r.add(HG.BOTTOM)):n<e.y?r.add(HG.TOP):n>e.y+e.height&&r.add(HG.BOTTOM),r}function YG(e,t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2,o=Array.from(XG(e,i,a));if(0===o.length)return!0;for(var s=XG(e,n,r);0!==s.size;){var u,l=D(o);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(s.has(c))return!1}}catch(f){l.e(f)}finally{l.f()}if(s.has(HG.RIGHT)||s.has(HG.LEFT)){var h=e.x;s.has(HG.RIGHT)&&(h+=e.width),r+=(h-n)*(a-r)/(i-n),n=h}else{var d=e.y;s.has(HG.BOTTOM)&&(d+=e.height),n+=(d-r)*(i-n)/(a-r),r=d}s=XG(e,n,r)}return!0}function qG(e,t){var n=Number.POSITIVE_INFINITY,r=0;function i(e,i,a,o){var s=WG(t,new GG(e,i,a,o));(s=Math.abs(s-.5))>=0&&s<=1&&(r++,s<n&&(n=s))}return i(e.x,e.y,e.x2,e.y),i(e.x,e.y,e.x,e.y2),r>1?n:(i(e.x,e.y2,e.x2,e.y2),r>1?n:(i(e.x2,e.y,e.x2,e.y2),0===r?-1:n))}function KG(e,t){var n=0,r=VG(e,new GG(t.x,t.y,t.x2,t.y));n+=r.state===zG.POINT?1:0;var i=VG(e,new GG(t.x,t.y,t.x,t.y2));n+=i.state===zG.POINT?1:0;var a=VG(e,new GG(t.x,t.y2,t.x2,t.y2));n+=a.state===zG.POINT?1:0;var o=VG(e,new GG(t.x2,t.y,t.x2,t.y2));return{top:r,left:i,bottom:a,right:o,count:n+=o.state===zG.POINT?1:0}}!function(e){e[e.LEFT=0]="LEFT",e[e.TOP=1]="TOP",e[e.RIGHT=2]="RIGHT",e[e.BOTTOM=3]="BOTTOM"}(HG||(HG={}));var ZG=function(){function e(t,n,r,i){v(this,e),this.x=t,this.y=n,this.width=r,this.height=i}return p(e,[{key:"x2",get:function(){return this.x+this.width}},{key:"y2",get:function(){return this.y+this.height}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"radius",get:function(){return Math.max(this.width,this.height)/2}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"add",value:function(e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x+e.width),i=Math.max(this.y2,e.y+e.height);this.x=t,this.y=n,this.width=r-t,this.height=i-n}},{key:"addPoint",value:function(e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x2,e.x),i=Math.max(this.y2,e.y);this.x=t,this.y=n,this.width=r-t,this.height=i-n}},{key:"toString",value:function(){return"Rectangle[x=".concat(this.x,", y=").concat(this.y,", w=").concat(this.width,", h=").concat(this.height,"]")}},{key:"draw",value:function(e){e.rect(this.x,this.y,this.width,this.height)}},{key:"containsPt",value:function(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2}},{key:"area",get:function(){return this.width*this.height}},{key:"intersects",value:function(e){return!(this.area<=0||e.width<=0||e.height<=0)&&(e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2)}},{key:"distSquare",value:function(e,t){if(this.containsPt(e,t))return 0;var n=XG(this,e,t);return n.has(HG.TOP)?n.has(HG.LEFT)?FG(e,t,this.x,this.y):n.has(HG.RIGHT)?FG(e,t,this.x2,this.y):(this.y-t)*(this.y-t):n.has(HG.BOTTOM)?n.has(HG.LEFT)?FG(e,t,this.x,this.y2):n.has(HG.RIGHT)?FG(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):n.has(HG.LEFT)?(this.x-e)*(this.x-e):n.has(HG.RIGHT)?(e-this.x2)*(e-this.x2):0}}],[{key:"from",value:function(t){return new e(t.x,t.y,t.width,t.height)}}])}();var JG=function(){function e(t,n,r){v(this,e),this.cx=t,this.cy=n,this.radius=r}return p(e,[{key:"x",get:function(){return this.cx-this.radius}},{key:"x2",get:function(){return this.cx+this.radius}},{key:"width",get:function(){return 2*this.radius}},{key:"y",get:function(){return this.cy-this.radius}},{key:"y2",get:function(){return this.cy+this.radius}},{key:"height",get:function(){return 2*this.radius}},{key:"containsPt",value:function(e,t){return FG(this.cx,this.cy,e,t)<this.radius*this.radius}},{key:"distSquare",value:function(e,t){var n=FG(this.cx,this.cy,e,t);if(n<this.radius*this.radius)return 0;var r=Math.sqrt(n)-this.radius;return r*r}},{key:"draw",value:function(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI)}}],[{key:"from",value:function(t){return new e(t.cx,t.cy,t.radius)}}])}(),QG=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Float32Array(Math.max(0,o*s)).fill(0);v(this,e),this.pixelGroup=t,this.i=n,this.j=r,this.pixelX=i,this.pixelY=a,this.width=o,this.height=s,this.area=u}return p(e,[{key:"createSub",value:function(t,n){return new e(this.pixelGroup,t.x,t.y,n.x,n.y,t.width,t.height)}},{key:"copy",value:function(t,n){return new e(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,t.width,t.height,t.area)}},{key:"boundX",value:function(e){return e<this.i?this.i:e>=this.width?this.width-1:e}},{key:"boundY",value:function(e){return e<this.j?this.j:e>=this.height?this.height-1:e}},{key:"scaleX",value:function(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}},{key:"scaleY",value:function(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}},{key:"scale",value:function(e){var t=this.scaleX(e.x),n=this.scaleY(e.y),r=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),i=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup));return new ZG(t,n,r-t,i-n)}},{key:"invertScaleX",value:function(e){return Math.round(e*this.pixelGroup+this.pixelX)}},{key:"invertScaleY",value:function(e){return Math.round(e*this.pixelGroup+this.pixelY)}},{key:"addPadding",value:function(e,t){var n=Math.ceil(t/this.pixelGroup),r=this.boundX(e.x-n),i=this.boundY(e.y-n),a=this.boundX(e.x2+n),o=this.boundY(e.y2+n);return new ZG(r,i,a-r,o-i)}},{key:"get",value:function(e,t){return e<0||t<0||e>=this.width||t>=this.height?Number.NaN:this.area[e+t*this.width]}},{key:"inc",value:function(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=n)}},{key:"set",value:function(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=n)}},{key:"incArea",value:function(e,t){if(!(e.width<=0||e.height<=0||0===t)){var n=this.width,r=e.width,i=Math.max(0,e.i),a=Math.max(0,e.j),o=Math.min(e.i+e.width,n),s=Math.min(e.j+e.height,this.height);if(!(s<=0||o<=0||i>=n||s>=this.height))for(var u=a;u<s;u++)for(var l=(u-e.j)*r,c=u*n,h=i;h<o;h++){var d=e.area[h-e.i+l];0!==d&&(this.area[h+c]+=t*d)}}}},{key:"fill",value:function(e){this.area.fill(e)}},{key:"fillArea",value:function(e,t){for(var n=e.x+e.y*this.width,r=0;r<e.height;r++){var i=n+r*this.width;this.area.fill(t,i,i+e.width)}}},{key:"fillHorizontalLine",value:function(e,t,n,r){var i=e+t*this.width;this.area.fill(r,i,i+n)}},{key:"fillVerticalLine",value:function(e,t,n,r){for(var i=e+t*this.width,a=0;a<n;a++)this.area[i+a*this.width]=r}},{key:"clear",value:function(){this.area.fill(0)}},{key:"toString",value:function(){for(var e="",t=0;t<this.height;t++){for(var n=t*this.width,r=0;r<this.width;r++){e+=this.area[n+r].toFixed(1).padStart(6),e+=" "}e+="\n"}return e}},{key:"draw",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(this.width<=0||this.height<=0)){e.save(),t&&e.translate(this.pixelX,this.pixelY);var n=this.area.reduce((function(e,t){return Math.min(e,t)}),Number.POSITIVE_INFINITY),r=this.area.reduce((function(e,t){return Math.max(e,t)}),Number.NEGATIVE_INFINITY),i=function(e){return(e-n)/(r-n)};e.scale(this.pixelGroup,this.pixelGroup);for(var a=0;a<this.width;a++)for(var o=0;o<this.height;o++){var s=this.area[a+o*this.width];e.fillStyle="rgba(0, 0, 0, ".concat(i(s),")"),e.fillRect(a,o,1,1)}e.restore()}}},{key:"drawThreshold",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(this.width<=0||this.height<=0)){e.save(),n&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(var r=0;r<this.width;r++)for(var i=0;i<this.height;i++){var a=this.area[r+i*this.width];e.fillStyle=a>t?"black":"white",e.fillRect(r,i,1,1)}e.restore()}}}],[{key:"fromPixelRegion",value:function(t,n){return new e(n,0,0,t.x,t.y,Math.ceil(t.width/n),Math.ceil(t.height/n))}}])}();function $G(e,t){var n=function(e){return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}};return Array.isArray(e)?e.map(n):n(e)}function eH(e,t,n){return tH(Object.assign(BG(e),{distSquare:function(t,n){return IG(e.x1,e.y1,e.x2,e.y2,t,n)}}),t,n)}function tH(e,t,n){var r=$G(e,n),i=t.scale(r),a=t.createSub(i,r);return function(e,t,n,r){for(var i=n*n,a=0;a<e.height;a++)for(var o=0;o<e.width;o++){var s=r(t.invertScaleX(e.i+o),t.invertScaleY(e.j+a));if(0!==s){if(s<i){var u=n-Math.sqrt(s);e.set(o,a,u*u)}}else e.set(o,a,i)}}(a,t,n,(function(t,n){return e.distSquare(t,n)})),a}function nH(e,t){return{x:e,y:t}}function rH(e,t,n,r){if(0===e.length)return[];var i=function(e){if(e.length<2)return e;var t=0,n=0;return e.forEach((function(e){t+=e.cx,n+=e.cy})),t/=e.length,n/=e.length,e.map((function(e){var r=t-e.cx,i=n-e.cy;return[e,r*r+i*i]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}(e);return i.map((function(e,a){var o=i.slice(0,a);return function(e,t,n,r,i){var a=nH(t.cx,t.cy),o=function(e,t,n){var r=Number.POSITIVE_INFINITY;return t.reduce((function(t,i){var a=FG(e.x,e.y,i.cx,i.cy);if(a>r)return t;var o=new GG(e.x,e.y,i.cx,i.cy),s=function(e,t){return e.reduce((function(e,n){return YG(n,t)&&function(e,t){function n(e,n,r,i){var a=WG(t,new GG(e,n,r,i));return(a=Math.abs(a-.5))>=0&&a<=1?1:0}var r=n(e.x,e.y,e.x2,e.y);return(r+=n(e.x,e.y,e.x,e.y2))>1||(r+=n(e.x,e.y2,e.x2,e.y2))>1||(r+=n(e.x2,e.y,e.x2,e.y2))>0}(n,t)?e+1:e}),0)}(n,o);return a*(s+1)*(s+1)<r&&(t=i,r=a*(s+1)*(s+1)),t}),null)}(a,n,e);if(null==o)return[];var s=function(e,t,n,r){var i=[],a=[];a.push(e);for(var o=!0,s=0;s<n&&o;s++)for(o=!1;!o&&a.length>0;){var u=a.pop(),l=oH(t,u),c=l?KG(u,l):null;if(l&&c&&2===c.count){for(var h=r,d=sH(l,h,c,!0),f=aH(d,a)||aH(d,i),p=iH(d,t);!f&&p&&h>=1;)f=aH(d=sH(l,h/=1.5,c,!0),a)||aH(d,i),p=iH(d,t);if(!d||f||p||(a.push(new GG(u.x1,u.y1,d.x,d.y)),a.push(new GG(d.x,d.y,u.x2,u.y2)),o=!0),!o){var v=aH(d=sH(l,h=r,c,!1),a)||aH(d,i);for(p=iH(d,t);!v&&p&&h>=1;)v=aH(d=sH(l,h/=1.5,c,!1),a)||aH(d,i),p=iH(d,t);d&&!v&&(a.push(new GG(u.x1,u.y1,d.x,d.y)),a.push(new GG(d.x,d.y,u.x2,u.y2)),o=!0),o||i.push(u)}}else o||i.push(u)}for(;a.length>0;)i.push(a.pop());return i}(new GG(a.x,a.y,o.cx,o.cy),e,r,i);return function(e,t){var n=[];for(;e.length>0;){var r=e.pop();if(0===e.length){n.push(r);break}var i=e.pop(),a=new GG(r.x1,r.y1,i.x2,i.y2);oH(t,a)?(n.push(r),e.push(i)):e.push(a)}return n}(s,e)}(t,e,o,n,r)})).flat()}function iH(e,t){return t.some((function(t){return t.containsPt(e.x,e.y)}))}function aH(e,t){return t.some((function(t){return!!UG(t.x1,t.y1,e.x,e.y,.001)||!!UG(t.x2,t.y2,e.x,e.y,.001)}))}function oH(e,t){var n,r=Number.POSITIVE_INFINITY,i=null,a=D(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(YG(o,t)){var s=qG(o,t);s>=0&&s<r&&(i=o,r=s)}}}catch(u){a.e(u)}finally{a.f()}return i}function sH(e,t,n,r){var i=n.top,a=n.left,o=n.bottom,s=n.right;if(r){if(a.state===zG.POINT){if(i.state===zG.POINT)return nH(e.x-t,e.y-t);if(o.state===zG.POINT)return nH(e.x-t,e.y2+t);var u=e.width*e.height;return e.width*(.5*(a.y-e.y+(s.y-e.y)))<.5*u?a.y>s.y?nH(e.x-t,e.y-t):nH(e.x2+t,e.y-t):a.y<s.y?nH(e.x-t,e.y2+t):nH(e.x2+t,e.y2+t)}if(s.state===zG.POINT){if(i.state===zG.POINT)return nH(e.x2+t,e.y-t);if(o.state===zG.POINT)return nH(e.x2+t,e.y2+t)}var l=e.height*e.width;return e.height*(.5*(i.x-e.x+(s.x-e.x)))<.5*l?i.x>o.x?nH(e.x-t,e.y-t):nH(e.x-t,e.y2+t):i.x<o.x?nH(e.x2+t,e.y-t):nH(e.x2+t,e.y2+t)}if(a.state===zG.POINT){if(i.state===zG.POINT)return nH(e.x2+t,e.y2+t);if(o.state===zG.POINT)return nH(e.x2+t,e.y-t);var c=e.height*e.width;return e.width*(.5*(a.y-e.y+(s.y-e.y)))<.5*c?a.y>s.y?nH(e.x2+t,e.y2+t):nH(e.x-t,e.y2+t):a.y<s.y?nH(e.x2+t,e.y-t):nH(e.x-t,e.y-t)}if(s.state===zG.POINT){if(i.state===zG.POINT)return nH(e.x-t,e.y2+t);if(o.state===zG.POINT)return nH(e.x-t,e.y-t)}var h=e.height*e.width;return e.height*(.5*(i.x-e.x+(s.x-e.x)))<.5*h?i.x>o.x?nH(e.x2+t,e.y2+t):nH(e.x2+t,e.y-t):i.x<o.x?nH(e.x-t,e.y2+t):nH(e.x-t,e.y-t)}function uH(e,t,n,r){if(!(e.closed?n<e.length:n<e.length-1))return!1;for(var i=e.get(t),a=e.get(n+1),o=t+1;o<=n;o++){var s=e.get(o);if(IG(i.x,i.y,a.x,a.y,s.x,s.y)>r)return!1}return!0}function lH(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){if(e<0||t.length<3)return t;for(var n=[],r=0,i=e*e;r<t.length;){for(var a=r+1;uH(t,r,a,i);)a++;n.push(t.get(r)),r=a}return new fH(n)}}function cH(e,t){switch(e){case-2:return(((3-t)*t-3)*t+1)/6;case-1:return((3*t-6)*t*t+4)/6;case 0:return(((-3*t+3)*t+3)*t+1)/6;case 1:return t*t*t/6;default:throw new Error("unknown error")}}function hH(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;function t(e,t,n){for(var r=0,i=0,a=-2;a<=1;a++){var o=e.get(t+a),s=cH(a,n);r+=s*o.x,i+=s*o.y}return{x:r,y:i}}return function(n){if(n.length<3)return n;var r=[],i=n.closed,a=n.length+3-1+(i?0:2);r.push(t(n,2-(i?0:2),0));for(var o=2-(i?0:2);o<a;o++)for(var s=1;s<=e;s++)r.push(t(n,o,s/e));return new fH(r)}}function dH(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return function(t){var n=e,r=t.length;if(n>1)for(r=Math.floor(t.length/n);r<3&&n>1;)n-=1,r=Math.floor(t.length/n);for(var i=[],a=0,o=0;o<r;o++,a+=n)i.push(t.get(a));return new fH(i)}}var fH=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v(this,e),this.points=t,this.closed=n}),[{key:"get",value:function(e){var t=e,n=this.points.length;return e<0?this.closed?this.get(e+n):this.points[0]:e>=n?this.closed?this.get(e-n):this.points[n-1]:this.points[t]}},{key:"length",get:function(){return this.points.length}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=this.points;if(0===t.length)return"";var n,r="function"===typeof e?e:function(e){if(!Number.isFinite(e))return function(e){return e};if(0===e)return Math.round;var t=Math.pow(10,e);return function(e){return Math.round(e*t)/t}}(e),i="M",a=D(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i+="".concat(r(o.x),",").concat(r(o.y)," L")}}catch(s){a.e(s)}finally{a.f()}return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}},{key:"draw",value:function(e){var t=this.points;if(0!==t.length){e.beginPath(),e.moveTo(t[0].x,t[0].y);var n,r=D(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.lineTo(i.x,i.y)}}catch(a){r.e(a)}finally{r.f()}this.closed&&e.closePath()}}},{key:"sample",value:function(e){return dH(e)(this)}},{key:"simplify",value:function(e){return lH(e)(this)}},{key:"bSplines",value:function(e){return hH(e)(this)}},{key:"apply",value:function(e){return e(this)}},{key:"containsElements",value:function(e){var t=this,n=function(e){if(0===e.length)return null;var t,n=e[0],r=new ZG(n.x,n.y,0,0),i=D(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.addPoint(a)}}catch(o){i.e(o)}finally{i.f()}return r}(this.points);return!!n&&e.every((function(e){return n.containsPt(e.cx,e.cy)&&t.withinArea(e.cx,e.cy)}))}},{key:"withinArea",value:function(e,t){if(0===this.length)return!1;for(var n=0,r=this.points[0],i=new GG(r.x,r.y,r.x,r.y),a=1;a<this.points.length;a++){var o=this.points[a];i.x1=i.x2,i.y1=i.y2,i.x2=o.x,i.y2=o.y,i.cuts(e,t)&&n++}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(e,t)&&n++,n%2===1}}])}(),pH=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;v(this,e),this.count=0,this.arr=[],this.set=new Set,this.arr.length=t}),[{key:"add",value:function(e){this.set.add("".concat(e.x,"x").concat(e.y)),this.arr[this.count++]=e}},{key:"contains",value:function(e){return this.set.has("".concat(e.x,"x").concat(e.y))}},{key:"isFirst",value:function(e){if(0===this.count)return!1;var t=this.arr[0];return null!=t&&t.x===e.x&&t.y===e.y}},{key:"path",value:function(){return new fH(this.arr.slice(0,this.count))}},{key:"clear",value:function(){this.set.clear(),this.count=0}},{key:"get",value:function(e){return this.arr[e]}},{key:"length",get:function(){return this.count}}])}(),vH=0,gH=1,mH=2,yH=3;function bH(e,t){var n=2*(Math.floor(e.width)+Math.floor(e.height)),r=new pH(n);function i(n,r,i,a){var o=e.get(n,r);return Number.isNaN(o)?Number.NaN:o>t?i+a:i}function a(e,t){var n=vH;return n=i(e,t,n,1),n=i(e+1,t,n,2),n=i(e,t+1,n,4),n=i(e+1,t+1,n,8),Number.isNaN(n)?-1:n}var o=gH;function s(t,n){for(var i=t,s=n,u=e.invertScaleX(i),l=e.invertScaleY(s),c=0;c<e.width*e.height;c++){var h={x:u,y:l};if(r.contains(h)){if(r.isFirst(h))return!0}else r.add(h);var d=a(i,s);switch(d){case-1:return!0;case 0:case 3:case 2:case 7:o=mH;break;case 12:case 14:case 4:o=yH;break;case 6:o=o===vH?yH:mH;break;case 1:case 13:case 5:o=vH;break;case 9:o=o===mH?vH:gH;break;case 10:case 8:case 11:o=gH;break;default:return console.warn("Marching squares invalid state: "+d),!0}switch(o){case vH:s--,l-=e.pixelGroup;break;case gH:s++,l+=e.pixelGroup;break;case yH:i--,u-=e.pixelGroup;break;case mH:i++,u+=e.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+d),!0}}return!0}for(var u=0;u<e.width;u++)for(var l=0;l<e.height;l++)if(!(e.get(u,l)<=t)){var c=a(u,l);if(!(c<0||15===c)&&s(u,l))return r.path()}return null}var xH,EH={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function wH(e){return null!=e&&"number"===typeof e.radius}function kH(e,t){if(wH(e)!==wH(t))return!1;if(wH(e)){var n=t;return e.cx===n.cx&&e.cy===n.cy&&e.radius===n.radius}var r=t;return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height}!function(e){e[e.MEMBERS=0]="MEMBERS",e[e.NON_MEMBERS=1]="NON_MEMBERS",e[e.EDGES=2]="EDGES"}(xH||(xH={}));var SH=function(){return p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new ZG(0,0,0,0),this.potentialArea=new QG(1,0,0,0,0,0,0),this.o=Object.assign({},EH,t)}),[{key:"pushMember",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){this.dirty.add(xH.MEMBERS);for(var r=0,i=t;r<i.length;r++){var a=i[r];this.members.push({raw:a,obj:wH(a)?JG.from(a):ZG.from(a),area:null})}}}},{key:"removeMember",value:function(e){var t=this.members.findIndex((function(t){return kH(t.raw,e)}));return!(t<0)&&(this.members.splice(t,1),this.dirty.add(xH.MEMBERS),!0)}},{key:"removeNonMember",value:function(e){var t=this.nonMembers.findIndex((function(t){return kH(t.raw,e)}));return!(t<0)&&(this.nonMembers.splice(t,1),this.dirty.add(xH.NON_MEMBERS),!0)}},{key:"removeEdge",value:function(e){var t=this.edges.findIndex((function(t){return t.obj.equals(e)}));return!(t<0)&&(this.edges.splice(t,1),this.dirty.add(xH.NON_MEMBERS),!0)}},{key:"pushNonMember",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){this.dirty.add(xH.NON_MEMBERS);for(var r=0,i=t;r<i.length;r++){var a=i[r];this.nonMembers.push({raw:a,obj:wH(a)?JG.from(a):ZG.from(a),area:null})}}}},{key:"pushEdge",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){this.dirty.add(xH.EDGES);for(var r=0,i=t;r<i.length;r++){var a=i[r];this.edges.push({raw:a,obj:GG.from(a),area:null})}}}},{key:"update",value:function(){var e=this,t=this.dirty.has(xH.MEMBERS),n=this.dirty.has(xH.NON_MEMBERS),r=this.dirty.has(xH.EDGES);this.dirty.clear();var i=this.members.map((function(e){return e.obj}));if(this.o.virtualEdges&&(t||n)){var a=rH(i,this.nonMembers.map((function(e){return e.obj})),this.o.maxRoutingIterations,this.o.morphBuffer),o=new Map(this.virtualEdges.map((function(e){return[e.obj.toString(),e.area]})));this.virtualEdges=a.map((function(e){var t;return{raw:e,obj:e,area:null!==(t=o.get(e.toString()))&&void 0!==t?t:null}})),r=!0}var s=!1;if(t||r){var u=function(e,t){if(0===e.length)return new ZG(0,0,0,0);var n,r=ZG.from(e[0]),i=D(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=D(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.add(BG(u))}}catch(l){s.e(l)}finally{s.f()}return r}(i,this.virtualEdges.concat(this.edges).map((function(e){return e.obj}))),l=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,c=ZG.from($G(u,l));c.equals(this.activeRegion)||(s=!0,this.activeRegion=c)}if(s){var h=Math.ceil(this.activeRegion.width/this.o.pixelGroup),d=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=QG.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach((function(e){return e.area=null})),this.nonMembers.forEach((function(e){return e.area=null})),this.edges.forEach((function(e){return e.area=null})),this.virtualEdges.forEach((function(e){return e.area=null}))):h===this.potentialArea.width&&d===this.potentialArea.height||(this.potentialArea=QG.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}var f=new Map,p=function(e){if(e.area){var t="".concat(e.obj.width,"x").concat(e.obj.height,"x").concat(e.obj instanceof ZG?"R":"C");f.set(t,e.area)}},v=function(t){if(!t.area){var n="".concat(t.obj.width,"x").concat(t.obj.height,"x").concat(t.obj instanceof ZG?"R":"C");if(f.has(n)){var r=f.get(n);t.area=e.potentialArea.copy(r,{x:t.obj.x-e.o.nodeR1,y:t.obj.y-e.o.nodeR1})}else{var i=t.obj instanceof ZG?function(e,t,n){var r=t.scale(e),i=t.addPadding(r,n),a=t.createSub(i,{x:e.x-n,y:e.y-n}),o=r.x-i.x,s=r.y-i.y,u=i.x2-r.x2,l=i.y2-r.y2,c=i.width-o-u,h=i.height-s-l,d=n*n;a.fillArea({x:o,y:s,width:c+1,height:h+1},d);for(var f=[0],p=Math.max(s,o,u,l),v=t.invertScaleX(r.x+r.width/2),g=1;g<p;g++){var m=t.invertScaleY(r.y-g),y=e.distSquare(v,m);if(!(y<d))break;var b=n-Math.sqrt(y);f.push(b*b)}for(var x=[],E=Math.max(o,u),w=Math.max(s,u),k=1;k<E;k++){for(var S=t.invertScaleX(r.x-k),_=[],M=1;M<w;M++){var T=t.invertScaleY(r.y-M),A=e.distSquare(S,T);if(A<d){var C=n-Math.sqrt(A);_.push(C*C)}else _.push(0)}x.push(_)}for(var P=1;P<Math.min(s,f.length);P++){var R=f[P];a.fillHorizontalLine(o,s-P,c+1,R)}for(var N=1;N<Math.min(l,f.length);N++){var O=f[N];a.fillHorizontalLine(o,s+h+N,c+1,O)}for(var L=1;L<Math.min(o,f.length);L++){var D=f[L];a.fillVerticalLine(o-L,s,h+1,D)}for(var I=1;I<Math.min(l,f.length);I++){var F=f[I];a.fillVerticalLine(o+c+I,s,h+1,F)}for(var U=1;U<o;U++){for(var B=x[U-1],z=o-U,G=1;G<s;G++)a.set(z,s-G,B[G-1]);for(var H=1;H<l;H++)a.set(z,s+h+H,B[H-1])}for(var j=1;j<u;j++){for(var V=x[j-1],W=o+c+j,X=1;X<s;X++)a.set(W,s-X,V[X-1]);for(var Y=1;Y<l;Y++)a.set(W,s+h+Y,V[Y-1])}return a}(t.obj,e.potentialArea,e.o.nodeR1):tH(t.obj,e.potentialArea,e.o.nodeR1);t.area=i,f.set(n,i)}}};this.members.forEach(p),this.nonMembers.forEach(p),this.members.forEach(v),this.nonMembers.forEach((function(t){e.activeRegion.intersects(t.obj)?v(t):t.area=null})),this.edges.forEach((function(t){t.area||(t.area=eH(t.obj,e.potentialArea,e.o.edgeR1))})),this.virtualEdges.forEach((function(t){t.area||(t.area=eH(t.obj,e.potentialArea,e.o.edgeR1))}))}},{key:"drawMembers",value:function(e){var t,n=D(this.members);try{for(n.s();!(t=n.n()).done;){t.value.obj.draw(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"drawNonMembers",value:function(e){var t,n=D(this.nonMembers);try{for(n.s();!(t=n.n()).done;){t.value.obj.draw(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"drawEdges",value:function(e){var t,n=D(this.edges);try{for(n.s();!(t=n.n()).done;){t.value.obj.draw(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"drawPotentialArea",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.potentialArea.draw(e,t)}},{key:"compute",value:function(){if(0===this.members.length)return new fH([]);this.dirty.size>0&&this.update();var e=this.o,t=this.potentialArea,n=this.members.map((function(e){return e.area})),r=this.virtualEdges.concat(this.edges).map((function(e){return e.area})),i=this.nonMembers.filter((function(e){return null!=e.area})).map((function(e){return e.area})),a=this.members.map((function(e){return e.obj}));return function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=Object.assign({},EH,a),s=o.threshold,u=o.memberInfluenceFactor,l=o.edgeInfluenceFactor,c=o.nonMemberInfluenceFactor,h=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),d=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),f=0;f<o.maxMarchingIterations;f++){if(e.clear(),0!==u){var p,v=u/h,g=D(t);try{for(g.s();!(p=g.n()).done;){var m=p.value;e.incArea(m,v)}}catch(T){g.e(T)}finally{g.f()}}if(0!==l){var y,b=l/d,x=D(n);try{for(x.s();!(y=x.n()).done;){var E=y.value;e.incArea(E,b)}}catch(T){x.e(T)}finally{x.f()}}if(0!==c){var w,k=c/h,S=D(r);try{for(S.s();!(w=S.n()).done;){var _=w.value;e.incArea(_,k)}}catch(T){S.e(T)}finally{S.f()}}var M=bH(e,s);if(M&&i(M))return M;if(s*=.95,f<=.5*o.maxMarchingIterations)u*=1.2,l*=1.2;else{if(!(0!==c&&r.length>0))break;c*=.8}}return new fH([])}(t,n,r,i,(function(e){return e.containsElements(a)}),e)}}])}();var _H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},MH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,xR({},t.defaultOptions,n)])).members=new Map,r.avoidMembers=new Map,r.bubbleSetOptions={},r.drawBubbleSets=function(){var e=r.parseOptions(),t=e.style,n=e.bubbleSetOptions;AC(r.bubbleSetOptions,n)||r.init(),r.bubbleSetOptions=Object.assign({},n);var i=Object.assign(Object.assign({},t),{d:r.getPath()});r.shape?r.shape.update(i):(r.shape=new YN({style:i}),r.context.canvas.appendChild(r.shape))},r.updateBubbleSetsPath=function(e){if(r.shape){var t=eR(e.data);[].concat(I(r.options.members),I(r.options.avoidMembers)).includes(t)&&r.shape.update(Object.assign(Object.assign({},r.parseOptions().style),{d:r.getPath(t)}))}},r.getPath=function(e){var t=r.context.graph,n=r.options.members,i=I(r.members.keys()),a=r.options.avoidMembers,o=I(r.avoidMembers.keys());if(!e&&AC(n,i)&&AC(a,o))return r.path;var s=hR(i,n,(function(e){return e})),u=s.enter,l=void 0===u?[]:u,c=s.exit,h=void 0===c?[]:c,d=hR(o,a,(function(e){return e})),f=d.enter,p=void 0===f?[]:f,v=d.exit,g=void 0===v?[]:v;e&&(h.push(e),l.push(e));var m=function(e,n,i){e.forEach((function(e){var a=i?r.members:r.avoidMembers,o=i?"pushMember":"pushNonMember",s=i?"removeMember":"removeNonMember";if(n){var u;if("edge"===t.getElementType(e))u=x(AH(t,e),1)[0],r.bubbleSets.pushEdge(u);else u=x(TH(t,e),1)[0],r.bubbleSets[o](u);a.set(e,u)}else{var l=a.get(e);l&&("edge"===t.getElementType(e)?r.bubbleSets.removeEdge(l):r.bubbleSets[s](l),a.delete(e))}}))};m(h,!1,!0),m(l,!0,!0),m(g,!1,!1),m(p,!0,!1);var y=r.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return r.path=WN(y.points.map(HR)),r.path},r.bindEvents(),r.bubbleSets=new SH(r.options),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){this.context.graph.on(xC.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(xC.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}},{key:"init",value:function(){this.bubbleSets=new SH(this.options),this.members=new Map,this.avoidMembers=new Map}},{key:"parseOptions",value:function(){var e=this.options,t=e.type,n=e.key,r=e.members,i=e.avoidMembers,a=_H(e,["type","key","members","avoidMembers"]),o=Object.keys(a).reduce((function(e,t){return t in EH?e.bubbleSetOptions[t]=a[t]:e.style[t]=a[t],e}),{style:{},bubbleSetOptions:{}});return Object.assign({type:t,key:n,members:r,avoidMembers:i},o)}},{key:"addMember",value:function(e){var t=this,n=Array.isArray(e)?e:[e];n.some((function(e){return t.options.avoidMembers.includes(e)}))&&(this.options.avoidMembers=this.options.avoidMembers.filter((function(e){return!n.includes(e)}))),this.options.members=I(new Set([].concat(I(this.options.members),I(n)))),this.drawBubbleSets()}},{key:"removeMember",value:function(e){var t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter((function(e){return!t.includes(e)})),this.drawBubbleSets()}},{key:"updateMember",value:function(e){this.options.members=PE(e)?e(this.options.members):e,this.drawBubbleSets()}},{key:"getMember",value:function(){return this.options.members}},{key:"addAvoidMember",value:function(e){var t=this,n=Array.isArray(e)?e:[e];n.some((function(e){return t.options.members.includes(e)}))&&(this.options.members=this.options.members.filter((function(e){return!n.includes(e)}))),this.options.avoidMembers=I(new Set([].concat(I(this.options.avoidMembers),I(n)))),this.drawBubbleSets()}},{key:"removeAvoidMember",value:function(e){var t=Array.isArray(e)?e:[e];this.options.avoidMembers.some((function(e){return t.includes(e)}))&&(this.options.avoidMembers=this.options.avoidMembers.filter((function(e){return!t.includes(e)})),this.drawBubbleSets())}},{key:"updateAvoidMember",value:function(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}},{key:"getAvoidMember",value:function(){return this.options.avoidMembers}},{key:"destroy",value:function(){this.context.graph.off(xC.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(xC.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);MH.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},EH);var TH=function(e,t){return(Array.isArray(t)?t:[t]).map((function(t){var n=e.getElementRenderBounds(t);return new ZG(n.min[0],n.min[1],cP(n),hP(n))}))},AH=function(e,t){return(Array.isArray(t)?t:[t]).map((function(t){var n=e.getEdgeData(t),r=e.getElementPosition(n.source),i=e.getElementPosition(n.target);return GG.from({x1:r[0],y1:r[1],x2:i[0],y2:i[1]})}))};function CH(e){return'\n    <ul class="g6-contextmenu-ul">\n      '.concat(e.map((function(e){return'<li  class="g6-contextmenu-li" value="'.concat(e.value,'">').concat(e.name,"</li>")})).join(""),"\n    </ul>\n  ")}var PH=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},RH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).targetElement=null,r.onTriggerEvent=function(e){var t;null===(t=e.preventDefault)||void 0===t||t.call(e),r.show(e)},r.onMenuItemClick=function(e){var t=r.options,n=t.onClick,i=t.trigger;if(e.target instanceof HTMLElement&&e.target.className.includes("g6-contextmenu-li")){var a=e.target.getAttribute("value");null===n||void 0===n||n(a,e.target,r.targetElement),r.hide()}"click"!==i&&r.hide()},r.initElement(),r.update(n),r}return C(t,e),p(t,[{key:"initElement",value:function(){this.$element=NG("contextmenu",!1,{zIndex:"99"});var e=this.options.className;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),OG("g6-contextmenu-css","style",{},"\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n",document.head)}},{key:"show",value:function(e){return PH(this,void 0,void 0,u().mark((function t(){var n,r,i,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.options,r=n.enable,i=n.offset,("function"!==typeof r||r(e))&&r){t.next=4;break}return this.hide(),t.abrupt("return");case 4:return t.next=6,this.getDOMContent(e);case 6:(a=t.sent)instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(a)):this.$element.innerHTML=a,o=this.context.graph.getCanvas().getContainer().getBoundingClientRect(),this.$element.style.left="".concat(e.client.x-o.left+i[0],"px"),this.$element.style.top="".concat(e.client.y-o.top+i[1],"px"),this.$element.style.display="block",this.targetElement=e.target;case 13:case"end":return t.stop()}}),t,this)})))}},{key:"hide",value:function(){this.$element.style.display="none",this.targetElement=null}},{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this),this.$element.remove()}},{key:"getDOMContent",value:function(e){return PH(this,void 0,void 0,u().mark((function t(){var n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.options,r=n.getContent,!(i=n.getItems)){t.next=7;break}return t.t0=CH,t.next=5,i(e);case 5:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 7:return t.next=9,r(e);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"bindEvents",value:function(){var e=this.context.graph,t=this.options.trigger;e.on("canvas:".concat(t),this.onTriggerEvent),e.on("node:".concat(t),this.onTriggerEvent),e.on("edge:".concat(t),this.onTriggerEvent),e.on("combo:".concat(t),this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}},{key:"unbindEvents",value:function(){var e=this.context.graph,t=this.options.trigger;e.off("canvas:".concat(t),this.onTriggerEvent),e.off("node:".concat(t),this.onTriggerEvent),e.off("edge:".concat(t),this.onTriggerEvent),e.off("combo:".concat(t),this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}])}(RG);RH.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:function(){return"It is a empty context menu."},enable:function(){return!0}};var NH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).edgeBundles={},r.edgePoints={},r.onBundle=function(){var e=r.context,t=e.model,n=e.element,i=t.getEdgeData();r.divideEdges(r.options.divisions);for(var a=r.options,o=a.cycles,s=a.iterRate,u=a.divRate,l=r.options,c=l.lambda,h=l.divisions,d=l.iterations,f=0;f<o;f++){for(var p=function(){var e={};i.forEach((function(t){var n;if(t.source!==t.target){var i=eR(t);e[i]=r.getEdgeForces(t,h,c);for(var a=0;a<h+1;a++)(n=r.edgePoints)[i]||(n[i]=[]),r.edgePoints[i][a]=wR(r.edgePoints[i][a],e[i][a])}}))},v=0;v<d;v++)p();c/=2,h*=u,d*=s,r.divideEdges(h)}i.forEach((function(e){var t=eR(e),i=n.getElement(t);null===i||void 0===i||i.update({d:oD(r.edgePoints[t])})}))},r.bindEvents(),r}return C(t,e),p(t,[{key:"nodeMap",get:function(){var e=this.context.model.getNodeData();return Object.fromEntries(e.map((function(e){return[eR(e),NR(UR(e))]})))}},{key:"divideEdges",value:function(e){var t=this;this.context.model.getEdgeData().forEach((function(n){var r,i=eR(n);(r=t.edgePoints)[i]||(r[i]=[]);var a=t.nodeMap[n.source],o=t.nodeMap[n.target];if(1===e)t.edgePoints[i].push(a),t.edgePoints[i].push(_R(wR(a,o),2)),t.edgePoints[i].push(o);else{for(var s=(0===t.edgePoints[i].length?TR(a,o):BH(t.edgePoints[i]))/(e+1),u=s,l=[a],c=1;c<t.edgePoints[i].length;c++){for(var h=t.edgePoints[i][c-1],d=t.edgePoints[i][c],f=TR(d,h);f>u;){var p=u/f,v=wR(h,SR(kR(d,h),p));l.push(v),f-=u,u=s}u-=f}l.push(o),t.edgePoints[i]=l}}))}},{key:"getVectorPosition",value:function(e){var t=this.nodeMap[e.source],n=this.nodeMap[e.target],r=x(kR(n,t),2);return{source:t,target:n,vx:r[0],vy:r[1],length:TR(t,n)}}},{key:"measureEdgeCompatibility",value:function(e,t){var n=this.getVectorPosition(e),r=this.getVectorPosition(t);return OH(n,r)*LH(n,r)*DH(n,r)*UH(n,r)}},{key:"getEdgeBundles",value:function(){var e=this,t={},n=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach((function(i,a){r.forEach((function(r,o){var s,u;o<=a||e.measureEdgeCompatibility(i,r)>=n&&(t[s=eR(i)]||(t[s]=[]),t[eR(i)].push(r),t[u=eR(r)]||(t[u]=[]),t[eR(r)].push(i))}))})),t}},{key:"getSpringForce",value:function(e,t){var n=e.pre,r=e.cur;return SR(kR(wR(n,e.next),SR(r,2)),t)}},{key:"getElectrostaticForce",value:function(e,t){var n=this;IN(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());var r=this.edgeBundles[eR(t)],i=[0,0];return null===r||void 0===r||r.forEach((function(r){var a=n.edgePoints[eR(r)][e],o=n.edgePoints[eR(t)][e],s=kR(a,o),u=TR(a,o);i=wR(i,SR(s,1/u))})),i}},{key:"getEdgeForces",value:function(e,t,n){for(var r=this.nodeMap[e.source],i=this.nodeMap[e.target],a=this.options.K/(TR(r,i)*(t+1)),o=[[0,0]],s=eR(e),u=1;u<t;u++){var l=this.getSpringForce({pre:this.edgePoints[s][u-1],cur:this.edgePoints[s][u],next:this.edgePoints[s][u+1]||[0,0]},a),c=this.getElectrostaticForce(u,e);o.push(SR(wR(l,c),n))}return o.push([0,0]),o}},{key:"bindEvents",value:function(){this.context.graph.on(xC.AFTER_RENDER,this.onBundle)}},{key:"unbindEvents",value:function(){this.context.graph.off(xC.AFTER_RENDER,this.onBundle)}},{key:"destroy",value:function(){this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);NH.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};var OH=function(e,t){return Math.abs(function(e,t){return e.reduce((function(e,n,r){return e+n*t[r]}),0)}([e.vx,e.vy],[t.vx,t.vy])/(e.length*t.length))},LH=function(e,t){var n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n)},DH=function(e,t){var n=(e.length+t.length)/2;return n/(n+TR(_R(wR(e.source,e.target),2),_R(wR(t.source,t.target),2)))},IH=function(e,t){if(t.source[0]===t.target[0])return[t.source[0],e[1]];if(t.source[1]===t.target[1])return[e[0],t.source[1]];var n=(t.source[1]-t.target[1])/(t.source[0]-t.target[0]),r=(n*n*t.source[0]+n*(e[1]-t.source[1])+e[0])/(n*n+1);return[r,n*(r-t.source[0])+t.source[1]]},FH=function(e,t){var n=IH(t.source,e),r=IH(t.target,e),i=_R(wR(n,r),2),a=_R(wR(e.source,e.target),2);return 0===TR(n,r)?0:Math.max(0,1-2*TR(a,i)/TR(n,r))},UH=function(e,t){return Math.min(FH(e,t),FH(t,e))},BH=function(e){for(var t=0,n=1;n<e.length;n++)t+=TR(e[n],e[n-1]);return t},zH={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},GH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).shapes=new Map,r.r=r.options.r,r.onEdgeFilter=function(e){if("drag"!==r.options.trigger||!r.isLensOn){var t=HR(e.canvas);r.renderLens(t),r.renderFocusElements()}},r.renderLens=function(e){var t=Object.assign({},zH,r.options.style);r.isLensOn||(r.lens=new rO({style:t}),r.canvas.appendChild(r.lens)),Object.assign(t,jR(e),{size:2*r.r}),r.lens.update(t)},r.getFilterData=function(){var e=r.options.filter,t=r.context.model.getData();if(!e)return t;var n=t.nodes,i=t.edges,a=t.combos;return{nodes:n.filter((function(t){return e(eR(t),"node")})),edges:i.filter((function(t){return e(eR(t),"edge")})),combos:a.filter((function(t){return e(eR(t),"combo")}))}},r.getFocusElements=function(e){var t=r.getFilterData(),n=t.nodes,i=t.edges,a=n.filter((function(t){return TR(UR(t),e)<r.r})),o=a.map((function(e){return eR(e)}));return{nodes:a,edges:i.filter((function(e){var t=e.source,n=e.target,i=o.includes(t),a=o.includes(n);switch(r.options.nodeType){case"both":return i&&a;case"either":return i!==a;case"source":return i&&!a;case"target":return!i&&a;default:return!1}}))}},r.renderFocusElements=function(){var e=r.context,t=e.element,n=e.graph;if(r.isLensOn){var i=r.lens.getCenter(),a=r.getFocusElements(i),o=a.nodes,s=a.edges,u=new Set,l=function(e){var i=eR(e);u.add(i);var a=t.getElement(i);if(a){var o=r.shapes.get(i)||a.cloneNode();o.setPosition(a.getPosition()),o.id=a.id,r.shapes.has(i)?Object.entries(a.attributes).forEach((function(e){var t=x(e,2),n=t[0],r=t[1];o.style[n]!==r&&(o.style[n]=r)})):(r.canvas.appendChild(o),r.shapes.set(i,o));var s=n.getElementType(i),l=r.getElementStyle(s,e);o.update(l)}};o.forEach(l),s.forEach(l),r.shapes.forEach((function(e,t){u.has(t)||(e.destroy(),r.shapes.delete(t))}))}},r.scaleRByWheel=function(e){var t;r.options.preventDefault&&e.preventDefault();var n=e.clientX,i=e.clientY,a=e.deltaX,o=e.deltaY,s=r.context,u=s.graph,l=s.canvas,c=u.getCanvasByClient([n,i]),h=null===(t=r.lens)||void 0===t?void 0:t.getCenter();if(r.isLensOn&&!(TR(c,h)>r.r)){var d=r.options,f=d.maxR,p=d.minR,v=a+o>0?1/.95:.95,g=Math.min.apply(Math,I(l.getSize()))/2;r.r=Math.max(p||0,Math.min(f||g,r.r*v)),r.renderLens(h),r.renderFocusElements()}},r.isLensDragging=!1,r.onDragStart=function(e){var t,n=HR(e.canvas),i=null===(t=r.lens)||void 0===t?void 0:t.getCenter();!r.isLensOn||TR(n,i)>r.r||(r.isLensDragging=!0)},r.onDrag=function(e){if(r.isLensDragging){var t=HR(e.canvas);r.renderLens(t),r.renderFocusElements()}},r.onDragEnd=function(){r.isLensDragging=!1},r.bindEvents(),r}return C(t,e),p(t,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"getElementStyle",value:function(e,t){var n="node"===e?this.options.nodeStyle:this.options.edgeStyle;return"function"===typeof n?n(t):n}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var e,t=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=t.getCanvas().getLayer();["click","drag"].includes(r)&&a.addEventListener(mC.CLICK,this.onEdgeFilter),"pointermove"===r?a.addEventListener(mC.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(a.addEventListener(mC.DRAG_START,this.onDragStart),a.addEventListener(mC.DRAG,this.onDrag),a.addEventListener(mC.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(e=this.graphDom)||void 0===e||e.addEventListener(mC.WHEEL,this.scaleRByWheel,{passive:!1}))}},{key:"unbindEvents",value:function(){var e,t=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=t.getCanvas().getLayer();["click","drag"].includes(r)&&a.removeEventListener(mC.CLICK,this.onEdgeFilter),"pointermove"===r?a.removeEventListener(mC.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(a.removeEventListener(mC.DRAG_START,this.onDragStart),a.removeEventListener(mC.DRAG,this.onDrag),a.removeEventListener(mC.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(e=this.graphDom)||void 0===e||e.removeEventListener(mC.WHEEL,this.scaleRByWheel))}},{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"destroy",value:function(){var e=this;this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((function(t,n){t.destroy(),e.shapes.delete(n)})),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);GH.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:function(){return!0},style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};var HH={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},jH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).r=r.options.r,r.d=r.options.d,r.onCreateFisheye=function(e){if("drag"!==r.options.trigger||!r.isLensOn){var t=HR(e.canvas);r.onMagnify(t)}},r.onMagnify=function(e){e.some(isNaN)||(r.renderLens(e),r.renderFocusElements())},r.renderLens=function(e){var t=Object.assign({},HH,r.options.style);r.isLensOn||(r.lens=new rO({style:t}),r.canvas.appendChild(r.lens)),Object.assign(t,jR(e),{size:2*r.r,label:r.options.showDPercent,labelText:r.getDPercent()}),r.lens.update(t)},r.getDPercent=function(){var e=r.options,t=e.minD,n=e.maxD,i=Math.round((r.d-t)/(n-t)*100);return"".concat(i,"%")},r.prevMagnifiedStyleMap=new Map,r.prevOriginStyleMap=new Map,r.renderFocusElements=function(){if(r.isLensOn){var e=r.context.graph,t=r.lens.getCenter(),n=(r.d+1)*r.r,i=new Map,a=new Map;e.getNodeData().forEach((function(o){var s=UR(o),u=TR(s,t);if(!(u>r.r)){var l=n*u/(r.d*u+r.r),c=x(s,2),h=c[0],d=c[1],f=x(t,2),p=f[0],v=f[1],g=[p+l*((h-p)/u),v+l*((d-v)/u)],m=eR(o),y=r.getNodeStyle(o),b=CL(e.getElementRenderStyle(m),Object.keys(y));i.set(m,Object.assign(Object.assign({},jR(g)),y)),a.set(m,Object.assign(Object.assign({},jR(s)),b))}})),r.updateStyle(i,a)}},r.getNodeStyle=function(e){var t=r.options.nodeStyle;return"function"===typeof t?t(e):t},r.updateStyle=function(e,t){var n=r.context,i=n.graph,a=n.element,o=hR(Array.from(r.prevMagnifiedStyleMap.keys()),Array.from(e.keys()),(function(e){return e})),s=o.enter,u=o.exit,l=o.keep,c=new Set,h=function(e,t){var n=a.getElement(e);null===n||void 0===n||n.update(t),i.getRelatedEdgesData(e).forEach((function(e){c.add(eR(e))}))};[].concat(I(s),I(l)).forEach((function(t){h(t,e.get(t))})),u.forEach((function(e){h(e,r.prevOriginStyleMap.get(e)),r.prevOriginStyleMap.delete(e)})),c.forEach((function(e){var t=a.getElement(e);null===t||void 0===t||t.update({})})),r.prevMagnifiedStyleMap=e,t.forEach((function(e,t){r.prevOriginStyleMap.has(t)||r.prevOriginStyleMap.set(t,e)}))},r.isWheelValid=function(e){if(r.options.preventDefault&&e.preventDefault(),!r.isLensOn)return!1;var t=e.clientX,n=e.clientY;return!(TR(r.context.graph.getCanvasByClient([t,n]),r.lens.getCenter())>r.r)},r.scaleR=function(e){var t=r.options,n=t.maxR,i=t.minR,a=e?1/.95:.95,o=Math.min.apply(Math,I(r.context.canvas.getSize()))/2;r.r=Math.max(i||0,Math.min(n||o,r.r*a))},r.scaleD=function(e){var t=r.options,n=t.maxD,i=t.minD,a=e?r.d+.1:r.d-.1;r.d=Math.max(i,Math.min(n,a))},r.scaleRByWheel=function(e){if(r.isWheelValid(e)){var t=e.deltaX,n=e.deltaY;r.scaleR(t+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByWheel=function(e){if(r.isWheelValid(e)){var t=e.deltaX,n=e.deltaY;r.scaleD(t+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.isDragValid=function(e){return r.options.preventDefault&&e.preventDefault(),!!r.isLensOn&&!(TR(HR(e.canvas),r.lens.getCenter())>r.r)},r.isLensDragging=!1,r.onDragStart=function(e){r.isDragValid(e)&&(r.isLensDragging=!0)},r.onDrag=function(e){if(r.isLensDragging){var t=HR(e.canvas);r.onMagnify(t)}},r.onDragEnd=function(){r.isLensDragging=!1},r.scaleRByDrag=function(e){if(r.isLensDragging){var t=e.dx,n=e.dy;r.scaleR(t-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByDrag=function(e){if(r.isLensDragging){var t=e.dx,n=e.dy;r.scaleD(t-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.bindEvents(),r}return C(t,e),p(t,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var e,t=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=n.scaleDBy,o=t.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.addEventListener(mC.CLICK,this.onCreateFisheye),"pointermove"===r&&o.addEventListener(mC.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===a){o.addEventListener(mC.DRAG_START,this.onDragStart),o.addEventListener(mC.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(mC.DRAG,s)}if("wheel"===i||"wheel"===a){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(e=this.graphDom)||void 0===e||e.addEventListener(mC.WHEEL,u,{passive:!1})}}},{key:"unbindEvents",value:function(){var e,t=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=n.scaleDBy,o=t.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.removeEventListener(mC.CLICK,this.onCreateFisheye),"pointermove"===r&&o.removeEventListener(mC.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===a){o.removeEventListener(mC.DRAG_START,this.onDragStart),o.removeEventListener(mC.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(mC.DRAG,s)}if("wheel"===i||"wheel"===a){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(e=this.graphDom)||void 0===e||e.removeEventListener(mC.WHEEL,u)}}},{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"destroy",value:function(){var e;this.unbindEvents(),this.isLensOn&&(null===(e=this.lens)||void 0===e||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);jH.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};var VH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).$el=r.context.canvas.getContainer(),r.graphSize=[0,0],r.onFullscreenChange=function(){var e,t,n,i,a=!!document.fullscreenElement;r.options.autoFit&&r.setGraphSize(a),a?null===(t=(e=r.options).onEnter)||void 0===t||t.call(e):null===(i=(n=r.options).onExit)||void 0===i||i.call(n)},r.shortcut=new nN(e.graph),r.bindEvents(),r.style=document.createElement("style"),document.head.appendChild(r.style),r.style.innerHTML="\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    ",r}return C(t,e),p(t,[{key:"bindEvents",value:function(){var e=this;this.unbindEvents(),this.shortcut.unbindAll();var t=this.options.trigger,n=t.request,r=void 0===n?[]:n,i=t.exit,a=void 0===i?[]:i;this.shortcut.bind(r,this.request),this.shortcut.bind(a,this.exit);["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach((function(t){document.addEventListener(t,e.onFullscreenChange,!1)}))}},{key:"unbindEvents",value:function(){var e=this;this.shortcut.unbindAll();["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach((function(t){document.removeEventListener(t,e.onFullscreenChange,!1)}))}},{key:"setGraphSize",value:function(){var e,t,n,r;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])n=(null===(e=globalThis.screen)||void 0===e?void 0:e.width)||0,r=(null===(t=globalThis.screen)||void 0===t?void 0:t.height)||0,this.graphSize=this.context.graph.getSize();else{var i=x(this.graphSize,2);n=i[0],r=i[1]}this.context.graph.setSize(n,r),this.context.graph.render()}},{key:"request",value:function(){!document.fullscreenElement&&(document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled"))&&this.$el.requestFullscreen().catch((function(e){BC.warn("Error attempting to enable full-screen: ".concat(e.message," (").concat(e.name,")"))}))}},{key:"exit",value:function(){document.fullscreenElement&&document.exitFullscreen()}},{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"destroy",value:function(){this.exit(),this.style.remove(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);VH.defaultOptions={trigger:{},autoFit:!0};var WH=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).$element=NG("grid-line",!0),r.offset=[0,0],r.onTransform=function(e){if(r.options.follow){var t=e.data.translate;t&&r.updateOffset(t)}},r.context.canvas.getContainer().prepend(r.$element),r.updateStyle(),r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.updateStyle()}},{key:"bindEvents",value:function(){this.context.graph.on(xC.AFTER_TRANSFORM,this.onTransform)}},{key:"updateStyle",value:function(){var e=this.options,t=e.size,n=e.stroke,r=e.lineWidth,i=e.border,a=e.borderLineWidth,o=e.borderStroke,s=e.borderStyle;Object.assign(this.$element.style,{border:i?"".concat(a,"px ").concat(s," ").concat(o):"none",backgroundImage:"linear-gradient(".concat(n," ").concat(r,"px, transparent ").concat(r,"px), linear-gradient(90deg, ").concat(n," ").concat(r,"px, transparent ").concat(r,"px)"),backgroundSize:"".concat(t,"px ").concat(t,"px"),backgroundRepeat:"repeat"})}},{key:"updateOffset",value:function(e){this.offset=function(e,t){return e.map((function(e){return e%t}))}(wR(this.offset,e),this.options.size),this.$element.style.backgroundPosition="".concat(this.offset[0],"px ").concat(this.offset[1],"px")}},{key:"destroy",value:function(){this.context.graph.off(xC.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);function XH(e){var t={Added:new Map,Updated:new Map,Removed:new Map};return e.forEach((function(e){var n=e.type,r=e.value,i=eR(r);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)t.Added.set(i,e);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n)if(t.Added.has(i))t.Added.set(i,{type:n.replace("Updated","Added"),value:r});else if(t.Updated.has(i)){var a=t.Updated.get(i).original;t.Updated.set(i,{type:n,value:r,original:a})}else t.Removed.has(i)||t.Updated.set(i,e);else"NodeRemoved"!==n&&"EdgeRemoved"!==n&&"ComboRemoved"!==n||(t.Added.has(i)?t.Added.delete(i):t.Updated.has(i)?(t.Updated.delete(i),t.Removed.set(i,e)):t.Removed.set(i,e))})),[].concat(I(Array.from(t.Added.values())),I(Array.from(t.Updated.values())),I(Array.from(t.Removed.values())))}function YH(e){var t=nP(e,(function(e){return e.type})),n=t.NodeAdded,r=void 0===n?[]:n,i=t.NodeUpdated,a=void 0===i?[]:i,o=t.NodeRemoved,s=void 0===o?[]:o,u=t.EdgeAdded,l=void 0===u?[]:u,c=t.EdgeUpdated,h=void 0===c?[]:c,d=t.EdgeRemoved,f=void 0===d?[]:d,p=t.ComboAdded,v=void 0===p?[]:p,g=t.ComboUpdated,m=void 0===g?[]:g,y=t.ComboRemoved;return{add:{nodes:r,edges:l,combos:v},update:{nodes:a,edges:h,combos:m},remove:{nodes:s,edges:f,combos:void 0===y?[]:y}}}function qH(e,t){for(var n in e)RE(e[n])&&!Array.isArray(e[n])&&null!==e[n]?(t[n]||(t[n]={}),qH(e[n],t[n])):void 0===t[n]&&(t[n]=jC(n))}function KH(e){var t=arguments.length>2?arguments[2]:void 0,n={animation:arguments.length>1&&void 0!==arguments[1]&&arguments[1],current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},r=YH(XH(e)),i=r.add,a=r.update,o=r.remove;return["nodes","edges","combos"].forEach((function(e){a[e]&&a[e].forEach((function(r){var i,a,o=Object.assign({},r.value),s=Object.assign({},r.original);if(t){var u=t.graph.getElementType(eR(r.original)),l="edge"===u?"stroke":"fill",c=t.element.getElementComputedStyle(u,r.original);s=Object.assign(Object.assign({},r.original),{style:Object.assign(P({},l,c[l]),r.original.style)})}qH(o,s),(i=n.current.update)[e]||(i[e]=[]),n.current.update[e].push(o),(a=n.original.update)[e]||(a[e]=[]),n.original.update[e].push(s)})),i[e]&&i[e].forEach((function(t){var r,i,a=Object.assign({},t.value);(r=n.current.add)[e]||(r[e]=[]),n.current.add[e].push(a),(i=n.original.remove)[e]||(i[e]=[]),n.original.remove[e].push(a)})),o[e]&&o[e].forEach((function(t){var r,i,a=Object.assign({},t.value);(r=n.current.remove)[e]||(r[e]=[]),n.current.remove[e].push(a),(i=n.original.add)[e]||(i[e]=[]),n.original.add[e].push(a)}))})),n}WH.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var ZH=function(e){function t(e,n){var r;v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).batchChanges=null,r.batchAnimation=!1,r.undoStack=[],r.redoStack=[],r.freezed=!1,r.executeCommand=function(e){var t,n,i,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.freezed=!0,null===(n=(t=r.options).executeCommand)||void 0===n||n.call(t,e);var o=a?e.original:e.current;r.context.graph.addData(o.add),r.context.graph.updateData(o.update),r.context.graph.removeData(nR(o.remove,!1)),null===(i=r.context.element)||void 0===i||i.draw({silence:!0,animation:e.animation}),r.freezed=!1},r.addCommand=function(e){var t;if(!r.freezed){if(e.type===xC.AFTER_DRAW){var n=e.data,i=n.dataChanges,a=void 0===i?[]:i,o=n.animation,s=void 0===o||o;if(null===(t=r.context.batch)||void 0===t?void 0:t.isBatching){if(!r.batchChanges)return;return r.batchChanges.push(a),void(r.batchAnimation&&(r.batchAnimation=s))}r.batchChanges=[a],r.batchAnimation=s}r.undoStackPush(KH(r.batchChanges.flat(),r.batchAnimation,r.context)),r.notify(EC.ADD,r.undoStack[r.undoStack.length-1])}},r.initBatchCommand=function(e){var t=e.data.initiate;(r.batchAnimation=!1,t)?r.batchChanges=[]:r.undoStack.pop()||(r.batchChanges=null)},r.emitter=new fI;var i=r.context.graph;return i.on(xC.AFTER_DRAW,r.addCommand),i.on(xC.BATCH_START,r.initBatchCommand),i.on(xC.BATCH_END,r.addCommand),r}return C(t,e),p(t,[{key:"canUndo",value:function(){return this.undoStack.length>0}},{key:"canRedo",value:function(){return this.redoStack.length>0}},{key:"undo",value:function(){var e,t,n,r,i=this.undoStack.pop();if(i){if(this.executeCommand(i),!1===(null===(t=(e=this.options).beforeAddCommand)||void 0===t?void 0:t.call(e,i,!1)))return;this.redoStack.push(i),null===(r=(n=this.options).afterAddCommand)||void 0===r||r.call(n,i,!1),this.notify(EC.UNDO,i)}return this}},{key:"redo",value:function(){var e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(EC.REDO,e)),this}},{key:"undoAndCancel",value:function(){var e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(EC.CANCEL,e)),this}},{key:"undoStackPush",value:function(e){var t,n,r,i,a=this.options.stackSize;0!==a&&this.undoStack.length>=a&&this.undoStack.shift(),!1!==(null===(n=(t=this.options).beforeAddCommand)||void 0===n?void 0:n.call(t,e,!0))&&(this.undoStack.push(e),null===(i=(r=this.options).afterAddCommand)||void 0===i||i.call(r,e,!0))}},{key:"clear",value:function(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(EC.CLEAR,null)}},{key:"notify",value:function(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(EC.CHANGE,{cmd:t})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"destroy",value:function(){var e=this.context.graph;e.off(xC.AFTER_DRAW,this.addCommand),e.off(xC.BATCH_START,this.initBatchCommand),e.off(xC.BATCH_END,this.addCommand),this.emitter.off(),Xn(S(t.prototype),"destroy",this).call(this),this.undoStack=[],this.redoStack=[]}}])}(RG);ZH.defaultOptions={stackSize:0};var JH=n(8433),QH=n.n(JH);var $H=function(e,t,n){if("sharp"===n)return[["M",e[0]-t,e[1]-t],["L",e[0]+t,e[1]-t],["L",e[0]+t,e[1]+t],["L",e[0]-t,e[1]+t],["Z"]];var r=[t,t,0,0,0];return[["M",e[0],e[1]-t],["A"].concat(r,[e[0],e[1]+t]),["A"].concat(r,[e[0],e[1]-t])]},ej=function(e,t,n){var r=[t,t,0,0,0],i="sharp"===n?wR(e[0],MR(CR(kR(e[0],e[1])),t)):e[0],a="sharp"===n?wR(e[1],MR(CR(kR(e[1],e[0])),t)):e[1],o=MR(CR(RR(kR(i,a),!1)),t),s=MR(o,-1),u=wR(i,o),l=wR(a,o),c=wR(a,s),h=wR(i,s);return"sharp"===n?[["M",u[0],u[1]],["L",l[0],l[1]],["L",c[0],c[1]],["L",h[0],h[1]],["Z"]]:[["M",u[0],u[1]],["L",l[0],l[1]],["A"].concat(r,[c[0],c[1]]),["L",h[0],h[1]],["A"].concat(r,[u[0],u[1]])]},tj=function(e,t){var n=$R(e).map((function(n,r){var i=(r-2+e.length)%e.length,a=(r-1+e.length)%e.length,o=(r+1)%e.length,s=e[i],u=e[a],l=e[o],c=kR(s,u),h=kR(u,n),d=kR(n,l),f=function(e,t){return PR(e,t,!0)<Math.PI},p=f(c,h),v=f(h,d),g=function(e){return MR(CR(RR(e,!1)),t)},m=g(h);return[{p:NR(wR(u,p?g(c):m)),concave:p&&u},{p:NR(wR(n,v?g(d):m)),concave:v&&n}]})),r=[t,t,0,0,0],i=n.findIndex((function(e,t){return!n[(t-1+n.length)%n.length][0].concave&&!n[(t-1+n.length)%n.length][1].concave&&!e[0].concave&&!e[0].concave&&!e[1].concave})),a=n.slice(i).concat(n.slice(0,i)),o=[];return a.flatMap((function(e,t){var i=[],s=a[n.length-1];return 0===t&&i.push(["M"].concat(I(s[1].p))),e[0].concave?o.push(e[0].p,e[1].p):i.push(["A"].concat(r,I(e[0].p))),e[1].concave?o.unshift(e[1].p):i.push(["L"].concat(I(e[1].p))),3===o.length&&(i.pop(),i.push(["C"].concat(I(o.flat()))),o=[]),i}))},nj=function(e,t){var n=$R(e).map((function(t,n){return{p:t,v:CR(kR(e[(n+1)%e.length],t))}}));return n.forEach((function(r,i){var a=i>0?i-1:e.length-1,o=n[a].v,s=CR(wR(o,MR(r.v,PR(o,r.v,!0)<Math.PI?1:-1)));r.p=wR(r.p,MR(s,t))})),WN(n.map((function(e){return e.p})))},rj=function(e,t){var n=e.map((function(n,r){var i=e[0===r?e.length-1:r-1],a=OR(MR(CR(RR(kR(i,n),!1)),t));return[wR(i,a),wR(n,a)]})),r=n.flat();return r.map((function(e,t){return t%2===0?null:IR([r[(t-1)%r.length],r[t%r.length]],[r[(t+1)%r.length],r[(t+2)%r.length]],!0)})).filter(Boolean).map((function(e,t){return[0===t?"M":"L",e[0],e[1]]})).concat([["Z"]])},ij=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},aj=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).hullMemberIds=[],r.drawHull=function(){if(r.shape){var e=!AC(r.optionsCache,r.options);r.shape.update(r.getHullStyle(e))}else r.shape=new YN({style:r.getHullStyle()}),r.context.canvas.appendChild(r.shape);r.optionsCache=Object.assign({},r.options)},r.updateHullPath=function(e){r.shape&&r.options.members.includes(eR(e.data))&&r.shape.update({d:r.getHullPath(!0)})},r.getHullPath=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.context.graph,n=r.getMember();if(0===n.length)return"";var i=n.map((function(e){return t.getNodeData(e)})),a=QH()(i.map(UR),r.options.concavity).slice(1).reverse(),o=a.flatMap((function(e){return i.filter((function(t){return AC(UR(t),e)})).map(eR)}));return AC(o,r.hullMemberIds)&&!e||(r.hullMemberIds=o,r.path=function(e,t,n){if(1===e.length)return $H(e[0],t,n);if(2===e.length)return ej(e,t,n);if(3===e.length){var r=x($R(e),3),i=r[0],a=r[1],o=r[2];if(YR(i,a,o))return ej([i,o],t,n)}switch(n){case"smooth":return nj(e,t);case"sharp":return rj(e,t);default:return tj(e,t)}}(a,r.getPadding(),r.options.corner)),r.path},r.bindEvents(),r}return C(t,e),p(t,[{key:"bindEvents",value:function(){this.context.graph.on(xC.AFTER_RENDER,this.drawHull),this.context.graph.on(xC.AFTER_ELEMENT_UPDATE,this.updateHullPath)}},{key:"getHullStyle",value:function(e){var t=this.options,n=(t.members,t.padding,t.corner,ij(t,["members","padding","corner"]));return Object.assign(Object.assign({},n),{d:this.getHullPath(e)})}},{key:"getPadding",value:function(){var e=this.context.graph,t=this.hullMemberIds.reduce((function(t,n){var r=e.getElementRenderBounds(n).halfExtents,i=Math.max(r[0],r[1]);return Math.max(t,i)}),0);return t+this.options.padding}},{key:"addMember",value:function(e){var t=Array.isArray(e)?e:[e];this.options.members=I(new Set([].concat(I(this.options.members),I(t)))),this.shape.update({d:this.getHullPath()})}},{key:"removeMember",value:function(e){var t=this,n=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter((function(e){return!n.includes(e)})),n.some((function(e){return t.hullMemberIds.includes(e)}))&&this.shape.update({d:this.getHullPath()})}},{key:"updateMember",value:function(e){this.options.members=PE(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}},{key:"getMember",value:function(){return this.options.members}},{key:"destroy",value:function(){this.context.graph.off(xC.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);function oj(e,t){t(e),e.children&&e.children.forEach((function(e){e&&oj(e,t)}))}function sj(e){lj(e,!0)}function uj(e){lj(e,!1)}function lj(e,t){var n=t?"visible":"hidden";oj(e,(function(e){e.attr("visibility",n)}))}aj.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};var cj=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=5),Object.entries(t).forEach((function(i){var a=Lx(i,2),o=a[0],s=a[1],u=e;Object.prototype.hasOwnProperty.call(t,o)&&(s?mR(s)?(mR(e[o])||(u[o]={}),n<r?cj(e[o],s,n+1,r):u[o]=t[o]):cE(s)?(u[o]=[],u[o]=u[o].concat(s)):u[o]=s:u[o]=s)}))},hj=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)cj(e,t[r]);return e},dj=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,Ix([],Lx(t),!1))||this;return r.isMutationObserved=!0,r.addEventListener(zM.INSERTED,(function(){uj(r)})),r}return Cx(t,e),t}(NT);function fj(e){var t=e.appendChild(new dj({class:"offscreen"}));return uj(t),t}function pj(){lj(this,"hidden"!==this.attributes.visibility)}var vj=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this,hj({},{style:n},t))||this;return r.initialized=!1,r._defaultOptions=n,r}return Cx(t,e),Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=fj(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var e;null===(e=this._offscreen)||void 0===e||e.destroy()},t.prototype.attributeChangedCallback=function(e){"visibility"===e&&pj.call(this)},t.prototype.update=function(e,t){var n;return this.attr(hj({},this.attributes,e||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,t)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(e,t){},t.prototype.getSubShapeStyle=function(e){e.x,e.y,e.transform,e.transformOrigin,e.class,e.className,e.zIndex;return Rx(e,["x","y","transform","transformOrigin","class","className","zIndex"])},t}(PT);function gj(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function mj(e,t,n){var r;void 0===n&&(n=!0);var i=t||(null===(r=e.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",a=e.replace(new RegExp("^(".concat(i,")")),"");return n?function(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}(a):a}var yj=function(e,t){if(!(null===e||void 0===e?void 0:e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function bj(e,t,n){void 0===n&&(n=!1);var r={};return Object.entries(e).forEach((function(e){var i=Lx(e,2),a=i[0],o=i[1];if("className"===a||"class"===a);else if(yj(a,"show")&&yj(mj(a,"show"),t)!==n)a===function(e,t){return"".concat(t).concat(gj(e))}(t,"show")?r[a]=o:r[a.replace(new RegExp(gj(t)),"")]=o;else if(!yj(a,"show")&&yj(a,t)!==n){var s=mj(a,t);"filter"===s&&"function"===typeof o||(r[s]=o)}})),r}function xj(e,t){return Object.entries(e).reduce((function(e,n){var r=Lx(n,2),i=r[0],a=r[1];return i.startsWith("show")?e["show".concat(t).concat(i.slice(4))]=a:e["".concat(t).concat(gj(i))]=a,e}),{})}function Ej(e,t){void 0===t&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach((function(e){var a=Lx(e,2),o=a[0],s=a[1];t.includes(o)||(-1!==n.indexOf(o)?i[o]=s:r[o]=s)})),[r,i]}var wj=function(e){function t(t){void 0===t&&(t={});var n=t.style,r=Rx(t,["style"]);return e.call(this,Px({style:Px({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},r))||this}return Cx(t,e),Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=fj(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var e;null===(e=this._offscreen)||void 0===e||e.destroy()},t}(XT);var kj=function(){function e(e,n,r,i,a,o,s){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),t.add(this),this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}var t,n,r;return e.prototype.selectAll=function(e){var t="string"===typeof e?this._parent.querySelectorAll(e):e;return new n(t,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(e){var t="string"===typeof e?this._parent.querySelectorAll(e):e;return new n(this._elements,null,this._parent,this._document,void 0,void 0,t)},e.prototype.select=function(e){var t="string"===typeof e?this._parent.querySelectorAll(e)[0]||null:e;return new n([t],null,t,this._document)},e.prototype.append=function(e){var t=this,r="function"===typeof e?e:function(){return t.createElement(e)},i=[];if(null!==this._data){for(var a=0;a<this._data.length;a++){var o=this._data[a],s=Lx(Array.isArray(o)?o:[o,null],2),u=s[0],l=s[1];(h=r(u,a)).__data__=u,null!==l&&(h.__fromElements__=l),this._parent.appendChild(h),i.push(h)}return new n(i,null,this._parent,this._document)}for(a=0;a<this._elements.length;a++){var c=this._elements[a],h=r(u=c.__data__,a);c.appendChild(h),i.push(h)}return new n(i,null,i[0],this._document)},e.prototype.maybeAppend=function(e,n){var i=Fx(this,t,"m",r).call(this,"#"===e[0]?e:"#".concat(e),n);return i.attr("id",e),i},e.prototype.maybeAppendByClassName=function(e,n){var i=e.toString(),a=Fx(this,t,"m",r).call(this,"."===i[0]?i:".".concat(i),n);return a.attr("className",i),a},e.prototype.maybeAppendByName=function(e,n){var i=Fx(this,t,"m",r).call(this,'[name="'.concat(e,'"]'),n);return i.attr("name",e),i},e.prototype.data=function(e,t,r){var i,a;void 0===t&&(t=function(e){return e}),void 0===r&&(r=function(){return null});for(var o=[],s=[],u=new Set(this._elements),l=[],c=new Set,h=new Map(this._elements.map((function(e,n){return[t(e.__data__,n),e]}))),d=new Map(this._facetElements.map((function(e,n){return[t(e.__data__,n),e]}))),f=function(e,t){var n=new Map;return e.forEach((function(e){var r=t(e);n.has(r)||n.set(r,[]),n.get(r).push(e)})),n}(this._elements,(function(e){return r(e.__data__)})),p=0;p<e.length;p++){var v=e[p],g=t(v,p),m=r(v,p);if(h.has(g))(E=h.get(g)).__data__=v,E.__facet__=!1,s.push(E),u.delete(E),h.delete(g);else if(d.has(g)){(E=d.get(g)).__data__=v,E.__facet__=!0,s.push(E),d.delete(g)}else if(f.has(g)){var y=f.get(g);l.push([v,y]);try{for(var b=(i=void 0,Ox(y)),x=b.next();!x.done;x=b.next()){var E=x.value;u.delete(E)}}catch(k){i={error:k}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}f.delete(g)}else if(h.has(m)){(E=h.get(m)).__toData__?E.__toData__.push(v):E.__toData__=[v],c.add(E),u.delete(E)}else o.push(v)}var w=[new n([],o,this._parent,this._document),new n(s,null,this._parent,this._document),new n(u,null,this._parent,this._document),new n([],l,this._parent,this._document),new n(c,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,w)},e.prototype.merge=function(e){var t=Ix(Ix([],Lx(this._elements),!1),Lx(e._elements),!1),r=Ix(Ix([],Lx(this._transitions),!1),Lx(e._transitions),!1);return new n(t,null,this._parent,this._document,void 0,r)},e.prototype.createElement=function(e){if(this._document)return this._document.createElement(e,{});var t=n.registry[e];return t?new t:function(e){throw new Error(e)}("Unknown node type: ".concat(e))},e.prototype.join=function(e,t,n,r,i){void 0===e&&(e=function(e){return e}),void 0===t&&(t=function(e){return e}),void 0===n&&(n=function(e){return e.remove()}),void 0===r&&(r=function(e){return e}),void 0===i&&(i=function(e){return e.remove()});var a=e(this._enter),o=t(this._update),s=n(this._exit),u=r(this._merge),l=i(this._split);return o.merge(a).merge(s).merge(u).merge(l)},e.prototype.remove=function(){for(var e=function(e){var n=t._elements[e],r=t._transitions[e];r?r.then((function(){return n.remove()})):n.remove()},t=this,r=0;r<this._elements.length;r++)e(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(e){for(var t=0;t<this._elements.length;t++){var n=this._elements[t],r=n.__data__;e.call(n,r,t)}return this},e.prototype.attr=function(e,t){var n="function"!==typeof t?function(){return t}:t;return this.each((function(r,i){void 0!==t&&(this[e]=n.call(this,r,i))}))},e.prototype.style=function(e,t,n){void 0===n&&(n=!0);var r="function"===typeof t&&n?t:function(){return t};return this.each((function(n,i){void 0!==t&&(this.style[e]=r.call(this,n,i))}))},e.prototype.styles=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),this.each((function(n,r){var i=this;Object.entries(e).forEach((function(e){var a=Lx(e,2),o=a[0],s=a[1],u="function"===typeof s&&t?s:function(){return s};void 0!==s&&i.attr(o,u.call(i,n,r))}))}))},e.prototype.update=function(e,t){void 0===t&&(t=!0);var n="function"===typeof e&&t?e:function(){return e};return this.each((function(t,r){e&&this.update&&this.update(n.call(this,t,r))}))},e.prototype.maybeUpdate=function(e,t){void 0===t&&(t=!0);var n="function"===typeof e&&t?e:function(){return e};return this.each((function(t,r){e&&this.update&&this.update(n.call(this,t,r))}))},e.prototype.transition=function(e){var t=this._transitions;return this.each((function(n,r){t[r]=e.call(this,n,r)}))},e.prototype.on=function(e,t){return this.each((function(){this.addEventListener(e,t)})),this},e.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.call.apply(e,Ix([this._parent,this],Lx(t),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter((function(e){return!!e}))},e.prototype.parent=function(){return this._parent},n=e,t=new WeakSet,r=function(e,t){var r=this._elements[0],i=r.querySelector(e);if(i)return new n([i],null,this._parent,this._document);var a="string"===typeof t?this.createElement(t):t();return r.appendChild(a),new n([a],null,this._parent,this._document)},e.registry={g:NT,rect:VT,circle:AT,path:BT,text:wj,ellipse:RT,image:DT,line:FT,polygon:GT,polyline:jT,html:LT},e}();function Sj(e){return new kj([e],null,e,e.ownerDocument)}var _j=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=r}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},e}();var Mj=function(e,t){var n=function(e){return"".concat(t,"-").concat(e)},r=Object.fromEntries(Object.entries(e).map((function(e){var t=Lx(e,2),r=t[0],i=t[1],a=n(i);return[r,{name:a,class:".".concat(a),id:"#".concat(a),toString:function(){return a}}]})));return Object.assign(r,{prefix:n}),r};function Tj(e){if(kx(e))return[e,e,e,e];if(cE(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function Aj(e,t,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(e){e.node().removeChildren()}),e?n(t):(r&&i(t),null)}var Cj=Mj({text:"text"},"title");function Pj(e){return/\S+-\S+/g.test(e)?e.split("-").map((function(e){return e[0]})):e.length>2?[e[0]]:e.split("")}function Rj(e,t){var n=Object.entries(t).reduce((function(t,n){var r=Lx(n,2),i=r[0],a=r[1];return e.node().attr(i)||(t[i]=a),t}),{});e.styles(n)}var Nj=function(e){function t(t){return e.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return Cx(t,e),t.prototype.getAvailableSpace=function(){var e=this.attributes,t=e.width,n=e.height,r=e.position,i=e.spacing,a=e.inset,o=this.querySelector(Cj.text.class);if(!o)return new _j(0,0,+t,+n);var s=o.getBBox(),u=s.width,l=s.height,c=Lx(Tj(i),4),h=c[0],d=c[1],f=c[2],p=c[3],v=Lx([0,0,+t,+n],4),g=v[0],m=v[1],y=v[2],b=v[3],x=Pj(r);if(x.includes("i"))return new _j(g,m,y,b);x.forEach((function(e,r){var i,a,o,s;"t"===e&&(i=Lx(0===r?[l+f,+n-l-f]:[0,+n],2),m=i[0],b=i[1]),"r"===e&&(a=Lx([+t-u-p],1),y=a[0]),"b"===e&&(o=Lx([+n-l-h],1),b=o[0]),"l"===e&&(s=Lx(0===r?[u+d,+t-u-d]:[0,+t],2),g=s[0],y=s[1])}));var E=Lx(Tj(a),4),w=E[0],k=E[1],S=E[2],_=E[3],M=Lx([_+k,w+S],2),T=M[0],A=M[1];return new _j(g+_,m+w,y-T,b-A)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new _j(0,0,0,0)},t.prototype.render=function(e,t){var n=this,r=(e.width,e.height,e.position,e.spacing,Rx(e,["width","height","position","spacing"])),i=Lx(Ej(r),1)[0],a=function(e){var t,n,r,i,a=e,o=a.width,s=a.height,u=a.position,l=Lx([+o/2,+s/2],2),c=Lx([+l[0],+l[1],"center","middle"],4),h=c[0],d=c[1],f=c[2],p=c[3],v=Pj(u);return v.includes("l")&&(h=(t=Lx([0,"start"],2))[0],f=t[1]),v.includes("r")&&(h=(n=Lx([+o,"end"],2))[0],f=n[1]),v.includes("t")&&(d=(r=Lx([0,"top"],2))[0],p=r[1]),v.includes("b")&&(d=(i=Lx([+s,"bottom"],2))[0],p=i[1]),{x:h,y:d,textAlign:f,textBaseline:p}}(e),o=a.x,s=a.y,u=a.textAlign,l=a.textBaseline;Aj(!!r.text,Sj(t),(function(e){n.title=e.maybeAppendByClassName(Cj.text,"text").styles(i).call(Rj,{x:o,y:s,textAlign:u,textBaseline:l}).node()}))},t}(vj),Oj=function(){};function Lj(e,t){return PE(e)?e.apply(void 0,Ix([],Lx(t),!1)):e}function Dj(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter((function(e){var n=Lx(e,1)[0];return!t.includes(n)})));return Object.fromEntries(t.map((function(t){return function(e){return"boolean"!==typeof e&&"enter"in e&&"update"in e&&"exit"in e}(e)?!1===e[t]?[t,!1]:[t,Px(Px({},e[t]),n)]:[t,n]})))}function Ij(e,t){e?e.finished.then(t):t()}function Fj(e,t){"update"in e?e.update(t):e.attr(t)}function Uj(e,t,n){return 0===t.length?null:n?e.animate(t,n):(Fj(e,{style:t.slice(-1)[0]}),null)}function Bj(e,t,n){var r={},i={};return Object.entries(t).forEach((function(t){var n=Lx(t,2),a=n[0],o=n[1];if(!_x(o)){var s=e.style[a]||e.parsedStyle[a]||0;s!==o&&(r[a]=s,i[a]=o)}})),n?Uj(e,[r,i],Px({fill:"both"},n)):(Fj(e,i),null)}function zj(e,t,n){void 0===n&&(n=!1);var r=e.getBBox(),i=r.width,a=r.height,o=t/Math.max(i,a);return n&&(e.style.transform="scale(".concat(o,")")),o}var Gj=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},Hj=Gj,jj=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},Vj=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},Wj=Vj;var Xj=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]},Yj=Mj({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),qj=function(e){function t(t){var n=e.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:Xj(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(e,t){return"".concat(e,"/").concat(t)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new NT({class:Yj.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new NT({class:Yj.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Cx(t,e),Object.defineProperty(t.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return Tx(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var e=Lx(function(e){var t;return(null===(t=e[0])||void 0===t?void 0:t.map((function(t,n){return e.map((function(e){return e[n]}))})))||[]}(this.pageViews.map((function(e){var t=e.getBBox();return[t.width,t.height]}))).map((function(e){return Math.max.apply(Math,Ix([],Lx(e),!1))})),2),t=e[0],n=e[1],r=this.attributes,i=r.pageWidth,a=void 0===i?t:i,o=r.pageHeight;return{pageWidth:a,pageHeight:void 0===o?n:o}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t=e.prototype.getBBox.call(this),n=t.x,r=t.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,s=a.pageHeight;return new _j(n,r,o+i.width,s)},t.prototype.goTo=function(e){var t=this,n=this.attributes.animate,r=this,i=r.currPage,a=r.playState,o=r.playWindow,s=r.pageViews;if("idle"!==a||e<0||s.length<=0||e>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=Lx(this.getFollowingPageDiff(e),2),l=u[0],c=u[1];this.playState="running";var h=Uj(o,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-l,", ").concat(-c,")")}],n);return Ij(h,(function(){t.innerCurrPage=e,t.playState="idle",t.setVisiblePages([e]),t.updatePageInfo()})),h},t.prototype.prev=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n<=0)return null;var r=e?(n-1+t)%t:Tx(n-1,0,t);return this.goTo(r)},t.prototype.next=function(){var e=this.attributes.loop,t=this.pageViews.length,n=this.currPage;if(!e&&n>=t-1)return null;var r=e?(n+1)%t:Tx(n+1,0,t);return this.goTo(r)},t.prototype.renderClipPath=function(e){var t=this.pageShape,n=t.pageWidth,r=t.pageHeight;n&&r?(this.clipPath=e.maybeAppendByClassName(Yj.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},t.prototype.setVisiblePages=function(e){this.playWindow.children.forEach((function(t,n){e.includes(n)?sj(t):uj(t)}))},t.prototype.adjustControllerLayout=function(){var e=this,t=e.prevBtnGroup,n=e.nextBtnGroup,r=e.pageInfoGroup,i=this.attributes,a=i.orientation,o=i.controllerPadding,s=r.getBBox(),u=s.width,l=(s.height,Lx("horizontal"===a?[-180,0]:[-90,90],2)),c=l[0],h=l[1];t.setLocalEulerAngles(c),n.setLocalEulerAngles(h);var d=t.getBBox(),f=d.width,p=d.height,v=n.getBBox(),g=v.width,m=v.height,y=Math.max(f,u,g),b="horizontal"===a?{offset:[[0,0],[f/2+o,0],[f+u+2*o,0]],textAlign:"start"}:{offset:[[y/2,-p-o],[y/2,0],[y/2,m+o]],textAlign:"center"},x=Lx(b.offset,3),E=Lx(x[0],2),w=E[0],k=E[1],S=Lx(x[1],2),_=S[0],M=S[1],T=Lx(x[2],2),A=T[0],C=T[1],P=b.textAlign,R=r.querySelector("text");R&&(R.style.textAlign=P),t.setLocalPosition(w,k),r.setLocalPosition(_,M),n.setLocalPosition(A,C)},t.prototype.updatePageInfo=function(){var e,t=this,n=t.currPage,r=t.pageViews,i=t.attributes.formatter;r.length<2||(null===(e=this.pageInfoGroup.querySelector(Yj.pageInfo.class))||void 0===e||e.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(e){var t=this.currPage;if(t===e)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=e<t?-1:1;return"horizontal"===n?[o*i,0]:[0,o*a]},t.prototype.prepareFollowingPage=function(e){var t=this.currPage,n=this.pageViews;if(this.setVisiblePages([e,t]),e!==t){var r=Lx(this.getFollowingPageDiff(e),2),i=r[0],a=r[1];n[e].setLocalPosition(i,a)}},t.prototype.renderController=function(e){var t=this,n=this.attributes.controllerSpacing,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=this.pageViews.length>=2,s=e.maybeAppendByClassName(Yj.controller,"g");if(lj(s.node(),o),o){var u=bj(this.attributes,"button"),l=bj(this.attributes,"pageNum"),c=Lx(Ej(u),2),h=c[0],d=c[1],f=h.size,p=Rx(h,["size"]),v=!s.select(Yj.prevBtnGroup.class).node(),g=s.maybeAppendByClassName(Yj.prevBtnGroup,"g").styles(d);this.prevBtnGroup=g.node();var m=g.maybeAppendByClassName(Yj.prevBtn,"path"),y=s.maybeAppendByClassName(Yj.nextBtnGroup,"g").styles(d);this.nextBtnGroup=y.node(),[m,y.maybeAppendByClassName(Yj.nextBtn,"path")].forEach((function(e){e.styles(Px(Px({},p),{transformOrigin:"center"})),zj(e.node(),f,!0)}));var b=s.maybeAppendByClassName(Yj.pageInfoGroup,"g");this.pageInfoGroup=b.node(),b.maybeAppendByClassName(Yj.pageInfo,"text").styles(l),this.updatePageInfo(),s.node().setLocalPosition(i+n,a/2),v&&(this.prevBtnGroup.addEventListener("click",(function(){t.prev()})),this.nextBtnGroup.addEventListener("click",(function(){t.next()})))}},t.prototype.render=function(e,t){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(a,")"));var o=Sj(t);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var e=this,t=sI((function(){return e.render(e.attributes,e)}),50);this.playWindow.addEventListener(zM.INSERTED,t),this.playWindow.addEventListener(zM.REMOVED,t)},t}(vj);function Kj(e){var t=function(e){var t="default";if(RE(e)&&e instanceof Image)t="image";else if(PE(e))t="symbol";else if(Mx(e)){var n=new RegExp("data:(image|text)");t=e.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?"url":"symbol"}return t}(e);return["base64","url","image"].includes(t)?"image":e&&"symbol"===t?"path":null}var Zj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),t.prototype.render=function(e,n){var r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=this.getSubShapeStyle(e),u=s.symbol,l=s.size,c=void 0===l?16:l,h=Rx(s,["symbol","size"]),d=Kj(u);Aj(!!d,Sj(n),(function(e){e.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call((function(e){if("image"===d){var n=2*c;e.styles({img:u,width:n,height:n,x:i-c,y:o-c})}else{n=c/2;var r=PE(u)?u:t.getSymbol(u);e.styles(Px({d:null===r||void 0===r?void 0:r(i,o,n)},h))}}))}))},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(e,n){t.MARKER_SYMBOL_MAP.set(e,n)},t.getSymbol=function(e){return t.MARKER_SYMBOL_MAP.get(e)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(vj);Zj.registerSymbol("cross",(function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]})),Zj.registerSymbol("hyphen",(function(e,t,n){return[["M",e-n,t],["L",e+n,t]]})),Zj.registerSymbol("line",jj),Zj.registerSymbol("plus",(function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]})),Zj.registerSymbol("tick",(function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]})),Zj.registerSymbol("circle",Gj),Zj.registerSymbol("point",Hj),Zj.registerSymbol("bowtie",(function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]})),Zj.registerSymbol("hexagon",(function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]})),Zj.registerSymbol("square",(function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]})),Zj.registerSymbol("diamond",(function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]})),Zj.registerSymbol("triangle",(function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]})),Zj.registerSymbol("triangle-down",(function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]})),Zj.registerSymbol("line",jj),Zj.registerSymbol("dot",Vj),Zj.registerSymbol("dash",Wj),Zj.registerSymbol("smooth",(function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]})),Zj.registerSymbol("hv",(function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]})),Zj.registerSymbol("vh",(function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]})),Zj.registerSymbol("hvh",(function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]})),Zj.registerSymbol("vhv",(function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}));Zj.registerSymbol("hiddenHandle",(function(e,t,n){var r=1.4*n;return[["M",e-n,t-r],["L",e+n,t-r],["L",e+n,t+r],["L",e-n,t+r],["Z"]]})),Zj.registerSymbol("verticalHandle",(function(e,t,n){var r=1.4*n,i=n/2,a=n/6,o=e+.4*r;return[["M",e,t],["L",o,t+i],["L",e+r,t+i],["L",e+r,t-i],["L",o,t-i],["Z"],["M",o,t+a],["L",e+r-2,t+a],["M",o,t-a],["L",e+r-2,t-a]]})),Zj.registerSymbol("horizontalHandle",(function(e,t,n){var r=1.4*n,i=n/2,a=n/6,o=t+.4*r;return[["M",e,t],["L",e-i,o],["L",e-i,t+r],["L",e+i,t+r],["L",e+i,o],["Z"],["M",e-a,o],["L",e-a,t+r-2],["M",e+a,o],["L",e+a,t+r-2]]}));var Jj,Qj;function $j(e,t,n){return void 0===e&&(e="horizontal"),"horizontal"===e?t:n}function eV(e){var t=e.getLocalBounds(),n=Lx([t.min,t.max],2),r=Lx(n[0],2),i=r[0],a=r[1],o=Lx(n[1],2),s=o[0],u=o[1];return{x:i,y:a,width:s-i,height:u-a,left:i,bottom:u,top:a,right:s}}function tV(e,t){var n=Lx(e,2),r=n[0],i=n[1],a=Lx(t,2),o=a[0],s=a[1];return r!==o&&i===s}function nV(e){return"function"===typeof e?e():Mx(e)||kx(e)?new wj({style:{text:String(e)}}):e}var rV=xG((function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Qj?Qj(e,n):(Jj||(Jj=pT.offscreenCanvasCreator.getOrCreateContext(void 0)),Jj.font=[a,o,i,"".concat(n,"px"),r].join(" "),Jj.measureText(e).width)}),(function(e,t){return[e,Object.values(t||iV(e)).join()].join("")}),4096),iV=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,a=e.style.fontSize;return{fontSize:a="object"===typeof a?a.value:a,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function aV(e){return"text"===e.nodeName?e:"g"===e.nodeName&&1===e.children.length&&"text"===e.children[0].nodeName?e.children[0]:null}function oV(e,t){var n=aV(e);n&&n.attr(t)}function sV(e,t,n){void 0===n&&(n="..."),oV(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}var uV=Mj({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");var lV=function(e){function t(t){return e.call(this,t,{span:[1,1],marker:function(){return new AT({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Cx(t,e),Object.defineProperty(t.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return!!e&&("string"===typeof e||"number"===typeof e?""!==e:"function"===typeof e||""!==e.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var e=this.labelGroup,t=this.valueGroup,n=this.attributes.markerSize,r=e.node().getBBox(),i=r.width,a=r.height,o=t.node().getBBox(),s=o.width,u=o.height;return{markerWidth:n,labelWidth:i,valueWidth:s,height:Math.max(n,a,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var t=Lx(Tj(e),2),n=t[0],r=t[1],i=this.showValue?r:0,a=n+i;return[n/a,i/a]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var e,t=this.attributes,n=t.markerSize,r=t.width,i=this.actualSpace,a=i.markerWidth,o=i.height,s=this.actualSpace,u=s.labelWidth,l=s.valueWidth,c=Lx(this.spacing,2),h=c[0],d=c[1];if(r){var f=r-n-h-d,p=Lx(this.span,2);u=(e=Lx([p[0]*f,p[1]*f],2))[0],l=e[1]}return{width:a+u+l+h+d,height:o,markerWidth:a,labelWidth:u,valueWidth:l}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var e=this.attributes.spacing;if(!e)return[0,0];var t=Lx(Tj(e),2),n=t[0],r=t[1];return this.showValue?[n,r]:[n,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var e=this.shape,t=e.markerWidth,n=e.labelWidth,r=e.valueWidth,i=e.width,a=e.height,o=Lx(this.spacing,2),s=o[0];return{height:a,width:i,markerWidth:t,labelWidth:n,valueWidth:r,position:[t/2,t+s,t+n+s+o[1]]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var e=function(e){var t=e.querySelector(uV.marker.class);return t?t.style:{}}(this.markerGroup.node()),t=this.attributes,n=t.markerSize,r=t.markerStrokeWidth,i=void 0===r?e.strokeWidth:r,a=t.markerLineWidth,o=void 0===a?e.lineWidth:a,s=t.markerStroke,u=void 0===s?e.stroke:s,l=+(i||o||(u?1:0))*Math.sqrt(2),c=this.markerGroup.node().getBBox(),h=c.width,d=c.height;return(1-l/Math.max(h,d))*n},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(e){var t=this,n=this.attributes.marker,r=bj(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(uV.markerGroup,"g").style("zIndex",0),Aj(!!n,this.markerGroup,(function(){var e,i=t.markerGroup.node(),a=null===(e=i.childNodes)||void 0===e?void 0:e[0],o="string"===typeof n?new Zj({style:{symbol:n},className:uV.marker.name}):n();a?o.nodeName===a.nodeName?a instanceof Zj?a.update(Px(Px({},r),{symbol:n})):(!function(e,t){var n,r,i=t.attributes;try{for(var a=Ox(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=Lx(o.value,2),u=s[0],l=s[1];"id"!==u&&"className"!==u&&e.attr(u,l)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(a,o),Sj(a).styles(r)):(a.remove(),Sj(o).attr("className",uV.marker.name).styles(r),i.appendChild(o)):(o instanceof Zj||Sj(o).attr("className",uV.marker.name).styles(r),i.appendChild(o)),t.markerGroup.node().scale(1/t.markerGroup.node().getScale()[0]);var s=zj(t.markerGroup.node(),t.scaleSize,!0);t.markerGroup.node().style._transform="scale(".concat(s,")")}))},t.prototype.renderLabel=function(e){var t=bj(this.attributes,"label"),n=t.text,r=Rx(t,["text"]);this.labelGroup=e.maybeAppendByClassName(uV.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(uV.label,(function(){return nV(n)})).styles(r)},t.prototype.renderValue=function(e){var t=this,n=bj(this.attributes,"value"),r=n.text,i=Rx(n,["text"]);this.valueGroup=e.maybeAppendByClassName(uV.valueGroup,"g").style("zIndex",0),Aj(this.showValue,this.valueGroup,(function(){t.valueGroup.maybeAppendByClassName(uV.value,(function(){return nV(r)})).styles(i)}))},t.prototype.renderBackground=function(e){var t=this.shape,n=t.width,r=t.height,i=bj(this.attributes,"background");this.background=e.maybeAppendByClassName(uV.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(uV.background,"rect").styles(Px({width:n,height:r},i))},t.prototype.adjustLayout=function(){var e=this.layout,t=e.labelWidth,n=e.valueWidth,r=e.height,i=Lx(e.position,3),a=i[0],o=i[1],s=i[2],u=r/2;this.markerGroup.styles({transform:"translate(".concat(a,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(o,", ").concat(u,")")}),sV(this.labelGroup.select(uV.label.class).node(),Math.ceil(t)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(s,", ").concat(u,")")}),sV(this.valueGroup.select(uV.value.class).node(),Math.ceil(n)))},t.prototype.render=function(e,t){var n=Sj(t),r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a;n.styles({transform:"translate(".concat(i,", ").concat(o,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()},t}(vj),cV=Mj({page:"item-page",navigator:"navigator",item:"item"},"items"),hV=function(e,t,n){return void 0===n&&(n=!0),e?t(e):n},dV=function(e){function t(t){var n=e.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:Oj,mouseenter:Oj,mouseleave:Oj})||this;return n.navigatorShape=[0,0],n}return Cx(t,e),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var e=this.attributes,t=e.gridRow,n=e.gridCol,r=e.data;if(!t&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return t&&n?[t,n]:t?[t,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var e=this.attributes,t=e.data,n=e.layout,r=bj(this.attributes,"item"),i=t.map((function(e,i){var a=e.id,o=void 0===a?i:a,s=e.label,u=e.value;return{id:"".concat(o),index:i,style:Px({layout:n,labelText:s,valueText:u},Object.fromEntries(Object.entries(r).map((function(n){var r=Lx(n,2);return[r[0],Lj(r[1],[e,i,t])]}))))}}));return i},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var e=this,t=this.attributes,n=t.orientation,r=t.width,i=t.rowPadding,a=t.colPadding,o=Lx(this.navigatorShape,1)[0],s=Lx(this.grid,2),u=s[0],l=s[1],c=l*u,h=0;return this.pageViews.children.map((function(t,s){var d,f,p=Math.floor(s/c),v=s%c,g=e.ifHorizontal(l,u),m=[Math.floor(v/g),v%g];"vertical"===n&&m.reverse();var y=Lx(m,2),b=y[0],x=y[1],E=(r-o-(l-1)*a)/l,w=t.getBBox().height,k=Lx([0,0],2),S=k[0],_=k[1];return"horizontal"===n?(S=(d=Lx([h,b*(w+i)],2))[0],_=d[1],h=x===l-1?0:h+E+a):(S=(f=Lx([x*(E+a),h],2))[0],_=f[1],h=b===u-1?0:h+w+i),{page:p,index:s,row:b,col:x,pageIndex:v,width:E,height:w,x:S,y:_}}))},t.prototype.getFlexLayout=function(){var e=this.attributes,t=e.width,n=e.height,r=e.rowPadding,i=e.colPadding,a=Lx(this.navigatorShape,1)[0],o=Lx(this.grid,2),s=o[0],u=o[1],l=Lx([t-a,n],2),c=l[0],h=l[1],d=Lx([0,0,0,0,0,0,0,0],8),f=d[0],p=d[1],v=d[2],g=d[3],m=d[4],y=d[5],b=d[6],x=d[7];return this.pageViews.children.map((function(e,t){var n,a,o,l,d=e.getBBox(),E=d.width,w=d.height,k=0===b?0:i,S=b+k+E;return S<=c&&hV(m,(function(e){return e<u}))?(n=Lx([b+k,x,S],3),f=n[0],p=n[1],b=n[2],{width:E,height:w,x:f,y:p,page:v,index:t,pageIndex:g++,row:y,col:m++}):(a=Lx([y+1,0,0,x+w+r],4),y=a[0],m=a[1],b=a[2],(x=a[3])+w<=h&&hV(y,(function(e){return e<s}))?(o=Lx([b,x,E],3),f=o[0],p=o[1],b=o[2],{width:E,height:w,x:f,y:p,page:v,index:t,pageIndex:g++,row:y,col:m++}):(l=Lx([0,0,E,0,v+1,0,0,0],8),f=l[0],p=l[1],b=l[2],x=l[3],v=l[4],g=l[5],y=l[6],m=l[7],{width:E,height:w,x:f,y:p,page:v,index:t,pageIndex:g++,row:y,col:m++}))}))},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,t=e.call(this);return t.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):t},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(e,t){return $j(this.attributes.orientation,e,t)},t.prototype.flattenPage=function(e){e.querySelectorAll(cV.item.class).forEach((function(t){e.appendChild(t)})),e.querySelectorAll(cV.page.class).forEach((function(t){e.removeChild(t).destroy()}))},t.prototype.renderItems=function(e){var t=this.attributes,n=t.click,r=t.mouseenter,i=t.mouseleave;this.flattenPage(e);var a=this.dispatchCustomEvent.bind(this);Sj(e).selectAll(cV.item.class).data(this.renderData,(function(e){return e.id})).join((function(e){return e.append((function(e){var t=e.style;return new lV({style:t})})).attr("className",cV.item.name).on("click",(function(){null===n||void 0===n||n(this),a("itemClick",{item:this})})).on("pointerenter",(function(){null===r||void 0===r||r(this),a("itemMouseenter",{item:this})})).on("pointerleave",(function(){null===i||void 0===i||i(this),a("itemMouseleave",{item:this})}))}),(function(e){return e.each((function(e){var t=e.style;this.update(t)}))}),(function(e){return e.remove()}))},t.prototype.relayoutNavigator=function(){var e,t=this.attributes,n=t.layout,r=t.width,i=(null===(e=this.pageViews.children[0])||void 0===e?void 0:e.getBBox().height)||0,a=Lx(this.navigatorShape,2),o=a[0],s=a[1];this.navigator.update("grid"===n?{pageWidth:r-o,pageHeight:i-s}:{})},t.prototype.adjustLayout=function(){var e,t,n=this,r=Object.entries((e=this.itemsLayout,t="page",e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{}))).map((function(e){var t=Lx(e,2);return{page:t[0],layouts:t[1]}})),i=Ix([],Lx(this.navigator.getContainer().children),!1);r.forEach((function(e){var t=e.layouts,r=n.pageViews.appendChild(new NT({className:cV.page.name}));t.forEach((function(e){var t=e.x,n=e.y,a=e.index,o=e.width,s=e.height,u=i[a];r.appendChild(u),vN(u,"__layout__",e),u.update({x:t,y:n,width:o,height:s})}))})),this.relayoutNavigator()},t.prototype.renderNavigator=function(e){var t=this.attributes.orientation,n=bj(this.attributes,"nav"),r=hj({orientation:t},n),i=this;return e.selectAll(cV.navigator.class).data(["nav"]).join((function(e){return e.append((function(){return new qj({style:r})})).attr("className",cV.navigator.name).each((function(){i.navigator=this}))}),(function(e){return e.each((function(){this.update(r)}))}),(function(e){return e.remove()})),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(e,t){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator(Sj(t));this.renderItems(r.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(e,t){var n=new PM(e,{detail:t});this.dispatchEvent(n)},t}(vj),fV=Mj({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),pV={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},vV=(function(e){function t(t){return e.call(this,t,pV)||this}Cx(t,e),t.prototype.render=function(e,t){var n=Sj(t).maybeAppendByClassName(fV.markerGroup,"g");this.renderMarker(n);var r=Sj(t).maybeAppendByClassName(fV.labelGroup,"g");this.renderLabel(r)},t.prototype.renderMarker=function(e){var t=this,n=this.attributes,r=n.orientation,i=n.markerSymbol,a=void 0===i?$j(r,"horizontalHandle","verticalHandle"):i;Aj(!!a,e,(function(e){var n=bj(t.attributes,"marker"),r=Px({symbol:a},n);t.marker=e.maybeAppendByClassName(fV.marker,(function(){return new Zj({style:r})})).update(r)}))},t.prototype.renderLabel=function(e){var t=this,n=this.attributes,r=n.showLabel,i=n.orientation,a=n.spacing,o=void 0===a?0:a,s=n.formatter;Aj(r,e,(function(e){var n,r=bj(t.attributes,"label"),a=r.text,u=Rx(r,["text"]),l=(null===(n=e.select(fV.marker.class))||void 0===n?void 0:n.node().getBBox())||{},c=l.width,h=void 0===c?0:c,d=l.height,f=Lx($j(i,[0,(void 0===d?0:d)+o,"center","top"],[h+o,0,"start","middle"]),4),p=f[0],v=f[1],g=f[2],m=f[3];e.maybeAppendByClassName(fV.label,"text").styles(Px(Px({},u),{x:p,y:v,text:s(a).toString(),textAlign:g,textBaseline:m}))}))}}(vj),{showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12}),gV=hj({},vV,{}),mV=(hj({},vV,xj(pV,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),Mj({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend")),yV=function(e){function t(t){return e.call(this,t,gV)||this}return Cx(t,e),t.prototype.renderTitle=function(e,t,n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=Lx(Ej(bj(this.attributes,"title")),2),s=o[0],u=o[1];this.titleGroup=e.maybeAppendByClassName(mV.titleGroup,"g").styles(u);var l=Px(Px({width:t,height:n},s),{text:i?a:""});this.title=this.titleGroup.maybeAppendByClassName(mV.title,(function(){return new Nj({style:l})})).update(l)},t.prototype.renderItems=function(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=Lx(Ej(bj(this.attributes,"title",!0)),2),s=o[0],u=o[1],l=Px(Px({},s),{width:i,height:a,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(mV.itemsGroup,"g").styles(Px(Px({},u),{transform:"translate(".concat(n,", ").concat(r,")")}));var c=this;this.itemsGroup.selectAll(mV.items.class).data(["items"]).join((function(e){return e.append((function(){return new dV({style:l})})).attr("className",mV.items.name).each((function(){c.items=Sj(this)}))}),(function(e){return e.update(l)}),(function(e){return e.remove()}))},t.prototype.adjustLayout=function(){if(this.attributes.showTitle){var e=this.title.node().getAvailableSpace(),t=e.x,n=e.y;this.itemsGroup.node().style.transform="translate(".concat(t,", ").concat(n,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,t=e.showTitle,n=e.width,r=e.height;return t?this.title.node().getAvailableSpace():new _j(0,0,n,r)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var t,n,r=null===(t=this.title)||void 0===t?void 0:t.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?function(e,t){var n=e.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=e.getBBox(),u=t.getBBox(),l=Pj(r),c=Lx(Tj(o?i:0),4),h=c[0],d=c[1],f=c[2],p=c[3],v=Lx(Tj(a),4),g=v[0],m=v[1],y=v[2],b=v[3],x=Lx([p+d,h+f],2),E=x[0],w=x[1],k=Lx([b+m,g+y],2),S=k[0],_=k[1];if("l"===l[0])return new _j(s.x,s.y,u.width+s.width+E+S,Math.max(u.height+_,s.height));if("t"===l[0])return new _j(s.x,s.y,Math.max(u.width+S,s.width),u.height+s.height+w+_);var M=Lx([t.attributes.width||u.width,t.attributes.height||u.height],2),T=M[0],A=M[1];return new _j(u.x,u.y,T+s.width+E+S,A+s.height+w+_)}(r,i):e.prototype.getBBox.call(this)},t.prototype.render=function(e,t){var n=this.attributes,r=n.width,i=n.height,a=n.x,o=void 0===a?0:a,s=n.y,u=void 0===s?0:s,l=Sj(t);t.style.transform="translate(".concat(o,", ").concat(u,")"),this.renderTitle(l,r,i),this.renderItems(l,this.availableSpace),this.adjustLayout()},t}(vj);function bV(e){var t=e.width,n=e.height,r=e.renderer,i=function(e){var t,n=e.container,r=e.className,i=e.graphCanvas;if(n)return"string"===typeof n?document.getElementById(n):n;var a=NG(r,!1),o=e.width,s=e.height,u=e.containerStyle,l=function(e){var t=e.width,n=e.height,r=e.placement,i=e.graphCanvas,a=i.getSize(),o=x(a,2),s=o[0],u=o[1],l=x(FR(r),2),c=l[0],h=l[1];return[c*(s-t),h*(u-n)]}(e),c=x(l,2),h=c[0],d=c[1];return Object.assign(a.style,Object.assign({position:"absolute",left:h+"px",top:d+"px",width:o+"px",height:s+"px"},u)),null===(t=i.getContainer())||void 0===t||t.appendChild(a),a}(e);return[i,new oA({width:t,height:n,container:i,renderer:r||new ML})]}var xV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},EV=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).typePrefix="__data__",r.draw=!1,r.fieldMap={node:new Map,edge:new Map,combo:new Map},r.selectedItems=[],r.bindEvents=function(){r.context.graph.on(xC.AFTER_DRAW,r.createElement)},r.changeState=function(e,t){var n=r.context.graph,i=r.typePrefix,a=pN(e,[i,"id"]),o=pN(e,[i,"style","labelText"]),s=x(a.split("__"),1)[0],u=r.fieldMap[s].get(o)||[];n.setElementState(Object.fromEntries(null===u||void 0===u?void 0:u.map((function(e){return[e,t]}))))},r.click=function(e){if("hover"!==r.options.trigger){var t=pN(e,[r.typePrefix,"id"]);r.selectedItems.includes(t)?(r.selectedItems=r.selectedItems.filter((function(e){return e!==t})),r.changeState(e,[])):(r.selectedItems.push(t),r.changeState(e,"selected"))}},r.mouseleave=function(e){"click"!==r.options.trigger&&(r.selectedItems=[],r.changeState(e,[]))},r.mouseenter=function(e){if("click"!==r.options.trigger){var t=pN(e,[r.typePrefix,"id"]);r.selectedItems.includes(t)?r.selectedItems=r.selectedItems.filter((function(e){return e!==t})):(r.selectedItems.push(t),r.changeState(e,"active"))}},r.setFieldMap=function(e,t,n){if(e){var i=r.fieldMap[n];if(i)if(i.has(e)){var a=i.get(e);a&&(a.push(t),i.set(e,a))}else i.set(e,[t])}},r.getEvents=function(){return{mouseenter:r.mouseenter,mouseleave:r.mouseleave,click:r.click}},r.getMarkerData=function(e,t){if(!e)return[];var n=r.context,i=n.model,a=n.element,o=i.getData(),s=o.nodes,u=o.edges,l=o.combos,c={},h=function(t){return PE(e)?e(t):e},d={node:"circle",edge:"line",combo:"rect"},f={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=function(e,t){e.forEach((function(e){var n=e.id,i=pN(e,["data",h(e)]),o=(null===a||void 0===a?void 0:a.getElementType(t,e))||"circle",s=function(e,t){return null===a||void 0===a?void 0:a.getElementComputedStyle(e,t)}(t,e),u=("edge"===t?null===s||void 0===s?void 0:s.stroke:null===s||void 0===s?void 0:s.fill)||"#1783ff";n&&i&&i.replace(/\s+/g,"")&&(r.setFieldMap(i,n,t),c[i]||(c[i]={id:"".concat(t,"__").concat(n),label:i,marker:f[o]||d[t],elementType:t,lineWidth:1,stroke:u,fill:u}))}))};switch(t){case"node":p(s,"node");break;case"edge":p(u,"edge");break;case"combo":p(l,"combo");break;default:return[]}return Object.values(c)},r.createElement=function(){if(r.draw)r.updateElement();else{var e=r.options,t=e.width,n=e.height,i=e.nodeField,a=e.edgeField,o=e.comboField,s=(e.trigger,e.position,e.container,e.containerStyle,e.className,xV(e,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"])),u=r.getMarkerData(i,"node"),l=r.getMarkerData(a,"edge"),c=r.getMarkerData(o,"combo"),h=[].concat(I(u),I(c),I(l)),d=Object.assign({width:t,height:n,data:h,itemMarkerLineWidth:function(e){return e.lineWidth},itemMarker:function(e){return e.marker},itemMarkerStroke:function(e){return e.stroke},itemMarkerFill:function(e){return e.fill},gridCol:u.length},s,r.getEvents()),f=new yV({className:"legend",style:d});r.category=f,r.upsertCanvas().appendChild(f),r.draw=!0}},r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.clear(),this.createElement()}},{key:"clear",value:function(){var e,t;null===(e=this.canvas)||void 0===e||e.destroy(),null===(t=this.container)||void 0===t||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}},{key:"updateElement",value:function(){var e=this;this.category&&this.category.update({itemMarkerOpacity:function(t){var n=t.id;return!e.selectedItems.length||e.selectedItems.includes(n)?1:.5},itemLabelOpacity:function(t){var n=t.id;return!e.selectedItems.length||e.selectedItems.includes(n)?1:.5}})}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var e=this.context.canvas,t=x(e.getSize(),2),n=t[0],r=t[1],i=this.options,a=i.width,o=void 0===a?n:a,s=i.height,u=void 0===s?r:s,l=i.position,c=i.container,h=i.containerStyle,d=i.className,f=x(bV({width:o,height:u,graphCanvas:e,container:c,containerStyle:h,placement:l,className:"legend"}),2),p=f[0],v=f[1];return this.container=p,d&&p.classList.add(d),this.canvas=v,this.canvas}},{key:"destroy",value:function(){this.clear(),this.context.graph.off(xC.AFTER_DRAW,this.createElement),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);EV.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};var wV=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).onDraw=function(e){var t;(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.render)||r.onRender()},r.shapes=new Map,r.landmarkMap=new Map,r.mask=null,r.isMaskDragging=!1,r.onMaskDragStart=function(e){r.mask&&(r.isMaskDragging=!0,r.mask.setPointerCapture(e.pointerId),r.mask.addEventListener("pointermove",r.onMaskDrag),r.mask.addEventListener("pointerup",r.onMaskDragEnd),r.mask.addEventListener("pointercancel",r.onMaskDragEnd))},r.onMaskDrag=function(e){if(r.mask&&r.isMaskDragging){var t=x(r.options.size,2),n=t[0],i=t[1],a=e.movementX,o=e.movementY,s=r.mask.style,u=s.left,l=s.top,c=s.width,h=s.height,d=x(r.maskBBox,4),f=d[2],p=d[3],v=parseInt(u)+a,g=parseInt(l)+o,m=parseInt(c),y=parseInt(h);v<0&&(v=0),g<0&&(g=0),v+m>n&&(v=SV(n-m,0)),g+y>i&&(g=SV(i-y,0)),m<f&&(a>0?(v=SV(v-a,0),m=kV(m+a,n)):a<0&&(m=kV(m-a,n))),y<p&&(o>0?(g=SV(g-o,0),y=kV(y+o,i)):o<0&&(y=kV(y-o,i))),Object.assign(r.mask.style,{left:v+"px",top:g+"px",width:m+"px",height:y+"px"});var b=parseInt(u)-v,E=parseInt(l)-g;if(0!==b||0!==E){var w=r.context.canvas.getCamera().getZoom()/r.canvas.getCamera().getZoom();r.context.graph.translateBy([b*w,E*w],!1)}}},r.onMaskDragEnd=function(e){r.mask&&(r.isMaskDragging=!1,r.mask.releasePointerCapture(e.pointerId),r.mask.removeEventListener("pointermove",r.onMaskDrag),r.mask.removeEventListener("pointerup",r.onMaskDragEnd),r.mask.removeEventListener("pointercancel",r.onMaskDragEnd))},r.onTransform=rP((function(){r.isMaskDragging||(r.updateMask(),r.setCamera())}),32,{leading:!0}),r.setOnRender(),r.bindEvents(),r}return C(t,e),p(t,[{key:"update",value:function(e){this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),"delay"in e&&this.setOnRender(),this.bindEvents()}},{key:"setOnRender",value:function(){var e=this;this.onRender=sI((function(){e.renderMinimap(),e.renderMask()}),this.options.delay,!0)}},{key:"bindEvents",value:function(){var e=this.context.graph;e.on(xC.AFTER_DRAW,this.onDraw),e.on(xC.AFTER_RENDER,this.onRender),e.on(xC.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(xC.AFTER_DRAW,this.onDraw),e.off(xC.AFTER_RENDER,this.onRender),e.off(xC.AFTER_TRANSFORM,this.onTransform)}},{key:"renderMinimap",value:function(){var e=this.getElements(),t=this.initCanvas();this.setShapes(t,e)}},{key:"getElements",value:function(){var e=this.options.filter,t=this.context.model.getData();if(!e)return t;var n=t.nodes,r=t.edges,i=t.combos;return{nodes:n.filter((function(t){return e(eR(t),"node")})),edges:r.filter((function(t){return e(eR(t),"edge")})),combos:i.filter((function(t){return e(eR(t),"combo")}))}}},{key:"setShapes",value:function(e,t){var n=this,r=t.nodes,i=t.edges,a=t.combos,o=this.options.shape,s=this.context.element;if("key"===o){var u=new Set,l=function(t){var r=eR(t);u.add(r);var i=s.getElement(r);if(i){var a=i.getShape("key"),o=n.shapes.get(r)||a.cloneNode();o.setPosition(a.getPosition()),i.style.zIndex&&(o.style.zIndex=i.style.zIndex),o.id=i.id,n.shapes.has(r)?Object.entries(a.attributes).forEach((function(e){var t=x(e,2),n=t[0],r=t[1];o.style[n]!==r&&(o.style[n]=r)})):(e.appendChild(o),n.shapes.set(r,o))}};return i.forEach(l),a.forEach(l),r.forEach(l),void this.shapes.forEach((function(t,r){u.has(r)||(e.removeChild(t),n.shapes.delete(r))}))}var c=function(e,t){var n=s.getElement(e).getPosition();return t.setPosition(n),t};e.removeChildren(),i.forEach((function(t){return e.appendChild(o(eR(t),"edge"))})),a.forEach((function(t){e.appendChild(c(eR(t),o(eR(t),"combo")))})),r.forEach((function(t){e.appendChild(c(eR(t),o(eR(t),"node")))}))}},{key:"initCanvas",value:function(){var e=this.options,t=e.renderer,n=x(e.size,2),r=n[0],i=n[1];if(this.canvas){var a=this.canvas.getConfig(),o=a.width,s=a.height;r===o&&i===s||this.canvas.resize(r,i),t&&this.canvas.setRenderer(t)}else{var u=this.options,l=u.className,c=x(bV({renderer:t,width:r,height:i,placement:u.position,className:"minimap",container:u.container,containerStyle:u.containerStyle,graphCanvas:this.context.canvas}),2),h=c[0],d=c[1];l&&h.classList.add(l),this.container=h,this.canvas=d}return this.setCamera(),this.canvas}},{key:"createLandmark",value:function(e,t,n){var r="".concat(e.join(","),"-").concat(t.join(","),"-").concat(n);if(this.landmarkMap.has(r))return this.landmarkMap.get(r);var i=this.canvas.getCamera().createLandmark(r,{position:e,focalPoint:t,zoom:n});return this.landmarkMap.set(r,i),i}},{key:"setCamera",value:function(){var e,t=this.context.canvas,n=null===(e=this.canvas)||void 0===e?void 0:e.getCamera();if(n){var r=this.options,i=x(r.size,2),a=i[0],o=i[1],s=x(uP(r.padding),4),u=s[0],l=s[1],c=s[2],h=s[3],d=t.getBounds("elements"),f=d.min,p=d.max,v=d.center,g=(a-h-l)/(p[0]-f[0]),m=(o-u-c)/(p[1]-f[1]),y=Math.min(g,m),b=this.createLandmark(v,v,y);n.gotoLandmark(b,0)}}},{key:"maskBBox",get:function(){var e=this.context.canvas,t=e.getSize(),n=e.getCanvasByViewport([0,0]),r=e.getCanvasByViewport(t),i=this.canvas.canvas2Viewport(jR(n)),a=this.canvas.canvas2Viewport(jR(r)),o=a.x-i.x,s=a.y-i.y;return[i.x,i.y,o,s]}},{key:"calculateMaskBBox",value:function(){var e=x(this.options.size,2),t=e[0],n=e[1],r=x(this.maskBBox,4),i=r[0],a=r[1],o=r[2],s=r[3];return i<0&&(o=kV(o+i,t),i=0),a<0&&(s=kV(s+a,n),a=0),i+o>t&&(o=SV(t-i,0)),a+s>n&&(s=SV(n-a,0)),[kV(i,t),kV(a,n),SV(o,0),SV(s,0)]}},{key:"renderMask",value:function(){var e=this.options.maskStyle;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart)),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}},{key:"updateMask",value:function(){if(this.mask){var e=x(this.calculateMaskBBox(),4),t=e[0],n=e[1],r=e[2],i=e[3];Object.assign(this.mask.style,{top:n+"px",left:t+"px",width:r+"px",height:i+"px"})}}},{key:"destroy",value:function(){var e;this.unbindEvents(),this.canvas.destroy(),null===(e=this.mask)||void 0===e||e.remove(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);wV.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};var kV=function(e,t){return Math.min(e,t)},SV=function(e,t){return Math.max(e,t)},_V=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},MV={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"},TV=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).initSnapline=function(){var e=r.context.canvas.getLayer("transient");r.horizontalLine||(r.horizontalLine=e.appendChild(new FT({style:Object.assign(Object.assign({},MV),r.options.horizontalLineStyle)}))),r.verticalLine||(r.verticalLine=e.appendChild(new FT({style:Object.assign(Object.assign({},MV),r.options.verticalLineStyle)})))},r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!0,r.autoSnapToLine=function(e,t,n){return _V(r,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f,p,v,g,m,y;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n.verticalX,a=n.horizontalY,o=this.options.tolerance,s=x(t.min,2),l=s[0],c=s[1],h=x(t.max,2),d=h[0],f=h[1],p=x(t.center,2),v=p[0],g=p[1],m=0,y=0,null!==i&&(AV(d,i)<o&&(m=i-d),AV(l,i)<o&&(m=i-l),AV(v,i)<o&&(m=i-v),0!==m&&(this.isVerticalSticking=!0)),null!==a&&(AV(f,a)<o&&(y=a-f),AV(c,a)<o&&(y=a-c),AV(g,a)<o&&(y=a-g),0!==y&&(this.isHorizontalSticking=!0)),0===m&&0===y){r.next=10;break}return r.next=10,this.context.graph.translateElementBy(P({},e,[m,y]),!1);case 10:case"end":return r.stop()}}),r,this)})))},r.enableSnap=function(e){var t=e.target,n=.5;if(r.isHorizontalSticking||r.isVerticalSticking){var i=x(r.getDelta(e),2),a=i[0],o=i[1];if(r.isHorizontalSticking&&r.isVerticalSticking&&Math.abs(a)<=n&&Math.abs(o)<=n)return r.context.graph.translateElementBy(P({},t.id,[-a,-o]),!1),!1;if(r.isHorizontalSticking&&Math.abs(o)<=n)return r.context.graph.translateElementBy(P({},t.id,[0,-o]),!1),!1;if(r.isVerticalSticking&&Math.abs(a)<=n)return r.context.graph.translateElementBy(P({},t.id,[-a,0]),!1),!1;r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!1,setTimeout((function(){r.enableStick=!0}),200)}return r.enableStick},r.calcSnaplineMetadata=function(e,t){var n=r.options,i=n.tolerance,a=n.shape,o=x(t.min,2),s=o[0],u=o[1],l=x(t.max,2),c=l[0],h=l[1],d=x(t.center,2),f=d[0],p=d[1],v=null,g=null,m=null,y=null,b=null,E=null;return r.getNodes().some((function(t){if(AC(e.id,t.id))return!1;var n=CV(t,a).getRenderBounds(),r=x(n.min,2),o=r[0],l=r[1],d=x(n.max,2),w=d[0],k=d[1],S=x(n.center,2),_=S[0],M=S[1];return null===v&&(AV(_,f)<i?v=_:AV(o,s)<i||AV(o,c)<i?v=o:(AV(w,c)<i||AV(w,s)<i)&&(v=w),null!==v&&(g=Math.min(l,u),m=Math.max(k,h))),null===y&&(AV(M,p)<i?y=M:AV(l,u)<i||AV(l,h)<i?y=l:(AV(k,h)<i||AV(k,u)<i)&&(y=k),null!==y&&(b=Math.min(o,s),E=Math.max(w,c))),null!==v&&null!==y})),{verticalX:v,verticalMinY:g,verticalMaxY:m,horizontalY:y,horizontalMinX:b,horizontalMaxX:E}},r.onDragStart=function(){r.initSnapline()},r.onDrag=function(e){return _V(r,void 0,void 0,u().mark((function t(){var n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target,!this.options.autoSnap){t.next=5;break}if(this.enableSnap(e)){t.next=5;break}return t.abrupt("return");case 5:if(r=CV(n,this.options.shape).getRenderBounds(),i=this.calcSnaplineMetadata(n,r),this.hideSnapline(),null===i.verticalX&&null===i.horizontalY||this.updateSnapline(i),!this.options.autoSnap){t.next=12;break}return t.next=12,this.autoSnapToLine(n.id,r,i);case 12:case"end":return t.stop()}}),t,this)})))},r.onDragEnd=function(){r.hideSnapline()},r.bindEvents(),r}return C(t,e),p(t,[{key:"getNodes",value:function(){var e,t=this,n=this.options.filter,r=((null===(e=this.context.element)||void 0===e?void 0:e.getNodes())||[]).filter((function(e){var n;return"hidden"!==pN(e,["style","visibility"])&&(null===(n=t.context.viewport)||void 0===n?void 0:n.isInViewport(e.getRenderBounds()))}));return n?r.filter((function(e){return n(e)})):r}},{key:"hideSnapline",value:function(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}},{key:"getLineWidth",value:function(e){return+(this.options["".concat(e,"LineStyle")].lineWidth||MV.lineWidth||1)/this.context.graph.getZoom()}},{key:"updateSnapline",value:function(e){var t=e.verticalX,n=e.verticalMinY,r=e.verticalMaxY,i=e.horizontalY,a=e.horizontalMinX,o=e.horizontalMaxX,s=x(this.context.canvas.getSize(),2),u=s[0],l=s[1],c=this.options.offset;null!==i?Object.assign(this.horizontalLine.style,{x1:c===1/0?0:a-c,y1:i,x2:c===1/0?u:o+c,y2:i,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==t?Object.assign(this.verticalLine.style,{x1:t,y1:c===1/0?0:n-c,x2:t,y2:c===1/0?l:r+c,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}},{key:"getDelta",value:function(e){var t=this.context.graph.getZoom();return _R([e.dx,e.dy],t)}},{key:"bindEvents",value:function(){return _V(this,void 0,void 0,u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.context.graph).on(wC.DRAG_START,this.onDragStart),t.on(wC.DRAG,this.onDrag),t.on(wC.DRAG_END,this.onDragEnd);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(wC.DRAG_START,this.onDragStart),e.off(wC.DRAG,this.onDrag),e.off(wC.DRAG_END,this.onDragEnd)}},{key:"destroyElements",value:function(){var e,t;null===(e=this.horizontalLine)||void 0===e||e.destroy(),null===(t=this.verticalLine)||void 0===t||t.destroy()}},{key:"destroy",value:function(){this.destroyElements(),this.unbindEvents(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);TV.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:function(){return!0}};var AV=function(e,t){return Math.abs(e-t)},CV=function(e,t){return"function"===typeof t?t(e):e.getShape(t)};function PV(e,t){var n={YYYY:e.getFullYear(),MM:e.getMonth()+1,DD:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()},r=t;return Object.keys(n).forEach((function(e){var t=n[e];r=r.replace(e,"YYYY"===e?"".concat(t):"".concat(t).padStart(2,"0"))})),r}var RV={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new BT({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},NV=(xR({},RV,{style:{type:"arc"}}),xR({},RV,{style:{}}),Mj({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"));function OV(e,t){return[e[0]*t,e[1]*t]}function LV(e,t){return[e[0]+t[0],e[1]+t[1]]}function DV(e,t){return[e[0]-t[0],e[1]-t[1]]}function IV(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function FV(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function UV(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function BV(e){if(0===e[0]&&0===e[1])return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function zV(e){return e*Math.PI/180}function GV(e){return Number((180*e/Math.PI).toPrecision(5))}function HV(e,t){return e.style.opacity||(e.style.opacity=1),Bj(e,{opacity:0},t)}var jV=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function VV(e){return jV.includes(e)}function WV(e){var t={};for(var n in e)VV(n)&&(t[n]=e[n]);return t}var XV=Mj({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function YV(e){return e.reduce((function(e,t,n){return e.push(Ix([0===n?"M":"L"],Lx(t),!1)),e}),[])}function qV(e,t,n){return"surround"===t.type?function(e,t,n){var r=t.connect,i=void 0===r?"line":r,a=t.center;if("line"===i)return YV(e);if(!a)return[];var o=UV(e[0],a),s=n?0:1;return e.reduce((function(e,t,n){return 0===n?e.push(Ix(["M"],Lx(t),!1)):e.push(Ix(["A",o,o,0,0,s],Lx(t),!1)),e}),[])}(e,t,n):YV(e)}function KV(e,t,n){var r=n.type,i=n.connect,a=n.center,o=n.closed?[["Z"]]:[],s=Lx([qV(e,n),qV(t.slice().reverse(),n,!0)],2),u=s[0],l=s[1],c=Lx([e[0],t.slice(-1)[0]],2),h=c[0],d=c[1],f=function(e,t){return[u,e,l,t,o].flat()};if("line"===i||"surround"===r)return f([Ix(["L"],Lx(d),!1)],[Ix(["L"],Lx(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var p=Lx([UV(d,a),UV(h,a)],2),v=p[0],g=p[1];return f([Ix(["A",v,v,0,0,1],Lx(d),!1),Ix(["L"],Lx(d),!1)],[Ix(["A",g,g,0,0,0],Lx(h),!1),Ix(["L"],Lx(h),!1)])}var ZV=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),t.prototype.render=function(e,t){e.type,e.center,e.areaFill,e.closed;var n=Rx(e,["type","center","areaFill","closed"]),r=function(e){var t=e.data,n=void 0===t?[]:t;return e.closed?n.map((function(e){var t=e.points,n=Lx(t,1)[0];return Px(Px({},e),{points:Ix(Ix([],Lx(t),!1),[n],!1)})})):n}(e),i=Sj(t).maybeAppendByClassName(XV.lineGroup,"g"),a=Sj(t).maybeAppendByClassName(XV.regionGroup,"g"),o=function(e,t,n,r){var i=n.animate,a=n.isBillboard,o=t.map((function(e,t){return{id:e.id||"grid-line-".concat(t),d:qV(e.points,n)}}));return e.selectAll(XV.line.class).data(o,(function(e){return e.id})).join((function(e){return e.append("path").each((function(e,t){var n=Lj(WV(Px({d:e.d},r)),[e,t,o]);this.attr(Px({class:XV.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},n))}))}),(function(e){return e.transition((function(e,t){return Bj(this,Lj(WV(Px({d:e.d},r)),[e,t,o]),i.update)}))}),(function(e){return e.transition((function(){var e=this,t=HV(this,i.exit);return Ij(t,(function(){return e.remove()})),t}))})).transitions()}(i,r,e,n),s=function(e,t,n){var r=n.animate,i=n.connect,a=n.areaFill;if(t.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(e){return o[e%o.length]},u=[],l=0;l<t.length-1;l++){var c=Lx([t[l].points,t[l+1].points],2),h=KV(c[0],c[1],n);u.push({d:h,fill:s(l)})}return e.selectAll(XV.region.class).data(u,(function(e,t){return t})).join((function(e){return e.append("path").each((function(e,t){var n=Lj(e,[e,t,u]);this.attr(n)})).attr("className",XV.region.name)}),(function(e){return e.transition((function(e,t){return Bj(this,Lj(e,[e,t,u]),r.update)}))}),(function(e){return e.transition((function(){var e=this,t=HV(this,r.exit);return Ij(t,(function(){return e.remove()})),t}))})).transitions()}(a,r,e);return Ix(Ix([],Lx(o),!1),Lx(s),!1)},t}(vj),JV=function(e,t){return function(n){return e*(1-n)+t*n}};function QV(e,t){return"number"===typeof e&&"number"===typeof t?JV(e,t):Array.isArray(e)&&Array.isArray(t)?function(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=QV(e[s],t[s]);for(;s<n;++s)o[s]=t[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}(e,t):"object"===typeof e&&"object"===typeof t?function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n={},r={};return Object.entries(t).forEach((function(t){var i=Lx(t,2),a=i[0],o=i[1];a in e?n[a]=QV(e[a],o):r[a]=o})),function(e){return Object.entries(n).forEach((function(t){var n=Lx(t,2),i=n[0],a=n[1];return r[i]=a(e)})),r}}(e,t):function(t){return e}}function $V(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function eW(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var n=Lx(e,2);return[n[0],Lj(n[1],t)]})))}function tW(e,t){return t&&PE(t)?e.filter(t):e}function nW(e,t){var n=t.startAngle;return(t.endAngle-n)*e+n}function rW(e,t){if("linear"===t.type){var n=Lx(t.startPos,2),r=n[0],i=n[1],a=Lx(t.endPos,2),o=Lx([a[0]-r,a[1]-i],2);return BV([o[0],o[1]])}var s=zV(nW(e,t));return[-Math.sin(s),Math.cos(s)]}function iW(e,t,n){var r,i=rW(e,n);return r=i,"positive"!==t?[r[1],-r[0]]:[-r[1],r[0]]}function aW(e,t){return iW(e,t.labelDirection,t)}function oW(e,t){return"linear"===t.type?function(e,t){var n=Lx(t.startPos,2),r=n[0],i=n[1],a=Lx(t.endPos,2),o=Lx([a[0]-r,a[1]-i],2);return[r+o[0]*e,i+o[1]*e]}(e,t):function(e,t){var n=t.radius,r=Lx(t.center,2),i=r[0],a=r[1],o=zV(nW(e,t));return[i+n*Math.cos(o),a+n*Math.sin(o)]}(e,t)}function sW(e){return 0===rW(0,e)[1]}function uW(e){return 0===rW(0,e)[0]}function lW(e,t){return t-e===360}function cW(e,t,n,r,i){var a=t-e,o=Lx([i,i],2),s=o[0],u=o[1],l=Lx([zV(e),zV(t)],2),c=l[0],h=l[1],d=function(e){return[n+i*Math.cos(e),r+i*Math.sin(e)]},f=Lx(d(c),2),p=f[0],v=f[1],g=Lx(d(h),2),m=g[0],y=g[1];if(lW(e,t)){var b=Lx(d((h+c)/2),2);return[["M",p,v],["A",s,u,0,1,0,b[0],b[1]],["A",s,u,0,1,0,m,y]]}var x=a>180?1:0,E=e>t?0:1;return"M".concat(p,",").concat(v,",A").concat(s,",").concat(u,",0,").concat(x,",").concat(E,",").concat(m,",").concat(y)}function hW(e,t,n,r){var i=t.startAngle,a=t.endAngle,o=t.center,s=t.radius;return e.selectAll(NV.line.class).data([{d:cW.apply(void 0,Ix(Ix([i,a],Lx(o),!1),[s],!1))}],(function(e,t){return t})).join((function(e){return e.append("path").attr("className",NV.line.name).styles(t).styles({d:function(e){return e.d}})}),(function(e){return e.transition((function(){var e=this,t=function(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,a=void 0===i?0:i,o=QV(t,n),s=Math.ceil(+a/16),u=new Array(s).fill(0).map((function(e,t,n){return{__keyframe_data__:o(t/(n.length-1))}}));return e.animate(u,Px({fill:"both"},r))}(this,function(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,a=t.radius;return Ix(Ix([n,r],Lx(i),!1),[a],!1)}(this),Ix(Ix([i,a],Lx(o),!1),[s],!1),r.update);if(t){var n=function(){var t=pN(e.attributes,"__keyframe_data__");e.style.d=cW.apply(void 0,Ix([],Lx(t),!1))};t.onframe=n,t.onfinish=n}return t})).styles(t)}),(function(e){return e.remove()})).styles(n).transitions()}function dW(e){var t=Lx(e,2),n=Lx(t[0],2),r=n[0],i=n[1],a=Lx(t[1],2);return{x1:r,y1:i,x2:a[0],y2:a[1]}}function fW(e,t,n,r){var i=t.showTrunc,a=t.startPos,o=t.endPos,s=t.truncRange,u=t.lineExtension,l=Lx([a,o],2),c=Lx(l[0],2),h=c[0],d=c[1],f=Lx(l[1],2),p=f[0],v=f[1],g=Lx(u?function(e,t,n){void 0===n&&(n=[0,0]);var r=Lx([e,t,n],3),i=Lx(r[0],2),a=i[0],o=i[1],s=Lx(r[1],2),u=s[0],l=s[1],c=Lx(r[2],2),h=c[0],d=c[1],f=Lx([u-a,l-o],2),p=f[0],v=f[1],g=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),m=Lx([-h/g,d/g],2),y=m[0],b=m[1];return[y*p,y*v,b*p,b*v]}(a,o,u):new Array(4).fill(0),4),m=g[0],y=g[1],b=g[2],x=g[3],E=function(t){return e.selectAll(NV.line.class).data(t,(function(e,t){return t})).join((function(e){return e.append("line").attr("className",(function(e){return"".concat(NV.line.name," ").concat(e.className)})).styles(n).transition((function(e){return Bj(this,dW(e.line),!1)}))}),(function(e){return e.styles(n).transition((function(e){return Bj(this,dW(e.line),r.update)}))}),(function(e){return e.remove()})).transitions()};if(!i||!s)return E([{line:[[h+m,d+y],[p+b,v+x]],className:NV.line.name}]);var w=Lx(s,2),k=w[0],S=w[1],_=p-h,M=v-d,T=Lx([h+_*k,d+M*k],2),A=T[0],C=T[1],P=Lx([h+_*S,d+M*S],2),R=P[0],N=P[1],O=E([{line:[[h+m,d+y],[A,C]],className:NV.lineFirst.name},{line:[[R,N],[p+b,v+x]],className:NV.lineSecond.name}]);return function(e,t){t.truncRange,t.truncShape,t.lineExtension}(0,t),O}function pW(e,t,n){var r,i=t.type,a=bj(t,"line");return r="linear"===i?fW(e,t,$V(a,"arrow"),n):hW(e,t,$V(a,"arrow"),n),function(e,t,n,r){var i,a=n.showArrow,o=n.showTrunc,s=n.lineArrow,u=n.lineArrowOffset,l=n.lineArrowSize;if(i="arc"===t?e.select(NV.line.class):o?e.select(NV.lineSecond.class):e.select(NV.line.class),!a||!s||"arc"===n.type&&lW(n.startAngle,n.endAngle)){var c=i.node();c&&(c.style.markerEnd=void 0)}else{var h=nV(s);h.attr(r),zj(h,l,!0),i.style("markerEnd",h).style("markerEndOffset",-u)}}(e,i,t,a),r}function vW(e){var t=e.type,n=e.gridCenter;return"linear"===t?n:n||e.center}function gW(e,t){var n=t.gridLength;return e.map((function(e,r){var i=e.value,a=Lx(oW(i,t),2),o=a[0],s=a[1],u=Lx(OV(function(e,t){return iW(e,t.gridDirection,t)}(i,t),n),2);return{id:r,points:[[o,s],[o+u[0],s+u[1]]]}}))}function mW(e,t,n,r){var i=bj(n,"grid"),a=i.type,o=i.areaFill,s=vW(n),u=tW(t,n.gridFilter),l="segment"===a?gW(u,n):function(e,t){var n=t.gridControlAngles,r=vW(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var i=Lx(r,2),a=i[0],o=i[1];return e.map((function(e,r){var i=Lx(oW(e.value,t),2),s=i[0],u=i[1],l=Lx([s-a,u-o],2),c=l[0],h=l[1],d=[];return n.forEach((function(e){var t=zV(e),n=Lx([Math.cos(t),Math.sin(t)],2),r=n[0],i=n[1],s=c*r-h*i+a,u=c*i+h*r+o;d.push([s,u])})),{points:d,id:r}}))}(u,n),c=Px(Px({},i),{center:s,areaFill:PE(o)?u.map((function(e,t){return Lj(o,[e,t,u])})):o,animate:r,data:l});return e.selectAll(NV.grid.class).data([1]).join((function(e){return e.append((function(){return new ZV({style:c})})).attr("className",NV.grid.name)}),(function(e){return e.transition((function(){return this.update(c)}))}),(function(e){return e.remove()})).transitions()}function yW(e,t,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&e===t||i&&e===n)||e>t&&e<n}function bW(e,t){if(t)try{var n=t.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,(function(t,n,r){return"translate(".concat(function(e,t,n){var r=e.getBBox(),i=r.width,a=r.height,o=Lx([t,n].map((function(e,t){var n;return e.includes("%")?parseFloat((null===(n=e.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===t?i:a):e})),2);return[o[0],o[1]]}(e,n,r),")")}));e.attr("transform",n)}catch(GK){}}var xW=function(e){return void 0!==e&&null!=e&&!Number.isNaN(e)},EW=function(){function e(e,t,n,r){this.set(e,t,n,r)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(e,t,n){var r=this,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=Math.cos(e),l=Math.sin(e),c=t-t*u+n*l,h=n-t*l-n*u;return[[u*i-l*s+c,l*i+u*s+h],[u*o-l*s+c,l*o+u*s+h],[u*i-l*a+c,l*i+u*a+h],[u*o-l*a+c,l*o+u*a+h]]},e.prototype.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},e.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},e}();function wW(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=Lx(r.min,2),a=i[0],o=i[1],s=Lx(r.max,2),u=s[0],l=s[1],c=e.getBBox(),h=c.width,d=c.height,f=0,p=0,v=a,g=o,m=aV(e);if(m){d-=1.5;var y=m.style.textAlign,b=m.style.textBaseline;"center"===y?v=(a+u)/2:"right"!==y&&"end"!==y||(v=u),"middle"===b?g=(o+l)/2:"bottom"===b&&(g=l)}var x=Lx(Tj(t),4),E=x[0],w=void 0===E?0:E,k=x[1],S=void 0===k?0:k,_=x[2],M=void 0===_?w:_,T=x[3],A=new EW((f+=a)-(void 0===T?S:T),(p+=o)-w,f+h+S,p+d+M);return e.setEulerAngles(n),A.rotatedPoints(zV(n),v,g)}function kW(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function SW(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r<0?2:1}function _W(e,t){var n=SW(e[0],e[1],t[0]),r=SW(e[0],e[1],t[1]),i=SW(t[0],t[1],e[0]),a=SW(t[0],t[1],e[1]);return n!==r&&i!==a||(!(0!==n||!kW(e,t[0]))||(!(0!==r||!kW(e,t[1]))||(!(0!==i||!kW(t,e[0]))||!(0!==a||!kW(t,e[1])))))}function MW(e,t){return t.every((function(t){return function(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,a=0;do{var o=[e[a],e[(a+1)%n]];if(_W(o,r)){if(0===SW(o[0],t,o[1]))return kW(o,t);i++}a=(a+1)%n}while(0!==a);return!!(1&i)}(e,t)}))}function TW(e,t){var n=Lx(e,4),r=n[0],i=n[1],a=n[2],o=n[3],s=Lx(t,4),u=s[0],l=s[1],c=a-r,h=o-i,d=s[2]-u,f=s[3]-l,p=c*f-d*h;if(0===p)return!1;var v=p>0,g=r-u,m=i-l,y=c*m-h*g;if(y<0===v)return!1;var b=d*m-f*g;return b<0!==v&&(y>p!==v&&b>p!==v)}function AW(e,t){return[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]].some((function(e){return TW(t,e)}))}function CW(e,t,n){var r,i,a=t.crossPadding,o=new Set,s=null,u=function(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if("arc"===n){var a=e.center,o=e.radius,s=Lx(a,2),u=s[0],l=s[1],c="negative"===r?0:i,h=-o-c,d=o+c,f=Lx(Tj(t),4),p=f[0],v=f[1],g=f[2],m=f[3];return new EW(u+h-m,l+h-p,u+d+v,l+d+g)}var y=Lx(e.startPos,2),b=y[0],x=y[1],E=Lx(e.endPos,2),w=E[0],k=E[1],S=Lx(uW(e)?[-t,0,t,0]:[0,t,0,-t],4),_=S[0],M=S[1],T=S[2],A=S[3],C=OV(aW(0,e),i),P=new EW(b,x,w,k);return P.x1+=A,P.y1+=_,P.x2+=M+C[0],P.y2+=T+C[1],P}(t,a),l=function(e){return!u||function(e,t,n){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;return MW([[r,a],[i,a],[i,o],[r,o]],wW(t,n))}(u,e)},c=function(e,t){return!e||!e.firstChild||!function(e,t,n){var r,i,a=wW(e,n).flat(1),o=wW(t,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var u=Ox(s),l=u.next();!l.done;l=u.next())if(AW(o,l.value))return!0}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return!1}(e.firstChild,t.firstChild,Tj(n))};try{for(var h=Ox(e),d=h.next();!d.done;d=h.next()){var f=d.value;l(f)?!s||c(s,f)?s=f:(o.add(s),o.add(f)):o.add(f)}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return Array.from(o)}function PW(e,t){return void 0===t&&(t={}),_x(e)?0:"number"===typeof e?e:Math.floor(rV(e,t))}var RW=function(e,t){var n=t.seq,r=void 0===n?2:n;return e.filter((function(e,t){return!(t%r)||(uj(e),!1)}))};var NW=new Map([["hide",function(e,t,n,r){var i=e.length,a=t.keepHeader,o=t.keepTail;if(!(i<=1||2===i&&a&&o)){var s,u,l,c=RW,h=function(e){return e.forEach(r.show),e},d=2,f=e.slice(),p=e.slice(),v=Math.min.apply(Math,Ix([1],Lx(e.map((function(e){return e.getBBox().width}))),!1));if("linear"===n.type&&(sW(n)||uW(n))){var g=eV(e[0]).left,m=eV(e[i-1]).right,y=Math.abs(m-g)||1;d=Math.max(Math.floor(i*v/y),d)}for(a&&(s=f.splice(0,1)[0]),o&&(u=f.splice(-1,1)[0],f.reverse()),h(f);d<e.length&&CW((l=u?Ix(Ix([u],Lx(p),!1),[s],!1):Ix([s],Lx(p),!1),l.filter(xW)),n,null===t||void 0===t?void 0:t.margin).length;){if(u&&!s&&d%2===0)f.splice(0,1).forEach(r.hide);else if(u&&s){f.splice(0,1).forEach(r.hide)}p=c(h(f),{seq:d}),d++}}}],["rotate",function(e,t,n,r){var i,a,o=t.optionalAngles,s=void 0===o?[0,45,90]:o,u=t.margin,l=t.recoverWhenFailed,c=void 0===l||l,h=e.map((function(e){return e.getLocalEulerAngles()})),d=function(t){return e.forEach((function(e,n){var i=Array.isArray(t)?t[n]:t;r.rotate(e,+i)}))};try{for(var f=Ox(s),p=f.next();!p.done;p=f.next()){if(d(p.value),CW(e,n,u).length<1)return}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}c&&d(h)}],["ellipsis",function(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,a=void 0===i?"...":i,o=t.minLength,s=t.maxLength,u=void 0===s?1/0:s,l=t.step,c=void 0===l?" ":l,h=t.margin,d=void 0===h?[0,0,0,0]:h,f=iV(r.getTextShape(e[0])),p=PW(c,f),v=o?PW(o,f):p,g=PW(u,f);(_x(g)||g===1/0)&&(g=Math.max.apply(null,e.map((function(e){return e.getBBox().width}))));for(var m=e.slice(),y=Lx(d,4),b=(y[0],y[1],y[2],y[3],function(t){if(m.forEach((function(e){r.ellipsis(r.getTextShape(e),t,a)})),(m=CW(e,n,d)).length<1)return{value:void 0}}),x=g;x>v+p;x-=p){var E=b(x);if("object"===typeof E)return E.value}}}],["wrap",function(e,t,n,r){var i=t.wordWrapWidth,a=void 0===i?50:i,o=t.maxLines,s=void 0===o?3:o,u=t.recoverWhenFailed,l=void 0===u||u,c=t.margin,h=void 0===c?[0,0,0,0]:c,d=e.map((function(e){return e.attr("maxLines")||1})),f=Math.min.apply(Math,Ix([],Lx(d),!1)),p=function(e){var t=e.type,n=e.labelDirection;return"linear"===t&&sW(e)?"negative"===n?"bottom":"top":"middle"}(n),v=function(t){return e.forEach((function(e,n){var i=Array.isArray(t)?t[n]:t;r.wrap(e,a,i,p)}))};if(!(f>s)){for(var g=f;g<=s;g++)if(v(g),CW(e,n,h).length<1)return;l&&v(d)}}]]);function OW(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return e*function(e){return"positive"===e?-1:1}(t)}),1)}function LW(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function DW(e,t){var n=Lx(e,2),r=n[0],i=n[1],a=Lx(t,2),o=a[0],s=a[1],u=Lx([r*o+i*s,r*s-i*o],2),l=u[0],c=u[1];return Math.atan2(c,l)}function IW(e,t,n){var r,i=n.labelAlign;if(null===(r=t.style.transform)||void 0===r?void 0:r.includes("rotate"))return t.getLocalEulerAngles();var a=aW(e.value,n),o=rW(e.value,n);return"horizontal"===i?0:function(e){var t=(e+360)%180;return yW(t,-90,90)||(t+=180),t}(GV("perpendicular"===i?DW([1,0],a):DW([o[0]<0?-1:1,0],o)))}function FW(e,t,n){var r=n.type,i=n.labelAlign,a=aW(e,n),o=LW(t),s=LW(GV(DW([1,0],a))),u="center",l="middle";return"linear"===r?[90,270].includes(s)&&0===o?(u="center",l=1===a[1]?"top":"bottom"):s%180||![90,270].includes(o)?0===s?(yW(o,0,90,!1,!0)||yW(o,0,90)||yW(o,270,360))&&(u="start"):90===s?yW(o,0,90,!1,!0)?u="start":(yW(o,90,180)||yW(o,270,360))&&(u="end"):270===s?yW(o,0,90,!1,!0)?u="end":(yW(o,90,180)||yW(o,270,360))&&(u="start"):180===s&&(90===o?u="start":(yW(o,0,90)||yW(o,270,360))&&(u="end")):u="center":"parallel"===i?l=yW(s,0,180,!0)?"top":"bottom":"horizontal"===i?yW(s,90,270,!1)?u="end":(yW(s,270,360,!1)||yW(s,0,90))&&(u="start"):"perpendicular"===i&&(u=yW(s,90,270)?"end":"start"),{textAlign:u,textBaseline:l}}function UW(e,t,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,u=t.indexOf(e),l=Lj(s,[e,u,t]),c=Lx([aW(e.value,n),OW(o,a)],2),h=Lx(LV(OV(c[0],l+(1===c[1]?Lj(r?i:0,[e,u,t]):0)),oW(e.value,n)),2);return{x:h[0],y:h[1]}}function BW(e,t){"text"===e.nodeName&&e.attr(t)}function zW(e){!function(e,t,n){var r=t.labelOverlap,i=void 0===r?[]:r;i.length&&i.forEach((function(r){var i=r.type,a=NW.get(i);(function(e,t,n){return!(t.labelOverlap.length<1)&&("hide"===n?!function(e){for(var t=e;t;){if("offscreen"===t.className)return!0;t=t.parent}return!1}(e[0]):"rotate"===n?!e.some((function(e){var t;return!!(null===(t=e.attr("transform"))||void 0===t?void 0:t.includes("rotate"))})):"ellipsis"!==n&&"wrap"!==n||e.filter((function(e){return e.querySelector("text")})).length>1)})(e,t,i)&&(null===a||void 0===a||a(e,r,t,n))}))}(this.node().childNodes,e,{hide:uj,show:sj,rotate:function(t,n){!function(e,t,n){t.setLocalEulerAngles(e);var r=FW(t.__data__.value,e,n),i=t.querySelector(NV.labelItem.class);i&&BW(i,r)}(+n,t,e)},ellipsis:function(e,t,n){e&&sV(e,t||1/0,n)},wrap:function(e,t,n){var r,i;e&&(void 0===(r=n)&&(r=2),void 0===i&&(i="top"),oV(e,{wordWrap:!0,wordWrapWidth:t,maxLines:r,textBaseline:i}))},getTextShape:function(e){return e.querySelector("text")}})}function GW(e,t,n,r,i){var a=n.indexOf(t),o=Sj(e).append(function(e,t,n,r){var i=r.labelFormatter;return PE(i)?function(){return nV(Lj(i,[e,t,n,aW(e.value,r)]))}:function(){return nV(e.label||"")}}(t,a,n,i)).attr("className",NV.labelItem.name).node(),s=Lx(Ej(eW(r,[t,a,n])),2),u=s[0],l=s[1],c=l.transform,h=Rx(l,["transform"]);bW(o,c);var d=IW(t,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(d),BW(o,Px(Px({},FW(t.value,d,i)),u)),e.attr(h),o}function HW(e,t,n,r){var i=tW(t,n.labelFilter),a=bj(n,"label");return e.selectAll(NV.label.class).data(i,(function(e,t){return t})).join((function(r){return r.append("g").attr("className",NV.label.name).transition((function(e){GW(this,e,t,a,n);var r=UW(e,t,n),i=r.x,o=r.y;return this.style.transform="translate(".concat(i,", ").concat(o,")"),null})).call((function(){zW.call(e,n)}))}),(function(i){return i.transition((function(e){var i=function(e,t,n,r){if(void 0===r&&(r="destroy"),function(e,t){return"text"===e.nodeName&&"text"===t.nodeName&&e.attributes.text===t.attributes.text}(e,t))return e.remove(),[null];var i=function(){"destroy"===r?e.destroy():"hide"===r&&uj(e),t.isVisible()&&sj(t)};if(!n)return i(),[null];var a=n.duration,o=void 0===a?0:a,s=n.delay,u=void 0===s?0:s,l=Math.ceil(+o/2),c=+o/4,h=Lx(e.getGeometryBounds().center,2),d=h[0],f=h[1],p=Lx(t.getGeometryBounds().center,2),v=Lx([(d+p[0])/2-d,(f+p[1])/2-f],2),g=v[0],m=v[1],y=e.style.opacity,b=void 0===y?1:y,x=t.style.opacity,E=void 0===x?1:x,w=e.style.transform||"",k=t.style.transform||"",S=e.animate([{opacity:b,transform:"translate(0, 0) ".concat(w)},{opacity:0,transform:"translate(".concat(g,", ").concat(m,") ").concat(w)}],Px(Px({fill:"both"},n),{duration:u+l+c})),_=t.animate([{opacity:0,transform:"translate(".concat(-g,", ").concat(-m,") ").concat(k),offset:.01},{opacity:E,transform:"translate(0, 0) ".concat(k)}],Px(Px({fill:"both"},n),{duration:l+c,delay:u+l-c}));return Ij(_,i),[S,_]}(this.querySelector(NV.labelItem.class),GW(this,e,t,a,n),r.update),o=UW(e,t,n),s=o.x,u=o.y,l=Bj(this,{transform:"translate(".concat(s,", ").concat(u,")")},r.update);return Ix(Ix([],Lx(i),!1),[l],!1)})).call((function(t){var r,i,a=pN(t,"_transitions").flat().filter(xW);i=function(){zW.call(e,n)},0===(r=a).length?i():Promise.all(r.map((function(e){return null===e||void 0===e?void 0:e.finished}))).then(i)}))}),(function(e){return e.transition((function(){var e=this,t=HV(this.childNodes[0],r.exit);return Ij(t,(function(){return Sj(e).remove()})),t}))})).transitions()}function jW(e,t){return iW(e,t.tickDirection,t)}function VW(e,t,n,r,i){var a=Lx(function(e,t){var n=Lx(e,2);return[[0,0],[n[0]*t,n[1]*t]]}(r,Lj(i.tickLength,[e,t,n])),2),o=Lx(a[0],2),s=o[0],u=o[1],l=Lx(a[1],2);return{x1:s,x2:l[0],y1:u,y2:l[1]}}function WW(e,t,n,r,i,a){var o=function(e,t,n,r,i){var a=i.tickFormatter,o=jW(t.value,i),s="line";return PE(a)&&(s=function(){return Lj(a,[t,n,r,o])}),e.append(s).attr("className",NV.tickItem.name)}(Sj(this),e,t,n,r);!function(e,t,n,r,i,a,o){var s=jW(e.value,a),u=VW(e,t,n,s,a),l=u.x1,c=u.x2,h=u.y1,d=u.y2,f=Lx(Ej(eW(o,[e,t,n,s])),2),p=f[0],v=f[1];"line"===r.node().nodeName&&r.styles(Px({x1:l,x2:c,y1:h,y2:d},p)),i.attr(v),r.styles(p)}(e,t,n,o,this,r,i);var s=Lx(oW(e.value,r),2),u=s[0],l=s[1];return Bj(this,{transform:"translate(".concat(u,", ").concat(l,")")},a)}function XW(e,t,n,r,i){var a=Lx(Ej(bj(r,"title")),2),o=a[0],s=a[1],u=s.transform,l=s.transformOrigin,c=Rx(s,["transform","transformOrigin"]);t.styles(c);var h=u||function(e,t,n){var r=2*e.getGeometryBounds().halfExtents[1];if("vertical"===t){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")")}return""}(e.node(),o.direction,o.position);e.styles(Px(Px({},o),{transformOrigin:l})),bW(e.node(),h);var d=function(e,t,n){var r=n.titlePosition,i=void 0===r?"lb":r,a=n.titleSpacing,o=Pj(i),s=e.node().getLocalBounds(),u=Lx(s.min,2),l=u[0],c=u[1],h=Lx(s.halfExtents,2),d=h[0],f=h[1],p=Lx(t.node().getLocalBounds().halfExtents,2),v=p[0],g=p[1],m=Lx([l+d,c+f],2),y=m[0],b=m[1],x=Lx(Tj(a),4),E=x[0],w=x[1],k=x[2],S=x[3];if(["start","end"].includes(i)&&"linear"===n.type){var _=n.startPos,M=n.endPos,T=Lx("start"===i?[_,M]:[M,_],2),A=T[0],C=T[1],P=Lx(OV(BV([-C[0]+A[0],-C[1]+A[1]]),E),2),R=P[0],N=P[1];return{x:A[0]+R,y:A[1]+N}}return o.includes("t")&&(b-=f+g+E),o.includes("r")&&(y+=d+v+w),o.includes("l")&&(y-=d+v+S),o.includes("b")&&(b+=f+g+k),{x:y,y:b}}(Sj(n._offscreen||n.querySelector(NV.mainGroup.class)),t,r),f=d.x,p=d.y;return Bj(t.node(),{transform:"translate(".concat(f,", ").concat(p,")")},i)}function YW(e,t,n,r){var i=e.showLine,a=e.showTick,o=e.showLabel,s=Aj(i,t.maybeAppendByClassName(NV.lineGroup,"g"),(function(t){return pW(t,e,r)}))||[],u=Aj(a,t.maybeAppendByClassName(NV.tickGroup,"g"),(function(t){return function(e,t,n,r){var i=tW(t,n.tickFilter),a=bj(n,"tick");return e.selectAll(NV.tick.class).data(i,(function(e){return e.id||e.label})).join((function(e){return e.append("g").attr("className",NV.tick.name).transition((function(e,t){return WW.call(this,e,t,i,n,a,!1)}))}),(function(e){return e.transition((function(e,t){return this.removeChildren(),WW.call(this,e,t,i,n,a,r.update)}))}),(function(e){return e.transition((function(){var e=this,t=HV(this.childNodes[0],r.exit);return Ij(t,(function(){return e.remove()})),t}))})).transitions()}(t,n,e,r)}))||[],l=Aj(o,t.maybeAppendByClassName(NV.labelGroup,"g"),(function(t){return HW(t,n,e,r)}))||[];return Ix(Ix(Ix([],Lx(s),!1),Lx(u),!1),Lx(l),!1).filter((function(e){return!!e}))}var qW=function(e){function t(t){return e.call(this,t,RV)||this}return Cx(t,e),t.prototype.render=function(e,t,n){var r=this,i=e.titleText,a=e.data,o=e.animate,s=e.showTitle,u=e.showGrid,l=e.dataThreshold,c=e.truncRange,h=function(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}(a,l).filter((function(e){var t=e.value;return!(c&&t>c[0]&&t<c[1])})),d=Dj(void 0===n?o:n),f=Aj(u,Sj(t).maybeAppendByClassName(NV.gridGroup,"g"),(function(t){return mW(t,h,e,d)}))||[],p=Sj(t).maybeAppendByClassName(NV.mainGroup,"g");i&&(!this.initialized&&d.enter||this.initialized&&d.update)&&YW(e,Sj(this.offscreenGroup),h,Dj(!1));var v=YW(e,Sj(p.node()),h,d),g=Aj(s,Sj(t).maybeAppendByClassName(NV.titleGroup,"g"),(function(t){return function(e,t,n,r){var i=n.titleText;return e.selectAll(NV.title.class).data([{title:i}].filter((function(e){return!!e.title})),(function(e,t){return e.title})).join((function(a){return a.append((function(){return nV(i)})).attr("className",NV.title.name).transition((function(){return XW(Sj(this),e,t,n,r.enter)}))}),(function(i){return i.transition((function(){return XW(Sj(this),e,t,n,r.update)}))}),(function(e){return e.remove()})).transitions()}(t,r,e,d)}))||[];return Ix(Ix(Ix([],Lx(f),!1),Lx(v),!1),Lx(g),!1).flat().filter((function(e){return!!e}))},t}(vj);function KW(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t)return[t.x,t.y];if(n){var a=n[0];return[a.clientX,a.clientY]}return r&&i?[r,i]:[0,0]}function ZW(e,t){return+e.toPrecision(t)}var JW=function(e){return e},QW=function(){return p((function e(t){v(this,e),this.options=xR({},this.getDefaultOptions()),this.update(t)}),[{key:"getOptions",value:function(){return this.options}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=xR({},this.options,e),this.rescale(e)}},{key:"rescale",value:function(e){}}])}();function $W(e,t){return t-e?function(n){return(n-e)/(t-e)}:function(e){return.5}}function eX(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return function(n){return e(t(n))}}),e)}var tX=n(2516),nX=n.n(tX);function rX(e,t,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function iX(e){var t=nX().get(e);if(!t)return null;var n=t.model,r=t.value;return"rgb"===n?r:"hsl"===n?function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(0===n)return[255*r,255*r,255*r,i];var a=r<.5?r*(1+n):r+n-r*n,o=2*r-a;return[255*rX(o,a,t+1/3),255*rX(o,a,t),255*rX(o,a,t-1/3),i]}(r):null}var aX=function(e,t){return function(n){return e*(1-n)+t*n}},oX=function(e,t){return"number"===typeof e&&"number"===typeof t?aX(e,t):"string"===typeof e&&"string"===typeof t?function(e,t){var n=iX(e),r=iX(t);return null===n||null===r?n?function(){return e}:function(){return t}:function(e){for(var t=new Array(4),i=0;i<4;i+=1){var a=n[i],o=r[i];t[i]=a*(1-e)+o*e}var s=t[0],u=t[1],l=t[2],c=t[3];return"rgba(".concat(Math.round(s),", ").concat(Math.round(u),", ").concat(Math.round(l),", ").concat(c,")")}}(e,t):function(){return e}},sX=function(e,t){var n=aX(e,t);return function(e){return Math.round(n(e))}};function uX(e){return!ME(e)&&!(null===e)&&!Number.isNaN(e)}var lX=Math.sqrt(50),cX=Math.sqrt(10),hX=Math.sqrt(2);function dX(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=lX?10:a>=cX?5:a>=hX?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=lX?10:a>=cX?5:a>=hX?2:1)}var fX=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[e,t],a=0,o=i.length-1,s=i[a],u=i[o];if(u<s){var l=[u,s];s=l[0],u=l[1];var c=[o,a];a=c[0],o=c[1]}return(n=dX(s,u,r))>0?n=dX(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=dX(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,r)),n>0?(i[a]=Math.floor(s/n)*n,i[o]=Math.ceil(u/n)*n):n<0&&(i[a]=Math.ceil(s*n)/n,i[o]=Math.floor(u*n)/n),i};var pX=function(e,t,n){var r,i,a=x(e,2),o=a[0],s=a[1],u=x(t,2),l=u[0],c=u[1];return o<s?(r=$W(o,s),i=n(l,c)):(r=$W(s,o),i=n(c,l)),eX(i,r)},vX=function(e,t,n){for(var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=e[0]>e[r],s=o?I(e).reverse():e,u=o?I(t).reverse():t,l=0;l<r;l+=1)i[l]=$W(s[l],s[l+1]),a[l]=n(u[l],u[l+1]);return function(t){var n=function(e,t,n,r,i){for(var a=n||0,o=r||e.length,s=i||function(e){return e};a<o;){var u=Math.floor((a+o)/2);s(e[u])>t?o=u:a=u+1}return a}(e,t,1,r)-1,o=i[n];return eX(a[n],o)(t)}},gX=function(e,t,n,r){return(Math.min(e.length,t.length)>2?vX:pX)(e,t,r?sX:n)},mX=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:aX,tickCount:5}}},{key:"map",value:function(e){return uX(e)?this.output(e):this.options.unknown}},{key:"invert",value:function(e){return uX(e)?this.input(e):this.options.unknown}},{key:"nice",value:function(){if(this.options.nice){var e=L(this.getTickMethodOptions()),t=e[0],n=e[1],r=e[2],i=e.slice(3);this.options.domain=this.chooseNice().apply(void 0,[t,n,r].concat(I(i)))}}},{key:"getTicks",value:function(){var e=this.options.tickMethod,t=L(this.getTickMethodOptions()),n=t[0],r=t[1],i=t[2],a=t.slice(3);return e.apply(void 0,[n,r,i].concat(I(a)))}},{key:"getTickMethodOptions",value:function(){var e=this.options,t=e.domain,n=e.tickCount;return[t[0],t[t.length-1],n]}},{key:"chooseNice",value:function(){return fX}},{key:"rescale",value:function(){this.nice();var e=x(this.chooseTransforms(),2),t=e[0],n=e[1];this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}},{key:"chooseClamp",value:function(e){var t=this.options,n=t.clamp,r=t.range,i=this.options.domain.map(e),a=Math.min(i.length,r.length);return n?function(e,t){var n=t<e?t:e,r=e>t?e:t;return function(e){return Math.min(Math.max(n,e),r)}}(i[0],i[a-1]):JW}},{key:"composeOutput",value:function(e,t){var n=this.options,r=n.domain,i=n.range,a=n.round,o=n.interpolate,s=gX(r.map(e),i,o,a);this.output=eX(s,t,e)}},{key:"composeInput",value:function(e,t,n){var r=this.options,i=r.domain,a=r.range,o=gX(a,i.map(e),aX);this.input=eX(t,n,o)}}])}(QW),yX=function(e,t,n){var r,i,a=e,o=t;if(a===o&&n>0)return[a];var s=dX(a,o,n);if(0===s||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(var u=0;u<r;u+=1)i[u]=(a+u)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(var l=0;l<r;l+=1)i[l]=(a+l)/s}return i},bX=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:oX,tickMethod:yX,tickCount:5}}},{key:"chooseTransforms",value:function(){return[JW,JW]}},{key:"clone",value:function(){return new t(this.options)}}])}(mX);function xX(e,t){var n=e.map,r=(0,e.initKey)(t);return n.has(r)?n.get(r):t}function EX(e){return"object"===typeof e?e.valueOf():e}var wX=function(e){function t(e){var n;if(v(this,t),(n=T(this,t)).map=new Map,n.initKey=EX,null!==e){var r,i=D(e);try{for(i.s();!(r=i.n()).done;){var a=x(r.value,2),o=a[0],s=a[1];n.set(o,s)}}catch(u){i.e(u)}finally{i.f()}}return n}return C(t,e),p(t,[{key:"get",value:function(e){return Xn(S(t.prototype),"get",this).call(this,xX({map:this.map,initKey:this.initKey},e))}},{key:"has",value:function(e){return Xn(S(t.prototype),"has",this).call(this,xX({map:this.map,initKey:this.initKey},e))}},{key:"set",value:function(e,n){return Xn(S(t.prototype),"set",this).call(this,function(e,t){var n=e.map,r=(0,e.initKey)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}({map:this.map,initKey:this.initKey},e),n)}},{key:"delete",value:function(e){return Xn(S(t.prototype),"delete",this).call(this,function(e,t){var n=e.map,r=(0,e.initKey)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}({map:this.map,initKey:this.initKey},e))}}])}(N(Map)),kX=Symbol("defaultUnknown");function SX(e,t,n){for(var r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function _X(e){var t=e.value,n=e.from,r=e.to,i=e.mapper,a=e.notFoundReturn,o=i.get(t);if(void 0===o){if(a!==kX)return a;o=n.push(t)-1,i.set(t,o)}return r[o%r.length]}function MX(e){return e instanceof Date?function(e){return"".concat(e)}:"object"===typeof e?function(e){return JSON.stringify(e)}:function(e){return e}}var TX=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],unknown:kX}}},{key:"map",value:function(e){return 0===this.domainIndexMap.size&&SX(this.domainIndexMap,this.getDomain(),this.domainKey),_X({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}},{key:"invert",value:function(e){return 0===this.rangeIndexMap.size&&SX(this.rangeIndexMap,this.getRange(),this.rangeKey),_X({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}},{key:"rescale",value:function(e){var t=x(this.options.domain,1)[0],n=x(this.options.range,1)[0];if(this.domainKey=MX(t),this.rangeKey=MX(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);e&&!e.range||this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}},{key:"clone",value:function(){return new t(this.options)}},{key:"getRange",value:function(){return this.options.range}},{key:"getDomain",value:function(){if(this.sortedDomain)return this.sortedDomain;var e=this.options,t=e.domain,n=e.compare;return this.sortedDomain=n?I(t).sort(n):t,this.sortedDomain}}])}(QW);function AX(e){return Math.round(1e12*e)/1e12}function CX(e){for(var t=e.domain,n=e.range,r=e.paddingOuter,i=e.paddingInner,a=e.flex,o=e.round,s=e.align,u=t.length,l=function(e,t){var n=t-e.length;return n>0?[].concat(I(e),I(new Array(n).fill(1))):n<0?e.slice(0,t):e}(a,u),c=x(n,2),h=c[0],d=c[1]-h,f=d/(2/u*r+1-1/u*i),p=f*i/u,v=f-u*p,g=function(e){var t=Math.min.apply(Math,I(e));return e.map((function(e){return e/t}))}(l),m=g.reduce((function(e,t){return e+t})),y=v/m,b=new wX(t.map((function(e,t){var n=g[t]*y;return[e,o?Math.floor(n):n]}))),E=new wX(t.map((function(e,t){var n=g[t]*y+p;return[e,o?Math.floor(n):n]}))),w=Array.from(E.values()).reduce((function(e,t){return e+t})),k=h+(d-(w-w/u*i))*s,S=o?Math.round(k):k,_=new Array(u),M=0;M<u;M+=1){_[M]=AX(S);var T=t[M];S+=E.get(T)}return{valueBandWidth:b,valueStep:E,adjustedRange:_}}var PX=function(e){function t(e){return v(this,t),T(this,t,[e])}return C(t,e),p(t,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:kX,flex:[]}}},{key:"clone",value:function(){return new t(this.options)}},{key:"getStep",value:function(e){return void 0===this.valueStep?1:"number"===typeof this.valueStep?this.valueStep:void 0===e?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}},{key:"getBandWidth",value:function(e){return void 0===this.valueBandWidth?1:"number"===typeof this.valueBandWidth?this.valueBandWidth:void 0===e?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}},{key:"getRange",value:function(){return this.adjustedRange}},{key:"getPaddingInner",value:function(){var e=this.options,t=e.padding,n=e.paddingInner;return t>0?t:n}},{key:"getPaddingOuter",value:function(){var e=this.options,t=e.padding,n=e.paddingOuter;return t>0?t:n}},{key:"rescale",value:function(){Xn(S(t.prototype),"rescale",this).call(this);var e=this.options,n=e.align,r=e.domain,i=function(e){var t,n=e.domain.length;if(0===n)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(t=e.flex)||void 0===t?void 0:t.length)return CX(e);var r,i,a=e.range,o=e.paddingOuter,s=e.paddingInner,u=e.round,l=e.align,c=a[0],h=a[1]-c,d=2*o,f=n-s;r=h/Math.max(1,d+f),u&&(r=Math.floor(r)),c+=(h-r*(n-s))*l,i=r*(1-s),u&&(c=Math.round(c),i=Math.round(i));var p=new Array(n).fill(0).map((function(e,t){return c+t*r}));return{valueStep:r,valueBandWidth:i,adjustedRange:p}}({align:n,range:e.range,round:e.round,flex:e.flex,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r}),a=i.adjustedRange,o=i.valueBandWidth,s=i.valueStep;this.valueStep=s,this.valueBandWidth=o,this.adjustedRange=a}}])}(TX),RX=function(e){function t(t){var n=this,r=t.style,i=Rx(t,["style"]);return(n=e.call(this,xR({},{type:"column"},Px({style:r},i)))||this).columnsGroup=new NT({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return Cx(t,e),t.prototype.render=function(){var e=this.attributes,t=e.columns,n=e.x,r=e.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),Sj(this.columnsGroup).selectAll(".column").data(t.flat()).join((function(e){return e.append("rect").attr("className","column").each((function(e){this.attr(e)}))}),(function(e){return e.each((function(e){this.attr(e)}))}),(function(e){return e.remove()}))},t.prototype.update=function(e){this.attr(hj({},this.attributes,e)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(TT),NX=function(e){function t(t){var n=this,r=t.style,i=Rx(t,["style"]);return(n=e.call(this,xR({},{type:"lines"},Px({style:r},i)))||this).linesGroup=n.appendChild(new NT),n.areasGroup=n.appendChild(new NT),n.render(),n}return Cx(t,e),t.prototype.render=function(){var e=this.attributes,t=e.lines,n=e.areas,r=e.x,i=e.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),t&&this.renderLines(t),n&&this.renderAreas(n)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(e){this.attr(hj({},this.attributes,e)),this.render()},t.prototype.renderLines=function(e){Sj(this.linesGroup).selectAll(".line").data(e).join((function(e){return e.append("path").attr("className","line").each((function(e){this.attr(e)}))}),(function(e){return e.each((function(e){this.attr(e)}))}),(function(e){return e.remove()}))},t.prototype.renderAreas=function(e){Sj(this.linesGroup).selectAll(".area").data(e).join((function(e){return e.append("path").attr("className","area").each((function(e){this.attr(e)}))}),(function(e){return e.each((function(e){this.style(e)}))}),(function(e){return e.remove()}))},t}(TT);function OX(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],a=0,o=e.length;a<o;a+=2)i.push([e[a],e[a+1]]);var s,u,l,c=function(e,t,n,r){var i,a,o,s,u,l,c=[],h=!!r,d=[1/0,1/0],f=[-1/0,-1/0];if(h){d=(i=Lx(r,2))[0],f=i[1];for(var p=0,v=e.length;p<v;p+=1)d=IV(d,m=e[p]),f=FV(f,m)}p=0;for(var g=e.length;p<g;p+=1){var m=e[p];if(0!==p||n)if(p!==g-1||n){a=e[[p?p-1:g-1,p-1][n?0:1]];var y=[0,0];y=OV(y=DV(o=e[n?(p+1)%g:p+1],a),t);var b=UV(m,a),x=UV(m,o),E=b+x;0!==E&&(b/=E,x/=E);var w=OV(y,-b),k=OV(y,x);u=LV(m,w),s=IV(s=LV(m,k),FV(o,m)),s=FV(s,IV(o,m)),u=IV(u=LV(m,w=OV(w=DV(s,m),-b/x)),FV(a,m)),s=LV(m,k=OV(k=DV(m,u=FV(u,IV(a,m))),x/b)),h&&(u=IV(u=FV(u,d),f),s=IV(s=FV(s,d),f)),c.push(l),c.push(u),l=s}else u=m,c.push(l),c.push(u);else l=m}return n&&c.push(c.shift()),c}(i,.4,r,n),h=i.length,d=[];for(a=0;a<h-1;a+=1)s=c[2*a],u=c[2*a+1],l=i[a+1],d.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]]);return r&&(s=c[h],u=c[h+1],l=Lx(i,1)[0],d.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]])),d}function LX(e,t){void 0===t&&(t=!1);var n=t?e.length-1:0,r=e.map((function(e,t){return Ix([t===n?"M":"L"],Lx(e),!1)}));return t?r.reverse():r}function DX(e,t){if(void 0===t&&(t=!1),e.length<=2)return LX(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var a=t?e[r-i-1]:e[i];AC(a,n.slice(-2))||n.push.apply(n,Ix([],Lx(a),!1))}var o=OX(n,!1);return t?o.unshift(Ix(["M"],Lx(e[r-1]),!1)):o.unshift(Ix(["M"],Lx(e[0]),!1)),o}function IX(e,t,n){var r=aP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}var FX=function(e,t){if(cE(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],o=PE(t)?t(a):a[t];o<r&&(n=a,r=o)}return n}},UX=function(e,t){if(cE(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],o=PE(t)?t(a):a[t];o>r&&(n=a,r=o)}return n}};function BX(e){return 0===e.length?[0,0]:[hE(FX(e,(function(e){return hE(e)||0}))),dE(UX(e,(function(e){return dE(e)||0})))]}function zX(e){for(var t=aP(e),n=t[0].length,r=Lx([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<t.length;o+=1)for(var s=t[o],u=0;u<n;u+=1)s[u]>=0?(s[u]+=i[u],i[u]=s[u]):(s[u]+=a[u],a[u]=s[u]);return t}var GX=function(e){function t(t){return e.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Cx(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||0===(null===e||void 0===e?void 0:e.length))return[[]];var t=aP(e);return kx(t[0])?[t]:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?zX(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var e=this.scales.y,t=Lx(e.getOptions().domain||[0,0],2),n=t[0],r=t[1];return r<0?e.map(r):e.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var e=this.attributes;return{width:e.width,height:e.height}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var e=this,t=this.attributes,n=t.type,r=t.isStack,i=t.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var a=bj(this.attributes,"area"),o=bj(this.attributes,"line"),s=this.containerShape.width,u=this.data;if(0===u[0].length)return{lines:[],areas:[]};var l=this.scales,c=function(e,t){var n,r=t.x,i=t.y,a=Lx(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=Lx([o,s],2),s=n[0],o=n[1]),e.map((function(e){return e.map((function(e,t){return[r.map(t),Tx(i.map(e),s,o)]}))}))}(u,{type:"line",x:l.x,y:l.y}),h=[];if(a){var d=this.baseline;h=r?i?function(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var a=e[i],o=DX(a),s=void 0;if(0===i)s=IX(o,t,n);else{var u=DX(e[i-1],!0),l=a[0];u[0][0]="L",s=Ix(Ix(Ix([],Lx(o),!1),Lx(u),!1),[Ix(["M"],Lx(l),!1),["Z"]],!1)}r.push(s)}return r}(c,s,d):function(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var a=LX(e[i]),o=void 0;if(0===i)o=IX(a,t,n);else{var s=LX(e[i-1],!0);s[0][0]="L",o=Ix(Ix(Ix([],Lx(a),!1),Lx(s),!1),[["Z"]],!1)}r.push(o)}return r}(c,s,d):function(e,t,n,r){return e.map((function(e){return IX(t?DX(e):LX(e),n,r)}))}(c,i,s,d)}return{lines:c.map((function(t,n){return Px({stroke:e.getColor(n),d:i?DX(t):LX(t)},o)})),areas:h.map((function(t,n){return Px({d:t,fill:e.getColor(n)},a)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var e=this,t=bj(this.attributes,"column"),n=this.attributes,r=n.isStack,i=n.type,a=n.scale;if("column"!==i)throw new Error("columnsStyle can only be used in column type");var o=this.containerShape.height,s=this.rawData;if(!s)return{columns:[]};r&&(s=zX(s));var u=this.createScales(s),l=u.x,c=u.y,h=Lx(BX(s),2),d=h[0],f=h[1],p=new bX({domain:[0,f-(d>0?0:d)],range:[0,o*a]}),v=l.getBandWidth(),g=this.rawData;return{columns:s.map((function(n,i){return n.map((function(n,a){var o=v/s.length;return Px(Px({fill:e.getColor(i)},t),r?{x:l.map(a),y:c.map(n),width:v,height:p.map(g[i][a])}:{x:l.map(a)+o*i,y:n>=0?c.map(n):c.map(0),width:o,height:p.map(Math.abs(n))})}))}))}},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){var n,r,i;(n=t,r=".container",i="rect",n.querySelector(r)?Sj(n).select(r):Sj(n).append(i)).attr("className","container").node();var a=e.type,o=e.x,s=e.y,u="spark".concat(a),l=Px({x:o,y:s},"line"===a?this.linesStyle:this.columnsStyle);Sj(t).selectAll(".spark").data([a]).join((function(e){return e.append((function(e){return"line"===e?new NX({className:u,style:l}):new RX({className:u,style:l})})).attr("className","spark ".concat(u))}),(function(e){return e.update(l)}),(function(e){return e.remove()}))},t.prototype.getColor=function(e){var t=this.attributes.color;return cE(t)?t[e%t.length]:PE(t)?t.call(null,e):t},t.prototype.createScales=function(e){var t,n,r=this.attributes,i=r.type,a=r.scale,o=r.range,s=void 0===o?[]:o,u=r.spacing,l=this.containerShape,c=l.width,h=l.height,d=Lx(BX(e),2),f=d[0],p=d[1],v=new bX({domain:[null!==(t=s[0])&&void 0!==t?t:f,null!==(n=s[1])&&void 0!==n?n:p],range:[h,h*(1-a)]});return"line"===i?{type:i,x:new bX({domain:[0,e[0].length-1],range:[0,c]}),y:v}:{type:i,x:new PX({domain:e[0].map((function(e,t){return t})),range:[0,c],paddingInner:u,paddingOuter:u/2,align:.5}),y:v}},t.tag="sparkline",t}(vj),HX={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},jX={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},VX={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},WX=Mj({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),XX=Mj({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),YX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),t.prototype.render=function(e,t){var n=e.x,r=e.y,i=e.size,a=void 0===i?10:i,o=e.radius,s=void 0===o?a/4:o,u=e.orientation,l=Rx(e,["x","y","size","radius","orientation"]),c=a,h=2.4*c,d=Sj(t).maybeAppendByClassName(XX.iconRect,"rect").styles(Px(Px({},l),{width:c,height:h,radius:s,x:n-c/2,y:r-h/2,transformOrigin:"center"})),f=n+1/3*c-c/2,p=n+2/3*c-c/2,v=r+1/4*h-h/2,g=r+3/4*h-h/2;d.maybeAppendByClassName("".concat(XX.iconLine,"-1"),"line").styles(Px({x1:f,x2:f,y1:v,y2:g},l)),d.maybeAppendByClassName("".concat(XX.iconLine,"-2"),"line").styles(Px({x1:p,x2:p,y1:v,y2:g},l)),"vertical"===u&&(d.node().style.transform="rotate(90)")},t}(vj),qX=function(e){function t(t){return e.call(this,t,VX)||this}return Cx(t,e),t.prototype.renderLabel=function(e){var t=this,n=this.attributes,r=n.x,i=n.y,a=n.showLabel,o=bj(this.attributes,"label"),s=o.x,u=void 0===s?0:s,l=o.y,c=void 0===l?0:l,h=o.transform,d=o.transformOrigin,f=Lx(Ej(Rx(o,["x","y","transform","transformOrigin"]),[]),2),p=f[0],v=f[1],g=Sj(e).maybeAppendByClassName(XX.labelGroup,"g").styles(v),m=Px(Px({},jX),p),y=m.text,b=Rx(m,["text"]);Aj(!!a,g,(function(e){t.label=e.maybeAppendByClassName(XX.label,"text").styles(Px(Px({},b),{x:r+u,y:i+c,transform:h,transformOrigin:d,text:"".concat(y)})),t.label.on("mousedown",(function(e){e.stopPropagation()})),t.label.on("touchstart",(function(e){e.stopPropagation()}))}))},t.prototype.renderIcon=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.orientation,a=t.type,o=Px(Px({x:n,y:r,orientation:i},HX),bj(this.attributes,"icon")),s=this.attributes.iconShape,u=void 0===s?function(){return new YX({style:o})}:s;Sj(e).maybeAppendByClassName(XX.iconGroup,"g").selectAll(XX.icon.class).data([u]).join((function(e){return e.append("string"===typeof u?u:function(){return u(a)}).attr("className",XX.icon.name)}),(function(e){return e.update(o)}),(function(e){return e.remove()}))},t.prototype.render=function(e,t){this.renderIcon(t),this.renderLabel(t)},t}(vj),KX=function(e){function t(t){var n=e.call(this,t,Px(Px(Px({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(e){return e.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},xj(VX,"handle")),xj(HX,"handleIcon")),xj(jX,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(e){return function(t){t.stopPropagation(),n.target=e,n.prevPos=n.getOrientVal(KW(t));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,u=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(e){var t=n.attributes,r=t.slidable,i=t.brushable,a=t.type;e.stopPropagation();var o=n.getOrientVal(KW(e)),s=o-n.prevPos;if(s){var u=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(u);break;case"end":r&&n.setValuesOffset(0,u);break;case"selection":r&&n.setValuesOffset(u,u);break;case"track":if(!i)return;n.selectionWidth+=u,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(e){var t=n.attributes,r=t.onChange,i=t.type,a="range"===i?e:e[1],o="range"===i?n.getValues():n.getValues()[1],s=new PM("valuechange",{detail:{oldValue:a,value:o}});n.dispatchEvent(s),null===r||void 0===r||r(o)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Cx(t,e),Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var e=bj(this.attributes,"sparkline");return Px(Px({zIndex:0},this.availableSpace),e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var e=this.attributes,t=e.trackLength,n=e.trackSize,r=Lx(this.getOrientVal([[t,n],[n,t]]),2);return{width:r[0],height:r[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,t=(e.x,e.y,Lx(Tj(e.padding),4)),n=t[0],r=t[1],i=t[2],a=t[3],o=this.shape;return{x:a,y:n,width:o.width-(a+r),height:o.height-(n+i)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(e,t){void 0===e&&(e=[0,0]),void 0===t&&(t=!1),this.attributes.values=e;var n=!1!==t&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},t.prototype.updateSelectionArea=function(e){var t=this.calcSelectionArea();this.foregroundGroup.selectAll(WX.selection.class).each((function(n,r){Bj(this,t[r],e)}))},t.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&Bj(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&Bj(this.endHandle,this.getHandleStyle("end"),e))},t.prototype.innerSetValues=function(e,t){void 0===e&&(e=[0,0]),void 0===t&&(t=!1);var n=this.values,r=this.clampValues(e);this.attributes.values=r,this.setValues(r),t&&this.onValueChange(n)},t.prototype.renderTrack=function(e){var t=this.attributes,n=t.x,r=t.y,i=bj(this.attributes,"track");this.trackShape=Sj(e).maybeAppendByClassName(WX.track,"rect").styles(Px(Px({x:n,y:r},this.shape),i))},t.prototype.renderBrushArea=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.brushable;this.brushArea=Sj(e).maybeAppendByClassName(WX.brushArea,"rect").styles(Px({x:n,y:r,fill:"transparent",cursor:i?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(e){var t=this,n=this.attributes,r=n.x,i=n.y;Aj("horizontal"===n.orientation,Sj(e).maybeAppendByClassName(WX.sparklineGroup,"g"),(function(e){var n=Px(Px({},t.sparklineStyle),{x:r,y:i});e.maybeAppendByClassName(WX.sparkline,(function(){return new GX({style:n})})).update(n)}))},t.prototype.renderHandles=function(){var e,t=this,n=this.attributes,r=n.showHandle,i=n.type,a=r?"range"===i?["start","end"]:["end"]:[],o=this;null===(e=this.foregroundGroup)||void 0===e||e.selectAll(WX.handle.class).data(a.map((function(e){return{type:e}})),(function(e){return e.type})).join((function(e){return e.append((function(e){var n=e.type;return new qX({style:t.getHandleStyle(n)})})).each((function(e){var t=e.type;this.attr("class","".concat(WX.handle.name," ").concat(t,"-handle"));var n="".concat(t,"Handle");o[n]=this,this.addEventListener("pointerdown",o.onDragStart(t))}))}),(function(e){return e.each((function(e){var t=e.type;this.update(o.getHandleStyle(t))}))}),(function(e){return e.each((function(e){var t=e.type,n="".concat(t,"Handle");o[n]=void 0})).remove()}))},t.prototype.renderSelection=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.type,a=t.selectionType;this.foregroundGroup=Sj(e).maybeAppendByClassName(WX.foreground,"g");var o=bj(this.attributes,"selection"),s=function(e){return e.style("visibility",(function(e){return e.show?"visible":"hidden"})).style("cursor",(function(e){return"select"===a?"grab":"invert"===a?"crosshair":"default"})).styles(Px(Px({},o),{transform:"translate(".concat(n,", ").concat(r,")")}))},u=this;this.foregroundGroup.selectAll(WX.selection.class).data("value"===i?[]:this.calcSelectionArea().map((function(e,t){return{style:Px({},e),index:t,show:"select"===a?1===t:1!==t}})),(function(e){return e.index})).join((function(e){return e.append("rect").attr("className",WX.selection.name).call(s).each((function(e,t){var n=this;1===t?(u.selectionShape=Sj(this),this.on("pointerdown",(function(e){n.attr("cursor","grabbing"),u.onDragStart("selection")(e)})),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",(function(){n.attr("cursor","grabbing")})),this.addEventListener("pointerup",(function(){n.attr("cursor","pointer")})),this.addEventListener("pointerover",(function(){n.attr("cursor","pointer")}))):this.on("pointerdown",u.onDragStart("track"))}))}),(function(e){return e.call(s)}),(function(e){return e.remove()})),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(e,t){this.renderTrack(t),this.renderSparkline(t),this.renderBrushArea(t),this.renderSelection(t)},t.prototype.clampValues=function(e,t){var n;void 0===t&&(t=4);var r=Lx(this.range,2),i=r[0],a=r[1],o=Lx(this.getValues().map((function(e){return ZW(e,t)})),2),s=o[0],u=o[1],l=Lx(((Array.isArray(e)?e:[s,null!==e&&void 0!==e?e:u])||[s,u]).map((function(e){return ZW(e,t)})),2),c=l[0],h=l[1];if("value"===this.attributes.type)return[0,Tx(h,i,a)];c>h&&(c=(n=Lx([h,c],2))[0],h=n[1]);var d=h-c;return d>a-i?[i,a]:c<i?s===i&&u===h?[i,h]:[i,d+i]:h>a?u===a&&s===c?[c,a]:[a-d,a]:[c,h]},t.prototype.calcSelectionArea=function(e){var t=Lx(this.clampValues(e),2),n=t[0],r=t[1],i=this.availableSpace,a=i.x,o=i.y,s=i.width,u=i.height;return this.getOrientVal([[{y:o,height:u,x:a,width:n*s},{y:o,height:u,x:n*s+a,width:(r-n)*s},{y:o,height:u,x:r*s,width:(1-r)*s}],[{x:a,width:s,y:o,height:n*u},{x:a,width:s,y:n*u+o,height:(r-n)*u},{x:a,width:s,y:r*u,height:(1-r)*u}]])},t.prototype.calcHandlePosition=function(e){var t=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,a=n.width,o=n.height,s=Lx(this.clampValues(),2),u=s[0],l=s[1],c="start"===e?-t:t,h=("start"===e?u:l)*this.getOrientVal([a,o])+c;return{x:r+this.getOrientVal([h,a/2]),y:i+this.getOrientVal([o/2,h])}},t.prototype.inferTextStyle=function(e){return"horizontal"===this.attributes.orientation?{}:"start"===e?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===e?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(e){var t,n=this.attributes,r=n.type,i=n.orientation,a=n.formatter,o=n.autoFitLabel,s=bj(this.attributes,"handle"),u=bj(s,"label"),l=s.spacing,c=this.getHandleSize(),h=this.clampValues(),d=a("start"===e?h[0]:h[1]),f=new wj({style:Px(Px(Px({},u),this.inferTextStyle(e)),{text:d})}),p=f.getBBox(),v=p.width,g=p.height;if(f.destroy(),!o){if("value"===r)return{text:d,x:0,y:-g-l};var m=l+c+("horizontal"===i?v/2:0);return(t={text:d})["horizontal"===i?"x":"y"]="start"===e?-m:m,t}var y=0,b=0,x=this.availableSpace,E=x.width,w=x.height,k=this.calcSelectionArea()[1],S=k.x,_=k.y,M=k.width,T=k.height,A=l+c;if("horizontal"===i){var C=A+v/2;if("start"===e)y=S-A-v>0?-C:C;else y=E-S-M-A>v?C:-C}else{var P=g+A;b="start"===e?_-c>g?-P:A:w-(_+T)-c>g?P:-A}return{x:y,y:b,text:d}},t.prototype.getHandleLabelStyle=function(e){var t=bj(this.attributes,"handleLabel");return Px(Px(Px({},t),this.calcHandleText(e)),this.inferTextStyle(e))},t.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,t=bj(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),r=this.getHandleSize();return Px({cursor:n,shape:e,size:r},t)},t.prototype.getHandleStyle=function(e){var t=this.attributes,n=t.x,r=t.y,i=t.showLabel,a=t.showLabelOnInteraction,o=t.orientation,s=this.calcHandlePosition(e),u=s.x,l=s.y,c=this.calcHandleText(e),h=i;return!i&&a&&(h=!!this.target),Px(Px(Px({},xj(this.getHandleIconStyle(),"icon")),xj(Px(Px({},this.getHandleLabelStyle(e)),c),"label")),{transform:"translate(".concat(u+n,", ").concat(l+r,")"),orientation:o,showLabel:h,type:e,zIndex:3})},t.prototype.getHandleSize=function(){var e=this.attributes,t=e.handleIconSize,n=e.width,r=e.height;return t||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},t.prototype.getOrientVal=function(e){var t=Lx(e,2),n=t[0],r=t[1];return"horizontal"===this.attributes.orientation?n:r},t.prototype.setValuesOffset=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var r=this.attributes.type,i=Lx(this.getValues(),2),a=[i[0]+("range"===r?e:0),i[1]+t].sort();n?this.setValues(a):this.innerSetValues(a,!0)},t.prototype.getRatio=function(e){var t=this.availableSpace,n=t.width,r=t.height;return e/this.getOrientVal([n,r])},t.prototype.dispatchCustomEvent=function(e,t,n){var r=this;e.on(t,(function(e){e.stopPropagation(),r.dispatchEvent(new PM(n,{detail:e}))}))},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(e){if(this.attributes.scrollable){var t=e.deltaX,n=e.deltaY||t,r=this.getRatio(n);this.setValuesOffset(r,r,!0)}},t.tag="slider",t}(vj),ZX={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},JX=Mj({background:"background",labelGroup:"label-group",label:"label"},"indicator"),QX=function(e){function t(t){var n=e.call(this,t,ZX)||this;return n.point=[0,0],n.group=n.appendChild(new NT({})),n.isMutationObserved=!0,n}return Cx(t,e),t.prototype.renderBackground=function(){if(this.label){var e=this.attributes,t=e.position,n=Lx(Tj(e.padding),4),r=n[0],i=n[1],a=n[2],o=n[3],s=this.label.node().getLocalBounds(),u=s.min,l=s.max,c=new _j(u[0]-o,u[1]-r,l[0]+i-u[0]+o,l[1]+a-u[1]+r),h=this.getPath(t,c),d=bj(this.attributes,"background");this.background=Sj(this.group).maybeAppendByClassName(JX.background,"path").styles(Px(Px({},d),{d:h})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var e=this.attributes,t=e.formatter,n=e.labelText,r=Lx(Ej(bj(this.attributes,"label")),2),i=r[0],a=r[1],o=(i.text,Rx(i,["text"]));(this.label=Sj(this.group).maybeAppendByClassName(JX.labelGroup,"g").styles(a),n)&&this.label.maybeAppendByClassName(JX.label,(function(){return nV(t(n))})).style("text",t(n).toString()).selectAll("text").styles(o)},t.prototype.adjustLayout=function(){var e=Lx(this.point,2),t=e[0],n=e[1],r=this.attributes,i=r.x,a=r.y;this.group.attr("transform","translate(".concat(i-t,", ").concat(a-n,")"))},t.prototype.getPath=function(e,t){var n=this.attributes.radius,r=t.x,i=t.y,a=t.width,o=t.height,s=[["M",r+n,i],["L",r+a-n,i],["A",n,n,0,0,1,r+a,i+n],["L",r+a,i+o-n],["A",n,n,0,0,1,r+a-n,i+o],["L",r+n,i+o],["A",n,n,0,0,1,r,i+o-n],["L",r,i+n],["A",n,n,0,0,1,r+n,i],["Z"]],u={top:4,right:6,bottom:0,left:2}[e],l=this.createCorner([s[u].slice(-2),s[u+1].slice(-2)]);return s.splice.apply(s,Ix([u+1,1],Lx(l),!1)),s[0][0]="M",s},t.prototype.createCorner=function(e,t){void 0===t&&(t=10);var n=tV.apply(void 0,Ix([],Lx(e),!1)),r=Lx(e,2),i=Lx(r[0],2),a=i[0],o=i[1],s=Lx(r[1],2),u=s[0],l=s[1],c=Lx(n?[u-a,[a,u]]:[l-o,[o,l]],2),h=c[0],d=Lx(c[1],2),f=d[0],p=d[1],v=h/2,g=t*(h/Math.abs(h)),m=g/2,y=g*Math.sqrt(3)/2*.8,b=Lx([f,f+v-m,f+v,f+v+m,p],5),x=b[0],E=b[1],w=b[2],k=b[3],S=b[4];return n?(this.point=[w,o-y],[["L",x,o],["L",E,o],["L",w,o-y],["L",k,o],["L",S,o]]):(this.point=[a+y,w],[["L",a,x],["L",a,E],["L",a+y,w],["L",a,k],["L",a,S]])},t.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?uj(this):sj(this)},t.prototype.bindEvents=function(){this.label.on(zM.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(vj),$X=function(e){function t(n){var r=e.call(this,hj({},t.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new VT({})),r.label=r.background.appendChild(new NT({})),r}return Cx(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return Tj(this.style.padding)},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(){var e=this.style,t=e.label,n=e.value,r=bj(this.attributes,"label");Sj(this.label).maybeAppend(".label",(function(){return nV(t)})).attr("className","label").styles(r),this.label.attr("__data__",n)},t.prototype.renderBackground=function(){var e=this.label.getBBox(),t=Lx(this.padding,4),n=t[0],r=t[1],i=t[2],a=t[3],o=e.width,s=e.height,u=o+a+r,l=s+n+i,c=bj(this.attributes,"background"),h=this.style,d=h.width,f=void 0===d?0:d,p=h.height,v=void 0===p?0:p,g=h.selected;this.background.attr(Px(Px({},c),{width:Math.max(u,f),height:Math.max(l,v),fill:g?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(a,", ").concat((l-s)/2,")")})},t.prototype.render=function(){this.renderLabel(),this.renderBackground()},t.prototype.bindEvents=function(){var e=this;this.addEventListener("pointerenter",(function(){e.style.selected||e.background.attr("fill",e.hoverColor)})),this.addEventListener("pointerleave",(function(){e.style.selected||e.background.attr("fill",e.style.backgroundFill)}));var t=this;this.addEventListener("click",(function(){var n=e.style,r=n.label,i=n.value,a=n.onClick;null===a||void 0===a||a(i,{label:r,value:i},t)}))},t.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},t}(vj),eY=function(e){function t(n){var r,i,a=e.call(this,hj({},t.defaultOptions,n))||this;a.currentValue=null===(r=t.defaultOptions.style)||void 0===r?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new VT({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new VT({className:"dropdown"}));var o=a.style.defaultValue;return o&&(null===(i=a.style.options)||void 0===i?void 0:i.some((function(e){return e.value===o})))&&(a.currentValue=o),a}return Cx(t,e),t.prototype.setValue=function(e){this.currentValue=e,this.render()},t.prototype.getValue=function(){return this.currentValue},Object.defineProperty(t.prototype,"dropdownPadding",{get:function(){return Tj(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),t.prototype.renderSelect=function(){var e,t=this,n=this.style,r=n.x,i=n.y,a=n.width,o=n.height,s=n.bordered,u=n.showDropdownIcon,l=bj(this.attributes,"select"),c=bj(this.attributes,"placeholder");this.select.attr(Px(Px({x:r,y:i,width:a,height:o},l),{fill:"#fff",strokeWidth:s?1:0}));var h=this.dropdownPadding;u&&Sj(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(r+a-10-h[1]-h[3],", ").concat(i+o/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var d=null===(e=this.style.options)||void 0===e?void 0:e.find((function(e){return e.value===t.currentValue})),f=Px({x:r+h[3]},c);Sj(this.select).selectAll(".placeholder").data(d?[]:[1]).join((function(e){return e.append("text").attr("className","placeholder").styles(f).style("y",(function(){var e=this.getBBox();return i+(o-e.height)/2}))}),(function(e){return e.styles(f)}),(function(e){return e.remove()}));var p=bj(this.attributes,"optionLabel"),v=Px({x:r+h[3]},p);Sj(this.select).selectAll(".value").data(d?[d]:[]).join((function(e){return e.append((function(e){return nV(e.label)})).attr("className","value").styles(v).style("y",(function(){var e=this.getBBox();return i+(o-e.height)/2}))}),(function(e){return e.styles(v)}),(function(e){return e.remove()}))},t.prototype.renderDropdown=function(){var e,t,n=this,r=this.style,i=r.x,a=r.y,o=r.width,s=r.height,u=r.options,l=r.onSelect,c=r.open,h=bj(this.attributes,"dropdown"),d=bj(this.attributes,"option"),f=this.dropdownPadding;Sj(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,(function(e){return e.value})).join((function(e){return e.append((function(e){return new $X({className:"dropdown-item",style:Px(Px(Px({},e),d),{width:o-f[1]-f[3],selected:e.value===n.currentValue,onClick:function(e,t,r){n.setValue(e),null===l||void 0===l||l(e,t,r),n.dispatchEvent(new PM("change",{detail:{value:e,option:t,item:r}})),uj(n.dropdown)}})})})).each((function(e,t){var n,r=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce((function(e,n,r){return r<t&&(e+=n.getBBox().height),e}),0);this.attr("transform","translate(".concat(f[3],", ").concat(f[0]+r,")"))}))}),(function(e){return e.update((function(e){return{selected:e.value===n.currentValue}}))}),(function(e){return e.remove()}));var p=null===(t=null===(e=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===e?void 0:e[0])||void 0===t?void 0:t.getBBox(),v=h.spacing;this.dropdown.attr(Px({transform:"translate(".concat(i,", ").concat(a+s+v,")"),width:p.width+f[1]+f[3],height:p.height+f[0]+f[2]},h)),!c&&uj(this.dropdown)},t.prototype.render=function(){this.renderSelect(),this.renderDropdown()},t.prototype.bindEvents=function(){var e=this;this.addEventListener("click",(function(e){e.stopPropagation()})),this.select.addEventListener("click",(function(){"visible"===e.dropdown.style.visibility?uj(e.dropdown):sj(e.dropdown)})),this.addEventListener("pointerenter",(function(){e.isPointerInSelect=!0})),this.addEventListener("pointerleave",(function(){e.isPointerInSelect=!1})),null===document||void 0===document||document.addEventListener("click",(function(){e.isPointerInSelect||uj(e.dropdown)}))},t.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"\u8bf7\u9009\u62e9",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},t}(vj),tY=function(e){function t(n){var r=e.call(this,hj({},{style:{backgroundOpacity:t.backgroundOpacities.default}},t.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new VT({})),r.icon=r.appendChild(new NT({})),r}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return Tj(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconSize",{get:function(){var e=this.attributes.size,t=Lx(this.padding,4),n=t[0],r=t[1],i=t[2],a=t[3];return Math.max(e-Math.max(a+r,n+i),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,r=e.size,i=r/2,a=bj(this.attributes,"background");this.background.attr(Px({x:t-i,y:n-i,width:r,height:r},a))},t.prototype.showIndicator=function(){if(this.label){var e=this.attributes.size,t=this.background.getBBox(),n=t.x,r=t.y;this.indicator.update({x:n+e/2,y:r-5,labelText:this.label,visibility:"visible"})}},t.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},t.prototype.connectedCallback=function(){var t;e.prototype.connectedCallback.call(this);var n=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y,o=null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new QX({style:{x:i+n/2,y:a-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},t.prototype.disconnectedCallback=function(){this.indicator.destroy()},t.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},t.prototype.bindEvents=function(){var e=this,n=this.attributes.onClick;if(this.addEventListener("click",(function(){null===n||void 0===n||n(e)})),this.showBackground){var r=function(){return e.background.attr({opacity:t.backgroundOpacities.default})};this.addEventListener("pointerenter",(function(){e.background.attr({opacity:t.backgroundOpacities.hover}),e.showIndicator()})),this.addEventListener("pointerleave",(function(){r(),e.hideIndicator()})),this.addEventListener("pointerdown",(function(){e.background.attr({opacity:t.backgroundOpacities.active})})),this.addEventListener("pointerup",(function(){r()}))}},t.tag="IconBase",t.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},t.backgroundOpacities={default:0,hover:.8,active:1},t}(vj),nY=function(e,t){return void 0===t&&(t="#565758"),new BT({style:{fill:t,d:"M ".concat(e,",").concat(e," L -").concat(e,",0 L ").concat(e,",-").concat(e," Z"),transformOrigin:"center"}})},rY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),t.prototype.arcPath=function(e,t,n){var r=Lx([n,n],2),i=r[0],a=r[1],o=function(r){return[e+n*Math.cos(r),t+n*Math.sin(r)]},s=Lx(o(-5/4*Math.PI),2),u=s[0],l=s[1],c=Lx(o(1/4*Math.PI),2),h=c[0],d=c[1];return"M".concat(u,",").concat(l,",A").concat(i,",").concat(a,",0,1,1,").concat(h,",").concat(d)},Object.defineProperty(t.prototype,"label",{get:function(){return"\u91cd\u7f6e"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth,o=a+.5;Sj(this.icon).maybeAppend(".reset","path").styles({stroke:r,lineWidth:a,d:this.arcPath(t,n,i/2-a),markerStart:nY(o,r)})},t}(tY),iY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5feb\u9000"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/Math.pow(3,.5),s=[[t,n],[t,n-o],[t-a,n],[t,n+o],[t,n],[t+a,n-o],[t+a,n+o],[t,n]];Sj(this.icon).maybeAppend(".backward","polygon").styles({points:s,fill:r})},t}(tY),aY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5feb\u8fdb"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/2,o=i/2/Math.pow(3,.5),s=[[t,n],[t,n-o],[t+a,n],[t,n+o],[t,n],[t-a,n-o],[t-a,n+o],[t,n]];Sj(this.icon).maybeAppend(".forward","polygon").styles({points:s,fill:r})},t}(tY),oY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u64ad\u653e"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3*Math.pow(3,.5)*.8,o=[[t+a,n],[t-a/2,n-i/2*.8],[t-a/2,n+i/2*.8],[t+a,n]];Sj(this.icon).maybeAppend(".play","polygon").styles({points:o,fill:r})},t}(tY),sY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6682\u505c"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=i/3,o=[[t-a,n-i/2],[t-a,n+i/2],[t-a/2,n+i/2],[t-a/2,n-i/2],[t-a,n-i/2],[t+a/2,n-i/2],[t+a/2,n+i/2],[t+a,n+i/2],[t+a,n-i/2]];Sj(this.icon).maybeAppend(".pause","polygon").styles({points:o,fill:r})},t}(tY),uY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u8303\u56f4\u65f6\u95f4"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth,o=a;Sj(this.icon).maybeAppend(".left-line","line").styles({x1:t-i/2,y1:n-i/2,x2:t-i/2,y2:n+i/2,stroke:r,lineWidth:a}),Sj(this.icon).maybeAppend(".right-line","line").styles({x1:t+i/2,y1:n-i/2,x2:t+i/2,y2:n+i/2,stroke:r,lineWidth:a}),Sj(this.icon).maybeAppend(".left-arrow","line").styles({x1:t,y1:n,x2:t-i/2+2*o,y2:n,stroke:r,lineWidth:a,markerEnd:nY(2*a,r)}),Sj(this.icon).maybeAppend(".right-arrow","line").styles({x1:t,y1:n,x2:t+i/2-2*o,y2:n,stroke:r,lineWidth:a,markerEnd:nY(2*a,r)})},t}(tY),lY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u5355\u4e00\u65f6\u95f4"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;Sj(this.icon).maybeAppend(".line","line").styles({x1:t,y1:n-i/2,x2:t,y2:n+i/2,stroke:r,lineWidth:a});var o=a;Sj(this.icon).maybeAppend(".left-arrow","line").styles({x1:t-i/2-2*o,y1:n,x2:t-2*o,y2:n,stroke:r,lineWidth:a,markerEnd:nY(2*a,r)}),Sj(this.icon).maybeAppend(".right-arrow","line").styles({x1:t+i/2+2*o,y1:n,x2:t+2*o,y2:n,stroke:r,lineWidth:a,markerEnd:nY(2*a,r)})},t}(tY),cY=function(e){return[[-e/2,-e/2],[-e/2,e/2],[e/2,e/2]]},hY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6298\u7ebf\u56fe"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth,o=(i-2*a-a)/4,s=(i-2*a-a)/2,u=Lx([t-i/2+a,n+i/2-2*a],2),l=u[0],c=u[1];Sj(this.icon).maybeAppend(".coordinate","polyline").styles({points:cY(i).map((function(e){var r=Lx(e,2),i=r[0],a=r[1];return[i+t,a+n]})),stroke:r,lineWidth:a}),Sj(this.icon).maybeAppend(".line","polyline").styles({points:[[l,c],[l+o,c-s],[l+2*o,c],[l+4*o,c-2*s]],stroke:r,lineWidth:a})},t}(tY),dY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cx(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return"\u6761\u5f62\u56fe"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.data,t=this.attributes,n=t.x,r=t.y,i=t.color,a=this.iconSize,o=this.lineWidth,s=o,u=(a-s)/e.length,l=(a-2*s)/4,c=Lx([n-a/2+2*s,r+a/2-s],2),h=c[0],d=c[1];Sj(this.icon).maybeAppend(".coordinate","polyline").styles({points:cY(a).map((function(e){var t=Lx(e,2),i=t[0],a=t[1];return[i+n,a+r]})),stroke:i,lineWidth:o}),Sj(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map((function(e,t){return{value:e,index:t}}))).join((function(e){return e.append("line").attr("className","column").style("x1",(function(e){var t=e.index;return h+u*t})).style("y1",d).style("x2",(function(e){var t=e.index;return h+u*t})).style("y2",(function(e){var t=e.value;return d-l*t})).styles({y1:d,stroke:i,lineWidth:o})}))},t}(tY),fY=function(e){function t(t){var n=e.call(this,hj({},{style:{color:"#d8d9d9"}},t))||this;return n.showBackground=!1,n}return Cx(t,e),t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.color,i=this.iconSize,a=this.lineWidth;Sj(this.icon).maybeAppend(".split","line").styles({x1:t,y1:n-i/2,x2:t,y2:n+i/2,stroke:r,lineWidth:a})},t}(tY),pY=function(e){function t(){var t=e.apply(this,Ix([],Lx(arguments),!1))||this;return t.showBackground=!1,t}return Cx(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return Tj(0)},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.iconSize,t=this.attributes,n=t.x,r=t.y,i=t.speed,a=void 0===i?1:i,o=PG(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),s=Tx(e,20,1/0),u=Px(Px({},o),{x:n-s/2,y:r-10,width:s,height:20,defaultValue:a,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:e/5,placeholderFontSize:e/2,optionPadding:0,optionLabelFontSize:e/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});Sj(this.icon).maybeAppend(".speed",(function(){return new eY({style:u})})).attr("className","speed").each((function(){this.update(u)}))},t.tag="SpeedSelect",t}(tY),vY=function(e){function t(t){var n=e.call(this,t)||this;return n.icon=n.appendChild(new NT({})),n.currentType=n.attributes.type,n}return Cx(t,e),t.prototype.getType=function(){return this.currentType},t.prototype.render=function(){var e=this,t=this.attributes,n=(t.onChange,Rx(t,["onChange"]));Sj(this.icon).selectAll(".icon").data([this.currentType]).join((function(t){return t.append((function(t){var n,r=null===(n=e.toggles.find((function(e){return Lx(e,1)[0]===t})))||void 0===n?void 0:n[1];if(!r)throw new Error("Invalid type: ".concat(t));return new r({})})).attr("className","icon").styles(n,!1).update({})}),(function(e){return e.styles({restStyles:n}).update({})}),(function(e){return e.remove()}))},t.prototype.bindEvents=function(){var e=this,t=this.attributes.onChange;this.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var r=(e.toggles.findIndex((function(t){return Lx(t,1)[0]===e.currentType}))+1)%e.toggles.length,i=e.toggles[r][0];null===t||void 0===t||t(e.currentType),e.currentType=i,e.render()}))},t.tag="ToggleIcon",t}(vj),gY=function(e){function t(t){var n=e.call(this,hj({},{style:{type:"play"}},t))||this;return n.toggles=[["play",oY],["pause",sY]],n}return Cx(t,e),t}(vY),mY=function(e){function t(t){var n=e.call(this,hj({},{style:{type:"range"}},t))||this;return n.toggles=[["range",uY],["value",lY]],n}return Cx(t,e),t}(vY),yY=function(e){function t(t){var n=e.call(this,hj({},{style:{type:"column"}},t))||this;return n.toggles=[["line",hY],["column",dY]],n}return Cx(t,e),t}(vY),bY={reset:rY,speed:pY,backward:iY,playPause:gY,forward:aY,selectionType:mY,chartType:yY,split:fY},xY=function(e){function t(n){var r=e.call(this,hj({},t.defaultOptions,n))||this;return r.background=r.appendChild(new VT({})),r.functions=r.appendChild(new NT({})),r}return Cx(t,e),Object.defineProperty(t.prototype,"padding",{get:function(){return Tj(this.attributes.padding)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.style,t=e.x,n=e.y,r=e.width,i=e.height,a=bj(this.attributes,"background");this.background.attr(Px({x:t,y:n,width:r,height:i},a))},t.prototype.renderFunctions=function(){var e,t=this,n=this.attributes,r=n.functions,i=n.iconSize,a=n.iconSpacing,o=n.x,s=n.y,u=n.width,l=n.height,c=n.align,h=Lx(this.padding,4),d=h[1],f=h[3],p=r.reduce((function(e,t){return e.length&&t.length?e.concat.apply(e,Ix(["split"],Lx(t),!1)):e.concat.apply(e,Ix([],Lx(t),!1))}),[]),v=p.length*(i+a)-a,g={left:f+i/2,center:(u-v)/2+i/2,right:u-v-f-d+i/2}[c]||0;null===(e=this.speedSelect)||void 0===e||e.destroy(),this.functions.removeChildren(),p.forEach((function(e,n){var r,u=bY[e],c={x:o+n*(i+a)+g,y:s+l/2,size:i};if(u===pY?(c.speed=t.attributes.speed,c.onSelect=function(n){return t.handleFunctionChange(e,{value:n})}):[gY,mY,yY].includes(u)?(c.onChange=function(n){return t.handleFunctionChange(e,{value:n})},u===gY&&(c.type="play"===t.attributes.state?"pause":"play"),u===mY&&(c.type="range"===t.attributes.selectionType?"value":"range"),u===yY&&(c.type="line"===t.attributes.chartType?"column":"line")):c.onClick=function(){return t.handleFunctionChange(e,{value:e})},u===pY){var h=null===(r=t.ownerDocument)||void 0===r?void 0:r.defaultView;h&&(t.speedSelect=new u({style:Px(Px({},c),{zIndex:100})}),h.appendChild(t.speedSelect))}else t.functions.appendChild(new u({style:c}))}))},t.prototype.disconnectedCallback=function(){var t;e.prototype.disconnectedCallback.call(this),null===(t=this.speedSelect)||void 0===t||t.destroy()},t.prototype.render=function(){this.renderBackground(),this.renderFunctions()},t.prototype.handleFunctionChange=function(e,t){var n=this.attributes.onChange;null===n||void 0===n||n(e,t)},t.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},t}(vj),EY=function(e){function t(n){var r=e.call(this,hj({},t.defaultOptions,n))||this;return r.bindEvents(),r}return Cx(t,e),t.prototype.bindEvents=function(){var e=this;this.addEventListener("mouseenter",(function(){e.attr("lineWidth",Math.ceil(+(e.style.r||0)/2))})),this.addEventListener("mouseleave",(function(){e.attr("lineWidth",0)}))},t.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},t}(AT),wY=function(e){function t(n){return e.call(this,hj({},t.defaultOptions,n))||this}return Cx(t,e),t.prototype.renderBackground=function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=bj(this.attributes,"background");Sj(this).maybeAppend("background","rect").attr("className","background").styles(Px({x:t-r/2,y:n-i/2,width:r,height:i},a))},t.prototype.renderIcon=function(){var e=this.attributes,t=e.x,n=e.y,r=e.iconSize,i=bj(this.attributes,"icon"),a=r/2;Sj(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(Px({x1:t-1,y1:n-a,x2:t-1,y2:n+a},i)),Sj(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(Px({x1:t+1,y1:n-a,x2:t+1,y2:n+a},i))},t.prototype.renderBorder=function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=e.type,o=bj(this.attributes,"border"),s="start"===a?+r/2:-r/2;Sj(this).maybeAppend("border","line").attr("className","border").styles(Px({x1:s+t,y1:n-i/2,x2:s+t,y2:n+i/2},o))},t.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},t.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},t}(vj);function kY(e,t){return"number"===typeof e?SY(e):function(e,t){var n=new Date(e);switch(t){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&0===n.getMinutes()?PV(n,"HH:mm\nYYYY-MM-DD"):PV(n,"HH:mm");case"half-day":return n.getHours()<12?"AM\n".concat(PV(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?PV(n,"DD\nYYYY-MM"):PV(n,"DD");case"week":return n.getDate()<=7?PV(n,"DD\nYYYY-MM"):PV(n,"DD");case"month":return[0,6].includes(n.getMonth())?PV(n,"MM\u6708\nYYYY"):PV(n,"MM\u6708");case"season":return[0].includes(n.getMonth())?PV(n,"MM\u6708\nYYYY"):PV(n,"MM\u6708");case"year":return PV(n,"YYYY");default:return PV(n,"YYYY-MM-DD HH:mm")}}(e,t)}function SY(e){var t=String(Math.floor(e/3600)).padStart(2,"0"),n=String(Math.floor(e%3600/60)).padStart(2,"0"),r=String(Math.floor(e%60)).padStart(2,"0");return e<3600?"".concat(n,":").concat(r):"".concat(t,":").concat(n,":").concat(r)}var _Y=function(e){function t(n){var r=e.call(this,hj({},t.defaultOptions,n))||this;r.axis=r.appendChild(new qW({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new KX({style:{onChange:function(e){r.handleSliderChange(e)}}})),r.controller=r.appendChild(new xY({})),r.states={},r.handleSliderChange=function(e){var t=function(){var e=r.states.values;return Array.isArray(e)?Ix([],Lx(e),!1):e}();r.setBySliderValues(e),r.dispatchOnChange(t)};var i=r.attributes,a=i.selectionType,o=i.chartType,s=i.speed,u=i.state,l=i.playMode,c=i.values;return r.states={chartType:o,playMode:l,selectionType:a,speed:s,state:u},r.setByTimebarValues(c),r}return Cx(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.data.sort((function(e,t){return e.time<t.time?-1:e.time>t.time?1:0}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"space",{get:function(){var e=this.attributes,t=e.x,n=e.y,r=e.width,i=e.height,a=e.type,o=e.controllerHeight,s=Tx(+i-o,0,+i),u=new _j(t,n+ +i-o,+r,o),l=0,c="time"===a?10:s;return{axisBBox:"chart"===a?new _j(t,n+s-(l=35),+r,l):new _j,controllerBBox:u,timelineBBox:new _j(t,n+("time"===a?s:s-c),+r,c-l)}},enumerable:!1,configurable:!0}),t.prototype.setBySliderValues=function(e){var t,n,r=this.data,i=Lx(Array.isArray(e)?e:[0,e],2),a=i[0],o=i[1],s=r.length,u=r[Math.floor(a*s)],l=r[Math.ceil(o*s)-(Array.isArray(e)?0:1)];this.states.values=[null!==(t=null===u||void 0===u?void 0:u.time)&&void 0!==t?t:r[0].time,null!==(n=null===l||void 0===l?void 0:l.time)&&void 0!==n?n:1/0]},t.prototype.setByTimebarValues=function(e){var t,n,r,i=this.data,a=Lx(Array.isArray(e)?e:[void 0,e],2),o=a[0],s=a[1],u=i.find((function(e){return e.time===o})),l=i.find((function(e){return e.time===s}));this.states.values=[null!==(t=null===u||void 0===u?void 0:u.time)&&void 0!==t?t:null===(n=i[0])||void 0===n?void 0:n.time,null!==(r=null===l||void 0===l?void 0:l.time)&&void 0!==r?r:1/0]},t.prototype.setByIndex=function(e){var t,n,r,i,a=this.data,o=Lx(e,2),s=o[0],u=o[1];this.states.values=[null!==(n=null===(t=a[s])||void 0===t?void 0:t.time)&&void 0!==n?n:a[0].time,null!==(i=null===(r=this.data[u])||void 0===r?void 0:r.time)&&void 0!==i?i:1/0]},Object.defineProperty(t.prototype,"sliderValues",{get:function(){var e=this.states,t=e.values,n=e.selectionType,r=Lx(Array.isArray(t)?t:[void 0,t],2),i=r[0],a=r[1],o=this.data,s=o.length,u="value"===n;return[function(){var e=o.findIndex((function(e){return e.time===i}));return u?0:e>-1?e/s:0}(),function(){if(a===1/0)return 1;var e=o.findIndex((function(e){return e.time===a}));return e>-1?e/s:u?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var e=this.states,t=e.values,n=e.selectionType,r=Lx(Array.isArray(t)?t:[this.data[0].time,t],2),i=r[0],a=r[1];return"value"===n?a:[i,a]},enumerable:!1,configurable:!0}),t.prototype.getDatumByRatio=function(e){var t=this.data,n=t.length;return t[Math.floor(e*(n-1))]},Object.defineProperty(t.prototype,"chartHandleIconShape",{get:function(){var e=this.states.selectionType,t=this.space.timelineBBox.height;return"range"===e?function(e){return new wY({style:{type:e,height:t,iconSize:t/6}})}:function(){return new FT({style:{x1:0,y1:-t/2,x2:0,y2:t/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),t.prototype.getChartStyle=function(e){var t=this,n=e.x,r=e.y,i=e.width,a=e.height,o=this.states,s=o.selectionType,u=o.chartType,l=this.data,c=this.attributes,h=c.type,d=c.labelFormatter,f=bj(this.attributes,"chart"),p=(f.type,Rx(f,["type"])),v="range"===s;if("time"===h)return Px({handleIconShape:function(){return new EY({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:v?-15:0,autoFitLabel:v,handleSpacing:v?-15:0,trackFill:"#edeeef",trackLength:i,trackOpacity:.5,trackRadius:a/2,trackSize:a/2,type:s,values:this.sliderValues,formatter:function(e){if(d)return d(e);var n=t.getDatumByRatio(e).time;return"number"===typeof n?SY(n):PV(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p);var g="range"===s?5:0,m=l.map((function(e){return e.value}));return Px({handleIconOffset:g,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:m,sparklineType:u,sparklineScale:.8,trackLength:i,trackSize:a,type:s,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p)},t.prototype.renderChart=function(e){void 0===e&&(e=this.space.timelineBBox),this.timeline.update(this.getChartStyle(e))},t.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},t.prototype.getAxisStyle=function(e){var t=this.data,n=this.attributes,r=n.interval,i=n.labelFormatter,a=bj(this.attributes,"axis"),o=e.x,s=e.y,u=e.width,l=Ix(Ix([],Lx(t),!1),[{time:0}],!1).map((function(e,t,n){var r=e.time;return{label:"".concat(r),value:t/(n.length-1),time:r}})),c=Px({startPos:[o,s],endPos:[o+u,s],data:l,labelFilter:function(e,t){return t<l.length-1},labelFormatter:function(e){var t=e.time;return i?i(t):kY(t,r)}},a);return c},t.prototype.renderAxis=function(e){void 0===e&&(e=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(e))},t.prototype.renderController=function(e){void 0===e&&(e=this.space.controllerBBox);var t=this.attributes.type,n=this.states,r=n.state,i=n.speed,a=n.selectionType,o=n.chartType,s=bj(this.attributes,"controller"),u=this,l=Px(Px(Px({},e),{iconSize:20,speed:i,state:r,selectionType:a,chartType:o,onChange:function(e,t){var n=t.value;switch(e){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(n);break;case"backward":u.internalBackward();break;case"playPause":"play"===n?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(n);break;case"chartType":u.handleChartTypeChange(n)}}}),s);"time"===t&&(l.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(l)},t.prototype.dispatchOnChange=function(e){var t=this.data,n=this.attributes.onChange,r=this.states,i=r.values,a=r.selectionType,o=Lx(i,2),s=o[0],u=o[1],l=u===1/0?t.at(-1).time:u;e&&function(e,t){if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e[0]===t[0]){if(e[1]===t[1])return!0;if(e[1]===1/0||t[1]===1/0)return!0}return!1}return!Array.isArray(t)&&e===t}(e,"range"===a?[s,l]:l)||null===n||void 0===n||n("range"===a?[s,l]:l)},t.prototype.internalReset=function(e){var t,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===r?[0,1]:[0,0]),this.renderController(),this.updateSelection(),e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onReset)||void 0===n||n.call(t),this.dispatchOnChange())},t.prototype.reset=function(){this.internalReset()},t.prototype.moveSelection=function(e,t){var n=this.data,r=n.length,i=this.states,a=i.values,o=i.selectionType,s=i.playMode,u=Lx(a,2),l=u[0],c=u[1],h=n.findIndex((function(e){return e.time===l})),d=n.findIndex((function(e){return e.time===c}));-1===d&&(d=r);var f,p="backward"===e?-1:1;"range"===o?"acc"===s?(f=[h,d+p],-1===p&&h===d&&(f=[h,r])):f=[h+p,d+p]:f=[h,d+p];var v=function(e){var t=Lx(e.sort((function(e,t){return e-t})),2),n=t[0],i=t[1],a=function(e){return Tx(e,0,r)};return i>r?"value"===o?[0,0]:"acc"===s?[a(n),a(n)]:[0,a(i-n)]:n<0?"acc"===s?[0,a(i)]:[a(n+r-i),r]:[a(n),a(i)]}(f);return this.setByIndex(v),this.updateSelection(),v},t.prototype.internalBackward=function(e){var t,n,r=this.moveSelection("backward",e);return e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onBackward)||void 0===n||n.call(t),this.dispatchOnChange()),r},t.prototype.backward=function(){this.internalBackward()},t.prototype.internalPlay=function(e){var t,n,r=this,i=this.data,a=this.attributes.loop,o=this.states.speed,s=void 0===o?1:o;this.playInterval=window.setInterval((function(){r.internalForward()[1]!==i.length||a||(r.internalPause(),r.renderController())}),1e3/s),this.states.state="play",!e&&(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onPlay)||void 0===n||n.call(t))},t.prototype.play=function(){this.internalPlay()},t.prototype.internalPause=function(e){var t,n;clearInterval(this.playInterval),this.states.state="pause",!e&&(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onPause)||void 0===n||n.call(t))},t.prototype.pause=function(){this.internalPause()},t.prototype.internalForward=function(e){var t,n,r=this.moveSelection("forward",e);return e||(null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onForward)||void 0===n||n.call(t),this.dispatchOnChange()),r},t.prototype.forward=function(){this.internalForward()},t.prototype.handleSpeedChange=function(e){var t,n;this.states.speed=e,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onSpeedChange)||void 0===n||n.call(t,e)},t.prototype.handleSelectionTypeChange=function(e){var t,n;this.states.selectionType=e,this.renderChart(),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onSelectionTypeChange)||void 0===n||n.call(t,e)},t.prototype.handleChartTypeChange=function(e){var t,n;this.states.chartType=e,this.renderChart(),null===(n=null===(t=this.attributes)||void 0===t?void 0:t.onChartTypeChange)||void 0===n||n.call(t,e)},t.prototype.render=function(){var e=this.space,t=e.axisBBox,n=e.controllerBBox,r=e.timelineBBox;this.renderController(n),this.renderAxis(t),this.renderChart(r),"play"===this.states.state&&this.internalPlay()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.internalPause(!0)},t.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},t}(vj);var MY=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},TY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},AY=["timestamp","time","date","datetime"],CY=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).backup(),r.upsertTimebar(),r}return C(t,e),p(t,[{key:"padding",get:function(){return uP(this.options.padding)}},{key:"play",value:function(){var e;null===(e=this.timebar)||void 0===e||e.play()}},{key:"pause",value:function(){var e;null===(e=this.timebar)||void 0===e||e.pause()}},{key:"forward",value:function(){var e;null===(e=this.timebar)||void 0===e||e.forward()}},{key:"backward",value:function(){var e;null===(e=this.timebar)||void 0===e||e.backward()}},{key:"reset",value:function(){var e;null===(e=this.timebar)||void 0===e||e.reset()}},{key:"update",value:function(e){Xn(S(t.prototype),"update",this).call(this,e),this.backup(),this.upsertTimebar()}},{key:"backup",value:function(){this.originalData=PY(this.context.graph.getData())}},{key:"upsertTimebar",value:function(){var e=this,t=this.context.canvas,n=this.options,r=n.onChange,i=n.timebarType,a=n.data,o=(n.x,n.y,n.width),s=n.height,u=(n.mode,TY(n,["onChange","timebarType","data","x","y","width","height","mode"])),l=t.getSize(),c=x(this.padding,1)[0];this.upsertCanvas().ready.then((function(){var t,n=Object.assign(Object.assign({x:l[0]/2-o/2,y:c,onChange:function(t){var n=(cE(t)?t:[t,t]).map((function(e){return function(e){return e instanceof Date}(e)?e.getTime():e}));"modify"===e.options.mode?e.filterElements(n):e.hiddenElements(n),null===r||void 0===r||r(n)}},u),{data:a.map((function(e){return kx(e)?{time:e,value:0}:e})),width:o,height:s,type:i});e.timebar?e.timebar.update(n):(e.timebar=new _Y({style:n}),null===(t=e.canvas)||void 0===t||t.appendChild(e.timebar))}))}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var e=this.options,t=e.className,n=e.height,r=e.position,i=this.context.canvas,a=x(i.getSize(),1)[0],o=x(this.padding,3),s=x(bV({width:a,height:n+o[0]+o[2],graphCanvas:i,className:"timebar",placement:r}),2),u=s[0],l=s[1];return this.container=u,t&&u.classList.add(t),this.canvas=l,this.canvas}},{key:"filterElements",value:function(e){return MY(this,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.originalData){t.next=2;break}return t.abrupt("return");case 2:return r=this.options,i=r.elementTypes,a=r.getTime,o=this.context,s=o.graph,l=o.element,c=PY(this.originalData),i.forEach((function(t){var n="".concat(t,"s");c[n]=(d.originalData[n]||[]).filter((function(t){var n=a(t);return!!RY(n,e)}))})),h=[].concat(I(c.nodes),I(c.combos)).map((function(e){return eR(e)})),c.edges=c.edges.filter((function(e){var t=e.source,n=e.target;return h.includes(t)&&h.includes(n)})),s.setData(c),t.next=11,null===(n=l.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"hiddenElements",value:function(e){var t=this,n=this.context.graph,r=this.options,i=r.elementTypes,a=r.getTime,o=[],s=[];i.forEach((function(n){var r,i="".concat(n,"s");((null===(r=t.originalData)||void 0===r?void 0:r[i])||[]).forEach((function(t){var n=eR(t),r=a(t);RY(r,e)?s.push(n):o.push(n)}))})),n.hideElement(o,!1),n.showElement(s,!1)}},{key:"destroy",value:function(){var e,n,r,i=this.context.graph;this.originalData&&i.setData(Object.assign({},this.originalData)),null===(e=this.timebar)||void 0===e||e.destroy(),null===(n=this.canvas)||void 0===n||n.destroy(),null===(r=this.container)||void 0===r||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);CY.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:function(e){return NY(e,AY,void 0)},loop:!1};var PY=function(e){var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,a=e.combos,o=void 0===a?[]:a;return{nodes:I(n),edges:I(i),combos:I(o)}},RY=function(e,t){if(kx(t))return e===t;var n=x(t,2),r=n[0],i=n[1];return e>=r&&e<=i},NY=function(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i],o=null===(r=e.data)||void 0===r?void 0:r[a];if(o)return o}return n};function OY(e){var t={top:"unset",right:"unset",bottom:"unset",left:"unset"};return e.split("-").forEach((function(e){t[e]="8px"})),t.flexDirection=e.startsWith("top")||e.startsWith("bottom")?"row":"column",t}var LY=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},DY=function(e){function t(e,n){var r;v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).$element=NG("toolbar",!1),r.onToolbarItemClick=function(e){var t=r.options.onClick;if(e.target instanceof Element&&e.target.className.includes("g6-toolbar-item")){var n=e.target.getAttribute("value");null===t||void 0===t||t(n,e.target)}};var i=r.context.canvas.getContainer();return r.$element.style.display="flex",i.appendChild(r.$element),OG("g6-toolbar-css","style",{},"\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n",document.head),OG("g6-toolbar-svgicon","div",{display:"none"},'\n  <svg>\n    <symbol id="zoom-in" viewBox="64 64 896 896">\n      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="zoom-out" viewBox="64 64 896 896">\n      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="edit" viewBox="64 64 896 896">\n      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>\n    </symbol>\n    <symbol id="delete" viewBox="64 64 896 896">\n      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>\n    </symbol>\n    <symbol id="redo" viewBox="64 64 896 896">\n      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>\n    </symbol>\n    <symbol id="undo" viewBox="64 64 896 896">\n      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>\n    </symbol>\n    <symbol id="export" viewBox="64 64 896 896">\n      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>\n    </symbol>\n    <symbol id="auto-fit" viewBox="64 64 896 896">\n      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>\n      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>\n    </symbol>\n    <symbol id="reset" viewBox="64 64 896 896">\n      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>\n    </symbol>\n    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>\n    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>\n  </svg>\n'),r.$element.addEventListener("click",r.onToolbarItemClick),r.update(n),r}return C(t,e),p(t,[{key:"update",value:function(e){var n=this,r=Object.create(null,{update:{get:function(){return Xn(S(t.prototype),"update",n)}}});return LY(this,void 0,void 0,u().mark((function t(){var n,i,a,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.update.call(this,e),n=this.options,i=n.className,a=n.position,o=n.style,this.$element.className="g6-toolbar ".concat(i||""),Object.assign(this.$element.style,o,OY(a)),t.next=6,this.getDOMContent();case 6:this.$element.innerHTML=t.sent;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"destroy",value:function(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),Xn(S(t.prototype),"destroy",this).call(this)}},{key:"getDOMContent",value:function(){return LY(this,void 0,void 0,u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.getItems();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return'\n          <div class="g6-toolbar-item" value="'.concat(e.value,'">\n            <svg aria-hidden="true" focusable="false">\n              <use xlink:href="#').concat(e.id,'"></use>\n            </svg>\n          </div>')})).join(""));case 4:case"end":return e.stop()}}),e,this)})))}}])}(RG);function IY(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}DY.defaultOptions={position:"top-left"};var FY=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e},UY=function(e,t){null!=t?e.replaceChildren?Array.isArray(t)?e.replaceChildren.apply(e,Ix([],Lx(t),!1)):e.replaceChildren(t):(e.innerHTML="",Array.isArray(t)?t.forEach((function(t){return e.appendChild(t)})):e.appendChild(t)):e.innerHTML=""};function BY(e){return void 0===e&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var zY={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function GY(e){var t;void 0===e&&(e="");var n=BY(e);return(t={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=Px({flex:1},zY),t[".".concat(n.VALUE)]=Px({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},zY),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var HY=function(e){function t(t){var n,r,i=this,a=null===(r=null===(n=t.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,o=BY(a);return(i=e.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:GY(a)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return Cx(t,e),Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,t=e.data,n=e.template;return t.map((function(e,t){var r=e.name,i=void 0===r?"":r,a=e.color,o=void 0===a?"black":a,s=e.index,u=Rx(e,["name","color","index"]),l=Px({name:i,color:o,index:null!==s&&void 0!==s?s:t},u);return IY(FY(n.item,l))}))},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var t;null===(t=this.element)||void 0===t||t.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(e,t){var n=this;if(void 0!==e&&void 0!==t){var r=function(){n.attributes.x=null!==e&&void 0!==e?e:n.attributes.x,n.attributes.y=null!==t&&void 0!==t?t:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(r):r()}this.element.style.visibility="visible"},t.prototype.hide=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.attributes.enterable&&this.isCursorEntered(e,t)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var e=this.attributes.template;this.element=IY(e.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&("string"===typeof e?this.element.innerHTML=e:UY(this.element,e))}},t.prototype.renderHTMLTooltipElement=function(){var e,t,n=this.attributes,r=n.template,i=n.title,a=n.enterable,o=n.style,s=n.content,u=BY(r.prefixCls),l=this.element;if(this.element.style.pointerEvents=a?"auto":"none",s)this.renderCustomContent();else{i?(l.innerHTML=r.title,l.getElementsByClassName(u.TITLE)[0].innerHTML=i):null===(t=null===(e=l.getElementsByClassName(u.TITLE))||void 0===e?void 0:e[0])||void 0===t||t.remove();var c=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=u.LIST,UY(h,c);var d=this.element.querySelector(".".concat(u.LIST));d?d.replaceWith(h):l.appendChild(h)}!function(e,t){Object.entries(t).forEach((function(t){var n=Lx(t,2),r=n[0],i=n[1];Ix([e],Lx(e.querySelectorAll(r)),!1).filter((function(e){return e.matches(r)})).forEach((function(e){e&&(e.style.cssText+=Object.entries(i).reduce((function(e,t){return"".concat(e).concat(t.join(":"),";")}),""))}))}))}(l,o)},t.prototype.getRelativeOffsetFromCursor=function(e){var t=this.attributes,n=t.position,r=t.offset,i=(e||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},o=this.elementSize,s=o.width,u=o.height,l=[-s/2,-u/2];return i.forEach((function(e){var t=Lx(l,2),n=t[0],i=t[1],o=Lx(a[e],2),c=o[0],h=o[1];l=[n+(s/2+r[0])*c,i+(u/2+r[1])*h]})),l},t.prototype.setOffsetPosition=function(e){var t=Lx(e,2),n=t[0],r=t[1],i=this.attributes,a=i.x,o=void 0===a?0:a,s=i.y,u=void 0===s?0:s,l=i.container,c=l.x,h=l.y;this.element.style.left="".concat(+o+c+n,"px"),this.element.style.top="".concat(+u+h+r,"px")},t.prototype.updatePosition=function(){var e=this.attributes.showDelay,t=void 0===e?60:e,n=Date.now();this.timestamp>0&&n-this.timestamp<t||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(e){var t=Lx(e,2),n=t[0],r=t[1],i=this.attributes,a=i.x,o=i.y,s=i.bounding,u=i.position;if(!s)return[n,r];var l=this.element,c=l.offsetWidth,h=l.offsetHeight,d=Lx([+a+n,+o+r],2),f=d[0],p=d[1],v={left:"right",right:"left",top:"bottom",bottom:"top"},g=s.x,m=s.y,y={left:f<g,right:f+c>g+s.width,top:p<m,bottom:p+h>m+s.height},b=[];u.split("-").forEach((function(e){y[e]?b.push(v[e]):b.push(e)}));var x=b.join("-");return this.getRelativeOffsetFromCursor(x)},t.prototype.isCursorEntered=function(e,t){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height;return new _j(r,i,a,o).isPointIn(e,t)}return!1},t.prototype.closeTransition=function(e){var t=this,n=this.element.style.transition;this.element.style.transition="none",e(),setTimeout((function(){t.element.style.transition=n}),10)},t.tag="tooltip",t}(vj),jY=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},VY=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).currentTarget=null,r.tooltipElement=null,r.container=null,r.isEnable=function(e,t){var n=r.options.enable;return"function"===typeof n?n(e,t):n},r.onClick=function(e){var t=e.target.id;r.currentTarget===t?r.hide(e):r.show(e)},r.onPointerMove=function(e){var t=e.target;r.currentTarget&&t.id!==r.currentTarget&&r.show(e)},r.onPointerLeave=function(e){r.hide(e)},r.onCanvasMove=function(e){r.hide(e)},r.onPointerEnter=function(e){r.show(e)},r.showById=function(e){return jY(r,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={target:{id:e}},t.next=3,this.show(n);case 3:case"end":return t.stop()}}),t,this)})))},r.getElementData=function(e,t){var n=r.context.model;switch(t){case"node":return n.getNodeData([e]);case"edge":return n.getEdgeData([e]);case"combo":return n.getComboData([e]);default:return[]}},r.show=function(e){return jY(r,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h,d,f,p,v,g,m;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.client,a=e.target.id,!eI(e.target)){t.next=3;break}return t.abrupt("return");case 3:if(o=this.context.graph.getElementType(a),s=this.options,l=s.getContent,c=s.title,h=this.getElementData(a,o),this.tooltipElement&&this.isEnable(e,h)){t.next=8;break}return t.abrupt("return");case 8:if(d={},!l){t.next=17;break}return t.next=12,l(e,h);case 12:if(d.content=t.sent,d.content){t.next=15;break}return t.abrupt("return");case 15:t.next=20;break;case 17:f=this.context.graph.getElementRenderStyle(a),p="node"===o?f.fill:f.stroke,d={title:c||o,data:h.map((function(e){return{name:"ID",value:e.id||"".concat(e.source," -> ").concat(e.target),color:p}}))};case 20:this.currentTarget=a,i?(v=i.x,g=i.y):(m=pN(h,"0.style",{x:0,y:0}),v=m.x,g=m.y),null===(r=(n=this.options).onOpenChange)||void 0===r||r.call(n,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:v,y:g,style:{".tooltip":{visibility:"visible"}}}),d));case 24:case"end":return t.stop()}}),t,this)})))},r.hide=function(e){var t,n,i,a,o;if(!e)return null===(n=(t=r.options).onOpenChange)||void 0===n||n.call(t,!1),null===(i=r.tooltipElement)||void 0===i||i.hide(),void(r.currentTarget=null);if(r.tooltipElement&&r.currentTarget){var s=e.client,u=s.x,l=s.y;null===(o=(a=r.options).onOpenChange)||void 0===o||o.call(a,!1),r.tooltipElement.hide(u,l),r.currentTarget=null}},r.initTooltip=function(){var e,t=new HY({className:"tooltip",style:r.tooltipStyleProps});return null===(e=r.container)||void 0===e||e.appendChild(t.HTMLTooltipElement),t},r.render(),r.bindEvents(),r}return C(t,e),p(t,[{key:"getEvents",value:function(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}},{key:"update",value:function(e){var n;this.unbindEvents(),Xn(S(t.prototype),"update",this).call(this,e),this.tooltipElement&&(null===(n=this.container)||void 0===n||n.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}},{key:"render",value:function(){var e=this.context.canvas.getContainer();e&&(this.container=e,this.tooltipElement=this.initTooltip())}},{key:"unbindEvents",value:function(){var e=this.context.graph,t=this.getEvents();Object.keys(t).forEach((function(n){e.off(n,t[n])}))}},{key:"bindEvents",value:function(){var e=this.context.graph,t=this.getEvents();Object.keys(t).forEach((function(n){e.on(n,t[n])}))}},{key:"tooltipStyleProps",get:function(){var e=this.context.canvas,t=e.getBounds().center,n=e.getContainer().getBoundingClientRect(),r=n.top,i=n.left,a=this.options,o=a.style,s=a.position,u=a.enterable,l=a.container,c=void 0===l?{x:-i,y:-r}:l,h=a.title,d=a.offset,f=x(t,2),p=f[0],v=f[1],g=x(e.getSize(),2);return{x:p,y:v,container:c,title:h,bounding:{x:0,y:0,width:g[0],height:g[1]},position:s,enterable:u,offset:d,style:o}}},{key:"destroy",value:function(){var e;this.unbindEvents(),this.tooltipElement&&(null===(e=this.container)||void 0===e||e.removeChild(this.tooltipElement.HTMLTooltipElement)),Xn(S(t.prototype),"destroy",this).call(this)}}])}(RG);VY.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var WY,XY=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};function YY(e,t){return WY||(WY=document.createElement("canvas")),WY.width=e,WY.height=t,WY.getContext("2d").clearRect(0,0,e,t),WY}function qY(e,t,n,r){return XY(this,void 0,void 0,u().mark((function i(){var a,o,s,l,c,h,d,f,p,v,g;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=YY(e,t),o=a.getContext("2d"),s=r.rotate,l=r.opacity,c=r.textFill,h=r.textFontSize,d=r.textFontFamily,f=r.textFontVariant,p=r.textFontWeight,v=r.textAlign,g=r.textBaseline,o.textAlign=v,o.textBaseline=g,o.translate(e/2,t/2),o.font="".concat(h,"px ").concat(d," ").concat(f," ").concat(p),s&&o.rotate(s),l&&(o.globalAlpha=l),c&&(o.fillStyle=c,o.fillText("".concat(n),0,0)),i.abrupt("return",a.toDataURL());case 11:case"end":return i.stop()}}),i)})))}function KY(e,t,n,r){return XY(this,void 0,void 0,u().mark((function i(){var a,o,s,l,c;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=YY(e,t),o=a.getContext("2d"),s=r.rotate,l=r.opacity,s&&o.rotate(s),l&&(o.globalAlpha=l),(c=new Image).crossOrigin="anonymous",c.src=n,i.abrupt("return",new Promise((function(n){c.onload=function(){var r=e>c.width?(e-c.width)/2:0,i=t>c.height?(t-c.height)/2:0;o.drawImage(c,0,0,c.width,c.height,r,i,e-2*r,t-2*i),n(a.toDataURL())}})));case 9:case"end":return i.stop()}}),i)})))}var ZY=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},JY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},QY=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).$element=NG("watermark"),r.context.canvas.getContainer().appendChild(r.$element),r.update(n),r}return C(t,e),p(t,[{key:"update",value:function(e){var n=this,r=Object.create(null,{update:{get:function(){return Xn(S(t.prototype),"update",n)}}});return ZY(this,void 0,void 0,u().mark((function t(){var n,i,a,o,s,l,c,h=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.update.call(this,e),n=this.options,i=n.width,a=n.height,o=n.text,s=n.imageURL,l=JY(n,["width","height","text","imageURL"]),Object.keys(l).forEach((function(t){t.startsWith("background")&&(h.$element.style[t]=e[t])})),!s){t.next=9;break}return t.next=6,KY(i,a,s,l);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,qY(i,a,o,l);case 11:t.t0=t.sent;case 12:c=t.t0,this.$element.style.backgroundImage="url(".concat(c,")");case 14:case"end":return t.stop()}}),t,this)})))}},{key:"destroy",value:function(){Xn(S(t.prototype),"destroy",this).call(this),this.$element.remove()}}])}(RG);QY.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};var $Y=["#7E92B5","#F4664A","#FFBE3A"],eq={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},tq={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function nq(e){var t=e.bgColor,n=e.textColor,r=e.nodeColor,i=e.nodeColorDisabled,a=e.nodeStroke,o=e.nodeHaloStrokeOpacityActive,s=void 0===o?.15:o,u=e.nodeHaloStrokeOpacitySelected,l=void 0===u?.25:u,c=e.nodeOpacityDisabled,h=void 0===c?.06:c,d=e.nodeIconOpacityInactive,f=void 0===d?.85:d,p=e.nodeOpacityInactive,v=void 0===p?.25:p,g=e.nodeBadgePalette,m=void 0===g?$Y:g,y=e.nodePaletteOptions,b=void 0===y?eq:y,x=e.edgeColor,E=e.edgeColorDisabled,w=e.edgePaletteOptions,k=void 0===w?tq:w,S=e.comboColor,_=e.comboColorDisabled,M=e.comboStroke,T=e.comboStrokeDisabled;return{background:t,node:{palette:b,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:m,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:l,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:v,donutOpacity:v,fillOpacity:v,iconOpacity:f,labelFill:n,labelFillOpacity:v,strokeOpacity:v},disabled:{badgeBackgroundOpacity:.25,donutOpacity:h,fill:i,fillOpacity:h,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:h}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:k,style:{badgeBackgroundFill:x,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:x,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:e.edgeColorInactive,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:E,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:t,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:S,halo:!1,haloLineWidth:12,haloStroke:M,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:M},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:_,fillOpacity:.25,labelOpacity:.25,stroke:T,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}var rq=nq({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),iq=nq({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"}),aq=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"beforeDraw",value:function(e,t){return e}},{key:"afterLayout",value:function(e,t){}}])}(pR),oq=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"beforeDraw",value:function(e){var t=this.context.model,n=e.add.combos,r=function(e){var n=[];return e.forEach((function(e,r){var i=t.getAncestorsData(r,"combo").map((function(e){return eR(e)})).reverse();n.push([r,e,i.length])})),new Map(n.sort((function(e,t){var n=x(e,3)[2];return x(t,3)[2]-n})).map((function(e){var t=x(e,2);return[t[0],t[1]]})))};return e.add.combos=r(n),e.update.combos=r(e.update.combos),e}}])}(aq);function sq(e,t,n,r,i){var a=eR(r),o="".concat(n,"s"),s=i?r:e.add[o].get(a)||e.update[o].get(a)||e.remove[o].get(a)||r;Object.entries(e).forEach((function(e){var n=x(e,2),r=n[0],i=n[1];t===r?i[o].set(a,s):i[o].delete(a)}))}function uq(e,t){return Object.keys(e).every((function(n){return e[n]===t[n]}))}var lq=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"beforeDraw",value:function(e,t){var n=this;if("visibility"===t.stage)return e;if(!this.context.model.model.hasTreeStructure(NC))return e;for(var r=this.context.model,i=e.add,a=e.update,o=[].concat(I(e.update.combos.entries()),I(e.add.combos.entries()));o.length;){var s=x(o.pop(),2),u=s[0];if(fN(s[1])){var l=r.getDescendantsData(u),c=hD(l.map(eR),(function(e){return r.getRelatedEdgesData(e)})),h=c.internal,d=c.external;l.forEach((function(t){var n=eR(t),i=o.findIndex((function(e){return x(e,1)[0]===n}));-1!==i&&o.splice(i,1);var a=r.getElementType(n);sq(e,"remove",a,t)})),h.forEach((function(t){return sq(e,"remove","edge",t)})),d.forEach((function(e){var t,r=eR(e);(null===(t=n.context.element)||void 0===t?void 0:t.getElement(r))?a.edges.set(r,e):i.edges.set(r,e)}))}else{var f=r.getChildrenData(u),p=hD(f.map(eR),(function(e){return r.getRelatedEdgesData(e)})),v=p.edges;[].concat(I(f),I(v)).forEach((function(t){var i,a=eR(t),s=r.getElementType(a),u=null===(i=n.context.element)||void 0===i?void 0:i.getElement(a);sq(e,u?"update":"add",s,t),"combo"===s&&o.push([a,t])}))}}return e}}])}(aq),cq=function(e,t,n,r){var i="".concat(n,"s"),a=eR(r);e.add[i].has(a)||e.update[i].has(a)||e[t][i].set(eR(r),r)},hq=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"getElement",value:function(e){return this.context.element.getElement(e)}},{key:"handleExpand",value:function(e,t){var n=this;if(cq(t,"add","node",e),!fN(e)){var r=eR(e);cq(t,"add","node",e),this.context.model.getRelatedEdgesData(r,"out").forEach((function(e){sq(t,"add","edge",e)})),this.context.model.getChildrenData(r).forEach((function(e){n.handleExpand(e,t)}))}}},{key:"beforeDraw",value:function(e){var t=this,n=this.context,r=n.graph,i=n.model;if(!i.model.hasTreeStructure(OC))return e;var a=e.add,o=a.nodes,s=a.edges,u=e.update.nodes,l=new Map,c=new Map;o.forEach((function(e,t){fN(e)&&l.set(t,e)})),s.forEach((function(e){if("node"===r.getElementType(e.source)){var t=r.getNodeData(e.source);fN(t)&&l.set(e.source,t)}})),u.forEach((function(e,n){var r=t.getElement(n);if(r){var i=r.attributes.collapsed;fN(e)?i||l.set(n,e):i&&c.set(n,e)}}));var h=new Set;return l.forEach((function(t,n){i.getDescendantsData(n).forEach((function(t){var n=eR(t);h.has(n)||(sq(e,"remove","node",t),i.getRelatedEdgesData(n).forEach((function(t){sq(e,"remove","edge",t)})),h.add(n))}))})),c.forEach((function(n,r){i.getAncestorsData(r,OC).some(fN)?sq(e,"remove","node",n):t.handleExpand(n,e)})),e}}])}(aq);new WeakMap;var dq=function(){function e(t){v(this,e),this.dragndropPluginOptions=t}return p(e,[{key:"apply",value:function(t){var n=this,r=t.renderingService,i=t.renderingContext.root.ownerDocument,a=i.defaultView,o=function(e){var t=e.target,r=t===i,o=r&&n.dragndropPluginOptions.isDocumentDraggable?i:t.closest&&t.closest("[draggable=true]");if(o){var s=!1,l=e.timeStamp,h=[e.clientX,e.clientY],d=null,f=[e.clientX,e.clientY],p=function(){var e=c(u().mark((function e(a){var c,p,v,g,m,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=8;break}if(c=a.timeStamp-l,p=Sx([a.clientX,a.clientY],h),!(c<=n.dragndropPluginOptions.dragstartTimeThreshold||p<=n.dragndropPluginOptions.dragstartDistanceThreshold)){e.next=5;break}return e.abrupt("return");case 5:a.type="dragstart",o.dispatchEvent(a),s=!0;case 8:if(a.type="drag",a.dx=a.clientX-f[0],a.dy=a.clientY-f[1],o.dispatchEvent(a),f=[a.clientX,a.clientY],r){e.next=21;break}return v="pointer"===n.dragndropPluginOptions.overlap?[a.canvasX,a.canvasY]:t.getBounds().center,e.next=17,i.elementsFromPoint(v[0],v[1]);case 17:g=e.sent,m=g[g.indexOf(t)+1],y=(null===m||void 0===m?void 0:m.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?i:null),d!==y&&(d&&(a.type="dragleave",a.target=d,d.dispatchEvent(a)),y&&(a.type="dragenter",a.target=y,y.dispatchEvent(a)),(d=y)&&(a.type="dragover",a.target=d,d.dispatchEvent(a)));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a.addEventListener("pointermove",p);var v=function(e){if(s){e.detail={preventClick:!0};var t=e.clone();d&&(t.type="drop",t.target=d,d.dispatchEvent(t)),t.type="dragend",o.dispatchEvent(t),s=!1}a.removeEventListener("pointermove",p)};t.addEventListener("pointerup",v,{once:!0}),t.addEventListener("pointerupoutside",v,{once:!0})}};r.hooks.init.tap(e.tag,(function(){a.addEventListener("pointerdown",o)})),r.hooks.destroy.tap(e.tag,(function(){a.removeEventListener("pointerdown",o)}))}}])}();dq.tag="Dragndrop";var fq=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,t),(e=T(this,t)).name="dragndrop",e.options=n,e}return C(t,e),p(t,[{key:"init",value:function(){this.addRenderingPlugin(new dq(an({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(e){Object.assign(this.plugins[0].dragndropPluginOptions,e)}}])}(Iw),pq=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},vq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},gq=["main"],mq=["background","main","label","transient"];var yq=function(){return p((function e(t){v(this,e),this.config={enableMultiLayer:!0},Object.assign(this.config,t);var n=this.config,r=n.renderer,i=n.background,a=(n.cursor,n.enableMultiLayer),o=vq(n,["renderer","background","cursor","enableMultiLayer"]),s=a?mq:gq,u=bq(r,s),l=Object.fromEntries(s.map((function(e){return[e,new oA(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:a,renderer:u[e],background:a?"background"===e?i:void 0:i}))]})));xq(l),this.extends={config:this.config,renderer:r,renderers:u,layers:l}}),[{key:"getConfig",value:function(){return this.config}},{key:"getLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.extends.layers[e]||this.getLayers().main}},{key:"getLayers",value:function(){return this.extends.layers}},{key:"getRenderer",value:function(e){return this.extends.renderers[e]}},{key:"getCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(e).getCamera()}},{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(e).getRoot()}},{key:"getContextService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(e).getContextService()}},{key:"setCursor",value:function(e){this.config.cursor=e,this.getLayer().setCursor(e)}},{key:"document",get:function(){return this.getLayer().document}},{key:"context",get:function(){return this.getLayer().context}},{key:"ready",get:function(){return Promise.all(Object.entries(this.getLayers()).map((function(e){return x(e,2)[1].ready})))}},{key:"resize",value:function(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach((function(n){var r=n.getCamera(),i=r.getPosition(),a=r.getFocalPoint();n.resize(e,t),r.setPosition(i),r.setFocalPoint(a)}))}},{key:"getBounds",value:function(e){return gP(Object.values(this.getLayers()).map((function(t){return e?t.getRoot().childNodes.find((function(t){return t.classList.includes(e)})):t.getRoot()})).filter((function(e){return(null===e||void 0===e?void 0:e.childNodes.length)>0})).map((function(e){return e.getBounds()})))}},{key:"getContainer",value:function(){var e=this.extends.config.container;return"string"===typeof e?document.getElementById(e):e}},{key:"getSize",value:function(){return[this.extends.config.width||0,this.extends.config.height||0]}},{key:"appendChild",value:function(e,t){var n,r=(null===(n=e.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(r).appendChild(e,t)}},{key:"setRenderer",value:function(e){var t=this;if(e!==this.extends.renderer){var n=bq(e,this.config.enableMultiLayer?mq:gq);this.extends.renderers=n,Object.entries(n).forEach((function(e){var n=x(e,2),r=n[0],i=n[1];return t.getLayer(r).setRenderer(i)})),xq(this.getLayers())}}},{key:"getCanvasByViewport",value:function(e){return HR(this.getLayer().viewport2Canvas(jR(e)))}},{key:"getViewportByCanvas",value:function(e){return HR(this.getLayer().canvas2Viewport(jR(e)))}},{key:"getViewportByClient",value:function(e){return HR(this.getLayer().client2Viewport(jR(e)))}},{key:"getClientByViewport",value:function(e){return HR(this.getLayer().viewport2Client(jR(e)))}},{key:"getClientByCanvas",value:function(e){return this.getClientByViewport(this.getViewportByCanvas(e))}},{key:"getCanvasByClient",value:function(e){var t=this.getLayer(),n=t.client2Viewport(jR(e));return HR(t.viewport2Canvas(n))}},{key:"toDataURL",value:function(){return pq(this,arguments,void 0,(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R,N,O,L,D,I;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=globalThis.devicePixelRatio||1,i=t.mode,a=void 0===i?"viewport":i,o=vq(t,["mode"]),s=0,l=0,c=0,h=0,"viewport"===a?(d=e.getSize(),f=x(d,2),c=f[0],h=f[1]):"overall"===a&&(p=e.getBounds(),v=dP(p),g=x(p.min,2),s=g[0],l=g[1],m=x(v,2),c=m[0],h=m[1]),y=IY('<div id="virtual-image"></div>'),b=new oA({width:c,height:h,renderer:new ML,devicePixelRatio:r,container:y,background:e.extends.config.background}),n.next=8,b.ready;case 8:return b.appendChild(e.getLayer("background").getRoot().cloneNode(!0)),b.appendChild(e.getRoot().cloneNode(!0)),E=e.getLayer("label").getRoot().cloneNode(!0),w=b.viewport2Canvas({x:0,y:0}),k=e.getCanvasByViewport([0,0]),E.translate([k[0]-w.x,k[1]-w.y]),E.scale(1/e.getCamera().getZoom()),b.appendChild(E),b.appendChild(e.getLayer("transient").getRoot().cloneNode(!0)),S=e.getCamera(),_=b.getCamera(),"viewport"===a?(_.setZoom(S.getZoom()),_.setPosition(S.getPosition()),_.setFocalPoint(S.getFocalPoint())):"overall"===a&&(M=_.getPosition(),T=x(M,3),A=T[0],C=T[1],P=T[2],R=_.getFocalPoint(),N=x(R,3),O=N[0],L=N[1],D=N[2],_.setPosition([A+s,C+l,P]),_.setFocalPoint([O+s,L+l,D])),I=b.getContextService(),n.abrupt("return",new Promise((function(t){b.addEventListener(eA.RERENDER,(function(){return pq(e,void 0,void 0,u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,300)}));case 2:return e.next=4,I.toDataURL(o);case 4:n=e.sent,t(n);case 6:case"end":return e.stop()}}),e)})))}))})));case 22:case"end":return n.stop()}}),n)}))()}))}},{key:"destroy",value:function(){Object.values(this.getLayers()).forEach((function(e){e.getCamera().cancelLandmarkAnimation(),e.destroy()}))}}])}();function bq(e,t){return Object.fromEntries(t.map((function(t){var n=(null===e||void 0===e?void 0:e(t))||new ML;return"main"===t?n.registerPlugin(new fq({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[t,n]})))}function xq(e){Object.entries(e).forEach((function(e){var t=x(e,2),n=t[0],r=t[1].getContextService().getDomElement();(null===r||void 0===r?void 0:r.style)&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,"main"!==n&&(r.style.pointerEvents="none")),(null===r||void 0===r?void 0:r.parentElement)&&(r.parentElement.style.display="grid")}))}var Eq=function(e){return e?parseInt(e):0};function wq(e){if(!e)return[0,0];var t=640,n=480,r=function(e){var t=getComputedStyle(e),n=e.clientWidth||Eq(t.width),r=e.clientHeight||Eq(t.height);return[n-(Eq(t.paddingLeft)+Eq(t.paddingRight)),r-(Eq(t.paddingTop)+Eq(t.paddingBottom))]}(e),i=x(r,2);t=i[0]||t,n=i[1]||n;return[Math.max(kx(t)?t:1,1),Math.max(kx(n)?n:1,1)]}var kq=p((function e(t){v(this,e),this.type=t})),Sq=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e])).data=n,r}return C(t,e),p(t)}(kq),_q=function(e){function t(e,n,r,i){var a;return v(this,t),(a=T(this,t,[e])).animationType=n,a.animation=r,a.data=i,a}return C(t,e),p(t)}(kq),Mq=function(e){function t(e,n,r){var i;return v(this,t),(i=T(this,t,[e])).elementType=n,i.data=r,i}return C(t,e),p(t)}(kq),Tq=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e])).data=n,r}return C(t,e),p(t)}(kq);function Aq(e,t){e.emit(t.type,t)}function Cq(e){var t;return(null===(t=null===e||void 0===e?void 0:e.style)||void 0===t?void 0:t.zIndex)||0}var Pq="cachedStyle",Rq=function(e){return"__".concat(e,"__")};function Nq(e,t){return pN(e,[Pq,Rq(t)])}var Oq=function(){return p((function e(t){v(this,e),this.tasks=[],this.animations=new Set,this.context=t}),[{key:"getTasks",value:function(){var e=I(this.tasks);return this.tasks=[],e}},{key:"add",value:function(e,t){this.tasks.push([e,t])}},{key:"animate",value:function(e,t,n){var r,i,a,o=this;null===(r=null===t||void 0===t?void 0:t.before)||void 0===r||r.call(t);var s=this.getTasks().map((function(t){var r,i,a,s=x(t,2),u=s[0],l=s[1],c=u.element,h=u.elementType,d=u.stage,f=WC(o.context.options,h,d,e);null===(r=null===l||void 0===l?void 0:l.before)||void 0===r||r.call(l);var p=f.length?qC(c,o.inferStyle(u,n),f):null;return p?(null===(i=null===l||void 0===l?void 0:l.beforeAnimate)||void 0===i||i.call(l,p),p.finished.then((function(){var e,t;null===(e=null===l||void 0===l?void 0:l.afterAnimate)||void 0===e||e.call(l,p),null===(t=null===l||void 0===l?void 0:l.after)||void 0===t||t.call(l),o.animations.delete(p)}))):null===(a=null===l||void 0===l?void 0:l.after)||void 0===a||a.call(l),p})).filter(Boolean);s.forEach((function(e){return o.animations.add(e)}));var u=GC(s);return u?(null===(i=null===t||void 0===t?void 0:t.beforeAnimate)||void 0===i||i.call(t,u),u.finished.then((function(){var e,n;null===(e=null===t||void 0===t?void 0:t.afterAnimate)||void 0===e||e.call(t,u),null===(n=null===t||void 0===t?void 0:t.after)||void 0===n||n.call(t),o.release()}))):null===(a=null===t||void 0===t?void 0:t.after)||void 0===a||a.call(t),u}},{key:"inferStyle",value:function(e,t){var n,r,i=e.element,a=e.elementType,o=e.stage,s=e.originalStyle,u=e.updatedStyle,l=void 0===u?{}:u;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},s),l));var c=e.modifiedStyle,h={},d={};if("enter"===o)Object.assign(h,{opacity:0});else if("exit"===o)Object.assign(d,{opacity:0});else if("show"===o)Object.assign(h,{opacity:0}),Object.assign(d,{opacity:null!==(n=Nq(i,"opacity"))&&void 0!==n?n:jC("opacity")});else if("hide"===o)Object.assign(h,{opacity:null!==(r=Nq(i,"opacity"))&&void 0!==r?r:jC("opacity")}),Object.assign(d,{opacity:0});else if("collapse"===o){var f=(t||{}).collapse,p=f.target,v=f.descendants,g=f.position;if("node"===a){if(v.includes(i.id)){var m=x(g,3),y=m[0],b=m[1],E=m[2];Object.assign(d,{x:y,y:b,z:E})}}else if("combo"===a){if(i.id===p||v.includes(i.id)){var w=x(g,2),k=w[0],S=w[1];Object.assign(d,{x:k,y:S,childrenNode:s.childrenNode})}}else"edge"===a&&Object.assign(d,{sourceNode:c.sourceNode,targetNode:c.targetNode})}else if("expand"===o){var _=(t||{}).expand,M=_.target,T=_.descendants,A=_.position;if("node"===a){if(i.id===M||T.includes(i.id)){var C=x(A,3),P=C[0],R=C[1],N=C[2];Object.assign(h,{x:P,y:R,z:N})}}else if("combo"===a){if(i.id===M||T.includes(i.id)){var O=x(A,3),L=O[0],D=O[1],I=O[2];Object.assign(h,{x:L,y:D,z:I,childrenNode:c.childrenNode})}}else"edge"===a&&Object.assign(h,{sourceNode:c.sourceNode,targetNode:c.targetNode})}return[Object.keys(h).length>0?Object.assign({},s,h):s,Object.keys(d).length>0?Object.assign({},c,d):c]}},{key:"stop",value:function(){this.animations.forEach((function(e){return e.cancel()}))}},{key:"clear",value:function(){this.tasks=[]}},{key:"release",value:function(){var e,t,n=this.context.canvas,r=null===(t=null===(e=n.document)||void 0===e?void 0:e.timeline)||void 0===t?void 0:t.animationsWithPromises;r&&(n.document.timeline.animationsWithPromises=r.filter((function(e){return"finished"!==e.playState})))}},{key:"destroy",value:function(){this.stop(),this.animations.clear(),this.tasks=[]}}])}(),Lq=function(){return p((function e(t){v(this,e),this.batchCount=0,this.context=t}),[{key:"emit",value:function(e){this.context.graph.emit(e.type,e)}},{key:"startBatch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.batchCount++,1===this.batchCount&&this.emit(new Sq(xC.BATCH_START,{initiate:e}))}},{key:"endBatch",value:function(){this.batchCount--,0===this.batchCount&&this.emit(new Sq(xC.BATCH_END))}},{key:"isBatching",get:function(){return this.batchCount>0}},{key:"destroy",value:function(){this.context=null}}])}(),Dq=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).currentTarget=null,n.currentTargetType=null,n.category="behavior",n.forwardCanvasEvents=function(e){var t=e.target,r=function(e){if(!e)return null;if(e instanceof qT)return{type:"canvas",element:e};for(var t=e;t;){if(zD(t))return{type:"node",element:t};if(GD(t))return{type:"edge",element:t};if(HD(t))return{type:"combo",element:t};t=t.parentElement}return null}(t);if(r){var i=n.context,a=i.graph,o=i.canvas,s=r.type,u=r.element;if(!("destroyed"in u)||!eI(u)&&!u.destroyed){var l=e.type,c=e.detail,h=e.button,d=Object.assign(Object.assign({},e),{target:u,targetType:s,originalTarget:t});l===mC.POINTER_MOVE&&(n.currentTarget!==u&&(n.currentTarget&&a.emit("".concat(n.currentTargetType,":").concat(mC.POINTER_LEAVE),Object.assign(Object.assign({},d),{type:mC.POINTER_LEAVE,target:n.currentTarget,targetType:n.currentTargetType})),u&&(Object.assign(d,{type:mC.POINTER_ENTER}),a.emit("".concat(s,":").concat(mC.POINTER_ENTER),d))),n.currentTarget=u,n.currentTargetType=s),l===mC.CLICK&&2===h||(a.emit("".concat(s,":").concat(l),d),a.emit(l,d)),l===mC.CLICK&&2===c&&(Object.assign(d,{type:mC.DBLCLICK}),a.emit("".concat(s,":").concat(mC.DBLCLICK),d),a.emit(mC.DBLCLICK,d)),l===mC.POINTER_DOWN&&2===h&&(Object.assign(d,{type:mC.CONTEXT_MENU,preventDefault:function(){var e;null===(e=o.getContainer())||void 0===e||e.addEventListener(mC.CONTEXT_MENU,(function(e){return e.preventDefault()}),{once:!0})}}),a.emit("".concat(s,":").concat(mC.CONTEXT_MENU),d),a.emit(mC.CONTEXT_MENU,d))}}},n.forwardContainerEvents=function(e){n.context.graph.emit(e.type,e)},n.forwardEvents(),n.setBehaviors(n.context.options.behaviors||[]),n}return C(t,e),p(t,[{key:"setBehaviors",value:function(e){this.setExtensions(e)}},{key:"forwardEvents",value:function(){var e=this,t=this.context.canvas.getContainer();t&&[yC.KEY_DOWN,yC.KEY_UP].forEach((function(n){t.addEventListener(n,e.forwardContainerEvents)}));var n=this.context.canvas.document;n&&[mC.CLICK,mC.DBLCLICK,mC.POINTER_OVER,mC.POINTER_LEAVE,mC.POINTER_ENTER,mC.POINTER_MOVE,mC.POINTER_OUT,mC.POINTER_DOWN,mC.POINTER_UP,mC.CONTEXT_MENU,mC.DRAG_START,mC.DRAG,mC.DRAG_END,mC.DRAG_ENTER,mC.DRAG_OVER,mC.DRAG_LEAVE,mC.DROP,mC.WHEEL].forEach((function(t){n.addEventListener(t,e.forwardCanvasEvents)}))}},{key:"destroy",value:function(){var e=this,n=this.context.canvas.getContainer();n&&[yC.KEY_DOWN,yC.KEY_UP].forEach((function(t){n.removeEventListener(t,e.forwardContainerEvents)})),this.context.canvas.document.removeAllEventListeners(),Xn(S(t.prototype),"destroy",this).call(this)}}])}(fR);var Iq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Fq(e,t){var n=e.data,r=e.style,i=Iq(e,["data","style"]),a=t.data,o=t.style,s=Iq(t,["data","style"]),u=Object.assign(Object.assign({},i),s);return(n||a)&&Object.assign(u,{data:Object.assign(Object.assign({},n),a)}),(r||o)&&Object.assign(u,{style:Object.assign(Object.assign({},r),o)}),u}function Uq(e){var t=e.data,n=e.style,r=Iq(e,["data","style"]);return t&&(r.data=Object.assign({},t)),n&&(r.style=Object.assign({},n)),r}function Bq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.states,r=void 0===n?[]:n,i=e.data,a=void 0===i?{}:i,o=e.style,s=void 0===o?{}:o,u=e.children,l=void 0===u?[]:u,c=Iq(e,["states","data","style","children"]),h=t.states,d=void 0===h?[]:h,f=t.data,p=void 0===f?{}:f,v=t.style,g=void 0===v?{}:v,m=t.children,y=void 0===m?[]:m,b=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},x=function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){return e[n]===t[n]}))};return!!x(c,Iq(t,["states","data","style","children"]))&&(!!b(l,y)&&(!!b(r,d)&&(!!x(a,p)&&!!x(s,g))))}var zq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Gq(e){var t=e.id,n=void 0===t?eR(e):t,r=e.style,i=e.data,a=zq(e,["id","style","data"]),o=Object.assign(Object.assign({},e),{style:Object.assign({},r),data:Object.assign({},i)});return function(e){return"source"in e&&"target"in e}(e)?Object.assign({id:n,data:o},a):{id:n,data:o}}function Hq(e){return e.data}function jq(e){if(!e.hasTreeStructure(OC)){e.attachTreeStructure(OC);var t,n=D(e.getAllEdges());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.source,a=r.target;e.setParent(a,i,OC)}}catch(o){n.e(o)}finally{n.f()}}}var Vq=function(){return p((function e(){v(this,e),this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new yI}),[{key:"pushChange",value:function(e){if(!this.isTraceless){var t=e.type;if(t===fC.NodeUpdated||t===fC.EdgeUpdated||t===fC.ComboUpdated){var n=e.value,r=e.original;this.changes.push({value:Uq(n),original:Uq(r),type:t})}else this.changes.push({value:Uq(e.value),type:t})}}},{key:"getChanges",value:function(){return this.changes}},{key:"clearChanges",value:function(){this.changes=[]}},{key:"batch",value:function(e){this.batchCount++,this.model.batch(e),this.batchCount--}},{key:"isBatching",value:function(){return this.batchCount>0}},{key:"silence",value:function(e){this.isTraceless=!0,e(),this.isTraceless=!1}},{key:"isCombo",value:function(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}},{key:"getData",value:function(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}},{key:"getNodeData",value:function(e){var t=this;return this.model.getAllNodes().reduce((function(n,r){var i=Hq(r);return t.isCombo(eR(i))||(void 0===e||e.includes(eR(i)))&&n.push(i),n}),[])}},{key:"getEdgeDatum",value:function(e){return Hq(this.model.getEdge(e))}},{key:"getEdgeData",value:function(e){return this.model.getAllEdges().reduce((function(t,n){var r=Hq(n);return(void 0===e||e.includes(eR(r)))&&t.push(r),t}),[])}},{key:"getComboData",value:function(e){var t=this;return this.model.getAllNodes().reduce((function(n,r){var i=Hq(r);return t.isCombo(eR(i))?((void 0===e||e.includes(eR(i)))&&n.push(i),n):n}),[])}},{key:"getRootsData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OC;return this.model.getRoots(e).map(Hq)}},{key:"getAncestorsData",value:function(e,t){var n=this.model;return n.hasNode(e)&&n.hasTreeStructure(t)?n.getAncestors(e,t).map(Hq):[]}},{key:"getDescendantsData",value:function(e){var t=this,n=this.getElementDataById(e),r=[];return sN(n,(function(e){e!==n&&r.push(e)}),(function(e){return t.getChildrenData(eR(e))}),"TB"),r}},{key:"getParentData",value:function(e,t){var n=this.model;if(t){if(n.hasNode(e)&&n.hasTreeStructure(t)){var r=n.getParent(e,t);return r?Hq(r):void 0}}else BC.warn("The hierarchy structure key is not specified")}},{key:"getChildrenData",value:function(e){var t="node"===this.getElementType(e)?OC:NC,n=this.model;return n.hasNode(e)&&n.hasTreeStructure(t)?n.getChildren(e,t).map(Hq):[]}},{key:"getElementsDataByType",value:function(e){return"node"===e?this.getNodeData():"edge"===e?this.getEdgeData():"combo"===e?this.getComboData():[]}},{key:"getElementDataById",value:function(e){return"edge"===this.getElementType(e)?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}},{key:"getNodeLikeDatum",value:function(e){return Hq(this.model.getNode(e))}},{key:"getNodeLikeData",value:function(e){return this.model.getAllNodes().reduce((function(t,n){var r=Hq(n);return e?e.includes(eR(r))&&t.push(r):t.push(r),t}),[])}},{key:"getElementDataByState",value:function(e,t){return this.getElementsDataByType(e).filter((function(e){var n;return null===(n=e.states)||void 0===n?void 0:n.includes(t)}))}},{key:"getElementState",value:function(e){var t;return(null===(t=this.getElementDataById(e))||void 0===t?void 0:t.states)||[]}},{key:"hasNode",value:function(e){return this.model.hasNode(e)&&!this.isCombo(e)}},{key:"hasEdge",value:function(e){return this.model.hasEdge(e)}},{key:"hasCombo",value:function(e){return this.model.hasNode(e)&&this.isCombo(e)}},{key:"getRelatedEdgesData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.model.getRelatedEdges(e,t).map(Hq)}},{key:"getNeighborNodesData",value:function(e){return this.model.getNeighbors(e).map(Hq)}},{key:"setData",value:function(e){var t=this,n=e.nodes,r=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,o=e.combos,s=void 0===o?[]:o,u=this.getData(),l=u.nodes,c=u.edges,h=u.combos,d=hR(l,r,(function(e){return eR(e)}),Bq),f=hR(c,a,(function(e){return eR(e)}),Bq),p=hR(h,s,(function(e){return eR(e)}),Bq);this.batch((function(){var e={nodes:d.enter,edges:f.enter,combos:p.enter};t.addData(e),t.computeZIndex(e,"add",!0);var n={nodes:d.update,edges:f.update,combos:p.update};t.updateData(n),t.computeZIndex(n,"update",!0);var r={nodes:d.exit.map(eR),edges:f.exit.map(eR),combos:p.exit.map(eR)};t.removeData(r)}))}},{key:"addData",value:function(e){var t=this,n=e.nodes,r=e.edges,i=e.combos;this.batch((function(){t.addComboData(i),t.addNodeData(n),t.addEdgeData(r)})),this.computeZIndex(e,"add")}},{key:"addNodeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(this.model.addNodes(t.map((function(t){return e.pushChange({value:t,type:fC.NodeAdded}),Gq(t)}))),this.updateNodeLikeHierarchy(t),this.computeZIndex({nodes:t},"add"))}},{key:"addEdgeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(this.model.addEdges(t.map((function(t){return e.pushChange({value:t,type:fC.EdgeAdded}),Gq(t)}))),this.computeZIndex({edges:t},"add"))}},{key:"addComboData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var n=this.model;n.hasTreeStructure(NC)||n.attachTreeStructure(NC),n.addNodes(t.map((function(t){return e.comboIds.add(eR(t)),e.pushChange({value:t,type:fC.ComboAdded}),Gq(t)}))),this.updateNodeLikeHierarchy(t),this.computeZIndex({combos:t},"add")}}},{key:"addChildrenData",value:function(e,t){var n=this.getNodeLikeDatum(e),r=t.map(eR);this.addNodeData(t),this.updateNodeData([{id:e,children:[].concat(I(n.children||[]),I(r))}]),this.addEdgeData(r.map((function(t){return{source:e,target:t}})))}},{key:"computeZIndex",value:function(e,t){var n=this;!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.isBatching()||this.batch((function(){var r=e.nodes,i=void 0===r?[]:r,a=e.edges,o=void 0===a?[]:a,s=e.combos;(void 0===s?[]:s).forEach((function(e){var r,i,a,o=eR(e);if(("add"!==t||!kx(null===(r=e.style)||void 0===r?void 0:r.zIndex))&&("update"!==t||"combo"in e)){var s=n.getParentData(o,NC),u=s?(null!==(a=null===(i=s.style)||void 0===i?void 0:i.zIndex)&&void 0!==a?a:0)+1:0;n.preventUpdateNodeLikeHierarchy((function(){n.updateComboData([{id:o,style:{zIndex:u}}])}))}})),i.forEach((function(e){var r,i,a,o=eR(e);if(("add"!==t||!kx(null===(r=e.style)||void 0===r?void 0:r.zIndex))&&("update"!==t||"combo"in e||"children"in e)){var s=0,u=n.getParentData(o,NC);if(u)s=((null===(i=u.style)||void 0===i?void 0:i.zIndex)||0)+1;else{var l=n.getParentData(o,OC);l&&(s=(null===(a=null===l||void 0===l?void 0:l.style)||void 0===a?void 0:a.zIndex)||0)}n.preventUpdateNodeLikeHierarchy((function(){n.updateNodeData([{id:o,style:{zIndex:s}}])}))}})),o.forEach((function(e){var t,r,i,a,o;if(!kx(null===(t=e.style)||void 0===t?void 0:t.zIndex)){var s=e.id,u=e.source,l=e.target;if(s){var c=n.getEdgeDatum(s);u=c.source,l=c.target}else s=eR(e);if(u&&l){var h=(null===(i=null===(r=n.getNodeLikeDatum(u))||void 0===r?void 0:r.style)||void 0===i?void 0:i.zIndex)||0,d=(null===(o=null===(a=n.getNodeLikeDatum(l))||void 0===a?void 0:a.style)||void 0===o?void 0:o.zIndex)||0;n.updateEdgeData([{id:eR(e),style:{zIndex:Math.max(h,d)-1}}])}}}))}))}},{key:"getFrontZIndex",value:function(e){var t,n=this.getElementType(e),r=this.getElementDataById(e),i=this.getData();if(Object.assign(i,P({},"".concat(n,"s"),i["".concat(n,"s")].filter((function(t){return eR(t)!==e})))),"combo"===n&&!fN(r)){var a=new Set(this.getAncestorsData(e,NC).map(eR));i.nodes=i.nodes.filter((function(e){return!a.has(eR(e))})),i.combos=i.combos.filter((function(e){return!a.has(eR(e))})),i.edges=i.edges.filter((function(e){var t=e.source,n=e.target;return!a.has(t)&&!a.has(n)}))}return Math.max.apply(Math,[(null===(t=r.style)||void 0===t?void 0:t.zIndex)||0,0].concat(I(Object.values(i).flat().map((function(e){var t;return((null===(t=null===e||void 0===e?void 0:e.style)||void 0===t?void 0:t.zIndex)||0)+1})))))}},{key:"updateNodeLikeHierarchy",value:function(e){var t=this;if(this.enableUpdateNodeLikeHierarchy){var n=this.model;e.forEach((function(e){var r=eR(e),i=tR(e);void 0!==i&&(n.hasTreeStructure(NC)||n.attachTreeStructure(NC),null===i&&t.refreshComboData(r),t.setParent(r,tR(e),NC));var a=e.children||[];if(a.length){n.hasTreeStructure(OC)||n.attachTreeStructure(OC);var o=a.filter((function(e){return n.hasNode(e)}));o.forEach((function(e){return t.setParent(e,r,OC)})),o.length!==a.length&&t.updateNodeData([{id:r,children:o}])}}))}}},{key:"preventUpdateNodeLikeHierarchy",value:function(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}},{key:"updateData",value:function(e){var t=this,n=e.nodes,r=e.edges,i=e.combos;this.batch((function(){t.updateNodeData(n),t.updateComboData(i),t.updateEdgeData(r)})),this.computeZIndex(e,"update")}},{key:"updateNodeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var n=this.model;this.batch((function(){var r=[];t.forEach((function(t){var i=eR(t),a=Hq(n.getNode(i));if(!Bq(a,t)){var o=Fq(a,t);e.pushChange({value:o,original:a,type:fC.NodeUpdated}),n.mergeNodeData(i,o),r.push(o)}})),e.updateNodeLikeHierarchy(r)})),this.computeZIndex({nodes:t},"update")}}},{key:"refreshData",value:function(){var e=this,t=this.getData(),n=t.nodes,r=t.edges,i=t.combos;n.forEach((function(t){e.pushChange({value:t,original:t,type:fC.NodeUpdated})})),r.forEach((function(t){e.pushChange({value:t,original:t,type:fC.EdgeUpdated})})),i.forEach((function(t){e.pushChange({value:t,original:t,type:fC.ComboUpdated})}))}},{key:"syncNodeLikeDatum",value:function(e){var t=this.model,n=eR(e);if(t.hasNode(n)){var r=Fq(Hq(t.getNode(n)),e);t.mergeNodeData(n,r)}}},{key:"syncEdgeDatum",value:function(e){var t=this.model,n=eR(e);if(t.hasEdge(n)){var r=Fq(Hq(t.getEdge(n)),e);t.mergeEdgeData(n,r)}}},{key:"updateEdgeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var n=this.model;this.batch((function(){t.forEach((function(t){var r=eR(t),i=Hq(n.getEdge(r));if(!Bq(i,t)){t.source&&i.source!==t.source&&n.updateEdgeSource(r,t.source),t.target&&i.target!==t.target&&n.updateEdgeTarget(r,t.target);var a=Fq(i,t);e.pushChange({value:a,original:i,type:fC.EdgeUpdated}),n.mergeEdgeData(r,a)}}))})),this.computeZIndex({edges:t},"update")}}},{key:"updateComboData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var n=this.model;n.batch((function(){var r=[];t.forEach((function(t){var i=eR(t),a=Hq(n.getNode(i));if(!Bq(a,t)){var o=Fq(a,t);e.pushChange({value:o,original:a,type:fC.ComboUpdated}),n.mergeNodeData(i,o),r.push(o)}})),e.updateNodeLikeHierarchy(r)})),this.computeZIndex({combos:t},"update")}}},{key:"setParent",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e!==t){var a=tR(this.getNodeLikeDatum(e));if(a!==t&&n===NC){var o={id:e,combo:t};this.isCombo(e),this.syncNodeLikeDatum(o)}this.model.setParent(e,t,n),i&&n===NC&&function(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.has(a)||(n.push(a),t.set(a,!0))}return n}([a,t]).forEach((function(e){void 0!==e&&r.refreshComboData(e)}))}}},{key:"refreshComboData",value:function(e){var t=this,n=this.getComboData([e])[0],r=this.getAncestorsData(e,NC);n&&this.pushChange({value:n,original:n,type:fC.ComboUpdated}),r.forEach((function(e){t.pushChange({value:e,original:e,type:fC.ComboUpdated})}))}},{key:"getElementPosition",value:function(e){return UR(this.getElementDataById(e))}},{key:"translateNodeLikeBy",value:function(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t)}},{key:"translateNodeLikeTo",value:function(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t)}},{key:"translateNodeBy",value:function(e,t){var n=wR(this.getElementPosition(e),[].concat(I(t),[0]).slice(0,3));this.translateNodeTo(e,n)}},{key:"translateNodeTo",value:function(e,t){var n=this,r=x(t,3),i=r[0],a=void 0===i?0:i,o=r[1],s=void 0===o?0:o,u=r[2],l=void 0===u?0:u;this.preventUpdateNodeLikeHierarchy((function(){n.updateNodeData([{id:e,style:{x:a,y:s,z:l}}])}))}},{key:"translateComboBy",value:function(e,t){var n=this,r=x(t,3),i=r[0],a=void 0===i?0:i,o=r[1],s=void 0===o?0:o,u=r[2],l=void 0===u?0:u;if(![a,s,l].some(isNaN)&&![a,s,l].every((function(e){return 0===e}))){var c=this.getComboData([e])[0];if(c){var h=new Set;sN(c,(function(e){var t=eR(e);if(!h.has(t)){h.add(t);var r=x(UR(e),3),i=r[0],o=r[1],u=r[2],c=Fq(e,{style:{x:i+a,y:o+s,z:u+l}});n.pushChange({value:c,original:e,type:n.isCombo(t)?fC.ComboUpdated:fC.NodeUpdated}),n.model.mergeNodeData(t,c)}}),(function(e){return n.getChildrenData(eR(e))}),"BT")}}}},{key:"translateComboTo",value:function(e,t){var n,r=this;if(!t.some(isNaN)){var i=x(t,3),a=i[0],o=void 0===a?0:a,s=i[1],u=void 0===s?0:s,l=i[2],c=void 0===l?0:l,h=null===(n=this.getComboData([e]))||void 0===n?void 0:n[0];if(h){var d=x(UR(h),3),f=d[0],p=d[1],v=d[2],g=o-f,m=u-p,y=c-v;sN(h,(function(e){var t=eR(e),n=x(UR(e),3),i=n[0],a=n[1],o=n[2],s=Fq(e,{style:{x:i+g,y:a+m,z:o+y}});r.pushChange({value:s,original:e,type:r.isCombo(t)?fC.ComboUpdated:fC.NodeUpdated}),r.model.mergeNodeData(t,s)}),(function(e){return r.getChildrenData(eR(e))}),"BT")}}}},{key:"removeData",value:function(e){var t=this,n=e.nodes,r=e.edges,i=e.combos;this.batch((function(){t.removeEdgeData(r),t.removeNodeData(n),t.removeComboData(i),t.latestRemovedComboIds=new Set(i)}))}},{key:"removeNodeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&this.batch((function(){t.forEach((function(t){e.removeEdgeData(e.getRelatedEdgesData(t).map(eR)),e.pushChange({value:e.getNodeData([t])[0],type:fC.NodeRemoved}),e.removeNodeLikeHierarchy(t)})),e.model.removeNodes(t)}))}},{key:"removeEdgeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(t.forEach((function(t){return e.pushChange({value:e.getEdgeData([t])[0],type:fC.EdgeRemoved})})),this.model.removeEdges(t))}},{key:"removeComboData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&this.batch((function(){t.forEach((function(t){e.pushChange({value:e.getComboData([t])[0],type:fC.ComboRemoved}),e.removeNodeLikeHierarchy(t),e.comboIds.delete(t)})),e.model.removeNodes(t)}))}},{key:"removeNodeLikeHierarchy",value:function(e){var t=this;if(this.model.hasTreeStructure(NC)){var n=tR(this.getNodeLikeDatum(e));this.setParent(e,void 0,NC,!1),this.model.getChildren(e,NC).forEach((function(e){var r=Hq(e),i=eR(r);t.setParent(eR(r),n,NC,!1);var a=Fq(r,{id:eR(r),combo:n});t.pushChange({value:a,original:r,type:t.isCombo(i)?fC.ComboUpdated:fC.NodeUpdated}),t.model.mergeNodeData(eR(r),a)})),_x(n)||this.refreshComboData(n)}}},{key:"getElementType",value:function(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(UC("Unknown element type of id: ".concat(e)))}},{key:"destroy",value:function(){var e=this.model,t=e.getAllNodes(),n=e.getAllEdges();e.removeEdges(n.map((function(e){return e.id}))),e.removeNodes(t.map((function(e){return e.id}))),this.context={}}}])}(),Wq=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Xq=function(){return p((function e(t){v(this,e),this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=t}),[{key:"init",value:function(){this.initContainer()}},{key:"initContainer",value:function(){if(!this.container||this.container.destroyed){var e=this.context.canvas;this.container=e.appendChild(new NT({className:"elements"}))}}},{key:"emit",value:function(e,t){t.silence||Aq(this.context.graph,e)}},{key:"forEachElementData",value:function(e){var t=this;oN.forEach((function(n){var r=t.context.model.getElementsDataByType(n);e(n,r)}))}},{key:"getElementType",value:function(e,t){var n,r=this.context,i=r.options,a=r.graph,o=(null===(n=i[e])||void 0===n?void 0:n.type)||t.type;return o?"string"===typeof o?o:o.call(a,t):"edge"===e?"line":"circle"}},{key:"getTheme",value:function(e){return zC(this.context.options)[e]||{}}},{key:"getThemeStyle",value:function(e){return this.getTheme(e).style||{}}},{key:"getThemeStateStyle",value:function(e,t){var n=this.getTheme(e).state,r=void 0===n?{}:n;return Object.assign.apply(Object,[{}].concat(I(t.map((function(e){return r[e]||{}})))))}},{key:"computePaletteStyle",value:function(){var e=this,t=this.context.options;this.paletteStyle={},this.forEachElementData((function(n,r){var i,a,o=Object.assign({},TN(null===(i=e.getTheme(n))||void 0===i?void 0:i.palette),TN(null===(a=t[n])||void 0===a?void 0:a.palette));(null===o||void 0===o?void 0:o.field)&&Object.assign(e.paletteStyle,function(e,t){if(!t)return{};var n=t.type,r=t.color,i=t.field,a=t.invert,o=function(e){var t="string"===typeof r?DC("palette",r):r;if("function"===typeof t){var n={};return e.forEach((function(e){var r=x(e,2),i=r[0],o=r[1];n[i]=t(a?1-o:o)})),n}if(Array.isArray(t)){var i=a?I(t).reverse():t,o={};return e.forEach((function(e){var n=x(e,2),r=n[0],a=n[1];o[r]=i[a%t.length]})),o}return{}},s=function(e,t){var n;return"string"===typeof e?null===(n=t.data)||void 0===n?void 0:n[e]:null===e||void 0===e?void 0:e(t)};if("group"===n){var u=nP(e,(function(e){if(!i)return"default";var t=s(i,e);return t?String(t):"default"})),l=o(Object.keys(u).map((function(e,t){return[e,t]}))),c={};return Object.entries(u).forEach((function(e){var t=x(e,2),n=t[0];t[1].forEach((function(e){c[eR(e)]=l[n]}))})),c}if("value"===n){var h=e.reduce((function(e,t){var n=x(e,2),r=n[0],a=n[1],o=s(i,t);if("number"!==typeof o)throw new Error(UC("Palette field ".concat(i," is not a number")));return[Math.min(r,o),Math.max(a,o)]}),[1/0,-1/0]),d=x(h,2),f=d[0],p=d[1]-f;return o(e.map((function(e){return[e.id,(s(i,e)-f)/p]})))}}(r,o))}))}},{key:"getPaletteStyle",value:function(e,t){var n=this.paletteStyle[t];return n?"edge"===e?{stroke:n}:{fill:n}:{}}},{key:"computeElementDefaultStyle",value:function(e,t){var n,r=(null===(n=this.context.options[e])||void 0===n?void 0:n.style)||{};"transform"in r&&Array.isArray(r.transform)&&(r.transform=I(r.transform)),this.defaultStyle[eR(t.datum)]=_N(r,t)}},{key:"computeElementsDefaultStyle",value:function(e){var t=this,n=this.context.graph;this.forEachElementData((function(r,i){for(var a=i.length,o=0;o<a;o++){var s=i[o];(void 0===e||e.includes(eR(s)))&&t.computeElementDefaultStyle(r,{datum:s,graph:n})}}))}},{key:"getDefaultStyle",value:function(e){return this.defaultStyle[e]||{}}},{key:"getElementState",value:function(e){try{return this.context.model.getElementState(e)}catch(t){return[]}}},{key:"getElementStateStyle",value:function(e,t,n){var r,i;return _N((null===(i=null===(r=this.context.options[e])||void 0===r?void 0:r.state)||void 0===i?void 0:i[t])||{},n)}},{key:"computeElementStatesStyle",value:function(e,t,n){var r=this;this.stateStyle[eR(n.datum)]=Object.assign.apply(Object,[{}].concat(I(t.map((function(t){return r.getElementStateStyle(e,t,n)})))))}},{key:"computeElementsStatesStyle",value:function(e){var t=this,n=this.context.graph;this.forEachElementData((function(r,i){for(var a=i.length,o=0;o<a;o++){var s=i[o];if(void 0===e||e.includes(eR(s))){var u=t.getElementState(eR(s));t.computeElementStatesStyle(r,u,{datum:s,graph:n})}}}))}},{key:"getStateStyle",value:function(e){return this.stateStyle[e]||{}}},{key:"computeStyle",value:function(e,t){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t))}},{key:"getElement",value:function(e){return this.elementMap[e]}},{key:"getNodes",value:function(){var e=this;return this.context.model.getNodeData().map((function(t){var n=t.id;return e.elementMap[n]}))}},{key:"getEdges",value:function(){var e=this;return this.context.model.getEdgeData().map((function(t){return e.elementMap[eR(t)]}))}},{key:"getCombos",value:function(){var e=this;return this.context.model.getComboData().map((function(t){var n=t.id;return e.elementMap[n]}))}},{key:"getElementComputedStyle",value:function(e,t){var n=this,r=eR(t),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,r),o=t.style||{},s=this.getDefaultStyle(r),u=this.getThemeStateStyle(e,this.getElementState(r)),l=this.getStateStyle(r),c=Object.assign({},i,a,o,s,u,l);if("combo"===e){var h=this.context.model.getChildrenData(r),d=!!c.collapsed?[]:h.map(eR).filter((function(e){return n.getElement(e)}));Object.assign(c,{childrenNode:d,childrenData:h})}return c}},{key:"getDrawData",value:function(e){this.init();var t=this.computeChangesAndDrawData(e);if(!t)return null;var n=e.type,r=void 0===n?"draw":n,i=e.stage,a=void 0===i?r:i;return this.markDestroyElement(t.drawData),this.computeStyle(a),{type:r,stage:a,data:t}}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0},t=this.getDrawData(e);if(t){var n=t.data.drawData,r=n.add,i=n.update,a=n.remove;return this.destroyElements(a,e),this.createElements(r,e),this.updateElements(i,e),this.setAnimationTask(e,t)}}},{key:"preLayoutDraw",value:function(){return Wq(this,arguments,void 0,(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0};return u().mark((function n(){var r,i,a,o,s,l,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.getDrawData(t)){n.next=3;break}return n.abrupt("return");case 3:return o=a.data.drawData,n.next=6,null===(i=null===(r=e.context.layout)||void 0===r?void 0:r.preLayout)||void 0===i?void 0:i.call(r,o);case 6:return s=o.add,l=o.update,c=o.remove,e.destroyElements(c,t),e.createElements(s,t),e.updateElements(l,t),n.abrupt("return",e.setAnimationTask(t,a));case 11:case"end":return n.stop()}}),n)}))()}))}},{key:"setAnimationTask",value:function(e,t){var n=this,r=e.animation,i=e.silence,a=t.data,o=a.dataChanges,s=a.drawData,u=t.stage,l=t.type;return this.context.animation.animate(r,i?{}:{before:function(){return n.emit(new Sq(xC.BEFORE_DRAW,{dataChanges:o,animation:r,stage:u,render:"render"===l}),e)},beforeAnimate:function(t){return n.emit(new _q(xC.BEFORE_ANIMATE,pC.DRAW,t,s),e)},afterAnimate:function(t){return n.emit(new _q(xC.AFTER_ANIMATE,pC.DRAW,t,s),e)},after:function(){return n.emit(new Sq(xC.AFTER_DRAW,{dataChanges:o,animation:r,stage:u,render:"render"===l,firstRender:!1===n.context.graph.rendered}),e)}})}},{key:"computeChangesAndDrawData",value:function(e){var t=this.context.model,n=t.getChanges(),r=XH(n);if(0===r.length)return null;var i=nP(r,(function(e){return e.type})),a=i.NodeAdded,o=void 0===a?[]:a,s=i.NodeUpdated,u=void 0===s?[]:s,l=i.NodeRemoved,c=void 0===l?[]:l,h=i.EdgeAdded,d=void 0===h?[]:h,f=i.EdgeUpdated,p=void 0===f?[]:f,v=i.EdgeRemoved,g=void 0===v?[]:v,m=i.ComboAdded,y=void 0===m?[]:m,b=i.ComboUpdated,x=void 0===b?[]:b,E=i.ComboRemoved,w=void 0===E?[]:E,k=function(e){return new Map(e.map((function(e){var t=e.value;return[eR(t),t]})))},S={add:{nodes:k(o),edges:k(d),combos:k(y)},update:{nodes:k(u),edges:k(p),combos:k(x)},remove:{nodes:k(c),edges:k(g),combos:k(w)}},_=this.transformData(S,e);return t.clearChanges(),{dataChanges:n,drawData:_}}},{key:"transformData",value:function(e,t){var n=this.context.transform.getTransformInstance();return Object.values(n).reduce((function(e,n){return n.beforeDraw(e,t)}),e)}},{key:"createElement",value:function(e,t,n){var r,i=this,a=eR(t);if(!this.getElement(a)){var o=this.getElementType(e,t),s=this.getElementComputedStyle(e,t),u=DC(e,o);if(!u)return BC.warn("The element ".concat(o," of ").concat(e," is not registered."));this.emit(new Mq(xC.BEFORE_ELEMENT_CREATE,e,t),n);var l=this.container.appendChild(new u({id:a,context:this.context,style:s}));this.shapeTypeMap[a]=o,this.elementMap[a]=l;var c=n.stage,h=void 0===c?"enter":c;null===(r=this.context.animation)||void 0===r||r.add({element:l,elementType:e,stage:h,originalStyle:Object.assign({},l.attributes),updatedStyle:s},{after:function(){var r;i.emit(new Mq(xC.AFTER_ELEMENT_CREATE,e,t),n),null===(r=l.onCreate)||void 0===r||r.call(l)}})}}},{key:"createElements",value:function(e,t){var n=this,r=e.nodes,i=e.edges;[["node",r],["combo",e.combos],["edge",i]].forEach((function(e){var r=x(e,2),i=r[0];r[1].forEach((function(e){return n.createElement(i,e,t)}))}))}},{key:"getUpdateStageStyle",value:function(e,t,n){var r=n.stage;if("translate"===(void 0===r?"update":r)){if("node"===e||"combo"===e){var i=t.style,a=void 0===i?{}:i,o=a.x,s=void 0===o?0:o,u=a.y,l=void 0===u?0:u,c=a.z;return{x:s,y:l,z:void 0===c?0:c}}return{}}return this.getElementComputedStyle(e,t)}},{key:"updateElement",value:function(e,t,n){var r,i=this,a=eR(t),o=n.stage,s=void 0===o?"update":o,u=this.getElement(a);if(!u)return function(){return null};this.emit(new Mq(xC.BEFORE_ELEMENT_UPDATE,e,t),n);var l=this.getElementType(e,t),c=this.getUpdateStageStyle(e,t,n);this.shapeTypeMap[a]!==l&&(u.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,t,{animation:!1,silence:!0}));var h="visibility"!==s?s:"hidden"===c.visibility?"hide":"show";"hide"===h&&delete c.visibility,null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:e,stage:h,originalStyle:Object.assign({},u.attributes),updatedStyle:c},{before:function(){var e=i.elementMap[a];"collapse"!==s&&$D(e,c),"visibility"===s&&(function(e,t){return Rq(t)in(pN(e,Pq)||{})}(e,"opacity")||function(e,t){var n=Array.isArray(t)?t:[t];pN(e,Pq)||vN(e,Pq,{}),n.forEach((function(t){vN(pN(e,Pq),Rq(t),e.attributes[t])}))}(e,"opacity"),i.visibilityCache.set(e,"show"===h?"visible":"hidden"),"show"===h&&dR(e,"visible"))},after:function(){var r,o=i.elementMap[a];"collapse"===s&&$D(o,c),"hide"===h&&dR(o,i.visibilityCache.get(o)),i.emit(new Mq(xC.AFTER_ELEMENT_UPDATE,e,t),n),null===(r=o.onUpdate)||void 0===r||r.call(o)}})}},{key:"updateElements",value:function(e,t){var n=this,r=e.nodes,i=e.edges;[["node",r],["combo",e.combos],["edge",i]].forEach((function(e){var r=x(e,2),i=r[0];r[1].forEach((function(e){return n.updateElement(i,e,t)}))}))}},{key:"markDestroyElement",value:function(e){var t=this;Object.values(e.remove).forEach((function(e){e.forEach((function(e){var n=eR(e),r=t.getElement(n);r&&function(e){vN(e,"__to_be_destroyed__",!0)}(r)}))}))}},{key:"destroyElement",value:function(e,t,n){var r,i=this,a=n.stage,o=void 0===a?"exit":a,s=eR(t),u=this.elementMap[s];if(!u)return function(){return null};this.emit(new Mq(xC.BEFORE_ELEMENT_DESTROY,e,t),n),null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:e,stage:o,originalStyle:Object.assign({},u.attributes),updatedStyle:{}},{after:function(){var r;i.clearElement(s),u.destroy(),null===(r=u.onDestroy)||void 0===r||r.call(u),i.emit(new Mq(xC.AFTER_ELEMENT_DESTROY,e,t),n)}})}},{key:"destroyElements",value:function(e,t){var n=this,r=e.nodes,i=e.edges;[["combo",e.combos],["edge",i],["node",r]].forEach((function(e){var r=x(e,2),i=r[0];r[1].forEach((function(e){return n.destroyElement(i,e,t)}))}))}},{key:"clearElement",value:function(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}},{key:"alignLayoutResultToElement",value:function(e,t){var n,r,i=null===(n=e.nodes)||void 0===n?void 0:n.find((function(e){return eR(e)===t}));if(i){var a=kR(UR(this.context.model.getNodeLikeDatum(t)),UR(i));null===(r=e.nodes)||void 0===r||r.forEach((function(e){var t,n,r;(null===(t=e.style)||void 0===t?void 0:t.x)&&(e.style.x+=a[0]),(null===(n=e.style)||void 0===n?void 0:n.y)&&(e.style.y+=a[1]),(null===(r=e.style)||void 0===r?void 0:r.z)&&(e.style.z+=a[2]||0)}))}}},{key:"collapseNode",value:function(e,t){return Wq(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.animation,a=t.align,o=this.context,s=o.model,l=o.layout,c=this.computeChangesAndDrawData({stage:"collapse",animation:i})){n.next=5;break}return n.abrupt("return");case 5:return this.markDestroyElement(c.drawData),n.next=8,l.simulate();case 8:if(h=n.sent,a&&this.alignLayoutResultToElement(h,e),s.updateData(h),d=this.computeChangesAndDrawData({stage:"collapse",animation:i})){n.next=14;break}return n.abrupt("return");case 14:return f=d.drawData,p=f.add,v=f.remove,g=f.update,this.markDestroyElement(f),m={animation:i,stage:"collapse",data:f},this.destroyElements(v,m),this.createElements(p,m),this.updateElements(g,m),n.next=23,null===(r=this.context.animation.animate(i,{beforeAnimate:function(e){return y.emit(new _q(xC.BEFORE_ANIMATE,pC.COLLAPSE,e,f),m)},afterAnimate:function(e){return y.emit(new _q(xC.AFTER_ANIMATE,pC.COLLAPSE,e,f),m)}},{collapse:{target:e,descendants:Array.from(v.nodes).map((function(e){return eR(x(e,2)[1])})),position:UR(g.nodes.get(e))}}))||void 0===r?void 0:r.finished;case 23:case"end":return n.stop()}}),n,this)})))}},{key:"expandNode",value:function(e,t){return Wq(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context,a=i.model,o=i.layout,s=t.animation,l=t.align,c=UR(a.getNodeData([e])[0]),h=this.computeChangesAndDrawData({stage:"expand",animation:s})){n.next=6;break}return n.abrupt("return");case 6:return d=h.drawData.add,this.createElements(d,{animation:!1,stage:"expand",target:e}),this.context.animation.clear(),n.next=11,o.simulate();case 11:if(f=n.sent,l&&this.alignLayoutResultToElement(f,e),a.updateData(f),this.computeStyle("expand"),p=this.computeChangesAndDrawData({stage:"collapse",animation:s})){n.next=18;break}return n.abrupt("return");case 18:return v=p.drawData,g=v.update,m={animation:s,stage:"expand",data:v},d.edges.forEach((function(e){return g.edges.set(eR(e),e)})),d.nodes.forEach((function(e){return g.nodes.set(eR(e),e)})),this.updateElements(g,m),n.next=26,null===(r=this.context.animation.animate(s,{beforeAnimate:function(e){return y.emit(new _q(xC.BEFORE_ANIMATE,pC.EXPAND,e,v),m)},afterAnimate:function(e){return y.emit(new _q(xC.AFTER_ANIMATE,pC.EXPAND,e,v),m)}},{expand:{target:e,descendants:Array.from(d.nodes).map((function(e){return eR(x(e,2)[1])})),position:c}}))||void 0===r?void 0:r.finished;case 26:case"end":return n.stop()}}),n,this)})))}},{key:"collapseCombo",value:function(e,t){return Wq(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v,g,m=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context,a=i.model,o=i.element,!a.getAncestorsData(e,NC).some((function(e){return fN(e)}))){n.next=3;break}return n.abrupt("return");case 3:if(s=o.getElement(e),l=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),c=this.computeChangesAndDrawData({stage:"collapse",animation:t})){n.next=8;break}return n.abrupt("return");case 8:return h=c.dataChanges,d=c.drawData,this.markDestroyElement(d),f=d.update,p=d.remove,v={animation:t,stage:"collapse",data:d},this.destroyElements(p,v),this.updateElements(f,v),g=function(e){return Array.from(e).map((function(e){return eR(x(e,2)[1])}))},n.next=17,null===(r=this.context.animation.animate(t,{before:function(){return m.emit(new Sq(xC.BEFORE_DRAW,{dataChanges:h,animation:t}),v)},beforeAnimate:function(e){return m.emit(new _q(xC.BEFORE_ANIMATE,pC.COLLAPSE,e,d),v)},afterAnimate:function(e){return m.emit(new _q(xC.AFTER_ANIMATE,pC.COLLAPSE,e,d),v)},after:function(){return m.emit(new Sq(xC.AFTER_DRAW,{dataChanges:h,animation:t}),v)}},{collapse:{target:e,descendants:[].concat(I(g(p.nodes)),I(g(p.combos))),position:l}}))||void 0===r?void 0:r.finished;case 17:case"end":return n.stop()}}),n,this)})))}},{key:"expandCombo",value:function(e,t){return Wq(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context.model,a=UR(i.getComboData([e])[0]),this.computeStyle("expand"),o=this.computeChangesAndDrawData({stage:"expand",animation:t})){n.next=6;break}return n.abrupt("return");case 6:return s=o.dataChanges,l=o.drawData,c=l.add,h=l.update,d={animation:t,stage:"expand",data:l,target:e},this.createElements(c,d),this.updateElements(h,d),f=function(e){return Array.from(e).map((function(e){return eR(x(e,2)[1])}))},n.next=14,null===(r=this.context.animation.animate(t,{before:function(){return p.emit(new Sq(xC.BEFORE_DRAW,{dataChanges:s,animation:t}),d)},beforeAnimate:function(e){return p.emit(new _q(xC.BEFORE_ANIMATE,pC.EXPAND,e,l),d)},afterAnimate:function(e){return p.emit(new _q(xC.AFTER_ANIMATE,pC.EXPAND,e,l),d)},after:function(){return p.emit(new Sq(xC.AFTER_DRAW,{dataChanges:s,animation:t}),d)}},{expand:{target:e,descendants:[].concat(I(f(c.nodes)),I(f(c.combos))),position:a}}))||void 0===r?void 0:r.finished;case 14:case"end":return n.stop()}}),n,this)})))}},{key:"clear",value:function(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}},{key:"destroy",value:function(){this.clear(),this.container.destroy(),this.context={}}}])}(),Yq=Symbol("Comlink.proxy"),qq=Symbol("Comlink.endpoint"),Kq=Symbol("Comlink.releaseProxy"),Zq=Symbol("Comlink.finalizer"),Jq=Symbol("Comlink.thrown"),Qq=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},$q=new Map([["proxy",{canHandle:function(e){return Qq(e)&&e[Yq]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return eK(e,n),[r,[r]]},deserialize:function(e){return e.start(),nK(e)}}],["throw",{canHandle:function(e){return Qq(e)&&Jq in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function eK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function r(i){if(i&&i.data)if(function(e,t){var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(t))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(n,i.origin)){var a,o=Object.assign({path:[]},i.data),s=o.id,u=o.type,l=o.path,c=(i.data.argumentList||[]).map(hK);try{var h=l.slice(0,-1).reduce((function(e,t){return e[t]}),e),d=l.reduce((function(e,t){return e[t]}),e);switch(u){case"GET":a=d;break;case"SET":h[l.slice(-1)[0]]=hK(i.data.value),a=!0;break;case"APPLY":a=d.apply(h,c);break;case"CONSTRUCT":var f;a=function(e){return Object.assign(e,P({},Yq,!0))}(R(d,I(c)));break;case"ENDPOINT":var p=new MessageChannel,v=p.port1,g=p.port2;eK(e,g),a=function(e,t){return lK.set(e,t),e}(v,[v]);break;case"RELEASE":a=void 0;break;default:return}}catch(f){a=P({value:f},Jq,0)}Promise.resolve(a).catch((function(e){return P({value:e},Jq,0)})).then((function(n){var i=x(cK(n),2),a=i[0],o=i[1];t.postMessage(Object.assign(Object.assign({},a),{id:s}),o),"RELEASE"===u&&(t.removeEventListener("message",r),tK(t),Zq in e&&"function"===typeof e[Zq]&&e[Zq]())})).catch((function(e){var n=x(cK(P({value:new TypeError("Unserializable return value")},Jq,0)),2),r=n[0],i=n[1];t.postMessage(Object.assign(Object.assign({},r),{id:s}),i)}))}else console.warn("Invalid origin '".concat(i.origin,"' for comlink proxy"))})),t.start&&t.start()}function tK(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function nK(e,t){var n=new Map;return e.addEventListener("message",(function(e){var t=e.data;if(t&&t.id){var r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}})),sK(e,n,[],t)}function rK(e){if(e)throw new Error("Proxy has been released and is not useable")}function iK(e){return dK(e,new Map,{type:"RELEASE"}).then((function(){tK(e)}))}var aK=new WeakMap,oK="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(aK.get(e)||0)-1;aK.set(e,t),0===t&&iK(e)}));function sK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!1,i=new Proxy(arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},{get:function(a,o){if(rK(r),o===Kq)return function(){!function(e){oK&&oK.unregister(e)}(i),iK(e),t.clear(),r=!0};if("then"===o){if(0===n.length)return{then:function(){return i}};var s=dK(e,t,{type:"GET",path:n.map((function(e){return e.toString()}))}).then(hK);return s.then.bind(s)}return sK(e,t,[].concat(I(n),[o]))},set:function(i,a,o){rK(r);var s=x(cK(o),2),u=s[0],l=s[1];return dK(e,t,{type:"SET",path:[].concat(I(n),[a]).map((function(e){return e.toString()})),value:u},l).then(hK)},apply:function(i,a,o){rK(r);var s=n[n.length-1];if(s===qq)return dK(e,t,{type:"ENDPOINT"}).then(hK);if("bind"===s)return sK(e,t,n.slice(0,-1));var u=x(uK(o),2),l=u[0],c=u[1];return dK(e,t,{type:"APPLY",path:n.map((function(e){return e.toString()})),argumentList:l},c).then(hK)},construct:function(i,a){rK(r);var o=x(uK(a),2),s=o[0],u=o[1];return dK(e,t,{type:"CONSTRUCT",path:n.map((function(e){return e.toString()})),argumentList:s},u).then(hK)}});return function(e,t){var n=(aK.get(t)||0)+1;aK.set(t,n),oK&&oK.register(e,t,e)}(i,e),i}function uK(e){var t,n=e.map(cK);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var lK=new WeakMap;function cK(e){var t,n=D($q);try{for(n.s();!(t=n.n()).done;){var r=x(t.value,2),i=r[0],a=r[1];if(a.canHandle(e)){var o=x(a.serialize(e),2);return[{type:"HANDLER",name:i,value:o[0]},o[1]]}}}catch(s){n.e(s)}finally{n.f()}return[{type:"RAW",value:e},lK.get(e)||[]]}function hK(e){switch(e.type){case"HANDLER":return $q.get(e.name).deserialize(e.value);case"RAW":return e.value}}function dK(e,t,n,r){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),r)}))}var fK=function(e){function t(e,n,r){var i;return v(this,t),(i=T(this,t)).graph=e,i.layout=n,i.options=r,i.spawnWorker(),i}return C(t,e),p(t,[{key:"spawnWorker",value:function(){this.proxy=nK(new Worker(new URL(n.p+n.u(372),n.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}},{key:"execute",value:function(){var e;return Nx(this,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.running){t.next=2;break}return t.abrupt("return",this);case 2:return this.running=!0,n=this.layout.options,n.onTick,r=Rx(n,["onTick"]),i={},Object.keys(r).forEach((function(e){PE(r[e])||(i[e]=r[e])})),a={layout:{id:this.layout.id,options:i,iterations:null===(e=this.options)||void 0===e?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},o=new Float32Array([0]),t.next=10,this.proxy.calculateLayout(a,[o]);case 10:return s=t.sent,l=x(s,1),c=l[0],t.abrupt("return",c);case 14:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(){return this.running=!1,this.proxy.stopLayout(),this}},{key:"kill",value:function(){this.proxy[Kq]()}},{key:"isRunning",value:function(){return this.running}}])}(fI),pK=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},vK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},gK=function(){return p((function e(t){v(this,e),this.instances=[],this.context=t}),[{key:"presetOptions",get:function(){return{animation:!!VC(this.context.options,!0)}}},{key:"options",get:function(){return this.context.options.layout}},{key:"getLayoutInstance",value:function(){return this.instances}},{key:"preLayout",value:function(e){return pK(this,void 0,void 0,u().mark((function t(){var n,r,i,a,o,s,l,c,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.context,s=o.graph,l=o.model,c=e.add,Aq(s,new Sq(xC.BEFORE_LAYOUT,{type:"pre"})),t.next=5,null===(n=this.context.layout)||void 0===n?void 0:n.simulate();case 5:h=t.sent,null===(r=null===h||void 0===h?void 0:h.nodes)||void 0===r||r.forEach((function(e){var t=eR(e),n=c.nodes.get(t);l.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style)})),null===(i=null===h||void 0===h?void 0:h.edges)||void 0===i||i.forEach((function(e){var t=eR(e),n=c.edges.get(t);l.syncEdgeDatum(e),n&&Object.assign(n.style,e.style)})),null===(a=null===h||void 0===h?void 0:h.combos)||void 0===a||a.forEach((function(e){var t=eR(e),n=c.combos.get(t);l.syncNodeLikeDatum(e),n&&Object.assign(n.style,e.style)})),Aq(s,new Sq(xC.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"postLayout",value:function(){return pK(this,void 0,void 0,u().mark((function e(){var t,n,r,i,a,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options){e.next=2;break}return e.abrupt("return");case 2:t=Array.isArray(this.options)?this.options:[this.options],Aq(n=this.context.graph,new Sq(xC.BEFORE_LAYOUT,{type:"post"})),r=D(t),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=21;break}return a=i.value,o=t.indexOf(a),s=this.getLayoutData(a),l=Object.assign(Object.assign({},this.presetOptions),a),Aq(n,new Sq(xC.BEFORE_STAGE_LAYOUT,{options:l,index:o})),e.next=16,this.stepLayout(s,l,o);case 16:c=e.sent,Aq(n,new Sq(xC.AFTER_STAGE_LAYOUT,{options:l,index:o})),a.animation||this.updateElementPosition(c,!1);case 19:e.next=8;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:Aq(n,new Sq(xC.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post");case 31:case"end":return e.stop()}}),e,this,[[6,23,26,29]])})))}},{key:"transformDataAfterLayout",value:function(e,t){var n=this.context.transform.getTransformInstance();Object.values(n).forEach((function(n){return n.afterLayout(e,t)}))}},{key:"simulate",value:function(){return pK(this,void 0,void 0,u().mark((function e(){var t,n,r,i,a,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options){e.next=2;break}return e.abrupt("return",{});case 2:t=Array.isArray(this.options)?this.options:[this.options],n={},r=D(t),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return a=i.value,o=t.indexOf(a),s=this.getLayoutData(a),e.next=13,this.stepLayout(s,Object.assign(Object.assign(Object.assign({},this.presetOptions),a),{animation:!1}),o);case 13:l=e.sent,n=l;case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,this,[[5,19,22,25]])})))}},{key:"stepLayout",value:function(e,t,n){return pK(this,void 0,void 0,u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!wI(t)){r.next=4;break}return r.next=3,this.treeLayout(e,t,n);case 3:case 6:return r.abrupt("return",r.sent);case 4:return r.next=6,this.graphLayout(e,t,n);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"graphLayout",value:function(e,t,n){return pK(this,void 0,void 0,u().mark((function r(){var i,a,o,s,l,c,h,d,f=this;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.animation,a=t.enableWorker,o=t.iterations,s=void 0===o?300:o,l=this.initGraphLayout(t)){r.next=4;break}return r.abrupt("return",{});case 4:if(this.instances[n]=l,this.instance=l,!a){r.next=14;break}return c=l,this.supervisor=new fK(c.graphData2LayoutModel(e),c.instance,{iterations:s}),r.t0=kI,r.next=12,this.supervisor.execute();case 12:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 14:if(!VB(l)){r.next=22;break}if(!i){r.next=19;break}return r.next=18,l.execute(e,{onTick:function(e){f.updateElementPosition(e,!1)}});case 18:return r.abrupt("return",r.sent);case 19:return l.execute(e),l.stop(),r.abrupt("return",l.tick(s));case 22:return r.next=24,l.execute(e);case 24:if(h=r.sent,!i){r.next=29;break}return d=this.updateElementPosition(h,i),r.next=29,null===d||void 0===d?void 0:d.finished;case 29:return r.abrupt("return",h);case 30:case"end":return r.stop()}}),r,this)})))}},{key:"treeLayout",value:function(e,t,n){return pK(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.type,i=t.animation,a=DC("layout",r)){n.next=4;break}return n.abrupt("return",{});case 4:if(o=e.nodes,s=void 0===o?[]:o,l=e.edges,c=void 0===l?[]:l,jq(h=new yI({nodes:s.map((function(e){return{id:eR(e),data:e.data||{}}})),edges:c.map((function(e){return{id:eR(e),source:e.source,target:e.target,data:e.data||{}}}))})),d={nodes:[],edges:[]},f={nodes:[],edges:[]},h.getRoots(OC).forEach((function(e){sN(e,(function(e){e.children=h.getSuccessors(e.id)}),(function(e){return h.getSuccessors(e.id)}),"TB");var n=a(e,t),r=n.x,i=n.y,o=n.z,s=void 0===o?0:o;sN(n,(function(e){var t=e.id,n=e.x,a=e.y,o=e.z,u=void 0===o?0:o;d.nodes.push({id:t,style:{x:r,y:i,z:s}}),f.nodes.push({id:t,style:{x:n,y:a,z:u}})}),(function(e){return e.children}),"TB")})),p=this.inferTreeLayoutOffset(f),mK(f,p),!i){n.next=19;break}return mK(d,p),this.updateElementPosition(d,!1),v=this.updateElementPosition(f,i),n.next=19,null===v||void 0===v?void 0:v.finished;case 19:return n.abrupt("return",f);case 20:case"end":return n.stop()}}),n,this)})))}},{key:"inferTreeLayoutOffset",value:function(e){var t,n=1/0,r=-1/0,i=1/0,a=-1/0;null===(t=e.nodes)||void 0===t||t.forEach((function(e){var t=e.style||{},o=t.x,s=void 0===o?0:o,u=t.y,l=void 0===u?0:u;n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,l),a=Math.max(a,l)}));var o=this.context.canvas,s=o.getSize(),u=x(o.getCanvasByViewport([0,0]),2),l=u[0],c=u[1],h=x(o.getCanvasByViewport(s),2),d=h[0],f=h[1];return n>=l&&r<=d&&i>=c&&a<=f?[0,0]:[(l+d)/2-(n+r)/2,(c+f)/2-(i+a)/2]}},{key:"stopLayout",value:function(){this.instance&&VB(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}},{key:"getLayoutData",value:function(e){var t=e.nodeFilter,n=void 0===t?function(){return!0}:t,r=e.preLayout,i=void 0!==r&&r,a=e.isLayoutInvisibleNodes,o=void 0!==a&&a,s=this.context.model.getData(),u=s.nodes,l=s.edges,c=s.combos,h=this.context,d=h.element,f=h.model,p=function(e){return d.getElement(e)},v=i?function(e){var t;if(!o){if("hidden"===(null===(t=e.style)||void 0===t?void 0:t.visibility))return!1;if(f.getAncestorsData(e.id,OC).some(fN))return!1;if(f.getAncestorsData(e.id,NC).some(fN))return!1}return n(e)}:function(e){var t=eR(e),r=p(t);return!!r&&(!eI(r)&&n(e))},g=u.filter(v),m=new Map(g.map((function(e){return[eR(e),e]})));return c.forEach((function(e){return m.set(eR(e),e)})),{nodes:g,edges:l.filter((function(e){var t=e.source,n=e.target;return m.has(t)&&m.has(n)})),combos:c}}},{key:"initGraphLayout",value:function(e){var t,n=this.context,r=n.element,i=n.viewport,a=e.type,o=(e.enableWorker,e.animation,e.iterations,vK(e,["type","enableWorker","animation","iterations"])),s=x(i.getCanvasSize(),2),l=s[0],c=s[1],h=[l/2,c/2],d=null!==(t=null===e||void 0===e?void 0:e.nodeSize)&&void 0!==t?t:function(e){var t=null===r||void 0===r?void 0:r.getElement(e.id);return t?t.attributes.size:null===r||void 0===r?void 0:r.getElementComputedStyle("node",e).size},f=DC("layout",a);if(!f)return BC.warn("The layout of ".concat(a," is not registered."));var g=Object.getPrototypeOf(f.prototype)===bI.prototype?f:function(e,t){var n=function(n){function r(t,n){var i;if(v(this,r),(i=T(this,r,[t,n])).instance=new e({}),i.id=i.instance.id,"stop"in i.instance&&"tick"in i.instance){var a=i.instance;i.stop=a.stop.bind(a),i.tick=function(e){return kI(a.tick(e))}}return i}return C(r,n),p(r,[{key:"execute",value:function(e,t){return xI(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=kI,n.next=3,this.instance.execute(this.graphData2LayoutModel(e),this.transformOptions(xR({},this.options,t)));case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"transformOptions",value:function(e){var t=e.onTick;return t?(e.onTick=function(e){return t(kI(e))},e):e}},{key:"graphData2LayoutModel",value:function(e){var n=e.nodes,r=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,o=e.combos,s=void 0===o?[]:o,u=r.map((function(e){var t=eR(e),n=e.data,r=e.style,i=e.combo,a=EI(e,["data","style","combo"]),o={id:t,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),a)};return(null===r||void 0===r?void 0:r.x)&&Object.assign(o.data,{x:r.x}),(null===r||void 0===r?void 0:r.y)&&Object.assign(o.data,{y:r.y}),(null===r||void 0===r?void 0:r.z)&&Object.assign(o.data,{z:r.z}),o})),l=new Map(u.map((function(e){return[e.id,e]}))),c=a.filter((function(e){var t=e.source,n=e.target;return l.has(t)&&l.has(n)})).map((function(e){var t=e.source,n=e.target,r=e.data,i=e.style;return{id:eR(e),source:t,target:n,data:Object.assign({},r),style:Object.assign({},i)}})),h=s.map((function(e){return{id:eR(e),data:Object.assign({_isCombo:!0},e.data),style:Object.assign({},e.style)}})),d=new yI({nodes:[].concat(I(u),I(h)),edges:c});return t.model.model.hasTreeStructure(NC)&&(d.attachTreeStructure(NC),u.forEach((function(e){var n=t.model.model.getParent(e.id,NC);n&&d.hasNode(n.id)&&d.setParent(e.id,n.id,NC)}))),d}}])}(bI);return n}(f,this.context),m=new g(this.context),y={nodeSize:d,width:l,height:c,center:h};switch(m.id){case"d3-force":case"d3-force-3d":Object.assign(y,{center:{x:l/2,y:c/2,z:0}})}return xR(m.options,y,o),m}},{key:"updateElementPosition",value:function(e,t){var n=this.context,r=n.model,i=n.element;return i?(r.updateData(e),i.draw({animation:t,silence:!0})):null}},{key:"destroy",value:function(){var e;this.stopLayout(),this.context={},null===(e=this.supervisor)||void 0===e||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}])}(),mK=function(e,t){var n,r=x(t,2),i=r[0],a=r[1];null===(n=e.nodes)||void 0===n||n.forEach((function(e){if(e.style){var t=e.style,n=t.x,r=void 0===n?0:n,o=t.y,s=void 0===o?0:o;e.style.x=r+i,e.style.y=s+a}else e.style={x:i,y:a}}))};function yK(e){return e.layout?(Array.isArray(e.layout)||"preLayout"in e.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(e.layout.type)&&(e.layout.preLayout=!0),e):e}var bK=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).category="plugin",n.setPlugins(n.context.options.plugins||[]),n}return C(t,e),p(t,[{key:"setPlugins",value:function(e){this.setExtensions(e)}},{key:"getPluginInstance",value:function(e){var t=this.extensionMap[e];if(t)return t;BC.warn("Cannot find the plugin ".concat(e,", will try to find it by type."));var n=this.extensions.find((function(t){return t.type===e}));return n?this.extensionMap[n.key]:void 0}}])}(fR),xK=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"],EK=function(e){function t(e){var n;return v(this,t),(n=T(this,t,[e])).category="transform",n.setTransforms(n.context.options.transforms||[]),n}return C(t,e),p(t,[{key:"getTransforms",value:function(){}},{key:"setTransforms",value:function(e){this.setExtensions([].concat(I(xK.slice(0,xK.length-1)),I(e),[xK[xK.length-1]]))}},{key:"getTransformInstance",value:function(e){return e?this.extensionMap[e]:this.extensionMap}}])}(fR),wK=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},kK=function(){return p((function e(t){v(this,e),this.landmarkCounter=0,this.context=t;var n=x(this.paddingOffset,2),r=n[0],i=n[1],a=t.options,o=a.zoom,s=a.rotation,u=a.x,l=void 0===u?r:u,c=a.y,h=void 0===c?i:c;this.transform({mode:"absolute",scale:o,translate:[l,h],rotate:s},!1)}),[{key:"padding",get:function(){return uP(this.context.options.padding)}},{key:"paddingOffset",get:function(){var e=x(this.padding,4),t=e[0],n=e[1],r=e[2];return[(e[3]-n)/2,(t-r)/2,0]}},{key:"camera",get:function(){var e=this.context.canvas;return new Proxy(e.getCamera(),{get:function(t,n){var r=Object.entries(e.getLayers()).filter((function(e){var t=x(e,1)[0];return!["main"].includes(t)})).map((function(e){return x(e,2)[1].getCamera()})),i=t[n];if("function"===typeof i)return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];var s=i.apply(t,a);return r.forEach((function(e){e[n].apply(e,a)})),s}}})}},{key:"createLandmark",value:function(e){return this.camera.createLandmark("landmark-".concat(this.landmarkCounter++),e)}},{key:"getAnimation",value:function(e){var t=VC(this.context.options,e);return!!t&&CL(Object.assign({},t),["easing","duration"])}},{key:"getCanvasSize",value:function(){var e=this.context.canvas.getConfig(),t=e.width,n=void 0===t?0:t,r=e.height;return[n,void 0===r?0:r]}},{key:"getCanvasCenter",value:function(){var e=this.context.canvas.getConfig(),t=e.width,n=void 0===t?0:t,r=e.height;return[n/2,(void 0===r?0:r)/2,0]}},{key:"getViewportCenter",value:function(){var e=x(this.camera.getPosition(),2);return[e[0],e[1],0]}},{key:"getGraphCenter",value:function(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}},{key:"getZoom",value:function(){return this.camera.getZoom()}},{key:"getRotation",value:function(){return this.camera.getRoll()}},{key:"getTranslateOptions",value:function(e){var t=this.camera,n=e.mode,r=e.translate,i=void 0===r?[]:r,a=this.getZoom(),o=t.getPosition(),s=t.getFocalPoint(),u=x(this.getCanvasCenter(),2),l=u[0],c=u[1],h=x(i,3),d=h[0],f=void 0===d?0:d,p=h[1],v=void 0===p?0:p,g=h[2],m=_R([-f,-v,-(void 0===g?0:g)],a);return"relative"===n?{position:wR(o,m),focalPoint:wR(s,m)}:{position:wR([l,c,o[2]],m),focalPoint:wR([l,c,s[2]],m)}}},{key:"getRotateOptions",value:function(e){var t=e.mode,n=e.rotate,r=void 0===n?0:n;return{roll:"relative"===t?this.camera.getRoll()+r:r}}},{key:"getZoomOptions",value:function(e){var t=this.context.options.zoomRange,n=this.camera.getZoom(),r=e.mode,i=e.scale,a=void 0===i?1:i;return Tx.apply(void 0,["relative"===r?n*a:a].concat(I(t)))}},{key:"transform",value:function(e,t){return wK(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.context.graph,i=e.translate,a=e.rotate,o=e.scale,s=e.origin,this.cancelAnimation(),l=this.getAnimation(t),Aq(r,new Tq(xC.BEFORE_TRANSFORM,e)),a||!o||i||!s||l){n.next=9;break}return this.camera.setZoomByViewportPoint(this.getZoomOptions(e),s),Aq(r,new Tq(xC.AFTER_TRANSFORM,e)),n.abrupt("return");case 9:if(c={},i&&Object.assign(c,this.getTranslateOptions(e)),kx(a)&&Object.assign(c,this.getRotateOptions(e)),kx(o)&&Object.assign(c,{zoom:this.getZoomOptions(e)}),!l){n.next=18;break}return Aq(r,new _q(xC.BEFORE_ANIMATE,pC.TRANSFORM,null,e)),n.abrupt("return",new Promise((function(t){h.transformResolver=t,h.camera.gotoLandmark(h.createLandmark(c),Object.assign(Object.assign({},l),{onfinish:function(){Aq(r,new _q(xC.AFTER_ANIMATE,pC.TRANSFORM,null,e)),Aq(r,new Tq(xC.AFTER_TRANSFORM,e)),h.transformResolver=void 0,t()}}))})));case 18:this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),Aq(r,new Tq(xC.AFTER_TRANSFORM,e));case 20:case"end":return n.stop()}}),n,this)})))}},{key:"fitView",value:function(e,t){return wK(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c,h,d,f,p,v,g,m,y,b,E,w,k,S,_,M,T,A,C,P,R;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=x(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3],c=(l=e||{}).when,h=void 0===c?"always":c,d=l.direction,f=void 0===d?"both":d,p=this.context.canvas.getSize(),v=x(p,2),g=v[0],m=v[1],y=g-s-a,b=m-i-o,E=this.context.canvas.getBounds(),w=this.getBBoxInViewport(E),k=dP(w),S=x(k,2),_=S[0],M=S[1],T="x"===f&&_>=y||"y"===f&&M>=b||"both"===f&&_>=y&&M>=b,"overflow"!==h||T){n.next=13;break}return n.next=12,this.fitCenter({animation:t});case 12:return n.abrupt("return",n.sent);case 13:return A=y/_,C=b/M,P="x"===f?A:"y"===f?C:Math.min(A,C),R=this.getAnimation(t),n.next=19,this.transform({mode:"relative",scale:P,translate:wR(kR(this.getCanvasCenter(),this.getBBoxInViewport(E).center),_R(this.paddingOffset,P))},R);case 19:case"end":return n.stop()}}),n,this)})))}},{key:"fitCenter",value:function(e){return wK(this,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.context.canvas.getBounds(),t.next=3,this.focus(n,e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"focusElements",value:function(e){return wK(this,arguments,void 0,(function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u().mark((function r(){var i,a,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.context.element){r.next=3;break}return r.abrupt("return");case 3:return a=function(e){return n.shapes?e.getShape(n.shapes).getRenderBounds():e.getRenderBounds()},o=gP(e.map((function(e){return a(i.getElement(e))}))),r.next=7,t.focus(o,n);case 7:case"end":return r.stop()}}),r)}))()}))}},{key:"focus",value:function(e,t){return wK(this,void 0,void 0,u().mark((function n(){var r,i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.context.graph.getViewportByCanvas(e.center),i=t.position||this.getCanvasCenter(),a=kR(i,r),n.next=5,this.transform({mode:"relative",translate:wR(a,this.paddingOffset)},t.animation);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getBBoxInViewport",value:function(e){var t=e.min,n=e.max,r=this.context.graph,i=x(r.getViewportByCanvas(t),2),a=i[0],o=i[1],s=x(r.getViewportByCanvas(n),2),u=s[0],l=s[1],c=new Vw;return c.setMinMax([a,o,0],[u,l,0]),c}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.context.graph,i=this.getCanvasSize(),a=x(r.getCanvasByViewport([0,0]),2),o=a[0],s=a[1],u=x(r.getCanvasByViewport(i),2),l=u[0],c=u[1],h=new Vw;return h.setMinMax([o,s,0],[l,c,0]),n&&(h=vP(h,n)),oP(e)?mP(e,h):t?function(e,t){var n=x(e.min,2),r=n[0],i=n[1],a=x(e.max,2),o=a[0],s=a[1],u=x(t.min,2),l=u[0],c=u[1],h=x(t.max,2),d=h[0],f=h[1];return r>=l&&o<=d&&i>=c&&s<=f}(e,h):h.intersects(e)}},{key:"cancelAnimation",value:function(){var e,t;(null===(e=this.camera.landmarks)||void 0===e?void 0:e.length)&&this.camera.cancelLandmarkAnimation(),null===(t=this.transformResolver)||void 0===t||t.call(this)}}])}(),SK=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(GK){a(GK)}}function s(e){try{u(r.throw(e))}catch(GK){a(GK)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},_K=function(e){function t(e){var n,r;return v(this,t),(n=T(this,t)).options={},n.rendered=!1,n.destroyed=!1,n.context={model:new Vq},n.isCollapsingExpanding=!1,n.onResize=sI((function(){n.resize()}),300),n._setOptions(Object.assign({},t.defaultOptions,e),!0),n.context.graph=n,n.options.autoResize&&(null===(r=globalThis.addEventListener)||void 0===r||r.call(globalThis,"resize",n.onResize)),n}return C(t,e),p(t,[{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(e){this._setOptions(e,!1)}},{key:"_setOptions",value:function(e,t){if(this.updateCanvas(e),Object.assign(this.options,function(e){return[yK].reduce((function(e,t){return t(e)}),e)}(e)),t){var n=e.data;n&&this.addData(n)}else{var r=e.behaviors,i=e.combo,a=e.data,o=e.edge,s=e.layout,u=e.node,l=e.plugins,c=e.theme,h=e.transforms;r&&this.setBehaviors(r),a&&this.setData(a),u&&this.setNode(u),o&&this.setEdge(o),i&&this.setCombo(i),s&&this.setLayout(s),c&&this.setTheme(c),l&&this.setPlugins(l),h&&this.setTransforms(h)}}},{key:"getSize",value:function(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}},{key:"setSize",value:function(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t)}},{key:"setZoomRange",value:function(e){this.options.zoomRange=e}},{key:"getZoomRange",value:function(){return this.options.zoomRange}},{key:"setNode",value:function(e){this.options.node=e,this.context.model.refreshData()}},{key:"setEdge",value:function(e){this.options.edge=e,this.context.model.refreshData()}},{key:"setCombo",value:function(e){this.options.combo=e,this.context.model.refreshData()}},{key:"getTheme",value:function(){return this.options.theme}},{key:"setTheme",value:function(e){this.options.theme=PE(e)?e(this.getTheme()):e}},{key:"setLayout",value:function(e){this.options.layout=PE(e)?e(this.getLayout()):e}},{key:"getLayout",value:function(){return this.options.layout}},{key:"setBehaviors",value:function(e){var t;this.options.behaviors=PE(e)?e(this.getBehaviors()):e,null===(t=this.context.behavior)||void 0===t||t.setBehaviors(this.options.behaviors)}},{key:"updateBehavior",value:function(e){this.setBehaviors((function(t){return t.map((function(t){return"object"===typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t}))}))}},{key:"getBehaviors",value:function(){return this.options.behaviors||[]}},{key:"setPlugins",value:function(e){var t;this.options.plugins=PE(e)?e(this.getPlugins()):e,null===(t=this.context.plugin)||void 0===t||t.setPlugins(this.options.plugins)}},{key:"updatePlugin",value:function(e){this.setPlugins((function(t){return t.map((function(t){return"object"===typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t}))}))}},{key:"getPlugins",value:function(){return this.options.plugins||[]}},{key:"getPluginInstance",value:function(e){return this.context.plugin.getPluginInstance(e)}},{key:"setTransforms",value:function(e){var t;this.options.transforms=PE(e)?e(this.getTransforms()):e,null===(t=this.context.transform)||void 0===t||t.setTransforms(this.options.transforms)}},{key:"updateTransform",value:function(e){this.setTransforms((function(t){return t.map((function(t){return"object"===typeof t&&t.key===e.key?Object.assign(Object.assign({},t),e):t}))})),this.context.model.refreshData()}},{key:"getTransforms",value:function(){return this.options.transforms||[]}},{key:"getData",value:function(){return this.context.model.getData()}},{key:"getElementData",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.context.model.getElementDataById(e)})):this.context.model.getElementDataById(e)}},{key:"getNodeData",value:function(e){var t;return void 0===e?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):null===(t=this.context.model.getNodeData([e]))||void 0===t?void 0:t[0]}},{key:"getEdgeData",value:function(e){var t;return void 0===e?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):null===(t=this.context.model.getEdgeData([e]))||void 0===t?void 0:t[0]}},{key:"getComboData",value:function(e){var t;return void 0===e?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):null===(t=this.context.model.getComboData([e]))||void 0===t?void 0:t[0]}},{key:"setData",value:function(e){this.context.model.setData(PE(e)?e(this.getData()):e)}},{key:"addData",value:function(e){this.context.model.addData(PE(e)?e(this.getData()):e)}},{key:"addNodeData",value:function(e){this.context.model.addNodeData(PE(e)?e(this.getNodeData()):e)}},{key:"addEdgeData",value:function(e){this.context.model.addEdgeData(PE(e)?e(this.getEdgeData()):e)}},{key:"addComboData",value:function(e){this.context.model.addComboData(PE(e)?e(this.getComboData()):e)}},{key:"addChildrenData",value:function(e,t){this.context.model.addChildrenData(e,t)}},{key:"updateData",value:function(e){this.context.model.updateData(PE(e)?e(this.getData()):e)}},{key:"updateNodeData",value:function(e){this.context.model.updateNodeData(PE(e)?e(this.getNodeData()):e)}},{key:"updateEdgeData",value:function(e){this.context.model.updateEdgeData(PE(e)?e(this.getEdgeData()):e)}},{key:"updateComboData",value:function(e){this.context.model.updateComboData(PE(e)?e(this.getComboData()):e)}},{key:"removeData",value:function(e){this.context.model.removeData(PE(e)?e(this.getData()):e)}},{key:"removeNodeData",value:function(e){this.context.model.removeNodeData(PE(e)?e(this.getNodeData()):e)}},{key:"removeEdgeData",value:function(e){this.context.model.removeEdgeData(PE(e)?e(this.getEdgeData()):e)}},{key:"removeComboData",value:function(e){this.context.model.removeComboData(PE(e)?e(this.getComboData()):e)}},{key:"getElementType",value:function(e){return this.context.model.getElementType(e)}},{key:"getRelatedEdgesData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.context.model.getRelatedEdgesData(e,t)}},{key:"getNeighborNodesData",value:function(e){return this.context.model.getNeighborNodesData(e)}},{key:"getAncestorsData",value:function(e,t){return this.context.model.getAncestorsData(e,t)}},{key:"getParentData",value:function(e,t){return this.context.model.getParentData(e,t)}},{key:"getChildrenData",value:function(e){return this.context.model.getChildrenData(e)}},{key:"getDescendantsData",value:function(e){return this.context.model.getDescendantsData(e)}},{key:"getElementDataByState",value:function(e,t){return this.context.model.getElementDataByState(e,t)}},{key:"initCanvas",value:function(){return SK(this,void 0,void 0,u().mark((function e(){var t,n,r,i,a,o,s,l,c,h,d,f,p,v,g,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context.canvas){e.next=4;break}return e.next=3,this.context.canvas.ready;case 3:return e.abrupt("return",e.sent);case 4:if(n=this.options,r=n.container,i=void 0===r?"container":r,a=n.width,o=n.height,s=n.renderer,l=n.cursor,c=n.background,h=n.canvas,d=n.devicePixelRatio,f=void 0===d?null!==(t=globalThis.devicePixelRatio)&&void 0!==t?t:1:d,!(i instanceof yq)){e.next=13;break}return this.context.canvas=i,l&&i.setCursor(l),s&&i.setRenderer(s),e.next=11,i.ready;case 11:e.next=22;break;case 13:return p=Mx(i)?document.getElementById(i):i,v=wq(p),this.emit(xC.BEFORE_CANVAS_INIT,{container:p,width:a,height:o}),g=Object.assign(Object.assign({},h),{container:p,width:a||v[0],height:o||v[1],background:c,renderer:s,cursor:l,devicePixelRatio:f}),m=new yq(g),this.context.canvas=m,e.next=21,m.ready;case 21:this.emit(xC.AFTER_CANVAS_INIT,{canvas:m});case 22:case"end":return e.stop()}}),e,this)})))}},{key:"updateCanvas",value:function(e){var t,n,r=e.renderer,i=e.cursor,a=e.height,o=e.width,s=this.context.canvas;s&&(r&&(this.emit(xC.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),s.setRenderer(r),this.emit(xC.AFTER_RENDERER_CHANGE,{renderer:r})),i&&s.setCursor(i),(kx(o)||kx(a))&&this.setSize(null!==(t=null!==o&&void 0!==o?o:this.options.width)&&void 0!==t?t:0,null!==(n=null!==a&&void 0!==a?a:this.options.height)&&void 0!==n?n:0))}},{key:"initRuntime",value:function(){this.context.options=this.options,this.context.batch||(this.context.batch=new Lq(this.context)),this.context.plugin||(this.context.plugin=new bK(this.context)),this.context.viewport||(this.context.viewport=new kK(this.context)),this.context.transform||(this.context.transform=new EK(this.context)),this.context.element||(this.context.element=new Xq(this.context)),this.context.animation||(this.context.animation=new Oq(this.context)),this.context.layout||(this.context.layout=new gK(this.context)),this.context.behavior||(this.context.behavior=new Dq(this.context))}},{key:"prepare",value:function(){return SK(this,void 0,void 0,u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:if(!this.destroyed){e.next=4;break}throw new Error(UC("The graph instance has been destroyed"));case 4:return e.next=6,this.initCanvas();case 6:this.initRuntime();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"render",value:function(){return SK(this,void 0,void 0,u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:if(Aq(this,new Sq(xC.BEFORE_RENDER)),this.options.layout){e.next=9;break}return t=this.context.element.draw({type:"render"}),e.next=7,Promise.all([null===t||void 0===t?void 0:t.finished,this.autoFit()]);case 7:e.next=22;break;case 9:if(this.rendered||(i=this.options.layout,Array.isArray(i)||!(null===i||void 0===i?void 0:i.preLayout))){e.next=17;break}return e.next=12,this.context.element.preLayoutDraw({type:"render"});case 12:return n=e.sent,e.next=15,Promise.all([null===n||void 0===n?void 0:n.finished,this.autoFit()]);case 15:e.next=22;break;case 17:return r=this.context.element.draw({type:"render"}),e.next=20,Promise.all([null===r||void 0===r?void 0:r.finished,this.context.layout.postLayout()]);case 20:return e.next=22,this.autoFit();case 22:this.rendered=!0,Aq(this,new Sq(xC.AFTER_RENDER));case 24:case"end":return e.stop()}var i}),e,this)})))}},{key:"draw",value:function(){return SK(this,void 0,void 0,u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:return e.next=4,null===(t=this.context.element.draw())||void 0===t?void 0:t.finished;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"layout",value:function(){return SK(this,void 0,void 0,u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.layout.postLayout();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"stopLayout",value:function(){this.context.layout.stopLayout()}},{key:"clear",value:function(){return SK(this,void 0,void 0,u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.context,n=t.model,r=t.element,n.setData({}),n.clearChanges(),null===r||void 0===r||r.clear();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){var e;Aq(this,new Sq(xC.BEFORE_DESTROY));var t=this.context,n=t.layout,r=t.animation,i=t.element,a=t.model,o=t.canvas,s=t.behavior,u=t.plugin;null===u||void 0===u||u.destroy(),null===s||void 0===s||s.destroy(),null===n||void 0===n||n.destroy(),null===r||void 0===r||r.destroy(),null===i||void 0===i||i.destroy(),a.destroy(),null===o||void 0===o||o.destroy(),this.options={},this.context={},this.off(),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,Aq(this,new Sq(xC.AFTER_DESTROY))}},{key:"getCanvas",value:function(){return this.context.canvas}},{key:"resize",value:function(e,t){var n,r,i=wq(null===(r=this.context.canvas)||void 0===r?void 0:r.getContainer()),a=[e||i[0],t||i[1]];if(this.context.canvas){var o=this.context.canvas.getSize();AC(a,o)||(Aq(this,new Sq(xC.BEFORE_SIZE_CHANGE,{size:a})),(n=this.context.canvas).resize.apply(n,a),Aq(this,new Sq(xC.AFTER_SIZE_CHANGE,{size:a})))}}},{key:"fitView",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(r=this.context.viewport)||void 0===r?void 0:r.fitView(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"fitCenter",value:function(e){return SK(this,void 0,void 0,u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=this.context.viewport)||void 0===n?void 0:n.fitCenter({animation:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"autoFit",value:function(){return SK(this,void 0,void 0,u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.context.options.autoFit){e.next=3;break}return e.abrupt("return");case 3:if(!Mx(t)){e.next=14;break}if("view"!==t){e.next=9;break}return e.next=7,this.fitView();case 7:e.next=12;break;case 9:if("center"!==t){e.next=12;break}return e.next=12,this.fitCenter();case 12:case 18:e.next=23;break;case 14:if(n=t.type,r=t.animation,"view"!==n){e.next=20;break}return e.next=18,this.fitView(t.options,r);case 20:if("center"!==n){e.next=23;break}return e.next=23,this.fitCenter(r);case 23:case"end":return e.stop()}}),e,this)})))}},{key:"focusElement",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(r=this.context.viewport)||void 0===r?void 0:r.focusElements(Array.isArray(e)?e:[e],{animation:t});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"zoomBy",value:function(e,t,n){return SK(this,void 0,void 0,u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"relative",scale:e,origin:n},t);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"zoomTo",value:function(e,t,n){return SK(this,void 0,void 0,u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.context.viewport.transform({mode:"absolute",scale:e,origin:n},t);case 1:case"end":return r.stop()}}),r,this)})))}},{key:"getZoom",value:function(){return this.context.viewport.getZoom()}},{key:"rotateBy",value:function(e,t,n){return SK(this,void 0,void 0,u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"relative",rotate:e,origin:n},t);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"rotateTo",value:function(e,t,n){return SK(this,void 0,void 0,u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"absolute",rotate:e,origin:n},t);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"getRotation",value:function(){return this.context.viewport.getRotation()}},{key:"translateBy",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.context.viewport.transform({mode:"relative",translate:e},t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"translateTo",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.context.viewport.transform({mode:"absolute",translate:e},t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"getPosition",value:function(){return kR([0,0],this.getCanvasByViewport([0,0]))}},{key:"translateElementBy",value:function(e,t){return SK(this,arguments,void 0,(function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return u().mark((function i(){var a,o,s,l,c,h;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=RE(e)?[e,null===(a=t)||void 0===a||a]:[P({},e,t),r],l=x(s,2),c=l[0],h=l[1],Object.entries(c).forEach((function(e){var t=x(e,2),r=t[0],i=t[1];return n.context.model.translateNodeLikeBy(r,i)})),i.next=4,null===(o=n.context.element.draw({animation:h,stage:"translate"}))||void 0===o?void 0:o.finished;case 4:case"end":return i.stop()}}),i)}))()}))}},{key:"translateElementTo",value:function(e,t){return SK(this,arguments,void 0,(function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return u().mark((function i(){var a,o,s,l,c,h;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=RE(e)?[e,null===(a=t)||void 0===a||a]:[P({},e,t),r],l=x(s,2),c=l[0],h=l[1],Object.entries(c).forEach((function(e){var t=x(e,2),r=t[0],i=t[1];return n.context.model.translateNodeLikeTo(r,i)})),i.next=4,null===(o=n.context.element.draw({animation:h,stage:"translate"}))||void 0===o?void 0:o.finished;case 4:case"end":return i.stop()}}),i)}))()}))}},{key:"getElementPosition",value:function(e){return this.context.model.getElementPosition(e)}},{key:"getElementRenderStyle",value:function(e){return PG(this.context.element.getElement(e).attributes,["context"])}},{key:"setElementVisibility",value:function(e,t){return SK(this,arguments,void 0,(function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return u().mark((function i(){var a,o,s,l,c,h,d,f,p,v;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=RE(e)?[e,null===(a=t)||void 0===a||a]:[P({},e,t),r],l=x(s,2),c=l[0],h=l[1],d={nodes:[],edges:[],combos:[]},Object.entries(c).forEach((function(e){var t=x(e,2),r=t[0],i=t[1],a=n.getElementType(r);d["".concat(a,"s")].push({id:r,style:{visibility:i}})})),f=n.context,p=f.model,v=f.element,p.preventUpdateNodeLikeHierarchy((function(){p.updateData(d)})),i.next=7,null===(o=v.draw({animation:h,stage:"visibility"}))||void 0===o?void 0:o.finished;case 7:case"end":return i.stop()}}),i)}))()}))}},{key:"showElement",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(e)?e:[e],n.next=3,this.setElementVisibility(Object.fromEntries(r.map((function(e){return[e,"visible"]}))),t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"hideElement",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(e)?e:[e],n.next=3,this.setElementVisibility(Object.fromEntries(r.map((function(e){return[e,"hidden"]}))),t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getElementVisibility",value:function(e){var t,n,r=this.context.element.getElement(e);return null!==(n=null===(t=null===r||void 0===r?void 0:r.style)||void 0===t?void 0:t.visibility)&&void 0!==n?n:"visible"}},{key:"setElementZIndex",value:function(e,t){return SK(this,void 0,void 0,u().mark((function n(){var r,i,a,o,s,l,c=this;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={nodes:[],edges:[],combos:[]},a=RE(e)?e:P({},e,t),Object.entries(a).forEach((function(e){var t=x(e,2),n=t[0],r=t[1],a=c.getElementType(n);i["".concat(a,"s")].push({id:n,style:{zIndex:r}})})),o=this.context,s=o.model,l=o.element,s.preventUpdateNodeLikeHierarchy((function(){return s.updateData(i)})),n.next=7,null===(r=l.draw({animation:!1,stage:"zIndex"}))||void 0===r?void 0:r.finished;case 7:case"end":return n.stop()}}),n,this)})))}},{key:"frontElement",value:function(e){return SK(this,void 0,void 0,u().mark((function t(){var n,r,i,a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.isArray(e)?e:[e],r=this.context.model,i={},n.map((function(e){var t=r.getFrontZIndex(e);if("combo"===r.getElementType(e)){var n=r.getAncestorsData(e,NC).at(-1)||a.getComboData(e),o=[n].concat(I(r.getDescendantsData(eR(n)))),s=t-Cq(n);o.forEach((function(e){i[eR(e)]=a.getElementZIndex(eR(e))+s}));var u=hD(o.map(eR),(function(e){return r.getRelatedEdgesData(e)}));u.internal.forEach((function(e){var t=eR(e);i[t]=a.getElementZIndex(t)+s}))}else i[e]=t})),t.next=6,this.setElementZIndex(i);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getElementZIndex",value:function(e){return Cq(this.context.model.getElementDataById(e))}},{key:"setElementState",value:function(e,t){return SK(this,arguments,void 0,(function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return u().mark((function i(){var a,o,s,l,c,h,d,f;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=RE(e)?[e,null===(a=t)||void 0===a||a]:[P({},e,t),r],l=x(s,2),c=l[0],h=l[1],d=function(e){return e?Array.isArray(e)?e:[e]:[]},f={nodes:[],edges:[],combos:[]},Object.entries(c).forEach((function(e){var t=x(e,2),r=t[0],i=t[1],a=n.getElementType(r);f["".concat(a,"s")].push({id:r,states:d(i)})})),n.updateData(f),i.next=7,null===(o=n.context.element.draw({animation:h,stage:"state"}))||void 0===o?void 0:o.finished;case 7:case"end":return i.stop()}}),i)}))()}))}},{key:"getElementState",value:function(e){return this.context.model.getElementState(e)}},{key:"getElementRenderBounds",value:function(e){return this.context.element.getElement(e).getRenderBounds()}},{key:"collapseElement",value:function(e){return SK(this,arguments,void 0,(function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u().mark((function r(){var i,a,o,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.context,a=i.model,o=i.element,!fN(a.getNodeLikeData([e])[0])){r.next=3;break}return r.abrupt("return");case 3:if(!t.isCollapsingExpanding){r.next=5;break}return r.abrupt("return");case 5:return"boolean"===typeof n&&(n={animation:n,align:!0}),s=a.getElementType(e),r.next=9,t.frontElement(e);case 9:if(t.isCollapsingExpanding=!0,t.setElementCollapsibility(e,!0),"node"!==s){r.next=16;break}return r.next=14,o.collapseNode(e,n);case 14:r.next=19;break;case 16:if("combo"!==s){r.next=19;break}return r.next=19,o.collapseCombo(e,!!n.animation);case 19:t.isCollapsingExpanding=!1;case 20:case"end":return r.stop()}}),r)}))()}))}},{key:"expandElement",value:function(e){return SK(this,arguments,void 0,(function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u().mark((function r(){var i,a,o,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.context,a=i.model,o=i.element,fN(a.getNodeLikeData([e])[0])){r.next=3;break}return r.abrupt("return");case 3:if(!t.isCollapsingExpanding){r.next=5;break}return r.abrupt("return");case 5:if("boolean"===typeof n&&(n={animation:n,align:!0}),s=a.getElementType(e),t.isCollapsingExpanding=!0,t.setElementCollapsibility(e,!1),"node"!==s){r.next=14;break}return r.next=12,o.expandNode(e,n);case 12:r.next=17;break;case 14:if("combo"!==s){r.next=17;break}return r.next=17,o.expandCombo(e,!!n.animation);case 17:t.isCollapsingExpanding=!1;case 18:case"end":return r.stop()}}),r)}))()}))}},{key:"setElementCollapsibility",value:function(e,t){var n=this.getElementType(e);"node"===n?this.updateNodeData([{id:e,style:{collapsed:t}}]):"combo"===n&&this.updateComboData([{id:e,style:{collapsed:t}}])}},{key:"toDataURL",value:function(){return SK(this,arguments,void 0,(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.context.canvas.toDataURL(t));case 1:case"end":return n.stop()}}),n)}))()}))}},{key:"getCanvasByViewport",value:function(e){return this.context.canvas.getCanvasByViewport(e)}},{key:"getViewportByCanvas",value:function(e){return this.context.canvas.getViewportByCanvas(e)}},{key:"getClientByCanvas",value:function(e){return this.context.canvas.getClientByCanvas(e)}},{key:"getCanvasByClient",value:function(e){return this.context.canvas.getCanvasByClient(e)}},{key:"getViewportCenter",value:function(){return this.context.viewport.getViewportCenter()}},{key:"getCanvasCenter",value:function(){return this.context.viewport.getCanvasCenter()}},{key:"on",value:function(e,n,r){return Xn(S(t.prototype),"on",this).call(this,e,n,r)}},{key:"once",value:function(e,n){return Xn(S(t.prototype),"once",this).call(this,e,n)}},{key:"off",value:function(e,n){return Xn(S(t.prototype),"off",this).call(this,e,n)}}])}(fI);_K.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var MK=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"beforeDraw",value:function(e){var t=e.add,n=e.update,r=this.context.model;return[].concat(I(t.edges.entries()),I(n.edges.entries())).forEach((function(e){var t=x(e,2)[1];TK(r,t)})),e}}])}(aq),TK=function(e,t){var n=t.source,r=t.target,i=e.getElementDataById(n),a=e.getElementDataById(r),o=dD(i,(function(t){return e.getParentData(t,NC)})),s=dD(a,(function(t){return e.getParentData(t,NC)})),u={sourceNode:eR(o),targetNode:eR(s)};return t.style?Object.assign(t.style,u):t.style=u,t},AK=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,xR({},t.defaultOptions,n)])).assignSizeByCentrality=function(e,t,n,r,i,a){var o=[t,n],s=[r[0],i[0]],u=[r[1],i[1]],l=[r[2],i[2]],c=function(e,t){if("function"===typeof a)return a(e,o,t);switch(a){case"linear":return function(e,t,n){var r=x(t,2),i=r[0],a=r[1],o=x(n,2),s=o[0],u=o[1];return a===i?s:s+(e-i)/(a-i)*(u-s)}(e,o,t);case"log":return function(e,t,n){var r=x(t,2),i=r[0],a=r[1],o=x(n,2),s=o[0],u=o[1];return s+Math.log(e-i+1)/Math.log(a-i+1)*(u-s)}(e,o,t);case"pow":return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=x(t,2),a=i[0],o=i[1],s=x(n,2),u=s[0],l=s[1];return u+Math.pow((e-a)/(o-a),r)*(l-u)}(e,o,t,2);case"sqrt":return function(e,t,n){var r=x(t,2),i=r[0],a=r[1],o=x(n,2),s=o[0],u=o[1];return s+Math.sqrt((e-i)/(a-i))*(u-s)}(e,o,t);default:return t[0]}};return[c(e,s),c(e,u),c(e,l)]},r}return C(t,e),p(t,[{key:"beforeDraw",value:function(e){var t=this,n=this.context.model.getNodeData(),r=kN(this.options.maxSize),i=kN(this.options.minSize),a=this.getCentralities(this.options.centrality),o=a.size>0?Math.max.apply(Math,I(a.values())):0,s=a.size>0?Math.min.apply(Math,I(a.values())):0;return n.forEach((function(n){var u,l=t.assignSizeByCentrality(a.get(eR(n))||0,s,o,i,r,t.options.scale),c=null===(u=t.context.element)||void 0===u?void 0:u.getElement(eR(n)),h={size:l};t.assignLabelStyle(h,l,n,c),c&&uq(h,c.attributes)||sq(e,c?"update":"add","node",xR(n,{style:h}),!0)})),e}},{key:"assignLabelStyle",value:function(e,t,n,r){var i,a=r?r.config.style:null===(i=this.context.element)||void 0===i?void 0:i.getElementComputedStyle("node",n);if(Object.assign(e,CL(a,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){var o=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:o,labelLineHeight:o+lP(e.labelPadding)})}return e}},{key:"getLabelSizeByNodeSize",value:function(e,t,n){var r=Math.min.apply(Math,I(e))/2,i=x(Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,t],2),a=i[0],o=i[1];return Math.min(o,Math.max(r,a))}},{key:"getCentralities",value:function(e){var t=this.context.model,n=t.getData();if("function"===typeof e)return e(n);var r=t.getRelatedEdgesData.bind(t);return rR(n,r,e)}}])}(aq);AK.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};var CK=function(e){function t(e,n){return v(this,t),T(this,t,[e,Object.assign({},t.defaultOptions,n)])}return C(t,e),p(t,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"afterLayout",value:function(){var e,t=this,n=UR(this.ref),r=this.context,i=r.graph,a=r.model;null===(e=a.getData().nodes)||void 0===e||e.forEach((function(e){var r;if(eR(e)!==eR(t.ref)){var o=LR(kR(UR(e),n)),s=Math.abs(o)>Math.PI/2,u=!e.children||0===e.children.length,l=eR(e),c=null===(r=t.context.element)||void 0===r?void 0:r.getElement(l);if(c&&c.isVisible()){var h=(u?1:-1)*(kN(i.getElementRenderStyle(l).size)[0]/2+t.options.offset),d=[["translate",h*Math.cos(o),h*Math.sin(o)],["rotate",s?ik(o)+180:ik(o)]];a.updateNodeData([{id:eR(e),style:{labelTextAlign:s===u?"right":"left",labelTextBaseline:"middle",labelTransform:d}}])}}})),i.draw()}}])}(aq);CK.defaultOptions={offset:5};var PK=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"],RK=function(e){function t(e,n){var r;return v(this,t),(r=T(this,t,[e,Object.assign({},t.defaultOptions,n)])).cacheMergeStyle=new Map,r.getAffectedParallelEdges=function(e){var t=e.add.edges,n=e.update,i=n.nodes,a=n.edges,o=n.combos,s=e.remove.edges,u=r.context.model,l=new Map,c=function(e,t){u.getRelatedEdgesData(t).forEach((function(e){return!l.has(eR(e))&&l.set(eR(e),e)}))};i.forEach(c),o.forEach(c);var h=function(e){var t=u.getEdgeData().map((function(e){return TK(u,e)}));OK(e,t,!0).forEach((function(e){return!l.has(eR(e))&&l.set(eR(e),e)}))};if(s.size&&s.forEach(h),t.size&&t.forEach(h),a.size){var d=YH(XH(u.getChanges())).update.edges;a.forEach((function(e){var t;h(e);var n=null===(t=d.find((function(t){return eR(t.value)===eR(e)})))||void 0===t?void 0:t.original;n&&!LK(e,n)&&h(n)}))}IN(r.options.edges)||l.forEach((function(e,t){return!r.options.edges.includes(t)&&l.delete(t)}));var f=u.getEdgeData().map(eR);return new Map(I(l).sort((function(e,t){return f.indexOf(e[0])-f.indexOf(t[0])})))},r.applyBundlingStyle=function(e,t,n){var i=NK(t),a=i.edgeMap,o=i.reverses;a.forEach((function(t){t.forEach((function(t,i,a){var s,u=a.length,l=t.style||{};if(t.source===t.target){var c=PK.length;l.loopPlacement=PK[i%c],l.loopDist=Math.floor(i/c)*n+50}else if(1===u)l.curveOffset=0;else{var h=(i%2===0?1:-1)*(o["".concat(t.source,"|").concat(t.target,"|").concat(i)]?-1:1);l.curveOffset=u%2===1?h*Math.ceil(i/2)*n*2:h*(Math.floor(i/2)*n*2+n)}var d=Object.assign(t,{type:"quadratic",style:l}),f=null===(s=r.context.element)||void 0===s?void 0:s.getElement(eR(t));f&&uq(d.style,f.attributes)||sq(e,f?"update":"add","edge",d,!0)}))}))},r.resetEdgeStyle=function(e){var t=e.style||{},n=r.cacheMergeStyle.get(eR(e))||{};return Object.keys(n).forEach((function(r){AC(t[r],n[r])&&(e[r]?t[r]=e[r]:delete t[r])})),Object.assign(e,{style:t})},r.applyMergingStyle=function(e,t){var n=NK(t),i=n.edgeMap,a=n.reverses;i.forEach((function(t){var n;if(1!==t.length){var i=t.map((function(e,t){var n=e.source,r=e.target,i=e.style,o=void 0===i?{}:i,s=o.startArrow,u=o.endArrow,l={},c=x(a["".concat(n,"|").concat(r,"|").concat(t)]?["endArrow","startArrow"]:["startArrow","endArrow"],2),h=c[0],d=c[1];return CE(s)&&(l[h]=s),CE(u)&&(l[d]=u),l})).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{});t.forEach((function(t,n,a){var o;if(0===n){var s=Object.assign({},PE(r.options.style)?r.options.style(a):r.options.style,{childrenData:a});r.cacheMergeStyle.set(eR(t),s);var u=Object.assign(Object.assign({},t),{type:"line",style:Object.assign(Object.assign(Object.assign({},t.style),i),s)}),l=null===(o=r.context.element)||void 0===o?void 0:o.getElement(eR(t));l&&uq(u.style,l.attributes)||sq(e,l?"update":"add","edge",u,!0)}else sq(e,"remove","edge",t)}))}else{var o=t[0],s=null===(n=r.context.element)||void 0===n?void 0:n.getElement(eR(o)),u=r.resetEdgeStyle(o);s&&uq(u,s.attributes)||sq(e,s?"update":"add","edge",u)}}))},r}return C(t,e),p(t,[{key:"beforeDraw",value:function(e){var t=this.getAffectedParallelEdges(e);return 0===t.size||("bundle"===this.options.mode?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e}}])}(aq);RK.defaultOptions={mode:"bundle",distance:15};var NK=function(e){var t,n=new Map,r=new Set,i={},a=D(e);try{for(a.s();!(t=a.n()).done;){var o=x(t.value,2),s=o[0],u=o[1];if(!r.has(s)){var l=u.source,c=u.target,h="".concat(l,"-").concat(c);n.has(h)||n.set(h,[]),n.get(h).push(u),r.add(s);var d,f=D(e);try{for(f.s();!(d=f.n()).done;){var p=x(d.value,2),v=p[0],g=p[1];r.has(v)||LK(u,g)&&(n.get(h).push(g),r.add(v),l===g.target&&c===g.source&&(i["".concat(g.source,"|").concat(g.target,"|").concat(n.get(h).length-1)]=!0))}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){a.e(m)}finally{a.f()}return{edgeMap:n,reverses:i}},OK=function(e,t,n){return t.filter((function(t){return(n||eR(t)!==eR(e))&&LK(t,e)}))},LK=function(e,t){var n=e.style||{},r=n.sourceNode,i=n.targetNode,a=t.style||{},o=a.sourceNode,s=a.targetNode;return r===o&&i===s||r===s&&i===o},DK=function(e){function t(){return v(this,t),T(this,t,arguments)}return C(t,e),p(t,[{key:"beforeDraw",value:function(e,t){if("visibility"===t.stage)return e;var n=this.context.model,r=e.update,i=r.nodes,a=r.edges,o=r.combos,s=function(e,t){n.getRelatedEdgesData(t).forEach((function(e){return!a.has(eR(e))&&a.set(eR(e),e)}))};return i.forEach(s),o.forEach(s),e}}])}(aq),IK={animation:{"combo-collapse":$C,"combo-expand":eP,"node-collapse":KC,"node-expand":ZC,"path-in":JC,"path-out":QC,fade:[{fields:["opacity"]}],translate:[{fields:["x","y"]}]},behavior:{"brush-select":rN,"click-select":dN,"collapse-expand":nI,"create-edge":oI,"drag-canvas":lI,"drag-element-force":TI,"drag-element":hI,"fix-element-size":CI,"focus-element":RI,"hover-activate":NI,"lasso-select":OI,"auto-adapt-label":gR,"optimize-viewport-transform":LI,"scroll-canvas":II,"zoom-canvas":UI},combo:{circle:BL,rect:zL},edge:{cubic:wD,line:MD,polyline:FD,quadratic:UD,"cubic-horizontal":kD,"cubic-radial":SD,"cubic-vertical":_D},layout:{"antv-dagre":XU,"combo-combined":YB,"compact-box":BI.compactBox,"d3-force":Bz,"force-atlas2":qz,circular:ZU,concentric:nB,dagre:jz,dendrogram:BI.dendrogram,fishbone:wG,force:_B,fruchterman:Zz,grid:Qz,indented:BI.indented,mds:GB,mindmap:BI.mindmap,radial:hG,random:yG,snake:TG},node:{circle:rO,diamond:aO,ellipse:cO,hexagon:hO,html:RL,image:OL,rect:LL,star:DL,donut:sO,triangle:IL},palette:{spectral:["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],tableau:["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],oranges:["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],greens:["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],blues:["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"]},theme:{dark:rq,light:iq},plugin:{"bubble-sets":MH,"edge-bundling":NH,"edge-filter-lens":GH,"grid-line":WH,background:DG,contextmenu:RH,fisheye:jH,fullscreen:VH,history:ZH,hull:aj,legend:EV,minimap:wV,snapline:TV,timebar:CY,toolbar:DY,tooltip:VY,watermark:QY},transform:{"arrange-draw-order":oq,"collapse-expand-combo":lq,"collapse-expand-node":hq,"get-edge-actual-ends":MK,"map-node-size":AK,"place-radial-labels":CK,"process-parallel-edges":RK,"update-related-edges":DK},shape:{circle:AT,ellipse:RT,group:NT,html:LT,image:qN,line:FT,path:BT,polygon:GT,polyline:jT,rect:VT,text:XT,label:GN,badge:HN}};Object.entries(IK).forEach((function(e){var t=x(e,2),n=t[0],r=t[1];Object.entries(r).forEach((function(e){var t=x(e,2),r=t[0],i=t[1];!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=LC[e][t];!r&&i?i!==n&&BC.warn("The extension ".concat(t," of ").concat(e," has been registered before.")):Object.assign(LC[e],P({},t,n))}(n,r,i)}))}));var FK="CircuitSimulation_view__rrajR";var UK=function(){var e=(0,i.useRef)(null),t=null;return(0,i.useEffect)((function(){!function(){if(e){var n=new _K({container:e.current});t=n,n.render(),n.setBehaviors(["drag-canvas","create-edge"]),t.addNodeData([{id:"rect",type:"rect",style:{x:100,y:100,labelText:"\u706f\u6ce1",port:!0,ports:[{key:"port-1",placement:[1,1],r:8,stroke:"#31d0c6",fill:"red"},{key:"port-2",placement:[0,1],r:8,stroke:"#31d0c6",fill:"blue"}]}},{id:"r2",type:"html",style:{x:200,y:200,innerHTML:"<div>\u5355\u5f00\u5f00\u5173</div>",port:!0,ports:[{key:"port-1",placement:[1,1],r:8,stroke:"#31d0c6",fill:"red"},{key:"port-2",placement:[0,1],r:8,stroke:"#31d0c6",fill:"blue"}]}}])}}()}),[]),(0,By.jsx)(i.Fragment,{children:(0,By.jsx)("div",{ref:e,className:FK})})};var BK=function(){return(0,By.jsx)(UK,{})},zK=function(e,t){return Ne({basename:null==t?void 0:t.basename,future:Vt({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),X((function(e,t){var n=W(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash,u=void 0===s?"":s;return i.startsWith("/")||i.startsWith(".")||(i="/"+i),j("",{pathname:i,search:o,hash:u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:V(t))}),(function(e,t){G("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||Wt(),routes:e,mapRouteProperties:jt,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",element:(0,By.jsx)("h1",{children:"Test"})},{path:"/dxfview",element:(0,By.jsx)(Gy,{})},{path:"/simulation/circuit",element:(0,By.jsx)(BK,{})}]);o.createRoot(document.getElementById("root")).render((0,By.jsx)($t,{router:zK}))}()}();
//# sourceMappingURL=main.92db0fdc.js.map